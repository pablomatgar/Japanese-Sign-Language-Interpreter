/*! For license information please see app.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(666)},883:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.loadFromFiles=t.load=t.loadTruncatedMobileNet=t.CustomMobileNet=t.getTopKClasses=t.IMAGE_SIZE=void 0;var s=n(439),o=n(439),i=n(233),l=n(542),u=n(572),c=.25,p=.35;t.IMAGE_SIZE=224;var d=function(e){return e.packageVersion=e.packageVersion||u.version,e.packageName=e.packageName||"@teachablemachine/image",e.timeStamp=e.timeStamp||(new Date).toISOString(),e.userMetadata=e.userMetadata||{},e.modelName=e.modelName||"untitled",e.labels=e.labels||[],e.imageSize=e.imageSize||t.IMAGE_SIZE,e},h=function(e,t){if(1===e){if(.25!==t&&.5!==t&&.75!==t&&1!==t)return console.warn("Invalid alpha. Options are: 0.25, 0.50, 0.75 or 1.00."),console.log("Loading model with alpha: ",c.toFixed(2)),c}else if(.35!==t&&.5!==t&&.75!==t&&1!==t)return console.warn("Invalid alpha. Options are: 0.35, 0.50, 0.75 or 1.00."),console.log("Loading model with alpha: ",p.toFixed(2)),p;return t},f=function(e){return r(void 0,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return"string"!=typeof e?[3,3]:[4,fetch(e)];case 1:return[4,n.sent().json()];case 2:return t=n.sent(),[3,4];case 3:if(!(r=e)||!Array.isArray(r.labels))throw new Error("Invalid Metadata provided");t=e,n.label=4;case 4:return[2,d(t)]}var r}))}))};function m(e,t,n){return void 0===n&&(n=3),r(this,void 0,void 0,(function(){var r;return a(this,(function(a){switch(a.label){case 0:return[4,t.data()];case 1:return r=a.sent(),[2,s.tidy((function(){n=Math.min(n,r.length);for(var t=[],a=0;a<r.length;a++)t.push({value:r[a],index:a});t.sort((function(e,t){return t.value-e.value}));var s=new Float32Array(n),o=new Int32Array(n);for(a=0;a<n;a++)s[a]=t[a].value,o[a]=t[a].index;var i=[];for(a=0;a<o.length;a++)i.push({className:e[o[a]],probability:s[a]});return i}))]}}))}))}t.getTopKClasses=m;var g=function(){function e(e,t){this.model=e,this._metadata=d(t)}return Object.defineProperty(e,"EXPECTED_IMAGE_SIZE",{get:function(){return t.IMAGE_SIZE},enumerable:!1,configurable:!0}),e.prototype.getMetadata=function(){return this._metadata},e.prototype.getTotalClasses=function(){return this.model.output.shape[1]},e.prototype.getClassLabels=function(){return this._metadata.labels},e.prototype.predictTopK=function(e,t,n){return void 0===t&&(t=10),void 0===n&&(n=!1),r(this,void 0,void 0,(function(){var r,u,c,p=this;return a(this,(function(a){switch(a.label){case 0:return r=l.cropTo(e,this._metadata.imageSize,n),u=s.tidy((function(){var e=i.capture(r,p._metadata.grayscale);return p.model.predict(e)})),[4,m(this._metadata.labels,u,t)];case 1:return c=a.sent(),o.dispose(u),[2,c]}}))}))},e.prototype.predict=function(e,t){return void 0===t&&(t=!1),r(this,void 0,void 0,(function(){var n,r,u,c,p,d=this;return a(this,(function(a){switch(a.label){case 0:return n=l.cropTo(e,this._metadata.imageSize,t),[4,(r=s.tidy((function(){var e=i.capture(n,d._metadata.grayscale);return d.model.predict(e)}))).data()];case 1:for(u=a.sent(),c=[],p=0;p<u.length;p++)c.push({className:this._metadata.labels[p],probability:u[p]});return o.dispose(r),[2,c]}}))}))},e.prototype.dispose=function(){this.truncatedModel.dispose()},e}();t.CustomMobileNet=g,t.loadTruncatedMobileNet=function(e){return r(this,void 0,void 0,(function(){var n,r,o,i,l,u,d;return a(this,(function(a){switch(a.label){case 0:return n=function(e){if((e=e||{}).checkpointUrl&&e.trainingLayer)return(e.alpha||e.version)&&console.warn("Checkpoint URL passed to modelOptions, alpha options are ignored"),[e.checkpointUrl,e.trainingLayer];if(e.version=e.version||1,1===e.version){e.alpha=e.alpha||c,e.alpha=h(e.version,e.alpha),console.log("Loading mobilenet "+e.version+" and alpha "+e.alpha);var n=e.alpha.toFixed(2);return"1.00"===n&&(n="1.0"),["https://storage.googleapis.com/tfjs-models/tfjs/mobilenet_v1_"+n+"_"+t.IMAGE_SIZE+"/model.json","conv_pw_13_relu"]}if(2===e.version)return e.alpha=e.alpha||p,e.alpha=h(e.version,e.alpha),console.log("Loading mobilenet "+e.version+" and alpha "+e.alpha),["https://storage.googleapis.com/teachable-machine-models/mobilenet_v2_weights_tf_dim_ordering_tf_kernels_"+e.alpha.toFixed(2)+"_"+t.IMAGE_SIZE+"_no_top/model.json","out_relu"];throw new Error("MobileNet V"+e.version+" doesn't exist")}(e),r=n[0],o=n[1],[4,s.loadLayersModel(r)];case 1:return i=a.sent(),e&&1===e.version?(l=i.getLayer(o),u=s.model({inputs:i.inputs,outputs:l.output}),(d=s.sequential()).add(u),d.add(s.layers.flatten()),[2,d]):(l=i.getLayer(o),u=s.model({inputs:i.inputs,outputs:l.output}),(d=s.sequential()).add(u),d.add(s.layers.globalAveragePooling2d({})),[2,d])}}))}))},t.load=function(e,t){return r(this,void 0,void 0,(function(){var n,r;return a(this,(function(a){switch(a.label){case 0:return[4,s.loadLayersModel(e)];case 1:return n=a.sent(),t?[4,f(t)]:[3,3];case 2:return r=a.sent(),[3,4];case 3:r=null,a.label=4;case 4:return[2,new g(n,r)]}}))}))},t.loadFromFiles=function(e,t,n){return r(this,void 0,void 0,(function(){var r,o,i;return a(this,(function(a){switch(a.label){case 0:return[4,s.loadLayersModel(s.io.browserFiles([e,t]))];case 1:return r=a.sent(),[4,new Response(n).json()];case 2:return o=a.sent(),n?[4,f(o)]:[3,4];case 3:return i=a.sent(),[3,5];case 4:i=null,a.label=5;case 5:return[2,new g(r,i)]}}))}))}},211:function(e,t,n){"use strict";var r=n(883);Object.defineProperty(t,"zD",{enumerable:!0,get:function(){return r.load}});var a=n(425);var s=n(590);var o=n(572)},425:function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.createTeachable=t.TeachableMobileNet=void 0;var i=n(439),l=n(439),u=n(233),c=n(883),p=n(377);function d(e,t){for(var n,r=e.length,a=e.slice(),s=r-1;s>0;s-=1){var o=void 0;n=[a[o=t?Math.floor(t()*(s+1)):Math.floor(Math.random()*(s+1))],a[s]],a[s]=n[0],a[o]=n[1]}return a}var h=function(e){function t(t,n){var r=e.call(this,i.sequential(),n)||this;return r.totalSamples=0,r.examples=[],r.truncatedModel=t,r}return a(t,e),Object.defineProperty(t.prototype,"asSequentialModel",{get:function(){return this.model},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTrained",{get:function(){return!!this.model&&this.model.layers&&this.model.layers.length>2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPrepared",{get:function(){return!!this.trainDataset},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numClasses",{get:function(){return this._metadata.labels.length},enumerable:!1,configurable:!0}),t.prototype.addExample=function(e,t){return s(this,void 0,void 0,(function(){var n,r,a;return o(this,(function(s){var o;return n="object"==typeof(o=t).dataId&&"object"==typeof o.shape?t:u.capture(t,this._metadata.grayscale),r=this.truncatedModel.predict(n),a=r.dataSync(),n.dispose(),r.dispose(),this.examples[e].push(a),this.totalSamples++,[2]}))}))},t.prototype.predict=function(t,n){return void 0===n&&(n=!1),s(this,void 0,void 0,(function(){return o(this,(function(r){if(!this.model)throw new Error("Model has not been trained yet, called train() first");return[2,e.prototype.predict.call(this,t,n)]}))}))},t.prototype.predictTopK=function(t,n,r){return void 0===n&&(n=10),void 0===r&&(r=!1),s(this,void 0,void 0,(function(){return o(this,(function(a){if(!this.model)throw new Error("Model has not been trained yet, called train() first");return[2,e.prototype.predictTopK.call(this,t,n,r)]}))}))},t.prototype.prepare=function(){for(var e in this.examples)if(0===e.length)throw new Error("Add some examples before training");var t=this.convertToTfDataset();this.trainDataset=t.trainDataset,this.validationDataset=t.validationDataset},t.prototype.convertToTfDataset=function(){for(var e=0;e<this.examples.length;e++)this.examples[e]=d(this.examples[e],this.seed);var t=[],n=[],r=function(e){var r,s,o,i=(r=e,s=a.numClasses,(o=new Array(s).fill(0))[r]=1,o),l=a.examples[e].length,u=l-Math.ceil(.15*l),c=a.examples[e].slice(0,u).map((function(e){return{data:e,label:i}})),p=a.examples[e].slice(u).map((function(e){return{data:e,label:i}}));t=t.concat(c),n=n.concat(p)},a=this;for(e=0;e<this.examples.length;e++)r(e);t=d(t,this.seed),n=d(n,this.seed);var s=i.data.array(t.map((function(e){return e.data}))),o=i.data.array(n.map((function(e){return e.data}))),l=i.data.array(t.map((function(e){return e.label}))),u=i.data.array(n.map((function(e){return e.label})));return{trainDataset:i.data.zip({xs:s,ys:l}),validationDataset:i.data.zip({xs:o,ys:u})}},t.prototype.save=function(e,t){return s(this,void 0,void 0,(function(){return o(this,(function(n){return[2,this.model.save(e,t)]}))}))},t.prototype.train=function(e,t){return void 0===t&&(t={}),s(this,void 0,void 0,(function(){var n,r,a,s,u,c,p,d,h,f=this;return o(this,(function(o){switch(o.label){case 0:if(n=t.onTrainEnd||function(){},t.onTrainEnd=function(e){f.__stopTrainingResolve&&(f.__stopTrainingResolve(),f.__stopTrainingResolve=null),n(e)},this.isPrepared||this.prepare(),r=this.getLabels().length,l.util.assert(r===this.numClasses,(function(){return"Can not train, has "+r+" labels and "+f.numClasses+" classes"})),a=this.truncatedModel.outputs[0].shape.slice(1),s=i.util.sizeFromShape(a),u=this.seed?i.initializers.varianceScaling({seed:3.14}):i.initializers.varianceScaling({}),this.trainingModel=i.sequential({layers:[i.layers.dense({inputShape:[s],units:e.denseUnits,activation:"relu",kernelInitializer:u,useBias:!0}),i.layers.dense({kernelInitializer:u,useBias:!1,activation:"softmax",units:this.numClasses})]}),c=i.train.adam(e.learningRate),this.trainingModel.compile({optimizer:c,loss:"categoricalCrossentropy",metrics:["accuracy"]}),!(e.batchSize>0))throw new Error("Batch size is 0 or NaN. Please choose a non-zero fraction");return p=this.trainDataset.batch(e.batchSize),d=this.validationDataset.batch(e.batchSize),[4,this.trainingModel.fitDataset(p,{epochs:e.epochs,validationData:d,callbacks:t})];case 1:return o.sent(),(h=i.sequential()).add(this.truncatedModel),h.add(this.trainingModel),this.model=h,c.dispose(),[2,this.model]}}))}))},t.prototype.prepareDataset=function(){for(var e=0;e<this.numClasses;e++)this.examples[e]=[]},t.prototype.setLabel=function(e,t){this._metadata.labels[e]=t},t.prototype.setLabels=function(e){this._metadata.labels=e,this.prepareDataset()},t.prototype.getLabel=function(e){return this._metadata.labels[e]},t.prototype.getLabels=function(){return this._metadata.labels},t.prototype.setName=function(e){this._metadata.modelName=e},t.prototype.getName=function(){return this._metadata.modelName},t.prototype.stopTraining=function(){var e=this;return new Promise((function(t,n){e.trainingModel.stopTraining=!0,e.__stopTrainingResolve=t}))},t.prototype.dispose=function(){this.trainingModel.dispose(),e.prototype.dispose.call(this)},t.prototype.calculateAccuracyPerClass=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,a,l,u,c,p,d,h,f,m,g,v,b,y,w,x=this;return o(this,(function(k){switch(k.label){case 0:return e=this.validationDataset.mapAsync((function(e){return s(x,void 0,void 0,(function(){return o(this,(function(t){return[2,e.xs]}))}))})),t=this.validationDataset.mapAsync((function(e){return s(x,void 0,void 0,(function(){return o(this,(function(t){return[2,e.ys]}))}))})),n=Math.min(t.size,32),r=Math.ceil(t.size/n),a=e.batch(n),l=t.batch(n),[4,a.iterator()];case 1:return u=k.sent(),[4,l.iterator()];case 2:c=k.sent(),p=[],d=[],w=0,k.label=3;case 3:return w<r?[4,u.next()]:[3,7];case 4:return h=k.sent(),f=this.trainingModel.predict(h.value),m=f.argMax(1),p.push(m),[4,c.next()];case 5:g=k.sent(),v=g.value.argMax(1),d.push(v),h.value.dispose(),f.dispose(),g.value.dispose(),k.label=6;case 6:return w++,[3,3];case 7:if(b=i.concat(d),y=i.concat(p),1!==r)for(w=0;w<p.length;w++)p[w].dispose(),d[w].dispose();return[2,{reference:b,predictions:y}]}}))}))},t.prototype.setSeed=function(e){this.seed=p(e)},t}(c.CustomMobileNet);t.TeachableMobileNet=h,t.createTeachable=function(e,t){return s(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return[4,c.loadTruncatedMobileNet(t)];case 1:return n=r.sent(),[2,new h(n,e)]}}))}))}},542:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cropTo=t.resizeMinTo=t.resizeMaxTo=t.resize=void 0;var n=function(){return document.createElement("canvas")};function r(e,t,r){return void 0===r&&(r=n()),r.width=e.width*t,r.height=e.height*t,r.getContext("2d").drawImage(e,0,0,r.width,r.height),r}t.resize=r,t.resizeMaxTo=function(e,t,a){return void 0===a&&(a=n()),r(e,t/Math.max(e.width,e.height),a)},t.resizeMinTo=function(e,t,a){return void 0===a&&(a=n()),r(e,t/Math.min(e.width,e.height),a)},t.cropTo=function(e,t,r,a){void 0===r&&(r=!1),void 0===a&&(a=n());var s=e.width,o=e.height;e instanceof HTMLVideoElement&&(s=e.videoWidth,o=e.videoHeight);var i=t/Math.min(s,o),l=Math.ceil(s*i),u=Math.ceil(o*i),c=l-t,p=u-t;a.width=a.height=t;var d=a.getContext("2d");return d.drawImage(e,-1*~~(c/2),-1*~~(p/2),l,u),r&&(d.scale(-1,1),d.drawImage(a,-1*t,0)),a}},233:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cropTensor=t.capture=void 0;var r=n(439);function a(e,t,n){var a=Math.min(e.shape[0],e.shape[1]),s=e.shape[0]/2-a/2,o=e.shape[1]/2-a/2;if(t&&!n){var i=e.slice([s,o,0],[a,a,3]);i=i.reshape([a*a,1,3]);return i=(i=r.mul(i,[.2989,.587,.114])).reshape([a,a,3]),i=r.sum(i,-1),i=r.expandDims(i,-1)}return e.slice([s,o,0],[a,a,3])}t.capture=function(e,t){return r.tidy((function(){return a(r.browser.fromPixels(e),t).expandDims(0).toFloat().div(r.scalar(127)).sub(r.scalar(1))}))},t.cropTensor=a},590:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}l((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Webcam=void 0;var o=n(368),i=n(542),l={facingMode:"user",frameRate:24},u=function(){function e(e,t,n){void 0===e&&(e=400),void 0===t&&(t=400),void 0===n&&(n=!1),this.width=e,this.height=t,this.flip=n}return e.prototype.getWebcam=function(e){if(void 0===e&&(e={}),!window.navigator.mediaDevices||!window.navigator.mediaDevices.getUserMedia)return Promise.reject("Your browser does not support WebRTC. Please try another one.");e.width=640;var t=function(e){return e.facingMode=e.facingMode||l.facingMode,e.frameRate=e.frameRate||l.frameRate,e.aspectRatio=e.aspectRatio||l.aspectRatio,e}(e),n=document.createElement("video");return window.navigator.mediaDevices.getUserMedia({video:t}).then((function(e){return n.srcObject=e,n.addEventListener("loadedmetadata",(function(e){var t=n.videoWidth,r=n.videoHeight;n.width=t,n.height=r})),n}),(function(){return Promise.reject("Could not open your camera. You may have denied access.")}))},e.prototype.setup=function(e){return void 0===e&&(e={}),a(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return this.webcam?[3,2]:(t=this,[4,this.getWebcam(e)]);case 1:t.webcam=n.sent(),this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height),n.label=2;case 2:return[2]}}))}))},e.prototype.play=function(){return this.webcam.play()},e.prototype.pause=function(){this.webcam.pause()},e.prototype.stop=function(){this.stopStreamedVideo(this.webcam)},e.prototype.update=function(){this.renderCameraToCanvas()},e.prototype.stopStreamedVideo=function(e){e.srcObject.getTracks().forEach((function(e){e.stop()})),e.srcObject=null},e.prototype.renderCameraToCanvas=function(){if(this.canvas&&this.webcam){var e=this.canvas.getContext("2d");if(0!==this.webcam.videoWidth){var t=i.cropTo(this.webcam,this.width,this.flip);e.drawImage(t,0,0)}}},r([o.default],e.prototype,"getWebcam",null),r([o.default],e.prototype,"setup",null),r([o.default],e.prototype,"play",null),r([o.default],e.prototype,"pause",null),r([o.default],e.prototype,"stop",null),r([o.default],e.prototype,"update",null),r([o.default],e.prototype,"stopStreamedVideo",null),r([o.default],e.prototype,"renderCameraToCanvas",null),e}();t.Webcam=u},572:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0;t.version="0.8.4-alpha2"},948:function(e,t,n){var r=n(140),a=n(980),s=n(730),o=n(405),i=n(26),l=n(865),u=n(721);u.alea=r,u.xor128=a,u.xorwow=s,u.xorshift7=o,u.xor4096=i,u.tychei=l,e.exports=u},140:function(e,t,n){var r;!function(e,a,s){function o(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.alea=l}(0,e=n.nmd(e),n.amdD)},865:function(e,t,n){var r;!function(e,a,s){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.tychei=l}(0,e=n.nmd(e),n.amdD)},980:function(e,t,n){var r;!function(e,a,s){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.xor128=l}(0,e=n.nmd(e),n.amdD)},26:function(e,t,n){var r;!function(e,a,s){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,s=t.i;return t.w=r=r+1640531527|0,n=a[s+34&127],e=a[s=s+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[s]=n^e,t.i=s,n+(r^r>>>16)|0},function(e,t){var n,r,a,s,o,i=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),a=0,s=-32;s<l;++s)t&&(r^=t.charCodeAt((s+32)%t.length)),0===s&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,s>=0&&(o=o+1640531527|0,a=0==(n=i[127&s]^=r+o)?a+1:0);for(a>=128&&(i[127&(t&&t.length||0)]=-1),a=127,s=512;s>0;--s)r=i[a+34&127],n=i[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,i[a]=r^n;e.w=o,e.X=i,e.i=a}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.xor4096=l}(0,e=n.nmd(e),n.amdD)},405:function(e,t,n){var r;!function(e,a,s){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.xorshift7=l}(0,e=n.nmd(e),n.amdD)},730:function(e,t,n){var r;!function(e,a,s){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.xorwow=l}(0,e=n.nmd(e),n.amdD)},721:function(e,t,n){var r;!function(a,s){var o,i=this,l=256,u=s.pow(l,6),c=s.pow(2,52),p=2*c,d=255;function h(e,t,n){var r=[],d=v(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,b(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(l):(e=new Uint8Array(l),(i.crypto||i.msCrypto).getRandomValues(e)),b(e)}catch(e){var t=i.navigator,n=t&&t.plugins;return[+new Date,i,n,i.screen,b(a)]}}():e,3),r),h=new f(r),y=function(){for(var e=h.g(6),t=u,n=0;e<c;)e=(e+n)*l,t*=l,n=h.g(1);for(;e>=p;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|h.g(4)},y.quick=function(){return h.g(4)/4294967296},y.double=y,v(b(h.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,h),e.state=function(){return m(h,{})}),n?(s.random=e,t):e})(y,d,"global"in t?t.global:this==s,t.state)}function f(e){var t,n=e.length,r=this,a=0,s=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<l;)o[a]=a++;for(a=0;a<l;a++)o[a]=o[s=d&s+e[a%n]+(t=o[a])],o[s]=t;(r.g=function(e){for(var t,n=0,a=r.i,s=r.j,o=r.S;e--;)t=o[a=d&a+1],n=n*l+o[d&(o[a]=o[s=d&s+t])+(o[s]=t)];return r.i=a,r.j=s,n})(l)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(g(e[n],t-1))}catch(e){}return r.length?r:"string"==a?e:e+"\0"}function v(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return b(t)}function b(e){return String.fromCharCode.apply(0,e)}if(s.seedrandom=h,v(s.random(),a),e.exports){e.exports=h;try{o=n(914)}catch(e){}}else void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}([],Math)},129:function(e,t,n){var r=n(626),a=n(477),s=n(868),o=n(197),i=n(954),l=n(408),u=n(662);u.alea=r,u.xor128=a,u.xorwow=s,u.xorshift7=o,u.xor4096=i,u.tychei=l,e.exports=u},626:function(e,t,n){var r;!function(e,a,s){function o(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.alea=l}(0,e=n.nmd(e),n.amdD)},408:function(e,t,n){var r;!function(e,a,s){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.tychei=l}(0,e=n.nmd(e),n.amdD)},477:function(e,t,n){var r;!function(e,a,s){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.xor128=l}(0,e=n.nmd(e),n.amdD)},954:function(e,t,n){var r;!function(e,a,s){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,s=t.i;return t.w=r=r+1640531527|0,n=a[s+34&127],e=a[s=s+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[s]=n^e,t.i=s,n+(r^r>>>16)|0},function(e,t){var n,r,a,s,o,i=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),a=0,s=-32;s<l;++s)t&&(r^=t.charCodeAt((s+32)%t.length)),0===s&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,s>=0&&(o=o+1640531527|0,a=0==(n=i[127&s]^=r+o)?a+1:0);for(a>=128&&(i[127&(t&&t.length||0)]=-1),a=127,s=512;s>0;--s)r=i[a+34&127],n=i[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,i[a]=r^n;e.w=o,e.X=i,e.i=a}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.xor4096=l}(0,e=n.nmd(e),n.amdD)},197:function(e,t,n){var r;!function(e,a,s){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.xorshift7=l}(0,e=n.nmd(e),n.amdD)},868:function(e,t,n){var r;!function(e,a,s){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.xorwow=l}(0,e=n.nmd(e),n.amdD)},662:function(e,t,n){var r;!function(a,s){var o,i=this,l=256,u=s.pow(l,6),c=s.pow(2,52),p=2*c,d=255;function h(e,t,n){var r=[],d=v(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,b(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(l):(e=new Uint8Array(l),(i.crypto||i.msCrypto).getRandomValues(e)),b(e)}catch(e){var t=i.navigator,n=t&&t.plugins;return[+new Date,i,n,i.screen,b(a)]}}():e,3),r),h=new f(r),y=function(){for(var e=h.g(6),t=u,n=0;e<c;)e=(e+n)*l,t*=l,n=h.g(1);for(;e>=p;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|h.g(4)},y.quick=function(){return h.g(4)/4294967296},y.double=y,v(b(h.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,h),e.state=function(){return m(h,{})}),n?(s.random=e,t):e})(y,d,"global"in t?t.global:this==s,t.state)}function f(e){var t,n=e.length,r=this,a=0,s=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<l;)o[a]=a++;for(a=0;a<l;a++)o[a]=o[s=d&s+e[a%n]+(t=o[a])],o[s]=t;(r.g=function(e){for(var t,n=0,a=r.i,s=r.j,o=r.S;e--;)t=o[a=d&a+1],n=n*l+o[d&(o[a]=o[s=d&s+t])+(o[s]=t)];return r.i=a,r.j=s,n})(l)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(g(e[n],t-1))}catch(e){}return r.length?r:"string"==a?e:e+"\0"}function v(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return b(t)}function b(e){return String.fromCharCode.apply(0,e)}if(s.seedrandom=h,v(s.random(),a),e.exports){e.exports=h;try{o=n(778)}catch(e){}}else void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}([],Math)},439:function(e,t,n){"use strict";n.r(t),n.d(t,{Abs:function(){return Je},Acos:function(){return Ze},Acosh:function(){return Qe},AdadeltaOptimizer:function(){return Nl},AdagradOptimizer:function(){return Al},AdamOptimizer:function(){return Rl},AdamaxOptimizer:function(){return Ll},Add:function(){return et},AddN:function(){return tt},All:function(){return nt},Any:function(){return rt},ArgMax:function(){return at},ArgMin:function(){return st},Asin:function(){return ot},Asinh:function(){return it},Atan:function(){return lt},Atan2:function(){return ct},Atanh:function(){return ut},AvgPool:function(){return pt},AvgPool3D:function(){return ht},AvgPool3DGrad:function(){return ft},AvgPoolGrad:function(){return dt},BatchMatMul:function(){return mt},BatchToSpaceND:function(){return gt},Bincount:function(){return vt},BroadcastArgs:function(){return yt},BroadcastTo:function(){return bt},Callback:function(){return GC},CallbackList:function(){return _b},Cast:function(){return wt},Ceil:function(){return xt},ClipByValue:function(){return kt},Complex:function(){return Ct},ComplexAbs:function(){return St},Concat:function(){return Et},Conv2D:function(){return Tt},Conv2DBackpropFilter:function(){return $t},Conv2DBackpropInput:function(){return It},Conv3D:function(){return Nt},Conv3DBackpropFilterV2:function(){return Ot},Conv3DBackpropInputV2:function(){return At},Cos:function(){return Mt},Cosh:function(){return _t},CropAndResize:function(){return Dt},Cumprod:function(){return Rt},Cumsum:function(){return Pt},CustomCallback:function(){return Db},DataStorage:function(){return G},DenseBincount:function(){return Lt},DepthToSpace:function(){return Bt},DepthwiseConv2dNative:function(){return Ft},DepthwiseConv2dNativeBackpropFilter:function(){return zt},DepthwiseConv2dNativeBackpropInput:function(){return Vt},Diag:function(){return Wt},Dilation2D:function(){return Ht},Dilation2DBackpropFilter:function(){return Ut},Dilation2DBackpropInput:function(){return jt},ENV:function(){return Xe},EarlyStopping:function(){return KC},Einsum:function(){return qt},Elu:function(){return Xt},EluGrad:function(){return Kt},Environment:function(){return je},Equal:function(){return Jt},Erf:function(){return Yt},Exp:function(){return Zt},ExpandDims:function(){return Qt},Expm1:function(){return en},FFT:function(){return tn},Fill:function(){return nn},FlipLeftRight:function(){return rn},Floor:function(){return an},FloorDiv:function(){return sn},FromPixels:function(){return Qr},FusedBatchNorm:function(){return on},FusedConv2D:function(){return na},FusedDepthwiseConv2D:function(){return ra},GatherNd:function(){return un},GatherV2:function(){return ln},GraphModel:function(){return dE},Greater:function(){return cn},GreaterEqual:function(){return pn},History:function(){return Pb},IFFT:function(){return hn},Identity:function(){return dn},Imag:function(){return fn},InputSpec:function(){return wb},IsFinite:function(){return mn},IsInf:function(){return gn},IsNan:function(){return vn},KernelBackend:function(){return q},LRN:function(){return In},LRNGrad:function(){return Nn},LayerVariable:function(){return vb},LayersModel:function(){return Ky},LeakyRelu:function(){return bn},Less:function(){return yn},LessEqual:function(){return wn},LinSpace:function(){return xn},Log:function(){return kn},Log1p:function(){return Cn},LogSoftmax:function(){return $n},LogicalAnd:function(){return Sn},LogicalNot:function(){return En},LogicalOr:function(){return Tn},Max:function(){return On},MaxPool:function(){return Mn},MaxPool3D:function(){return Rn},MaxPool3DGrad:function(){return Pn},MaxPoolGrad:function(){return _n},MaxPoolWithArgmax:function(){return Dn},Maximum:function(){return An},Mean:function(){return Ln},Min:function(){return Bn},Minimum:function(){return Fn},MirrorPad:function(){return zn},Mod:function(){return Vn},MomentumOptimizer:function(){return Fl},Multinomial:function(){return Wn},Multiply:function(){return Hn},Neg:function(){return jn},NonMaxSuppressionV3:function(){return Gn},NonMaxSuppressionV4:function(){return qn},NonMaxSuppressionV5:function(){return Xn},NotEqual:function(){return Un},OP_SCOPE_SUFFIX:function(){return $s},OneHot:function(){return Yn},OnesLike:function(){return Kn},Optimizer:function(){return Il},OptimizerConstructors:function(){return Vl},Pack:function(){return Jn},PadV2:function(){return Zn},Pool:function(){return Qn},Pow:function(){return er},Prelu:function(){return tr},Prod:function(){return nr},RMSPropOptimizer:function(){return zl},RNN:function(){return ax},Range:function(){return rr},Rank:function(){return Za},Real:function(){return ar},RealDiv:function(){return Gt},Reciprocal:function(){return sr},Reduction:function(){return gh},Relu:function(){return or},Relu6:function(){return dr},Reshape:function(){return ir},ResizeBilinear:function(){return cr},ResizeBilinearGrad:function(){return pr},ResizeNearestNeighbor:function(){return lr},ResizeNearestNeighborGrad:function(){return ur},Reverse:function(){return hr},RotateWithOffset:function(){return ea},Round:function(){return fr},Rsqrt:function(){return mr},SGDOptimizer:function(){return Bl},ScatterNd:function(){return gr},Select:function(){return vr},Selu:function(){return br},Sequential:function(){return Qy},Sigmoid:function(){return Cr},Sign:function(){return kr},Sin:function(){return wr},Sinh:function(){return xr},Slice:function(){return yr},Softmax:function(){return Nr},Softplus:function(){return Sr},SpaceToBatchND:function(){return $r},SparseFillEmptyRows:function(){return Or},SparseReshape:function(){return Ar},SparseSegmentMean:function(){return Mr},SparseSegmentSum:function(){return _r},SparseToDense:function(){return Rr},SplitV:function(){return Ir},Sqrt:function(){return Er},Square:function(){return Dr},SquaredDifference:function(){return Pr},Step:function(){return Zr},StridedSlice:function(){return Lr},StringNGrams:function(){return Br},StringSplit:function(){return Fr},StringToHashBucketFast:function(){return zr},Sub:function(){return Vr},Sum:function(){return Tr},SymbolicTensor:function(){return xb},Tan:function(){return Wr},Tanh:function(){return Hr},Tensor:function(){return Ka},TensorBuffer:function(){return Ua},Tile:function(){return jr},TopK:function(){return Ur},Transform:function(){return Gr},Transpose:function(){return qr},Unique:function(){return Xr},Unpack:function(){return Kr},UnsortedSegmentSum:function(){return Yr},Variable:function(){return Ja},ZerosLike:function(){return Jr},_FusedMatMul:function(){return ta},abs:function(){return Pl},acos:function(){return Wl},acosh:function(){return Hl},add:function(){return hl},addN:function(){return jl},all:function(){return Ul},any:function(){return Gl},argMax:function(){return ql},argMin:function(){return Xl},asin:function(){return Kl},asinh:function(){return Yl},atan:function(){return Jl},atan2:function(){return Zl},atanh:function(){return Ql},avgPool:function(){return mu},avgPool3d:function(){return gu},backend:function(){return pl},backend_util:function(){return v},basicLSTMCell:function(){return xu},batchNorm:function(){return Cu},batchNorm2d:function(){return Su},batchNorm3d:function(){return Eu},batchNorm4d:function(){return Tu},batchToSpaceND:function(){return ku},bincount:function(){return $u},booleanMaskAsync:function(){return vd},broadcastArgs:function(){return Iu},broadcastTo:function(){return Nu},broadcast_util:function(){return l},browser:function(){return u},buffer:function(){return No},callbacks:function(){return YC},cast:function(){return Oo},ceil:function(){return Ou},clipByValue:function(){return Au},clone:function(){return Ao},complex:function(){return Ns},concat:function(){return vu},concat1d:function(){return Mu},concat2d:function(){return _u},concat3d:function(){return Ru},concat4d:function(){return Pu},constraints:function(){return y},conv1d:function(){return Lu},conv2d:function(){return Du},conv2dTranspose:function(){return Fu},conv3d:function(){return zu},conv3dTranspose:function(){return Wu},copyRegisteredKernels:function(){return ma},cos:function(){return Hu},cosh:function(){return ju},cosineWindow:function(){return Td},cumprod:function(){return Uu},cumsum:function(){return Gu},customGrad:function(){return El},data:function(){return j},denseBincount:function(){return qu},deprecationWarn:function(){return Ki},depthToSpace:function(){return Xu},depthwiseConv2d:function(){return Ku},deregisterOp:function(){return nS},device_util:function(){return s},diag:function(){return Yu},dilation2d:function(){return Ju},disableDeprecationWarnings:function(){return Xi},dispose:function(){return tl},disposeVariables:function(){return Yi},div:function(){return ml},divNoNan:function(){return ec},dot:function(){return tc},dropout:function(){return Sd},einsum:function(){return nc},elu:function(){return rc},enableDebugMode:function(){return qi},enableProdMode:function(){return Gi},enclosingPowerOfTwo:function(){return Ed},engine:function(){return Ji},env:function(){return Ge},equal:function(){return Zu},erf:function(){return ac},exp:function(){return sc},expandDims:function(){return oc},expm1:function(){return ic},eye:function(){return uc},fft:function(){return qp},fill:function(){return Ol},findBackend:function(){return ll},findBackendFactory:function(){return ul},floor:function(){return cc},floorDiv:function(){return fl},fused:function(){return m},gather:function(){return pc},gatherND:function(){return Cd},gather_util:function(){return c},getBackend:function(){return ol},getGradient:function(){return ua},getKernel:function(){return la},getKernelsForBackend:function(){return ca},grad:function(){return wl},grads:function(){return xl},greater:function(){return dc},greaterEqual:function(){return hc},ifft:function(){return Xp},imag:function(){return fc},image:function(){return Ph},inTopKAsync:function(){return $d},initializers:function(){return w},input:function(){return rw},io:function(){return o},irfft:function(){return Kp},isFinite:function(){return mc},isInf:function(){return gc},isNaN:function(){return vc},keep:function(){return nl},kernel_impls:function(){return b},layers:function(){return x},leakyRelu:function(){return bc},less:function(){return yc},lessEqual:function(){return wc},linalg:function(){return Dh},linspace:function(){return xc},loadGraphModel:function(){return hE},loadLayersModel:function(){return nw},localResponseNormalization:function(){return kc},log:function(){return Cc},log1p:function(){return Sc},logSigmoid:function(){return $c},logSoftmax:function(){return Oc},logSumExp:function(){return Fc},logicalAnd:function(){return zc},logicalNot:function(){return Vc},logicalOr:function(){return Wc},logicalXor:function(){return Hc},losses:function(){return Lh},matMul:function(){return Yo},math:function(){return i},max:function(){return Ic},maxPool:function(){return jc},maxPool3d:function(){return Uc},maxPoolWithArgmax:function(){return Gc},maximum:function(){return Dl},mean:function(){return qc},memory:function(){return Zi},meshgrid:function(){return Yc},metrics:function(){return k},min:function(){return Jc},minimum:function(){return Zc},mirrorPad:function(){return Qc},mod:function(){return ep},model:function(){return ew},models:function(){return C},moments:function(){return tp},movingAverage:function(){return wd},mul:function(){return gl},multiRNNCell:function(){return np},multinomial:function(){return rp},neg:function(){return Ec},nextFrame:function(){return Wh},norm:function(){return yd},notEqual:function(){return ap},oneHot:function(){return Jo},ones:function(){return Kc},onesLike:function(){return sp},op:function(){return Is},outerProduct:function(){return op},pad:function(){return ip},pad1d:function(){return lp},pad2d:function(){return up},pad3d:function(){return cp},pad4d:function(){return pp},pool:function(){return hp},pow:function(){return Ml},prelu:function(){return fp},print:function(){return Mo},prod:function(){return mp},profile:function(){return Qi},rand:function(){return gp},randomGamma:function(){return xp},randomNormal:function(){return kp},randomUniform:function(){return Cp},range:function(){return Sp},ready:function(){return sl},real:function(){return Ep},reciprocal:function(){return Tp},registerBackend:function(){return cl},registerCallbackConstructor:function(){return aw},registerGradient:function(){return da},registerKernel:function(){return pa},registerOp:function(){return eS},regularizers:function(){return S},relu:function(){return $p},relu6:function(){return Ip},removeBackend:function(){return il},reshape:function(){return fu},reverse:function(){return Np},reverse1d:function(){return Op},reverse2d:function(){return Ap},reverse3d:function(){return Mp},reverse4d:function(){return _p},rfft:function(){return Jp},round:function(){return Rp},rsqrt:function(){return Pp},scalar:function(){return $l},scatterND:function(){return xd},scatter_util:function(){return p},selu:function(){return Dp},separableConv2d:function(){return Lp},sequential:function(){return tw},serialization:function(){return h},setBackend:function(){return al},setPlatform:function(){return dl},setdiff1dAsync:function(){return Bp},sigmoid:function(){return bu},sign:function(){return Fp},signal:function(){return Rh},sin:function(){return zp},sinh:function(){return Vp},slice:function(){return yu},slice1d:function(){return Wp},slice2d:function(){return Hp},slice3d:function(){return jp},slice4d:function(){return Up},slice_util:function(){return d},softmax:function(){return Gp},softplus:function(){return Tc},spaceToBatchND:function(){return dp},sparse:function(){return Bh},sparseToDense:function(){return kd},spectral:function(){return _h},split:function(){return Yp},sqrt:function(){return vl},square:function(){return bl},squaredDifference:function(){return Zp},squeeze:function(){return Qp},stack:function(){return ed},step:function(){return td},stridedSlice:function(){return nd},string:function(){return Fh},sub:function(){return _l},sum:function(){return Nc},sumOutType:function(){return ss},tan:function(){return rd},tanh:function(){return wu},tensor:function(){return As},tensor1d:function(){return ad},tensor2d:function(){return sd},tensor3d:function(){return ri},tensor4d:function(){return od},tensor5d:function(){return id},tensor6d:function(){return ld},tensor_util:function(){return a},test_util:function(){return f},tidy:function(){return el},tile:function(){return lc},time:function(){return rl},topk:function(){return ud},train:function(){return zh},transpose:function(){return Zo},truncatedNormal:function(){return cd},unique:function(){return pd},unregisterGradient:function(){return fa},unregisterKernel:function(){return ha},unsortedSegmentSum:function(){return dd},unstack:function(){return hd},upcastType:function(){return as},util:function(){return r},valueAndGrad:function(){return kl},valueAndGrads:function(){return Cl},variable:function(){return fd},variableGrads:function(){return Sl},version:function(){return zV},version_converter:function(){return fE},version_core:function(){return Ui},version_layers:function(){return xy},where:function(){return Qu},whereAsync:function(){return gd},zeros:function(){return Xc},zerosLike:function(){return yl}});var r={};n.r(r),n.d(r,{arraysEqual:function(){return ue},assert:function(){return re},assertNonNegativeIntegerDimensions:function(){return Fe},assertNonNull:function(){return se},assertShapesMatch:function(){return ae},bytesFromStringArray:function(){return Te},bytesPerElement:function(){return Ee},checkConversionForErrors:function(){return xe},clamp:function(){return J},computeStrides:function(){return _e},createScalarValue:function(){return Aa},createShuffledIndices:function(){return he},decodeString:function(){return Da},distSquared:function(){return ne},encodeString:function(){return Pa},fetch:function(){return Ra},fingerPrint64:function(){return Oa},flatten:function(){return oe},getArrayFromDType:function(){return we},getTypedArrayFromDType:function(){return ye},hasEncodingLoss:function(){return Ce},hexToLong:function(){return ya},indexToLoc:function(){return Ve},inferDtype:function(){return Oe},inferFromImplicitShape:function(){return ge},isBoolean:function(){return Ie},isFunction:function(){return Ae},isInt:function(){return ce},isNumber:function(){return Ne},isPromise:function(){return We},isScalarShape:function(){return le},isString:function(){return $e},isTypedArray:function(){return Se},isValidDtype:function(){return ke},locToIndex:function(){return ze},makeOnesTypedArray:function(){return De},makeZerosNestedTypedArray:function(){return Be},makeZerosTypedArray:function(){return Le},nearestDivisor:function(){return Me},nearestLargerEven:function(){return Z},now:function(){return _a},parseAxisParam:function(){return ve},randUniform:function(){return te},repeatedTry:function(){return me},rightPad:function(){return fe},shuffle:function(){return K},shuffleCombo:function(){return Y},sizeFromShape:function(){return ie},sizeToSquarishShape:function(){return de},squeezeShape:function(){return be},sum:function(){return ee},swap:function(){return Q},tanh:function(){return pe},toNestedArray:function(){return Pe},toTypedArray:function(){return Ma}});var a={};n.r(a),n.d(a,{assertTypesMatch:function(){return is},getTensorsInContainer:function(){return us},isTensorInList:function(){return ls},makeTypesMatch:function(){return os}});var s={};n.r(s),n.d(s,{isBrowser:function(){return ws},isMobile:function(){return ys},mockIsMobile:function(){return bs}});var o={};n.r(o),n.d(o,{browserFiles:function(){return Do},browserHTTPRequest:function(){return Uo},concatenateArrayBuffers:function(){return Bs},copyModel:function(){return Co},decodeWeights:function(){return Rs},encodeWeights:function(){return _s},fromMemory:function(){return Xo},getLoadHandlers:function(){return Xs},getModelArtifactsForJSON:function(){return Vs},getModelArtifactsInfoForJSON:function(){return Ws},getSaveHandlers:function(){return qs},http:function(){return jo},isHTTPScheme:function(){return Wo},listModels:function(){return xo},loadWeights:function(){return Fo},moveModel:function(){return So},registerLoadRouter:function(){return Gs},registerSaveRouter:function(){return Us},removeModel:function(){return ko},weightsLoaderFactory:function(){return zo},withSaveHandler:function(){return Ko}});var i={};n.r(i),n.d(i,{confusionMatrix:function(){return Qo}});var l={};n.r(l),n.d(l,{assertAndGetBroadcastShape:function(){return ni},getBroadcastDims:function(){return ei},getReductionAxes:function(){return ti}});var u={};n.r(u),n.d(u,{fromPixels:function(){return ui},fromPixelsAsync:function(){return ii},toPixels:function(){return li}});var c={};n.r(c),n.d(c,{prepareAndValidate:function(){return ci}});var p={};n.r(p),n.d(p,{calculateShapes:function(){return hi},validateInput:function(){return di},validateUpdateShape:function(){return pi}});var d={};n.r(d),n.d(d,{assertParamsValid:function(){return fi},computeFlatOffset:function(){return $i},computeOutShape:function(){return gi},getNormalizedAxes:function(){return wi},isSliceContinous:function(){return Ti},maskToAxes:function(){return mi},parseSliceParams:function(){return Ii},sliceInfo:function(){return Ni},startForAxis:function(){return Si},startIndicesWithElidedDims:function(){return xi},stopForAxis:function(){return Ei},stopIndicesWithElidedDims:function(){return ki},stridesForAxis:function(){return Ci},stridesWithElidedDims:function(){return vi}});var h={};n.r(h),n.d(h,{Serializable:function(){return Ai},SerializationMap:function(){return Mi},registerClass:function(){return _i}});var f={};n.r(f),n.d(f,{TEST_EPSILON_FLOAT16:function(){return Ri},encodeStrings:function(){return ji},expectArrayBuffersEqual:function(){return Hi},expectArraysClose:function(){return Pi},expectArraysEqual:function(){return Fi},expectNumbersClose:function(){return zi},expectPromiseToFail:function(){return Bi},expectValuesInRange:function(){return Wi},testEpsilon:function(){return Di}});var m={};n.r(m),n.d(m,{conv2d:function(){return _d},depthwiseConv2d:function(){return Dd},matMul:function(){return Ld}});var g={};n.r(g),n.d(g,{collectGatherOpShapeInfo:function(){return Ff},computeOutShape:function(){return Bf},segOpComputeOptimalWindowSize:function(){return Lf}});var v={};n.r(v),n.d(v,{ERF_A1:function(){return nf},ERF_A2:function(){return rf},ERF_A3:function(){return af},ERF_A4:function(){return sf},ERF_A5:function(){return of},ERF_P:function(){return tf},PARALLELIZE_THRESHOLD:function(){return Uh},SELU_SCALE:function(){return ef},SELU_SCALEALPHA:function(){return Qh},applyActivation:function(){return Ad},assertAndGetBroadcastShape:function(){return ni},assertAxesAreInnerMostDims:function(){return Pc},assertParamsConsistent:function(){return Hh},assignToTypedArray:function(){return hf},axesAreInnerMostDims:function(){return Ac},calculateShapes:function(){return hi},checkEinsumDimSizes:function(){return wf},checkPadOnDimRoundingMode:function(){return hu},combineLocations:function(){return Mc},complexWithEvenIndex:function(){return cf},complexWithOddIndex:function(){return pf},computeConv2DInfo:function(){return ru},computeConv3DInfo:function(){return au},computeDefaultPad:function(){return su},computeDilation2DInfo:function(){return eu},computeOptimalWindowSize:function(){return Gh},computeOutAndReduceShapes:function(){return _c},computeOutShape:function(){return jh},computePool2DInfo:function(){return tu},computePool3DInfo:function(){return nu},convertConv2DDataFormat:function(){return du},decodeEinsumEquation:function(){return bf},eitherStridesOrDilationsAreOne:function(){return pu},expandShapeToKeepDim:function(){return Rc},exponent:function(){return mf},exponents:function(){return ff},fromStringArrayToUint8:function(){return Vf},fromUint8ToStringArray:function(){return zf},getAxesPermutation:function(){return Dc},getBroadcastDims:function(){return ei},getComplexWithIndex:function(){return df},getEinsumComputePath:function(){return xf},getEinsumPermutation:function(){return yf},getFusedBiasGradient:function(){return Od},getFusedDyActivation:function(){return Nd},getImageCenter:function(){return qh},getInnerMostAxes:function(){return Bc},getPermuted:function(){return Kh},getReductionAxes:function(){return ti},getReshaped:function(){return Xh},getReshapedPermuted:function(){return Yh},getSliceBeginCoords:function(){return Jh},getSliceSize:function(){return Zh},getSparseFillEmptyRowsIndicesDenseShapeMismatch:function(){return Ef},getSparseFillEmptyRowsNegativeIndexErrorMessage:function(){return Tf},getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:function(){return $f},getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:function(){return Of},getSparseReshapeInputOutputMismatchErrorMessage:function(){return Mf},getSparseReshapeInputOutputMultipleErrorMessage:function(){return Af},getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:function(){return If},getSparseReshapeNegativeOutputDimErrorMessage:function(){return Nf},getSparseSegmentReductionIndicesOutOfRangeErrorMessage:function(){return Df},getSparseSegmentReductionNegativeSegmentIdsErrorMessage:function(){return _f},getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:function(){return Rf},getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:function(){return Pf},getUndoAxesPermutation:function(){return Lc},isIdentityPermutation:function(){return kf},log:function(){return sa},mergeRealAndImagArrays:function(){return lf},prepareAndValidate:function(){return ci},prepareSplitSize:function(){return Sf},segment_util:function(){return g},shouldFuse:function(){return Md},slice_util:function(){return d},splitRealAndImagArrays:function(){return uf},tupleValuesAreOne:function(){return cu},upcastType:function(){return as},validateInput:function(){return di},validateUpdateShape:function(){return pi},warn:function(){return aa}});var b={};n.r(b),n.d(b,{nonMaxSuppressionV3Impl:function(){return Yd},nonMaxSuppressionV4Impl:function(){return Jd},nonMaxSuppressionV5Impl:function(){return Zd},whereImpl:function(){return md}});var y={};n.r(y),n.d(y,{maxNorm:function(){return Fg},minMaxNorm:function(){return Wg},nonNeg:function(){return Vg},unitNorm:function(){return zg}});var w={};n.r(w),n.d(w,{constant:function(){return Xv},glorotNormal:function(){return tb},glorotUniform:function(){return eb},heNormal:function(){return nb},heUniform:function(){return rb},identity:function(){return Zv},leCunNormal:function(){return ab},leCunUniform:function(){return sb},ones:function(){return qv},orthogonal:function(){return ob},randomNormal:function(){return Yv},randomUniform:function(){return Kv},truncatedNormal:function(){return Jv},varianceScaling:function(){return Qv},zeros:function(){return Gv}});var x={};n.r(x),n.d(x,{Layer:function(){return Eb},RNN:function(){return ax},RNNCell:function(){return sx},activation:function(){return $k},add:function(){return Dk},alphaDropout:function(){return TC},average:function(){return Lk},averagePooling1d:function(){return Gk},averagePooling2d:function(){return Kk},averagePooling3d:function(){return Zk},avgPool1d:function(){return qk},avgPool2d:function(){return Yk},avgPool3d:function(){return Qk},avgPooling1d:function(){return Xk},avgPooling2d:function(){return Jk},avgPooling3d:function(){return eC},batchNormalization:function(){return Hk},bidirectional:function(){return bC},concatenate:function(){return Bk},conv1d:function(){return bk},conv2d:function(){return yk},conv2dTranspose:function(){return wk},conv3d:function(){return xk},conv3dTranspose:function(){return kk},convLstm2d:function(){return fC},convLstm2dCell:function(){return mC},cropping2D:function(){return Sk},dense:function(){return Ik},depthwiseConv2d:function(){return Tk},dot:function(){return Wk},dropout:function(){return Nk},elu:function(){return dk},embedding:function(){return Pk},flatten:function(){return Ak},gaussianDropout:function(){return EC},gaussianNoise:function(){return SC},globalAveragePooling1d:function(){return tC},globalAveragePooling2d:function(){return nC},globalMaxPool1d:function(){return wC},globalMaxPool2d:function(){return xC},globalMaxPooling1d:function(){return rC},globalMaxPooling2d:function(){return aC},gru:function(){return lC},gruCell:function(){return uC},input:function(){return rw},inputLayer:function(){return pk},layerNormalization:function(){return jk},leakyReLU:function(){return fk},lstm:function(){return cC},lstmCell:function(){return pC},masking:function(){return $C},maxPool1d:function(){return kC},maxPool2d:function(){return CC},maxPooling1d:function(){return sC},maxPooling2d:function(){return oC},maxPooling3d:function(){return iC},maximum:function(){return Fk},minimum:function(){return zk},multiply:function(){return Vk},permute:function(){return Rk},prelu:function(){return mk},reLU:function(){return hk},repeatVector:function(){return Mk},reshape:function(){return _k},rnn:function(){return gC},separableConv2d:function(){return Ck},simpleRNN:function(){return dC},simpleRNNCell:function(){return hC},softmax:function(){return gk},spatialDropout1d:function(){return Ok},stackedRNNCells:function(){return vC},thresholdedReLU:function(){return vk},timeDistributed:function(){return yC},upSampling2d:function(){return Ek},zeroPadding2d:function(){return Uk}});var k={};n.r(k),n.d(k,{MAPE:function(){return BC},MSE:function(){return VC},binaryAccuracy:function(){return IC},binaryCrossentropy:function(){return NC},categoricalAccuracy:function(){return AC},categoricalCrossentropy:function(){return MC},cosineProximity:function(){return PC},mape:function(){return FC},meanAbsoluteError:function(){return DC},meanAbsolutePercentageError:function(){return LC},meanSquaredError:function(){return zC},mse:function(){return WC},precision:function(){return _C},recall:function(){return RC},sparseCategoricalAccuracy:function(){return OC}});var C={};n.r(C),n.d(C,{modelFromJSON:function(){return Jy}});var S={};n.r(S),n.d(S,{l1:function(){return jC},l1l2:function(){return HC},l2:function(){return UC}});var E={};n.r(E),n.d(E,{json:function(){return cS}});var T={};n.r(T),n.d(T,{json:function(){return pS}});var $={};n.r($),n.d($,{json:function(){return dS}});var I={};n.r(I),n.d(I,{json:function(){return hS}});var N={};n.r(N),n.d(N,{json:function(){return fS}});var O={};n.r(O),n.d(O,{json:function(){return mS}});var A={};n.r(A),n.d(A,{json:function(){return gS}});var M={};n.r(M),n.d(M,{json:function(){return vS}});var _={};n.r(_),n.d(_,{json:function(){return bS}});var R={};n.r(R),n.d(R,{json:function(){return yS}});var P={};n.r(P),n.d(P,{json:function(){return wS}});var D={};n.r(D),n.d(D,{json:function(){return xS}});var L={};n.r(L),n.d(L,{json:function(){return kS}});var B={};n.r(B),n.d(B,{json:function(){return CS}});var F={};n.r(F),n.d(F,{json:function(){return SS}});var z={};n.r(z),n.d(z,{json:function(){return ES}});var V={};n.r(V),n.d(V,{json:function(){return TS}});var W={};n.r(W),n.d(W,{json:function(){return $S}});var H={};n.r(H),n.d(H,{json:function(){return IS}});var j={};n.r(j),n.d(j,{CSVDataset:function(){return sT},Dataset:function(){return qE},FileDataSource:function(){return bT},TextLineDataset:function(){return ZE},URLDataSource:function(){return yT},array:function(){return KE},csv:function(){return wT},func:function(){return xT},generator:function(){return kT},microphone:function(){return ST},version_data:function(){return ET},webcam:function(){return CT},zip:function(){return YE}});var U={};n.r(U),n.d(U,{addImpl:function(){return s$},bincountImpl:function(){return J$},bincountReduceImpl:function(){return Z$},ceilImpl:function(){return tI},concatImpl:function(){return iI},equalImpl:function(){return jI},expImpl:function(){return tN},expm1Impl:function(){return oN},floorImpl:function(){return CN},gatherNdImpl:function(){return AN},gatherV2Impl:function(){return _N},greaterEqualImpl:function(){return BN},greaterImpl:function(){return PN},lessEqualImpl:function(){return JN},lessImpl:function(){return XN},linSpaceImpl:function(){return eO},logImpl:function(){return nO},maxImpl:function(){return vO},maximumImpl:function(){return wO},minimumImpl:function(){return OO},multiplyImpl:function(){return DI},negImpl:function(){return VO},notEqualImpl:function(){return KO},prodImpl:function(){return lA},rangeImpl:function(){return cA},rsqrtImpl:function(){return kA},sigmoidImpl:function(){return GT},simpleAbsImpl:function(){return f$},sliceImpl:function(){return q$},sparseFillEmptyRowsImpl:function(){return WA},sparseReshapeImpl:function(){return jA},sparseSegmentReductionImpl:function(){return GA},sqrtImpl:function(){return JA},squaredDifferenceImpl:function(){return tM},stridedSliceImpl:function(){return oM},stringNGramsImpl:function(){return uM},stringSplitImpl:function(){return dM},stringToHashBucketFastImpl:function(){return fM},subImpl:function(){return dN},tileImpl:function(){return yM},topKImpl:function(){return CM},transposeImpl:function(){return x$},uniqueImpl:function(){return OM}});class G{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class q{refCount(e){return X("refCount")}incRef(e){return X("incRef")}timerAvailable(){return!0}time(e){return X("time")}read(e){return X("read")}readSync(e){return X("readSync")}readToGPU(e,t){return X("readToGPU")}numDataIds(){return X("numDataIds")}disposeData(e,t){return X("disposeData")}write(e,t,n){return X("write")}move(e,t,n,r,a){return X("move")}memory(){return X("memory")}floatPrecision(){return X("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return X("dispose")}}function X(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function K(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,Q(e,t,n)}function Y(e,t){if(e.length!==t.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${e.length}Second array length was ${t.length}`);let n=e.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,Q(e,n,r),Q(t,n,r)}function J(e,t,n){return Math.max(e,Math.min(t,n))}function Z(e){return e%2==0?e:e+1}function Q(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function ee(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function te(e,t){const n=Math.random();return t*n+(1-n)*e}function ne(e,t){let n=0;for(let r=0;r<e.length;r++){const a=Number(e[r])-Number(t[r]);n+=a*a}return n}function re(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function ae(e,t,n=""){re(ue(e,t),(()=>n+` Shapes ${e} and ${t} must match`))}function se(e){re(null!=e,(()=>"The input to the tensor constructor must be a non-null value."))}function oe(e,t=[],n=!1){if(null==t&&(t=[]),Array.isArray(e)||Se(e)&&!n)for(let r=0;r<e.length;++r)oe(e[r],t,n);else t.push(e);return t}function ie(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function le(e){return 0===e.length}function ue(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ce(e){return e%1==0}function pe(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{const t=Math.exp(2*e);return(t-1)/(t+1)}}function de(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function he(e){const t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return K(t),t}function fe(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function me(e,t=(e=>0),n){return new Promise(((r,a)=>{let s=0;const o=()=>{if(e())return void r();s++;const i=t(s);null!=n&&s>=n?a():setTimeout(o,i)};o()}))}function ge(e,t){let n=1,r=-1;for(let t=0;t<e.length;++t)if(e[t]>=0)n*=e[t];else if(-1===e[t]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${t}`);r=t}else if(e[t]<0)throw Error(`Shapes can not be < 0. Found ${e[t]} at dim ${t}`);if(-1===r){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===n)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!=0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const a=e.slice();return a[r]=t/n,a}function ve(e,t){const n=t.length;return re((e=null==e?t.map(((e,t)=>t)):[].concat(e)).every((e=>e>=-n&&e<n)),(()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`)),re(e.every((e=>ce(e))),(()=>`All values in axis param must be integers but got axis ${e}`)),e.map((e=>e<0?n+e:e))}function be(e,t){const n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,s=null==t||a?null:ve(t,e).sort();let o=0;for(let t=0;t<e.length;++t){if(null!=s){if(s[o]===t&&1!==e[t])throw new Error(`Can't squeeze axis ${t} since its dim '${e[t]}' is not 1`);(null==s[o]||s[o]>t)&&1===e[t]&&(n.push(e[t]),r.push(t)),s[o]<=t&&o++}1!==e[t]&&(n.push(e[t]),r.push(t))}return{newShape:n,keptDims:r}}function ye(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error(`Unknown data type ${e}`);n=new Uint8Array(t)}return n}function we(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error(`Unknown data type ${e}`);n=new Array(t)}return n}function xe(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function ke(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function Ce(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function Se(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function Ee(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error(`Unknown dtype ${e}`)}function Te(e){if(null==e)return 0;let t=0;return e.forEach((e=>t+=e.length)),t}function $e(e){return"string"==typeof e||e instanceof String}function Ie(e){return"boolean"==typeof e}function Ne(e){return"number"==typeof e}function Oe(e){return Array.isArray(e)?Oe(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":Ne(e)?"float32":$e(e)?"string":Ie(e)?"bool":"float32"}function Ae(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Me(e,t){for(let n=t;n<e;++n)if(e%n==0)return n;return e}function _e(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Re(e,t,n,r=!1){const a=new Array;if(1===t.length){const s=t[0]*(r?2:1);for(let t=0;t<s;t++)a[t]=n[e+t]}else{const s=t[0],o=t.slice(1),i=o.reduce(((e,t)=>e*t))*(r?2:1);for(let t=0;t<s;t++)a[t]=Re(e+t*i,o,n,r)}return a}function Pe(e,t,n=!1){if(0===e.length)return t[0];const r=e.reduce(((e,t)=>e*t))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return Re(0,e,t,n)}function De(e,t){const n=Le(e,t);for(let e=0;e<n.length;e++)n[e]=1;return n}function Le(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function Be(e,t){const n=e.reduce(((e,t)=>e*t),1);if(null==t||"float32"===t)return Pe(e,new Float32Array(n));if("int32"===t)return Pe(e,new Int32Array(n));if("bool"===t)return Pe(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function Fe(e){e.forEach((t=>{re(Number.isInteger(t)&&t>=0,(()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`))}))}function ze(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let t=0;t<e.length-1;++t)r+=n[t]*e[t];return r}function Ve(e,t,n){if(0===t)return[];if(1===t)return[e];const r=new Array(t);for(let t=0;t<r.length-1;++t)r[t]=Math.floor(e/n[t]),e-=r[t]*n[t];return r[r.length-1]=e,r}function We(e){return e&&e.then&&"function"==typeof e.then}const He="tfjsflags";class je{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Ue,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(Ge().getBool("IS_TEST")||Ge().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];Ge().getBool("IS_TEST")||Ge().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(We(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(He in e){e.tfjsflags.split(",").forEach((e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error(`Could not parse value flag value ${t} for flag ${e}.`)}(t,n)}))}}}function Ue(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,((e,...n)=>(function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,n[0],n[1]),n.join("=")))),t}function Ge(){return Xe}let qe,Xe=null;function Ke(){if(null==qe){let e;if("undefined"!=typeof window)e=window;else if(void 0!==n.g)e=n.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}qe=e}return qe}function Ye(e,t){const n=function(){const e=Ke();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}const Je="Abs",Ze="Acos",Qe="Acosh",et="Add",tt="AddN",nt="All",rt="Any",at="ArgMax",st="ArgMin",ot="Asin",it="Asinh",lt="Atan",ut="Atanh",ct="Atan2",pt="AvgPool",dt="AvgPoolGrad",ht="AvgPool3D",ft="AvgPool3DGrad",mt="BatchMatMul",gt="BatchToSpaceND",vt="Bincount",bt="BroadcastTo",yt="BroadcastArgs",wt="Cast",xt="Ceil",kt="ClipByValue",Ct="Complex",St="ComplexAbs",Et="Concat",Tt="Conv2D",$t="Conv2DBackpropFilter",It="Conv2DBackpropInput",Nt="Conv3D",Ot="Conv3DBackpropFilterV2",At="Conv3DBackpropInputV2",Mt="Cos",_t="Cosh",Rt="Cumprod",Pt="Cumsum",Dt="CropAndResize",Lt="DenseBincount",Bt="DepthToSpace",Ft="DepthwiseConv2dNative",zt="DepthwiseConv2dNativeBackpropFilter",Vt="DepthwiseConv2dNativeBackpropInput",Wt="Diag",Ht="Dilation2D",jt="Dilation2DBackpropInput",Ut="Dilation2DBackpropFilter",Gt="RealDiv",qt="Einsum",Xt="Elu",Kt="EluGrad",Yt="Erf",Jt="Equal",Zt="Exp",Qt="ExpandDims",en="Expm1",tn="FFT",nn="Fill",rn="FlipLeftRight",an="Floor",sn="FloorDiv",on="FusedBatchNorm",ln="GatherV2",un="GatherNd",cn="Greater",pn="GreaterEqual",dn="Identity",hn="IFFT",fn="Imag",mn="IsFinite",gn="IsInf",vn="IsNan",bn="LeakyRelu",yn="Less",wn="LessEqual",xn="LinSpace",kn="Log",Cn="Log1p",Sn="LogicalAnd",En="LogicalNot",Tn="LogicalOr",$n="LogSoftmax",In="LRN",Nn="LRNGrad",On="Max",An="Maximum",Mn="MaxPool",_n="MaxPoolGrad",Rn="MaxPool3D",Pn="MaxPool3DGrad",Dn="MaxPoolWithArgmax",Ln="Mean",Bn="Min",Fn="Minimum",zn="MirrorPad",Vn="Mod",Wn="Multinomial",Hn="Multiply",jn="Neg",Un="NotEqual",Gn="NonMaxSuppressionV3",qn="NonMaxSuppressionV4",Xn="NonMaxSuppressionV5",Kn="OnesLike",Yn="OneHot",Jn="Pack",Zn="PadV2",Qn="Pool",er="Pow",tr="Prelu",nr="Prod",rr="Range",ar="Real",sr="Reciprocal",or="Relu",ir="Reshape",lr="ResizeNearestNeighbor",ur="ResizeNearestNeighborGrad",cr="ResizeBilinear",pr="ResizeBilinearGrad",dr="Relu6",hr="Reverse",fr="Round",mr="Rsqrt",gr="ScatterNd",vr="Select",br="Selu",yr="Slice",wr="Sin",xr="Sinh",kr="Sign",Cr="Sigmoid",Sr="Softplus",Er="Sqrt",Tr="Sum",$r="SpaceToBatchND",Ir="SplitV",Nr="Softmax",Or="SparseFillEmptyRows",Ar="SparseReshape",Mr="SparseSegmentMean",_r="SparseSegmentSum",Rr="SparseToDense",Pr="SquaredDifference",Dr="Square",Lr="StridedSlice",Br="StringNGrams",Fr="StringSplit",zr="StringToHashBucketFast",Vr="Sub",Wr="Tan",Hr="Tanh",jr="Tile",Ur="TopK",Gr="Transform",qr="Transpose",Xr="Unique",Kr="Unpack",Yr="UnsortedSegmentSum",Jr="ZerosLike",Zr="Step",Qr="FromPixels",ea="RotateWithOffset",ta="_FusedMatMul",na="FusedConv2D",ra="FusedDepthwiseConv2D";function aa(...e){Ge().getBool("IS_TEST")||Ge().getBool("PROD")||console.warn(...e)}function sa(...e){Ge().getBool("IS_TEST")||Ge().getBool("PROD")||console.log(...e)}const oa=Ye("kernelRegistry",(()=>new Map)),ia=Ye("gradRegistry",(()=>new Map));function la(e,t){const n=ga(e,t);return oa.get(n)}function ua(e){return ia.get(e)}function ca(e){const t=oa.entries(),n=[];for(;;){const{done:r,value:a}=t.next();if(r)break;const[s,o]=a,[i]=s.split("_");i===e&&n.push(o)}return n}function pa(e){const{kernelName:t,backendName:n}=e,r=ga(t,n);oa.has(r)&&aa(`The kernel '${t}' for backend '${n}' is already registered`),oa.set(r,e)}function da(e){const{kernelName:t}=e;ia.has(t)&&Ge().getBool("DEBUG")&&aa(`Overriding the gradient for '${t}'`),ia.set(t,e)}function ha(e,t){const n=ga(e,t);if(!oa.has(n))throw new Error(`The kernel '${e}' for backend '${t}' is not registered`);oa.delete(n)}function fa(e){if(!ia.has(e))throw new Error(`The gradient '${e}' for backend is not registered`);ia.delete(e)}function ma(e,t){ca(e).forEach((e=>{pa(Object.assign({},e,{backendName:t}))}))}function ga(e,t){return`${t}_${e}`}var va=n(720);const ba=n.n(va)()||va;function ya(e){return ba.fromString(e,!0,16)}const wa=ya("c3a5c85c97cb3127"),xa=ya("b492b66fbe98f273"),ka=ya("9ae16a3b2f90404f");function Ca(e){return e.xor(e.shru(47))}function Sa(e,t,n){const r=e.slice(t,t+n);return ba.fromBytes(Array.from(r),!0,!0)}function Ea(e,t){return Sa(e,t,8)}function Ta(e,t){return Sa(e,t,4)}function $a(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function Ia(e,t,n=ya("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let a=t.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function Na(e,t,n,r){return function(e,t,n,r,a,s){a=a.add(e),s=$a(s.add(a).add(r),21);const o=a;return a=(a=a.add(t)).add(n),s=s.add($a(a,44)),[a.add(r),s.add(o)]}(Ea(e,t),Ea(e,t+8),Ea(e,t+16),Ea(e,t+24),n,r)}function Oa(e,t=e.length){const n=ba.fromNumber(81,!0);if(t<=32)return t<=16?function(e,t=e.length){if(t>=8){const n=ka.add(2*t),r=Ea(e,0).add(ka),a=Ea(e,t-8);return Ia($a(a,37).mul(n).add(r),$a(r,25).add(a).mul(n),n)}if(t>=4){const n=ka.add(2*t);return Ia(Ta(e,0).shl(3).add(t),Ta(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),r=t+(e[t-1]<<2);return Ca(ka.mul(n).xor(wa.mul(r))).mul(ka)}return ka}(e,t):function(e,t=e.length){const n=ka.add(2*t),r=Ea(e,0).mul(xa),a=Ea(e,8),s=Ea(e,t-8).mul(n),o=Ea(e,t-16).mul(ka);return Ia($a(r.add(a),43).add($a(s,30)).add(o),r.add($a(a.add(ka),18)).add(s),n)}(e,t);if(t<=64)return function(e,t=e.length){const n=ka.add(2*t),r=Ea(e,0).mul(ka),a=Ea(e,8),s=Ea(e,t-8).mul(n),o=Ea(e,t-16).mul(ka),i=$a(r.add(a),43).add($a(s,30)).add(o),l=Ia(i,r.add($a(a.add(ka),18)).add(s),n),u=Ea(e,16).mul(n),c=Ea(e,24),p=i.add(Ea(e,t-32)).mul(n),d=l.add(Ea(e,t-24)).mul(n);return Ia($a(u.add(c),43).add($a(p,30)).add(d),u.add($a(c.add(r),18)).add(p),n)}(e,t);let r=n,a=n.mul(xa).add(113),s=Ca(a.mul(ka).add(113)).mul(ka),o=[ba.UZERO,ba.UZERO],i=[ba.UZERO,ba.UZERO];r=r.mul(ka).add(Ea(e,0));let l=0;const u=64*(t-1>>6),c=u+(t-1&63)-63;do{r=$a(r.add(a).add(o[0]).add(Ea(e,l+8)),37).mul(xa),a=$a(a.add(o[1]).add(Ea(e,l+48)),42).mul(xa),r=r.xor(i[1]),a=a.add(o[0]).add(Ea(e,l+40)),s=$a(s.add(i[0]),33).mul(xa),o=Na(e,l,o[1].mul(xa),r.add(i[0])),i=Na(e,l+32,s.add(i[1]),a.add(Ea(e,l+16))),[s,r]=[r,s],l+=64}while(l!==u);const p=xa.add(s.and(255).shl(1));return l=c,i[0]=i[0].add(t-1&63),o[0]=o[0].add(i[0]),i[0]=i[0].add(o[0]),r=$a(r.add(a).add(o[0]).add(Ea(e,l+8)),37).mul(p),a=$a(a.add(o[1]).add(Ea(e,l+48)),42).mul(p),r=r.xor(i[1].mul(9)),a=a.add(o[0].mul(9).add(Ea(e,l+40))),s=$a(s.add(i[0]),33).mul(p),o=Na(e,l,o[1].mul(p),r.add(i[0])),i=Na(e,l+32,s.add(i[1]),a.add(Ea(e,l+16))),[s,r]=[r,s],Ia(Ia(o[0],i[0],p).add(Ca(a).mul(wa)).add(s),Ia(o[1],i[1],p).add(r),p)}function Aa(e,t){return"string"===t?Pa(e):Ma([e],t)}function Ma(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=oe(e)),Ge().getBool("DEBUG")&&xe(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error(`Unknown data type ${t}`)}function _a(){return Ge().platform.now()}function Ra(e,t){return Ge().platform.fetch(e,t)}function Pa(e,t="utf-8"){return t=t||"utf-8",Ge().platform.encode(e,t)}function Da(e,t="utf-8"){return t=t||"utf-8",Ge().platform.decode(e,t)}class La{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new Fa)}profileKernel(e,t,n){let r;const a=()=>{r=n()};let s;const o=_a();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(a);else{a();for(const e of r)e.dataSync();s=Promise.resolve({kernelMs:_a()-o})}if(Ge().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let t=0;t<r.length;t++){const n=r[t];n.data().then((t=>{Ba(t,n.dtype,e)}))}return{kernelName:e,outputs:r,inputs:t,timeMs:s.then((e=>e.kernelMs)),extraInfo:s.then((e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""))}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:a,extraInfo:s}=e;n.forEach((e=>{Promise.all([e.data(),r,s]).then((n=>{this.logger.logKernelProfile(t,e,n[0],n[1],a,n[2])}))}))}}function Ba(e,t,n){if("float32"!==t)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(isNaN(r)||!isFinite(r))return console.warn(`Found ${r} in the result of '${n}'`),!0}return!1}class Fa{logKernelProfile(e,t,n,r,a,s){const o="number"==typeof r?fe(`${r}ms`,9):r.error,i=fe(e,25),l=t.rank,u=t.size,c=fe(t.shape.toString(),14);let p="";for(const e in a){const n=a[e];if(null!=n){const r=n.shape||t.shape,a=r.length;p+=`${e}: ${a}D ${a>0?r:""} `}}console.log(`%c${i}\t%c${o}\t%c${l}D ${c}\t%c${u}\t%c${p}\t%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}function za(e,t,n,r){const a=_e(t),s=function(e,t,n,r){const a=ie(t),s=r[r.length-1],o=new Array(s).fill(0),i=t.length,l="complex64"===n?ja(e):e;if(i>1)for(let e=0;e<a/s;e++){const t=e*s;for(let e=0;e<s;e++)o[e]=Math.max(o[e],Va(l[t+e],0,n).length)}return o}(e,t,n,a),o=t.length,i=Ha(e,t,n,a,s),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(i.map((e=>"    "+e)).join("\n")),l.join("\n")}function Va(e,t,n){let r;return r=Array.isArray(e)?`${parseFloat(e[0].toFixed(7))} + ${parseFloat(e[1].toFixed(7))}j`:$e(e)?`'${e}'`:"bool"===n?Wa(e):parseFloat(e.toFixed(7)).toString(),fe(r,t)}function Wa(e){return 0===e?"false":"true"}function Ha(e,t,n,r,a,s=!0){const o="complex64"===n?2:1,i=t[0],l=t.length;if(0===l){if("complex64"===n){return[Va(ja(e)[0],0,n)]}return"bool"===n?[Wa(e[0])]:[e[0].toString()]}if(1===l){if(i>20){const t=3*o;let r=Array.from(e.slice(0,t)),s=Array.from(e.slice((i-3)*o,i*o));return"complex64"===n&&(r=ja(r),s=ja(s)),["["+r.map(((e,t)=>Va(e,a[t],n))).join(", ")+", ..., "+s.map(((e,t)=>Va(e,a[i-3+t],n))).join(", ")+"]"]}return["["+("complex64"===n?ja(e):Array.from(e)).map(((e,t)=>Va(e,a[t],n))).join(", ")+"]"]}const u=t.slice(1),c=r.slice(1),p=r[0]*o,d=[];if(i>20){for(let t=0;t<3;t++){const r=t*p,s=r+p;d.push(...Ha(e.slice(r,s),u,n,c,a,!1))}d.push("...");for(let t=i-3;t<i;t++){const r=t*p,s=r+p;d.push(...Ha(e.slice(r,s),u,n,c,a,t===i-1))}}else for(let t=0;t<i;t++){const r=t*p,s=r+p;d.push(...Ha(e.slice(r,s),u,n,c,a,t===i-1))}const h=2===l?",":"";d[0]="["+d[0]+h;for(let e=1;e<d.length-1;e++)d[e]=" "+d[e]+h;let f=",\n";for(let e=2;e<l;e++)f+="\n";return d[d.length-1]=" "+d[d.length-1]+"]"+(s?"":f),d}function ja(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}class Ua{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=ie(e),null!=n){const e=n.length;re(e===this.size,(()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||we(t,this.size),this.strides=_e(e)}set(e,...t){0===t.length&&(t=[0]),re(t.length===this.rank,(()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`));const n=this.locToIndex(t);this.values[n]=e}get(...e){0===e.length&&(e=[0]);let t=0;for(const n of e){if(n<0||n>=this.shape[t]){const t=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(t)}t++}let n=e[e.length-1];for(let t=0;t<e.length-1;++t)n+=this.strides[t]*e[t];return this.values[n]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return Ga().makeTensor(this.values,this.shape,this.dtype)}}let Ga=null,qa=null,Xa=null;class Ka{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=ie(e),this.strides=_e(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return qa.buffer(this.shape,this.dtype,e)}bufferSync(){return qa.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Pe(this.shape,e,"complex64"===this.dtype)}arraySync(){return Pe(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=Ga().read(this.dataId);if("string"===this.dtype){const t=await e;try{return t.map((e=>Da(e)))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Ga().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Ga().readSync(this.dataId);if("string"===this.dtype)try{return e.map((e=>Da(e)))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Ga().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(Ga().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return qa.print(this,e)}clone(){return this.throwIfDisposed(),qa.clone(this)}toString(e=!1){return za(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),qa.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),Ga().makeVariable(this,e,t,n)}}function Ya(){return Ye("Tensor",(()=>Ka))}Object.defineProperty(Ka,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),Ya();class Ja extends Ka{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!ue(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Ga().disposeTensor(this),this.dataId=e.dataId,Ga().incRef(this,null)}dispose(){Ga().disposeVariable(this),this.isDisposedInternal=!0}}var Za,Qa,es,ts,ns;Object.defineProperty(Ja,Symbol.hasInstance,{value:e=>e instanceof Ka&&null!=e.assign&&e.assign instanceof Function}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Za||(Za={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Qa||(Qa={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(es||(es={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(ts||(ts={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(ns||(ns={}));const rs={float32:ts,int32:Qa,bool:es,complex64:ns};function as(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return rs[e][t]}function ss(e){return as(e,"int32")}function os(e,t){if(e.dtype===t.dtype)return[e,t];const n=as(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function is(e,t){re(e.dtype===t.dtype,(()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`))}function ls(e,t){return t.some((t=>t.id===e.id))}function us(e){const t=[];return cs(e,t,new Set),t}function cs(e,t,n){if(null==e)return;if(e instanceof Ka)return void t.push(e);if(r=e,!Array.isArray(r)&&"object"!=typeof r)return;var r;const a=e;for(const e in a){const r=a[e];n.has(r)||(n.add(r),cs(r,t,n))}}function ps(e){return null!=e.kernelName}class ds{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((e=>e.name))))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class hs{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new ds}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(aa(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new La(this.backendInstance),!0}setupRegisteredKernels(){ca(this.backendName).forEach((e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(e){ca(e).forEach((t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])}))}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const n=t.factory();if(!n||n instanceof q||"function"!=typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then((n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0))).catch((n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,aa(`Initialization of backend ${e} failed`),aa(n.stack||n.message)),!1)));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(t){return aa(`Initialization of backend ${e} failed`),aa(t.stack||t.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority))}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:a}=this.initializeBackend(n);if(a||r)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),s=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,s),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun((()=>this.startScope(r)),(()=>this.endScope(n)),(()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(e){throw t(),e}}nextTensorId(){return hs.nextTensorId++}nextVariableId(){return hs.nextVariableId++}clone(e){const t=ms.runKernel(dn,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(e=>({x:()=>{const t={x:e},n={dtype:"float32"};return ms.runKernel(wt,t,n)}})),[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;if(!(null!=la(e,this.backendName)))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let a=0;n.forEach((e=>{a+="complex64"===e.dtype?3:1}));const s=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-s;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${e}'`)}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),a=this.state.numBytes,s=this.state.numTensors;let o,i;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const l=ps(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(ps(e)){const{kernelName:t,inputs:a,attrs:s}=e;null==this.backendName&&this.backend;const l=la(t,this.backendName);re(null!=l,(()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`)),o=()=>{const e=this.backend.numDataIds();i=l.kernelFunc({inputs:a,attrs:s,backend:this.backend});const o=Array.isArray(i)?i:[i];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,o);const u=o.map((e=>{if(null!=e.rank)return e;const{dataId:t,shape:n,dtype:r}=e;return this.makeTensorFromDataId(t,n,r)}));if(r){const e=this.getTensorsForGradient(t,a,u);n=this.saveTensorsForBackwardMode(e)}return u}}else{const{forwardFunc:t}=e,a=e=>{r&&(n=e.map((e=>this.keep(this.clone(e)))))};o=()=>{const e=this.backend.numDataIds();i=this.tidy((()=>t(this.backend,a)));const n=Array.isArray(i)?i:[i];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}const{inputs:u,attrs:c}=e,p=ps(e)?null:e.backwardsFunc;let d;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(d=this.profiler.profileKernel(l,u,(()=>o())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(d),t=d.outputs):t=o()})),r&&this.addTapeNode(l,u,t,p,n,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map((e=>null!=u[e]?u[e].shape:null)),outputShapes:t.map((e=>e.shape)),kernelTimeMs:d.timeMs,extraInfo:d.extraInfo}),Array.isArray(i)?t:t[0]}saveTensorsForBackwardMode(e){const t=e.map((e=>this.keep(this.clone(e))));return t}getTensorsForGradient(e,t,n){const r=ua(e);if(null!=r){const e=r.inputsToSave||[],a=r.outputsToSave||[];let s;r.saveAllInputs?(re(Array.isArray(t),(()=>"saveAllInputs is true, expected inputs to be an array.")),s=Object.keys(t).map((e=>t[e]))):s=e.map((e=>t[e]));const o=n.filter(((e,t)=>a[t]));return s.concat(o)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let a=e;"string"===n&&$e(e[0])&&(a=e.map((e=>Pa(e))));const s=r.write(a,t,n),o=new Ka(t,n,s,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){const e=this.state.tensorInfo.get(s),t=Te(a);this.state.numBytes+=t-e.bytes,e.bytes=t}return o}makeTensorFromDataId(e,t,n,r){const a=new Ka(t,n=n||"float32",e,this.nextTensorId());return this.trackTensor(a,r),a}makeVariable(e,t=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const a=new Ja(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*Ee(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof Ja||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*Ee(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((e=>e.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const e of this.state.activeProfile.kernels)e.kernelTimeMs=await e.kernelTimeMs,e.extraInfo=await e.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,a,s){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},i=ua(e);null!=i&&(r=i.gradFunc),null!=r&&(o.gradient=e=>(e=e.map(((e,t)=>{if(null==e){const e=n[t],r=Le(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e})),r(e.length>1?e:e[0],a,s))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=us(e),n=new Set(t.map((e=>e.id)));for(let e=0;e<this.state.activeScope.track.length;e++){const t=this.state.activeScope.track[e];t.kept||n.has(t.id)||t.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach((e=>{e.kept||e.scopeId!==r.id||this.track(e)}))}gradients(e,t,n,r=!1){if(re(t.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const a=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",e)));re(a instanceof Ka,(()=>"The result y returned by f() must be a tensor."));const s=function(e,t,n){const r={},a={};for(let e=0;e<t.length;e++)r[t[e].id]=!0;for(let n=0;n<e.length;n++){const s=e[n],o=s.inputs;for(const e in o){const n=o[e];let i=!1;for(let e=0;e<t.length;e++)if(r[n.id]){s.outputs.forEach((e=>r[e.id]=!0)),i=!0,a[s.id]=!0;break}if(i)break}}const s={};s[n.id]=!0;const o={};for(let t=e.length-1;t>=0;t--){const n=e[t],r=n.inputs;for(let e=0;e<n.outputs.length;e++)if(s[n.outputs[e].id]){for(const e in r)s[r[e].id]=!0,o[n.id]=!0;break}}const i=[];for(let t=0;t<e.length;t++){const n=e[t];if(a[n.id]&&o[n.id]){const e={};for(const t in n.inputs){const a=n.inputs[t];r[a.id]&&(e[t]=a)}const t=Object.assign({},n);t.inputs=e,t.outputs=n.outputs,i.push(t)}}return i}(this.state.activeTape,t,a);if(!r&&0===s.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const e={};e[a.id]=null==n?function(e){const t=De(ie(e),"float32");return ms.makeTensor(t,e,"float32")}(a.shape):n,function(e,t,n,r){for(let a=t.length-1;a>=0;a--){const s=t[a],o=[];if(s.outputs.forEach((t=>{const n=e[t.id];null!=n?o.push(n):o.push(null)})),null==s.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const i=s.gradient(o);for(const t in s.inputs){if(!(t in i))throw new Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(i)}.`);const a=n((()=>i[t]()));if("float32"!==a.dtype)throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${a.dtype}'`);const o=s.inputs[t];if(!ue(a.shape,o.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${t}' has shape '${a.shape}', which does not match the shape of the input '${o.shape}'`);if(null==e[o.id])e[o.id]=a;else{const t=e[o.id];e[o.id]=r(t,a),t.dispose()}}}}(e,s,(e=>this.tidy(e)),gs);const r=t.map((t=>e[t.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((e=>{for(const t of e.saved)t.dispose()})),this.state.activeTape=null),{value:a,grads:r}}))}customGrad(e){return re(Ae(e),(()=>"The f passed in customGrad(f) must be a function.")),(...t)=>{let n;re(t.every((e=>e instanceof Ka)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const r={};t.forEach(((e,t)=>{r[t]=e}));return this.runKernelFunc({forwardFunc:(r,a)=>(n=e(...t,a),re(n.value instanceof Ka,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),re(Ae(n.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),n.value),backwardsFunc:(e,r)=>{const a=n.gradFunc(e,r),s=Array.isArray(a)?a:[a];re(s.length===t.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),re(s.every((e=>e instanceof Ka)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const o={};return s.forEach(((e,t)=>{o[t]=()=>e})),o},inputs:r})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=_a(),n=await this.backend.time(e);return n.wallMs=_a()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new ds;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function fs(){const e=Ke();if(null==e._tfengine){const t=new je(e);e._tfengine=new hs(t)}var t;return t=e._tfengine.ENV,Xe=t,Ga=()=>e._tfengine,e._tfengine}hs.nextTensorId=0,hs.nextVariableId=0;const ms=fs();function gs(e,t){const n={a:e,b:t};return ms.runKernel(et,n)}let vs;function bs(e){vs=e}function ys(e){if(void 0!==vs)return vs;if(e||"undefined"!=typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!=typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function ws(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}const xs=Ge();function ks(e,t){let n=e;if(Se(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||Se(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Ge().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Cs(e,r,[]),r}function Cs(e,t,n){if(n=n||[],!Array.isArray(e)&&!Se(e))return void re(0===t.length,(()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`));re(t.length>0,(()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`)),re(e.length===t[0],(()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`));const r=t.slice(1);for(let t=0;t<e.length;++t)Cs(e[t],r,n.concat(t))}function Ss(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function Es(e,t,n,r="numeric"){if(e instanceof Ka)return Ss(r,e.dtype,t,n),e;let a=Oe(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),Ss(r,a,t,n),null==e||!Se(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){const r=null==e?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${r}'`)}const s=ks(e,a);Se(e)||Array.isArray(e)||(e=[e]);const o="string"!==a?Ma(e,a):oe(e,[],!0);return ms.makeTensor(o,s,a)}function Ts(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map(((e,a)=>Es(e,`${t}[${a}]`,n,r)))}xs.registerFlag("DEBUG",(()=>!1),(e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),xs.registerFlag("IS_BROWSER",(()=>ws())),xs.registerFlag("IS_NODE",(()=>"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node)),xs.registerFlag("IS_CHROME",(()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),xs.registerFlag("PROD",(()=>!1)),xs.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>xs.getBool("DEBUG"))),xs.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),xs.registerFlag("IS_TEST",(()=>!1)),xs.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>!0)),xs.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1)),xs.registerFlag("ENGINE_COMPILE_ONLY",(()=>!1));const $s="__op";function Is(e){const t=Object.keys(e);if(1!==t.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=$s;const a=(...e)=>{ms.startScope(n);try{const t=r(...e);return We(t)&&console.error("Cannot return a Promise inside of tidy."),ms.endScope(t),t}catch(e){throw ms.endScope(null),e}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}const Ns=Is({complex_:function(e,t){const n=Es(e,"real","complex"),r=Es(t,"imag","complex");ae(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const a={real:n,imag:r};return ms.runKernel(Ct,a)}});function Os(e,t,n,r){if(null==r&&(r=Oe(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Se(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Fe(t);const e=ie(t),r=ie(n);re(e===r,(()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${r}`));for(let e=0;e<n.length;++e){const r=n[e],a=e!==n.length-1||r!==ie(t.slice(e));re(n[e]===t[e]||!a,(()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `))}}return Se(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?Ma(e,r):oe(e,[],!0),ms.makeTensor(e,t,r)}function As(e,t,n){return Os(e,t,ks(e,n),n)}const Ms={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};async function _s(e,t){const n=[],r=[],a=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);for(let s=0;s<a.length;++s){const o=a[s],i=Array.isArray(e)?e[s].tensor:e[o];if("float32"!==i.dtype&&"int32"!==i.dtype&&"bool"!==i.dtype&&"string"!==i.dtype&&"complex64"!==i.dtype)throw new Error(`Unsupported dtype in weight '${o}': ${i.dtype}`);const l={name:o,shape:i.shape,dtype:i.dtype};if("string"===i.dtype){const e=new Promise((async e=>{const t=await i.bytes(),n=t.reduce(((e,t)=>e+t.length),0)+4*t.length,r=new Uint8Array(n);let a=0;for(let e=0;e<t.length;e++){const n=t[e],s=new Uint8Array(new Uint32Array([n.length]).buffer);r.set(s,a),a+=4,r.set(n,a),a+=n.length}e(r)}));r.push(e)}else r.push(i.data());null!=t&&(l.group=t),n.push(l)}return{data:Ps(await Promise.all(r)),specs:n}}function Rs(e,t){const n={};let r,a=0;for(const s of t){const t=s.name,o=s.dtype,i=s.shape,l=ie(i);let u;if("quantization"in s){const n=s.quantization;if("uint8"===n.dtype||"uint16"===n.dtype){if(!("min"in n)||!("scale"in n))throw new Error(`Weight ${s.name} with quantization ${n.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==n.dtype)throw new Error(`Weight ${s.name} has unknown quantization dtype ${n.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==o)throw new Error(`Weight ${s.name} is quantized with ${n.dtype} which only supports weights of type float32 not ${o}.`)}const i=Ms[n.dtype],c=e.slice(a,a+l*i),p="uint8"===n.dtype?new Uint8Array(c):new Uint16Array(c);if("float32"===o)if("uint8"===n.dtype||"uint16"===n.dtype){u=new Float32Array(p.length);for(let e=0;e<p.length;e++){const t=p[e];u[e]=t*n.scale+n.min}}else{if("float16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type float32.`);void 0===r&&(r=Hs()),u=r(p)}else{if("int32"!==o)throw new Error(`Unsupported dtype in weight '${t}': ${o}`);if("uint8"!==n.dtype&&"uint16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type int32.`);u=new Int32Array(p.length);for(let e=0;e<p.length;e++){const t=p[e];u[e]=Math.round(t*n.scale+n.min)}}a+=l*i}else if("string"===o){const t=ie(s.shape);u=[];for(let n=0;n<t;n++){const t=new Uint32Array(e.slice(a,a+4))[0];a+=4;const n=new Uint8Array(e.slice(a,a+t));u.push(n),a+=t}}else{const r=Ms[o],s=e.slice(a,a+l*r);if("float32"===o)u=new Float32Array(s);else if("int32"===o)u=new Int32Array(s);else if("bool"===o)u=new Uint8Array(s);else{if("complex64"!==o)throw new Error(`Unsupported dtype in weight '${t}': ${o}`);{u=new Float32Array(s);const e=new Float32Array(u.length/2),r=new Float32Array(u.length/2);for(let t=0;t<e.length;t++)e[t]=u[2*t],r[t]=u[2*t+1];const a=As(e,i,"float32"),o=As(r,i,"float32");n[t]=Ns(a,o),a.dispose(),o.dispose()}}a+=l*r}"complex64"!==o&&(n[t]=As(u,i,o))}return n}function Ps(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach((e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)}));const r=new Uint8Array(t);let a=0;return n.forEach((e=>{r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}const Ds="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function Ls(e){return Ds?Buffer.byteLength(e):new Blob([e]).size}function Bs(e){if(1===e.length)return e[0];let t=0;e.forEach((e=>{t+=e.byteLength}));const n=new Uint8Array(t);let r=0;return e.forEach((e=>{n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function Fs(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function zs(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}async function Vs(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),null!=e.weightsManifest){const[r,a]=await t(e.weightsManifest);n.weightSpecs=r,n.weightData=a}return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),n}function Ws(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Ls(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Ls(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function Hs(){const e=function(){const e=e=>{let t=e<<13,n=0;for(;0==(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let e=1024;e<2048;e++)t[e]=939524096+(e-1024<<13);return t}(),t=function(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{const a=new ArrayBuffer(4*r.length),s=new Uint32Array(a);for(let a=0;a<r.length;a++){const o=r[a],i=e[n[o>>10]+(1023&o)]+t[o>>10];s[a]=i}return new Float32Array(a)}}class js{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==js.instance&&(js.instance=new js),js.instance}static registerSaveRouter(e){js.getInstance().saveRouters.push(e)}static registerLoadRouter(e){js.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return js.getHandlers(e,"save")}static getLoadHandlers(e,t){return js.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[];return("load"===t?js.getInstance().loadRouters:js.getInstance().saveRouters).forEach((t=>{const a=t(e,n);null!==a&&r.push(a)})),r}}const Us=e=>js.registerSaveRouter(e),Gs=e=>js.registerLoadRouter(e),qs=e=>js.getSaveHandlers(e),Xs=(e,t)=>js.getLoadHandlers(e,t),Ks="tensorflowjs",Ys="models_store",Js="model_info_store";function Zs(){if(!Ge().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Qs(e){const t=e.result;t.createObjectStore(Ys,{keyPath:"modelPath"}),t.createObjectStore(Js,{keyPath:"modelPath"})}class eo{constructor(e){if(this.indexedDB=Zs(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,n)=>{const r=this.indexedDB.open(Ks,1);r.onupgradeneeded=()=>Qs(r),r.onsuccess=()=>{const a=r.result;if(null==t){const t=a.transaction(Ys,"readonly"),r=t.objectStore(Ys).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return a.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(r.result.modelArtifacts)},r.onerror=e=>(a.close(),n(r.error)),t.oncomplete=()=>a.close()}else{const r=Ws(t),s=a.transaction(Js,"readwrite");let o=s.objectStore(Js);const i=o.put({modelPath:this.modelPath,modelArtifactsInfo:r});let l;i.onsuccess=()=>{l=a.transaction(Ys,"readwrite");const i=l.objectStore(Ys).put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r});i.onsuccess=()=>e({modelArtifactsInfo:r}),i.onerror=e=>{o=s.objectStore(Js);const t=o.delete(this.modelPath);t.onsuccess=()=>(a.close(),n(i.error)),t.onerror=e=>(a.close(),n(i.error))}},i.onerror=e=>(a.close(),n(i.error)),s.oncomplete=()=>{null==l?a.close():l.oncomplete=()=>a.close()}}},r.onerror=e=>n(r.error)}))}}eo.URL_SCHEME="indexeddb://";const to=e=>{return Ge().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(eo.URL_SCHEME)?(t=e.slice(eo.URL_SCHEME.length),new eo(t)):null;var t};js.registerSaveRouter(to),js.registerLoadRouter(to);class no{constructor(){this.indexedDB=Zs()}async listModels(){return new Promise(((e,t)=>{const n=this.indexedDB.open(Ks,1);n.onupgradeneeded=()=>Qs(n),n.onsuccess=()=>{const r=n.result,a=r.transaction(Js,"readonly"),s=a.objectStore(Js).getAll();s.onsuccess=()=>{const t={};for(const e of s.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},s.onerror=e=>(r.close(),t(s.error)),a.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)}))}async removeModel(e){var t;return e=(t=e).startsWith(eo.URL_SCHEME)?t.slice(eo.URL_SCHEME.length):t,new Promise(((t,n)=>{const r=this.indexedDB.open(Ks,1);r.onupgradeneeded=()=>Qs(r),r.onsuccess=()=>{const a=r.result,s=a.transaction(Js,"readwrite"),o=s.objectStore(Js),i=o.get(e);let l;i.onsuccess=()=>{if(null==i.result)return a.close(),n(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const r=o.delete(e),s=()=>{l=a.transaction(Ys,"readwrite");const r=l.objectStore(Ys).delete(e);r.onsuccess=()=>t(i.result.modelArtifactsInfo),r.onerror=e=>n(i.error)};r.onsuccess=s,r.onerror=e=>(s(),a.close(),n(i.error))}},i.onerror=e=>(a.close(),n(i.error)),s.oncomplete=()=>{null==l?a.close():l.oncomplete=()=>a.close()}},r.onerror=e=>n(r.error)}))}}const ro="/",ao="tensorflowjs_models",so="info",oo="model_topology",io="weight_specs",lo="weight_data",uo="model_metadata";function co(e){return{info:[ao,e,so].join(ro),topology:[ao,e,oo].join(ro),weightSpecs:[ao,e,io].join(ro),weightData:[ao,e,lo].join(ro),modelMetadata:[ao,e,uo].join(ro)}}function po(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function ho(e){const t=e.split(ro);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(ro)}class fo{constructor(e){if(!Ge().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=co(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=Ws(e);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(Ds)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let e=0,r=t.length;e<r;e++)n+=String.fromCharCode(t[e]);return btoa(n)}(e.weightData));const a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:r}}catch(e){throw po(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${r.modelTopologyBytes}, weightSpecsBytes=${r.weightSpecsBytes}, weightDataBytes=${r.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;const a=this.LS.getItem(this.keys.modelMetadata);if(null!=a){const e=JSON.parse(a);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const s=this.LS.getItem(this.keys.weightData);if(null==s)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=function(e){if(Ds){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n.set([t.charCodeAt(e)],e);return n.buffer}(s),t}}fo.URL_SCHEME="localstorage://";const mo=e=>{return Ge().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(fo.URL_SCHEME)?(t=e.slice(fo.URL_SCHEME.length),new fo(t)):null;var t};js.registerSaveRouter(mo),js.registerLoadRouter(mo);class go{constructor(){re(Ge().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),re("undefined"==typeof window||void 0!==window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=ao+ro,n=ro+so;for(let r=0;r<this.LS.length;++r){const a=this.LS.key(r);if(a.startsWith(t)&&a.endsWith(n)){e[ho(a)]=JSON.parse(this.LS.getItem(a))}}return e}async removeModel(e){var t;const n=co(e=(t=e).startsWith(fo.URL_SCHEME)?t.slice(fo.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return po(n),r}}const vo="://";class bo{constructor(){this.managers={}}static getInstance(){return null==bo.instance&&(bo.instance=new bo),bo.instance}static registerManager(e,t){re(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(vo)&&(e=e.slice(0,e.indexOf(vo))),re(e.length>0,(()=>"scheme must not be an empty string."));const n=bo.getInstance();re(null==n.managers[e],(()=>`A model store manager is already registered for scheme '${e}'.`)),n.managers[e]=t}static getManager(e){const t=this.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(this.getInstance().managers)}}function yo(e){if(-1===e.indexOf(vo))throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${bo.getSchemes().join(",")}`);return{scheme:e.split(vo)[0],path:e.split(vo)[1]}}async function wo(e,t,n=!1){re(e!==t,(()=>`Old path and new path are the same: '${e}'`));const r=js.getLoadHandlers(e);re(r.length>0,(()=>`Copying failed because no load handler is found for source URL ${e}.`)),re(r.length<2,(()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`));const a=r[0],s=js.getSaveHandlers(t);re(s.length>0,(()=>`Copying failed because no save handler is found for destination URL ${t}.`)),re(s.length<2,(()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`));const o=s[0],i=yo(e).scheme,l=yo(e).path,u=i===yo(e).scheme,c=await a.load();n&&u&&await bo.getManager(i).removeModel(l);const p=await o.save(c);return n&&!u&&await bo.getManager(i).removeModel(l),p.modelArtifactsInfo}async function xo(){const e=bo.getSchemes(),t={};for(const n of e){const e=await bo.getManager(n).listModels();for(const r in e){t[n+vo+r]=e[r]}}return t}async function ko(e){const t=yo(e);return bo.getManager(t.scheme).removeModel(t.path)}async function Co(e,t){return wo(e,t,!1)}async function So(e,t){return wo(e,t,!0)}class Eo{fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}}if(Ge().get("IS_BROWSER")){Ge().setPlatform("browser",new Eo);try{bo.registerManager(fo.URL_SCHEME,new go)}catch(e){}try{bo.registerManager(eo.URL_SCHEME,new no)}catch(e){}}const To=()=>n(410);let $o;class Io{constructor(){this.util=n(628),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=Ge().global.fetch?Ge().global.fetch(e,t):(null==$o&&($o=To()),$o(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}function No(e,t="float32",n){return t=t||"float32",Fe(e),new Ua(e,t,n)}Ge().get("IS_NODE")&&!Ge().get("IS_BROWSER")&&Ge().setPlatform("node",new Io);const Oo=Is({cast_:function(e,t){const n=Es(e,"x","cast");if(!ke(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const r={x:n},a={dtype:t};return ms.runKernel(wt,r,a)}});const Ao=Is({clone_:function(e){const t={x:Es(e,"x","clone","string_or_numeric")};return ms.runKernel(dn,t)}});function Mo(e,t=!1){console.log(e.toString(t))}fs();qa={buffer:No,cast:Oo,clone:Ao,print:Mo};function _o(e){return new Promise((e=>setTimeout(e))).then(e)}class Ro{constructor(e){if(!Ge().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Ro.URL_SCHEME)&&(e=e.slice(Ro.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const n=zs(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),r=window.URL.createObjectURL(new Blob([JSON.stringify(n)],{type:"application/json"})),a=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=r,await _o((()=>a.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=t,await _o((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:Ws(e)}}}}Ro.URL_SCHEME="downloads://";class Po{constructor(e){if(null==e||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise(((e,t)=>{const n=new FileReader;n.onload=n=>{const r=JSON.parse(n.target.result),a=r.modelTopology;if(null==a)return void t(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));if(null==r.weightsManifest)return void t(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));if(0===this.weightsFiles.length)return void e({modelTopology:a});const s=Vs(r,(e=>this.loadWeights(e)));e(s)},n.onerror=e=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),n.readAsText(this.jsonFile)}))}loadWeights(e){const t=[],n=[];for(const r of e)t.push(...r.weights),n.push(...r.paths);const r=this.checkManifestAndWeightFiles(e),a=n.map((e=>this.loadWeightsFile(e,r[e])));return Promise.all(a).then((e=>[t,Bs(e)]))}loadWeightsFile(e,t){return new Promise(((n,r)=>{const a=new FileReader;a.onload=e=>{const t=e.target.result;n(t)},a.onerror=t=>r(`Failed to weights data from file of path '${e}'.`),a.readAsArrayBuffer(t)}))}checkManifestAndWeightFiles(e){const t=[],n=this.weightsFiles.map((e=>Fs(e.name))),r={};for(const a of e)a.paths.forEach((e=>{const a=Fs(e);if(-1!==t.indexOf(a))throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(t.push(a),-1===n.indexOf(a))throw new Error(`Weight file with basename '${a}' is not provided.`);r[e]=this.weightsFiles[n.indexOf(a)]}));if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}}function Do(e){return new Po(e)}function Lo(e,t,n,r){!function(e){re(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}(e),function(e,t){re(e>=0&&e<=1,(()=>`Progress fraction must be in range [0, 1], but got startFraction ${e}`)),re(t>=0&&t<=1,(()=>`Progress fraction must be in range [0, 1], but got endFraction ${t}`)),re(t>=e,(()=>`startFraction must be no more than endFraction, but got startFraction ${e} and endFraction ${t}`))}(n=null==n?0:n,r=null==r?1:r);let a=0;return Promise.all(e.map((s=>(s.then((s=>{const o=n+ ++a/e.length*(r-n);return t(o),s})),s))))}async function Bo(e,t){null==t&&(t={});const n=null==t.fetchFunc?Ge().platform.fetch:t.fetchFunc,r=e.map((e=>n(e,t.requestInit,{isBinary:!0}))),a=(null==t.onProgress?await Promise.all(r):await Lo(r,t.onProgress,0,.5)).map((e=>e.arrayBuffer()));return null==t.onProgress?await Promise.all(a):await Lo(a,t.onProgress,.5,1)}async function Fo(e,t="",n,r){return zo((e=>Bo(e,{requestInit:r})))(e,t,n)}function zo(e){return async(t,n="",r)=>{const a=t.map((()=>!1)),s={},o=null!=r?r.map((()=>!1)):[],i=[];if(t.forEach(((e,t)=>{let n=0;e.weights.forEach((e=>{const l="quantization"in e?e.quantization.dtype:e.dtype,u=Ms[l]*ie(e.shape),c=()=>{a[t]=!0,null==s[t]&&(s[t]=[]),s[t].push({manifestEntry:e,groupOffset:n,sizeBytes:u})};null!=r?r.forEach(((t,n)=>{t===e.name&&(c(),o[n]=!0)})):c(),i.push(e.name),n+=u}))})),!o.every((e=>e))){const e=r.filter(((e,t)=>!o[t]));throw new Error(`Could not find weights in manifest with names: ${e.join(", ")}. \nManifest JSON has weights with names: ${i.join(", ")}.`)}const l=a.reduce(((e,t,n)=>(t&&e.push(n),e)),[]),u=[];l.forEach((e=>{t[e].paths.forEach((e=>{const t=n+(n.endsWith("/")?"":"/")+e;u.push(t)}))}));const c=await e(u),p={};let d=0;return l.forEach((e=>{const n=t[e].paths.length;let r=0;for(let e=0;e<n;e++)r+=c[d+e].byteLength;const a=new ArrayBuffer(r),o=new Uint8Array(a);let i=0;for(let e=0;e<n;e++){const t=new Uint8Array(c[d+e]);o.set(t,i),i+=t.byteLength}s[e].forEach((e=>{const t=Rs(a.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(const e in t)p[e]=t[e]})),d+=n})),p}}js.registerSaveRouter((e=>Ge().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ro.URL_SCHEME)?function(e="model"){return new Ro(e)}(e.slice(Ro.URL_SCHEME.length)):null));class Vo{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(re("function"==typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=Ge().platform.fetch,re(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&re(2===e.length,(()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`)),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=zs(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin");const r=await this.fetch(this.path,t);if(r.ok)return{modelArtifactsInfo:Ws(e),responses:[r]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${r.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch(e){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=t.modelTopology,r=t.weightsManifest;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return Vs(t,(e=>this.loadWeights(e)))}async loadWeights(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),a=n>t?e.substring(n):"";return[r+"/",a]}(t),a=this.weightPathPrefix||n,s=[];for(const t of e)s.push(...t.weights);const o=[],i=[];for(const t of e)for(const e of t.paths)null!=this.weightUrlConverter?i.push(this.weightUrlConverter(e)):o.push(a+e+r);this.weightUrlConverter&&o.push(...await Promise.all(i));return[s,Bs(await Bo(o,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress}))]}}function Wo(e){return null!=e.match(Vo.URL_SCHEME_REGEX)}Vo.URL_SCHEME_REGEX=/^https?:\/\//;const Ho=(e,t)=>{if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every((e=>Wo(e))):Wo(e),n)return jo(e,t)}return null};function jo(e,t){return new Vo(e,t)}function Uo(e,t){return jo(e,t)}js.registerSaveRouter(Ho),js.registerLoadRouter(Ho);class Go{constructor(e){this.modelArtifacts=e}async load(){return this.modelArtifacts}}class qo{constructor(e){this.saveHandler=e}async save(e){return this.saveHandler(e)}}function Xo(e,t,n,r){if(1===arguments.length){return null!=e.modelTopology||null!=e.weightSpecs?new Go(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Go({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Go({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function Ko(e){return new qo(e)}const Yo=Is({matMul_:function(e,t,n=!1,r=!1){let a=Es(e,"a","matMul"),s=Es(t,"b","matMul");[a,s]=os(a,s);const o={a:a,b:s},i={transposeA:n,transposeB:r};return ms.runKernel(mt,o,i)}});const Jo=Is({oneHot_:function(e,t,n=1,r=0){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const a={indices:Es(e,"indices","oneHot","int32")},s={depth:t,onValue:n,offValue:r};return ms.runKernel(Yn,a,s)}});const Zo=Is({transpose_:function(e,t){const n=Es(e,"x","transpose");if(null==t&&(t=n.shape.map(((e,t)=>t)).reverse()),re(n.rank===t.length,(()=>`Error in transpose: rank of input ${n.rank} must match length of perm ${t}.`)),t.forEach((e=>{re(e>=0&&e<n.rank,(()=>"All entries in 'perm' must be between 0 and "+(n.rank-1)+` but got ${t}`))})),n.rank<=1)return n.clone();const r={x:n},a={perm:t};return ms.runKernel(qr,r,a)}});const Qo=Is({confusionMatrix_:function(e,t,n){const r=Es(e,"labels","confusionMatrix"),a=Es(t,"predictions","confusionMatrix");re(null==n||n>0&&Number.isInteger(n),(()=>`If provided, numClasses must be a positive integer, but got ${n}`)),re(1===r.rank,(()=>`Expected the rank of labels to be 1, but got ${r.rank}`)),re(1===a.rank,(()=>`Expected the rank of predictions to be 1, but got ${a.rank}`)),re(r.shape[0]===a.shape[0],(()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${a.shape[0]}. Labels and predictions should have the same number of elements.`)),re(n>0&&Number.isInteger(n),(()=>`numClasses is required to be a positive integer, but got ${n}`));const s=Jo(Oo(r,"int32"),n),o=Jo(Oo(a,"int32"),n),i=Zo(s),l=Yo(i,o);return Oo(l,"int32")}});function ei(e,t){const n=e.length,r=[];for(let a=0;a<n;a++){const s=n-1-a,o=e[s]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(s)}return r}function ti(e,t){const n=[];for(let r=0;r<t.length;r++){const a=e[e.length-r-1],s=t.length-r-1,o=t[s];(null==a||1===a&&o>1)&&n.unshift(s)}return n}function ni(e,t){const n=[],r=Math.max(e.length,t.length);for(let a=0;a<r;a++){let r=e[e.length-a-1];null==r&&(r=1);let s=t[t.length-a-1];if(null==s&&(s=1),1===r)n.unshift(s);else if(1===s)n.unshift(r);else{if(r!==s){throw Error(`Operands could not be broadcast together with shapes ${e} and ${t}.`)}n.unshift(r)}}return n}function ri(e,t,n){if(se(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");const r=ks(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Os(e,t,r,n)}let ai;function si(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,a=!1,s=!1,o=!1,i=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)s=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);i=!0}if(a){const t=2;if(a&&e.readyState<t)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=la(Qr,ms.backendName)){const n={pixels:e},r={numChannels:t};return ms.runKernel(Qr,n,r)}const[l,u]=a?[e.videoWidth,e.videoHeight]:[e.width,e.height];let c,p;if(o)c=e.getContext("2d").getImageData(0,0,l,u).data;else if(r||n)c=e.data;else if(s||a||i){if(null==ai)if("undefined"==typeof document){if("undefined"==typeof OffscreenCanvas||"undefined"==typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");ai=new OffscreenCanvas(1,1).getContext("2d")}else ai=document.createElement("canvas").getContext("2d");ai.canvas.width=l,ai.canvas.height=u,ai.drawImage(e,0,0,l,u),c=ai.getImageData(0,0,l,u).data}if(4===t)p=new Int32Array(c);else{const e=l*u;p=new Int32Array(e*t);for(let n=0;n<e;n++)for(let e=0;e<t;++e)p[n*t+e]=c[4*n+e]}return ri(p,[u,l,t],"int32")}function oi(e){return"undefined"!=typeof window&&"undefined"!=typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}async function ii(e,t=3){let n=null;if(Ge().getBool("WRAP_TO_IMAGEBITMAP")&&oi(e)){let t;try{t=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch(e){t=null}n=null!=t&&t.width===e.width&&t.height===e.height?t:e}else n=e;return si(n,t)}async function li(e,t){let n=Es(e,"img","toPixels");if(!(e instanceof Ka)){const e=n;n=Oo(e,"int32"),e.dispose()}if(2!==n.rank&&3!==n.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,a]=n.shape.slice(0,2),s=2===n.rank?1:n.shape[2];if(s>4||2===s)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${s}`);if("float32"!==n.dtype&&"int32"!==n.dtype)throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);const o=await n.data(),i="float32"===n.dtype?255:1,l=new Uint8ClampedArray(a*r*4);for(let e=0;e<r*a;++e){const t=[0,0,0,255];for(let r=0;r<s;r++){const a=o[e*s+r];if("float32"===n.dtype){if(a<0||a>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${a}.`)}else if("int32"===n.dtype&&(a<0||a>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${a}.`);1===s?(t[0]=a*i,t[1]=a*i,t[2]=a*i):t[r]=a*i}const r=4*e;l[r+0]=Math.round(t[0]),l[r+1]=Math.round(t[1]),l[r+2]=Math.round(t[2]),l[r+3]=Math.round(t[3])}if(null!=t){t.width=a,t.height=r;const e=t.getContext("2d"),n=new ImageData(l,a,r);e.putImageData(n,0,0)}return n!==e&&n.dispose(),l}const ui=Is({fromPixels_:si});function ci(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==t.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(0===ie(e.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const a=t.shape,s=a[a.length-1];let o=1;for(let e=0;e<a.length-1;++e)o*=a[e];const i=e.shape,l=a.slice();l.pop();let u=1;for(let e=s;e<n;++e)u*=i[e],l.push(i[e]);const c=[..._e(e.shape).map((e=>e/u)),1].slice(0,s);return[l,o,u,c]}function pi(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${a}.`;if(n.rank<a)throw new Error(s+` update.rank < ${a}. `);if(e.length<r+(n.rank-a))throw new Error(s+` Output shape length < ${r+(n.rank-a)}`);if(n.rank!==a+e.length-r)throw new Error(s+" update.rank != "+(a+e.length-r));for(let e=0;e<a;++e)if(n.shape[e]!==t.shape[e])throw new Error(s+` updates.shape[${e}] (${n.shape[e]}) != indices.shape[${e}] (${t.shape[e]}).`);for(let t=0;t<n.rank-a;++t)if(n.shape[t+a]!==e[t+r])throw new Error(s+` updates.shape[${t+a}] (${n.shape[t+a]}) != shape[${t+a}] (${e[t+a]})`)}function di(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(0===n.length){if(0===t.size)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}pi(n,t,e)}function hi(e,t,n){const r=t.shape.length,a=r>1?t.shape[r-1]:1,s=n.length;let o=1;for(let e=a;e<s;++e)o*=n[e];const i=a<1?1:a;return{sliceRank:a,numUpdates:ie(t.shape)/i,sliceSize:o,strides:[..._e(n.slice(0,a)),1],outputSize:ie(n)}}function fi(e,t,n){const r=e.shape.length;re(r===t.length,(()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`)),re(r===n.length,(()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`));for(let a=0;a<r;++a)re(t[a]+n[a]<=e.shape[a],(()=>`Error in slice${r}D: begin[${a}] + size[${a}] (${t[a]+n[a]}) would overflow input.shape[${a}] (${e.shape[a]})`))}function mi(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function gi(e,t,n){const r=[];for(let a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function vi(e,t,n,r){const a=[...e];for(let e=a.length;e<r.length;e++)a.push(1);for(let e=0;e<n;e++)0===e?a[t]=1:(a.splice(t,0,1),a.pop());return a}function bi(e,t,n){return n<=e?n:n-(t-1)}function yi(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function wi(e,t,n,r,a,s,o,i,l){const u=e.length;let c=new Array(u),p=new Array(u),d=new Array(u);if(t.length&&n>0){const l=t[0],u=n+1;c=xi(o,l,u,r,e),p=ki(i,l,u,a,e),d=vi(s,l,u,e)}else for(let t=0;t<u;t++)c[t]=Si(o,r,s,e,t,l),p[t]=Ei(i,a,s,e,t,l),d[t]=Ci(s,t,l);return{begin:c,end:p,strides:d}}function xi(e,t,n,r,a){const s=[...a],o=yi(n,t);for(let a=0;a<s.length;a++)if(o.indexOf(a)>-1)s[a]=0;else{const o=bi(t,n,a);let i=r[o];e&1<<o&&(i=0),s[a]=i}return s}function ki(e,t,n,r,a){const s=[...a],o=yi(n,t);for(let a=0;a<s.length;a++)if(o.indexOf(a)>-1)s[a]=Number.MAX_SAFE_INTEGER;else{const o=bi(t,n,a);let i=r[o];e&1<<o&&(i=Number.MAX_SAFE_INTEGER),s[a]=i}for(let e=0;e<s.length;e++){const t=a[e];s[e]<0&&(s[e]+=t),s[e]=J(0,s[e],a[e])}return s}function Ci(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function Si(e,t,n,r,a,s){let o=t[a];const i=n[a]||1;(e&1<<a||s&1<<a||null==o)&&(o=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const l=r[a];return o<0&&(o+=l),o=J(0,o,l-1),o}function Ei(e,t,n,r,a,s){let o=t[a];const i=n[a]||1;(e&1<<a||s&1<<a||null==o)&&(o=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const l=r[a];return o<0&&(o+=l),o=i>0?J(0,o,l):J(-1,o,l-1),o}function Ti(e,t,n){let r=n.length;for(let e=0;e<n.length;e++)if(n[e]>1){r=e;break}for(let a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function $i(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Ii(e,t,n){let r;const a=e.shape.length;let s;return r="number"==typeof t?[t,...new Array(a-1).fill(0)]:t.length<a?t.concat(new Array(a-t.length).fill(0)):t.slice(),r.forEach((e=>{re(-1!==e,(()=>"slice() does not support negative begin indexing."))})),s=null==n?new Array(a).fill(-1):"number"==typeof n?[n,...new Array(a-1).fill(-1)]:n.length<a?n.concat(new Array(a-n.length).fill(-1)):n,s=s.map(((t,n)=>t>=0?t:(re(-1===t,(()=>`Negative size values should be exactly -1 but got ${t} for the slice() size at index ${n}.`)),e.shape[n]-r[n]))),[r,s]}function Ni(e,t,n,r,a,s,o,i,l){let u;if(null==r?(u=new Array(t.length),u.fill(1)):u=r,null!=o&&0!=(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const p={dims:u.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:u.slice(),beginMask:a,endMask:s,ellipsisMask:o,newAxisMask:i,shrinkAxisMask:l};for(let e=0;e<p.dims;e++)c&&0!=(1<<e&i)&&p.numAddAxisAfterEllipsis++,1<<e&o&&(c=!0);c||(p.ellipsisMask|=1<<p.dims,p.dims++);const d={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(p,d);let h=!0,f=!0,m=!0;const g=[],v=[];for(let t=0;t<e.length;++t){if(0===d.strides[t])throw Error(`strides[${t}] must be non-zero`);const n=!!(d.shrinkAxisMask&1<<t),r=e[t];if(-1===r){g.push(n?1:-1);continue}const a=[d.beginMask&1<<t,d.endMask&1<<t],s=[d.strides[t]>0?0:-1,d.strides[t]>0?r:r-1];if(n&&d.strides[t]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===d.strides[t];const o=!!(d.beginMask&1<<t&&d.endMask&1<<t);if(d.beginValid&&d.endValid){if(n){const e=d.begin[t]<0?r+d.begin[t]:d.begin[t];if(d.begin[t]=e,d.end[t]=d.begin[t]+1,e<0||e>=r)throw Error(`slice index ${d.begin[t]} of dimension ${t} out of bounds.`)}else d.begin[t]=Oi(d.begin[t],0,d.strides[t],r,a,s),d.end[t]=Oi(d.end[t],1,d.strides[t],r,a,s);const e=1===d.strides[t]&&0===d.begin[t]&&d.end[t]===r;h=h&&e,f=f&&(0===t&&1===d.strides[t]||e)}else h=h&&1===d.strides[t]&&o,f=f&&(0===t&&1===d.strides[t]||o);let i,l=!1;if(d.beginValid&&d.endValid?(i=d.end[t]-d.begin[t],l=!0):n?(i=1,l=!0):o&&r>=0&&(i=d.strides[t]<0?-r:r,l=!0),l){let e;e=0===i||i<0!=d.strides[t]<0?0:Math.trunc(i/d.strides[t])+(i%d.strides[t]!=0?1:0),g.push(e)}else g.push(-1)}for(let e=0;e<d.finalShapeGatherIndices.length;++e){const t=d.finalShapeGatherIndices[e];t>=0?v.push(g[t]):-2===t&&v.push(1)}return{finalShapeSparse:v.filter(((e,t)=>-2!==d.finalShapeGatherIndices[t])),finalShape:v,isIdentity:h,sliceDim0:f,isSimpleSlice:m,begin:d.begin,end:d.end,strides:d.strides}}function Oi(e,t,n,r,a,s){if(a[t])return n>0?s[t]:s[t+1&1];{const t=e<0?r+e:e;return t<s[0]?s[0]:t>s[1]?s[1]:t}}class Ai{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class Mi{constructor(){this.classNameMap={}}static getMap(){return null==Mi.instance&&(Mi.instance=new Mi),Mi.instance}static register(e){Mi.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function _i(e){re(null!=e.className,(()=>"Class being registered does not have the static className property defined.")),re("string"==typeof e.className,(()=>"className is required to be a string, but got type "+typeof e.className)),re(e.className.length>0,(()=>"Class being registered has an empty-string as its className, which is disallowed.")),Mi.register(e)}const Ri=.1;function Pi(e,t,n){return null==n&&(n=Di()),Li(e,t,((e,t)=>Vi(e,t,n)))}function Di(){return 32===ms.backend.floatPrecision()?.001:Ri}function Li(e,t,n){let r=!0;if((Se(e)||Se(t))&&(r=!1),Se(e)&&Se(t)&&(r=!0),r){const n=e.constructor.name,r=t.constructor.name;if(n!==r)throw new Error(`Arrays are of different type. Actual: ${n}. Expected: ${r}`)}if(Array.isArray(e)&&Array.isArray(t)){const n=ks(e),r=ks(t);if(!ue(n,r))throw new Error(`Arrays have different shapes. Actual: [${n}]. Expected: [${r}]`)}const a=Se(e)?e:oe(e),s=Se(t)?t:oe(t);if(a.length!==s.length)throw new Error(`Arrays have different lengths actual: ${a.length} vs expected: ${s.length}.\nActual:   ${a}.\nExpected: ${s}.`);for(let e=0;e<s.length;++e){const t=a[e],r=s[e];if(!n(t,r))throw new Error(`Arrays differ: actual[${e}] = ${t}, expected[${e}] = ${r}.\nActual:   ${a}.\nExpected: ${s}.`)}}function Bi(e,t){e().then((()=>t.fail()),(()=>t()))}function Fi(e,t){const n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return $e(e)||$e(e[0])||$e(t)||$e(t[0])?Li(e,n,((e,t)=>e==t)):Li(e,t,((e,t)=>Vi(e,t,0)))}function zi(e,t,n){if(null==n&&(n=Di()),!Vi(e,t,n))throw new Error(`Numbers differ: actual === ${e}, expected === ${t}`)}function Vi(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function Wi(e,t,n){for(let r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error(`Value out of range:${e[r]} low: ${t}, high: ${n}`)}function Hi(e,t){const n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let e=0;e<r.length;e++)if(n[e]!==r[e])throw new Error(`Expected ArrayBuffer value at ${e} to be ${r[e]} but got ${n[e]} instead`)}function ji(e){for(let t=0;t<e.length;t++){const n=e[t];Array.isArray(n)?ji(n):e[t]=Pa(n)}return e}const Ui="3.15.0";function Gi(){Ge().set("PROD",!0)}function qi(){Ge().set("DEBUG",!0)}function Xi(){Ge().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Ki(e){Ge().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Yi(){ms.disposeVariables()}function Ji(){return ms}function Zi(){return ms.memory()}function Qi(e){return ms.profile(e)}function el(e,t){return ms.tidy(e,t)}function tl(e){us(e).forEach((e=>e.dispose()))}function nl(e){return ms.keep(e)}function rl(e){return ms.time(e)}function al(e){return ms.setBackend(e)}function sl(){return ms.ready()}function ol(){return ms.backendName}function il(e){ms.removeBackend(e)}function ll(e){return ms.findBackend(e)}function ul(e){return ms.findBackendFactory(e)}function cl(e,t,n=1){return ms.registerBackend(e,t,n)}function pl(){return ms.backend}function dl(e,t){Ge().setPlatform(e,t)}Xa=Ki;const hl=Is({add_:function(e,t){let n=Es(e,"a","add"),r=Es(t,"b","add");[n,r]=os(n,r);const a={a:n,b:r};return ms.runKernel(et,a)}});const fl=Is({floorDiv_:function(e,t){let n=Es(e,"a","floorDiv"),r=Es(t,"b","floorDiv");[n,r]=os(n,r);const a={a:n,b:r};return ms.runKernel(sn,a)}});const ml=Is({div_:function(e,t){let n=Es(e,"a","div"),r=Es(t,"b","div");if([n,r]=os(n,r),"int32"===n.dtype&&"int32"===r.dtype)return fl(n,r);const a={a:n,b:r};return ms.runKernel(Gt,a,{})}});const gl=Is({mul_:function(e,t){let n=Es(e,"a","mul"),r=Es(t,"b","mul");[n,r]=os(n,r);const a={a:n,b:r};return ms.runKernel(Hn,a)}});const vl=Is({sqrt_:function(e){const t={x:Es(e,"x","sqrt","float32")};return ms.runKernel(Er,t)}});const bl=Is({square_:function(e){const t=Es(e,"x","square");return ms.runKernel("Square",{x:t},{})}});const yl=Is({zerosLike_:function(e){const t={x:Es(e,"x","zerosLike")};return ms.runKernel(Jr,t)}});function wl(e){return re(Ae(e),(()=>"The f passed in grad(f) must be a function")),(t,n)=>{const r=Es(t,"x","tf.grad","string_or_numeric"),a=null!=n?Es(n,"dy","tf.grad"):null;return ms.tidy((()=>{const{value:t,grads:n}=ms.gradients((()=>e(r)),[r],a);return null!=a&&ae(t.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Tl(n),n[0]}))}}function xl(e){return re(Ae(e),(()=>"The f passed in grads(f) must be a function")),(t,n)=>{re(Array.isArray(t),(()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"));const r=Ts(t,"args","tf.grads","string_or_numeric"),a=null!=n?Es(n,"dy","tf.grads"):null;return ms.tidy((()=>{const{value:t,grads:n}=ms.gradients((()=>e(...r)),r,a);return null!=a&&ae(t.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Tl(n),n}))}}function kl(e){return re(Ae(e),(()=>"The f passed in valueAndGrad(f) must be a function")),(t,n)=>{re(t instanceof Ka,(()=>"The x passed in valueAndGrad(f)(x) must be a tensor")),re(null==n||n instanceof Ka,(()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"));const{grads:r,value:a}=ms.gradients((()=>e(t)),[t],n);return Tl(r),{grad:r[0],value:a}}}function Cl(e){return re(Ae(e),(()=>"The f passed in valueAndGrads(f) must be a function")),(t,n)=>{re(Array.isArray(t)&&t.every((e=>e instanceof Ka)),(()=>"The args passed in valueAndGrads(f)(args) must be array of tensors")),re(null==n||n instanceof Ka,(()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"));const r=ms.gradients((()=>e(...t)),t,n);return null!=n&&ae(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Tl(r.grads),r}}function Sl(e,t){re(Ae(e),(()=>"The f passed in variableGrads(f) must be a function")),re(null==t||Array.isArray(t)&&t.every((e=>e instanceof Ja)),(()=>"The varList passed in variableGrads(f, varList) must be an array of variables"));const n=null!=t;if(!n){t=[];for(const e in ms.registeredVariables)t.push(ms.registeredVariables[e])}const r=n?t.filter((e=>!e.trainable)):null,a=t.length;t=t.filter((e=>e.trainable)),re(t.length>0,(()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${a} variables is trainable.`));const{value:s,grads:o}=ms.gradients(e,t,null,!0);re(o.some((e=>null!=e)),(()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize().")),re(0===s.rank,(()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`));const i={};return t.forEach(((e,t)=>{null!=o[t]&&(i[e.name]=o[t])})),null!=r&&r.forEach((e=>i[e.name]=null)),{value:s,grads:i}}function El(e){return ms.customGrad(e)}function Tl(e){if(e.filter((e=>null==e)).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}function $l(e,t){if((Se(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Se(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Os(e,[],[],t)}class Il extends Ai{minimize(e,t=!1,n){const{value:r,grads:a}=this.computeGradients(e,n);if(null!=n){const e=n.map((e=>({name:e.name,tensor:a[e.name]})));this.applyGradients(e)}else this.applyGradients(a);return tl(a),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return Sl(e,t)}dispose(){null!=this.iterations_&&tl(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:$l(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Il,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});class Nl extends Il{constructor(e,t,n=null){super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=ms.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=ms.registeredVariables[t];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:`${t}/accum_grad`,variable:el((()=>yl(r).variable(false)))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:`${t}/accum_var`,variable:el((()=>yl(r).variable(false)))});const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const s=this.accumulatedGrads[n].variable,o=this.accumulatedUpdates[n].variable;el((()=>{const e=hl(gl(s,this.rho),gl(bl(a),1-this.rho)),t=gl(ml(vl(hl(o,this.epsilon)),vl(hl(s,this.epsilon))),a),n=hl(gl(o,this.rho),gl(bl(t),1-this.rho));s.assign(e),o.assign(n);const i=hl(gl(t,-this.learningRate),r);r.assign(i)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(tl(this.accumulatedGrads.map((e=>e.variable))),tl(this.accumulatedUpdates.map((e=>e.variable))))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2;this.accumulatedGrads=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)}))),this.accumulatedUpdates=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}function Ol(e,t,n){const r={shape:e,value:t,dtype:n};return ms.runKernel(nn,{},r)}Nl.className="Adadelta",_i(Nl);class Al extends Il{constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=ms.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:`${t}/accumulator`,variable:el((()=>Ol(r.shape,this.initialAccumulatorValue).variable(e)))}}const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const s=this.accumulatedGrads[n].variable;el((()=>{const e=hl(s,bl(a));s.assign(e);const t=hl(gl(ml(a,vl(hl(e,ms.backend.epsilon()))),-this.learningRate),r);r.assign(t)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&tl(this.accumulatedGrads.map((e=>e.variable)))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulatedGrads=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}Al.className="Adagrad",_i(Al);const Ml=Is({pow_:function(e,t){let n=Es(e,"base","pow"),r=Es(t,"exp","pow");[n,r]=os(n,r);const a={a:n,b:r};return ms.runKernel(er,a)}});const _l=Is({sub_:function(e,t){let n=Es(e,"a","sub"),r=Es(t,"b","sub");[n,r]=os(n,r);const a={a:n,b:r};return ms.runKernel(Vr,a)}});class Rl extends Il{constructor(e,t,n,r=null){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],el((()=>{this.accBeta1=$l(t).variable(),this.accBeta2=$l(n).variable()})),null==r&&(this.epsilon=ms.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);el((()=>{const n=_l(1,this.accBeta1),r=_l(1,this.accBeta2);t.forEach(((t,a)=>{const s=ms.registeredVariables[t];null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:`${t}/m`,variable:el((()=>yl(s).variable(false)))}),null==this.accumulatedSecondMoment[a]&&(this.accumulatedSecondMoment[a]={originalName:`${t}/v`,variable:el((()=>yl(s).variable(false)))});const o=Array.isArray(e)?e[a].tensor:e[t];if(null==o)return;const i=this.accumulatedFirstMoment[a].variable,l=this.accumulatedSecondMoment[a].variable,u=hl(gl(i,this.beta1),gl(o,1-this.beta1)),c=hl(gl(l,this.beta2),gl(bl(o),1-this.beta2)),p=ml(u,n),d=ml(c,r);i.assign(u),l.assign(c);const h=hl(gl(ml(p,hl(vl(d),this.epsilon)),-this.learningRate),s);s.assign(h)})),this.accBeta1.assign(gl(this.accBeta1,this.beta1)),this.accBeta2.assign(gl(this.accBeta2,this.beta2))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&tl(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedSecondMoment&&tl(this.accumulatedSecondMoment.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e),el((()=>{this.accBeta1.assign(Ml(this.beta1,this.iterations_+1)),this.accBeta2.assign(Ml(this.beta2,this.iterations_+1))}));const t=e.length/2;this.accumulatedFirstMoment=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)}))),this.accumulatedSecondMoment=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}Rl.className="Adam",_i(Rl);const Pl=Is({abs_:function(e){const t=Es(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return ms.runKernel(St,e)}{const e={x:t};return ms.runKernel(Je,e)}}});const Dl=Is({maximum_:function(e,t){let n=Es(e,"a","maximum"),r=Es(t,"b","maximum");[n,r]=os(n,r),"bool"===n.dtype&&(n=Oo(n,"int32"),r=Oo(r,"int32")),ni(n.shape,r.shape);const a={a:n,b:r};return ms.runKernel(An,a)}});class Ll extends Il{constructor(e,t,n,r=null,a=0){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],el((()=>{this.iteration=$l(0).variable(),this.accBeta1=$l(t).variable()})),null==r&&(this.epsilon=ms.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);el((()=>{const n=_l(1,this.accBeta1),r=ml(-this.learningRate,hl(gl(this.iteration,this.decay),1));t.forEach(((t,a)=>{const s=ms.registeredVariables[t];null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:`${t}/m`,variable:yl(s).variable(false)}),null==this.accumulatedWeightedInfNorm[a]&&(this.accumulatedWeightedInfNorm[a]={originalName:`${t}/v`,variable:yl(s).variable(false)});const o=Array.isArray(e)?e[a].tensor:e[t];if(null==o)return;const i=this.accumulatedFirstMoment[a].variable,l=this.accumulatedWeightedInfNorm[a].variable,u=hl(gl(i,this.beta1),gl(o,1-this.beta1)),c=gl(l,this.beta2),p=Pl(o),d=Dl(c,p);i.assign(u),l.assign(d);const h=hl(gl(ml(r,n),ml(u,hl(d,this.epsilon))),s);s.assign(h)})),this.iteration.assign(hl(this.iteration,1)),this.accBeta1.assign(gl(this.accBeta1,this.beta1))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&tl(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedWeightedInfNorm&&tl(this.accumulatedWeightedInfNorm.map((e=>e.variable)))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}Ll.className="Adamax",_i(Ll);class Bl extends Il{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const a=ms.registeredVariables[t];el((()=>{const e=hl(gl(this.c,r),a);a.assign(e)}))})),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=nl($l(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}Bl.className="SGD",_i(Bl);class Fl extends Bl{constructor(e,t,n=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=$l(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=ms.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:`${t}/momentum`,variable:el((()=>yl(r).variable(e)))}}const a=this.accumulations[n].variable,s=Array.isArray(e)?e[n].tensor:e[t];null!=s&&el((()=>{let e;const t=hl(gl(this.m,a),s);e=this.useNesterov?hl(gl(this.c,hl(s,gl(t,this.m))),r):hl(gl(this.c,t),r),a.assign(t),r.assign(e)}))})),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&tl(this.accumulations.map((e=>e.variable)))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}Fl.className="Momentum",_i(Fl);class zl extends Il{constructor(e,t=.9,n=0,r=null,a=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,null==r&&(this.epsilon=ms.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=ms.registeredVariables[t],a=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:`${t}/rms`,variable:el((()=>yl(r).variable(a)))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:`${t}/momentum`,variable:el((()=>yl(r).variable(a)))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:`${t}/mg`,variable:el((()=>yl(r).variable(a)))});const s=Array.isArray(e)?e[n].tensor:e[t];if(null==s)return;const o=this.accumulatedMeanSquares[n].variable,i=this.accumulatedMoments[n].variable;el((()=>{const e=hl(gl(o,this.decay),gl(bl(s),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,a=hl(gl(t,this.decay),gl(s,1-this.decay)),l=ml(gl(s,this.learningRate),vl(_l(e,hl(bl(a),this.epsilon)))),u=hl(gl(i,this.momentum),l);o.assign(e),t.assign(a),i.assign(u);const c=_l(r,u);r.assign(c)}else{const e=hl(gl(o,this.decay),gl(bl(s),1-this.decay)),t=hl(gl(i,this.momentum),ml(gl(s,this.learningRate),vl(hl(e,this.epsilon))));o.assign(e),i.assign(t);const n=_l(r,t);r.assign(n)}}))})),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&tl(this.accumulatedMeanSquares.map((e=>e.variable))),null!=this.accumulatedMeanGrads&&this.centered&&tl(this.accumulatedMeanGrads.map((e=>e.variable))),null!=this.accumulatedMoments&&tl(this.accumulatedMoments.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedMoments=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}zl.className="RMSProp",_i(zl);class Vl{static sgd(e){return new Bl(e)}static momentum(e,t,n=!1){return new Fl(e,t,n)}static rmsprop(e,t=.9,n=0,r=null,a=!1){return new zl(e,t,n,r,a)}static adam(e=.001,t=.9,n=.999,r=null){return new Rl(e,t,n,r)}static adadelta(e=.001,t=.95,n=null){return new Nl(e,t,n)}static adamax(e=.002,t=.9,n=.999,r=null,a=0){return new Ll(e,t,n,r,a)}static adagrad(e,t=.1){return new Al(e,t)}}const Wl=Is({acos_:function(e){const t={x:Es(e,"x","acos")};return ms.runKernel(Ze,t)}});const Hl=Is({acosh_:function(e){const t={x:Es(e,"x","acosh")};return ms.runKernel(Qe,t)}});const jl=Is({addN_:function(e){re(Array.isArray(e),(()=>"The argument passed to tf.addN() must be a list of tensors")),re(e.length>=1,(()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`));const t=e.map(((e,t)=>Es(e,`tensors${t}`,"addN"))),n=t[0];t.forEach((e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((e=>{if(!ue(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));const r=t;return ms.runKernel(tt,r)}});const Ul=Is({all_:function(e,t=null,n=!1){const r={x:Es(e,"x","all","bool")},a={axis:t,keepDims:n};return ms.runKernel(nt,r,a)}});const Gl=Is({any_:function(e,t=null,n=!1){const r={x:Es(e,"x","any","bool")},a={axis:t,keepDims:n};return ms.runKernel(rt,r,a)}});const ql=Is({argMax_:function(e,t=0){const n={x:Es(e,"x","argMax")},r={axis:t};return ms.runKernel(at,n,r)}});const Xl=Is({argMin_:function(e,t=0){const n={x:Es(e,"x","argMin")},r={axis:t};return ms.runKernel(st,n,r)}});const Kl=Is({asin_:function(e){const t={x:Es(e,"x","asin")};return ms.runKernel(ot,t)}});const Yl=Is({asinh_:function(e){const t={x:Es(e,"x","asinh")};return ms.runKernel(it,t)}});const Jl=Is({atan_:function(e){const t={x:Es(e,"x","atan")};return ms.runKernel(lt,t)}});const Zl=Is({atan2_:function(e,t){let n=Es(e,"a","atan2"),r=Es(t,"b","atan2");[n,r]=os(n,r);const a={a:n,b:r};return ms.runKernel(ct,a)}});const Ql=Is({atanh_:function(e){const t={x:Es(e,"x","atanh")};return ms.runKernel(ut,t)}});function eu(e,t,n,r,a="NHWC",s){return ru(e,[...t,e[3]],n,s,r,null,null,du(a))}function tu(e,t,n,r,a,s,o="channelsLast"){const[i,l]=ou(t);let u;if("channelsLast"===o)u=[i,l,e[3],e[3]];else{if("channelsFirst"!==o)throw new Error(`Unknown dataFormat ${o}`);u=[i,l,e[1],e[1]]}return ru(e,u,n,r,a,s,!1,o)}function nu(e,t,n,r,a,s,o="NDHWC"){const[i,l,u]=iu(t);let c,p;if("NDHWC"===o)p="channelsLast",c=[i,l,u,e[4],e[4]];else{if("NCDHW"!==o)throw new Error(`Unknown dataFormat ${o}`);p="channelsFirst",c=[i,l,u,e[1],e[1]]}return au(e,c,n,r,a,!1,p,s)}function ru(e,t,n,r,a,s,o=!1,i="channelsLast"){let[l,u,c,p]=[-1,-1,-1,-1];if("channelsLast"===i)[l,u,c,p]=e;else{if("channelsFirst"!==i)throw new Error(`Unknown dataFormat ${i}`);[l,p,u,c]=e}const[d,h,,f]=t,[m,g]=ou(n),[v,b]=ou(r),y=lu(d,v),w=lu(h,b),{padInfo:x,outHeight:k,outWidth:C}=function(e,t,n,r,a,s,o,i,l){let u,c,p;if("number"==typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const a=function(e,t,n,r,a){null==r&&(r=su(e,t,n));const s=e[0],o=e[1],i=uu((s-t+2*r)/n+1,a),l=uu((o-t+2*r)/n+1,a);return[i,l]}([t,n],s,r,e,i);c=a[0],p=a[1]}else if("same"===e){c=Math.ceil(t/r),p=Math.ceil(n/a);const e=Math.max(0,(c-1)*r+s-t),i=Math.max(0,(p-1)*a+o-n),l=Math.floor(e/2),d=e-l,h=Math.floor(i/2);u={top:l,bottom:d,left:h,right:i-h,type:"SAME"}}else if("valid"===e)u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-s+1)/r),p=Math.ceil((n-o+1)/a);else{if("object"!=typeof e)throw Error(`Unknown padding parameter: ${e}`);{const d="channelsLast"===l?e[1][0]:e[2][0],h="channelsLast"===l?e[1][1]:e[2][1],f="channelsLast"===l?e[2][0]:e[3][0],m="channelsLast"===l?e[2][1]:e[3][1];u={top:d,bottom:h,left:f,right:m,type:0===d&&0===h&&0===f&&0===m?"VALID":"EXPLICIT"},c=uu((t-s+d+h)/r+1,i),p=uu((n-o+f+m)/a+1,i)}}return{padInfo:u,outHeight:c,outWidth:p}}(a,u,c,m,g,y,w,s,i),S=o?f*p:f;let E;return"channelsFirst"===i?E=[l,S,k,C]:"channelsLast"===i&&(E=[l,k,C,S]),{batchSize:l,dataFormat:i,inHeight:u,inWidth:c,inChannels:p,outHeight:k,outWidth:C,outChannels:S,padInfo:x,strideHeight:m,strideWidth:g,filterHeight:d,filterWidth:h,effectiveFilterHeight:y,effectiveFilterWidth:w,dilationHeight:v,dilationWidth:b,inShape:e,outShape:E,filterShape:t}}function au(e,t,n,r,a,s=!1,o="channelsLast",i){let[l,u,c,p,d]=[-1,-1,-1,-1,-1];if("channelsLast"===o)[l,u,c,p,d]=e;else{if("channelsFirst"!==o)throw new Error(`Unknown dataFormat ${o}`);[l,d,u,c,p]=e}const[h,f,m,,g]=t,[v,b,y]=iu(n),[w,x,k]=iu(r),C=lu(h,w),S=lu(f,x),E=lu(m,k),{padInfo:T,outDepth:$,outHeight:I,outWidth:N}=function(e,t,n,r,a,s,o,i,l,u,c){let p,d,h,f;if("number"==typeof e){p={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const s=function(e,t,n,r,a,s){null==a&&(a=su(e,t,r));const o=e[0],i=e[1],l=e[2],u=uu((o-t+2*a)/r+1,s),c=uu((i-t+2*a)/r+1,s),p=uu((l-t+2*a)/r+1,s);return[u,c,p,n]}([t,n,r,1],i,1,a,e,c);d=s[0],h=s[1],f=s[2]}else if("same"===e){d=Math.ceil(t/a),h=Math.ceil(n/s),f=Math.ceil(r/o);const e=(d-1)*a+i-t,c=(h-1)*s+l-n,m=(f-1)*o+u-r,g=Math.floor(e/2),v=e-g,b=Math.floor(c/2),y=c-b,w=Math.floor(m/2);p={top:b,bottom:y,left:w,right:m-w,front:g,back:v,type:"SAME"}}else{if("valid"!==e)throw Error(`Unknown padding parameter: ${e}`);p={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((t-i+1)/a),h=Math.ceil((n-l+1)/s),f=Math.ceil((r-u+1)/o)}return{padInfo:p,outDepth:d,outHeight:h,outWidth:f}}(a,u,c,p,v,b,y,C,S,E,i),O=s?g*d:g;let A;return"channelsFirst"===o?A=[l,O,$,I,N]:"channelsLast"===o&&(A=[l,$,I,N,O]),{batchSize:l,dataFormat:o,inDepth:u,inHeight:c,inWidth:p,inChannels:d,outDepth:$,outHeight:I,outWidth:N,outChannels:O,padInfo:T,strideDepth:v,strideHeight:b,strideWidth:y,filterDepth:h,filterHeight:f,filterWidth:m,effectiveFilterDepth:C,effectiveFilterHeight:S,effectiveFilterWidth:E,dilationDepth:w,dilationHeight:x,dilationWidth:k,inShape:e,outShape:A,filterShape:t}}function su(e,t,n,r=1){const a=lu(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function ou(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function iu(e){return"number"==typeof e?[e,e,e]:e}function lu(e,t){return t<=1?e:e+(e-1)*(t-1)}function uu(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function cu(e){const[t,n,r]=ou(e);return 1===t&&1===n&&1===r}function pu(e,t){return cu(e)||cu(t)}function du(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function hu(e,t,n){if(null!=n){if("string"==typeof t)throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if("number"==typeof t)re(ce(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`));else{if("object"!=typeof t)throw Error(`Error in ${e}: Unknown padding parameter: ${t}`);t.forEach((t=>{t.forEach((t=>{re(ce(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`))}))}))}}}const fu=Is({reshape_:function(e,t){const n={x:Es(e,"x","reshape","string_or_numeric")},r={shape:t};return ms.runKernel(ir,n,r)}});const mu=Is({avgPool_:function(e,t,n,r,a){const s=Es(e,"x","avgPool","float32");re(pu(n,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`));let o=s,i=!1;3===s.rank&&(i=!0,o=fu(s,[1,s.shape[0],s.shape[1],s.shape[2]])),re(4===o.rank,(()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`)),hu("avgPool",r,a);const l={x:o},u={filterSize:t,strides:n,pad:r,dimRoundingMode:a};let c=ms.runKernel(pt,l,u);return c=Oo(c,s.dtype),i?fu(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const gu=Is({avgPool3d_:function(e,t,n,r,a,s="NDHWC"){const o=Es(e,"x","avgPool3d","float32");let i=o,l=!1;4===o.rank&&(l=!0,i=fu(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),re(5===i.rank,(()=>`Error in avgPool3d: x must be rank 5 but got rank ${i.rank}.`)),re("NDHWC"===s,(()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`)),hu("avgPool3d",r,a);const u={x:i},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:s};let p=ms.runKernel(ht,u,c);return p=Oo(p,i.dtype),l?fu(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}});const vu=Is({concat_:function(e,t=0){re(e.length>=1,(()=>"Pass at least one tensor to concat"));const n=Ts(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)})),1===n.length)return Ao(n[0]);const r=n,a={axis:t};return ms.runKernel(Et,r,a)}});const bu=Is({sigmoid_:function(e){const t={x:Es(e,"x","sigmoid","float32")};return ms.runKernel(Cr,t)}});const yu=Is({slice_:function(e,t,n){const r=Es(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");const a={x:r},s={begin:t,size:n};return ms.runKernel(yr,a,s)}});const wu=Is({tanh_:function(e){const t={x:Es(e,"x","tanh","float32")};return ms.runKernel(Hr,t)}});const xu=Is({basicLSTMCell_:function(e,t,n,r,a,s){const o=Es(e,"forgetBias","basicLSTMCell"),i=Es(t,"lstmKernel","basicLSTMCell"),l=Es(n,"lstmBias","basicLSTMCell"),u=Es(r,"data","basicLSTMCell"),c=Es(a,"c","basicLSTMCell"),p=Es(s,"h","basicLSTMCell"),d=vu([u,p],1),h=Yo(d,i),f=hl(h,l),m=f.shape[0],g=f.shape[1]/4,v=[m,g],b=yu(f,[0,0],v),y=yu(f,[0,g],v),w=yu(f,[0,2*g],v),x=yu(f,[0,3*g],v),k=hl(gl(bu(b),wu(y)),gl(c,bu(hl(o,w))));return[k,gl(wu(k),bu(x))]}});const ku=Is({batchToSpaceND_:function(e,t,n){const r=Es(e,"x","batchToSpaceND"),a=t.reduce(((e,t)=>e*t));re(r.rank>=1+t.length,(()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`)),re(n.length===t.length,(()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`)),re(r.shape[0]%a==0,(()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${a}`));const s={x:r},o={blockShape:t,crops:n};return ms.runKernel(gt,s,o)}});const Cu=Is({batchNorm_:function(e,t,n,r,a,s){null==s&&(s=.001);const o=Es(e,"x","batchNorm"),i=Es(t,"mean","batchNorm"),l=Es(n,"variance","batchNorm");let u,c;null!=a&&(u=Es(a,"scale","batchNorm")),null!=r&&(c=Es(r,"offset","batchNorm")),re(i.rank===l.rank,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),re(null==c||i.rank===c.rank,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),re(null==u||i.rank===u.rank,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));const p=function(e){let t;return t=0===e.rank||1===e.rank?fu(e,[1,1,1,e.size]):2===e.rank?fu(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?fu(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(o),d={x:p,scale:u,offset:c,mean:i,variance:l},h={varianceEpsilon:s},f=ms.runKernel(on,d,h);return fu(f,o.shape)}});const Su=Is({batchNorm2d_:function(e,t,n,r,a,s){const o=Es(e,"x","batchNorm"),i=Es(t,"mean","batchNorm"),l=Es(n,"variance","batchNorm");let u,c;return null!=a&&(u=Es(a,"scale","batchNorm")),null!=r&&(c=Es(r,"offset","batchNorm")),re(2===o.rank,(()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`)),re(2===i.rank||1===i.rank,(()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${i.rank}.`)),re(2===l.rank||1===l.rank,(()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`)),null!=u&&re(2===u.rank||1===u.rank,(()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`)),null!=c&&re(2===c.rank||1===c.rank,(()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`)),Cu(o,i,l,c,u,s)}});const Eu=Is({batchNorm3d_:function(e,t,n,r,a,s){const o=Es(e,"x","batchNorm"),i=Es(t,"mean","batchNorm"),l=Es(n,"variance","batchNorm");let u,c;return null!=a&&(u=Es(a,"scale","batchNorm")),null!=r&&(c=Es(r,"offset","batchNorm")),re(3===o.rank,(()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`)),re(3===i.rank||1===i.rank,(()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${i.rank}.`)),re(3===l.rank||1===l.rank,(()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`)),null!=u&&re(3===u.rank||1===u.rank,(()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`)),null!=c&&re(3===c.rank||1===c.rank,(()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`)),Cu(o,i,l,c,u,s)}});const Tu=Is({batchNorm4d_:function(e,t,n,r,a,s){const o=Es(e,"x","batchNorm"),i=Es(t,"mean","batchNorm"),l=Es(n,"variance","batchNorm");let u,c;return null!=a&&(u=Es(a,"scale","batchNorm")),null!=r&&(c=Es(r,"offset","batchNorm")),re(4===o.rank,(()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`)),re(4===i.rank||1===i.rank,(()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${i.rank}.`)),re(4===l.rank||1===l.rank,(()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`)),null!=u&&re(4===u.rank||1===u.rank,(()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`)),null!=c&&re(4===c.rank||1===c.rank,(()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`)),Cu(o,i,l,c,u,s)}});const $u=Is({bincount_:function(e,t,n){const r=Es(e,"x","bincount"),a=Es(t,"weights","bincount");re("int32"===r.dtype,(()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`)),re(n>=0,(()=>`size must be non-negative, but got ${n}.`)),re(a.size===r.size||0===a.size,(()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${a.shape}.`));const s={x:r,weights:a},o={size:n};return ms.runKernel(vt,s,o)}});const Iu=Is({broadcastArgs_:function(e,t){const n=Es(e,"s0","broadcastArgs","int32"),r=Es(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(1!==r.rank)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const a={s0:n,s1:r};return ms.runKernel(yt,a)}});const Nu=Is({broadcastTo_:function(e,t){let n=Es(e,"broadcastTo","x");const r=n.shape;if(t.some((e=>!(e>0)||e%1!=0)))throw new Error(`broadcastTo(): Invalid broadcast shape [${t}].`);if(t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=fu(n,e)}const a=n.shape,s=Array.from(t);for(let e=t.length-1;e>=0;e--)if(a[e]===t[e])s[e]=1;else if(1!==n.shape[e])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);if(0===s.map(((e,t)=>e>1?t:-1)).filter((e=>e>=0)).length)return Ao(n);const o={x:n},i={reps:s};return ms.runKernel(jr,o,i)}});const Ou=Is({ceil_:function(e){const t={x:Es(e,"x","ceil","float32")};return ms.runKernel(xt,t)}});const Au=Is({clipByValue_:function(e,t,n){const r=Es(e,"x","clipByValue");re(t<=n,(()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`));const a={x:r},s={clipValueMin:t,clipValueMax:n};return ms.runKernel(kt,a,s)}});const Mu=Is({concat1d_:function(e){return vu(e,0)}});const _u=Is({concat2d_:function(e,t){return vu(e,t)}});const Ru=Is({concat3d_:function(e,t){return vu(e,t)}});const Pu=Is({concat4d_:function(e,t){return vu(e,t)}});const Du=Is({conv2d_:function(e,t,n,r,a="NHWC",s=[1,1],o){const i=Es(e,"x","conv2d","float32"),l=Es(t,"filter","conv2d","float32");let u=i,c=!1;3===i.rank&&(c=!0,u=fu(i,[1,i.shape[0],i.shape[1],i.shape[2]])),re(4===u.rank,(()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`)),re(4===l.rank,(()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`)),hu("conv2d",r,o);const p="NHWC"===a?u.shape[3]:u.shape[1];re(p===l.shape[2],(()=>`Error in conv2d: depth of input (${p}) must match input depth for filter ${l.shape[2]}.`)),re(pu(n,s),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`));const d={x:u,filter:l},h={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:o},f=ms.runKernel(Tt,d,h);return c?fu(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const Lu=Is({conv1d_:function(e,t,n,r,a="NWC",s=1,o){const i=Es(e,"x","conv1d"),l=Es(t,"filter","conv1d");let u=i,c=!1;2===i.rank&&(c=!0,u=fu(i,[1,i.shape[0],i.shape[1]])),re(3===u.rank,(()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`)),re(3===l.rank,(()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`)),hu("conv1d",r,o),re(u.shape[2]===l.shape[1],(()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`)),re(pu(n,s),(()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`)),re("NWC"===a,(()=>`Error in conv1d: got dataFormat of ${a} but only NWC is currently supported.`));const p=fu(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=fu(u,[u.shape[0],1,u.shape[1],u.shape[2]]),h=Du(d,p,[1,n],r,"NHWC",[1,s],o);return fu(h,c?[h.shape[2],h.shape[3]]:[h.shape[0],h.shape[2],h.shape[3]])}});const Bu=Is({conv2DBackpropInput_:function(e,t,n,r,a,s="NHWC",o){re(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let i=e,l=t,u=!1;3===t.rank&&(u=!0,l=fu(t,[1,t.shape[0],t.shape[1],t.shape[2]]),i=[1,e[0],e[1],e[2]]),re(4===i.length,(()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${i.length}.`)),re(4===l.rank,(()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`)),re(4===n.rank,(()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`));const c="NHWC"===s?i[3]:i[1],p="NHWC"===s?l.shape[3]:l.shape[1];re(c===n.shape[2],(()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`)),re(p===n.shape[3],(()=>`Error in conv2dDerInput: depth of output (${p}) must match output depth for filter ${n.shape[3]}.`)),hu("conv2dDerInput",a,o);const d={dy:l,filter:n},h={strides:r,pad:a,dataFormat:s,dimRoundingMode:o,inputShape:i},f=ms.runKernel(It,d,h);return u?fu(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const Fu=Is({conv2dTranspose_:function(e,t,n,r,a,s){const o=Es(e,"x","conv2dTranspose"),i=Es(t,"filter","conv2dTranspose");return Bu(n,o,i,r,a,"NHWC",s)}});const zu=Is({conv3d_:function(e,t,n,r,a="NDHWC",s=[1,1,1]){const o=Es(e,"x","conv3d"),i=Es(t,"filter","conv3d");let l=o,u=!1;4===o.rank&&(u=!0,l=fu(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),re(5===l.rank,(()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`)),re(5===i.rank,(()=>`Error in conv3d: filter must be rank 5, but got rank ${i.rank}.`)),re(l.shape[4]===i.shape[3],(()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${i.shape[3]}.`)),re(pu(n,s),(()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`)),re("NDHWC"===a,(()=>`Error in conv3d: got dataFormat of ${a} but only NDHWC is currently supported.`));const c={x:l,filter:i},p={strides:n,pad:r,dataFormat:a,dilations:s},d=ms.runKernel(Nt,c,p);return u?fu(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const Vu=Is({conv3DBackpropInput_:function(e,t,n,r,a){re(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let s=e,o=t,i=!1;4===t.rank&&(i=!0,o=fu(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),s=[1,e[0],e[1],e[2],e[3]]);const l=s[4],u=o.shape[4];re(5===s.length,(()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`)),re(5===o.rank,(()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`)),re(5===n.rank,(()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`)),re(l===n.shape[3],(()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`)),re(u===n.shape[4],(()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`));const c={dy:o,filter:n},p={pad:a,strides:r,inputShape:s},d=ms.runKernel(At,c,p);return i?fu(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const Wu=Is({conv3dTranspose_:function(e,t,n,r,a){const s=Es(e,"x","conv3dTranspose"),o=Es(t,"filter","conv3dTranspose");return Vu(n,s,o,r,a)}});const Hu=Is({cos_:function(e){const t={x:Es(e,"x","cos","float32")};return ms.runKernel(Mt,t)}});const ju=Is({cosh_:function(e){const t={x:Es(e,"x","cosh","float32")};return ms.runKernel(_t,t)}});const Uu=Is({cumprod_:function(e,t=0,n=!1,r=!1){const a={x:Es(e,"x","cumprod")},s={axis:t,exclusive:n,reverse:r};return ms.runKernel(Rt,a,s)}});const Gu=Is({cumsum_:function(e,t=0,n=!1,r=!1){const a={x:Es(e,"x","cumsum")},s={axis:t,exclusive:n,reverse:r};return ms.runKernel(Pt,a,s)}});const qu=Is({denseBincount_:function(e,t,n,r=!1){const a=Es(e,"x","denseBincount"),s=Es(t,"weights","denseBincount");re("int32"===a.dtype,(()=>`Error in denseBincount: input dtype must be int32, but got ${a.dtype}`)),re(a.rank<=2,(()=>`Error in denseBincount: input must be at most rank 2, but got rank ${a.rank}.`)),re(n>=0,(()=>`size must be non-negative, but got ${n}.`)),re(s.size===a.size||0===s.size,(()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${a.shape}, weights shape: ${s.shape}.`));const o={x:a,weights:s},i={size:n,binaryOutput:r};return ms.runKernel(Lt,o,i)}});const Xu=Is({depthToSpace_:function(e,t,n="NHWC"){const r=Es(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],s="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];re(t>1,(()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`)),re(a*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${a} and ${t}  for depthToSpace with input shape\n    ${r.shape}`)),re(s*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${s} and ${t} for depthToSpace with input shape\n        ${r.shape}`)),re(o%(t*t)==0,(()=>`Dimension size must be evenly divisible by ${t*t} but is ${o} for depthToSpace with input shape ${r.shape}`));const i={x:r},l={blockSize:t,dataFormat:n};return ms.runKernel(Bt,i,l)}});const Ku=Is({depthwiseConv2d_:function(e,t,n,r,a="NHWC",s=[1,1],o){const i=Es(e,"x","depthwiseConv2d","float32"),l=Es(t,"filter","depthwiseConv2d","float32");let u=i,c=!1;3===i.rank&&(c=!0,u=fu(i,[1,i.shape[0],i.shape[1],i.shape[2]])),re(4===u.rank,(()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`)),re(4===l.rank,(()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`)),re(u.shape[3]===l.shape[2],(()=>`Error in depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`)),hu("depthwiseConv2d",r,o);const p={x:u,filter:l},d={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:o},h=ms.runKernel(Ft,p,d);return c?fu(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});const Yu=Is({diag_:function(e){const t={x:Es(e,"x","diag")};return ms.runKernel(Wt,t)}});const Ju=Is({dilation2d_:function(e,t,n,r,a=[1,1],s="NHWC"){const o=Es(e,"x","dilation2d"),i=Es(t,"filter","dilation2d");re(3===o.rank||4===o.rank,(()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`)),re(3===i.rank,(()=>`Error in dilation2d: filter must be rank 3, but got rank ${i.rank}.`)),re("NHWC"===s,(()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`));let l=o,u=!1;3===o.rank&&(l=fu(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=!0);const c={x:l,filter:i},p={strides:n,pad:r,dilations:a},d=ms.runKernel(Ht,c,p);return u?fu(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});const Zu=Is({equal_:function(e,t){let n=Es(e,"a","equal","string_or_numeric"),r=Es(t,"b","equal","string_or_numeric");[n,r]=os(n,r),ni(n.shape,r.shape);const a={a:n,b:r};return ms.runKernel(Jt,a)}});const Qu=Is({where_:function(e,t,n){const r=Es(t,"a","where"),a=Es(n,"b","where"),s=Es(e,"condition","where","bool"),o=ni(ni(s.shape,r.shape),a.shape),i={condition:Nu(s,o),t:Nu(r,o),e:Nu(a,o)};return ms.runKernel(vr,i)}});const ec=Is({divNoNan_:function(e,t){let n=Es(e,"a","div"),r=Es(t,"b","div");[n,r]=os(n,r);const a=ml(n,r),s=yl(a),o=Zu(r,s);return Qu(o,s,a)}});const tc=Is({dot_:function(e,t){const n=Es(e,"t1","dot"),r=Es(t,"t2","dot");re(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`));const a=1===n.rank?n.size:n.shape[1],s=1===r.rank?r.size:r.shape[0];if(re(a===s,(()=>`Error in dot: inner dimensions of inputs must match, but got ${a} and ${s}.`)),1===n.rank&&1===r.rank){const e=fu(n,[1,-1]),t=fu(r,[-1,1]),a=Yo(e,t);return fu(a,[])}if(1===n.rank&&2===r.rank){const e=fu(n,[1,-1]),t=fu(r,[r.shape[0],r.shape[1]]),a=Yo(e,t);return fu(a,[a.size])}if(2===n.rank&&1===r.rank){const e=fu(r,[-1,1]),t=Yo(n,e);return fu(t,[t.size])}{const e=fu(r,[r.shape[0],r.shape[1]]);return Yo(n,e)}}});const nc=Is({einsum_:function(e,...t){const n=t.map(((e,t)=>Es(e,`tensors${t}`,"einsum"))),r={equation:e};return ms.runKernel(qt,n,r)}});const rc=Is({elu_:function(e){const t={x:Es(e,"x","elu","float32")};return ms.runKernel(Xt,t)}});const ac=Is({erf_:function(e){let t=Es(e,"x","erf");re("int32"===t.dtype||"float32"===t.dtype,(()=>"Input dtype must be `int32` or `float32`.")),"int32"===t.dtype&&(t=Oo(t,"float32"));const n={x:t};return ms.runKernel(Yt,n)}});const sc=Is({exp_:function(e){const t={x:Es(e,"x","exp")};return ms.runKernel(Zt,t)}});const oc=Is({expandDims_:function(e,t=0){const n=Es(e,"x","expandDims","string_or_numeric");re(t<=n.rank,(()=>"Axis must be <= rank of the tensor"));const r={input:n},a={dim:t};return ms.runKernel(Qt,r,a)}});const ic=Is({expm1_:function(e){const t={x:Es(e,"x","expm1")};return ms.runKernel(en,t)}});const lc=Is({tile_:function(e,t){const n=Es(e,"x","tile","string_or_numeric");re(n.rank===t.length,(()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`));const r={x:n},a={reps:t};return ms.runKernel(jr,r,a)}});const uc=Is({eye_:function(e,t,n,r="float32"){null==t&&(t=e);const a=No([e,t],r),s=e<=t?e:t;for(let e=0;e<s;++e)a.set(1,e,e);const o=fu(a.toTensor(),[e,t]);if(null==n)return o;if(1===n.length)return lc(oc(o,0),[n[0],1,1]);if(2===n.length)return lc(oc(oc(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return lc(oc(oc(oc(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}});const cc=Is({floor_:function(e){const t={x:Es(e,"x","floor","float32")};return ms.runKernel(an,t)}});const pc=Is({gather_:function(e,t,n=0,r=0){const a={x:Es(e,"x","gather"),indices:Es(t,"indices","gather","int32")},s={axis:n,batchDims:r};return ms.runKernel(ln,a,s)}});const dc=Is({greater_:function(e,t){let n=Es(e,"a","greater","string_or_numeric"),r=Es(t,"b","greater","string_or_numeric");[n,r]=os(n,r),ni(n.shape,r.shape);const a={a:n,b:r};return ms.runKernel(cn,a)}});const hc=Is({greaterEqual_:function(e,t){let n=Es(e,"a","greaterEqual","string_or_numeric"),r=Es(t,"b","greaterEqual","string_or_numeric");[n,r]=os(n,r),ni(n.shape,r.shape);const a={a:n,b:r};return ms.runKernel(pn,a)}});const fc=Is({imag_:function(e){const t={input:Es(e,"input","imag")};return ms.runKernel(fn,t)}});const mc=Is({isFinite_:function(e){const t={x:Es(e,"x","isFinite")};return ms.runKernel(mn,t)}});const gc=Is({isInf_:function(e){const t={x:Es(e,"x","isInf")};return ms.runKernel(gn,t)}});const vc=Is({isNaN_:function(e){const t={x:Es(e,"x","isNaN")};return ms.runKernel(vn,t)}});const bc=Is({leakyRelu_:function(e,t=.2){const n={x:Es(e,"x","leakyRelu")},r={alpha:t};return ms.runKernel(bn,n,r)}});const yc=Is({less_:function(e,t){let n=Es(e,"a","less","string_or_numeric"),r=Es(t,"b","less","string_or_numeric");[n,r]=os(n,r),ni(n.shape,r.shape);const a={a:n,b:r};return ms.runKernel(yn,a)}});const wc=Is({lessEqual_:function(e,t){let n=Es(e,"a","lessEqual","string_or_numeric"),r=Es(t,"b","lessEqual","string_or_numeric");[n,r]=os(n,r),ni(n.shape,r.shape);const a={a:n,b:r};return ms.runKernel(wn,a)}});function xc(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:e,stop:t,num:n};return ms.runKernel(xn,{},r)}const kc=Is({localResponseNormalization_:function(e,t=5,n=1,r=1,a=.5){const s=Es(e,"x","localResponseNormalization");re(4===s.rank||3===s.rank,(()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${s.rank}.`)),re(ce(t),(()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`));let o=s,i=!1;3===s.rank&&(i=!0,o=fu(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l={x:o},u={depthRadius:t,bias:n,alpha:r,beta:a},c=ms.runKernel(In,l,u);return i?fu(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const Cc=Is({log_:function(e){const t={x:Es(e,"x","log","float32")};return ms.runKernel(kn,t)}});const Sc=Is({log1p_:function(e){const t={x:Es(e,"x","log1p")};return ms.runKernel(Cn,t)}});const Ec=Is({neg_:function(e){const t={x:Es(e,"x","neg")};return ms.runKernel(jn,t)}});const Tc=Is({softplus_:function(e){const t={x:Es(e,"x","softplus")};return ms.runKernel(Sr,t)}});const $c=Is({logSigmoid_:function(e){const t=Es(e,"x","logSigmoid"),n=El((e=>({value:Ec(Tc(Ec(e))),gradFunc:t=>gl(t,bu(Ec(e)))})));return n(t)}});const Ic=Is({max_:function(e,t=null,n=!1){const r={x:Es(e,"x","max")},a={reductionIndices:t,keepDims:n};return ms.runKernel(On,r,a)}});const Nc=Is({sum_:function(e,t=null,n=!1){let r=Es(e,"x","sum");"bool"===r.dtype&&(r=Oo(r,"int32"));const a={x:r},s={axis:t,keepDims:n};return ms.runKernel(Tr,a,s)}});const Oc=Is({logSoftmax_:function(e,t=-1){const n=Es(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);const r=El(((e,n)=>{const r=Ic(e,t,!0),a=_l(e,r),s=_l(Oo(a,"float32"),Cc(Nc(sc(a),t,!0)));n([s]);return{value:s,gradFunc:(e,n)=>{const[r]=n,a=sc(r);return _l(e,gl(Nc(e,t,!0),a))}}}));return r(n)}});function Ac(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Mc(e,t,n){const r=e.length+t.length,a=[];let s=0,o=0;for(let i=0;i<r;i++)-1===n.indexOf(i)?a.push(e[s++]):a.push(t[o++]);return a}function _c(e,t){const n=[],r=e.length;for(let a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map((t=>e[t]))]}function Rc(e,t){return Mc(e,t.map((e=>1)),t)}function Pc(e,t,n){re(Ac(t,n),(()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`))}function Dc(e,t){if(Ac(e,t))return null;const n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((e=>n.push(e))),n}function Lc(e){return e.map(((e,t)=>[t,e])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))}function Bc(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}const Fc=Is({logSumExp_:function(e,t=null,n=!1){const r=Es(e,"x","logSumExp"),a=ve(t,r.shape),s=Ic(r,a,!0),o=_l(r,s),i=sc(o),l=Nc(i,a),u=Cc(l),c=hl(fu(s,u.shape),u);if(n){const e=Rc(c.shape,a);return fu(c,e)}return c}});const zc=Is({logicalAnd_:function(e,t){const n=Es(e,"a","logicalAnd","bool"),r=Es(t,"b","logicalAnd","bool");ni(n.shape,r.shape);const a={a:n,b:r};return ms.runKernel(Sn,a)}});const Vc=Is({logicalNot_:function(e){const t={x:Es(e,"x","logicalNot","bool")};return ms.runKernel(En,t)}});const Wc=Is({logicalOr_:function(e,t){const n=Es(e,"a","logicalOr","bool"),r=Es(t,"b","logicalOr","bool");ni(n.shape,r.shape);const a={a:n,b:r};return ms.runKernel(Tn,a)}});const Hc=Is({logicalXor_:function(e,t){const n=Es(e,"a","logicalXor","bool"),r=Es(t,"b","logicalXor","bool");return ni(n.shape,r.shape),zc(Wc(e,t),Vc(zc(e,t)))}});const jc=Is({maxPool_:function(e,t,n,r,a){const s=Es(e,"x","maxPool");let o=s,i=!1;3===s.rank&&(i=!0,o=fu(s,[1,s.shape[0],s.shape[1],s.shape[2]])),re(4===o.rank,(()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`)),re(pu(n,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`)),hu("maxPool",r,a);const l={x:o},u={filterSize:t,strides:n,pad:r,dimRoundingMode:a},c=ms.runKernel(Mn,l,u);return i?fu(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const Uc=Is({maxPool3d_:function(e,t=[1,1,1],n,r,a,s="NDHWC"){const o=Es(e,"x","maxPool3d");let i=o,l=!1;4===o.rank&&(l=!0,i=fu(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),re(5===i.rank,(()=>`Error in maxPool3d: x must be rank 5 but got rank ${i.rank}.`)),re("NDHWC"===s,(()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`)),hu("maxPool3d",r,a);const u={x:i},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:s},p=ms.runKernel(Rn,u,c);return l?fu(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}});const Gc=Is({maxPoolWithArgmax_:function(e,t,n,r,a=!1){const s={x:Es(e,"x","maxPoolWithArgmax")},o={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},i=ms.runKernel(Dn,s,o);return{result:i[0],indexes:i[1]}}});const qc=Is({mean_:function(e,t=null,n=!1){const r={x:Es(e,"x","mean")},a={axis:t,keepDims:n};return ms.runKernel(Ln,r,a)}});function Xc(e,t="float32"){if("complex64"===t){const t=Xc(e,"float32"),n=Xc(e,"float32");return Ns(t,n)}const n=Le(ie(e),t);return ms.makeTensor(n,e,t)}function Kc(e,t="float32"){if("complex64"===t){const t=Kc(e,"float32"),n=Xc(e,"float32");return Ns(t,n)}const n=De(ie(e),t);return ms.makeTensor(n,e,t)}function Yc(e,t,{indexing:n="xy"}={}){if("xy"!==n&&"ij"!==n)throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(void 0===e)return[];let r=Es(e,"x","meshgrid",e instanceof Ka?e.dtype:"float32");if(void 0===t)return[r];let a=Es(t,"y","meshgrid",t instanceof Ka?t.dtype:"float32");const s=ie(r.shape),o=ie(a.shape);return"xy"===n?(r=fu(r,[1,-1]),a=fu(a,[-1,1]),[Yo(Kc([o,1],r.dtype),r),Yo(a,Kc([1,s],a.dtype))]):(r=fu(r,[-1,1]),a=fu(a,[1,-1]),[Yo(r,Kc([1,o],r.dtype)),Yo(Kc([s,1],a.dtype),a)])}const Jc=Is({min_:function(e,t=null,n=!1){const r={x:Es(e,"x","min")},a={axis:t,keepDims:n};return ms.runKernel(Bn,r,a)}});const Zc=Is({minimum_:function(e,t){let n=Es(e,"a","minimum"),r=Es(t,"b","minimum");[n,r]=os(n,r),"bool"===n.dtype&&(n=Oo(n,"int32"),r=Oo(r,"int32")),ni(n.shape,r.shape);const a={a:n,b:r};return ms.runKernel(Fn,a)}});const Qc=Is({mirrorPad_:function(e,t,n){re("reflect"===n||"symmetric"===n,(()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`));const r=Es(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");re(t.length===r.rank,(()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`));const a="reflect"===n?1:0;for(let e=0;e<r.rank;e++)re(2===t[e].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),re(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(()=>`Padding in dimension ${e} cannot be greater than or equal to ${r.shape[e]-a} or less than 0 for input of shape ${r.shape}`));const s={paddings:t,mode:n},o={x:r};return ms.runKernel(zn,o,s)}});const ep=Is({mod_:function(e,t){let n=Es(e,"a","mod"),r=Es(t,"b","mod");[n,r]=os(n,r);const a={a:n,b:r};return ms.runKernel(Vn,a)}});const tp=Is({moments_:function(e,t=null,n=!1){const r=ve(t,(e=Es(e,"x","moments")).shape),a=qc(e,r,n);let s=a.shape;n||(s=Rc(a.shape,r));const o=bl(_l(Oo(e,"float32"),fu(a,s)));return{mean:a,variance:qc(o,r,n)}}});const np=Is({multiRNNCell_:function(e,t,n,r){const a=Es(t,"data","multiRNNCell"),s=Ts(n,"c","multiRNNCell"),o=Ts(r,"h","multiRNNCell");let i=a;const l=[];for(let t=0;t<e.length;t++){const n=e[t](i,s[t],o[t]);l.push(n[0]),l.push(n[1]),i=n[1]}const u=[],c=[];for(let e=0;e<l.length;e+=2)u.push(l[e]),c.push(l[e+1]);return[u,c]}});const rp=Is({multinomial_:function(e,t,n,r=!1){const a=Es(e,"logits","multinomial"),s=a.size,o=a.rank;if(s<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${s}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();const i={logits:1===o?fu(a,[1,-1]):a},l={numSamples:t,seed:n,normalized:r},u=ms.runKernel(Wn,i,l);return 1===o?fu(u,[u.size]):u}});const ap=Is({notEqual_:function(e,t){let n=Es(e,"a","notEqual","string_or_numeric"),r=Es(t,"b","notEqual","string_or_numeric");[n,r]=os(n,r),ni(n.shape,r.shape);const a={a:n,b:r};return ms.runKernel(Un,a)}});const sp=Is({onesLike_:function(e){const t={x:Es(e,"x","onesLike")};return ms.runKernel(Kn,t)}});const op=Is({outerProduct_:function(e,t){const n=Es(e,"v1","outerProduct"),r=Es(t,"v2","outerProduct");re(1===n.rank&&1===r.rank,(()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`));const a=fu(n,[-1,1]),s=fu(r,[1,-1]);return Yo(a,s)}});const ip=Is({pad_:function(e,t,n=0){const r=Es(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const a={paddings:t,constantValue:n},s={x:r};return ms.runKernel(Zn,s,a)}});const lp=Is({pad1d_:function(e,t,n=0){return re(2===t.length,(()=>"Invalid number of paddings. Must be length of 2.")),ip(e,[t],n)}});const up=Is({pad2d_:function(e,t,n=0){return re(2===t.length&&2===t[0].length&&2===t[1].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),ip(e,t,n)}});const cp=Is({pad3d_:function(e,t,n=0){return re(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),ip(e,t,n)}});const pp=Is({pad4d_:function(e,t,n=0){return re(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),ip(e,t,n)}});const dp=Is({spaceToBatchND_:function(e,t,n){const r=Es(e,"x","spaceToBatchND");re(r.rank>=1+t.length,(()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`)),re(n.length===t.length,(()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`)),re(r.shape.reduce(((e,r,a)=>a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]==0:e),!0),(()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`));const a={x:r},s={blockShape:t,paddings:n};return ms.runKernel($r,a,s)}});const hp=Is({pool_:function(e,t,n,r,a,s,o){null==a&&(a=[1,1]),null==s&&(s=1),0===r&&(r="valid");const i=Es(e,"x","maxPool");let l=i,u=!1;3===i.rank&&(u=!0,l=fu(i,[1,i.shape[0],i.shape[1],i.shape[2]])),re(pu(s,a),(()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${a}'`));const c=tu(l.shape,t,s,a,r),p=[c.dilationHeight,c.dilationWidth];let d;d="same"===r?function(e,t){const n=e.map(((e,n)=>e+(e-1)*(t[n]-1))).map((e=>e-1)),r=n.map((e=>Math.floor(e/2))),a=n.map(((e,t)=>e-r[t]));return n.map(((e,t)=>[r[t],a[t]]))}([c.filterHeight,c.filterWidth],p):[[0,0],[0,0]];const h=1===p[0]&&1===p[1],[f,m]=function(e,t,n){const r=n.map((e=>e[0])),a=n.map((e=>e[1])),s=e.concat(r,a),o=t.map(((e,t)=>(e-s[t]%e)%e)),i=a.map(((e,t)=>e+o[t])),l=t.map(((e,t)=>[r[t],i[t]])),u=t.map(((e,t)=>[0,o[t]]));return[l,u]}([c.inHeight,c.inWidth],p,d),g=h?r:"valid",v=h?l:dp(l,p,f),b=("avg"===n?()=>mu(v,t,s,g,o):()=>jc(v,t,s,g,o))(),y=h?b:ku(b,p,m);return u?fu(y,[y.shape[1],y.shape[2],y.shape[3]]):y}});const fp=Is({prelu_:function(e,t){const n={x:Es(e,"x","prelu"),alpha:Es(t,"alpha","prelu")};return ms.runKernel(tr,n)}});const mp=Is({prod_:function(e,t=null,n=!1){let r=Es(e,"x","prod");"bool"===r.dtype&&(r=Oo(r,"int32"));const a={x:r},s={axis:t,keepDims:n};return ms.runKernel(nr,a,s)}});const gp=Is({rand_:function(e,t,n){const r=ie(e);let a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error(`Unknown data type ${n}`);a=new Uint8Array(r)}for(let e=0;e<r;e++)a[e]=t();return ms.makeTensor(a,e,n)}});var vp=n(129);class bp{constructor(e,t,n,r,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const s=a||Math.random();this.random=vp.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,a,s;do{r=2*this.random()-1,a=2*this.random()-1,s=r*r+a*a}while(s>=1||0===s);const o=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*r*o,t=this.mean+this.stdDev*a*o,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class yp{constructor(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;const a=r||Math.random();this.randu=vp.alea(a.toString()),this.randn=new bp(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,r,a,s;for(;;){do{r=this.randn.nextValue(),s=1+this.c*r}while(s<=0);if(s*=s*s,e=r*r,t=1-.331*e*e,n=.5*e+this.d*(1-s+Math.log(s)),a=this.randu(),a<t||Math.log(a)<n)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}class wp{constructor(e=0,t=1,n,r){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=vp.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const xp=Is({randomGamma_:function(e,t,n=1,r="float32",a){if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error(`Unsupported data type ${r}`);const s=new yp(t,n,r,a),o=No(e,r);for(let e=0;e<o.values.length;e++)o.values[e]=s.nextValue();return o.toTensor()}});const kp=Is({randomNormal_:function(e,t=0,n=1,r,a){if(null!=r&&"bool"===r)throw new Error(`Unsupported data type ${r}`);const s=new bp(t,n,r,!1,a),o=No(e,r);for(let e=0;e<o.values.length;e++)o.values[e]=s.nextValue();return o.toTensor()}});const Cp=Is({randomUniform_:function(e,t=0,n=1,r="float32",a){const s=No(e,r),o=new wp(t,n,null,a);for(let e=0;e<s.values.length;e++)s.values[e]=o.nextValue();return s.toTensor()}});function Sp(e,t,n=1,r="float32"){if(0===n)throw new Error("Cannot have a step of zero");const a={start:e,stop:t,step:n,dtype:r};return ms.runKernel(rr,{},a)}const Ep=Is({real_:function(e){const t={input:Es(e,"input","real")};return ms.runKernel(ar,t)}});const Tp=Is({reciprocal_:function(e){const t={x:Es(e,"x","reciprocal")};return ms.runKernel(sr,t)}});const $p=Is({relu_:function(e){const t={x:Es(e,"x","relu")};return ms.runKernel(or,t)}});const Ip=Is({relu6_:function(e){const t={x:Es(e,"x","relu6")};return ms.runKernel(dr,t)}});const Np=Is({reverse_:function(e,t){const n={x:Es(e,"x","reverse")},r={dims:t};return ms.runKernel(hr,n,r)}});const Op=Is({reverse1d_:function(e){const t=Es(e,"x","reverse");return re(1===t.rank,(()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`)),Np(t,0)}});const Ap=Is({reverse2d_:function(e,t){const n=Es(e,"x","reverse");return re(2===n.rank,(()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`)),Np(n,t)}});const Mp=Is({reverse3d_:function(e,t){const n=Es(e,"x","reverse");return re(3===n.rank,(()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`)),Np(n,t)}});const _p=Is({reverse4d_:function(e,t){const n=Es(e,"x","reverse");return re(4===n.rank,(()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`)),Np(n,t)}});const Rp=Is({round_:function(e){const t={x:Es(e,"x","round")};return ms.runKernel(fr,t)}});const Pp=Is({rsqrt_:function(e){const t={x:Es(e,"x","rsqrt","float32")};return ms.runKernel(mr,t)}});const Dp=Is({selu_:function(e){const t={x:Es(e,"x","selu")};return ms.runKernel(br,t)}});const Lp=Is({separableConv2d_:function(e,t,n,r,a,s=[1,1],o="NHWC"){const i=Es(e,"x","separableConv2d"),l=Es(t,"depthwiseFilter","separableConv2d"),u=Es(n,"pointwiseFilter","separableConv2d");let c=i,p=!1;if(3===i.rank&&(p=!0,c=fu(i,[1,i.shape[0],i.shape[1],i.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");re(4===c.rank,(()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`)),re(4===l.rank,(()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`)),re(4===u.rank,(()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`)),re(1===u.shape[0],(()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`)),re(1===u.shape[1],(()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`));const d=l.shape[2],h=l.shape[3];re(u.shape[2]===d*h,(()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*h}, but got ${u.shape[2]}.`));const f=Ku(c,l,r,a,o,s),m=Du(f,u,1,"valid",o);return p?fu(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});const Bp=async function(e,t){const n=Es(e,"x","setdiff1d"),r=Es(t,"y","setdiff1d");re(n.dtype===r.dtype,(()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`)),re(1===n.rank,(()=>`x should be 1D tensor, but got x (${n.shape}).`)),re(1===r.rank,(()=>`y should be 1D tensor, but got y (${r.shape}).`));const a=await n.data(),s=await r.data(),o=new Set(s);let i=0;for(let e=0;e<a.length;e++)o.has(a[e])||i++;const l=new Ua([i],n.dtype),u=new Ua([i],"int32");for(let e=0,t=0;e<a.length;e++)o.has(a[e])||(l.values[t]=a[e],u.values[t]=e,t++);return[l.toTensor(),u.toTensor()]};const Fp=Is({sign_:function(e){const t={x:Es(e,"x","sign")};return ms.runKernel(kr,t)}});const zp=Is({sin_:function(e){const t={x:Es(e,"x","sin","float32")};return ms.runKernel(wr,t)}});const Vp=Is({sinh_:function(e){const t={x:Es(e,"x","sinh")};return ms.runKernel(xr,t)}});const Wp=Is({slice1d_:function(e,t,n){const r=Es(e,"x","slice1d");return re(1===r.rank,(()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`)),yu(r,[t],[n])}});const Hp=Is({slice2d_:function(e,t,n){const r=Es(e,"x","slice2d");return re(2===r.rank,(()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`)),yu(r,t,n)}});const jp=Is({slice3d_:function(e,t,n){const r=Es(e,"x","slice3d");return re(3===r.rank,(()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`)),yu(r,t,n)}});const Up=Is({slice4d_:function(e,t,n){const r=Es(e,"x","slice4d");return re(4===r.rank,(()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`)),yu(r,t,n)}});const Gp=Is({softmax_:function(e,t=-1){const n=Es(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const r={logits:n},a={dim:t};return ms.runKernel(Nr,r,a)}});const qp=Is({fft_:function(e){re("complex64"===e.dtype,(()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`));const t={input:e};return ms.runKernel(tn,t)}});const Xp=Is({ifft_:function(e){re("complex64"===e.dtype,(()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`));const t={input:e};return ms.runKernel(hn,t)}});const Kp=Is({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let r;if(t<=2){const a=fu(e,[n,t]);r=Xp(a)}else{const a=[n,2*(t-1)],s=fu(Ep(e),[n,t]),o=fu(fc(e),[n,t]),i=Np(yu(s,[0,1],[n,t-2]),1),l=gl(Np(yu(o,[0,1],[n,t-2]),1),$l(-1)),u=vu([s,i],1),c=vu([o,l],1),p=fu(Ns(u,c),[a[0],a[1]]);r=Xp(p)}if(r=Ep(r),3===e.rank&&0!==e.shape[0]){const t=r,n=e.shape[0];r=fu(r,[n,r.shape[0]/n,r.shape[1]]),t.dispose()}return r}});const Yp=Is({split_:function(e,t,n=0){const r={x:Es(e,"x","split")},a={numOrSizeSplits:t,axis:n};return ms.runKernel(Ir,r,a)}});const Jp=Is({rfft_:function(e,t){re("float32"===e.dtype,(()=>`The dtype for rfft() must be real value but got ${e.dtype}`));let n=e.shape[e.shape.length-1];const r=e.size/n;let a;if(null!=t&&t<n){const r=e.shape.map((e=>0)),s=e.shape.map((e=>e));s[e.shape.length-1]=t,a=yu(e,r,s),n=t}else if(null!=t&&t>n){const r=e.shape.map((e=>e));r[e.shape.length-1]=t-n,a=vu([e,Xc(r)],e.shape.length-1),n=t}else a=e;const s=yl(a),o=fu(Ns(a,s),[r,n]),i=qp(o),l=Math.floor(n/2)+1,u=Ep(i),c=fc(i),p=Yp(u,[l,n-l],u.shape.length-1),d=Yp(c,[l,n-l],c.shape.length-1),h=a.shape.slice();return h[a.shape.length-1]=l,fu(Ns(p[0],d[0]),h)}});const Zp=Is({squaredDifference_:function(e,t){let n=Es(e,"a","squaredDifference"),r=Es(t,"b","squaredDifference");[n,r]=os(n,r),ni(n.shape,r.shape);const a={a:n,b:r};return ms.runKernel(Pr,a,{})}});const Qp=Is({squeeze_:function(e,t){const n=Es(e,"x","squeeze");return fu(n,be(n.shape,t).newShape)}});const ed=Is({stack_:function(e,t=0){const n=Ts(e,"tensors","stack","string_or_numeric");re(n.length>=1,(()=>"Pass at least one tensor to tf.stack")),n.length>0&&re(t<=n[0].rank,(()=>"Axis must be <= rank of the tensor"));const r=n,a={axis:t};return ms.runKernel(Jn,r,a)}});const td=Is({step_:function(e,t=0){const n={x:Es(e,"x","step")},r={alpha:t};return ms.runKernel(Zr,n,r)}});const nd=Is({stridedSlice_:function(e,t,n,r,a=0,s=0,o=0,i=0,l=0){const u={x:Es(e,"x","stridedSlice","string_or_numeric")},c={begin:t,end:n,strides:r,beginMask:a,endMask:s,ellipsisMask:o,newAxisMask:i,shrinkAxisMask:l};return ms.runKernel(Lr,u,c)}});const rd=Is({tan_:function(e){const t={x:Es(e,"x","tan","float32")};return ms.runKernel(Wr,t)}});function ad(e,t){se(e);const n=ks(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Os(e,null,n,t)}function sd(e,t,n){if(se(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const r=ks(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Os(e,t,r,n)}function od(e,t,n){if(se(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");const r=ks(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Os(e,t,r,n)}function id(e,t,n){if(se(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");const r=ks(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Os(e,t,r,n)}function ld(e,t,n){if(se(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");const r=ks(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Os(e,t=t||r,r,n)}const ud=Is({topk_:function(e,t=1,n=!0){const r=Es(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const a=r.shape[r.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>a)throw new Error(`'k' passed to topk() must be <= the last dimension (${a}) but got ${t}`);const s={x:r},o={k:t,sorted:n},[i,l]=ms.runKernel(Ur,s,o);return{values:i,indices:l}}});const cd=Is({truncatedNormal_:function(e,t=0,n=1,r,a){if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const s=new bp(t,n,r,!0,a),o=No(e,r);for(let e=0;e<o.values.length;e++)o.values[e]=s.nextValue();return o.toTensor()}});const pd=Is({unique_:function(e,t=0){const n=Es(e,"x","unique","string_or_numeric");re(n.rank>0,(()=>"The input tensor must be at least 1D"));const r={x:n},a={axis:t},[s,o]=ms.runKernel(Xr,r,a);return{values:s,indices:o}}});const dd=Is({unsortedSegmentSum_:function(e,t,n){const r=Es(e,"x","unsortedSegmentSum"),a=Es(t,"segmentIds","unsortedSegmentSum","int32");re(ce(n),(()=>"numSegments must be of dtype int"));const s={x:r,segmentIds:a},o={numSegments:n};return ms.runKernel(Yr,s,o)}});const hd=Is({unstack_:function(e,t=0){const n=Es(e,"x","unstack","string_or_numeric");re(t>=-n.shape.length&&t<n.shape.length,(()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`));const r={value:n},a={axis:t};return ms.runKernel(Kr,r,a)}});function fd(e,t=!0,n,r){return ms.makeVariable(e,t,n,r)}function md(e,t){const n=[];for(let e=0;e<t.length;e++)t[e]&&n.push(e);const r=No(e,"int32"),a=No([n.length,e.length],"int32");for(let t=0;t<n.length;t++){const s=r.indexToLoc(n[t]),o=t*e.length;a.values.set(s,o)}return a.toTensor()}const gd=async function(e){const t=Es(e,"condition","whereAsync","bool"),n=await t.data(),r=md(t.shape,n);return e!==t&&t.dispose(),r};const vd=async function(e,t,n){const r=Es(e,"tensor","boolMask"),a=Es(t,"mask","boolMask","bool"),s=null==n?0:n,o=a.rank,i=r.shape;re(o>0,(()=>"mask cannot be scalar")),ae(i.slice(s,s+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let e=s;e<s+o;e++)l*=i[e];const u=i.slice(0,s).concat([l],i.slice(s+o)),c=fu(r,u),p=fu(a,[-1]),d=await gd(p),h=Qp(d,[1]),f=pc(c,h,s);return e!==r&&r.dispose(),t!==a&&a.dispose(),h.dispose(),c.dispose(),p.dispose(),d.dispose(),f};function bd(e,t,n=null){if(0===e.rank)return Pl(e);if(1!==e.rank&&null===n)return bd(fu(e,[-1]),t,n);if(1===e.rank||"number"==typeof n||Array.isArray(n)&&1===n.length){if(1===t)return Nc(Pl(e),n);if(t===1/0)return Ic(Pl(e),n);if(t===-1/0)return Jc(Pl(e),n);if("euclidean"===t||2===t)return vl(Nc(Ml(Pl(e),$l(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&2===n.length){if(1===t)return Ic(Nc(Pl(e),n[0]),n[1]-1);if(t===1/0)return Ic(Nc(Pl(e),n[1]),n[0]);if(t===-1/0)return Jc(Nc(Pl(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return vl(Nc(bl(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const yd=Is({norm_:function(e,t="euclidean",n=null,r=!1){const a=bd(e=Es(e,"x","norm"),t,n);let s=a.shape;if(r){const t=ve(n,e.shape);s=Rc(a.shape,t)}return fu(a,s)}});const wd=Is({movingAverage_:function(e,t,n,r,a=!0){const s=Es(e,"v","movingAverage"),o=Es(t,"x","movingAverage"),i=Es(n,"decay","movingAverage");is(s,o),re(ue(s.shape,o.shape),(()=>"Shape mismatch in v and x"));const l=$l(1),u=_l(l,i);let c=gl(_l(o,s),u);if(a){re(null!=r,(()=>"When using zeroDebias: true, step is required."));const e=Es(r,"step","movingAverage");c=ml(c,_l(l,Ml(i,e)))}return hl(s,c)}});const xd=Is({scatterND_:function(e,t,n){const r=Es(e,"indices","scatterND","int32"),a=Es(t,"updates","scatterND");di(a,r,n);const s={indices:r,updates:a},o={shape:n};return ms.runKernel(gr,s,o)}});const kd=Is({sparseToDense_:function(e,t,n,r=0){const a=Es(e,"sparseIndices","sparseToDense","int32"),s=Es(t,"sparseValues","sparseToDense"),o=Es(r,"defaultValue","sparseToDense",s.dtype);!function(e,t,n,r){if("int32"!==e.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);const a=e.rank>0?e.shape[0]:1,s=e.rank>1?e.shape[1]:1;if(n.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${s}.`);const o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${a}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,s,n,o);const i={sparseIndices:a,sparseValues:s,defaultValue:o},l={outputShape:n};return ms.runKernel(Rr,i,l)}});const Cd=Is({gatherND_:function(e,t){const n=Es(t,"indices","gatherND","int32"),r={params:Es(e,"x","gatherND","string_or_numeric"),indices:n};return ms.runKernel(un,r)}});const Sd=Is({dropout_:function(e,t,n,r){const a=Es(e,"x","dropout");if(re("float32"===a.dtype,(()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${a.dtype} tensor instead.`)),re(t>=0&&t<1,(()=>`rate must be a float in the range [0, 1), but got ${t}.`)),0===t)return e instanceof Ka?a.clone():a;const s=function(e,t){if(null==t)return e.shape.slice();if(ue(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,i=ml(cc(hl(Cp(s,0,1,"float32",r),o)),o);return gl(a,i)}});function Ed(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Td(e,t,n){const r=1-e%2,a=new Float32Array(e);for(let s=0;s<e;++s){const o=2*Math.PI*s/(e+r-1);a[s]=t-n*Math.cos(o)}return ad(a,"float32")}const $d=async function(e,t,n=1){const r=Es(e,"predictions","inTopK"),a=Es(t,"targets","inTopK");re(r.rank>1,(()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`)),re(r.rank-1===a.rank,(()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${a.rank}`)),ae(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const s=r.shape[r.shape.length-1];re(n>0&&n<=s,(()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${s}), but got ${n}`));const o=await r.data(),i=await a.data(),[l,u]=[o.length/s,s],c=ye("bool",l);for(let e=0;e<l;e++){const t=e*u,r=o.subarray(t,t+u),a=[];for(let e=0;e<r.length;e++)a.push({value:r[e],index:e});a.sort(((e,t)=>t.value-e.value)),c[e]=0;for(let t=0;t<n;t++)if(a[t].index===i[e]){c[e]=1;break}}return e!==r&&r.dispose(),t!==a&&a.dispose(),As(c,a.shape,"bool")};const Id=Is({conv2DBackpropFilter_:function(e,t,n,r,a,s="NHWC",o){let i=e;3===e.rank&&(i=fu(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=fu(t,[1,t.shape[0],t.shape[1],t.shape[2]])),re(4===i.rank,(()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${i.shape}.`)),re(4===l.rank,(()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`)),re(4===n.length,(()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`));const u="NHWC"===s?i.shape[3]:i.shape[1],c="NHWC"===s?l.shape[3]:l.shape[1];re(u===n[2],(()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`)),re(c===n[3],(()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`)),hu("conv2dDerFilter",a,o);const p={x:i,dy:l},d={strides:r,pad:a,dataFormat:s,dimRoundingMode:o,filterShape:n};return ms.runKernel($t,p,d)}});function Nd(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return gl(e,td(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function Od(e,t){let n=t;const r=ti(e.shape,t.shape);return r.length>0&&(n=Nc(n,r)),fu(n,e.shape)}function Ad(e,t,n,r){if("linear"===t)return e;if("relu"===t)return $p(e);if("elu"===t)return rc(e);if("relu6"===t)return Ip(e);if("prelu"===t)return fp(e,n);if("leakyrelu"===t)return bc(e,r);if("sigmoid"===t)return bu(e);throw new Error(`Unknown fused activation ${t}.`)}const Md=(e,t)=>!(e>0)||"linear"===t;const _d=Is({fusedConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:a="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:i,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",!1===Md(ms.state.gradientDepth,l)){let p=Du(e,t,n,r,a,s,o);return null!=i&&(p=hl(p,i)),Ad(p,l,u,c)}const p=Es(e,"x","conv2d","float32"),d=Es(t,"filter","conv2d","float32");let h=p,f=!1;3===p.rank&&(f=!0,h=fu(p,[1,p.shape[0],p.shape[1],p.shape[2]])),re(4===h.rank,(()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`)),re(4===d.rank,(()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`)),hu("fused conv2d",r,o),re(h.shape[3]===d.shape[2],(()=>`Error in conv2d: depth of input (${h.shape[3]}) must match input depth for filter ${d.shape[2]}.`)),re(pu(n,s),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`)),re("NHWC"===a,(()=>`Error in conv2d: got dataFormat of ${a} but only NHWC is currently supported.`));const m=ru(h.shape,d.shape,n,s,r,o);let g,v;null!=i&&(g=Es(i,"bias","fused conv2d"),[g]=os(g,p),ni(m.outShape,g.shape)),null!=u&&(v=Es(u,"prelu weights","fused conv2d"));const b=(e,t)=>{const[a,o,i,u]=t,c=Nd(e,i,l);re(cu(s),(()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`));const p=[Bu(o.shape,c,a,n,r),Id(o,c,a.shape,n,r)];if(null!=u){const e=Od(u,c);p.push(e)}return p},y={x:h,filter:d,bias:g,preluActivationWeights:v},w={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:o,activation:l,leakyreluAlpha:c};if(null==i){const e=El(((e,t,n)=>{let r=ms.runKernel(na,y,w);return n([t,e,r]),f&&(r=fu(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:b}}));return e(h,d)}{const e=El(((e,t,n,r)=>{let a=ms.runKernel(na,y,w);return r([t,e,a,n]),f&&(a=fu(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:b}}));return e(h,d,g)}}});const Rd=Is({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a,s=[1,1],o){let i=e;3===e.rank&&(i=fu(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=fu(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={x:i,dy:l},c={strides:r,pad:a,dimRoundingMode:o,dilations:s,filterShape:n};return ms.runKernel(zt,u,c)}});const Pd=Is({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a,s=[1,1],o){let i=t,l=!1;3===t.rank&&(l=!0,i=fu(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={dy:i,filter:n},c={strides:r,pad:a,dimRoundingMode:o,dilations:s,inputShape:e},p=ms.runKernel(Vt,u,c);return l?fu(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});const Dd=Is({fusedDepthwiseConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:a="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:i,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(!1===Md(ms.state.gradientDepth,l)){let p=Ku(e,t,n,r,a,s,o);return null!=i&&(p=hl(p,i)),Ad(p,l,u,c)}const p=Es(e,"x","depthwiseConv2d","float32"),d=Es(t,"filter","depthwiseConv2d","float32");let h=p,f=!1;3===p.rank&&(f=!0,h=fu(p,[1,p.shape[0],p.shape[1],p.shape[2]])),re(4===h.rank,(()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`)),re(4===d.rank,(()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`)),re(h.shape[3]===d.shape[2],(()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`)),null==s&&(s=[1,1]),re(pu(n,s),(()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`)),hu("fused depthwiseConv2d",r,o);const m=ru(h.shape,d.shape,n,s,r,o,!0);let g,v;null!=i&&(g=Es(i,"bias","fused conv2d"),[g]=os(g,p),ni(m.outShape,g.shape)),null!=u&&(v=Es(u,"prelu weights","fused depthwiseConv2d"));const b=(e,t)=>{re(cu(s),(()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`));const[a,i,u,c]=t,p=Nd(e,u,l),d=Pd(i.shape,p,a,n,r,s,o),h=Rd(i,p,a.shape,n,r,s,o);if(null!=c){return[d,h,Od(g,p)]}return[d,h]},y={x:h,filter:d,bias:g,preluActivationWeights:v},w={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:o,activation:l,leakyreluAlpha:c};if(null==i){const e=El(((e,t,n)=>{let r=ms.runKernel(ra,y,w);return n([t,e,r]),f&&(r=fu(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:b}}));return e(h,d)}{const e=El(((e,t,n,r)=>{let a=ms.runKernel(ra,y,w);return r([t,e,a,n]),f&&(a=fu(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:b}}));return e(h,d,g)}}});const Ld=Is({fusedMatMul_:function({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:a,activation:s="linear",preluActivationWeights:o,leakyreluAlpha:i}){if(!1===Md(ms.state.gradientDepth,s)){let l=Yo(e,t,n,r);return null!=a&&(l=hl(l,a)),Ad(l,s,o,i)}let l=Es(e,"a","fused matMul"),u=Es(t,"b","fused matMul");[l,u]=os(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],p=r?u.shape[u.rank-1]:u.shape[u.rank-2],d=n?l.shape[l.rank-1]:l.shape[l.rank-2],h=r?u.shape[u.rank-2]:u.shape[u.rank-1],f=l.shape.slice(0,-2),m=u.shape.slice(0,-2),g=ie(f),v=ie(m);re(c===p,(()=>`Error in fused matMul: inner shapes (${c}) and (${p}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`));const b=ni(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([d,h]),y=fu(l,n?[g,c,d]:[g,d,c]),w=fu(u,r?[v,h,p]:[v,p,h]);let x,k;null!=a&&(x=Es(a,"bias","fused matMul"),[x]=os(x,l),ni(b,x.shape)),null!=o&&(k=Es(o,"prelu weights","fused matMul"));const C=(e,t)=>{const[o,i,l,u]=t,c=Nd(fu(e,l.shape),l,s);let p,d;if(n||r?!n&&r?(p=Yo(c,i,!1,!1),d=Yo(c,o,!0,!1)):n&&!r?(p=Yo(i,c,!1,!0),d=Yo(o,c,!1,!1)):(p=Yo(i,c,!0,!0),d=Yo(c,o,!0,!0)):(p=Yo(c,i,!1,!0),d=Yo(o,c,!0,!1)),null!=a){return[p,d,Od(u,c)]}return[p,d]},S={a:y,b:w,bias:x,preluActivationWeights:k},E={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:i};if(null==a){const e=El(((e,t,n)=>{const r=ms.runKernel(ta,S,E);return n([e,t,r]),{value:fu(r,b),gradFunc:C}}));return e(y,w)}{const e=El(((e,t,n,r)=>{const a=ms.runKernel(ta,S,E);return r([e,t,a,n]),{value:fu(a,b),gradFunc:C}}));return e(y,w,x)}}});const Bd=Is({hammingWindow_:function(e){return Td(e,.54,.46)}});const Fd=Is({hannWindow_:function(e){return Td(e,.5,.5)}});const zd=Is({frame_:function(e,t,n,r=!1,a=0){let s=0;const o=[];for(;s+t<=e.size;)o.push(yu(e,s,t)),s+=n;if(r)for(;s<e.size;){const r=s+t-e.size,i=vu([yu(e,s,t-r),Ol([r],a)]);o.push(i),s+=n}return 0===o.length?sd([],[0,t]):fu(vu(o),[o.length,t])}});const Vd=Is({stft_:function(e,t,n,r,a=Fd){null==r&&(r=Ed(t));const s=zd(e,t,n),o=gl(s,a(t));return Jp(o,r)}});const Wd=Is({cropAndResize_:function(e,t,n,r,a="bilinear",s=0){const o=Es(e,"image","cropAndResize"),i=Es(t,"boxes","cropAndResize","float32"),l=Es(n,"boxInd","cropAndResize","int32"),u=i.shape[0];re(4===o.rank,(()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`)),re(2===i.rank&&4===i.shape[1],(()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${i.shape}.`)),re(1===l.rank&&l.shape[0]===u,(()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${i.shape}.`)),re(2===r.length,(()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`)),re(r[0]>=1&&r[1]>=1,(()=>`cropSize must be atleast [1,1], but was ${r}`)),re("bilinear"===a||"nearest"===a,(()=>`method must be bilinear or nearest, but was ${a}`));const c={image:o,boxes:i,boxInd:l},p={method:a,extrapolationValue:s,cropSize:r};return ms.runKernel(Dt,c,p)}});const Hd=Is({flipLeftRight_:function(e){const t=Es(e,"image","flipLeftRight","float32");re(4===t.rank,(()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`));const n={image:t};return ms.runKernel(rn,n,{})}});const jd=Is({grayscaleToRGB_:function(e){const t=Es(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];re(t.rank>=2,(()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`)),re(1===r,(()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`));const a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,lc(t,a)}});const Ud=Is({rotateWithOffset_:function(e,t,n=0,r=.5){const a=Es(e,"image","rotateWithOffset","float32");re(4===a.rank,(()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${a.rank}.`));const s={image:a},o={radians:t,fillValue:n,center:r};return ms.runKernel(ea,s,o)}});function Gd(e,t,n,r,a,s){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==s&&(s=0);const o=e.shape[0];return n=Math.min(n,o),re(0<=r&&r<=1,(()=>`iouThreshold must be in [0, 1], but was '${r}'`)),re(2===e.rank,(()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`)),re(4===e.shape[1],(()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`)),re(1===t.rank,(()=>"scores must be a 1D tensor")),re(t.shape[0]===o,(()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${t.shape[0]}`)),re(0<=s&&s<=1,(()=>`softNmsSigma must be in [0, 1], but was '${s}'`)),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:s}}const qd=Is({nonMaxSuppression_:function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY){const s=Es(e,"boxes","nonMaxSuppression","float32"),o=Es(t,"scores","nonMaxSuppression","float32"),i=Gd(s,o,n,r,a),l={maxOutputSize:n=i.maxOutputSize,iouThreshold:r=i.iouThreshold,scoreThreshold:a=i.scoreThreshold};return ms.runKernel(Gn,{boxes:s,scores:o},l)}});function Xd(e,t,n){const r=function(e,t,n){return function(e,t,n){let r=0,a=e.length,s=0,o=!1;for(;r<a;){s=r+(a-r>>>1);const i=n(t,e[s]);i>0?r=s+1:(a=s,o=!i)}return o?r:-r-1}(e,t,n||Kd)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function Kd(e,t){return e>t?1:e<t?-1:0}function Yd(e,t,n,r,a){return Qd(e,t,n,r,a,0)}function Jd(e,t,n,r,a,s){return Qd(e,t,n,r,a,0,!1,s,!0)}function Zd(e,t,n,r,a,s){return Qd(e,t,n,r,a,s,!0)}function Qd(e,t,n,r,a,s,o=!1,i=!1,l=!1){const u=[];for(let e=0;e<t.length;e++)t[e]>a&&u.push({score:t[e],boxIndex:e,suppressBeginIndex:0});u.sort(nh);const c=s>0?-.5/s:0,p=[],d=[];for(;p.length<n&&u.length>0;){const t=u.pop(),{score:n,boxIndex:s,suppressBeginIndex:o}=t;if(n<a)break;let i=!1;for(let n=p.length-1;n>=o;--n){const o=eh(e,s,p[n]);if(o>=r){i=!0;break}if(t.score=t.score*th(r,c,o),t.score<=a)break}t.suppressBeginIndex=p.length,i||(t.score===n?(p.push(s),d.push(t.score)):t.score>a&&Xd(u,t,nh))}const h=p.length,f=n-h;i&&f>0&&(p.push(...new Array(f).fill(0)),d.push(...new Array(f).fill(0)));const m={selectedIndices:p};return o&&(m.selectedScores=d),l&&(m.validOutputs=h),m}function eh(e,t,n){const r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),s=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),i=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),p=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),h=(i-s)*(l-o),f=(p-u)*(d-c);if(h<=0||f<=0)return 0;const m=Math.max(s,u),g=Math.max(o,c),v=Math.min(i,p),b=Math.min(l,d),y=Math.max(v-m,0)*Math.max(b-g,0);return y/(h+f-y)}function th(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function nh(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}const rh=async function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY){const s=Es(e,"boxes","nonMaxSuppressionAsync"),o=Es(t,"scores","nonMaxSuppressionAsync"),i=Gd(s,o,n,r,a);n=i.maxOutputSize,r=i.iouThreshold,a=i.scoreThreshold;const l=await Promise.all([s.data(),o.data()]),u=l[0],c=l[1],{selectedIndices:p}=Yd(u,c,n,r,a);return s!==e&&s.dispose(),o!==t&&o.dispose(),ad(p,"int32")};const ah=Is({nonMaxSuppressionWithScore_:function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=0){const o=Es(e,"boxes","nonMaxSuppression"),i=Es(t,"scores","nonMaxSuppression"),l=Gd(o,i,n,r,a,s),u={boxes:o,scores:i},c={maxOutputSize:n=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:a=l.scoreThreshold,softNmsSigma:s=l.softNmsSigma},p=ms.runKernel(Xn,u,c);return{selectedIndices:p[0],selectedScores:p[1]}}});const sh=async function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=0){const o=Es(e,"boxes","nonMaxSuppressionAsync"),i=Es(t,"scores","nonMaxSuppressionAsync"),l=Gd(o,i,n,r,a,s);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,s=l.softNmsSigma;const u=await Promise.all([o.data(),i.data()]),c=u[0],p=u[1],{selectedIndices:d,selectedScores:h}=Zd(c,p,n,r,a,s);return o!==e&&o.dispose(),i!==t&&i.dispose(),{selectedIndices:ad(d,"int32"),selectedScores:ad(h)}};const oh=Is({nonMaxSuppressionPadded_:function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=!1){const o=Es(e,"boxes","nonMaxSuppression"),i=Es(t,"scores","nonMaxSuppression"),l=Gd(o,i,n,r,a,null),u={boxes:o,scores:i},c={maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:s},p=ms.runKernel(qn,u,c);return{selectedIndices:p[0],validOutputs:p[1]}}});const ih=async function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=!1){const o=Es(e,"boxes","nonMaxSuppressionAsync"),i=Es(t,"scores","nonMaxSuppressionAsync"),l=Gd(o,i,n,r,a,null),u=l.maxOutputSize,c=l.iouThreshold,p=l.scoreThreshold,[d,h]=await Promise.all([o.data(),i.data()]),{selectedIndices:f,validOutputs:m}=Jd(d,h,u,c,p,s);return o!==e&&o.dispose(),i!==t&&i.dispose(),{selectedIndices:ad(f,"int32"),validOutputs:$l(m,"int32")}};const lh=Is({resizeBilinear_:function(e,t,n=!1,r=!1){const a=Es(e,"images","resizeBilinear");re(3===a.rank||4===a.rank,(()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${a.rank}.`)),re(2===t.length,(()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`)),re(!1===r||!1===n,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let s=a,o=!1;3===a.rank&&(o=!0,s=fu(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const[]=t,i={images:s},l={alignCorners:n,halfPixelCenters:r,size:t},u=ms.runKernel(cr,i,l);return o?fu(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const uh=Is({resizeNearestNeighbor_:function(e,t,n=!1,r=!1){const a=Es(e,"images","resizeNearestNeighbor");re(3===a.rank||4===a.rank,(()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${a.rank}.`)),re(2===t.length,(()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`)),re("float32"===a.dtype||"int32"===a.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),re(!1===r||!1===n,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let s=a,o=!1;3===a.rank&&(o=!0,s=fu(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const[]=t,i={images:s},l={alignCorners:n,halfPixelCenters:r,size:t},u=ms.runKernel(lr,i,l);return o?fu(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const ch=Is({threshold_:function(e,t="binary",n=!1,r=.5){const a=Es(e,"image","threshold"),s=a.shape[0]*a.shape[1];let o,i,l,u,c=gl(ad([r]),255);if(re(3===a.rank,(()=>`Error in threshold: image must be rank 3,but got rank ${a.rank}.`)),re(3===a.shape[2]||1===a.shape[2],(()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${a.shape[2]}.`)),re("int32"===a.dtype||"float32"===a.dtype,(()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${a.dtype}.`)),re("otsu"===t||"binary"===t,(()=>`Method must be binary or otsu, but was ${t}`)),3===a.shape[2]){[o,i,l]=Yp(a,[1,1,1],-1);const e=gl(o,.2989),t=gl(i,.587),n=gl(l,.114);u=hl(hl(e,t),n)}else u=e;if("otsu"===t){c=function(e,t){let n,r,a,s,o,i,l=ad([-1]),u=ad([0]),c=ad([0]);for(let p=0;p<e.size-1;p++){n=yu(e,0,p+1),r=yu(e,p+1),o=ml(Nc(n),t),i=ml(Nc(r),t);const d=Nc(gl(n,Sp(0,n.size)));a=ml(d,Nc(n));const h=Ol(r.shape,n.size),f=hl(Sp(0,r.size),h),m=gl(r,f);s=ml(Nc(m),Nc(r));const g=_l(a,s),v=_l(a,s),b=gl(o,i);c=gl(gl(b,g),v);const y=dc(c,u);u=Qu(y,c,u),l=Qu(y,ad([p]),l)}return l}($u(Oo(Rp(u),"int32"),As([]),256),s)}const p=n?wc(u,c):dc(u,c);return Oo(gl(p,255),"int32")}});const ph=Is({transform_:function(e,t,n="nearest",r="constant",a=0,s){const o=Es(e,"image","transform","float32"),i=Es(t,"transforms","transform","float32");re(4===o.rank,(()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`)),re(2===i.rank&&(i.shape[0]===o.shape[0]||1===i.shape[0])&&8===i.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),re(null==s||2===s.length,(()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`));const l={image:o,transforms:i},u={interpolation:n,fillMode:r,fillValue:a,outputShape:s};return ms.runKernel(Gr,l,u)}});const dh=Is({bandPart_:function(e,t,n){re(t%1==0,(()=>`bandPart(): numLower must be an integer, got ${t}.`)),re(n%1==0,(()=>`bandPart(): numUpper must be an integer, got ${n}.`));const r=Es(e,"a","bandPart");re(r.rank>=2,(()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`));const a=r.shape,[s,o]=r.shape.slice(-2);if(!(t<=s))throw new Error(`bandPart(): numLower (${t}) must not be greater than the number of rows (${s}).`);if(!(n<=o))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`);t<0&&(t=s),n<0&&(n=o);const i=fu(Sp(0,s,1,"int32"),[-1,1]),l=Sp(0,o,1,"int32"),u=_l(i,l),c=zc(wc(u,$l(+t,"int32")),hc(u,$l(-n,"int32"))),p=Xc([s,o],r.dtype);return fu(ed(hd(fu(r,[-1,s,o])).map((e=>Qu(c,e,p)))),a)}});const hh=Is({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,re(null!=e&&e.length>0,(()=>"Gram-Schmidt process: input must not be null, undefined, or empty"));const n=e[0].shape[0];for(let t=1;t<e.length;++t)re(e[t].shape[0]===n,(()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[t].shape[0]} vs. ${n})`))}else t=!0,e=Yp(e,e.shape[0],0).map((e=>Qp(e,[0])));re(e.length<=e[0].shape[0],(()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`));const n=[],r=e;for(let t=0;t<e.length;++t)n.push(ms.tidy((()=>{let e=r[t];if(t>0)for(let r=0;r<t;++r){const t=gl(Nc(gl(n[r],e)),n[r]);e=_l(e,t)}return ml(e,yd(e,"euclidean"))})));return t?ed(n,0):n}});function fh(e,t=!1){return ms.tidy((()=>{re(2===e.shape.length,(()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`));const n=e.shape[0],r=e.shape[1];let a=uc(n),s=Ao(e);const o=sd([[1]],[1,1]);let i=Ao(o);const l=n>=r?r:n;for(let e=0;e<l;++e){const t=s,l=i,u=a;[i,s,a]=ms.tidy((()=>{const t=yu(s,[e,e],[n-e,1]),l=yd(t),u=yu(s,[e,e],[1,1]),c=Qu(dc(u,0),sd([[-1]]),sd([[1]])),p=_l(u,gl(c,l)),d=ml(t,p);i=1===d.shape[0]?Ao(o):vu([o,yu(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);const h=Ec(ml(Yo(c,p),l)),f=yu(s,[e,0],[n-e,r]),m=gl(h,i),g=Zo(i);if(0===e)s=_l(f,Yo(m,Yo(g,f)));else{const t=_l(f,Yo(m,Yo(g,f)));s=vu([yu(s,[0,0],[e,r]),t],0)}const v=Zo(m),b=yu(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=_l(b,Yo(Yo(b,i),v));else{const t=_l(b,Yo(Yo(b,i),v));a=vu([yu(a,[0,0],[n,e]),t],1)}return[i,s,a]})),tl([t,l,u])}return!t&&n>r&&(a=yu(a,[0,0],[n,r]),s=yu(s,[0,0],[r,r])),[a,s]}))}const mh=Is({qr_:function(e,t=!1){if(re(e.rank>=2,(()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`)),2===e.rank)return fh(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce(((e,t)=>e*t)),r=hd(fu(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],s=[];r.forEach((e=>{const[n,r]=fh(e,t);a.push(n),s.push(r)}));return[fu(ed(a,0),e.shape),fu(ed(s,0),e.shape)]}}});var gh;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(gh||(gh={}));const vh=Is({computeWeightedLoss_:function(e,t,n=gh.SUM_BY_NONZERO_WEIGHTS){const r=Es(e,"losses","computeWeightedLoss");let a=null;null!=t&&(a=Es(t,"weights","computeWeightedLoss"));const s=null==a?r:gl(r,a);if(n===gh.NONE)return s;if(n===gh.SUM)return Nc(s);if(n===gh.MEAN){if(null==a)return qc(s);{const e=r.size/a.size,t=ml(Nc(s),Nc(a));return e>1?ml(t,$l(e)):t}}if(n===gh.SUM_BY_NONZERO_WEIGHTS){if(null==a)return ml(Nc(s),$l(r.size));{const e=gl(a,Kc(r.shape)),t=Oo(Nc(ap(e,$l(0))),"float32");return ml(Nc(s),t)}}throw Error(`Unknown reduction: ${n}`)}});const bh=Is({absoluteDifference_:function(e,t,n,r=gh.SUM_BY_NONZERO_WEIGHTS){const a=Es(e,"labels","absoluteDifference"),s=Es(t,"predictions","absoluteDifference");let o=null;null!=n&&(o=Es(n,"weights","absoluteDifference")),ae(a.shape,s.shape,"Error in absoluteDifference: ");const i=Pl(_l(a,s));return vh(i,o,r)}});const yh=Is({cosineDistance_:function(e,t,n,r,a=gh.SUM_BY_NONZERO_WEIGHTS){const s=Es(e,"labels","cosineDistance"),o=Es(t,"predictions","cosineDistance");let i=null;null!=r&&(i=Es(r,"weights","cosineDistance")),ae(s.shape,o.shape,"Error in cosineDistance: ");const l=$l(1),u=_l(l,Nc(gl(s,o),n,!0));return vh(u,i,a)}});const wh=Is({hingeLoss_:function(e,t,n,r=gh.SUM_BY_NONZERO_WEIGHTS){let a=Es(e,"labels","hingeLoss");const s=Es(t,"predictions","hingeLoss");let o=null;null!=n&&(o=Es(n,"weights","hingeLoss")),ae(a.shape,s.shape,"Error in hingeLoss: ");const i=$l(1);a=_l(gl($l(2),a),i);const l=$p(_l(i,gl(a,s)));return vh(l,o,r)}});const xh=Is({huberLoss_:function(e,t,n,r=1,a=gh.SUM_BY_NONZERO_WEIGHTS){const s=Es(e,"labels","huberLoss"),o=Es(t,"predictions","huberLoss");let i=null;null!=n&&(i=Es(n,"weights","huberLoss")),ae(s.shape,o.shape,"Error in huberLoss: ");const l=$l(r),u=Pl(_l(o,s)),c=Zc(u,l),p=_l(u,c),d=hl(gl($l(.5),bl(c)),gl(l,p));return vh(d,i,a)}});const kh=Is({logLoss_:function(e,t,n,r=1e-7,a=gh.SUM_BY_NONZERO_WEIGHTS){const s=Es(e,"labels","logLoss"),o=Es(t,"predictions","logLoss");let i=null;null!=n&&(i=Es(n,"weights","logLoss")),ae(s.shape,o.shape,"Error in logLoss: ");const l=$l(1),u=$l(r),c=Ec(gl(s,Cc(hl(o,u)))),p=gl(_l(l,s),Cc(hl(_l(l,o),u))),d=_l(c,p);return vh(d,i,a)}});const Ch=Is({meanSquaredError_:function(e,t,n,r=gh.SUM_BY_NONZERO_WEIGHTS){const a=Es(e,"labels","meanSquaredError"),s=Es(t,"predictions","meanSquaredError");let o=null;null!=n&&(o=Es(n,"weights","meanSquaredError")),ae(a.shape,s.shape,"Error in meanSquaredError: ");const i=Zp(a,s);return vh(i,o,r)}});const Sh=Is({sigmoidCrossEntropy_:function(e,t,n,r=0,a=gh.SUM_BY_NONZERO_WEIGHTS){let s=Es(e,"multiClassLabels","sigmoidCrossEntropy");const o=Es(t,"logits","sigmoidCrossEntropy");let i=null;if(null!=n&&(i=Es(n,"weights","sigmoidCrossEntropy")),ae(s.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const e=$l(r),t=$l(1),n=$l(.5);s=hl(gl(s,_l(t,e)),gl(n,e))}const l=function(e,t){const n=Es(e,"labels","sigmoidCrossEntropyWithLogits"),r=Es(t,"logits","sigmoidCrossEntropyWithLogits");ae(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const a=$p(r),s=gl(r,n),o=Sc(sc(Ec(Pl(r))));return hl(_l(a,s),o)}(s,o);return vh(l,i,a)}});const Eh=Is({softmaxCrossEntropy_:function(e,t,n,r=0,a=gh.SUM_BY_NONZERO_WEIGHTS){let s=Es(e,"onehotLabels","softmaxCrossEntropy");const o=Es(t,"logits","softmaxCrossEntropy");let i=null;if(null!=n&&(i=Es(n,"weights","softmaxCrossEntropy")),ae(s.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const e=$l(r),t=$l(1),n=$l(s.shape[1]);s=hl(gl(s,_l(t,e)),ml(e,n))}const l=function(e,t,n=-1){if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);const r=El(((e,t,r)=>{const a=Fc(t,[n],!0),s=_l(Oo(t,"float32"),a);r([e,s]);const o=Ec(gl(s,e));return{value:Nc(o,[n]),gradFunc:(e,t)=>{const[r,a]=t,s=Rc(e.shape,[n]);return[gl(fu(e,s),_l(Oo(r,"float32"),sc(a))),gl(fu(e,s),_l(sc(a),Oo(r,"float32")))]}}}));return r(e,t)}(s,o);return vh(l,i,a)}});const Th=Is({sparseFillEmptyRows_:function(e,t,n,r){const a=Es(e,"indices","sparseFillEmptyRows","int32"),s=Es(t,"values","sparseFillEmptyRows"),o=Es(n,"denseShape","sparseFillEmptyRows","int32"),i=Es(r,"defaultValue","sparseFillEmptyRows",s.dtype);if(2!==a.rank)throw new Error(`Indices should be Tensor2D but received shape\n        ${a.shape}`);if(1!==s.rank)throw new Error(`Values should be Tensor1D but received shape ${s.shape}`);if(1!==o.rank)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(0!==i.rank)throw new Error(`Default value should be a scalar but received shape ${i.shape}`);const l={indices:a,values:s,denseShape:o,defaultValue:i},u=ms.runKernel(Or,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}});const $h=Is({sparseReshape_:function(e,t,n){const r=Es(e,"inputIndices","sparseReshape","int32"),a=Es(t,"inputShape","sparseReshape","int32"),s=Es(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error(`Input indices should be Tensor2D but received shape\n        ${r.shape}`);if(1!==a.rank)throw new Error(`Input shape should be Tensor1D but received shape ${a.shape}`);if(1!==s.rank)throw new Error(`New shape should be Tensor1D but received shape ${s.shape}`);const o={inputIndices:r,inputShape:a,newShape:s},i=ms.runKernel(Ar,o);return{outputIndices:i[0],outputShape:i[1]}}});const Ih=Is({sparseSegmentMean_:function(e,t,n){const r=Es(e,"data","sparseSegmentMean"),a=Es(t,"indices","sparseSegmentMean","int32"),s=Es(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error(`Indices should be Tensor1D but received shape\n          ${a.shape}`);if(1!==s.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n          ${s.shape}`);const o={data:r,indices:a,segmentIds:s};return ms.runKernel(Mr,o)}});const Nh=Is({sparseSegmentSum_:function(e,t,n){const r=Es(e,"data","sparseSegmentSum"),a=Es(t,"indices","sparseSegmentSum","int32"),s=Es(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error(`Indices should be Tensor1D but received shape\n         ${a.shape}`);if(1!==s.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n         ${s.shape}`);const o={data:r,indices:a,segmentIds:s};return ms.runKernel(_r,o)}});const Oh=Is({stringNGrams_:function(e,t,n,r,a,s,o,i){const l=Es(e,"data","stringNGrams","string");if("string"!==l.dtype)throw new Error("Data must be of datatype string");if(1!==l.shape.length)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=Es(t,"dataSplits","stringNGrams");if("int32"!==u.dtype)throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:r,leftPad:a,rightPad:s,padWidth:o,preserveShortSequences:i},p={data:l,dataSplits:u},d=ms.runKernel(Br,p,c);return{nGrams:d[0],nGramsSplits:d[1]}}});const Ah=Is({stringSplit_:function(e,t,n=!0){const r=Es(e,"input","stringSplit","string"),a=Es(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(0!==a.rank)throw new Error(`Delimiter should be a scalar but received shape ${a.shape}`);const s={skipEmpty:n},o={input:r,delimiter:a},i=ms.runKernel(Fr,o,s);return{indices:i[0],values:i[1],shape:i[2]}}});const Mh=Is({stringToHashBucketFast_:function(e,t){const n=Es(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const a={input:n};return ms.runKernel(zr,a,r)}}),_h={fft:qp,ifft:Xp,rfft:Jp,irfft:Kp},Rh={hammingWindow:Bd,hannWindow:Fd,frame:zd,stft:Vd},Ph={flipLeftRight:Hd,grayscaleToRGB:jd,resizeNearestNeighbor:uh,resizeBilinear:lh,rotateWithOffset:Ud,cropAndResize:Wd,nonMaxSuppression:qd,nonMaxSuppressionAsync:rh,nonMaxSuppressionWithScore:ah,nonMaxSuppressionWithScoreAsync:sh,nonMaxSuppressionPadded:oh,nonMaxSuppressionPaddedAsync:ih,threshold:ch,transform:ph},Dh={bandPart:dh,gramSchmidt:hh,qr:mh},Lh={absoluteDifference:bh,computeWeightedLoss:vh,cosineDistance:yh,hingeLoss:wh,huberLoss:xh,logLoss:kh,meanSquaredError:Ch,sigmoidCrossEntropy:Sh,softmaxCrossEntropy:Eh},Bh={sparseFillEmptyRows:Th,sparseReshape:$h,sparseSegmentMean:Ih,sparseSegmentSum:Nh},Fh={stringNGrams:Oh,stringSplit:Ah,stringToHashBucketFast:Mh},zh={sgd:Vl.sgd,momentum:Vl.momentum,adadelta:Vl.adadelta,adagrad:Vl.adagrad,rmsprop:Vl.rmsprop,adamax:Vl.adamax,adam:Vl.adam},Vh="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:e=>e();function Wh(){return new Promise((e=>Vh((()=>e()))))}function Hh(e,t){const n=e[0].length;e.forEach(((e,t)=>{re(e.length===n,(()=>`Error in concat${n}D: rank of tensors[${t}] must be the same as the rank of the rest (${n})`))})),re(t>=0&&t<n,(()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`));const r=e[0];e.forEach(((e,a)=>{for(let s=0;s<n;s++)re(s===t||e[s]===r[s],(()=>`Error in concat${n}D: Shape of tensors[${a}] (${e}) does not match the shape of the rest (${r}) along the non-concatenated axis ${a}.`))}))}function jh(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}const Uh=30;function Gh(e){return e<=Uh?e:Me(e,Math.floor(Math.sqrt(e)))}function qh(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}function Xh(e,t,n,r=!0){let a=[];if(r)a=a.concat(t.slice(0)),a.push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);const n=t.length;for(let r=0;r<n;++r)a=a.concat([e[r+1]/t[r],t[r]]);a=a.concat(e.slice(n+1))}return a}function Kh(e,t,n=!0){const r=[];if(n){r.push(t);for(let n=t+1;n<e;++n)n<=2*t?(r.push(n),r.push(n-(t+1))):r.push(n)}else{const n=[],a=[];for(let r=1;r<e;++r)r>=2*t+1||r%2==1?a.push(r):n.push(r);r.push(...n),r.push(0),r.push(...a)}return r}function Yh(e,t,n,r=!0){const a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(let n=1;n<e.length;++n)n<=t.length?r?a.push(t[n-1]*e[n]):a.push(e[n]/t[n-1]):a.push(e[n]);return a}function Jh(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function Zh(e,t,n){const r=e.slice(0,1);for(let a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}const Qh=1.7580993408473768,ef=1.0507009873554805,tf=.3275911,nf=.254829592,rf=-.284496736,af=1.421413741,sf=-1.453152027,of=1.061405429;function lf(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function uf(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function cf(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let t=0;t<e.length;t+=4)n[Math.floor(t/4)]=e[t],r[Math.floor(t/4)]=e[t+1];return{real:n,imag:r}}function pf(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let t=2;t<e.length;t+=4)n[Math.floor(t/4)]=e[t],r[Math.floor(t/4)]=e[t+1];return{real:n,imag:r}}function df(e,t){return{real:e[2*t],imag:e[2*t+1]}}function hf(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function ff(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let a=0;a<Math.ceil(e/2);a++){const s=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(s),r[a]=Math.sin(s)}return{real:n,imag:r}}function mf(e,t,n){const r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}const gf="->",vf=/->/g;function bf(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(vf,"").length)/gf.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("->").');const[r,a]=e.split(gf);re(-1===r.indexOf("..."),(()=>'The ellipsis notation ("...") is not supported yet.'));const s=r.split(","),o=s.length;if(t!==o)throw new Error(`Expected ${o} input tensors, received ${t}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const i=[];for(let e=0;e<a.length;++e){const t=a[e];if(!s.some((e=>-1!==e.indexOf(t))))throw new Error(`Output subscripts contain the label ${t} not present in the input subscripts.`);-1===i.indexOf(t)&&i.push(t)}for(let e=0;e<r.length;++e){const t=r[e];-1===i.indexOf(t)&&","!==t&&i.push(t)}const l=new Array(s.length);for(let e=0;e<o;++e){if(new Set(s[e].split("")).size!==s[e].length)throw new Error(`Found duplicate axes in input component ${s[e]}. Support for duplicate axes in input is not implemented yet.`);l[e]=[];for(let t=0;t<s[e].length;++t)l[e].push(i.indexOf(s[e][t]))}const u=i.length,c=[];for(let e=a.length;e<u;++e)c.push(e);return{allDims:i,summedDims:c,idDims:l}}function yf(e,t){let n=new Array(e);n.fill(-1);for(let e=0;e<t.length;++e)n[t[e]]=e;const r=[];for(let t=0;t<e;++t)-1===n[t]&&r.push(t);return n=n.filter((e=>-1!==e)),{permutationIndices:n,expandDims:r}}function wf(e,t,n){const r=new Array(e);for(let e=0;e<n.length;++e){const a=n[e].shape;for(let n=0;n<t[e].length;++n)void 0===r[t[e][n]]?r[t[e][n]]=a[n]:re(r[t[e][n]]===a[n],(()=>`Expected dimension ${r[t[e][n]]} at axis ${n} of input shaped ${JSON.stringify(a)}, but got dimension ${a[n]}`))}}function xf(e,t){const n=e,r=[];let a=0;0===e.length&&n.push(-1),a=e.length+1;for(let e=0;e<a;++e)r.push([]);const s=[];for(let e=0;e<n.length;++e){const a=Cf(t,n[e]);for(const t of a)-1===s.indexOf(t)&&(r[e].push(t),s.push(t))}return{path:n,steps:r}}function kf(e){return e.every(((e,t)=>e===t))}function Cf(e,t){const n=[];for(let r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function Sf(e,t,n=0){let r=[];if("number"==typeof t)re(e.shape[n]%t==0,(()=>"Number of splits must evenly divide the axis.")),r=new Array(t).fill(e.shape[n]/t);else{const a=t.reduce(((e,t)=>(-1===t&&(e+=1),e)),0);re(a<=1,(()=>"There should be only one negative value in split array."));const s=t.indexOf(-1);if(-1!==s){const r=t.reduce(((e,t)=>t>0?e+t:e));t[s]=e.shape[n]-r}re(e.shape[n]===t.reduce(((e,t)=>e+t)),(()=>"The sum of sizes must match the size of the axis dimension.")),r=t}return r}function Ef(e){return`Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ${e}`}function Tf(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function $f(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}function If(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function Nf(e,t){return`size ${e} must be non-negative, not ${t}`}function Of(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Af(e,t){return`Input to reshape is a SparseTensor with ${ie(e)}\n  dense values, but the requested shape requires a multiple of ${ie(t)}. inputShape=${e} outputShape= ${t}`}function Mf(e,t){return`Input to reshape is a tensor with ${ie(e)} dense values, but the requested shape has ${ie(t)}. inputShape=${e} outputShape=${t}`}function _f(){return"segment ids must be >= 0"}function Rf(){return"segment ids are not increasing"}function Pf(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function Df(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}function Lf(e,t){let n,r=!1;for(e<=Uh?(n=e,r=!0):n=Me(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Me(e,n+1);return n}function Bf(e,t,n){const r=[],a=e.length;for(let s=0;s<a;s++)s!==t?r.push(e[s]):r.push(n);return r}function Ff(e,t,n,r){const a=t.shape.length,s=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${r}`);if(r<0&&(r+=a),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (\n    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let n=0;n<r;++n)if(e.shape[n]!==t.shape[n])throw new Error(`x.shape[${n}]: ${e.shape[n]} should be equal to indices.shape[${n}]: ${t.shape[n]}.`);const o=e.shape[n],i=[];let l=1,u=1,c=1;for(let t=0;t<r;++t)i.push(e.shape[t]),l*=e.shape[t];for(let t=r;t<n;t++)i.push(e.shape[t]),u*=e.shape[t];for(let e=r;e<a;e++)i.push(t.shape[e]);for(let t=n+1;t<s;t++)i.push(e.shape[t]),c*=e.shape[t];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:o,outputShape:i}}function zf(e){try{return e.map((e=>Da(e)))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function Vf(e){return e.map((e=>Pa(e)))}const Wf={kernelName:Je,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gl(e,td(Oo(n,"float32"),-1))}}},Hf={kernelName:Ze,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=bl(Oo(n,"float32")),r=vl(_l($l(1),t));return Ec(ml(e,r))}}}},jf={kernelName:Qe,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=vl(_l(bl(Oo(n,"float32")),1));return ml(e,t)}}}},Uf={kernelName:et,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=ni(n.shape,r.shape);return{a:()=>{let t=e;const r=ti(n.shape,a);return r.length>0&&(t=Nc(t,r)),fu(t,n.shape)},b:()=>{let t=e;const n=ti(r.shape,a);return n.length>0&&(t=Nc(t,n)),fu(t,r.shape)}}}},Gf={kernelName:tt,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach(((t,r)=>{n[r]=()=>e.clone()})),n}},qf={kernelName:at,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yl(n)}}},Xf={kernelName:st,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>yl(n)}}},Kf={kernelName:ot,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ml(e,vl(_l($l(1),bl(Oo(n,"float32")))))}}},Yf={kernelName:it,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=vl(hl($l(1),bl(Oo(n,"float32"))));return ml(e,t)}}}},Jf={kernelName:ct,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=ni(n.shape,r.shape);return{a:()=>{const t=hl(bl(n),bl(r));let s=gl(e,ml(r,t));const o=ti(n.shape,a);return o.length>0&&(s=Nc(s,o)),fu(s,n.shape)},b:()=>{const t=hl(bl(n),bl(r));let s=Ec(gl(e,ml(n,t)));const o=ti(r.shape,a);return o.length>0&&(s=Nc(s,o)),fu(s,r.shape)}}}},Zf={kernelName:lt,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ml(e,hl(bl(Oo(n,"float32")),1))}}},Qf={kernelName:ut,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ml(e,_l($l(1),bl(Oo(n,"float32"))))}}};const em=Is({avgPool3dGrad_:function(e,t,n,r,a,s){const o=Es(e,"dy","avgPool3dGrad"),i=Es(t,"input","avgPool3dGrad");let l=o,u=i,c=!1;4===i.rank&&(c=!0,l=fu(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),u=fu(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),re(5===l.rank,(()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`)),re(5===u.rank,(()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`)),hu("avgPool3dGrad",a,s);const p={dy:l,input:u},d={filterSize:n,strides:r,pad:a,dimRoundingMode:s},h=ms.runKernel(ft,p,d);return c?fu(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),tm={kernelName:ht,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:a,strides:s,pad:o,dimRoundingMode:i}=n;return{x:()=>em(e,r,a,s,o,i)}}};const nm=Is({avgPoolGrad_:function(e,t,n,r,a){const s=Es(e,"dy","avgPoolGrad"),o=Es(t,"input","avgPoolGrad");re(o.rank===s.rank,(()=>`Rank of input (${o.rank}) does not match rank of dy (${s.rank})`));let i=o,l=s,u=!1;3===o.rank&&(u=!0,i=fu(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=fu(s,[1,s.shape[0],s.shape[1],s.shape[2]])),re(4===l.rank,(()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`)),re(4===i.rank,(()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${i.rank}.`));const c={dy:l,input:i},p={filterSize:n,strides:r,pad:a},d=ms.runKernel(dt,c,p);return u?fu(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),rm={kernelName:pt,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:a,strides:s,pad:o}=n;return{x:()=>nm(e,r,a,s,o)}}},am={kernelName:mt,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[r,a]=t,{transposeA:s,transposeB:o}=n;return s||o?!s&&o?{a:()=>Yo(e,a,!1,!1),b:()=>Yo(e,r,!0,!1)}:s&&!o?{a:()=>Yo(a,e,!1,!0),b:()=>Yo(r,e,!1,!1)}:{a:()=>Yo(a,e,!0,!0),b:()=>Yo(e,r,!0,!0)}:{a:()=>Yo(e,a,!1,!0),b:()=>Yo(r,e,!0,!1)}}},sm={kernelName:gt,gradFunc:(e,t,n)=>{const{blockShape:r,crops:a}=n;return{x:()=>dp(e,r,a)}}},om={kernelName:bt,gradFunc:(e,t,n)=>{const r=n,a=r.inputShape,s=r.shape,o=Array.from(s);for(let e=a.length-1;e>=0;e--)if(a[e]===s[e])o[e]=1;else if(1!==a[e])throw new Error(`broadcastTo(): [${a}] cannot be broadcast to [${s}].`);const i=[];for(let e=0;e<o.length;e++)o[e]>1&&i.push(e);return{x:()=>Nc(e,i,!0)}}},im={kernelName:wt,gradFunc:e=>({x:()=>e.clone()})},lm={kernelName:xt,gradFunc:e=>({x:()=>yl(e)})},um={kernelName:kt,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{clipValueMin:a,clipValueMax:s}=n;return{x:()=>Qu(zc(hc(r,a),wc(r,s)),e,yl(e))}}},cm={kernelName:St,inputsToSave:["x"],gradFunc:Wf.gradFunc},pm={kernelName:Et,saveAllInputs:!0,gradFunc:(e,t,n)=>{const r=t.map((e=>e.shape)),{axis:a}=n,s=ve(a,t[0].shape)[0],o=r.map((e=>e[s]));return Yp(e,o,s).map((e=>()=>e))}},dm={kernelName:Tt,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,a]=t,{dilations:s,strides:o,pad:i,dataFormat:l}=n;return re(cu(s),(()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`)),{x:()=>Bu(r.shape,e,a,o,i,l),filter:()=>Id(r,e,a.shape,o,i,l)}}},hm={kernelName:It,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[r,a]=t,{strides:s,pad:o,dataFormat:i,dimRoundingMode:l}=n;return{dy:()=>Du(e,a,s,o,i,1,l),filter:()=>Id(e,r,a.shape,s,o,i,l)}}};const fm=Is({conv3DBackpropFilter_:function(e,t,n,r,a){let s=e;4===e.rank&&(s=fu(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let o=t;4===o.rank&&(o=fu(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),re(5===s.rank,(()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`)),re(5===o.rank,(()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`)),re(5===n.length,(()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`)),re(s.shape[4]===n[3],(()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`)),re(o.shape[4]===n[4],(()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`));const i={x:s,dy:o},l={strides:r,pad:a,filterShape:n};return ms.runKernel(Ot,i,l)}}),mm={kernelName:Nt,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:a,pad:s}=n;re(cu(r),(()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`));const[o,i]=t;return{x:()=>Vu(o.shape,e,i,a,s),filter:()=>fm(o,e,i.shape,a,s)}}},gm={kernelName:Mt,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gl(Ec(zp(Oo(n,"float32"))),e)}}},vm={kernelName:_t,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gl(Vp(Oo(n,"float32")),e)}}},bm={kernelName:Pt,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:a,exclusive:s,reverse:o}=n;return{x:()=>{const t=Dc([a],r.rank);let n=Gu(e,a,s,!o);return null!=t&&(n=Zo(n,t)),n}}}},ym={kernelName:Ft,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:a,pad:s,dimRoundingMode:o}=n,i=null==r?[1,1]:r;re(cu(i),(()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`));const[l,u]=t;return re(4===l.rank,(()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`)),re(4===u.rank,(()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`)),re(l.shape[3]===u.shape[2],(()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`)),re(pu(a,i),(()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${a} and dilations '${i}'.`)),hu("depthwiseConv2d",s,o),{x:()=>Pd(l.shape,e,u,a,s,i,o),filter:()=>Rd(l,e,u.shape,a,s,i,o)}}},wm={kernelName:Ht,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,a]=t,s={x:r,filter:a,dy:e},o={x:r,filter:a,dy:e};return{x:()=>ms.runKernel(jt,s,n),filter:()=>ms.runKernel(Ut,o,n)}}},xm={kernelName:Xt,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,r={dy:e,y:n};return{x:()=>ms.runKernel(Kt,r)}}},km={kernelName:Yt,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=gl(sc(Ec(bl(n))),2/Math.sqrt(Math.PI));return{x:()=>gl(e,r)}}},Cm={kernelName:Zt,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gl(e,n)}}},Sm={kernelName:Qt,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>fu(e,n.shape)}}},Em={kernelName:en,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gl(e,sc(n))}}},Tm={kernelName:an,gradFunc:e=>({x:()=>yl(e)})},$m={kernelName:sn,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=ni(n.shape,r.shape);return{a:()=>{const t=ml(e,Oo(r,"float32")),s=ti(n.shape,a);return s.length>0?fu(Nc(t,s),n.shape):t},b:()=>{let t=gl(e,Oo(n,"float32"));const s=ti(r.shape,a);s.length>0&&(t=fu(Nc(t,s),r.shape));const o=bl(r);return Ec(ml(t,Oo(o,"float32")))}}}},Im={kernelName:on,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:r}=n,[a,s,o,i]=t,l=null==i?$l(1):i,u=ti(s.shape,a.shape),c=[];if(1===s.rank){for(let e=0;e<a.shape.length-1;++e)c.push(a.shape[e]);c.push(1)}const p=_l(a,s),d=gl(e,l),h=Pp(hl(o,$l(r))),f=gl(gl(gl(h,h),h),$l(-.5));return{x:()=>1===s.rank?fu(gl(gl(e,lc(fu(h,[1,1,1,s.shape[0]]),c)),l),a.shape):fu(gl(gl(e,h),l),a.shape),mean:()=>{let e=gl(gl(h,$l(-1)),d);return 1===s.rank&&(e=Nc(e,u)),fu(e,s.shape)},variance:()=>{let e=gl(gl(f,p),d);return 1===s.rank&&(e=Nc(e,u)),fu(e,s.shape)},scale:()=>{const t=gl(p,h);let n=gl(e,t);return 1===s.rank&&(n=Nc(n,u)),fu(n,s.shape)},offset:()=>{let t=e;return 1===s.rank&&(t=Nc(t,u)),fu(t,s.shape)}}}},Nm={kernelName:ln,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[r,a]=t,{axis:s}=n,o=ve(s,r.shape)[0];return{x:()=>{const t=r.shape,n=a.size,i=t.slice(0,o),l=i.length,u=t.slice(s,t.length).slice(1),c=u.length,p=Om(0,l),d=Om(l+1,l+1+c),h=Am([i,[n],u]),f=fu(e,h),m=fu(a,[n]),g=Am([[l],p,d]),v=Zo(f,g);let b=dd(v,m,r.shape[o]);const y=Lc(g);return b=Zo(b,y),b},indices:()=>a}}};function Om(e,t){const n=[];for(let r=e;r<t;++r)n.push(r);return n}function Am(e){const t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}const Mm={kernelName:pn,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>yl(n),b:()=>yl(r)}}},_m={kernelName:dn,gradFunc:e=>({x:()=>Oo(e,"float32")})},Rm={kernelName:mn,gradFunc:e=>({x:()=>yl(e)})},Pm={kernelName:gn,gradFunc:e=>({x:()=>yl(e)})},Dm={kernelName:vn,gradFunc:e=>({x:()=>yl(e)})},Lm={kernelName:bn,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{alpha:a}=n,s=dc(r,0);return{x:()=>Qu(s,e,gl(e,a))}}},Bm={kernelName:Cn,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ml(e,hl(n,1))}}},Fm={kernelName:kn,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ml(e,Oo(n,"float32"))}}},zm={kernelName:$n,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{axis:a}=n;return{logits:()=>{const t=sc(r);return _l(e,gl(Nc(e,a,!0),t))}}}};const Vm=Is({localResponseNormalizationBackprop_:function(e,t,n,r=5,a=1,s=1,o=.5){const i={x:e,y:t,dy:n},l={depthRadius:r,bias:a,alpha:s,beta:o};return ms.runKernel(Nn,i,l)}}),Wm={kernelName:In,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,a]=t,{depthRadius:s,bias:o,alpha:i,beta:l}=n;return{x:()=>Vm(r,a,e,s,o,i,l)}}};function Hm(e,t,n,r){return t.rank<n.rank&&(t=fu(t,Rc(t.shape,r))),e.rank<n.rank&&(e=fu(e,Rc(e.shape,r))),{x:()=>gl(e,Oo(Zu(n,t),e.dtype))}}const jm={kernelName:On,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{reductionIndices:a}=r,s=t[0],o=Hm(e,t[1],s,ve(a,s.shape));return{x:()=>o.x()}}},Um={kernelName:An,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>gl(e,Oo(hc(n,r),"float32")),b:()=>gl(e,Oo(yc(n,r),"float32"))}}};const Gm=Is({maxPool3dGrad_:function(e,t,n,r,a,s,o){const i=Es(e,"dy","maxPool3dGrad"),l=Es(t,"input","maxPool3dGrad"),u=Es(n,"output","maxPool3dGrad");let c=i,p=l,d=u,h=!1;4===l.rank&&(h=!0,c=fu(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),p=fu(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=fu(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),re(5===c.rank,(()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`)),re(5===p.rank,(()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${p.rank}.`)),re(5===d.rank,(()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`)),hu("maxPool3dGrad",s,o);const f={dy:c,input:p,output:d},m={filterSize:r,strides:a,pad:s,dimRoundingMode:o},g=ms.runKernel(Pn,f,m);return h?fu(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),qm={kernelName:Rn,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,a]=t,{filterSize:s,strides:o,pad:i,dimRoundingMode:l}=n;return{x:()=>Gm(e,r,a,s,o,i,l)}}};const Xm=Is({maxPoolGrad_:function(e,t,n,r,a,s,o){const i=Es(e,"dy","maxPoolGrad"),l=Es(t,"input","maxPoolGrad"),u=Es(n,"output","maxPoolGrad");re(l.rank===i.rank,(()=>`Rank of input (${l.rank}) does not match rank of dy (${i.rank})`)),re(4===i.rank,(()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${i.rank}.`)),re(4===l.rank,(()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`)),hu("maxPoolGrad",s,o);const c={dy:i,input:l,output:u},p={filterSize:r,strides:a,pad:s,dimRoundingMode:o};return ms.runKernel(_n,c,p)}}),Km={kernelName:Mn,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,a]=t,{filterSize:s,strides:o,pad:i}=n;return{x:()=>Xm(e,r,a,s,o,i)}}},Ym={kernelName:zn,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:a}=n,s=a.map((e=>e[0]));return{x:()=>yu(e,s,r.shape)}}},Jm={kernelName:Zn,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:a}=n,s=a.map((e=>e[0]));return{x:()=>yu(e,s,r.shape)}}},Zm={kernelName:er,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,r,a]=t,s=n,o=r,i=ni(s.shape,o.shape);return{a:()=>{const t=Oo(o,"float32");let n=gl(e,gl(t,Ml(s,_l(t,$l(1)))));const r=ti(s.shape,i);return r.length>0&&(n=Nc(n,r)),fu(n,s.shape)},b:()=>{const t=dc(s,0),n=Qu(t,Cc(s),yl(s));let r=gl(e,gl(a,n));const l=ti(o.shape,i);return l.length>0&&(r=Nc(r,l)),fu(r,o.shape)}}}},Qm={kernelName:br,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=dc(n,$l(0)),r=$l(Qh),a=$l(ef),s=gl(e,a),o=gl(gl(e,r),sc(Oo(n,"float32")));return Qu(t,s,o)}}}},eg={kernelName:$r,gradFunc:(e,t,n)=>{const{blockShape:r,paddings:a}=n;return{x:()=>ku(e,r,a)}}},tg={kernelName:Ir,gradFunc:(e,t,n)=>{const{axis:r}=n;return{x:()=>vu(e,r)}}};const ng=[Wf,Hf,jf,Uf,Gf,qf,Xf,Kf,Yf,Jf,Zf,Qf,tm,rm,am,sm,om,im,lm,um,cm,pm,hm,dm,mm,gm,vm,bm,ym,wm,{kernelName:Gt,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=ni(n.shape,r.shape);return{a:()=>{const t=ml(e,Oo(r,"float32")),s=ti(n.shape,a);return s.length>0?fu(Nc(t,s),n.shape):t},b:()=>{let t=gl(e,Oo(n,"float32"));const s=ti(r.shape,a);s.length>0&&(t=fu(Nc(t,s),r.shape));const o=bl(r);return Ec(ml(t,Oo(o,"float32")))}}}},xm,km,Cm,Sm,Em,$m,Tm,Im,Nm,Mm,_m,Rm,Pm,Dm,Lm,Bm,Fm,zm,Wm,jm,jm,Um,qm,Km,{kernelName:Ln,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:a}=n,s=ve(a,r.shape),o=ie(_c(r.shape,s)[1]);return{x:()=>{const t=r.shape.slice();s.forEach((e=>{t[e]=1}));const n=fu(e,t);return ml(gl(n,Kc(r.shape,"float32")),o)}}}},{kernelName:Bn,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{axis:a}=r,[s,o]=t,i=Hm(e,o,s,ve(a,s.shape));return{x:()=>i.x()}}},{kernelName:Fn,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>gl(e,Oo(wc(n,r),"float32")),b:()=>gl(e,Oo(dc(n,r),"float32"))}}},Ym,{kernelName:Vn,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=ni(n.shape,r.shape);return{a:()=>{const t=ti(n.shape,a);return t.length>0?fu(Nc(e,t),n.shape):e},b:()=>{const t=gl(e,Ec(cc(ml(n,r)))),s=ti(r.shape,a);return s.length>0?fu(Nc(t,s),r.shape):t}}}},{kernelName:Hn,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=ni(n.shape,r.shape);return{a:()=>{const t=gl(e,Oo(r,"float32")),s=ti(n.shape,a);return s.length>0?fu(Nc(t,s),n.shape):t},b:()=>{const t=gl(e,Oo(n,"float32")),s=ti(r.shape,a);return s.length>0?fu(Nc(t,s),r.shape):t}}}},{kernelName:jn,gradFunc:e=>({x:()=>Ec(e)})},{kernelName:Yn,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>Xc(n.shape,"float32")}}},{kernelName:Kn,gradFunc:e=>({x:()=>yl(e)})},{kernelName:Jn,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:r}=n;return hd(e,r).map((e=>()=>e))}},Jm,Jm,Zm,{kernelName:tr,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,r]=t,a=dc(n,0);return{x:()=>Qu(a,e,gl(e,r)),alpha:()=>{let t=Qu(a,yl(e),gl(e,n));const s=ti(r.shape,e.shape);return s.length>0&&(t=Nc(t,s)),fu(t,r.shape)}}}},{kernelName:sr,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ml(e,Ec(bl(n)))}}},{kernelName:dr,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=gl(wc(n,6),td(n));return{x:()=>gl(e,Oo(r,"float32"))}}},{kernelName:or,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gl(e,Oo(td(n),"float32"))}}},{kernelName:ir,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>fu(e,n.shape)}}},{kernelName:cr,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,a={dy:e,images:r};return{images:()=>ms.runKernel(pr,a,n)}}},{kernelName:lr,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,a={dy:e,images:r};return{images:()=>ms.runKernel(ur,a,n)}}},{kernelName:hr,gradFunc:(e,t,n)=>{const{dims:r}=n,a=ve(r,e.shape);return{x:()=>Np(e,a)}}},{kernelName:fr,gradFunc:e=>({x:()=>yl(e)})},{kernelName:mr,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ec(ml(e,gl(Ml(n,1.5),2)))}}},{kernelName:vr,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>Oo(yl(n),"float32"),t:()=>gl(e,Oo(n,e.dtype)),e:()=>gl(e,Oo(Vc(n),e.dtype))}}},Qm,{kernelName:Cr,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gl(e,gl(n,_l($l(1),n)))}}},{kernelName:kr,gradFunc:e=>({x:()=>yl(e)})},{kernelName:wr,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gl(Hu(Oo(n,"float32")),e)}}},{kernelName:xr,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gl(ju(Oo(n,"float32")),e)}}},{kernelName:yr,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{begin:a,size:s}=n,o=r.shape,[i,l]=Ii(r,a,s),u=[];for(let t=0;t<e.rank;t++)u.push([i[t],o[t]-i[t]-l[t]]);return{x:()=>ip(e,u)}}},{kernelName:Nr,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{dim:a}=n,s=gl(e,r);return{logits:()=>_l(s,gl(Nc(s,[a],true),r))}}},{kernelName:Sr,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gl(e,bu(n))}}},eg,eg,tg,tg,{kernelName:Er,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ml(e,gl(vl(Oo(n,"float32")),2))}}},{kernelName:Pr,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=$l(2);return{a:()=>gl(e,gl(a,_l(n,r))),b:()=>gl(e,gl(a,_l(r,n)))}}},{kernelName:Dr,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gl(e,gl(Oo(n,"float32"),2))}}},{kernelName:Zr,gradFunc:e=>({x:()=>yl(e)})},{kernelName:Vr,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=ni(n.shape,r.shape);return{a:()=>{let t=e;const r=ti(n.shape,a);return r.length>0&&(t=Nc(t,r)),fu(t,n.shape)},b:()=>{let t=e;const n=ti(r.shape,a);return n.length>0&&(t=Nc(t,n)),fu(Ec(t),r.shape)}}}},{kernelName:Tr,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,a=r.shape.slice(),{axis:s}=n;ve(s,r.shape).forEach((e=>{a[e]=1}));const o=fu(e,a),i=gl(o,Kc(r.shape,"float32"));return{x:()=>i}}},{kernelName:Wr,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ml(e,bl(Hu(n)))}}},{kernelName:Hr,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gl(_l($l(1),bl(n)),e)}}},{kernelName:jr,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{reps:a}=n;return{x:()=>{let t=yl(r);if(1===r.rank)for(let n=0;n<a[0];++n)t=hl(t,yu(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<a[0];++n)for(let s=0;s<a[1];++s)t=hl(t,yu(e,[n*r.shape[0],s*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<a[0];++n)for(let s=0;s<a[1];++s)for(let o=0;o<a[2];++o)t=hl(t,yu(e,[n*r.shape[0],s*r.shape[1],o*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);for(let n=0;n<a[0];++n)for(let s=0;s<a[1];++s)for(let o=0;o<a[2];++o)for(let i=0;i<a[3];++i)t=hl(t,yu(e,[n*r.shape[0],s*r.shape[1],o*r.shape[2],i*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},{kernelName:qr,gradFunc:(e,t,n)=>{const r=n,{perm:a}=r,s=Lc(a);return{x:()=>Zo(e,s)}}},{kernelName:Kr,gradFunc:(e,t,n)=>{const r=n,{axis:a}=r;return{value:()=>ed(e,a)}}},{kernelName:Yr,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>function(e,t){const n=Dl(t,yl(t)),r=pc(e,n);let a=hc(t,$l(0,"int32"));const s=r.rank-a.rank;for(let e=0;e<s;++e)a=oc(a,e+1);a=zc(a,Kc(r.shape,"bool"));const o=yl(r);return Qu(a,r,o)}(e,n)}}},{kernelName:Jr,gradFunc:e=>({x:()=>yl(e)})}];for(const e of ng)da(e);let rg;function ag(){return null==rg&&(rg=pl().epsilon()),rg}Ya().prototype.abs=function(){return this.throwIfDisposed(),Pl(this)},Ya().prototype.acos=function(){return this.throwIfDisposed(),Wl(this)},Ya().prototype.acosh=function(){return this.throwIfDisposed(),Hl(this)},Ya().prototype.add=function(e){return this.throwIfDisposed(),hl(this,e)},Ya().prototype.all=function(e,t){return this.throwIfDisposed(),Ul(this,e,t)},Ya().prototype.any=function(e,t){return this.throwIfDisposed(),Gl(this,e,t)},Ya().prototype.argMax=function(e){return this.throwIfDisposed(),ql(this,e)},Ya().prototype.argMin=function(e){return this.throwIfDisposed(),Xl(this,e)},Ya().prototype.asScalar=function(){return this.throwIfDisposed(),re(1===this.size,(()=>"The array must have only 1 element.")),fu(this,[])},Ya().prototype.asType=function(e){return this.throwIfDisposed(),Oo(this,e)},Ya().prototype.as1D=function(){return this.throwIfDisposed(),fu(this,[this.size])},Ya().prototype.as2D=function(e,t){return this.throwIfDisposed(),fu(this,[e,t])},Ya().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),fu(this,[e,t,n])},Ya().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),fu(this,[e,t,n,r])},Ya().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),fu(this,[e,t,n,r,a])},Ya().prototype.asin=function(){return this.throwIfDisposed(),Kl(this)},Ya().prototype.asinh=function(){return this.throwIfDisposed(),Yl(this)},Ya().prototype.atan=function(){return this.throwIfDisposed(),Jl(this)},Ya().prototype.atan2=function(e){return this.throwIfDisposed(),Zl(this,e)},Ya().prototype.atanh=function(){return this.throwIfDisposed(),Ql(this)},Ya().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),mu(this,e,t,n,r)},Ya().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),ku(this,e,t)},Ya().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),Cu(this,e,t,n,r,a)},Ya().prototype.broadcastTo=function(e){return this.throwIfDisposed(),Nu(this,e)},Ya().prototype.cast=function(e){return this.throwIfDisposed(),Oo(this,e)},Ya().prototype.ceil=function(){return this.throwIfDisposed(),Ou(this)},Ya().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Au(this,e,t)},Ya().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof Ka&&(e=[e]),vu([this,...e],t)},Ya().prototype.conv1d=function(e,t,n,r,a,s){return this.throwIfDisposed(),Lu(this,e,t,n,r,a,s)},Ya().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),Fu(this,e,t,n,r,a)},Ya().prototype.conv2d=function(e,t,n,r,a,s){return this.throwIfDisposed(),Du(this,e,t,n,r,a,s)},Ya().prototype.cos=function(){return this.throwIfDisposed(),Hu(this)},Ya().prototype.cosh=function(){return this.throwIfDisposed(),ju(this)},Ya().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),Uu(this,e,t,n)},Ya().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),Gu(this,e,t,n)},Ya().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Xu(this,e,t)},Ya().prototype.depthwiseConv2d=function(e,t,n,r,a,s){return this.throwIfDisposed(),Ku(this,e,t,n,r,a,s)},Ya().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),Ju(this,e,t,n,r,a)},Ya().prototype.divNoNan=function(e){return this.throwIfDisposed(),ec(this,e)},Ya().prototype.div=function(e){return this.throwIfDisposed(),ml(this,e)},Ya().prototype.dot=function(e){return this.throwIfDisposed(),tc(this,e)},Ya().prototype.elu=function(){return this.throwIfDisposed(),rc(this)},Ya().prototype.equal=function(e){return this.throwIfDisposed(),Zu(this,e)},Ya().prototype.erf=function(){return this.throwIfDisposed(),ac(this)},Ya().prototype.exp=function(){return this.throwIfDisposed(),sc(this)},Ya().prototype.expandDims=function(e){return this.throwIfDisposed(),oc(this,e)},Ya().prototype.expm1=function(){return this.throwIfDisposed(),ic(this)},Ya().prototype.fft=function(){return this.throwIfDisposed(),qp(this)},Ya().prototype.flatten=function(){return this.throwIfDisposed(),fu(this,[this.size])},Ya().prototype.floor=function(){return this.throwIfDisposed(),cc(this)},Ya().prototype.floorDiv=function(e){return this.throwIfDisposed(),fl(this,e)},Ya().prototype.gather=function(e,t){return this.throwIfDisposed(),pc(this,e,t)},Ya().prototype.greaterEqual=function(e){return this.throwIfDisposed(),hc(this,e)},Ya().prototype.greater=function(e){return this.throwIfDisposed(),dc(this,e)},Ya().prototype.ifft=function(){return this.throwIfDisposed(),Xp(this)},Ya().prototype.irfft=function(){return this.throwIfDisposed(),Kp(this)},Ya().prototype.isFinite=function(){return this.throwIfDisposed(),mc(this)},Ya().prototype.isInf=function(){return this.throwIfDisposed(),gc(this)},Ya().prototype.isNaN=function(){return this.throwIfDisposed(),vc(this)},Ya().prototype.leakyRelu=function(e){return this.throwIfDisposed(),bc(this,e)},Ya().prototype.lessEqual=function(e){return this.throwIfDisposed(),wc(this,e)},Ya().prototype.less=function(e){return this.throwIfDisposed(),yc(this,e)},Ya().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),kc(this,e,t,n,r)},Ya().prototype.logSigmoid=function(){return this.throwIfDisposed(),$c(this)},Ya().prototype.logSoftmax=function(e){return this.throwIfDisposed(),Oc(this,e)},Ya().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),Fc(this,e,t)},Ya().prototype.log=function(){return this.throwIfDisposed(),Cc(this)},Ya().prototype.log1p=function(){return this.throwIfDisposed(),Sc(this)},Ya().prototype.logicalAnd=function(e){return this.throwIfDisposed(),zc(this,e)},Ya().prototype.logicalNot=function(){return this.throwIfDisposed(),Vc(this)},Ya().prototype.logicalOr=function(e){return this.throwIfDisposed(),Wc(this,e)},Ya().prototype.logicalXor=function(e){return this.throwIfDisposed(),Hc(this,e)},Ya().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),Yo(this,e,t,n)},Ya().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),jc(this,e,t,n,r)},Ya().prototype.max=function(e,t){return this.throwIfDisposed(),Ic(this,e,t)},Ya().prototype.maximum=function(e){return this.throwIfDisposed(),Dl(this,e)},Ya().prototype.mean=function(e,t){return this.throwIfDisposed(),qc(this,e,t)},Ya().prototype.min=function(e,t){return this.throwIfDisposed(),Jc(this,e,t)},Ya().prototype.minimum=function(e){return this.throwIfDisposed(),Zc(this,e)},Ya().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),Qc(this,e,t)},Ya().prototype.mod=function(e){return this.throwIfDisposed(),ep(this,e)},Ya().prototype.mul=function(e){return this.throwIfDisposed(),gl(this,e)},Ya().prototype.neg=function(){return this.throwIfDisposed(),Ec(this)},Ya().prototype.norm=function(e,t,n){return this.throwIfDisposed(),yd(this,e,t,n)},Ya().prototype.notEqual=function(e){return this.throwIfDisposed(),ap(this,e)},Ya().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),Jo(this,e,t,n)},Ya().prototype.onesLike=function(){return this.throwIfDisposed(),sp(this)},Ya().prototype.pad=function(e,t){return this.throwIfDisposed(),ip(this,e,t)},Ya().prototype.pool=function(e,t,n,r,a,s){return this.throwIfDisposed(),hp(this,e,t,n,r,a,s)},Ya().prototype.pow=function(e){return this.throwIfDisposed(),Ml(this,e)},Ya().prototype.prelu=function(e){return this.throwIfDisposed(),fp(this,e)},Ya().prototype.prod=function(e,t){return this.throwIfDisposed(),mp(this,e,t)},Ya().prototype.reciprocal=function(){return this.throwIfDisposed(),Tp(this)},Ya().prototype.relu=function(){return this.throwIfDisposed(),$p(this)},Ya().prototype.relu6=function(){return this.throwIfDisposed(),Ip(this)},Ya().prototype.reshapeAs=function(e){return this.throwIfDisposed(),fu(this,e.shape)},Ya().prototype.reshape=function(e){return this.throwIfDisposed(),fu(this,e)},Ya().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),lh(this,e,t,n)},Ya().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),uh(this,e,t,n)},Ya().prototype.reverse=function(e){return this.throwIfDisposed(),Np(this,e)},Ya().prototype.rfft=function(){return this.throwIfDisposed(),Jp(this)},Ya().prototype.round=function(){return this.throwIfDisposed(),Rp(this)},Ya().prototype.rsqrt=function(){return this.throwIfDisposed(),Pp(this)},Ya().prototype.selu=function(){return this.throwIfDisposed(),Dp(this)},Ya().prototype.separableConv2d=function(e,t,n,r,a,s){return this.throwIfDisposed(),Lp(this,e,t,n,r,a,s)},Ya().prototype.sigmoid=function(){return this.throwIfDisposed(),bu(this)},Ya().prototype.sign=function(){return this.throwIfDisposed(),Fp(this)},Ya().prototype.sin=function(){return this.throwIfDisposed(),zp(this)},Ya().prototype.sinh=function(){return this.throwIfDisposed(),Vp(this)},Ya().prototype.slice=function(e,t){return this.throwIfDisposed(),yu(this,e,t)},Ya().prototype.softmax=function(e){return this.throwIfDisposed(),Gp(this,e)},Ya().prototype.softplus=function(){return this.throwIfDisposed(),Tc(this)},Ya().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),dp(this,e,t)},Ya().prototype.split=function(e,t){return this.throwIfDisposed(),Yp(this,e,t)},Ya().prototype.sqrt=function(){return this.throwIfDisposed(),vl(this)},Ya().prototype.square=function(){return this.throwIfDisposed(),bl(this)},Ya().prototype.squaredDifference=function(e){return this.throwIfDisposed(),Zp(this,e)},Ya().prototype.squeeze=function(e){return this.throwIfDisposed(),Qp(this,e)},Ya().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof Ka?[this,e]:[this,...e];return ed(n,t)},Ya().prototype.step=function(e){return this.throwIfDisposed(),td(this,e)},Ya().prototype.stridedSlice=function(e,t,n,r,a,s,o,i){return this.throwIfDisposed(),nd(this,e,t,n,r,a,s,o,i)},Ya().prototype.sub=function(e){return this.throwIfDisposed(),_l(this,e)},Ya().prototype.sum=function(e,t){return this.throwIfDisposed(),Nc(this,e,t)},Ya().prototype.tan=function(){return this.throwIfDisposed(),rd(this)},Ya().prototype.tanh=function(){return this.throwIfDisposed(),wu(this)},Ya().prototype.tile=function(e){return this.throwIfDisposed(),lc(this,e)},Ya().prototype.toBool=function(){return this.throwIfDisposed(),Oo(this,"bool")},Ya().prototype.toFloat=function(){return this.throwIfDisposed(),Oo(this,"float32")},Ya().prototype.toInt=function(){return this.throwIfDisposed(),Oo(this,"int32")},Ya().prototype.topk=function(e,t){return this.throwIfDisposed(),ud(this,e,t)},Ya().prototype.transpose=function(e){return this.throwIfDisposed(),Zo(this,e)},Ya().prototype.unique=function(e){return this.throwIfDisposed(),pd(this,e)},Ya().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),dd(this,e,t)},Ya().prototype.unstack=function(e){return this.throwIfDisposed(),hd(this,e)},Ya().prototype.where=function(e,t){return this.throwIfDisposed(),Qu(e,this,t)},Ya().prototype.zerosLike=function(){return this.throwIfDisposed(),yl(this)};class sg extends Error{constructor(e){super(e),Object.setPrototypeOf(this,sg.prototype)}}class og extends Error{constructor(e){super(e),Object.setPrototypeOf(this,og.prototype)}}class ig extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ig.prototype)}}class lg extends Error{constructor(e){super(e),Object.setPrototypeOf(this,lg.prototype)}}class ug extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ug.prototype)}}Error;function cg(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{const n=new Array(t);return n.fill(e),n}}function pg(e,t){if(!e)throw new ug(t)}function dg(e,t){let n=0;for(const r of e)r===t&&n++;return n}function hg(e){return 1===e.length?e[0]:e}function fg(e){return Array.isArray(e)?e:[e]}function mg(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function gg(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,((e,t)=>t.toUpperCase()))}let vg={};function bg(e){if(null==e)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function yg(e){if(null!=e&&"object"==typeof e)if(Array.isArray(e))e.forEach((e=>yg(e)));else{const t=Object.keys(e);for(const n of t){const t=e[n];null!=t&&"object"==typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!=typeof t.value?yg(t):e[n]=t.value)}}}function wg(e,t={},n={},r="object",a=!1){if("string"==typeof e){const a=e;let s;if(a in n)s=n[a];else if(a in vg)s=vg[a];else if(s=t[a],null==s)throw new ig(`Unknown ${r}: ${e}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return s}{const s=e;if(null==s.className||null==s.config)throw new ig(`${r}: Improper config format: ${JSON.stringify(s)}.\n'className' and 'config' must set.`);const o=s.className;let i,l;if(o in n?[i,l]=n[o]:o in vg?[i,l]=vg.className:o in t&&([i,l]=t[o]),null==i)throw new ig(`Unknown ${r}: ${o}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=l){const e={};for(const t of Object.keys(vg))e[t]=vg[t];for(const t of Object.keys(n))e[t]=n[t];s.config.customObjects=e;const t=Object.assign({},vg);for(const e of Object.keys(n))vg[e]=n[e];yg(s.config);const r=l(i,s.config,n,a);return vg=Object.assign({},t),r}{const e=Object.assign({},vg);for(const e of Object.keys(n))vg[e]=n[e];const t=new i(s.config);return vg=Object.assign({},e),t}}}function xg(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function kg(e){if(null==e)return e;const t=[];for(const n of e)-1===t.indexOf(n)&&t.push(n);return t}function Cg(e){if(null==e)throw new ig(`Invalid value in obj: ${JSON.stringify(e)}`);for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function Sg(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new ig(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function Eg(e,t,n=0,r=1/0){return pg(n>=0),pg(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((e=>typeof e===t))}function Tg(e,t){Array.isArray(e)?(re(e.length>0,(()=>`${t} is unexpectedly an empty array.`)),e.forEach(((e,n)=>Tg(e,`element ${n+1} of ${t}`)))):re(Number.isInteger(e)&&e>0,(()=>`Expected ${t} to be a positive integer, but got ${$g(e)}.`))}function $g(e){return null===e?"null":Array.isArray(e)?"["+e.map((e=>$g(e))).join(",")+"]":"string"==typeof e?`"${e}"`:`${e}`}function Ig(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}function Ng(e,t){return el((()=>vl(Nc(gl(e,e),t,!0))))}class Og extends Ai{getConfig(){return{}}}class Ag extends Og{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return el((()=>{const t=Ng(e,this.axis),n=Au(t,0,this.maxValue);return gl(e,ml(n,hl(ag(),t)))}))}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}Ag.className="MaxNorm",_i(Ag);class Mg extends Og{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return el((()=>ml(e,hl(ag(),Ng(e,this.axis)))))}getConfig(){return{axis:this.axis}}}Mg.className="UnitNorm",_i(Mg);class _g extends Og{apply(e){return $p(e)}}_g.className="NonNeg",_i(_g);class Rg extends Og{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return el((()=>{const t=Ng(e,this.axis),n=hl(gl(this.rate,Au(t,this.minValue,this.maxValue)),gl(1-this.rate,t));return gl(e,ml(n,hl(ag(),t)))}))}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}Rg.className="MinMaxNorm",_i(Rg);const Pg={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Dg(e){return bg(e)}function Lg(e,t={}){return wg(e,Mi.getMap().classNameMap,t,"constraint")}function Bg(e){if(null==e)return null;if("string"==typeof e){return Lg({className:e in Pg?Pg[e]:e,config:{}})}return e instanceof Og?e:Lg(e)}function Fg(e){return new Ag(e)}function zg(e){return new Mg(e)}function Vg(){return new _g}function Wg(e){return new Rg(e)}const Hg=["channelsFirst","channelsLast"],jg=["nearest","bilinear"],Ug=["valid","same","causal"],Gg=["max","avg"],qg=["sum","mul","concat","ave"],Xg=new Map;function Kg(e){Sg(Hg,"DataFormat",e)}function Yg(e){Sg(Ug,"PaddingMode",e)}function Jg(e){Sg(Gg,"PoolMode",e)}const Zg=[];function Qg(e,t){Zg.push(e);try{const e=t();return Zg.pop(),e}catch(e){throw Zg.pop(),e}}function ev(e){if(!rv(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===Zg.length?"":Zg.join("/")+"/")+e}function tv(e){if(!rv(e))throw new Error("Not a valid tensor name: '"+e+"'");Xg.has(e)||Xg.set(e,0);const t=Xg.get(e);if(Xg.set(e,Xg.get(e)+1),t>0){const n=`${e}_${t}`;return Xg.set(n,1),n}return e}const nv=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function rv(e){return!!e.match(nv)}function av(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let a=t;a<n;++a)r*=e[a];return r}function sv(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r<t&&(t=r)}return t}function ov(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r>t&&(t=r)}return t}function iv(e,t){if(t<e)throw new ig(`end (${t}) < begin (${e}) is forbidden.`);const n=[];for(let r=e;r<t;++r)n.push(r);return n}function lv(e,t){return Oo(e,t)}function uv(e,t=-1){const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),fu(e,n)}function cv(e,t,n){return el((()=>{switch(e.rank){case 1:return Wp(e,t,n);case 2:return Hp(e,[t,0],[n,e.shape[1]]);case 3:return jp(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return Up(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return yu(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return yu(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new ig(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function pv(e,t,n){return el((()=>{switch(e.rank){case 1:return Wp(e,t,n);case 2:return Hp(e,[0,t],[e.shape[0],n]);case 3:return jp(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return Up(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new ig(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function dv(e,t,n,r){return el((()=>{switch(e.rank){case 1:return Wp(e,t,n);case 2:switch(r){case 1:return cv(e,t,n);case 2:return pv(e,t,n);default:throw new ig(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return cv(e,t,n);case 2:return jp(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return pv(e,t,n);default:throw new ig(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return cv(e,t,n);case 2:return Up(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return Up(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return pv(e,t,n);default:throw new ig(`The axis is not within the rank of the tensor ${r}`)}default:throw new ig(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function hv(e,t=-1){let n;return t<0&&(n=e[0].rank,t=0!==n?n:0),t===e[0].rank&&(t=-1),vu(e,t)}function fv(e,t){switch(e.rank){case 1:return Mu([e,t]);case 2:return _u([e,t],0);case 3:return Ru([e,t],0);case 4:return Pu([e,t],0);default:throw new ig(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function mv(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new ig(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return lc(e,t)}function gv(e,t=0,n=1,r,a){return kp(e,t,n,r,a)}function vv(e,t,n,r){if(e.rank<2||t.rank<2)throw new lg(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3){if(e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new lg(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`)}if(2===e.rank&&2===t.rank){return Ld({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?wv(e.rank,r,"channelsLast"):null,activation:n})}{const a=e.shape.slice(),s=a.pop();e=fu(e,[-1,s]);const o=t.shape.slice(),i=o.pop(),l=o.pop(),u=[...o,i],c=Array.from({length:t.rank},((e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n));t=fu(Zo(t,c),[l,-1]);const p=[...a,...u];return fu(Ld({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?wv(e.rank,r,"channelsLast"):null,activation:n}),p)}}function bv(e,t,n){return el((()=>(t=Array.isArray(t)?ad(t,"int32"):Oo(t,"int32"),pc(e,t,n))))}function yv(e){return gl(e,e)}function wv(e,t,n){const r=t.shape;if(1!==t.rank&&t.rank!==e)throw new ig(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(5===e){if("channelsFirst"===n)return 1===r.length?fu(t,[1,r[0],1,1,1]):fu(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?fu(t,[1,1,1,1,r[0]]):fu(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?fu(t,[1,r[0],1,1]):fu(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?fu(t,[1,1,1,r[0]]):fu(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?fu(t,[1,r[0],1]):fu(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?fu(t,[1,1,r[0]]):fu(t,[1].concat(r))}else if(e<3)return t;throw new ig(`Unsupported input rank by biasAdd: ${t.rank}`)}function xv(e,t,n){return el((()=>(null==n&&(n="channelsLast"),Kg(n),hl(e,wv(e.rank,t,n)))))}function kv(e,t,n,r){return el((()=>Sd(e,t,n,r)))}function Cv(e,t,n=!1){return n?e():t()}const Sv=["fanIn","fanOut","fanAvg"],Ev=["normal","uniform","truncatedNormal"];class Tv extends Ai{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class $v extends Tv{apply(e,t){return Xc(e,t)}}$v.className="Zeros",_i($v);class Iv extends Tv{apply(e,t){return Kc(e,t)}}Iv.className="Ones",_i(Iv);class Nv extends Tv{constructor(e){if(super(),"object"!=typeof e)throw new ig(`Expected argument of type ConstantConfig but got ${e}`);if(void 0===e.value)throw new ig(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return el((()=>gl($l(this.value),Kc(e,t))))}getConfig(){return{value:this.value}}}Nv.className="Constant",_i(Nv);class Ov extends Tv{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return Cp(e,this.minval,this.maxval,t)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}Ov.className="RandomUniform",_i(Ov);class Av extends Tv{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new lg(`randomNormal does not support dType ${t}.`);return gv(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Av.className="RandomNormal",_i(Av);class Mv extends Tv{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new lg(`truncatedNormal does not support dType ${t}.`);return cd(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Mv.className="TruncatedNormal",_i(Mv);class _v extends Tv{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return el((()=>{if(2!==e.length||e[0]!==e[1])throw new ig("Identity matrix initializer can only be used for 2D square matrices.");return gl(this.gain,uc(e[0]))}))}getConfig(){return{gain:this.gain}}}_v.className="Identity",_i(_v);class Rv extends Tv{constructor(e){if(super(),e.scale<0)throw new ig(`scale must be a positive float. Got: ${e.scale}`);var t;this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,t=this.mode,Sg(Sv,"FanMode",t),this.distribution=null==e.distribution?"normal":e.distribution,function(e){Sg(Ev,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,t){const n=function(e,t="channelsLast"){let n,r;if(Kg(t),2===e.length)n=e[0],r=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===t){const t=av(e,2);n=e[1]*t,r=e[0]*t}else if("channelsLast"===t){const t=av(e,0,e.length-2);n=e[e.length-2]*t,r=e[e.length-1]*t}}else{const t=av(e);n=Math.sqrt(t),r=Math.sqrt(t)}return[n,r]}(e),r=n[0],a=n[1];let s=this.scale;if("fanIn"===this.mode?s/=Math.max(1,r):"fanOut"===this.mode?s/=Math.max(1,a):s/=Math.max(1,(r+a)/2),"normal"===this.distribution){const n=Math.sqrt(s);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new lg(`${this.getClassName()} does not support dType ${t}.`);return cd(e,0,n,t,this.seed)}{const n=Math.sqrt(3*s);return Cp(e,-n,n,t)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Rv.className="VarianceScaling",_i(Rv);class Pv extends Rv{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return Rv.className}}Pv.className="GlorotUniform",_i(Pv);class Dv extends Rv{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return Rv.className}}Dv.className="GlorotNormal",_i(Dv);class Lv extends Rv{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return Rv.className}}Lv.className="HeNormal",_i(Lv);class Bv extends Rv{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return Rv.className}}Bv.className="HeUniform",_i(Bv);class Fv extends Rv{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return Rv.className}}Fv.className="LeCunNormal",_i(Fv);class zv extends Rv{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return Rv.className}}zv.className="LeCunNormal",_i(zv);class Vv extends Tv{constructor(e){if(super(),this.DEFAULT_GAIN=1,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed,null!=this.seed)throw new lg("Random seed is not implemented for Orthogonal Initializer yet.")}apply(e,t){return el((()=>{if(e.length<2)throw new lg("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${e[0]*e[1]}) elements: Slowness may result.`);const t=gv(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32");let n=Dh.gramSchmidt(t);return e[0]>e[1]&&(n=Zo(n)),gl(this.gain,n)}))}getConfig(){return{gain:this.gain,seed:this.seed}}}Vv.className="Orthogonal",_i(Vv);const Wv={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function Hv(e,t={}){return wg(e,Mi.getMap().classNameMap,t,"initializer")}function jv(e){return bg(e)}function Uv(e){if("string"==typeof e){const t=e in Wv?Wv[e]:e;if("GlorotNormal"===t)return new Dv;if("GlorotUniform"===t)return new Pv;if("HeNormal"===t)return new Lv;if("HeUniform"===t)return new Bv;if("LeCunNormal"===t)return new Fv;if("LeCunUniform"===t)return new zv;{const e={};return e.className=t,e.config={},Hv(e)}}return e instanceof Tv?e:Hv(e)}function Gv(){return new $v}function qv(){return new Iv}function Xv(e){return new Nv(e)}function Kv(e){return new Ov(e)}function Yv(e){return new Av(e)}function Jv(e){return new Mv(e)}function Zv(e){return new _v(e)}function Qv(e){return new Rv(e)}function eb(e){return new Pv(e)}function tb(e){return new Dv(e)}function nb(e){return new Lv(e)}function rb(e){return new Bv(e)}function ab(e){return new Fv(e)}function sb(e){return new zv(e)}function ob(e){return new Vv(e)}let ib=0;function lb(){return ib++}const ub={};function cb(e=""){return e in ub||(ub[e]=0),ub[e]+=1,e+ub[e].toString()}function pb(e){return Array.isArray(e)&&Array.isArray(e[0])}function db(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function hb(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new ig(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function fb(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return(e=e)[0];throw new ig(`Expected exactly 1 Shape; got ${e.length}`)}return e}function mb(e){let t=0;for(const n of e)0===n.shape.length?t+=1:t+=n.shape.reduce(((e,t)=>e*t));return t}const gb="Variable";class vb{constructor(e,t="float32",n="Variable",r=!0,a=null){this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=lb(),n=null==n?gb:n,this.originalName=ev(n),this.name=tv(this.originalName),this.trainable_=r,this.constraint=a,this.val=fd(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function bb(e){return e.map((e=>e.read()))}function yb(e){e.forEach((e=>{e[0].write(e[1])}))}class wb{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class xb{constructor(e,t,n,r,a,s,o){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=a,this.outputTensorIndex=o,this.id=lb(),null!=s&&(this.originalName=ev(s),this.name=tv(this.originalName)),this.rank=t.length}}let kb=0;class Cb{constructor(e,t){this.callArgs=t,this.id=kb++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const t of e.inboundLayers)null!=t&&t.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let Sb=0;class Eb extends Ai{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Sb++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const e=this.getClassName();t=mg(e)+"_"+cb(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new og(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new ig(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return hg(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return hg(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new sg(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(0===this.inboundNodes.length)throw new sg(`Layer ${this.name} is not connected, no input to return.`);return hg(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new sg(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new sg(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return hg(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map((e=>e()))}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach((t=>t.trainable=e)),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter((e=>e.trainable)):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter((e=>!e.trainable)).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){if(e=fg(e),null==this.inputSpec||0===this.inputSpec.length)return;const t=fg(this.inputSpec);if(e.length!==t.length)throw new ig(`Layer ${this.name} expects ${t.length} inputs, but it received ${e.length} input tensors. Input received: ${e}`);for(let n=0;n<e.length;n++){const r=e[n],a=t[n];if(null==a)continue;const s=r.rank;if(null!=a.ndim&&s!==a.ndim)throw new ig(`Input ${n} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${s}`);if(null!=a.maxNDim&&s>a.maxNDim)throw new ig(`Input ${n} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${s}`);if(null!=a.minNDim&&s<a.minNDim)throw new ig(`Input ${n} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${s}.`);if(null!=a.dtype&&r.dtype!==a.dtype)throw new ig(`Input ${n} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${r.dtype}.`);if(a.axes){const e=r.shape;for(const t in a.axes){const r=Number(t),s=a.axes[t],o=r>=0?e[r]:e[e.length+r];if(null!=s&&-1===[s,null].indexOf(o))throw new ig(`Input ${n} is incompatible with layer ${this.name}: expected axis ${r} of input shape to have value ${s} but got shape ${e}.`)}}if(null!=a.shape)for(let e=0;e<a.shape.length;++e){const t=a.shape[e],s=r.shape[e];if(null!=t&&null!=s&&t!==s)throw new ig(`Input ${n} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${r.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const n=fg(e);let r=!0;for(const e of n)if(!(e instanceof xb)){r=!1;break}let a=!0;for(const e of n)if(e instanceof xb){a=!1;break}if(r===a)throw new ig("Arguments to apply() must be all SymbolicTensors or all Tensors");return Qg(this.name,(()=>{if(!this.built){this.assertInputCompatibility(e);const t=[];for(const n of fg(e))t.push(n.shape);this.build(hg(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&a&&(this._refCount=1)}if(this.assertInputCompatibility(e),a){let r=this.call(e,t);const a=fg(r),s=[];for(let e of a)-1!==n.indexOf(e)&&(e=e.clone()),s.push(e);if(r=hg(s),null!=this.activityRegularizer)throw new lg("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=function(e){e=fg(e);const t=[];for(const n of e)t.push(n.shape);return hg(t)}(e),r=this.computeOutputShape(n);let a;const s="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?n[0]:n),a=null!=r&&r.length>0&&Array.isArray(r[0])?r.map(((n,r)=>new xb(s,n,this,fg(e),t,this.name,r))):new xb(s,r,this,fg(e),t,this.name),this.addInboundNode(e,a,null,null,n,r,t),this._refCount++,null!=this.activityRegularizer)throw new lg("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}}))}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach(((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new sg(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const t of this.inboundNodes){const n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new sg(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new og(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return mb(this.weights)}build(e){this.built=!0}getWeights(e=!1){return bb(e?this.trainableWeights:this.weights)}setWeights(e){el((()=>{const t=this.weights;if(t.length!==e.length)throw new ig(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(0===t.length)return;const n=[],r=bb(t);for(let a=0;a<r.length;++a){const s=r[a],o=t[a],i=e[a];if(!ue(s.shape,i.shape))throw new ig(`Layer weight shape ${s.shape} not compatible with provided weight shape ${i.shape}`);n.push([o,i])}yb(n)}))}addWeight(e,t,n,r,a,s,o,i){if(-1!==this._addedWeightNames.indexOf(e))throw new ig(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=i?i():Uv("zeros"));const l=r.apply(t,n),u=new vb(l,n,e,s,o);return l.dispose(),null!=a&&this.addLoss((()=>a.apply(u.read()))),null==s&&(s=!0),s?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=fg(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);t.forEach((e=>{if(null!=e)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)}))}return null}return t}addInboundNode(e,t,n,r,a,s,o=null){const i=fg(e);t=fg(t),n=fg(n),r=fg(r),a=db(a),s=db(s);const l=[],u=[],c=[];for(const e of i)l.push(e.sourceLayer),u.push(e.nodeIndex),c.push(e.tensorIndex);new Cb({outboundLayer:this,inboundLayers:l,nodeIndices:u,tensorIndices:c,inputTensors:i,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:s},o);for(let e=0;e<t.length;e++)t[e].sourceLayer=this,t[e].nodeIndex=this.inboundNodes.length-1,t[e].tensorIndex=e}getConfig(){const e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach((e=>e.dispose())),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return 0==--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function Tb(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];{const e=t.inboundNodes[n];if(0===e.inboundLayers.length)return e.inputTensors;{const t=[];for(let n=0;n<e.inboundLayers.length;n++){const r=Tb(e.inputTensors[n],e.inboundLayers[n],e.nodeIndices[n]);for(const e of r)-1===t.indexOf(e)&&t.push(e)}return t}}}class $b extends Eb{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:cb("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new ig("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new ig("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new ig("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];const r=new xb(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new Cb({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new ig(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}function Ib(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new ig("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;null==n&&(n="float32");return new $b({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}async function Nb(e){if(null==e)return;const t=[],n=[],r=[];for(const a in e){const s=e[a];if("number"!=typeof s){const e=s;t.push(e.data()),n.push(a),r.push(e)}}if(t.length>0){const a=await Promise.all(t);for(let t=0;t<a.length;++t)e[n[t]]=a[t][0];tl(r)}}function Ob(e){if(null!=e)for(const t in e){const n=e[t];"number"!=typeof n&&n.dispose()}}var Ab;$b.className="InputLayer",_i($b),function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(Ab||(Ab={}));class Mb{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class _b{constructor(e,t=10){null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class Rb extends Mb{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});const n=null==t.size?0:t.size;this.seen+=n;for(const e in t){const r=t[e];if("number"==typeof r)this.totals.hasOwnProperty(e)||(this.totals[e]=0),this.totals[e]=this.totals[e]+r*n;else{let t;e in this.totals?t=this.totals[e]:this.totals[e]=0;const a=el((()=>hl(this.totals[e],gl(r,n))));this.totals[e]=a,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(const e of this.params.metrics)null!=this.totals[e]&&("number"==typeof this.totals[e]?t[e]=this.totals[e]/this.seen:el((()=>{const n=gl(ml(1,this.seen),this.totals[e]);t[e]=n,this.totals[e].dispose(),nl(t[e])})))}}class Pb extends Mb{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(const e in t)null==this.history[e]&&(this.history[e]=[]),this.history[e].push(t[e])}async syncData(){const e=[],t=[],n=[];for(const r in this.history){const a=this.history[r];for(let s=0;s<a.length;++s)if("number"!=typeof a[s]){const o=a[s];e.push(o.data()),t.push(r),n.push(s)}}const r=await Promise.all(e);for(let e=0;e<r.length;++e){this.history[t[e]][n[e]].dispose(),this.history[t[e]][n[e]]=r[e][0]}}}class Db extends Mb{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||Wh,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");Ne(this.yieldEvery)&&(this.maybeWait=function(e,t,n){let r,a=null!=n?n():_a();return(...s)=>{const o=null!=n?n():_a();return o-a<t||(a=o,r=e(...s)),r}}(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){const r=[];null!=this.yield&&(await Nb(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await Nb(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const n=[];null!=this.epochEnd&&(await Nb(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await Nb(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const n=[];null!=this.batchEnd&&(await Nb(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):Ne(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await Nb(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await Nb(e),await this.trainEnd(e))}}function Lb(e,t){if(null==e&&(e={}),e instanceof Mb)return[e];if(Array.isArray(e)&&e[0]instanceof Mb)return e;return fg(e).map((e=>new Db(e,t)))}class Bb{constructor(){}static registerCallbackConstructor(e,t){re(e>=0&&Number.isInteger(e),(()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`)),Bb.checkForDuplicate(t),null==Bb.constructors[e]&&(Bb.constructors[e]=[]),Bb.constructors[e].push(t)}static checkForDuplicate(e){for(const t in Bb.constructors){Bb.constructors[+t].forEach((t=>{if(t===e)throw new ig("Duplicate callback constructor.")}))}}static clear(){Bb.constructors={}}static createCallbacks(e){const t=[];for(const n in Bb.constructors){const r=+n;e>=r&&t.push(...Bb.constructors[r])}return t.map((e=>new e))}}function Fb(e,t,n,r,a,s,o,i,l){const u=new Pb,c=[new Rb,...Bb.createCallbacks(t)];null!=e&&c.push(...e),c.push(u);const p=new _b(c);return p.setParams({epochs:n,initialEpoch:r,samples:a,steps:s,batchSize:o,verbose:t,doValidation:i,metrics:l}),{callbackList:p,history:u}}function zb(e,t={},n=!1){return wg(e,Mi.getMap().classNameMap,t,"layer",n)}function Vb(e,t){return el((()=>{"float32"!==e.dtype&&(e=Oo(e,"float32"));const n=Nc(yv(e),t,!0),r=Ol(n.shape,ag()),a=vl(Dl(n,r));return ml(e,a)}))}function Wb(e,t){return el((()=>qc(yv(_l(t,e)),-1)))}function Hb(e,t){return el((()=>qc(Pl(_l(t,e)),-1)))}function jb(e,t){return el((()=>{const n=_l(e,t),r=Au(Pl(e),ag(),Number.MAX_VALUE),a=Pl(ml(n,r));return gl(100,qc(a,-1))}))}function Ub(e,t){return el((()=>{const n=Au(t,ag(),Number.MAX_VALUE),r=Cc(hl(1,n)),a=Au(e,ag(),Number.MAX_VALUE),s=Cc(hl(1,a));return qc(yv(_l(r,s)),-1)}))}function Gb(e,t,n=!1){return el((()=>{if(n)t=Gp(t);else{const e=Nc(t,t.shape.length-1,!0);t=ml(t,e)}return t=Au(t,ag(),1-ag()),Ec(Nc(gl(Oo(e,"float32"),Cc(t)),t.shape.length-1))}))}function qb(e,t,n=!1){return el((()=>{const r=Oo(cc(function(e){const t=[av(e.shape)];return fu(e,t)}(e)),"int32"),a=(t=Au(t,ag(),1-ag())).shape;return Gb(fu(Jo(r,a[a.length-1]),a),t,n)}))}function Xb(e,t){return el((()=>{let n;return n=Au(t,ag(),1-ag()),n=Cc(ml(n,_l(1,n))),qc(function(e,t){if(!ue(e.shape,t.shape))throw new ig(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return el((()=>{const n=$p(t),r=Ec(Pl(t));return hl(_l(n,gl(t,e)),Sc(sc(r)))}))}(e,n),-1)}))}function Kb(e,t){return el((()=>{const n=Au(e,ag(),1),r=Au(t,ag(),1);return Nc(gl(e,Cc(ml(n,r))),-1)}))}function Yb(e,t){return el((()=>{const n=Vb(e,-1),r=Vb(t,-1),a=gl(n,r);return Ec(Nc(a,-1))}))}Bb.constructors={};const Jb={meanSquaredError:Wb,meanAbsoluteError:Hb,meanAbsolutePercentageError:jb,meanSquaredLogarithmicError:Ub,squaredHinge:function(e,t){return el((()=>{const n=Dl(0,_l(1,gl(e,t)));return qc(yv(n),-1)}))},hinge:function(e,t){return el((()=>{const n=Dl(0,_l(1,gl(e,t)));return qc(n,-1)}))},categoricalHinge:function(e,t){return el((()=>{const n=Nc(gl(e,t),-1),r=Ic(gl(_l(1,e),t),-1);return Dl(0,hl(1,_l(r,n)))}))},logcosh:function(e,t){return el((()=>{const n=Math.log(2),r=_l(t,e),a=_l(hl(r,Tc(gl(-2,r))),n);return qc(a,-1)}))},categoricalCrossentropy:Gb,sparseCategoricalCrossentropy:qb,binaryCrossentropy:Xb,kullbackLeiblerDivergence:Kb,poisson:function(e,t){return el((()=>{const n=Cc(hl(ag(),t));return qc(_l(t,gl(e,n)),-1)}))},cosineProximity:Yb};function Zb(e){if("string"==typeof e){if(e in Jb)return Jb[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ig(t)}return e}function Qb(e,t){return el((()=>{const n=gl(.5,sp(t)),r=lv(dc(t,n),e.dtype);return qc(Zu(e,r),-1)}))}function ey(e,t){return el((()=>lv(Zu(ql(e,-1),ql(t,-1)),"float32")))}function ty(e,t){return el((()=>Oo(Nc(zc(Zu(e,1),Zu(t,1))),"float32")))}function ny(e,t){return el((()=>{const n=ty(e,t),r=function(e,t){return el((()=>Oo(Nc(zc(Zu(e,0),Zu(t,1))),"float32")))}(e,t),a=hl(n,r);return Oo(Qu(dc(a,0),ml(n,a),0),"float32")}))}function ry(e,t){return el((()=>{const n=ty(e,t),r=function(e,t){return el((()=>Oo(Nc(zc(Zu(e,1),Zu(t,0))),"float32")))}(e,t),a=hl(n,r);return Oo(Qu(dc(a,0),ml(n,a),0),"float32")}))}function ay(e,t){return Xb(e,t)}function sy(e,t){return e.rank===t.rank&&(e=Qp(e,[e.rank-1])),(t=ql(t,-1)).dtype!==e.dtype&&(t=Oo(t,e.dtype)),Oo(Zu(e,t),"float32")}const oy=Gb,iy=qb,ly={binaryAccuracy:Qb,categoricalAccuracy:ey,precision:ny,categoricalCrossentropy:oy,sparseCategoricalCrossentropy:iy,mse:Wb,MSE:Wb,mae:Hb,MAE:Hb,mape:jb,MAPE:jb,cosine:Yb};function uy(e){if("string"==typeof e&&e in ly)return ly[e];if("string"!=typeof e&&null!=e)return e;throw new ig(`Unknown metric ${e}`)}function cy(e){if(pg(null!==e,`Unknown LossOrMetricFn ${e}`),"string"==typeof e)return e;{let t;for(const n of Object.keys(Jb))if(Jb[n]===e){t=n;break}if(void 0!==t)return t;for(const n of Object.keys(ly))if(ly[n]===e){t=n;break}return void 0!==t?t:e.name}}const py=1048576;function dy(e,t,n=!1){if(null==e||"object"!=typeof e||Object.getPrototypeOf(e)!==Object.prototype||!hy(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(e);n.length>py&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function hy(e){if(null===e)return!0;if("object"==typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t){if("string"!=typeof n)return!1;if(!hy(e[n]))return!1}return!0}if(Array.isArray(e)){for(const t of e)if(!hy(t))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}function fy(e,t,n,r=console.log){const a=function(e){let t=!0;const n=[],r=[];for(const t in e.nodesByDepth)n.push(e.nodesByDepth[t]);for(const e of n){if(e.length>1||1===e.length&&e[0].inboundLayers.length>1){t=!1;break}r.push(...e)}if(t)for(const n of e.layers){let e=!1;for(const a of n.inboundNodes)if(-1!==r.indexOf(a)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),s=["Layer (type)","Input Shape","Output shape","Param #"];let o;if(a?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((e=>Math.floor(t*e)))),!a){s.push("Receives inputs"),o=[];for(const t in e.nodesByDepth)o.push(...e.nodesByDepth[t])}r("_".repeat(t)),my(s,n,r),r("=".repeat(t));const i=e.layers;for(let e=0;e<i.length;++e)a?gy(i[e],n,r):vy(i[e],n,o,r),r((e===i.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const l=function(e){let t;t=null!=e.collectedTrainableWeights?mb(e.collectedTrainableWeights):mb(e.trainableWeights);return t}(e),u=mb(e.nonTrainableWeights);r(`Total params: ${l+u}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${u}`),r("_".repeat(t))}function my(e,t,n=console.log){let r="";for(let n=0;n<e.length;++n)n>0&&(r=r.slice(0,r.length-1)+" "),r+=e[n],r=r.slice(0,t[n]),r+=" ".repeat(t[n]-r.length);n(r)}function gy(e,t,n){let r,a;try{a=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(e){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(e){r="multiple"}my([`${e.name} (${e.getClassName()})`,a,r,e.countParams().toString()],t,n)}function vy(e,t,n,r){let a,s;try{s=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(e){s="multiple"}try{a=JSON.stringify(e.outputShape)}catch(e){a="multiple"}const o=[];for(const t of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(t)))for(let e=0;e<t.inboundLayers.length;++e){const n=t.inboundLayers[e].name,r=t.nodeIndices[e],a=t.tensorIndices[e];o.push(`${n}[${r}][${a}]`)}const i=e.name,l=e.getClassName(),u=0===o.length?"":o[0];my([`${i} (${l})`,s,a,e.countParams().toString(),u],t,r);for(let e=1;e<o.length;++e)my(["","","","",o[e]],t,r)}function by(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function yy(e,t){if(null===e)return null;if("string"==typeof e)return gg(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let a=0;a<r;++a){const r=e[a];by(t,a,r)?n.push(r):n.push(yy(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n];if("name"===n&&"string"==typeof r)t[n]=r;else{const e=gg(n);t[e]=yy(r,e)}}return t}}function wy(e,t){if(null==e)return null;if("string"==typeof e)return mg(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let a=0;a<r;++a){const r=e[a];by(t,a,r)?n.push(r):n.push(wy(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n],a=mg(n);t[a]="name"!==n&&"className"!==n||"string"!=typeof r?wy(r,n):r}return t}}const xy="3.15.0";class ky{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof ky)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new ig(`Duplicate key: name=${e.name}, id=${e.id}`);return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return Oo(t,e.dtype)}catch(n){throw new ig(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof xb){if(null==this.id2Value[e.id])throw new ig(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}{const t=this.name2Id[e];if(null==t)throw new ig(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof xb){if(null==this.id2Value[e.id])throw new ig(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}{const t=this.name2Id[e];if(null==t)throw new ig(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&tl(this.id2Mask)}}const Cy={},Sy={};function Ey(e,t,n,r){const a=null!=n&&n.training,s=Array.isArray(e),o=s?e:[e],i=o.map((e=>e.name)),l=[],u=t.names();for(const e of i)-1!==u.indexOf(e)?l.push(t.getValue(e)):l.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const c=i.join(",")+"|"+t.names().join(",");let p,d;if(null==Cy[c]){const e=function(e,t){re(null!=e&&e.length>0,(()=>"Expected at least one fetch, got none"));let n=[],r={};if(1===e.length){const a=$y(e[0],t);n=a.sorted,r=a.recipientMap}else{const a=new Set;for(const s of e){const{sorted:e,recipientMap:o}=$y(s,t);for(const t of e)a.has(t.name)||(n.push(t),a.add(t.name));for(const e in o)null==r[e]&&(r[e]=new Set),o[e].forEach((t=>r[e].add(t)))}}return{sorted:n,recipientCounts:Ty(r)}}(o,t);p=e.sorted,d=e.recipientCounts,Cy[c]=p,Sy[c]=d}p=Cy[c],d={},a||Object.assign(d,Sy[c]);const h=new ky(t);for(let e=0;e<p.length;++e){if(null!=r){const e=Zi().numTensors;e>r.maxNumTensors&&(r.maxNumTensors=e),e<r.minNumTensors&&(r.minNumTensors=e)}const s=p[e],o=s.sourceLayer;if(o instanceof $b)continue;const u=[],c=[],f=[];let m=!1;for(const e of s.inputs){const n=h.getValue(e),r=h.getMask(e);u.push(n),c.push(r),null!=r&&(m=!0),a||(d[e.name]--,0!==d[e.name]||t.hasKey(e)||-1!==i.indexOf(e.name)||n.isDisposed||!0===e.sourceLayer.stateful||f.push(n))}m&&((n=n||{}).mask=c[0]);const g=fg(o.apply(u,n));let v=null;o.supportsMasking&&(v=o.computeMask(u,c));const b=Iy(s),y=Array.isArray(b)?b:[b];for(let e=0;e<y.length;++e){h.hasKey(y[e])||h.add(y[e],g[e],Array.isArray(v)?v[0]:v);const t=i.indexOf(y[e].name);-1!==t&&(l[t]=g[e])}a||tl(f)}return h.disposeMasks(),s?l:l[0]}function Ty(e){const t={};for(const n in e)t[n]=e[n].size;return t}function $y(e,t){const n=new Set,r=[],a={};for(const e of t.names())n.add(e);const s=[],o=[];for(s.push(e);s.length>0;){const e=s[s.length-1];if(n.has(e.name)){s.pop();continue}const t=o[o.length-1]===s.length-1;if(0===e.inputs.length||t)s.pop(),r.push(e),n.add(e.name),t&&o.pop();else{o.push(s.length-1);for(const t of e.inputs)null==a[t.name]&&(a[t.name]=new Set),a[t.name].add(e.name),n.has(t.name)||s.push(t)}}return{sorted:r,recipientMap:a}}function Iy(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(const r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}class Ny extends Eb{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,null==this.name){const e=this.getClassName().toLowerCase();this.name=cb(e)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],kg(this.inputs).length!==this.inputs.length)throw new ig(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map((e=>e.name))}`);kg(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map((e=>e.name))}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const e of this.outputs){const t=e.sourceLayer,n=e.nodeIndex,r=e.tensorIndex;this.outputLayers.push(t),this.outputLayersNodeIndices.push(n),this.outputLayersTensorIndices.push(r)}for(const e of this.inputs){const t=e.sourceLayer,n=e.nodeIndex,r=e.tensorIndex;pg(0===n,"input layer has >1 nodes"),pg(0===r,"input layer has >1 tensors"),this.inputLayers.push(t),this.inputLayersNodeIndices.push(n),this.inputLayersTensorIndices.push(r)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let t=0;t<this.inputLayers.length;t++){const n=this.inputLayers[t];if(!(n instanceof $b))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${t} (0-based) originates from layer type ${n.getClassName()}.`);this.inputNames.push(n.name),this.feedInputShapes.push(n.batchInputShape),this.feedInputNames.push(n.name)}for(const e of this.outputLayers)this.outputNames.push(e.name);this.internalInputShapes=this.inputs.map((e=>e.shape)),this.internalOutputShapes=this.outputs.map((e=>e.shape));const t={},n={},r={},a={},s={},o=[],i=(e,t,n,r,a,l)=>{null!=r&&null!=a&&null!=l||(r=e.sourceLayer,a=e.nodeIndex,l=e.tensorIndex);const u=r.inboundNodes[a];if(-1!==n.indexOf(u))throw new og(`The tensor ${e.name} at layer "${r.name}" is part of a cycle.`);if(-1!==t.indexOf(u))return;this.containerNodes.add(Ny.nodeKey(r,a)),r.id in s||(s[r.id]=Object.keys(s).length),-1===n.indexOf(u)&&n.push(u);const c=u.inboundLayers.length;for(let e=0;e<c;e++){const r=u.inputTensors[e],a=u.inboundLayers[e],s=u.nodeIndices[e],o=u.tensorIndices[e];i(r,t,n,a,s,o)}for(t.push(u);n.indexOf(u)>=0;)n.splice(n.indexOf(u),1);o.push(u)},l=[],u=[];for(const e of this.outputs)i(e,l,u);const c=o.slice().reverse();for(const e of c){n[e.id]=e,e.id in t||(t[e.id]=0);let s=t[e.id];const o=null==r[e.outboundLayer.id]?0:r[e.outboundLayer.id];s=Math.max(s,o),r[e.outboundLayer.id]=s,a[e.outboundLayer.id]=e.outboundLayer,t[e.id]=s;for(let r=0;r<e.inboundLayers.length;r++){const a=e.inboundLayers[r],o=e.nodeIndices[r],i=a.inboundNodes[o],l=null==t[i.id]?0:t[i.id];t[i.id]=Math.max(s+1,l),n[i.id]=i}}const p={};for(const e in t){const r=t[e];r in p||(p[r]=[]),p[r].push(n[e])}const d={};for(const e in r){const t=r[e];t in d||(d[t]=[]),d[t].push(a[e])}let h=Object.keys(d).map((e=>parseInt(e,10))).sort(xg);this.layers=[];for(const e of h){const t=d[e];t.sort(((e,t)=>{const n=s[e.id],r=s[t.id];return n<r?-1:n>r?1:0}));for(const e of t)e instanceof Ny&&this.internalContainerRefs.push(e),this.layers.push(e)}this.layersByDepth=d,h=Object.keys(p).map((e=>parseInt(e,10))).sort(xg);const f=this.inputs.slice(),m=[];for(const e of h)for(const t of p[e]){const e=t.outboundLayer;if(null!=e){for(const n of t.inputTensors)if(-1===f.indexOf(n))throw new og(`Graph disconnected: cannot obtain value for tensor ${n} at layer "${e.name}". The following previous layers were accessed without issue: ${m}`);for(const e of t.outputTensors)f.push(e);m.push(e.name)}}this.nodesByDepth=p;const g=this.layers.map((e=>e.name));for(const e of g){const t=g.filter((t=>t===e)).length;if(1!==t)throw new og(`The name "${e}" is used ${t} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new Cb({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map((e=>null)),outputMasks:this.outputs.map((e=>null)),inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs.map((e=>e.shape))}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach((t=>{t._trainableWeights.forEach((t=>t.trainable=e))})),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new ig("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,t=!0){const n={};let r=0;for(const e of this.layers)for(const t of e.weights){if(null!=n[t.originalName])throw new ig(`Duplicate weight name: ${t.originalName}`);n[t.originalName]=t,r++}const a=[];for(const r in e){let s=r;if(null==n[r]){const e=r.split("/");s=e.slice(0,-2).concat([e[e.length-1]]).join("/")}if(null!=n[s])a.push([n[s],e[r]]);else if(t)throw new ig(`Provided weight data has no target variable: ${r}`);delete n[s]}if(t){const e=[];for(const t in n)e.push(t);if(e.length>0)throw new ig(`${e.length} of ${r} weights are not set: ${e}`)}yb(a)}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion=`tfjs-layers ${xy}`,t.backend="TensorFlow.js",t}toJSON(e,t=!0){const n=wy(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return el((()=>{e=fg(e);const n=new ky;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return Ey(this.outputs,n,t)}))}computeMask(e,t){return el((()=>{let n;return e=fg(e),n=null==t?cg(null,e.length):fg(t),this.runInternalGraph(e,n)[1]}))}computeOutputShape(e){const t=db(e);if(t.length!==this.inputLayers.length)throw new ig(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const n={};for(let e=0;e<t.length;e++){const r=this.inputLayers[e],a=t[e];n[r.name+"_0_0"]=a}const r=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(xg);if(r.length>1)for(const e of r){const t=this.nodesByDepth[e];for(const e of t){const t=e.outboundLayer;if(-1!==this.inputLayers.map((e=>e.id)).indexOf(t.id))continue;const r=[];for(let t=0;t<e.inboundLayers.length;t++){const a=e.inboundLayers[t],s=e.nodeIndices[t],o=e.tensorIndices[t],i=n[`${a.name}_${s}_${o}`];r.push(i)}const a=db(t.computeOutputShape(hg(r))),s=t.inboundNodes.indexOf(e);for(let e=0;e<a.length;e++){n[`${t.name}_${s}_${e}`]=a[e]}}}const a=[],s=[];for(let e=0;e<this.outputLayers.length;e++){const t=this.outputLayers[e],n=this.outputLayersNodeIndices[e],r=this.outputLayersTensorIndices[e],a=`${t.name}_${n}_${r}`;s.push(a)}for(let e=0;e<s.length;e++){const t=s[e];pg(t in n),a.push(n[t])}return hg(a)}runInternalGraph(e,t){null==t&&(t=cg(null,e.length));const n={};for(let r=0;r<this.inputs.length;++r){const a=this.inputs[r],s=e[r],o=t[r];n[a.id]=[s,o]}const r=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(xg);for(const e of r){const t=this.nodesByDepth[e];for(const e of t){const t=e.outboundLayer,r=e.inputTensors,a=e.outputTensors,s=new Array;for(const e of r)e.id in n&&s.push(n[e.id]);if(s.length===r.length){let r,o,i,l,u={};if(null!=e.callArgs&&(u=e.callArgs),1===s.length){const[e,n]=s[0];null==u.mask&&(u.mask=n),i=fg(t.call(e,u)),l=fg(t.computeMask(e,n)),r=[e],o=[n]}else r=s.map((e=>e[0])),o=s.map((e=>e[1])),null==u.mask&&(u.mask=o),i=fg(t.call(r,u)),l=fg(t.computeMask(r,o));if(t.activityRegularizer)throw new lg("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<a.length;++e){const t=a[e],r=i[e],s=l[e];n[t.id]=[r,s]}}}}const a=[],s=[],o=[];for(const e of this.outputs){pg(e.id in n,`Could not compute output ${e.name} : ${e.id}`);const[t,r]=n[e.id];o.push(t.shape),a.push(t),s.push(r)}return[a,s,o]}buildNodeConversionMap(e){const t={};let n;for(const e of this.layers){n=e instanceof Ny?1:0;for(let r=0;r<e.inboundNodes.length;r++){const a=Ny.nodeKey(e,r);this.containerNodes.has(a)&&(t[a]=n,n+=1)}}return t}getLayer(e,t){if(null!=t){if(this.layers.length<=t)throw new ig(`Was asked to retrieve layer at index ${t}, but model only has ${this.layers.length} layer(s).`);return this.layers[t]}if(null==e)throw new ig("Provide either a layer name or layer index");for(const t of this.layers)if(t.name===e)return t;throw new ig(`No such layer: ${e}`)}calculateLosses(){return el((()=>{const e=[];for(const t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){const r=Ny.nodeKey(t,n);this.containerNodes.has(r)&&e.push(...t.calculateLosses())}return e}))}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(const e of this.layers){const r=e.getClassName(),a=e.getConfig(),s=[];for(let n=0;n<e.inboundNodes.length;n++){const r=e.inboundNodes[n],a=Ny.nodeKey(e,n);let o={};if(this.containerNodes.has(a)){if(r.callArgs)try{JSON.stringify(r.callArgs),o=r.callArgs}catch(t){console.warn(`Layer ${e.name} was passed non-serializable keyword arguments: ${r.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),o={}}if(r.inboundLayers.length>0){const e=[];for(let n=0;n<r.inboundLayers.length;n++){const a=r.inboundLayers[n],s=r.nodeIndices[n],i=r.tensorIndices[n];let l=t[Ny.nodeKey(a,s)];null==l&&(l=0),e.push([a.name,l,i,o])}s.push(e)}}}const o={};o.name=e.name,o.className=r,o.config=a,o.inboundNodes=s,n.push(o)}e.layers=n;const r=[];for(let e=0;e<this.inputLayers.length;e++){const n=this.inputLayers[e],a=this.inputLayersNodeIndices[e],s=Ny.nodeKey(n,a);if(!this.containerNodes.has(s))continue;let o=t[s];null==o&&(o=0);const i=this.inputLayersTensorIndices[e];r.push([n.name,o,i])}e.inputLayers=r;const a=[];for(let e=0;e<this.outputLayers.length;e++){const n=this.outputLayers[e],r=this.outputLayersNodeIndices[e],s=Ny.nodeKey(n,r);if(!this.containerNodes.has(s))continue;let o=t[s];null==o&&(o=0);const i=this.outputLayersTensorIndices[e];a.push([n.name,o,i])}return e.outputLayers=a,e}static fromConfig(e,t,n={},r=!1){const a={},s={};function o(e,t){e.name in s?s[e.name].push(t):s[e.name]=[t]}function i(e,t){const n=[];let r;for(const s of t){const i=s[0],l=s[1],u=s[2];if(r=null==s[3]?{}:s[3],!(i in a))return void o(e,t);const c=a[i];if(c.inboundNodes.length<=l)return void o(e,t);const p=c.inboundNodes[l];n.push(p.outputTensors[u])}n.length>0&&e.apply(hg(n),r)}function l(e){const n=e.name,s=zb(e,null!=t.customObjects?t.customObjects:{});s.setFastWeightInitDuringBuild(r),a[n]=s;e.inboundNodes.forEach((e=>{if(!(e instanceof Array))throw new ig(`Corrupted configuration, expected array for nodeData: ${e}`);o(s,e)}))}const u=t.name,c=t.layers;for(const e of c)l(e);for(;!Cg(s);)for(const e of c){const t=a[e.name];if(t.name in s){const e=s[t.name];delete s[t.name];for(const n of e)i(t,n)}}const p=[],d=[],h=t.inputLayers;for(const e of h){const t=e[0],n=e[1],r=e[2];pg(t in a);const s=a[t].inboundNodes[n].outputTensors;p.push(s[r])}const f=t.outputLayers;for(const e of f){const t=e[0],n=e[1],r=e[2];pg(t in a);const s=a[t].inboundNodes[n].outputTensors;d.push(s[r])}return new e({inputs:p,outputs:d,name:u})}get stateful(){if(this._stateful)throw new ig("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){el((()=>{this.layers.forEach((e=>{e.stateful&&e.resetStates()}))}))}}function Oy(e,t,n){const r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>null));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error(`Provided ${n} is an array of ${e.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){const n=[];return t.forEach((t=>{t in e?n.push(e[t]):n.push(null)})),n}throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(e)}`)}function Ay(e,t){return Oy(e,t,"classWeight")}async function My(e,t,n,r){if(null!=t||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const t=el((()=>{if(1===e.shape.length)return Ao(e);if(2===e.shape.length){if(e.shape[1]>1){return ql(e,1)}if(1===e.shape[1])return fu(e,[e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)})),r=Array.from(await t.data());tl(t);const a=[];return r.forEach((e=>{if(null==n[e])throw new Error(`classWeight must contain all classes in the training data. The class ${e} exists in the data but not in classWeight`);a.push(n[e])})),ad(a,"float32")}return null}function _y(e,t){return gl(e,t)}function Ry(e,t){let n,r;const a=t;n=a.xs,r=a.ys,re(null!=n&&null!=r,(()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`));const s=Py("input",e.inputNames,n),o=Py("output",e.outputNames,r),i=s[0].shape[0];re(s.length===e.inputs.length,(()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`)),re(o.length===e.outputs.length,(()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`));for(let t=0;t<s.length;t++)re(s[t].shape[0]===i,(()=>`Batch size mismatch: input ${e.inputNames[t]} has ${s[t].shape[0]}; expected  ${i} based on input ${e.inputNames[0]}.`));for(let t=0;t<o.length;t++)re(o[t].shape[0]===i,(()=>`Batch size mismatch: output ${e.outputNames[t]} has ${o[t].shape[0]}; expected  ${i} based on input ${e.inputNames[0]}.`));return{xs:s,ys:o}}function Py(e,t,n){if(n instanceof Ka)return[n];if(Array.isArray(n))return re(n.length===t.length,(()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`)),n;{const r=[];for(const a of t){if(null==n[a])throw new ig(`The feature data generated by the dataset lacks the required ${e} key '${a}'.`);r.push(n[a])}return r}}async function Dy(e,t,n){const r=null!=n.batchesPerEpoch;if(re(null!=e.optimizer,(()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig).")),re(null!=n,(()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call.")),re(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),(()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`)),re(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),(()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`)),re(null==n.validationSplit,(()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead.")),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const a=null!=n.validationData;let s,o;if(a)if(Ly(n.validationData))re(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),(()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`));else{const e=function(e){if(3===e.length)throw new lg("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);s=e.xs,o=e.ys}const i=e.makeTrainFunction(),l=e.getDedupedMetricsNames();let u;u=a?l.slice().concat(l.map((e=>"val_"+e))):l.slice();const c=Lb(n.callbacks,n.yieldEvery),p=null==n.verbose?1:n.verbose,{callbackList:d,history:h}=Fb(c,p,n.epochs,null,null,function(e,t){let n=null;null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size);return n}(t,n),null,a,u);d.setModel(e),e.history=h,await d.onTrainBegin(),e.stopTraining_=!1;let f=null==n.initialEpoch?0:n.initialEpoch,m=await t.iterator();for(;f<n.epochs;){const u={};await d.onEpochBegin(f);let c=0,p=0;for(r||(m=await t.iterator());!r||c<n.batchesPerEpoch;){const t=await m.next();if(r&&t.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${c} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, `+n.batchesPerEpoch*n.epochs+" batches). You may need to use the repeat() function when building your dataset.");break}if(null!=t.value){const{xs:r,ys:a}=Ry(e,t.value),s={};s.batch=p,s.size=r[0].shape[0],await d.onBatchBegin(p,s);const o=[];if(null!=n.classWeight){const t=Ay(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)o.push(await My(a[e],null,t[e]))}const u=r.concat(a).concat(o),h=i(u);tl(u);for(let e=0;e<l.length;++e){const t=l[e],n=h[e];s[t]=n,nl(n)}await d.onBatchEnd(p,s),Ob(s),p++,c++}if(r?c>=n.batchesPerEpoch:t.done){if(a){let t;t=Ly(n.validationData)?fg(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):fg(e.evaluate(s,o,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)u[`val_${e.metricsNames[n]}`]=t[n]}break}if(e.stopTraining_)break}if(await d.onEpochEnd(f,u),f++,e.stopTraining_)break}return await d.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function Ly(e){return"function"==typeof e.iterator}function By(e){re(e>0&&Number.isInteger(e),(()=>`batchSize is required to be a positive integer, but got ${e}`))}function Fy(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((e=>cv(e,t,n-t))):cv(e,t,n-t)}function zy(e,t){return el((()=>null==e?null:Array.isArray(e)?e.map((e=>zy(e,t))):bv(e,"int32"===t.dtype?t:Oo(t,"int32"))))}function Vy(e,t){const n=[];let r=0,a=null;for(;r<e;)a=r+t,a>=e&&(a=e),n.push([r,a]),r=a;return n}async function Wy(e,t,n,r={}){if(e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");let a,s,o,i,l,u,c,p,d;e.isTraining=!0;try{const h=null==r.batchSize?32:r.batchSize;By(h);const f=!1,m=await e.standardizeUserData(t,n,r.sampleWeight,r.classWeight,f,h);a=m[0],s=m[1],d=m[2];let g,v=!1;if(null!=r.validationData&&r.validationData.length>0){if(v=!0,2!==r.validationData.length)throw 3===r.validationData.length?new lg("validationData including sample weights is not supported yet."):new ig(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);l=r.validationData[0],u=r.validationData[1];const t=!0,n=await e.standardizeUserData(l,u,null,null,t,h);c=n[0],p=n[1],g=c.concat(p)}else if(null!=r.validationSplit&&r.validationSplit>0&&r.validationSplit<1){v=!0;const e=Math.floor(a[0].shape[0]*(1-r.validationSplit)),t=a[0].shape[0];c=Fy(a,e,t),o=a,a=Fy(a,0,e),p=Fy(s,e,t),i=s,s=Fy(s,0,e),g=c.concat(p)}else null!=r.validationSteps&&(v=!0);const b=a.concat(s).concat(d);e.checkTrainableWeightsConsistency();const y=e.makeTrainFunction(),w=e.getDedupedMetricsNames();let x,k;v?(e.makeTestFunction(),x=e.testFunction,k=w.slice().concat(w.map((e=>"val_"+e)))):(x=null,g=[],k=w.slice());const C=Lb(r.callbacks,r.yieldEvery),S=await async function(e,t,n,r,a,s,o,i,l,u,c,p,d,h,f){null==a&&(a=32),null==s&&(s=1),null==c&&(c=!0),null==d&&(d=0);let m=!1;if(null!=l&&null!=u&&(m=!0),null!=f&&(m=!0,null==h))throw new ig("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=e.checkNumSamples(n,a,h,"steps_per_epoch");let v;null!=g&&(v=iv(0,g)),null==o&&(o=1);const{callbackList:b,history:y}=Fb(i,o,s,d,g,h,a,m,p);b.setModel(e),e.history=y,await b.onTrainBegin(),e.stopTraining_=!1;for(let o=d;o<s;++o){await b.onEpochBegin(o);const s={};if(null!=h)throw new lg("stepsPerEpoch mode is not implemented yet.");{if("batch"===c)throw new lg("batch shuffling is not implemneted yet");c&&K(v);const o=ad(v),i=Vy(g,a);for(let c=0;c<i.length;++c){const p={};if(await b.onBatchBegin(c,p),el((()=>{const d=i[c][0],h=i[c][1],f=cv(o,d,h-d);p.batch=c,p.size=h-d;const g=zy(n,f),v=t(g);for(let e=0;e<r.length;++e){const t=r[e],n=v[e];p[t]=n,nl(n)}if(c===i.length-1&&m){const t=e.testLoop(l,u,a);for(let e=0;e<r.length;++e){const n=r[e],a=t[e];nl(a),s["val_"+n]=a}}})),await b.onBatchEnd(c,p),Ob(p),e.stopTraining_)break}o.dispose()}if(await b.onEpochEnd(o,s),e.stopTraining_)break}return await b.onTrainEnd(),await e.history.syncData(),e.history}(e,y,b,w,h,r.epochs,r.verbose,C,x,g,r.shuffle,k,r.initialEpoch,null,null);return S}finally{e.isTraining=!1,jy(a,t),jy(s,n),jy(o,t),jy(i,n),jy(c,l),jy(p,u),null!=d&&tl(d)}}function Hy(e){const t=[];e instanceof Ka&&(e=[e]);for(let n=0;n<e.length;++n){const r=e[n];if(1===r.rank)t.push(uv(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function jy(e,t){if(null==e)return;const n=[];if(t instanceof Ka)n.push(t.id);else if(Array.isArray(t))t.forEach((e=>n.push(e.id)));else if(null!=t)for(const e in t){const r=t[e];n.push(r.id)}const r=[];if(e instanceof Ka)-1===n.indexOf(e.id)&&r.push(e);else if(Array.isArray(e))e.forEach((e=>{-1===n.indexOf(e.id)&&r.push(e)}));else if(null!=e)for(const t in e){const a=e[t];-1===n.indexOf(a.id)&&r.push(a)}r.forEach((e=>{e.isDisposed||e.dispose()}))}function Uy(e){return Array.isArray(e)}function Gy(e){return!function(e){return e instanceof Ka}(e)&&!Uy(e)}function qy(e,t,n,r=!0,a=""){if(null==t||0===t.length){if(null!=e){let t=!1;if(Uy(e)&&e.length>0)t=!0;else if(Gy(e)){for(const n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new ig(`Error when checking model ${a} expected no data, but got ${e}`)}return[]}if(null==e)return t.map((e=>null));let s;if(Gy(e)){e=e,s=[];for(const n of t){if(null==e[n])throw new ig(`No data provided for "${n}". Need data for each key in: ${t}`);s.push(e[n])}}else if(Uy(e)){if((e=e).length!==t.length)throw new ig(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);s=e}else{if(e=e,t.length>1)throw new ig(`The model ${a} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);s=[e]}if(s=Hy(s),null!=n)for(let e=0;e<t.length;++e){if(null==n[e])continue;const o=s[e];if(o.shape.length!==n[e].length)throw new ig(`Error when checking ${a}: expected ${t[e]} to have ${n[e].length} dimension(s). but got array with shape ${o.shape}`);for(let t=0;t<n[e].length;++t){if(0===t&&!r)continue;const s=o.shape[t],i=n[e][t];if(null!=i&&i>=0&&s!==i)throw new ig(`${a} expected a batch of elements where each example has shape [${n[e].slice(1,n[e].length)}] (i.e.,tensor shape [*,${n[e].slice(1,n[e].length)}]) but the ${a} received an input with ${o.shape[0]} examples, each with shape [${o.shape.slice(1,o.shape.length)}] (tensor shape [${o.shape}])`)}}return s}function Xy(e,t,n,r=!0,a=""){let s;if(Array.isArray(e)){if(e.length!==t.length)throw new ig(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${e.length} Tensors(s).`);s=e}else{if(t.length>1)throw new ig(`The model expects ${t.length} ${a} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);s=[e]}if(null!=n)for(let e=0;e<t.length;++e){if(null==n[e])continue;const o=s[e];if(o.shape.length!==n[e].length)throw new ig(`Error when checking ${a}: expected ${t[e]} to have ${n[e].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let s=0;s<n[e].length;++s){if(0===s&&!r)continue;const i=o.shape[s],l=n[e][s];if(null!=l&&l!==i)throw new ig(`Error when checking ${a}: expected ${t[e]} to have shape ${JSON.stringify(n[e])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}class Ky extends Ny{constructor(e){super(e),this.isTraining=!1}summary(e,t,n=console.log){if(!this.built)throw new ig("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");fy(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer_=function(e){const t={Adagrad:()=>zh.adagrad(.01),Adadelta:()=>zh.adadelta(1,.95,ag()),Adam:()=>zh.adam(.001,.9,.999,ag()),Adamax:()=>zh.adamax(.002,.9,.999,ag(),0),RMSProp:()=>zh.rmsprop(.001,.9,0,ag()),SGD:()=>zh.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new ig(`Unknown Optimizer ${e}`)}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Il))throw new ig("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new ig(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);const n=e.loss;t=n.map((e=>Zb(e)))}else{const n=Zb(e.loss);this.outputs.forEach((e=>{t.push(n)}))}else{e.loss=e.loss;for(const t in e.loss)if(-1===this.outputNames.indexOf(t))throw new ig(`Unknown entry in loss dictionary: "${t}". Only expected the following keys: ${this.outputNames}`);for(const n of this.outputNames)null==e.loss[n]&&console.warn(`Output "${n}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${n} during training`),t.push(Zb(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let e=0;e<this.outputs.length;++e){const t=this.internalOutputShapes[e],n=this.outputNames[e];this.feedOutputNames.push(n),this.feedOutputShapes.push(t),this.feedLossFns.push(this.lossFunctions[e])}const n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Qg("loss",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}}));const r=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>[]));let n;if("string"==typeof e||"function"==typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!=typeof e)throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${e}`);n=e}if(Array.isArray(n))return t.map((e=>n));{const e=[];for(const r of t){let t=n.hasOwnProperty(r)?n[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}(e.metrics,this.outputNames),a=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};Qg("metric",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;(t=>{let n,r,s;for(const o of t){if("string"==typeof o&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(o)){const t=this.internalOutputShapes[e];let a;1===t[t.length-1]||this.lossFunctions[e]===Xb?-1!==["accuracy","acc"].indexOf(o)?r=Qb:-1!==["crossentropy","ce"].indexOf(o)&&(r=ay):this.lossFunctions[e]===qb?-1!==["accuracy","acc"].indexOf(o)?r=sy:-1!==["crossentropy","ce"].indexOf(o)&&(r=iy):-1!==["accuracy","acc"].indexOf(o)?r=ey:-1!==["crossentropy","ce"].indexOf(o)&&(r=oy),-1!==["accuracy","acc"].indexOf(o)?a="acc":-1!==["crossentropy","ce"].indexOf(o)&&(a="ce"),s=r,n=""+a}else{const e=uy(o);s=e,n=""+cy(o)}let t;Qg(n,(()=>{t=s})),a(e,n,t)}})(r[e])}})),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,n={}){const r=null==n.batchSize?32:n.batchSize;By(r);const a=this.standardizeUserDataXY(e,t,!0,r);try{const s=a[0].concat(a[1]);this.makeTestFunction();const o=this.testFunction;return hg(this.testLoop(o,s,r,n.verbose,n.steps))}finally{jy(a[0],e),jy(a[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),async function(e,t,n){const r=null!=(n=n||{}).batches,a=e.testFunction;let s=[];if(n.verbose>0)throw new lg("Verbose mode is not implemented yet.");re(!r||n.batches>0&&Number.isInteger(n.batches),(()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`));const o="function"==typeof t.next?t:await t.iterator();let i=0,l=0;for(;!r||l<n.batches;){const t=await o.next();if(s=el((()=>{if(t.value){const{xs:n,ys:r}=Ry(e,t.value),o=n.concat(r),u=el((()=>a(o)));if(tl(o),0===l)for(let e=0;e<u.length;++e)s.push($l(0));const c=o[0].shape[0];for(let e=0;e<u.length;++e){const t=u[e],n=s[e];s[e]=el((()=>hl(s[e],gl(c,t)))),l>0&&tl(n)}tl(u),i+=c,++l}return s})),t.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let e=0;e<s.length;++e){const t=s[e];s[e]=ml(s[e],i),tl(t)}return hg(s)}(this,e,t)}checkNumSamples(e,t,n,r="steps"){let a;if(null!=n){if(a=null,null!=t)throw new ig(`If ${r} is set, batchSize must be null or undefined.Got batchSize = ${t}`)}else{if(null==e)throw new ig(`Either the input data should have a defined shape, or ${r} shoud be specified.`);a=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return a}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new ig("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),s=new ky;if(e instanceof Ka&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new ig(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let t=0;t<this.inputs.length;++t)s.add(this.inputs[t],e[t])}else for(const t of this.inputs){const n=e[t.name];if(null==n)throw new ig(`No value is provided for the model's input ${t.name}`);s.add(t,n)}const o=Ey(a,s);return n?o:o[0]}retrieveSymbolicTensors(e){const t=cg(null,e.length);let n=e.length;for(const r of this.layers){const a=Array.isArray(r.output)?r.output:[r.output],s=a.map((e=>e.name));for(let r=0;r<e.length;++r){const o=s.indexOf(e[r]);if(-1!==o&&(t[r]=a[o],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw t.forEach(((t,r)=>{null==t&&n.push(e[r])})),new ig(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(n)}`)}return t}predictLoop(e,t=32,n=!1){return el((()=>{const r=this.checkNumSamples(e);if(n)throw new lg("Verbose predictLoop() is not implemented yet.");const a=Vy(r,t),s=this.outputs.map((e=>[]));for(let t=0;t<a.length;++t){el((()=>{const n=a[t][0],r=a[t][1],s=Fy(e,n,r),o=[];if(Array.isArray(s))for(let e=0;e<s.length;++e)o.push({key:this.inputs[e],value:s[e]});else o.push({key:this.inputs[0],value:s});const i=new ky(o);return Ey(this.outputs,i)})).forEach(((e,t)=>s[t].push(e)))}return hg(s.map((e=>vu(e,0))))}))}predict(e,t={}){const n=Hy(e);Xy(n,this.inputNames,this.feedInputShapes,!1);try{const r=null==t.batchSize?32:t.batchSize;return By(r),this.predictLoop(n,r)}finally{jy(n,e)}}predictOnBatch(e){Xy(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,n=!0,r){if(null==this.optimizer_)throw new og("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const a=[];for(let e=0;e<this.feedOutputShapes.length;++e){const t=this.feedOutputShapes[e];this.feedLossFns[e]===qb?a.push(t.slice(0,t.length-1).concat([1])):a.push(t)}if(function(e,t,n){const r=kg(e.map((e=>e.shape[0])));r.sort();const a=kg(t.map((e=>e.shape[0])));if(a.sort(),r.length>1)throw new ig(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map((e=>e.shape)))}`);if(a.length>1)throw new ig(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map((e=>e.shape)))}`);if(r.length>0&&a.length>0&&!ue(r,a))throw new ig(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${a[0]} target sample(s).`)}(e=qy(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=qy(t,this.feedOutputNames,a,!1,"target")),function(e,t,n){const r=[Wb,Xb,Gb];for(let a=0;a<e.length;++a){const s=e[a],o=t[a],i=n[a];if(null!=o){if(o===Gb&&1===s.shape[s.shape.length-1])throw new ig(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(-1!==r.indexOf(o)){const e=s.shape.slice(1),t=i.slice(1);for(let n=0;n<e.length;++n){const r=e[n],a=t[n];if(null!=a&&r!==a)throw new ig(`A target Tensor with shape ${s.shape} was passed for an output of shape ${i}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=r&&r>0&&e[0].shape[0]%r!=0)throw new ig(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${r}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,n,r,a=!0,s){const[o,i]=this.standardizeUserDataXY(e,t,a,s);if(null!=n)throw new Error("sample weight is not supported yet.");let l=null;if(null!=r){const e=Ay(r,this.outputNames);l=[];for(let t=0;t<e.length;++t)l.push(await My(i[t],null,e[t]))}return[o,i,l]}testLoop(e,t,n,r=0,a){return el((()=>{const s=this.checkNumSamples(t,n,a,"steps"),o=[];if(r>0)throw new lg("Verbose mode is not implemented yet.");if(null!=a)throw new lg("steps mode in testLoop() is not implemented yet");{const r=Vy(s,n),a=ad(iv(0,s));for(let n=0;n<r.length;++n){const s=r[n][0],i=r[n][1],l=cv(a,s,i-s),u=zy(t,l),c=e(u);if(0===n)for(let e=0;e<c.length;++e)o.push($l(0));for(let e=0;e<c.length;++e){const t=c[e];o[e]=hl(o[e],gl(i-s,t))}}for(let e=0;e<o.length;++e)o[e]=ml(o[e],s)}return o}))}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){const r=e[n];let a=r;if(dg(e,r)>1){a+=`_${dg(e.slice(0,n),r)}`}t.push(a)}return t}makeTrainFunction(){return e=>{const t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),s=[],o=this.collectedTrainableWeights.map((e=>e.read()));return[this.optimizer_.minimize((()=>{const e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});const o=new ky(e),i=Ey(this.outputs,o,{training:!0});let l;for(let e=0;e<this.lossFunctions.length;++e){let n=(0,this.lossFunctions[e])(r[e],i[e]);null!=a[e]&&(n=_y(n,a[e]));const s=qc(n);t.push(s),l=0===e?n:hl(l,n)}for(let e=0;e<this.metricsTensors.length;++e){let n;if(this.outputs.length>1&&e<this.outputs.length)n=t[e];else{const t=this.metricsTensors[e][0],a=this.metricsTensors[e][1];n=qc(t(r[a],i[a]))}nl(n),s.push(n)}return l=qc(l),this.calculateLosses().forEach((e=>{l=hl(l,e)})),l}),!0,o)].concat(s)}}makeTestFunction(){this.testFunction=e=>el((()=>{const t=[];let n;const r=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=[];for(let e=0;e<this.inputs.length;++e)s.push({key:this.inputs[e],value:r[e]});const o=new ky(s),i=Ey(this.outputs,o);for(let e=0;e<this.lossFunctions.length;++e){const r=this.lossFunctions[e],s=qc(r(a[e],i[e]));n=0===e?s:hl(n,s),t.push(n)}for(let e=0;e<this.metricsTensors.length;++e){const n=this.metricsTensors[e][0],r=this.metricsTensors[e][1],s=qc(n(a[r],i[r]));t.push(s)}return t}))}async fit(e,t,n={}){return Wy(this,e,t,n)}async fitDataset(e,t){return Dy(this,e,t)}async trainOnBatch(e,t){const n=await this.standardizeUserData(e,t),r=n[0],a=n[1],s=this.makeTrainFunction()(r.concat(a)),o=[];for(const e of s){const t=await e.data();o.push(t[0])}return tl(s),jy(n[0],e),jy(n[1],t),hg(o)}getNamedWeights(e){const t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n);for(let e=0;e<r.length;++e)n&&!r[e].trainable||t.push({name:r[e].originalName,tensor:a[e]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const t=Zi().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-Zi().numTensors}return e}getLossIdentifiers(){let e;if("string"==typeof this.loss)e=mg(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!=typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map((e=>mg(e)))}else{const t=Object.keys(this.loss);e={};const n=this.loss;for(const r of t){if("string"!=typeof n[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=mg(n[r])}}return e}getMetricIdentifiers(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[mg(cy(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((e=>mg(cy(e))));{const e={};for(const t in this.metrics)e[t]=mg(cy(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=zb(yy(e.optimizer_config));let n,r;if("string"==typeof e.loss)n=gg(e.loss);else if(Array.isArray(e.loss))n=e.loss.map((e=>gg(e)));else if(null!=e.loss){n={};for(const t in e.loss)n[t]=gg(e.loss[t])}if(Array.isArray(e.metrics))r=e.metrics.map((e=>gg(e)));else if(null!=e.metrics){r={};for(const t in e.metrics)r[t]=gg(e.metrics[t])}this.compile({loss:n,metrics:r,optimizer:t})}async save(e,t){if("string"==typeof e){const t=qs(e);if(0===t.length)throw new ig(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new ig(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw new ig("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const n=await _s(this.getNamedWeights(t)),r={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:`TensorFlow.js tfjs-layers v${xy}`,convertedBy:null};if(null!=t&&t.includeOptimizer&&null!=this.optimizer){r.trainingConfig=this.getTrainingConfig();const e="optimizer",{data:t,specs:a}=await _s(await this.optimizer.getWeights(),e);n.specs.push(...a),n.data=Bs([n.data,t])}if(null!=this.userDefinedMetadata){const e=!0;dy(this.userDefinedMetadata,this.name,e),r.userDefinedMetadata=this.userDefinedMetadata}return r.weightData=n.data,r.weightSpecs=n.specs,e.save(r)}setUserDefinedMetadata(e){dy(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}Ky.className="Model",_i(Ky);class Yy extends Ky{}async function Jy(e,t){"modelTopology"in e||(e={modelTopology:e});let n=(e=e).modelTopology;null!=n.model_config&&(n=n.model_config);const r=zb(yy(n),t);if(null!=e.weightsManifest){const t=await Fo(e.weightsManifest,e.pathPrefix,r.weights.map((e=>e.originalName))),n={};for(const e of r.weights)n[e.originalName]=t[e.originalName];r.loadWeights(n),tl(t)}return r}async function Zy(e,t){if(null==t&&(t={}),"string"==typeof e){const n=Xs(e,t);if(0===n.length)n.push(Uo(e,t));else if(n.length>1)throw new ig(`Found more than one (${n.length}) load handlers for URL '${e}'`);e=n[0]}return async function(e,t,n){null==n&&(n={});if(null==e.load)throw new ig("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const r=await e.load();let a=r.modelTopology;null!=a.model_config&&(a=a.model_config);const s=null==n.strict||n.strict,o=null!=r.weightData&&null!=r.weightSpecs&&s,i=zb(yy(a),t,o),l=r.trainingConfig;null!=l&&i.loadTrainingConfig(l);null!=r.userDefinedMetadata&&i.setUserDefinedMetadata(r.userDefinedMetadata);if(null!=r.weightData){if(null==r.weightSpecs)throw new ig("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:e,optimizerWeights:t}=function(e,t){const n=Rs(e,t),r={},a=[];return t.forEach((e=>{"optimizer"===e.group?a.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]})),{modelWeights:r,optimizerWeights:a}}(r.weightData,r.weightSpecs);i.loadWeights(e,s),null!=i.optimizer&&t.length>0&&await i.optimizer.setWeights(t),tl(e),tl(t.map((e=>e.tensor)))}return i}(e,void 0,t)}Yy.className="Functional",_i(Yy);class Qy extends Ky{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:cb("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some((e=>e<0)))throw new ig(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const t=e instanceof Qy||e instanceof Ky;let n;if(t){if(n=e,1!==n.outputs.length)throw new ig("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new ig("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new ig("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=Ib({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new ig(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(1!==e.inboundNodes[0].outputTensors.length)throw new ig("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=Tb(this.outputs[0])}this.inboundNodes=[],new Cb({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:cg(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if(fb(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Ky({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,n=console.log){this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t,n={}){if(!this.built)throw new og("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new og("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,n={}){if(!this.built)throw new og("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new og("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,n={},r=!1){let a,s={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new ig("Legacy serialization format not supported yet.");a=t}else re(null!=t.layers,(()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field.")),a=t.layers,delete t.layers,s=t;const o=new e(s);if(!(o instanceof Qy))throw new lg(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const e of a){const t=zb(e,void 0,r);r&&t.setFastWeightInitDuringBuild(!0),o.add(t)}return o}set stopTraining(e){if(null==this.model)throw new ig("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new ig("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}}function ew(e){return new Ky(e)}function tw(e){return new Qy(e)}function nw(e,t){return null==t&&(t={}),Zy(e,t)}function rw(e){return Ib(e)}function aw(e,t){Bb.registerCallbackConstructor(e,t)}Qy.className="Sequential",_i(Qy);class sw extends Ai{getConfig(){return{}}}class ow extends sw{apply(e,t=1){return function(e,t=1){if(1!==t)throw new lg(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return rc(e)}(e,t)}}ow.className="elu",_i(ow);class iw extends sw{apply(e){return Dp(e)}}iw.className="selu",_i(iw);class lw extends sw{apply(e){return $p(e)}}lw.className="relu",_i(lw);class uw extends sw{apply(e){return el((()=>Zc(6,$p(e))))}}uw.className="relu6",_i(uw);class cw extends sw{apply(e){return e}}cw.className="linear",_i(cw);class pw extends sw{apply(e){return bu(e)}}pw.className="sigmoid",_i(pw);class dw extends sw{apply(e){return function(e){return el((()=>{const t=hl(.5,gl(.2,e));return Au(t,0,1)}))}(e)}}dw.className="hardSigmoid",_i(dw);class hw extends sw{apply(e){return Tc(e)}}hw.className="softplus",_i(hw);class fw extends sw{apply(e){return function(e){return el((()=>ml(e,hl(Pl(e),1))))}(e)}}fw.className="softsign",_i(fw);class mw extends sw{apply(e){return wu(e)}}mw.className="tanh",_i(mw);class gw extends sw{apply(e,t=-1){return Gp(e,t)}}gw.className="softmax",_i(gw);class vw extends sw{apply(e,t=-1){return Oc(e,t)}}vw.className="logSoftmax",_i(vw);class bw extends sw{apply(e,t=1){return el((()=>gl(bu(gl(e,t)),e)))}}bw.className="swish",_i(bw);class yw extends sw{apply(e){return el((()=>gl(e,wu(Tc(e)))))}}function ww(e){return e.getClassName()}function xw(e,t={}){return wg(e,Mi.getMap().classNameMap,t,"activation")}function kw(e){if(null==e){const e={className:"linear",config:{}};return xw(e)}if("string"==typeof e){const t={};return t.className=e,t.config={},xw(t)}return e instanceof sw?e:xw(e)}function Cw(e){if(null!=e&&"object"!=typeof e)throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}yw.className="mish",_i(yw);class Sw extends Ai{}class Ew extends Sw{constructor(e){super(),Cw(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return el((()=>{let t=Xc([1]);return this.hasL1&&(t=hl(t,Nc(gl(this.l1,Pl(e))))),this.hasL2&&(t=hl(t,Nc(gl(this.l2,yv(e))))),fu(t,[])}))}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}Ew.className="L1L2",_i(Ew);const Tw={l1l2:"L1L2"};function $w(e){return bg(e)}function Iw(e,t={}){return wg(e,Mi.getMap().classNameMap,t,"regularizer")}function Nw(e){if(null==e)return null;if("string"==typeof e){return Iw({className:e in Tw?Tw[e]:e,config:{}})}return e instanceof Sw?e:Iw(e)}class Ow extends Eb{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=hb(e);let n=$p(e);return null!=this.maxValue&&(n=Au(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}Ow.className="ReLU",_i(Ow);class Aw extends Eb{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=hb(e);return bc(n,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}Aw.className="LeakyReLU",_i(Aw);class Mw extends Eb{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Uv(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Nw(e.alphaRegularizer),this.alphaConstraint=Bg(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!=typeof e.sharedAxes)throw new ig(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`);this.sharedAxes=[e.sharedAxes]}}build(e){const t=(e=fb(e)).slice(1);if(null!=this.sharedAxes)for(const e of this.sharedAxes)t[e-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let t=1;t<e.length;++t)n[t]=e[t];this.inputSpec=[new wb({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=hb(e),fp(e,this.alpha.read())}getConfig(){const e={alphaInitializer:jv(this.alphaInitializer),alphaRegularizer:$w(this.alphaRegularizer),alphaConstraint:Dg(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}Mw.className="PReLU",_i(Mw);class _w extends Eb{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new lg(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=hb(e);return rc(n)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}_w.className="ELU",_i(_w);class Rw extends Eb{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){const n=hb(e);return gl(n,Oo(dc(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}Rw.className="ThresholdedReLU",_i(Rw);class Pw extends Eb{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new gw).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){const n=hb(e);return this.softmax(n,this.axis)}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function Dw(e,t,n){if("number"==typeof e)return cg(e,t);if(e.length!==t)throw new ig(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let a=0;a<t;++a){const s=e[a];if((r=s)!==parseInt(r.toString(),10))throw new ig(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${s}`)}return e;var r}function Lw(e,t,n,r,a=1){if(null==e)return e;let s;return s="same"===n?e:e-(t+(t-1)*(a-1))+1,Math.floor((s+r-1)/r)}function Bw(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+ov([n-t,0]);else{if("same"!==r)throw new ig(`Unsupport padding mode: ${r}.`);e*=t}return e}function Fw(e,t){return el((()=>(Kg(t),"channelsFirst"===t?Zo(e,[0,2,3,1]):e)))}function zw(e,t){return el((()=>(Kg(t),"channelsFirst"===t?Zo(e,[0,2,3,4,1]):e)))}function Vw(e,t,n,r=1,a="valid",s,o=1){return el((()=>{if(null==s&&(s="channelsLast"),Kg(s),3!==e.shape.length)throw new ig(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(3!==t.shape.length)throw new ig(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(null!=n&&1!==n.shape.length)throw new ig(`The bias for a conv1dWithBias operation should be 1, but is ${t.shape.length} instead`);if("channelsFirst"===s&&(e=Zo(e,[0,2,1])),"causal"===a)throw new lg("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let i=Lu(e,t,r,"same"===a?"same":"valid","NWC",o);return null!=n&&(i=xv(i,n)),i}))}function Ww(e,t,n,r=[1,1],a="valid",s,o,i=null){return el((()=>{if(null==s&&(s="channelsLast"),Kg(s),3!==e.rank&&4!==e.rank)throw new ig(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(3!==t.rank&&4!==t.rank)throw new ig(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let l=Fw(e,s);if("causal"===a)throw new lg("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=_d({x:l,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:i}),"channelsFirst"===s&&(l=Zo(l,[0,3,1,2])),l}))}function Hw(e,t,n,r=[1,1,1],a="valid",s,o){return el((()=>{if(null==s&&(s="channelsLast"),Kg(s),4!==e.rank&&5!==e.rank)throw new ig(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(4!==t.rank&&5!==t.rank)throw new ig(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let i=zw(e,s);if("causal"===a)throw new lg("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return i=zu(i,t,r,"same"===a?"same":"valid","NDHWC",o),null!=n&&(i=xv(i,n)),"channelsFirst"===s&&(i=Zo(i,[0,4,1,2,3])),i}))}Pw.className="Softmax",_i(Pw);class jw extends Eb{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",jw.verifyArgs(t),this.rank=e,Tg(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new lg(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Dw(t.kernelSize,e,"kernelSize"),this.strides=Dw(null==t.strides?1:t.strides,e,"strides"),this.padding=null==t.padding?"valid":t.padding,Yg(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,Kg(this.dataFormat),this.activation=kw(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=Uv(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Bg(t.biasConstraint),this.biasRegularizer=Nw(t.biasRegularizer),this.activityRegularizer=Nw(t.activityRegularizer),this.dilationRate=Dw(null==t.dilationRate?1:t.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new ig(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(2===this.rank){if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new ig(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(3===this.rank)if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new ig(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}static verifyArgs(e){if(pg("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!Eg(e.kernelSize,"number",1,3))throw new ig(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:ww(this.activation),useBias:this.useBias,biasInitializer:jv(this.biasInitializer),biasRegularizer:$w(this.biasRegularizer),activityRegularizer:$w(this.activityRegularizer),biasConstraint:Dg(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class Uw extends jw{constructor(e,t){super(e,t),this.kernel=null,Uw.verifyArgs(t),this.filters=t.filters,Tg(this.filters,"filters"),this.kernelInitializer=Uv(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Bg(t.kernelConstraint),this.kernelRegularizer=Nw(t.kernelRegularizer)}build(e){e=fb(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new ig(`The channel dimension of the input should be defined. Found ${e[t]}`);const n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return el((()=>{let t;e=hb(e);const n=null==this.bias?null:this.bias.read(),r=Ig(this.activation.getClassName());if(null!=r&&2===this.rank)t=Ww(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)t=Vw(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=Ww(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new lg("convolutions greater than 3D are not implemented yet.");t=Hw(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t}))}computeOutputShape(e){e=fb(e);const t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let e=0;e<n.length;++e){const r=Lw(n[e],this.kernelSize[e],this.padding,this.strides[e],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[e]);t.push(r)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){const e={filters:this.filters,kernelInitializer:jv(this.kernelInitializer),kernelRegularizer:$w(this.kernelRegularizer),kernelConstraint:Dg(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new ig(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class Gw extends Uw{constructor(e){super(2,e),Gw.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!Eg(e.kernelSize,"number",1,2))throw new ig(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}Gw.className="Conv2D",_i(Gw);class qw extends Uw{constructor(e){super(3,e),qw.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new ig(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}qw.className="Conv3D",_i(qw);class Xw extends Gw{constructor(e){if(super(e),this.inputSpec=[new wb({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new ig(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(4!==(e=fb(e)).length)throw new ig("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new ig("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new wb({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return el((()=>{let t=hb(e);if(4!==t.shape.length)throw new ig(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${t.shape.length}`);const n=t.shape,r=n[0];let a,s;"channelsFirst"===this.dataFormat?(a=2,s=3):(a=1,s=2);const o=n[a],i=n[s],l=this.kernelSize[0],u=this.kernelSize[1],c=this.strides[0],p=this.strides[1],d=[r,Bw(o,c,l,this.padding),Bw(i,p,u,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=Zo(t,[0,2,3,1]));let h=Fu(t,this.kernel.read(),d,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(h=Zo(h,[0,3,1,2])),null!=this.bias&&(h=xv(h,this.bias.read(),this.dataFormat)),null!=this.activation&&(h=this.activation.apply(h)),h}))}computeOutputShape(e){const t=(e=fb(e)).slice();let n,r,a;"channelsFirst"===this.dataFormat?(n=1,r=2,a=3):(n=3,r=1,a=2);const s=this.kernelSize[0],o=this.kernelSize[1],i=this.strides[0],l=this.strides[1];return t[n]=this.filters,t[r]=Bw(t[r],i,s,this.padding),t[a]=Bw(t[a],l,o,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}Xw.className="Conv2DTranspose",_i(Xw);class Kw extends qw{constructor(e){if(super(e),this.inputSpec=[new wb({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new ig(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(5!==(e=fb(e)).length)throw new ig("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new ig("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new wb({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return el((()=>{let t=hb(e);if(5!==t.shape.length)throw new ig(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${t.shape.length}`);const n=t.shape,r=n[0];let a,s,o;"channelsFirst"===this.dataFormat?(o=2,a=3,s=4):(o=1,a=2,s=3);const i=n[o],l=n[a],u=n[s],c=this.kernelSize[0],p=this.kernelSize[1],d=this.kernelSize[2],h=this.strides[0],f=this.strides[1],m=this.strides[2],g=[r,Bw(i,h,c,this.padding),Bw(l,f,p,this.padding),Bw(u,m,d,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=Zo(t,[0,2,3,4,1]));let v=Wu(t,this.kernel.read(),g,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(v=Zo(v,[0,4,1,2,3])),null!==this.bias&&(v=xv(v,this.bias.read(),this.dataFormat)),null!==this.activation&&(v=this.activation.apply(v)),v}))}computeOutputShape(e){const t=(e=fb(e)).slice();let n,r,a,s;"channelsFirst"===this.dataFormat?(n=1,r=2,a=3,s=4):(n=4,r=1,a=2,s=3);const o=this.kernelSize[0],i=this.kernelSize[1],l=this.kernelSize[2],u=this.strides[0],c=this.strides[1],p=this.strides[2];return t[n]=this.filters,t[r]=Bw(t[r],u,o,this.padding),t[a]=Bw(t[a],c,i,this.padding),t[s]=Bw(t[s],p,l,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}Kw.className="Conv3DTranspose",_i(Kw);class Yw extends Uw{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new ig("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new ig("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new ig(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=Uv(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Nw(t.depthwiseRegularizer),this.depthwiseConstraint=Bg(t.depthwiseConstraint),this.pointwiseInitializer=Uv(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Nw(t.pointwiseRegularizer),this.pointwiseConstraint=Bg(t.pointwiseConstraint)}build(e){if((e=fb(e)).length<this.rank+2)throw new ig(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new ig(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[t])}`);const n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[];for(let e=0;e<this.rank;++e)a.push(1);a.push(n*this.depthMultiplier,this.filters);const s=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,s,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,s,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,s,this.biasConstraint):this.bias=null,this.inputSpec=[new wb({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return el((()=>{let t;if(e=hb(e),1===this.rank)throw new lg("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=Zo(e,[0,2,3,1])),t=Lp(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=xv(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=Zo(t,[0,3,1,2])),t}))}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=jv(this.depthwiseInitializer),e.pointwiseInitializer=jv(this.pointwiseInitializer),e.depthwiseRegularizer=$w(this.depthwiseRegularizer),e.pointwiseRegularizer=$w(this.pointwiseRegularizer),e.depthwiseConstraint=Dg(this.depthwiseConstraint),e.pointwiseConstraint=Dg(this.pointwiseConstraint),e}}Yw.className="SeparableConv";class Jw extends Yw{constructor(e){super(2,e)}}Jw.className="SeparableConv2D",_i(Jw);class Zw extends Uw{constructor(e){super(1,e),Zw.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!Eg(e.kernelSize,"number",1,1))throw new ig(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}Zw.className="Conv1D",_i(Zw);class Qw extends Eb{constructor(e){super(e),"number"==typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return el((()=>{if(e=hb(e),"channelsLast"===this.dataFormat){const t=dv(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return dv(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const t=dv(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return dv(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}}))}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}Qw.className="Cropping2D",_i(Qw);class ex extends Eb{constructor(e){var t;super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Kg(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,t=this.interpolation,Sg(jg,"InterpolationFormat",t)}computeOutputShape(e){if("channelsFirst"===this.dataFormat){const t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}{const t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return el((()=>{let t=hb(e);const n=t.shape;if("channelsFirst"===this.dataFormat){t=Zo(t,[0,2,3,1]);const e=this.size[0]*n[2],r=this.size[1]*n[3],a="nearest"===this.interpolation?Ph.resizeNearestNeighbor(t,[e,r]):Ph.resizeBilinear(t,[e,r]);return Zo(a,[0,3,1,2])}{const e=this.size[0]*n[1],r=this.size[1]*n[2];return"nearest"===this.interpolation?Ph.resizeNearestNeighbor(t,[e,r]):Ph.resizeBilinear(t,[e,r])}}))}getConfig(){const e={size:this.size,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}ex.className="UpSampling2D",_i(ex);class tx extends jw{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=Uv(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Bg(e.depthwiseConstraint),this.depthwiseRegularizer=Nw(e.depthwiseRegularizer)}build(e){if((e=fb(e)).length<4)throw new ig(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new ig(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);const n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return el((()=>{let t=function(e,t,n=[1,1],r="valid",a,s){return el((()=>{null==a&&(a="channelsLast"),Kg(a);let o=Fw(e,a);if(4!==e.rank)throw new ig(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(4!==t.rank)throw new ig(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return o=Ku(o,t,n,"same"===r?"same":"valid","NHWC",s),"channelsFirst"===a&&(o=Zo(o,[0,3,1,2])),o}))}(e=hb(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=xv(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t}))}computeOutputShape(e){e=fb(e);const t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=Lw(t,this.kernelSize[0],this.padding,this.strides[0]),s=Lw(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,s]:[e[0],a,s,r]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=jv(this.depthwiseInitializer),e.depthwiseRegularizer=$w(this.depthwiseRegularizer),e.depthwiseConstraint=Dg(this.depthwiseRegularizer),e}}function nx(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new ig("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function rx(e,t,n,r=!1,a,s,o=!1,i=!1){return el((()=>{const l=t.shape.length;if(l<3)throw new ig(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(iv(2,l));if(t=Zo(t,u),null!=s)throw new lg("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=Oo(Oo(a,"bool"),"float32")).rank===l-1&&(a=oc(a,-1)),a=Zo(a,u)),r&&(t=Np(t,0),null!=a&&(a=Np(a,0)));const c=[];let p,d=n;const h=t.shape[0],f=hd(t);let m,g;null!=a&&(m=hd(a));for(let t=0;t<h;++t){const n=f[t],r=el((()=>e(n,d)));if(null==a)p=r[0],d=r[1];else{const e=el((()=>{const e=m[t],n=_l(sp(e),e);return{output:hl(gl(r[0],e),gl(d[0],n)),newStates:d.map(((t,a)=>hl(gl(r[1][a],e),gl(t,n))))}}));p=e.output,d=e.newStates}i&&c.push(p)}if(i){g=ed(c,1)}return[p,g,d]}))}tx.className="DepthwiseConv2D",_i(tx);class ax extends Eb{constructor(e){let t;if(super(e),null==e.cell)throw new ig("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new dx({cells:e.cell}):e.cell,null==t.stateSize)throw new ig("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new wb({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){return iv(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((e=>null))}return this.states_}setStates(e){this.states_=e}computeOutputShape(e){pb(e)&&(e=e[0]),e=e;let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const n=t[0];let r;if(r=this.returnSequences?[e[0],e[1],n]:[e[0],n],this.returnState){const n=[];for(const r of t)n.push([e[0],r]);return[r].concat(n)}return r}computeMask(e,t){return el((()=>{Array.isArray(t)&&(t=t[0]);const e=this.returnSequences?t:null;if(this.returnState){const t=this.states.map((e=>null));return[e].concat(t)}return e}))}get states(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new lg("Constants support is not implemented in RNN yet.");pb(e)&&(e=e[0]),e=e;const t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new wb({shape:[t,null,...n]});const r=[e[0]].concat(e.slice(2));let a;if(this.cell.build(r),a=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!ue(this.stateSpec.map((e=>e.shape[e.shape.length-1])),a))throw new ig(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map((e=>new wb({shape:[null,e]})));this.stateful&&this.resetStates()}resetStates(e,t=!1){el((()=>{if(!this.stateful)throw new sg("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new ig("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>Xc([n,e]))):this.states_=[Xc([n,this.cell.stateSize])];else if(null==e)tl(this.states_),null!=this.keptStates&&(tl(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>Xc([n,e]))):this.states_[0]=Xc([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ig(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);!0===t?this.keptStates.push(this.states_.slice()):tl(this.states_);for(let t=0;t<this.states_.length;++t){const r=e[t],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,s=[n,a];if(!ue(r.shape,s))throw new ig(`State ${t} is incompatible with layer ${this.name}: expected shape=${s}, received shape=${r.shape}`);this.states_[t]=r}}this.states_=this.states_.map((e=>nl(e.clone())))}))}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const a=nx(e,n,r,this.numConstants);e=a.inputs,n=a.initialState,r=a.constants;let s=[],o=[];if(null!=n){t.initialState=n,s=s.concat(n),this.stateSpec=[];for(const e of n)this.stateSpec.push(new wb({shape:e.shape}));o=o.concat(this.stateSpec)}null!=r&&(t.constants=r,s=s.concat(r),this.numConstants=r.length);if(s[0]instanceof xb){const n=[e].concat(s),r=this.inputSpec.concat(o),a=this.inputSpec;this.inputSpec=r;const i=super.apply(n,t);return this.inputSpec=a,i}return super.apply(e,t)}call(e,t){return el((()=>{const n=null==t?null:t.mask,r=null==t?null:t.training;let a=null==t?null:t.initialState;e=hb(e),null==a&&(a=this.stateful?this.states_:this.getInitialState(e));const s=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==s)throw new ig(`RNN Layer has ${s} state(s) but was passed ${a.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:r},i=rx(((e,t)=>{const n=this.cell.call([e].concat(t),o);return[n[0],n.slice(1)]}),e,a,this.goBackwards,n,null,this.unroll,this.returnSequences),l=i[0],u=i[1],c=i[2];this.stateful&&this.resetStates(c,r);const p=this.returnSequences?u:l;return this.returnState?[p].concat(c):p}))}getInitialState(e){return el((()=>{let t=Xc(e.shape);return t=Nc(t,[1,2]),t=uv(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map((e=>e>1?mv(t,[1,e]):t)):this.cell.stateSize>1?[mv(t,[1,this.cell.stateSize])]:[t]}))}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===ax.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign({},n,e,t)}static fromConfig(e,t,n={}){const r=zb(t.cell,n);return new e(Object.assign(t,{cell:r}))}}ax.className="RNN",_i(ax);class sx extends Eb{}class ox extends sx{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Tg(this.units,"units"),this.activation=kw(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=Uv(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Uv(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Uv(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Nw(e.kernelRegularizer),this.recurrentRegularizer=Nw(e.recurrentRegularizer),this.biasRegularizer=Nw(e.biasRegularizer),this.kernelConstraint=Bg(e.kernelConstraint),this.recurrentConstraint=Bg(e.recurrentConstraint),this.biasConstraint=Bg(e.biasConstraint),this.dropout=sv([1,ov([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=sv([1,ov([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=fb(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return el((()=>{if(2!==(e=e).length)throw new ig(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let n=e[1];e=e[0];const r=null!=t.training&&t.training;let a;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=hx({ones:()=>sp(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=hx({ones:()=>sp(n),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,o=this.recurrentDropoutMask;a=vv(null!=s?gl(e,s):e,this.kernel.read()),null!=this.bias&&(a=xv(a,this.bias.read())),null!=o&&(n=gl(n,o));let i=hl(a,vv(n,this.recurrentKernel.read()));return null!=this.activation&&(i=this.activation.apply(i)),[i,i]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:ww(this.activation),useBias:this.useBias,kernelInitializer:jv(this.kernelInitializer),recurrentInitializer:jv(this.recurrentInitializer),biasInitializer:jv(this.biasInitializer),kernelRegularizer:$w(this.kernelRegularizer),recurrentRegularizer:$w(this.recurrentRegularizer),biasRegularizer:$w(this.biasRegularizer),activityRegularizer:$w(this.activityRegularizer),kernelConstraint:Dg(this.kernelConstraint),recurrentConstraint:Dg(this.recurrentConstraint),biasConstraint:Dg(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,t)}}ox.className="SimpleRNNCell",_i(ox);class ix extends ax{constructor(e){e.cell=new ox(e),super(e)}call(e,t){return el((()=>{null!=this.cell.dropoutMask&&(tl(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(tl(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})}))}static fromConfig(e,t){return new e(t)}}ix.className="SimpleRNN",_i(ix);class lx extends sx{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new ig("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Tg(this.units,"units"),this.activation=kw(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=kw(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=Uv(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Uv(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Uv(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Nw(e.kernelRegularizer),this.recurrentRegularizer=Nw(e.recurrentRegularizer),this.biasRegularizer=Nw(e.biasRegularizer),this.kernelConstraint=Bg(e.kernelConstraint),this.recurrentConstraint=Bg(e.recurrentConstraint),this.biasConstraint=Bg(e.biasConstraint),this.dropout=sv([1,ov([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=sv([1,ov([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){const t=(e=fb(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return el((()=>{if(2!==(e=e).length)throw new ig(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const n=null!=t.training&&t.training;let r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=hx({ones:()=>sp(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=hx({ones:()=>sp(r),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,s=this.recurrentDropoutMask;let o,i,l;0<this.dropout&&this.dropout<1&&(e=gl(e,a[0]));let u=vv(e,this.kernel.read());this.useBias&&(u=xv(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=gl(r,s[0]));const c=this.recurrentKernel.read(),[p,d]=Yp(c,[2*this.units,this.units],c.rank-1),h=vv(r,p),[f,m,g]=Yp(u,3,u.rank-1),[v,b]=Yp(h,2,h.rank-1);o=this.recurrentActivation.apply(hl(f,v)),i=this.recurrentActivation.apply(hl(m,b));const y=vv(gl(i,r),d);l=this.activation.apply(hl(g,y));const w=hl(gl(o,r),gl(hl(1,Ec(o)),l));return[w,w]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:ww(this.activation),recurrentActivation:ww(this.recurrentActivation),useBias:this.useBias,kernelInitializer:jv(this.kernelInitializer),recurrentInitializer:jv(this.recurrentInitializer),biasInitializer:jv(this.biasInitializer),kernelRegularizer:$w(this.kernelRegularizer),recurrentRegularizer:$w(this.recurrentRegularizer),biasRegularizer:$w(this.biasRegularizer),activityRegularizer:$w(this.activityRegularizer),kernelConstraint:Dg(this.kernelConstraint),recurrentConstraint:Dg(this.recurrentConstraint),biasConstraint:Dg(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,t)}}lx.className="GRUCell",_i(lx);class ux extends ax{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new lx(e),super(e)}call(e,t){return el((()=>{null!=this.cell.dropoutMask&&(tl(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(tl(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}ux.className="GRU",_i(ux);class cx extends sx{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Tg(this.units,"units"),this.activation=kw(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=kw(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=Uv(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Uv(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Uv(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Nw(e.kernelRegularizer),this.recurrentRegularizer=Nw(e.recurrentRegularizer),this.biasRegularizer=Nw(e.biasRegularizer),this.kernelConstraint=Bg(e.kernelConstraint),this.recurrentConstraint=Bg(e.recurrentConstraint),this.biasConstraint=Bg(e.biasConstraint),this.dropout=sv([1,ov([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=sv([1,ov([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;const n=(e=fb(e))[e.length-1];let r;if(this.kernel=this.addWeight("kernel",[n,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const e=this.biasInitializer,n=this.units;r=new((t=class extends Tv{apply(t,r){const a=e.apply([n]),s=(new Iv).apply([n]),o=e.apply([2*n]);return fv(fv(a,s),o)}}).className="CustomInit",t)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return el((()=>{const n=null!=t.training&&t.training;if(3!==(e=e).length)throw new ig(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let r=e[1];const a=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=hx({ones:()=>sp(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=hx({ones:()=>sp(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,o=this.recurrentDropoutMask;let i,l,u,c;0<this.dropout&&this.dropout<1&&(e=gl(e,s[0]));let p=vv(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=gl(r,o[0])),p=hl(p,vv(r,this.recurrentKernel.read())),this.useBias&&(p=xv(p,this.bias.read()));const[d,h,f,m]=Yp(p,4,p.rank-1);i=this.recurrentActivation.apply(d),l=this.recurrentActivation.apply(h),u=hl(gl(l,a),gl(i,this.activation.apply(f))),c=this.recurrentActivation.apply(m);const g=gl(c,this.activation.apply(u));return[g,g,u]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:ww(this.activation),recurrentActivation:ww(this.recurrentActivation),useBias:this.useBias,kernelInitializer:jv(this.kernelInitializer),recurrentInitializer:jv(this.recurrentInitializer),biasInitializer:jv(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:$w(this.kernelRegularizer),recurrentRegularizer:$w(this.recurrentRegularizer),biasRegularizer:$w(this.biasRegularizer),activityRegularizer:$w(this.activityRegularizer),kernelConstraint:Dg(this.kernelConstraint),recurrentConstraint:Dg(this.recurrentConstraint),biasConstraint:Dg(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,t)}}cx.className="LSTMCell",_i(cx);class px extends ax{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new cx(e),super(e)}call(e,t){return el((()=>{null!=this.cell.dropoutMask&&(tl(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(tl(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}px.className="LSTM",_i(px);class dx extends sx{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return el((()=>{let n=(e=e).slice(1);const r=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(n.splice(0,e.stateSize.length)):r.push(n.splice(0,1));r.reverse();const a=[];let s;for(let o=0;o<this.cells.length;++o){const i=this.cells[o];n=r[o],s=0===o?[e[0]].concat(n):[s[0]].concat(n),s=i.call(s,t),a.push(s.slice(1))}n=[];for(const e of a.slice().reverse())n.push(...e);return[s[0]].concat(n)}))}build(e){let t;pb(e)&&(e=e[0]),e=e,this.cells.forEach(((n,r)=>{Qg(`RNNCell_${r}`,(()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}getConfig(){const e=super.getConfig(),t={cells:this.cells.map((e=>({className:e.getClassName(),config:e.getConfig()})))};return Object.assign({},e,t)}static fromConfig(e,t,n={}){const r=[];for(const e of t.cells)r.push(zb(e,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return bb(e)}setWeights(e){const t=[];for(const n of this.cells){const r=n.weights.length,a=e.splice(r);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],a[e]])}yb(t)}}function hx(e){const{ones:t,rate:n,training:r=!1,count:a=1,dropoutFunc:s}=e,o=()=>null!=s?s(t(),n):kv(t(),n),i=()=>Cv(o,t,r);if(!a||a<=1)return nl(i().clone());return Array(a).fill(void 0).map(i).map((e=>nl(e.clone())))}dx.className="StackedRNNCells",_i(dx);var fx=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};class mx extends ax{constructor(e){if(e.unroll)throw new lg("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new lg("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new wb({ndim:5})]}call(e,t){return el((()=>{if(null!=this.cell.dropoutMask&&(tl(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(tl(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new ig("ConvRNN2D cell does not support constants");const n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})}))}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return el((()=>{const{stateSize:t}=this.cell,n=e.shape,r=this.computeSingleOutputShape(n),a=Xc([r[0],...r.slice(2)]);return Array.isArray(t)?Array(t.length).fill(a):[a]}))}resetStates(e,t=!1){el((()=>{if(!this.stateful)throw new sg("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),a=[r[0],...r.slice(2)];if(null==n[0])throw new ig("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>Xc(a))):this.states_=[Xc(a)];else if(null==e)tl(this.states_),null!=this.keptStates&&(tl(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>Xc(a))):this.states_[0]=Xc(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ig(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):tl(this.states_);for(let t=0;t<this.states_.length;++t){const n=e[t],r=a;if(!ue(n.shape,r))throw new ig(`State ${t} is incompatible with layer ${this.name}: expected shape=${r}, received shape=${n.shape}`);this.states_[t]=n}}this.states_=this.states_.map((e=>nl(e.clone())))}))}computeSingleOutputShape(e){const{dataFormat:t,filters:n,kernelSize:r,padding:a,strides:s,dilationRate:o}=this.cell,i="channelsFirst"===t,l=e[i?3:2],u=e[i?4:3],c=Lw(l,r[0],a,s[0],o[0]),p=Lw(u,r[1],a,s[1],o[1]);return[...e.slice(0,2),...i?[n,c,p]:[c,p,n]]}}mx.className="ConvRNN2D";class gx extends cx{constructor(e){const{filters:t,kernelSize:n,strides:r,padding:a,dataFormat:s,dilationRate:o}=e;super(Object.assign({},e,{units:t})),this.filters=t,Tg(this.filters,"filters"),this.kernelSize=Dw(n,2,"kernelSize"),this.kernelSize.forEach((e=>Tg(e,"kernelSize"))),this.strides=Dw(r||1,2,"strides"),this.strides.forEach((e=>Tg(e,"strides"))),this.padding=a||"valid",Yg(this.padding),this.dataFormat=s||"channelsLast",Kg(this.dataFormat),this.dilationRate=Dw(o||1,2,"dilationRate"),this.dilationRate.forEach((e=>Tg(e,"dilationRate")))}build(e){var t;e=fb(e);const n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new ig(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const s=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",s,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){const n=this.biasInitializer,r=this.filters;e=new((t=class extends Tv{apply(e,t){return hv([n.apply([r]),Kc([r]),n.apply([2*r])])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return el((()=>{if(3!==e.length)throw new ig(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const n=t.training||!1,r=e[0],a=e[1],s=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=hx({ones:()=>sp(r),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,i=(e,t,n)=>t&&t[n]?gl(t[n],e):e;let l=i(r,o,0),u=i(r,o,1),c=i(r,o,2),p=i(r,o,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=hx({ones:()=>sp(a),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const d=this.recurrentDropoutMask;let h=i(a,d,0),f=i(a,d,1),m=i(a,d,2),g=i(a,d,3);const[v,b,y,w]=Yp(this.kernel.read(),4,3),[x,k,C,S]=this.useBias?Yp(this.bias.read(),4):[null,null,null,null];l=this.inputConv(l,v,x,this.padding),u=this.inputConv(u,b,k,this.padding),c=this.inputConv(c,y,C,this.padding),p=this.inputConv(p,w,S,this.padding);const[E,T,$,I]=Yp(this.recurrentKernel.read(),4,3);h=this.recurrentConv(h,E),f=this.recurrentConv(f,T),m=this.recurrentConv(m,$),g=this.recurrentConv(g,I);const N=this.recurrentActivation.apply(hl(l,h)),O=this.recurrentActivation.apply(hl(u,f)),A=hl(gl(O,s),gl(N,this.activation.apply(hl(c,m)))),M=gl(this.recurrentActivation.apply(hl(p,g)),this.activation.apply(A));return[M,M,A]}))}getConfig(){const e=super.getConfig(),{units:t}=e,n=fx(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},n,r)}inputConv(e,t,n,r){const a=Du(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?xv(a,n,this.dataFormat):a}recurrentConv(e,t){return Du(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}gx.className="ConvLSTM2DCell",_i(gx);class vx extends mx{constructor(e){const t=new gx(e);super(Object.assign({},e,{cell:t}))}static fromConfig(e,t){return new e(t)}}vx.className="ConvLSTM2D",_i(vx);class bx extends Eb{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;const t=e.shape,n=[];for(let e=0;e<this.noiseShape.length;++e)n.push(null==this.noiseShape[e]?t[e]:this.noiseShape[e]);return n}call(e,t){return el((()=>{this.invokeCallHook(e,t);const n=hb(e);if(0<this.rate&&this.rate<1){const e=null!=t.training&&t.training,r=this.getNoiseShape(n);return Cv((()=>kv(n,this.rate,r,this.seed)),(()=>n),e)}return e}))}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}bx.className="Dropout",_i(bx);class yx extends bx{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}yx.className="SpatialDropout1D",_i(yx);class wx extends Eb{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,Tg(this.units,"units"),this.activation=kw(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=Uv(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Uv(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Bg(e.kernelConstraint),this.biasConstraint=Bg(e.biasConstraint),this.kernelRegularizer=Nw(e.kernelRegularizer),this.biasRegularizer=Nw(e.biasRegularizer),this.activityRegularizer=Nw(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){const t=(e=fb(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){const t=(e=fb(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return el((()=>{this.invokeCallHook(e,t);const n=hb(e),r=Ig(this.activation.getClassName());let a;return null!=r?a=vv(n,this.kernel.read(),r,this.bias?this.bias.read():null):(a=vv(n,this.kernel.read()),null!=this.bias&&(a=xv(a,this.bias.read())),null!=this.activation&&(a=this.activation.apply(a))),a}))}getConfig(){const e={units:this.units,activation:ww(this.activation),useBias:this.useBias,kernelInitializer:jv(this.kernelInitializer),biasInitializer:jv(this.biasInitializer),kernelRegularizer:$w(this.kernelRegularizer),biasRegularizer:$w(this.biasRegularizer),activityRegularizer:$w(this.activityRegularizer),kernelConstraint:Dg(this.kernelConstraint),biasConstraint:Dg(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}wx.className="Dense",_i(wx);class xx extends Eb{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=fb(e);for(const t of e.slice(1))if(null==t)throw new ig(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],av(e,1)]}call(e,t){return el((()=>{this.invokeCallHook(e,t);let n=hb(e);if("channelsFirst"===this.dataFormat&&n.rank>1){const e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=Zo(n,e)}return function(e){if(e.rank<=1)throw new ig(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);const t=[e.shape[0],av(e.shape,1)];return fu(e,t)}(n)}))}getConfig(){const e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}xx.className="Flatten",_i(xx);class kx extends Eb{constructor(e){super(e),this.supportsMasking=!0,this.activation=kw(e.activation)}call(e,t){return el((()=>{this.invokeCallHook(e,t);const n=hb(e);return this.activation.apply(n)}))}getConfig(){const e={activation:ww(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}kx.className="Activation",_i(kx);class Cx extends Eb{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return el((()=>{return e=hb(e),t=e,n=this.n,el((()=>{if(2!==t.shape.length)throw new ig(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);return mv(uv(t,1),[1,n,1])}));var t,n}))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}Cx.className="RepeatVector",_i(Cx);class Sx extends Eb{constructor(e){super(e),this.targetShape=e.targetShape;for(let e=0;e<this.targetShape.length;++e)this.isUnknown(this.targetShape[e])&&(this.targetShape[e]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){const n="Total size of new array must be unchanged.",r=t.slice();let a=1,s=null;for(let e=0;e<r.length;++e){const t=r[e];if(this.isUnknown(t)){if(null!==s)throw new ig("Can only specifiy one unknown dimension.");s=e}else a*=t}const o=av(e);if(null!==s){if(0===a||o%a!=0)throw new ig(n);r[s]=o/a}else if(o!==a)throw new ig(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return el((()=>{this.invokeCallHook(e,t);const n=hb(e),r=n.shape,a=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return fu(n,a)}))}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}Sx.className="Reshape",_i(Sx);class Ex extends Eb{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const t=iv(1,e.dims.length+1);if(!ue(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new wb({ndim:this.dims.length+1})]}computeOutputShape(e){const t=(e=fb(e)).slice();return this.dims.forEach(((n,r)=>{t[r+1]=e[n]})),t}call(e,t){return Zo(hb(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}Ex.className="Permute",_i(Ex);class Tx extends Eb{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const n=hb(e);return Gl(ap(n,this.maskValue),-1)}call(e,t){return el((()=>{this.invokeCallHook(e,t);const n=hb(e),r=Gl(ap(n,this.maskValue),-1,!0);return gl(n,Oo(r,n.dtype))}))}}Tx.className="Masking",_i(Tx);class $x extends Eb{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(fg(e.inputLength))}this.inputDim=e.inputDim,Tg(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Tg(this.outputDim,"outputDim"),this.embeddingsInitializer=Uv(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Nw(e.embeddingsRegularizer),this.activityRegularizer=Nw(e.activityRegularizer),this.embeddingsConstraint=Bg(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return el((()=>this.maskZero?(e=hb(e),ap(e,yl(e))):null))}computeOutputShape(e){if(e=fb(e),null==this.inputLength)return[...e,this.outputDim];const t=fg(this.inputLength);if(t.length!==e.length-1)throw new ig(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let n=0;for(let r=0;r<t.length;++r){const a=t[r],s=e[r+1];if(null!=a&&null!=s&&a!==s)throw new ig(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);null==a&&(t[n]=s),n++}}return[e[0],...t,this.outputDim]}call(e,t){return el((()=>{this.invokeCallHook(e,t);let n=hb(e);"int32"!==n.dtype&&(n=lv(n,"int32"));const r=bv(this.embeddings.read(),fu(n,[n.size]));return fu(r,fb(this.computeOutputShape(n.shape)))}))}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:jv(this.embeddingsInitializer),embeddingsRegularizer:$w(this.embeddingsRegularizer),activityRegularizer:$w(this.activityRegularizer),embeddingsConstraint:Dg(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}$x.className="Embedding",_i($x);class Ix extends Eb{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new lg}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){const a=e[e.length-t.length+r],s=t[r];if(null==a||null==s||a<0||s<0)n.push(null);else if(1===a)n.push(s);else if(1===s)n.push(a);else{if(a!==s)throw new ig("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[fb(e)]),(e=e).length<2)throw new ig(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(const n of e)null!=n&&null!==n[0]&&t.push(n[0]);if(t=kg(t),t.length>1)throw new ig(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let n=null==e[0]?null:e[0].slice(1);for(let t=1;t<e.length;++t){const r=null==e[t]?null:e[t].slice(1);n=this.computeElementwiseOpOutputShape(n,r)}const r=e.map((e=>e.length));-1===e.indexOf(null)&&1===kg(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return el((()=>{if(e=e,this.reshapeRequired){const t=[],n=e.map((e=>e.rank));if(-1===n.indexOf(null)){const r=ov(n);for(let n of e){const e=n.rank;for(let t=0;t<r-e;++t)n=uv(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(const r of e){const e=r.rank;if(null==e){const e=r.shape,a=e[0],s=e.slice(1).concat([a]);let o=fu(r,[a].concat(av(e.slice(1))));o=Zo(o,[1,0]),o=fu(o,s),t.push(o),n=!0}else if(e>1){const a=iv(1,e).concat([0]);t.push(Zo(r,a)),n=!0}else t.push(r)}let r=this.mergeFunction(t);const a=r.rank;if(n)if(null==a){const e=r.shape,t=e[e.length-1],n=[t].concat(e.slice(0,e.length-1));r=fu(Zo(fu(r,[-1,t]),[1,0]),n)}else if(a>1){const e=[a-1].concat(iv(0,a-1));r=Zo(r,e)}return r}}return this.mergeFunction(e)}))}computeOutputShape(e){let t;t=null==(e=e)[0]?null:e[0].slice(1);for(let n=1;n<e.length;++n){const r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}let n=[];for(const t of e)null!=t&&null!==t[0]&&n.push(t[0]);return n=kg(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return el((()=>{if(null==t)return null;if(!Array.isArray(t))throw new ig("`mask` should be an Array");if(!Array.isArray(e))throw new ig("`inputs` should be an Array");if(t.length!==e.length)throw new ig(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every((e=>null==e)))return null;let n=(t=t.map((e=>null==e?e:oc(e,0))))[0];for(let e=1;e<t.length-1;++e)n=zc(n,t[e]);return n}))}}class Nx extends Ix{constructor(e){super(e)}mergeFunction(e){return el((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=hl(t,e[n]);return t}))}}Nx.className="Add",_i(Nx);class Ox extends Ix{constructor(e){super(e)}mergeFunction(e){return el((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=gl(t,e[n]);return t}))}}Ox.className="Multiply",_i(Ox);class Ax extends Ix{constructor(e){super(e)}mergeFunction(e){return el((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=hl(t,e[n]);return gl(1/e.length,t)}))}}Ax.className="Average",_i(Ax);class Mx extends Ix{constructor(e){super(e)}mergeFunction(e){return el((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=Dl(t,e[n]);return t}))}}Mx.className="Maximum",_i(Mx);class _x extends Ix{constructor(e){super(e)}mergeFunction(e){return el((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=Zc(t,e[n]);return t}))}}_x.className="Minimum",_i(_x);class Rx extends Ix{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new ig("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let t=!0;for(const n of e)if(null!=n){t=!1;break}if(t)return;const n=[];for(let t=0;t<e.length;++t){const r=e[t].slice();r.splice(this.axis,1);let a=!1;for(const e of n)if(ue(e,r)){a=!0;break}a||n.push(r)}if(n.length>1)throw new ig("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return el((()=>hv(e,this.axis)))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new ig("A `Concatenate` layer should be called on a list of inputs.");const t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const e of t.slice(1)){if(null==n[r]||null==e[r]){n[r]=null;break}n[r]+=e[r]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new ig("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new ig("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new ig(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return el((()=>{let n=!0;if(t.forEach((e=>{null==e||(n=!1)})),n)return null;const r=[];for(let n=0;n<e.length;++n)null==t[n]?r.push(Oo(sp(e[n]),"bool")):t[n].rank<e[n].rank?r.push(oc(t[n],-1)):r.push(t[n]);const a=vu(r,this.axis);return Ul(a,-1,!1)}))}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function Px(e,t){for(;e<0;)e+=t;return e}Rx.className="Concatenate",_i(Rx);class Dx extends Ix{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){re(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0],n=e[1];if(t.length>3||n.length>3)throw new lg("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new ig(`Dimension incompatibility: ${t[r[0]]} !== ${n[r[1]]}`)}mergeFunction(e){if(2!==e.length)throw new ig(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map(((t,n)=>Px(t,e[n].shape.length))):[Px(this.axes,n.shape.length),Px(this.axes,r.shape.length)],this.normalize&&(n=Vb(n,t[0]),r=Vb(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new lg("batchDot is not implemented for tensors of 4D or higher rank yet");if(re(e.shape.length>=2,(()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`)),re(e.shape.length>=2,(()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`)),"number"==typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new lg("batchDot is not implemented for complex64-type Tensors yet.");const r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);const s=n;return el((()=>{let n,o;if(r>a){n=r-a;const e=[];for(let t=0;t<n;++t)e.push(1);t=fu(t,t.shape.concat(e))}else if(a>r){n=a-r;const t=[];for(let e=0;e<n;++e)t.push(1);e=fu(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)o=s[0]===s[1]?Nc(gl(e,t),s[0]):Nc(gl(Zo(e,[1,0]),t),s[1]);else{const n=s[0]!==e.shape.length-1,r=s[1]===t.shape.length-1;o=Yo(e,t,n,r)}if(n>0){let e;e=r>a?r+a-3:r-1;const t=[];for(let r=e;r<e+n;++r)t.push(r);o=Qp(o,t)}return 1===o.shape.length&&(o=oc(o,1)),o}))}(n,r,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[Px(this.axes,e.length),Px(this.axes,t.length)],n}computeOutputShape(e){re(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new lg("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);const a=t.concat(n);return 1===a.length&&a.push(1),a}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}Dx.className="Dot",_i(Dx);class Lx extends Eb{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return el((()=>{this.invokeCallHook(e,t);const n=hb(e);return Cv((()=>hl(gv(n.shape,0,this.stddev),n)),(()=>n),t.training||!1)}))}}Lx.className="GaussianNoise",_i(Lx);class Bx extends Eb{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return el((()=>{this.invokeCallHook(e,t);const n=hb(e);if(this.rate>0&&this.rate<1){return Cv((()=>{const e=Math.sqrt(this.rate/(1-this.rate));return gl(n,gv(n.shape,1,e))}),(()=>n),t.training||!1)}return n}))}}Bx.className="GaussianDropout",_i(Bx);class Fx extends Eb{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||hb(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return el((()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(e),r=()=>{const t=hb(e),r=-1.7580993408473766;let a=hc(Cp(n),this.rate);a=lv(a,"float32");const s=((1-this.rate)*(1+this.rate*r**2))**-.5,o=-s*r*this.rate,i=hl(gl(t,a),gl(hl(a,-1),r));return hl(gl(i,s),o)};return Cv(r,(()=>hb(e)),t.training||!1)}return e}))}}function zx(e,t,n,r,a,s=.001){let o;if(2===e.rank)o=Su(e,t,n,r,a,s);else if(3===e.rank)o=Eu(e,t,n,r,a,s);else{if(4!==e.rank)throw new lg(`batchNormalization is not implemented for array of rank ${e.rank} yet`);o=Tu(e,t,n,r,a,s)}return o}function Vx(e,t,n,r,a=.001){return ue(r.slice().sort(),iv(0,e.rank-1))?function(e,t,n,r,a=.001){return el((()=>{const s=tp(e,r),o=s.mean,i=s.variance;return[zx(e,o,i,n,t,a),o,i]}))}(e,t,n,r,a):function(e,t,n,r,a=.001){return el((()=>{const s=tp(e,r),o=s.mean,i=s.variance,l=[];for(const t of iv(0,e.rank))-1!==r.indexOf(t)?l.push(1):l.push(e.shape[t]);const u=fu(o,l),c=fu(i,l),p=null==t?null:fu(t,l),d=null==n?null:fu(n,l);return[zx(e,u,c,d,p,a),o,i]}))}(e,t,n,r,a)}Fx.className="AlphaDropout",_i(Fx);class Wx extends Eb{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=Uv(e.betaInitializer||"zeros"),this.gammaInitializer=Uv(e.gammaInitializer||"ones"),this.movingMeanInitializer=Uv(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Uv(e.movingVarianceInitializer||"ones"),this.betaConstraint=Bg(e.betaConstraint),this.gammaConstraint=Bg(e.gammaConstraint),this.betaRegularizer=Nw(e.betaRegularizer),this.gammaRegularizer=Nw(e.gammaRegularizer)}build(e){e=fb(e);const t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new ig(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new wb({ndim:e.length,axes:{[t]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return el((()=>{const n=null!=t.training&&t.training,r=hb(e),a=r.shape,s=a.length,o=iv(0,s),i=this.axis>=0?this.axis:this.axis+s;o.splice(i,1);const l=cg(1,s);l[i]=a[i];const u=o.slice();u.sort();const c=!ue(u,iv(0,s).slice(0,s-1));if(!n)return(()=>{if(c){const e=fu(this.movingMean.read(),l),t=fu(this.movingVariance.read(),l),n=this.center?fu(this.beta.read(),l):null,a=this.scale?fu(this.gamma.read(),l):null;return zx(r,e,t,n,a,this.epsilon)}return zx(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[p,d,h]=Vx(r,this.gamma.read(),this.beta.read(),o,this.epsilon),f=(e,t,n)=>{el((()=>{const r=1-n,a=e.read(),s=gl(_l(a,t),r);e.write(_l(a,s))}))};return(()=>{f(this.movingMean,d,this.momentum),f(this.movingVariance,h,this.momentum)})(),p}))}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:jv(this.betaInitializer),gammaInitializer:jv(this.gammaInitializer),movingMeanInitializer:jv(this.movingMeanInitializer),movingVarianceInitializer:jv(this.movingVarianceInitializer),betaRegularizer:$w(this.betaRegularizer),gammaRegularizer:$w(this.gammaRegularizer),betaConstraint:Dg(this.betaConstraint),gammaConstraint:Dg(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}Wx.className="BatchNormalization",_i(Wx);class Hx extends Eb{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"==typeof this.axis){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else{if(!Array.isArray(this.axis))throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);for(const e of this.axis)if(!Number.isInteger(e))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=Uv(e.betaInitializer||"zeros"),this.gammaInitializer=Uv(e.gammaInitializer||"ones"),this.betaRegularizer=Nw(e.betaRegularizer),this.gammaRegularizer=Nw(e.gammaRegularizer),this.supportsMasking=!0}build(e){const t=(e=fb(e)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(let e=0;e<this.axis.length;++e)this.axis[e]<0&&(this.axis[e]+=t);for(const e of this.axis)if(e<0||e>=t)throw new Error(`Invalid axis: ${e}`);if(this.axis.length!==kg(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const n=this.axis.map((t=>e[t]));this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}call(e,t){const n=hb(e),r=n.shape,a=r.length;return el((()=>{let{mean:e,variance:t}=tp(n,this.axis,!0);const s=cg(1,a);for(const e of this.axis)s[e]=r[e];const o=e=>null!=e&&e.shape.length!==a?fu(e,s):e;let i=o(this.gamma.read()),l=o(this.beta.read());const u=[],c=[];for(let e=0;e<a;++e)-1!==this.axis.indexOf(e)?(u.push(r[e]),c.push(1)):(u.push(1),c.push(r[e]));return e=lc(e,u),t=lc(t,u),i=lc(i,c),l=lc(l,c),zx(n,e,t,l,i,this.epsilon)}))}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:jv(this.betaInitializer),gammaInitializer:jv(this.gammaInitializer),betaRegularizer:$w(this.betaRegularizer),gammaRegularizer:$w(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}Hx.className="LayerNormalization",_i(Hx);class jx extends Eb{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new ig(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let t,n;if("number"==typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new ig(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],2!==e.padding[1].length)throw new ig(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new wb({ndim:4})]}computeOutputShape(e){let t,n;return e=fb(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return el((()=>{return t=hb(e),n=this.padding,r=this.dataFormat,el((()=>{if(4!==t.rank)throw new ig(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(null==n&&(n=[[1,1],[1,1]]),2!==n.length||2!==n[0].length||2!==n[1].length)throw new ig("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==r&&(r="channelsLast"),"channelsLast"!==r&&"channelsFirst"!==r)throw new ig(`Unknown data format: ${r}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let e;return e="channelsFirst"===r?[[0,0],[0,0],n[0],n[1]]:[[0,0],n[0],n[1],[0,0]],ip(t,e)}));var t,n,r}))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}function Ux(e,t,n,r,a,s){return el((()=>{let o;Kg(a),Jg(s),Yg(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==s&&(s="max"),e=Fw(e,a);const i="same"===r?"same":"valid";return o="max"===s?jc(e,t,n,i):mu(e,t,n,i),"channelsFirst"===a&&(o=Zo(o,[0,3,1,2])),o}))}function Gx(e,t,n,r,a,s){return el((()=>{let o;Kg(a),Jg(s),Yg(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==s&&(s="max"),e=zw(e,a);const i="same"===r?"same":"valid";return o="max"===s?Uc(e,t,n,i):gu(e,t,n,i),"channelsFirst"===a&&(o=Zo(o,[0,4,1,2,3])),o}))}jx.className="ZeroPadding2D",_i(jx);class qx extends Eb{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"==typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new ig(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);this.poolSize=e.poolSize}if(Tg(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"==typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new ig(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);this.strides=e.strides}Tg(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,Yg(this.padding),this.inputSpec=[new wb({ndim:3})]}computeOutputShape(e){const t=Lw((e=fb(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return el((()=>{this.invokeCallHook(e,t),e=uv(hb(e),2);const n=this.poolingFunction(hb(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Qp(n,[2])}))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class Xx extends qx{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return Kg(a),Yg(r),Ux(e,t,n,r,a,"max")}}Xx.className="MaxPooling1D",_i(Xx);class Kx extends qx{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return Kg(a),Yg(r),Ux(e,t,n,r,a,"avg")}}Kx.className="AveragePooling1D",_i(Kx);class Yx extends Eb{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new ig(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Tg(this.poolSize,"poolSize"),Tg(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Kg(this.dataFormat),Yg(this.padding),this.inputSpec=[new wb({ndim:4})]}computeOutputShape(e){e=fb(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=Lw(t,this.poolSize[0],this.padding,this.strides[0]),n=Lw(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return el((()=>(this.invokeCallHook(e,t),this.poolingFunction(hb(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class Jx extends Yx{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return Kg(a),Yg(r),Ux(e,t,n,r,a,"max")}}Jx.className="MaxPooling2D",_i(Jx);class Zx extends Yx{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return Kg(a),Yg(r),Ux(e,t,n,r,a,"avg")}}Zx.className="AveragePooling2D",_i(Zx);class Qx extends Eb{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new ig(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Tg(this.poolSize,"poolSize"),Tg(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Kg(this.dataFormat),Yg(this.padding),this.inputSpec=[new wb({ndim:5})]}computeOutputShape(e){e=fb(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=Lw(t,this.poolSize[0],this.padding,this.strides[0]),n=Lw(n,this.poolSize[1],this.padding,this.strides[1]),r=Lw(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return el((()=>(this.invokeCallHook(e,t),this.poolingFunction(hb(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class ek extends Qx{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return Kg(a),Yg(r),Gx(e,t,n,r,a,"max")}}ek.className="MaxPooling3D",_i(ek);class tk extends Qx{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return Kg(a),Yg(r),Gx(e,t,n,r,a,"avg")}}tk.className="AveragePooling3D",_i(tk);class nk extends Eb{constructor(e){super(e),this.inputSpec=[new wb({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new lg}}class rk extends nk{constructor(e){super(e||{})}call(e,t){return el((()=>{const t=hb(e);return qc(t,1)}))}}rk.className="GlobalAveragePooling1D",_i(rk);class ak extends nk{constructor(e){super(e||{})}call(e,t){return el((()=>{const t=hb(e);return Ic(t,1)}))}}ak.className="GlobalMaxPooling1D",_i(ak);class sk extends Eb{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Kg(this.dataFormat),this.inputSpec=[new wb({ndim:4})]}computeOutputShape(e){return e=e,"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new lg}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class ok extends sk{call(e,t){return el((()=>{const t=hb(e);return"channelsLast"===this.dataFormat?qc(t,[1,2]):qc(t,[2,3])}))}}ok.className="GlobalAveragePooling2D",_i(ok);class ik extends sk{call(e,t){return el((()=>{const t=hb(e);return"channelsLast"===this.dataFormat?Ic(t,[1,2]):Ic(t,[2,3])}))}}ik.className="GlobalMaxPooling2D",_i(ik);class lk extends Eb{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,n={}){const r=zb(t.layer,n);delete t.layer;const a={layer:r};return Object.assign(a,t),new e(a)}}class uk extends lk{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=fb(e)).length<3)throw new ig(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){const t=[(e=fb(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return el((()=>rx(((e,n)=>[hb(this.layer.call(e,t)),[]]),e=hb(e),[],!1,null,null,!1,!0)[1]))}}uk.className="TimeDistributed",_i(uk);class ck extends lk{constructor(e){super(e);const t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=zb(n),t.goBackwards=!0!==t.goBackwards;const r={};var a;if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=zb(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,a=this.mergeMode,Sg(qg,"BidirectionalMergeMode",a),e.weights)throw new lg("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),a=a,this.returnState?(r=a.slice(1),t=a[0]):t=a[0],t=t,"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):hg(n)}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const a=nx(e,n,r,this.numConstants);if(e=a.inputs,n=a.initialState,r=a.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);const s=[],o=[];if(null!=n){const e=n.length;if(e%2>0)throw new ig("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,s.push(...n);const r=n.map((e=>new wb({shape:e.shape})));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),o.push(...r)}if(null!=r)throw new lg("Support for constants in Bidirectional layers is not implemented yet.");const i=s[0]instanceof xb;for(const e of s)if(e instanceof xb!==i)throw new ig("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(i){const n=[e].concat(s),r=this.inputSpec.concat(o),a=this.inputSpec;this.inputSpec=r;const i=super.apply(n,t);return this.inputSpec=a,i}return super.apply(e,t)}call(e,t){return el((()=>{const n=t.initialState;let r,a,s,o;if(null==n)r=this.forwardLayer.call(e,t),a=this.backwardLayer.call(e,t);else{const s=n.slice(0,n.length/2),o=n.slice(n.length/2);r=this.forwardLayer.call(e,Object.assign(t,{initialState:s})),a=this.backwardLayer.call(e,Object.assign(t,{initialState:o}))}return this.returnState&&(Array.isArray(r)&&(s=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),this.returnSequences&&(a=Np(a,1)),"concat"===this.mergeMode?o=hv([r,a]):"sum"===this.mergeMode?o=hl(r,a):"ave"===this.mergeMode?o=gl(.5,hl(r,a)):"mul"===this.mergeMode?o=gl(r,a):null==this.mergeMode&&(o=[r,a]),this.returnState?null==this.mergeMode?o.concat(s):[o].concat(s):o}))}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Qg(this.forwardLayer.name,(()=>{this.forwardLayer.build(e)})),Qg(this.backwardLayer.name,(()=>{this.backwardLayer.build(e)})),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states.map((e=>null));return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const n=zb(t.layer);if(delete t.layer,null!=t.numConstants)throw new lg("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=t;return r.layer=n,new e(r)}}function pk(e){return new $b(e)}function dk(e){return new _w(e)}function hk(e){return new Ow(e)}function fk(e){return new Aw(e)}function mk(e){return new Mw(e)}function gk(e){return new Pw(e)}function vk(e){return new Rw(e)}function bk(e){return new Zw(e)}function yk(e){return new Gw(e)}function wk(e){return new Xw(e)}function xk(e){return new qw(e)}function kk(e){return new Kw(e)}function Ck(e){return new Jw(e)}function Sk(e){return new Qw(e)}function Ek(e){return new ex(e)}function Tk(e){return new tx(e)}function $k(e){return new kx(e)}function Ik(e){return new wx(e)}function Nk(e){return new bx(e)}function Ok(e){return new yx(e)}function Ak(e){return new xx(e)}function Mk(e){return new Cx(e)}function _k(e){return new Sx(e)}function Rk(e){return new Ex(e)}function Pk(e){return new $x(e)}function Dk(e){return new Nx(e)}function Lk(e){return new Ax(e)}function Bk(e){return new Rx(e)}function Fk(e){return new Mx(e)}function zk(e){return new _x(e)}function Vk(e){return new Ox(e)}function Wk(e){return new Dx(e)}function Hk(e){return new Wx(e)}function jk(e){return new Hx(e)}function Uk(e){return new jx(e)}function Gk(e){return new Kx(e)}function qk(e){return Gk(e)}function Xk(e){return Gk(e)}function Kk(e){return new Zx(e)}function Yk(e){return Kk(e)}function Jk(e){return Kk(e)}function Zk(e){return new tk(e)}function Qk(e){return Zk(e)}function eC(e){return Zk(e)}function tC(e){return new rk(e)}function nC(e){return new ok(e)}function rC(e){return new ak(e)}function aC(e){return new ik(e)}function sC(e){return new Xx(e)}function oC(e){return new Jx(e)}function iC(e){return new ek(e)}function lC(e){return new ux(e)}function uC(e){return new lx(e)}function cC(e){return new px(e)}function pC(e){return new cx(e)}function dC(e){return new ix(e)}function hC(e){return new ox(e)}function fC(e){return new vx(e)}function mC(e){return new gx(e)}function gC(e){return new ax(e)}function vC(e){return new dx(e)}function bC(e){return new ck(e)}function yC(e){return new uk(e)}ck.className="Bidirectional",_i(ck);const wC=rC,xC=aC,kC=sC,CC=oC;function SC(e){return new Lx(e)}function EC(e){return new Bx(e)}function TC(e){return new Fx(e)}function $C(e){return new Tx(e)}function IC(e,t){return Qb(e,t)}function NC(e,t){return ay(e,t)}function OC(e,t){return sy(e,t)}function AC(e,t){return ey(e,t)}function MC(e,t){return oy(e,t)}function _C(e,t){return ny(e,t)}function RC(e,t){return ry(e,t)}function PC(e,t){return Yb(e,t)}function DC(e,t){return Hb(e,t)}function LC(e,t){return jb(e,t)}function BC(e,t){return jb(e,t)}function FC(e,t){return jb(e,t)}function zC(e,t){return Wb(e,t)}function VC(e,t){return Wb(e,t)}function WC(e,t){return Wb(e,t)}function HC(e){return new Ew(e)}function jC(e){return Cw(t=e),new Ew({l1:null!=t?t.l1:null,l2:0});var t}function UC(e){return Cw(t=e),new Ew({l2:null!=t?t.l2:null,l1:0});var t}class GC extends Mb{constructor(){super(...arguments),this.model=null}setModel(e){if(!(e instanceof Ky))throw new Error("model must be a LayersModel, not some other Container");this.model=e}}function qC(e,t){return e<t}function XC(e,t){return e>t}class KC extends GC{constructor(e){if(super(),null==e&&(e={}),e.restoreBestWeights)throw new lg("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=e.monitor||"val_loss",this.minDelta=Math.abs(e.minDelta||0),this.patience=e.patience||0,this.verbose=e.verbose||0,this.mode=e.mode||"auto",this.baseline=e.baseline,-1===["auto","min","max"].indexOf(this.mode)&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. Falling back to mode 'auto'.`),this.mode="auto"),"min"===this.mode?this.monitorFunc=qC:"max"===this.mode||-1!==this.monitor.indexOf("acc")?this.monitorFunc=XC:this.monitorFunc=qC,this.monitorFunc===qC&&(this.minDelta*=-1)}async onTrainBegin(e){this.wait=0,this.stoppedEpoch=0,null!=this.baseline?this.best=this.baseline:this.best=this.monitorFunc===qC?1/0:-1/0}async onEpochEnd(e,t){await Nb(t);const n=this.getMonitorValue(t);null!=n&&(this.monitorFunc(n-this.minDelta,this.best)?(this.best=n,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=e,this.model.stopTraining=!0)))}async onTrainEnd(e){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)}getMonitorValue(e){null==e&&(e={});const t=e[this.monitor];return null==t&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. Available metrics are: ${Object.keys(e)}`),t}}const YC={earlyStopping:function(e){return new KC(e)}};var JC,ZC;Ge().registerFlag("KEEP_INTERMEDIATE_TENSORS",(()=>!1),(e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(JC||(JC={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(ZC||(ZC={}));const QC={};function eS(e,t){const n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};QC[e]=n}function tS(e){return QC[e]}function nS(e){delete QC[e]}function rS(e,t,n,r,a){const s=t.inputParams[e];if(s&&void 0!==s.inputIndexStart){const e=s.inputIndexStart,o=0===s.inputIndexEnd?void 0:void 0===s.inputIndexEnd?e+1:s.inputIndexEnd;if("tensor"===s.type)return aS(t.inputNames[s.inputIndexStart],n,r,a);if("tensors"===s.type){return t.inputNames.slice(e,o).map((e=>aS(e,n,r,a)))}const i=aS(t.inputNames.slice(e)[0],n,r,a),l=i.dataSync();return"number"===s.type?l[0]:Pe(i.shape,l)}const o=t.attrParams[e];return o&&o.value}function aS(e,t,n,r){const[a,s]=iS(e);if(null!=r){const e=r.getHashTableHandleByName(a);if(null!=e)return e}const o=n.currentContextIds.find((e=>!!t[oS(a,e)]));return void 0!==o?t[oS(a,o)][s]:void 0}function sS(e,t){const[n,r,a]=iS(e);return[oS(n,t&&t.currentContextId),r,a]}function oS(e,t){return t?`${e}-${t}`:e}function iS(e){const t=e.split(":");if(1===t.length)return[e,0,void 0];const n=t[0],r=3===t.length?t[1]:void 0;return[n,Number(t[t.length-1]),r]}function lS(e,t,n){let r=rS("pad",e,t,n);if("explicit"===r){r=rS("explicitPaddings",e,t,n);const a=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)a[e][0]=r[2*e],a[e][1]=r[2*e+1];return a}return r}function uS(e){return e.kept?e:Ao(e)}const cS=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],pS=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],dS=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}],hS=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],fS=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],mS=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],gS=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],vS=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],bS=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],yS=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],wS=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],xS=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],kS=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],CS=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],SS=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],ES=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],TS=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],$S=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],IS=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];class NS{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[].concat(...[E,T,$,I,N,O,A,M,_,R,P,D,L,B,F,z,V,W,H].map((e=>e.json)));this.opMappers=e.reduce(((e,t)=>(e[t.tfOpName]=t,e)),{})}transformGraph(e,t={}){const n=e.node,r=[],a=[],s=[],o=n.reduce(((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?a.push(e[t.name]):null!=t.input&&0!==t.input.length||s.push(e[t.name]),e)),{});let i=[];const l=[];let u={},c={};null!=t&&(u=this.mapSignatureEntries(t.inputs),c=this.mapSignatureEntries(t.outputs));const p=Object.keys(o);p.forEach((e=>{const t=o[e];t.inputNames.forEach(((e,n)=>{const[r,,a]=sS(e),s=o[r];if(null!=s.outputs){const e=s.outputs.indexOf(a);if(-1!==e){const a=`${r}:${e}`;t.inputNames[n]=a}}t.inputs.push(s),s.children.push(t)}))})),0===Object.keys(c).length?p.forEach((e=>{const t=o[e];0===t.children.length&&l.push(t)})):Object.keys(c).forEach((e=>{const[t]=sS(e),n=o[t];null!=n&&(n.signatureKey=c[e],l.push(n))})),Object.keys(u).length>0?Object.keys(u).forEach((e=>{const[t]=sS(e),n=o[t];n&&(n.signatureKey=u[e],i.push(n))})):i=r;let d={};null!=e.library&&null!=e.library.function&&(d=e.library.function.reduce(((e,t)=>(e[t.signature.name]=this.mapFunction(t),e)),{}));const h={nodes:o,inputs:i,outputs:l,weights:a,placeholders:r,signature:t,functions:d};return s.length>0&&(h.initNodes=s),h}mapSignatureEntries(e){return Object.keys(e||{}).reduce(((t,n)=>(t[e[n].name]=n,t)),{})}mapNode(e){const t=tS(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((e=>e.startsWith("^")?e.substr(1):e)),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce(((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e)),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce(((t,n)=>{const r=n.type;let a;switch(n.type){case"string":a=AS(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=AS(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":a=VS(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=VS(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":a=_S(e.attr,n.tfName,n.defaultValue||0),void 0===a&&n.tfDeprecatedName&&(a=_S(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":a=zS(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=zS(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":a=MS(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=MS(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":a=HS(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=HS(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":a=FS(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=FS(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":a=WS(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=WS(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":a=DS(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=DS(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":a=LS(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=LS(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":a=PS(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=PS(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${n.type} for op: ${e.op}`)}return t[n.name]={value:a,type:r},t}),{})),n}mapFunction(e){const t=e.nodeDef,n=[];let r={};null!=t&&(r=t.reduce(((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e)),{}));const a=[],s=[];e.signature.inputArg.forEach((e=>{const[t]=sS(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:RS(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,a.push(n),r[t]=n}));Object.keys(r).forEach((e=>{const t=r[e];t.inputNames.forEach(((e,n)=>{const[a,,s]=sS(e),o=r[a];if(null!=o.outputs){const e=o.outputs.indexOf(s);if(-1!==e){const r=`${a}:${e}`;t.inputNames[n]=r}}t.inputs.push(o),o.children.push(t)}))}));const o=e.ret;e.signature.outputArg.forEach((e=>{const[t,n]=sS(o[e.name]),a=r[t];null!=a&&(a.defaultOutput=n,s.push(a))}));const i=this.mapArgsToSignature(e);return{nodes:r,inputs:a,outputs:s,weights:n,placeholders:[],signature:i}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce(((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e)),{}),outputs:e.signature.outputArg.reduce(((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t)),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}function OS(e,t){const n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){const t=Ge().global;if(void 0!==t.atob)return t.atob(e);if("undefined"!=typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function AS(e,t,n,r=!1){const a=e[t];return null!=a?OS(a.s,r):n}function MS(e,t,n){const r=e[t];return r?r.b:n}function _S(e,t,n){const r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof a?a:parseInt(a,10)}function RS(e){switch("string"==typeof e&&(e=JC[e]),e){case JC.DT_FLOAT:case JC.DT_HALF:return"float32";case JC.DT_INT32:case JC.DT_INT64:case JC.DT_INT8:case JC.DT_UINT8:return"int32";case JC.DT_BOOL:return"bool";case JC.DT_DOUBLE:return"float32";case JC.DT_STRING:return"string";default:return null}}function PS(e,t,n){const r=e[t];return r&&r.func?r.func.name:n}function DS(e,t,n){const r=e[t];return r&&r.type?RS(r.type):n}function LS(e,t,n){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map((e=>RS(e))):n}function BS(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((e=>"number"==typeof e.size?e.size:parseInt(e.size,10))):[]}function FS(e,t,n){const r=e[t];return r&&r.shape?BS(r.shape):n}function zS(e,t,n){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((e=>"number"==typeof e?e:parseInt(e,10))):n}function VS(e,t,n,r=!1){const a=e[t];return a&&a.list&&a.list.s?a.list.s.map((e=>OS(e,r))):n}function WS(e,t,n){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((e=>BS(e))):n}function HS(e,t,n){const r=e[t];return r&&r.list&&r.list.b?r.list.b:n}class jS{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map((e=>this.getInput(e))),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce(((e,t)=>(e[t]=this.getAttr(t),e)),{}))}getInput(e){return aS(e,this.tensorMap,this.context)}getAttr(e,t){const n=this.node.rawAttrs[e];if(null!=n.tensor)return aS(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return _S(this.node.rawAttrs,e,t);if(null!=n.s)return AS(this.node.rawAttrs,e,t);if(null!=n.b)return MS(this.node.rawAttrs,e,t);if(null!=n.shape)return FS(this.node.rawAttrs,e,t);if(null!=n.type)return DS(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return zS(this.node.rawAttrs,e,t);if(null!=n.list.s)return VS(this.node.rawAttrs,e,t);if(null!=n.list.shape)return WS(this.node.rawAttrs,e,t);if(null!=n.list.b)return HS(this.node.rawAttrs,e,t);if(null!=n.list.type)return LS(this.node.rawAttrs,e,t)}return t}}function US(e,t,n=""){if("number"!=typeof e&&"number"!=typeof t){re(e.length===t.length,(()=>n+` Shapes ${e} and ${t} must match`));for(let r=0;r<e.length;r++){const a=e[r],s=t[r];re(a<0||s<0||a===s,(()=>n+` Shapes ${e} and ${t} must match`))}}}function GS(e){return"number"!=typeof e&&!e.some((e=>e<0))}function qS(e,t,n){let r=XS(e,n);const a=!GS(r);if(a&&0===t.length)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(a&&t.forEach((e=>{r=XS(e.shape,r)})),!GS(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function XS(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);const n=[];for(let r=0;r<e.length;++r){const a=e[r],s=t[r];if(a>=0&&s>=0&&a!==s)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=a>=0?a:s}return n}class KS{constructor(e,t,n,r,a,s,o){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=a,this.dynamicSize=s,this.clearAfterRead=o,this.tensors=[],this.closed_=!1,this.idTensor=$l(0),nl(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map((e=>this.read(e)))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},\n          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),US(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);n.tensor=t,nl(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach(((e,n)=>this.write(e,t[n])))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return As([],[0].concat(this.elementShape));const n=this.readMany(e);return US(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),ed(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(0===this.size())return As([],[0].concat(this.elementShape));const t=[];for(let e=0;e<this.size();e++)t.push(e);const n=this.readMany(t);return US(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),vu(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(e,hd(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let n=0;const r=e.map((e=>(n+=e,n)));if(n!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${n}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const a=0===n?0:t.size/n,s=[];el((()=>{t=fu(t,[1,n,a]);for(let n=0;n<e.length;++n){const o=[0,0===n?0:r[n-1],0],i=[1,e[n],a];s[n]=fu(yu(t,o,i),this.elementShape)}return s}));const o=[];for(let t=0;t<e.length;t++)o[t]=t;this.writeMany(o,s)}}class YS{constructor(e,t,n,r=-1){this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach((e=>{if(n!==e.dtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${e.dtype}`);US(t,e.shape,"TensorList shape mismatch: "),nl(e)})),this.idTensor=$l(0),this.maxNumElements=r,nl(this.idTensor)}get id(){return this.idTensor.id}copy(){return new YS([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,n=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(-1!==n&&this.tensors.length!==n)throw new Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);US(e,this.elementShape,"TensorList shape mismatch: ");const r=qS(this.elementShape,this.tensors,e);return el((()=>{const e=this.tensors.map((e=>fu(e,r)));return ed(e,0)}))}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=qS(this.elementShape,this.tensors,e),r=this.tensors.pop();return US(r.shape,e,"TensorList shape mismatch: "),fu(r,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(US(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");nl(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);this.tensors.length=e}getItem(e,t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[e])throw new Error(`element at index ${e} is null.`);US(this.tensors[e].shape,t,"TensorList shape mismatch: ");const r=qS(this.elementShape,this.tensors,t);return fu(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);US(this.elementShape,t.shape,"TensorList shape mismatch: "),nl(t),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);US(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());const r=qS(this.elementShape,this.tensors,n);return 0===e.length?As([],[0].concat(r)):el((()=>{const t=e.map((e=>fu(this.tensors[e],r)));return ed(t,0)}))}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);US(this.elementShape,t,"TensorList shape mismatch: ");const n=qS(this.elementShape,this.tensors,t);return 0===this.size()?As([],[0].concat(n)):el((()=>{const e=this.tensors.map((e=>fu(e,n)));return vu(e,0)}))}}const JS=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{const r=rS("thenBranch",e,t,n),a=rS("elseBranch",e,t,n),s=rS("cond",e,t,n),o=rS("args",e,t,n);return(await s.data())[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[a].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=rS("body",e,t,n),a=rS("cond",e,t,n),s=rS("args",e,t,n),o=await n.functionMap[a].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap),i=s.map((e=>e.id));let l=await o[0].data();o.forEach((e=>{e.kept||-1!==i.indexOf(e.id)||e.dispose()}));let u=s;for(;l[0];){const e=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const t=u.map((e=>e.id));e.forEach((e=>{e.kept||-1!==i.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}));const s=await n.functionMap[a].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);l=await s[0].data(),s.forEach((e=>{e.kept||-1!==i.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}))}return u}case"LoopCond":return[uS(rS("pred",e,t,n))];case"Switch":{const r=rS("pred",e,t,n);let a=rS("data",e,t,n);return a.kept||(a=uS(a)),(await r.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{const r=e.inputNames.find((e=>void 0!==aS(e,t,n)));if(r){return[uS(aS(r,t,n))]}return}case"Enter":{const r=rS("frameName",e,t,n),a=rS("tensor",e,t,n);return n.enterFrame(r),[uS(a)]}case"Exit":{const r=rS("tensor",e,t,n);return n.exitFrame(),[uS(r)]}case"NextIteration":{const r=rS("tensor",e,t,n);return n.nextIteration(),[uS(r)]}case"TensorArrayV3":{const r=rS("size",e,t,n),a=rS("dtype",e,t,n),s=rS("elementShape",e,t,n),o=rS("dynamicSize",e,t,n),i=rS("clearAfterRead",e,t,n),l=rS("identicalElementShapes",e,t,n),u=rS("name",e,t,n),c=new KS(u,a,r,s,l,o,i);return n.addTensorArray(c),[c.idTensor,$l(1)]}case"TensorArrayWriteV3":{const r=rS("tensorArrayId",e,t,n),a=rS("index",e,t,n),s=rS("tensor",e,t,n),o=n.getTensorArray(r.id);return o.write(a,s),[o.idTensor]}case"TensorArrayReadV3":{const r=rS("tensorArrayId",e,t,n),a=rS("index",e,t,n);return[n.getTensorArray(r.id).read(a)]}case"TensorArrayGatherV3":{const r=rS("tensorArrayId",e,t,n),a=rS("indices",e,t,n),s=rS("dtype",e,t,n);return[n.getTensorArray(r.id).gather(a,s)]}case"TensorArrayScatterV3":{const r=rS("tensorArrayId",e,t,n),a=rS("indices",e,t,n),s=rS("tensor",e,t,n),o=n.getTensorArray(r.id);return o.scatter(a,s),[o.idTensor]}case"TensorArrayConcatV3":{const r=rS("tensorArrayId",e,t,n),a=n.getTensorArray(r.id),s=rS("dtype",e,t,n);return[a.concat(s)]}case"TensorArraySplitV3":{const r=rS("tensorArrayId",e,t,n),a=rS("tensor",e,t,n),s=rS("lengths",e,t,n),o=n.getTensorArray(r.id);return o.split(s,a),[o.idTensor]}case"TensorArraySizeV3":{const r=rS("tensorArrayId",e,t,n);return[$l(n.getTensorArray(r.id).size(),"int32")]}case"TensorArrayCloseV3":{const r=rS("tensorArrayId",e,t,n),a=n.getTensorArray(r.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{const r=rS("tensorListId",e,t,n),a=rS("index",e,t,n),s=rS("tensor",e,t,n),o=n.getTensorList(r.id);return o.setItem(a,s),[o.idTensor]}case"TensorListGetItem":{const r=rS("tensorListId",e,t,n),a=rS("index",e,t,n),s=rS("elementShape",e,t,n),o=rS("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(a,s,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=rS("indices",e,t,n),a=function(e,t,n,r){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const a=Math.max(...t);if(null!=r&&-1!==r&&a>=r)throw new Error(`Max index must be < array size (${a}  vs. ${r})`);const s=new YS([],n,e.dtype,r),o=hd(e,0);return t.forEach(((e,t)=>{s.setItem(e,o[t])})),s}(rS("tensor",e,t,n),r,rS("elementShape",e,t,n),rS("numElements",e,t,n));return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=rS("elementShape",e,t,n),a=rS("elementDType",e,t,n);let s;s="TensorListReserve"===e.op?"numElements":"maxNumElements";const o=function(e,t,n){return new YS([],e,t,n)}(r,a,rS(s,e,t,n));return n.addTensorList(o),[o.idTensor]}case"TensorListGather":{const r=rS("tensorListId",e,t,n),a=rS("indices",e,t,n),s=rS("elementShape",e,t,n),o=rS("elementDType",e,t,n);return[n.getTensorList(r.id).gather(a,o,s)]}case"TensorListStack":{const r=rS("tensorListId",e,t,n),a=rS("elementShape",e,t,n),s=rS("elementDType",e,t,n),o=rS("numElements",e,t,n);return[n.getTensorList(r.id).stack(a,s,o)]}case"TensorListFromTensor":{const r=function(e,t,n){const r=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);US(e.shape.slice(1),t,"TensorList shape mismatch: ");const a=hd(e);return new YS(a,t,r)}(rS("tensor",e,t,n),rS("elementShape",e,t,n),rS("elementDType",e,t,n));return n.addTensorList(r),[r.idTensor]}case"TensorListConcat":{const r=rS("tensorListId",e,t,n),a=n.getTensorList(r.id),s=rS("dtype",e,t,n),o=rS("elementShape",e,t,n);return[a.concat(s,o)]}case"TensorListPushBack":{const r=rS("tensorListId",e,t,n),a=rS("tensor",e,t,n),s=n.getTensorList(r.id);return s.pushBack(a),[s.idTensor]}case"TensorListPopBack":{const r=rS("tensorListId",e,t,n),a=rS("elementShape",e,t,n),s=rS("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(a,s)]}case"TensorListSplit":{const r=rS("tensor",e,t,n),a=rS("elementShape",e,t,n),s=function(e,t,n){let r=0;const a=t.map((e=>(r+=e,r)));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${e.shape}`);const s=XS(e.shape.slice(1),n),o=0===r?0:e.size/r,i=el((()=>{const n=[];e=fu(e,[1,r,o]);for(let r=0;r<t.length;++r){const i=[0,0===r?0:a[r-1],0],l=[1,t[r],o];n[r]=fu(yu(e,i,l),s)}return e.dispose(),n})),l=new YS([],n,e.dtype,t.length);for(let e=0;e<i.length;e++)l.setItem(e,i[e]);return l}(r,rS("lengths",e,t,n),a);return n.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};function ZS(e,t,n){const[r,a]=rS("fusedOps",e,t,n),s="biasadd"===r,o=!s,i="prelu"===a,l="fusedbatchnorm"===r,u=rS("numArgs",e,t,n);if(s){if(i&&2!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&s&&1!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=rS("strides",e,t,n),p=lS(e,t,n),d=rS("dataFormat",e,t,n).toUpperCase(),h=rS("dilations",e,t,n);let[f,m]=rS("args",e,t,n);o&&(m=f,f=void 0);return{stride:c,pad:p,dataFormat:d,dilations:h,biasArg:f,preluArg:m,activationFunc:a,leakyreluAlpha:rS("leakyreluAlpha",e,t,n)}}function QS(e,t,n){return{boxes:rS("boxes",e,t,n),scores:rS("scores",e,t,n),maxOutputSize:rS("maxOutputSize",e,t,n),iouThreshold:rS("iouThreshold",e,t,n),scoreThreshold:rS("scoreThreshold",e,t,n),softNmsSigma:rS("softNmsSigma",e,t,n)}}class eE{constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=$l(0),this.tensorMap=new Map,nl(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return $l(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),el((()=>{const e=hd(t),r=n.length,a=e.length;re(r===a,(()=>`The number of elements doesn't match, keys has ${r} elements, the values has ${a} elements.`));for(let t=0;t<r;t++){const r=n[t],a=e[t];nl(a),this.tensorMap.set(r,a)}return this.handle}))}async find(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return el((()=>{const e=[];for(let r=0;r<n.length;r++){const a=n[r],s=this.findWithDefault(a,t);e.push(s)}return ed(e)}))}findWithDefault(e,t){const n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}function tE(e,t,n,r){const a=((e,t,n)=>{switch(e.category){case"arithmetic":return el((()=>((e,t,n)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[hl(rS("a",e,t,n),rS("b",e,t,n))];case"AddN":return[jl(rS("tensors",e,t,n))];case"FloorMod":case"Mod":return[ep(rS("a",e,t,n),rS("b",e,t,n))];case"Mul":return[gl(rS("a",e,t,n),rS("b",e,t,n))];case"RealDiv":case"Div":return[ml(rS("a",e,t,n),rS("b",e,t,n))];case"DivNoNan":return[ec(rS("a",e,t,n),rS("b",e,t,n))];case"FloorDiv":return[fl(rS("a",e,t,n),rS("b",e,t,n))];case"Sub":return[_l(rS("a",e,t,n),rS("b",e,t,n))];case"Minimum":return[Zc(rS("a",e,t,n),rS("b",e,t,n))];case"Maximum":return[Dl(rS("a",e,t,n),rS("b",e,t,n))];case"Pow":return[Ml(rS("a",e,t,n),rS("b",e,t,n))];case"SquaredDifference":return[Zp(rS("a",e,t,n),rS("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"basic_math":return el((()=>((e,t,n)=>{switch(e.op){case"Abs":case"ComplexAbs":return[Pl(rS("x",e,t,n))];case"Acos":return[Wl(rS("x",e,t,n))];case"Acosh":return[Hl(rS("x",e,t,n))];case"Asin":return[Kl(rS("x",e,t,n))];case"Asinh":return[Yl(rS("x",e,t,n))];case"Atan":return[Jl(rS("x",e,t,n))];case"Atan2":return[Zl(rS("x",e,t,n),rS("y",e,t,n))];case"Atanh":return[Ql(rS("x",e,t,n))];case"Ceil":return[Ou(rS("x",e,t,n))];case"Complex":return[Ns(rS("real",e,t,n),rS("imag",e,t,n))];case"Cos":return[Hu(rS("x",e,t,n))];case"Cosh":return[ju(rS("x",e,t,n))];case"Elu":return[rc(rS("x",e,t,n))];case"Erf":return[ac(rS("x",e,t,n))];case"Exp":return[sc(rS("x",e,t,n))];case"Expm1":return[ic(rS("x",e,t,n))];case"Floor":return[cc(rS("x",e,t,n))];case"Log":return[Cc(rS("x",e,t,n))];case"Log1p":return[Sc(rS("x",e,t,n))];case"Imag":return[fc(rS("x",e,t,n))];case"Neg":return[Ec(rS("x",e,t,n))];case"Reciprocal":return[Tp(rS("x",e,t,n))];case"Real":return[Ep(rS("x",e,t,n))];case"Relu":return[$p(rS("x",e,t,n))];case"Round":return[Rp(rS("x",e,t,n))];case"Selu":return[Dp(rS("x",e,t,n))];case"Sigmoid":return[bu(rS("x",e,t,n))];case"Sin":return[zp(rS("x",e,t,n))];case"Sign":return[Fp(rS("x",e,t,n))];case"Sinh":return[Vp(rS("x",e,t,n))];case"Softplus":return[Tc(rS("x",e,t,n))];case"Sqrt":return[vl(rS("x",e,t,n))];case"Square":return[bl(rS("x",e,t,n))];case"Tanh":return[wu(rS("x",e,t,n))];case"Tan":return[rd(rS("x",e,t,n))];case"ClipByValue":return[Au(rS("x",e,t,n),rS("clipValueMin",e,t,n),rS("clipValueMax",e,t,n))];case"Relu6":return[Ip(rS("x",e,t,n))];case"Rsqrt":return[Pp(aS(e.inputNames[0],t,n))];case"Prod":return[mp(rS("x",e,t,n),rS("axes",e,t,n))];case"LeakyRelu":return[bc(rS("x",e,t,n),rS("alpha",e,t,n))];case"Prelu":return[fp(rS("x",e,t,n),rS("alpha",e,t,n))];case"IsNan":return[vc(aS(e.inputNames[0],t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"control":return JS(e,t,n);case"convolution":return el((()=>((e,t,n)=>{switch(e.op){case"Conv1D":{const r=rS("stride",e,t,n),a=rS("pad",e,t,n),s=rS("dataFormat",e,t,n).toUpperCase(),o=rS("dilation",e,t,n);return[Lu(rS("x",e,t,n),rS("filter",e,t,n),r,a,s,o)]}case"Conv2D":{const r=rS("strides",e,t,n),a=lS(e,t,n),s=rS("dataFormat",e,t,n).toUpperCase(),o=rS("dilations",e,t,n);return[Du(rS("x",e,t,n),rS("filter",e,t,n),[r[1],r[2]],a,s,[o[1],o[2]])]}case"_FusedConv2D":{const{stride:r,pad:a,dataFormat:s,dilations:o,biasArg:i,preluArg:l,activationFunc:u,leakyreluAlpha:c}=ZS(e,t,n);return[_d({x:rS("x",e,t,n),filter:rS("filter",e,t,n),strides:[r[1],r[2]],pad:a,dataFormat:s,dilations:[o[1],o[2]],bias:i,activation:u,preluActivationWeights:l,leakyreluAlpha:c})]}case"FusedDepthwiseConv2dNative":{const{stride:r,pad:a,dataFormat:s,dilations:o,biasArg:i,preluArg:l,activationFunc:u,leakyreluAlpha:c}=ZS(e,t,n);return[Dd({x:rS("x",e,t,n),filter:rS("filter",e,t,n),strides:[r[1],r[2]],pad:a,dataFormat:s,dilations:[o[1],o[2]],bias:i,activation:u,preluActivationWeights:l,leakyreluAlpha:c})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const r=rS("outputShape",e,t,n),a=rS("strides",e,t,n),s=lS(e,t,n);return[Fu(rS("x",e,t,n),rS("filter",e,t,n),r,[a[1],a[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const r=rS("strides",e,t,n),a=lS(e,t,n),s=rS("dilations",e,t,n),o=rS("dataFormat",e,t,n).toUpperCase();return[Ku(rS("input",e,t,n),rS("filter",e,t,n),[r[1],r[2]],a,o,[s[1],s[2]])]}case"Conv3D":{const r=rS("strides",e,t,n),a=rS("pad",e,t,n),s=rS("dataFormat",e,t,n).toUpperCase(),o=rS("dilations",e,t,n);return[zu(rS("x",e,t,n),rS("filter",e,t,n),[r[1],r[2],r[3]],a,s,[o[1],o[2],o[3]])]}case"AvgPool":{const r=rS("strides",e,t,n),a=rS("pad",e,t,n),s=rS("kernelSize",e,t,n);return[mu(rS("x",e,t,n),[s[1],s[2]],[r[1],r[2]],a)]}case"MaxPool":{const r=rS("strides",e,t,n),a=rS("pad",e,t,n),s=rS("kernelSize",e,t,n);return[jc(rS("x",e,t,n),[s[1],s[2]],[r[1],r[2]],a)]}case"MaxPoolWithArgmax":{const r=rS("strides",e,t,n),a=rS("pad",e,t,n),s=rS("kernelSize",e,t,n),o=rS("includeBatchInIndex",e,t,n),{result:i,indexes:l}=Gc(rS("x",e,t,n),[s[1],s[2]],[r[1],r[2]],a,o);return[i,l]}case"AvgPool3D":{const r=rS("strides",e,t,n),a=rS("pad",e,t,n),s=rS("kernelSize",e,t,n);return[gu(rS("x",e,t,n),[s[1],s[2],s[3]],[r[1],r[2],r[3]],a)]}case"MaxPool3D":{const r=rS("strides",e,t,n),a=rS("pad",e,t,n),s=rS("kernelSize",e,t,n);return[Uc(rS("x",e,t,n),[s[1],s[2],s[3]],[r[1],r[2],r[3]],a)]}case"Dilation2D":{const r=rS("strides",e,t,n),a=rS("pad",e,t,n),s=rS("dilations",e,t,n),o=r[1],i=r[2],l=s[1],u=s[2];return[Ju(rS("x",e,t,n),rS("filter",e,t,n),[o,i],a,[l,u],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"creation":return el((()=>((e,t,n)=>{switch(e.op){case"Fill":{const r=rS("shape",e,t,n),a=rS("dtype",e,t,n);return[Ol(r,rS("value",e,t,n),a)]}case"LinSpace":return[xc(rS("start",e,t,n),rS("stop",e,t,n),rS("num",e,t,n))];case"Multinomial":{const r=rS("logits",e,t,n),a=rS("numSamples",e,t,n),s=rS("seed",e,t,n);return[rp(r,a,s)]}case"OneHot":{const r=rS("indices",e,t,n),a=rS("depth",e,t,n),s=rS("onValue",e,t,n),o=rS("offValue",e,t,n);return[Jo(r,a,s,o)]}case"Ones":return[Kc(rS("shape",e,t,n),rS("dtype",e,t,n))];case"OnesLike":return[sp(rS("x",e,t,n))];case"RandomUniform":return[Cp(rS("shape",e,t,n),rS("minval",e,t,n),rS("maxval",e,t,n),rS("dtype",e,t,n))];case"Range":return[Sp(rS("start",e,t,n),rS("stop",e,t,n),rS("step",e,t,n),rS("dtype",e,t,n))];case"TruncatedNormal":{const r=rS("shape",e,t,n),a=rS("mean",e,t,n),s=rS("stdDev",e,t,n),o=rS("seed",e,t,n);return[cd(r,a,s,rS("dtype",e,t,n),o)]}case"Zeros":return[Xc(rS("shape",e,t,n),rS("dtype",e,t,n))];case"ZerosLike":return[yl(rS("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"dynamic":return(async(e,t,n)=>{switch(e.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:a,maxOutputSize:s,iouThreshold:o,scoreThreshold:i,softNmsSigma:l}=QS(e,t,n),u=await Ph.nonMaxSuppressionWithScoreAsync(r,a,s,o,i,l);return[u.selectedIndices,u.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:a,maxOutputSize:s,iouThreshold:o,scoreThreshold:i}=QS(e,t,n),l=rS("padToMaxOutputSize",e,t,n),u=await Ph.nonMaxSuppressionPaddedAsync(r,a,s,o,i,l);return[u.selectedIndices,u.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:a,maxOutputSize:s,iouThreshold:o,scoreThreshold:i}=QS(e,t,n);return[await Ph.nonMaxSuppressionAsync(r,a,s,o,i)]}case"Where":{const r=Oo(rS("condition",e,t,n),"bool"),a=[await gd(r)];return r.dispose(),a}case"ListDiff":return Bp(rS("x",e,t,n),rS("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n);case"evaluation":return el((()=>((e,t,n)=>{switch(e.op){case"TopKV2":{const r=rS("x",e,t,n),a=rS("k",e,t,n),s=rS("sorted",e,t,n),o=ud(r,a,s);return[o.values,o.indices]}case"Unique":{const r=rS("x",e,t,n),a=pd(r);return[a.values,a.indices]}case"UniqueV2":{const r=rS("x",e,t,n),a=rS("axis",e,t,n),s=pd(r,a);return[s.values,s.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"image":return el((()=>((e,t,n)=>{switch(e.op){case"ResizeBilinear":{const r=rS("images",e,t,n),a=rS("size",e,t,n),s=rS("alignCorners",e,t,n),o=rS("halfPixelCenters",e,t,n);return[Ph.resizeBilinear(r,[a[0],a[1]],s,o)]}case"ResizeNearestNeighbor":{const r=rS("images",e,t,n),a=rS("size",e,t,n),s=rS("alignCorners",e,t,n),o=rS("halfPixelCenters",e,t,n);return[Ph.resizeNearestNeighbor(r,[a[0],a[1]],s,o)]}case"CropAndResize":{const r=rS("image",e,t,n),a=rS("boxes",e,t,n),s=rS("boxInd",e,t,n),o=rS("cropSize",e,t,n),i=rS("method",e,t,n),l=rS("extrapolationValue",e,t,n);return[Ph.cropAndResize(r,a,s,o,i,l)]}case"ImageProjectiveTransformV3":{const r=rS("images",e,t,n),a=rS("transforms",e,t,n),s=rS("outputShape",e,t,n),o=rS("fillValue",e,t,n),i=rS("interpolation",e,t,n),l=rS("fillMode",e,t,n);return[Ph.transform(r,a,i.toLowerCase(),l.toLowerCase(),o,s)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"graph":return el((()=>((e,t,n)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const r=rS("default",e,t,n);return[aS(e.name,t,n)||r];case"Placeholder":return[aS(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[uS(rS("x",e,t,n))];case"IdentityN":return rS("x",e,t,n).map((e=>uS(e)));case"Shape":return[ad(rS("x",e,t,n).shape,"int32")];case"ShapeN":return rS("x",e,t,n).map((e=>ad(e.shape)));case"Size":return[$l(rS("x",e,t,n).size,"int32")];case"Rank":return[$l(rS("x",e,t,n).rank,"int32")];case"NoOp":return[$l(1)];case"Print":const a=rS("x",e,t,n),s=rS("data",e,t,n),o=rS("message",e,t,n),i=rS("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(let e=0;e<s.length;e++)console.log(Array.prototype.slice.call(s[e].dataSync()).slice(0,i));return[a];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"logical":return el((()=>((e,t,n)=>{switch(e.op){case"Equal":return[Zu(rS("a",e,t,n),rS("b",e,t,n))];case"NotEqual":return[ap(rS("a",e,t,n),rS("b",e,t,n))];case"Greater":return[dc(rS("a",e,t,n),rS("b",e,t,n))];case"GreaterEqual":return[hc(rS("a",e,t,n),rS("b",e,t,n))];case"Less":return[yc(rS("a",e,t,n),rS("b",e,t,n))];case"LessEqual":return[wc(rS("a",e,t,n),rS("b",e,t,n))];case"LogicalAnd":return[zc(rS("a",e,t,n),rS("b",e,t,n))];case"LogicalNot":return[Vc(rS("a",e,t,n))];case"LogicalOr":return[Wc(rS("a",e,t,n),rS("b",e,t,n))];case"Select":case"SelectV2":return[Qu(rS("condition",e,t,n),rS("a",e,t,n),rS("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"matrices":return el((()=>((e,t,n)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[Yo(rS("a",e,t,n),rS("b",e,t,n),rS("transposeA",e,t,n),rS("transposeB",e,t,n))];case"Einsum":return[nc(rS("equation",e,t,n),...rS("tensors",e,t,n))];case"Transpose":return[Zo(rS("x",e,t,n),rS("perm",e,t,n))];case"_FusedMatMul":const[r,a]=rS("fusedOps",e,t,n),s="biasadd"===r,o="prelu"===a,i=rS("numArgs",e,t,n),l=rS("leakyreluAlpha",e,t,n);if(s){if(o&&2!==i)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&1!==i)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,c]=rS("args",e,t,n);return[Ld({a:rS("a",e,t,n),b:rS("b",e,t,n),transposeA:rS("transposeA",e,t,n),transposeB:rS("transposeB",e,t,n),bias:u,activation:a,preluActivationWeights:c,leakyreluAlpha:l})];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"normalization":return el((()=>((e,t,n)=>{switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[Cu(rS("x",e,t,n),rS("mean",e,t,n),rS("variance",e,t,n),rS("offset",e,t,n),rS("scale",e,t,n),rS("epsilon",e,t,n))];case"LRN":return[kc(rS("x",e,t,n),rS("radius",e,t,n),rS("bias",e,t,n),rS("alpha",e,t,n),rS("beta",e,t,n))];case"Softmax":return[Gp(rS("x",e,t,n))];case"LogSoftmax":return[Oc(rS("x",e,t,n))];case"SparseToDense":return[kd(rS("sparseIndices",e,t,n),rS("outputShape",e,t,n),rS("sparseValues",e,t,n),rS("defaultValue",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"reduction":return el((()=>((e,t,n)=>{switch(e.op){case"Max":{const r=rS("axis",e,t,n),a=rS("keepDims",e,t,n);return[Ic(rS("x",e,t,n),r,a)]}case"Mean":{const r=rS("axis",e,t,n),a=rS("keepDims",e,t,n);return[qc(rS("x",e,t,n),r,a)]}case"Min":{const r=rS("axis",e,t,n),a=rS("keepDims",e,t,n);return[Jc(rS("x",e,t,n),r,a)]}case"Sum":{const r=rS("axis",e,t,n),a=rS("keepDims",e,t,n);return[Nc(rS("x",e,t,n),r,a)]}case"All":{const r=rS("axis",e,t,n),a=rS("keepDims",e,t,n);return[Ul(rS("x",e,t,n),r,a)]}case"Any":{const r=rS("axis",e,t,n),a=rS("keepDims",e,t,n);return[Gl(rS("x",e,t,n),r,a)]}case"ArgMax":{const r=rS("axis",e,t,n);return[ql(rS("x",e,t,n),r)]}case"ArgMin":{const r=rS("axis",e,t,n);return[Xl(rS("x",e,t,n),r)]}case"Prod":{const r=rS("axis",e,t,n),a=rS("keepDims",e,t,n);return[mp(rS("x",e,t,n),r,a)]}case"Cumprod":{const r=rS("axis",e,t,n),a=rS("exclusive",e,t,n),s=rS("reverse",e,t,n);return[Uu(rS("x",e,t,n),r,a,s)]}case"Cumsum":{const r=rS("axis",e,t,n),a=rS("exclusive",e,t,n),s=rS("reverse",e,t,n);return[Gu(rS("x",e,t,n),r,a,s)]}case"Bincount":const r=rS("x",e,t,n),a=rS("weights",e,t,n),s=rS("size",e,t,n);return[$u(r,a,s)];case"DenseBincount":{const r=rS("x",e,t,n),a=rS("weights",e,t,n),s=rS("size",e,t,n),o=rS("binaryOutput",e,t,n);return[qu(r,a,s,o)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"slice_join":return el((()=>((e,t,n)=>{switch(e.op){case"ConcatV2":case"Concat":{const r=rS("n",e,t,n),a=rS("axis",e,t,n);let s=rS("tensors",e,t,n);return s=s.slice(0,r),[vu(s,a)]}case"Gather":{const r=rS("x",e,t,n),a=rS("indices",e,t,n);return[pc(r,Oo(a,"int32"),0)]}case"GatherV2":{const r=rS("axis",e,t,n),a=rS("batchDims",e,t,n),s=rS("x",e,t,n),o=rS("indices",e,t,n);return[pc(s,Oo(o,"int32"),r,a)]}case"Reverse":{const r=rS("dims",e,t,n),a=[];for(let e=0;e<r.length;e++)r[e]&&a.push(e);const s=rS("x",e,t,n);return[Np(s,a)]}case"ReverseV2":{const r=rS("axis",e,t,n),a=rS("x",e,t,n);return[Np(a,r)]}case"Slice":{const r=rS("begin",e,t,n),a=rS("size",e,t,n);return[yu(rS("x",e,t,n),r,a)]}case"StridedSlice":{const r=rS("begin",e,t,n),a=rS("end",e,t,n),s=rS("strides",e,t,n),o=rS("beginMask",e,t,n),i=rS("endMask",e,t,n),l=rS("ellipsisMask",e,t,n),u=rS("newAxisMask",e,t,n),c=rS("shrinkAxisMask",e,t,n),p=rS("x",e,t,n);return[nd(p,r,a,s,o,i,l,u,c)]}case"Pack":return el((()=>{const r=rS("axis",e,t,n),a=rS("tensors",e,t,n),s=a[0].shape,o=Qp(a[0]).shape,i=a.map((e=>{const t=ue(e.shape,s);if(!t&&!ue(Qp(e).shape,o))throw new Error("the input tensors shape does not match");return t?e:fu(e,s)}));return[ed(i,r)]}));case"Unpack":{const r=rS("axis",e,t,n),a=rS("tensor",e,t,n);return hd(a,r)}case"Tile":{const r=rS("reps",e,t,n);return[lc(rS("x",e,t,n),r)]}case"Split":case"SplitV":{const r=rS("axis",e,t,n),a=rS("numOrSizeSplits",e,t,n),s=rS("x",e,t,n);return Yp(s,a,r)}case"ScatterNd":{const r=rS("indices",e,t,n),a=rS("values",e,t,n),s=rS("shape",e,t,n);return[xd(r,a,s)]}case"GatherNd":{const r=rS("x",e,t,n),a=rS("indices",e,t,n);return[Cd(r,a)]}case"SparseToDense":{const r=rS("sparseIndices",e,t,n),a=rS("outputShape",e,t,n),s=rS("sparseValues",e,t,n),o=rS("defaultValue",e,t,n);return[kd(r,s,a,s.dtype===o.dtype?o:Oo(o,s.dtype))]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"sparse":return el((()=>((e,t,n)=>{switch(e.op){case"SparseFillEmptyRows":{const{outputIndices:r,outputValues:a,emptyRowIndicator:s,reverseIndexMap:o}=Bh.sparseFillEmptyRows(rS("indices",e,t,n),rS("values",e,t,n),rS("denseShape",e,t,n),rS("defaultValue",e,t,n));return[r,a,s,o]}case"SparseReshape":{const{outputIndices:r,outputShape:a}=Bh.sparseReshape(rS("inputIndices",e,t,n),rS("inputShape",e,t,n),rS("newShape",e,t,n));return[r,a]}case"SparseSegmentMean":return[Bh.sparseSegmentMean(rS("data",e,t,n),rS("indices",e,t,n),rS("segmentIds",e,t,n))];case"SparseSegmentSum":return[Bh.sparseSegmentSum(rS("data",e,t,n),rS("indices",e,t,n),rS("segmentIds",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"spectral":return el((()=>((e,t,n)=>{switch(e.op){case"FFT":return[qp(rS("x",e,t,n))];case"IFFT":return[Xp(rS("x",e,t,n))];case"RFFT":return[Jp(rS("x",e,t,n))];case"IRFFT":return[Kp(rS("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"string":return el((()=>((e,t,n)=>{switch(e.op){case"StringNGrams":{const{nGrams:r,nGramsSplits:a}=Fh.stringNGrams(rS("data",e,t,n),rS("dataSplits",e,t,n),rS("separator",e,t,n),rS("nGramWidths",e,t,n),rS("leftPad",e,t,n),rS("rightPad",e,t,n),rS("padWidth",e,t,n),rS("preserveShortSequences",e,t,n));return[r,a]}case"StringSplit":{const{indices:r,values:a,shape:s}=Fh.stringSplit(rS("input",e,t,n),rS("delimiter",e,t,n),rS("skipEmpty",e,t,n));return[r,a,s]}case"StringToHashBucketFast":return[Fh.stringToHashBucketFast(rS("input",e,t,n),rS("numBuckets",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"transformation":return el((()=>((e,t,n)=>{switch(e.op){case"Cast":return[Oo(rS("x",e,t,n),rS("dtype",e,t,n))];case"ExpandDims":{const r=rS("axis",e,t,n);return[oc(rS("x",e,t,n),r)]}case"Squeeze":{const r=rS("axis",e,t,n);return[Qp(rS("x",e,t,n),r)]}case"Reshape":return[fu(rS("x",e,t,n),rS("shape",e,t,n))];case"MirrorPad":return[Qc(rS("x",e,t,n),rS("padding",e,t,n),rS("mode",e,t,n))];case"PadV2":case"Pad":return[ip(rS("x",e,t,n),rS("padding",e,t,n),rS("constantValue",e,t,n))];case"SpaceToBatchND":{const r=rS("blockShape",e,t,n),a=rS("paddings",e,t,n);return[dp(rS("x",e,t,n),r,a)]}case"BatchToSpaceND":{const r=rS("blockShape",e,t,n),a=rS("crops",e,t,n);return[ku(rS("x",e,t,n),r,a)]}case"DepthToSpace":{const r=rS("blockSize",e,t,n),a=rS("dataFormat",e,t,n).toUpperCase();return[Xu(rS("x",e,t,n),r,a)]}case"BroadcastTo":return[Nu(rS("x",e,t,n),rS("shape",e,t,n))];case"BroadcastArgs":return[Iu(rS("s0",e,t,n),rS("s1",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"hash_table":return(async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{const a=rS("keyDType",e,t,n),s=rS("valueDType",e,t,n),o=new eE(a,s);return r.addHashTable(e.name,o),[o.handle]}case"LookupTableImport":case"LookupTableImportV2":{const a=rS("tableHandle",e,t,n,r),s=rS("keys",e,t,n),o=rS("values",e,t,n),i=r.getHashTableById(a.id);return[await i.import(s,o)]}case"LookupTableFind":case"LookupTableFindV2":{const a=rS("tableHandle",e,t,n,r),s=rS("keys",e,t,n),o=rS("defaultValue",e,t,n),i=r.getHashTableById(a.id);return[await i.find(s,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const a=rS("tableHandle",e,t,n,r);return[r.getHashTableById(a.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n,r);case"custom":const a=tS(e.op);if(a&&a.customExecutor)return a.customExecutor(new jS(e,t,n));throw TypeError(`Custom op ${e.op} is not registered.`);default:throw TypeError(`Unknown op '${e.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return We(a)?a.then((e=>[].concat(e))):[].concat(a)}class nE{constructor(e={},t={},n={},r={}){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map((e=>0===e.id&&0===e.iterationId?"":`${e.frameName}-${e.iterationId}`)).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}function rE(e,t,n,r){const a=new Set,s=[];let o=null,i=null;const l=new Set,u=Object.keys(e).map((e=>iS(e)[0]));let c=[];null!=r&&(c=r.map((e=>iS(e.name)[0])));const p=[...t];for(;p.length>0;){const e=p.pop();(iE(e)||lE(e)||uE(e))&&null==o&&(o=e,i=o.children.map((e=>e.name)).filter((e=>a.has(e)))),a.add(e.name),null==n[e.name]&&(-1===u.indexOf(e.name)&&-1===c.indexOf(e.name)&&(0!==e.inputs.length?e.inputs.forEach((e=>{l.has(e.name)||(l.add(e.name),p.push(e))})):s.push(e.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:s,dynamicNode:o,syncInputs:i}}const aE=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],sE=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],oE=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function iE(e){return aE.indexOf(e.op)>=0}function lE(e){return sE.indexOf(e.op)>=0}function uE(e){return oE.indexOf(e.op)>=0}class cE{constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach((t=>{this._functionExecutorMap[t]=new cE(e.functions[t],this)}))}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map((t=>e[t].map((e=>e.id))));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get outputs(){return this._outputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get inputNodes(){return this._inputs.map((e=>e.signatureKey||e.name))}get outputNodes(){return this._outputs.map((e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t}))}get functions(){return Object.keys(this._functions).reduce(((e,t)=>(e[t]=this._functions[t].signature,e)),{})}getCompilationKey(e,t){const n=e.map((e=>e.name)).sort(),r=t.map((e=>e.name)).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}compile(e,t){const n=rE(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:a,syncInputs:s}=n;if(null!=a)throw new Error(`This execution contains the node '${a.name}', which has the dynamic op '${a.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(r.length>0){const n=t.map((e=>e.name)),a=Object.keys(e);throw new Error(`Cannot compute the outputs [${n}] from the provided inputs [${a}]. Missing the following inputs: [${r}]`)}return function(e,t,n){const{usedNodes:r,inputs:a}=n,s=[],o=Object.keys(a).map((e=>iS(e)[0])).map((t=>e.nodes[t])),i=e.initNodes;o.forEach((e=>{r.has(e.name)&&s.push(e)})),e.weights.forEach((e=>{r.has(e.name)&&s.push(e)})),null!=i&&i.forEach((e=>{r.has(e.name)&&s.push(e)}));const l=new Set,u=[];for(;s.length>0;){const e=s.pop();l.add(e.name),t[e.name]||u.push(e),e.children.forEach((e=>{!l.has(e.name)&&r.has(e.name)&&e.inputs.every((e=>l.has(e.name)))&&s.push(e)}))}return u}(this.graph,this.weightMap,n)}execute(e,t){e=this.mapInputs(e);const n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const r=n.map((e=>this.graph.nodes[iS(e)[0]])),a=t.map((e=>iS(e)[0]));let s=a.map((e=>this.graph.nodes[e]));this.resetIntermediateTensors(),0===s.length&&(s=this._outputs);const o=this.getCompilationKey(r,s);let i=this.compiledMap.get(o);null==i&&(i=this.compile(e,s),this.compiledMap.set(o,i));const l={},u={};return el((()=>{const n=new nE(this.weightMap,l,u,this.functionExecutorMap),r=Object.assign({},this.weightMap);Object.keys(e).forEach((t=>{const[n,a]=iS(t),s=[];s[a]=e[t],r[n]=s}));const s=this.getFrozenTensorIds(r),o={};for(let e=0;e<i.length;e++){const t=i[e];if(!r[t.name]){const e=tE(t,r,n,this._resourceManager);if(We(e))throw new Error(`The execution of the op '${t.op}' returned a promise. Please use model.executeAsync() instead.`);r[t.name]=e,this.checkTensorForDisposal(t.name,t,r,n,s,a,o)}}return null==this.parent&&n.dispose(s),t.map((e=>aS(e,r,n)))}))}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map((t=>e[t])).map((e=>e.map((e=>e.id)))));return new Set(t)}checkTensorForDisposal(e,t,n,r,a,s,o){"control"!==t.category&&-1===s.indexOf(e)&&(n[e].forEach((e=>{null!=e&&(o[e.id]=(o[e.id]||0)+t.children.length)})),t.inputs.forEach((e=>{if("control"!==e.category){const s=function(e,t,n){return t[oS(e,n.currentContextId)]}(e.name,n,r);null!=s&&s.forEach((e=>{if(e&&!e.kept&&!a.has(e.id)){const n=o[e.id];if(1===n){if(this.keepTensorForDebug){const[n,a]=sS(t.name,r);this.intermediateTensors[n]||(this.intermediateTensors[n]=[]),this.intermediateTensors[n][a]=e}else e.dispose();delete o[e.id]}else null!=n&&o[e.id]--}}))}})))}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach((e=>this.intermediateTensors[e].forEach((e=>e.dispose())))),this.disposeTensorsMap())}disposeTensorsMap(){this.tensorsMap&&Object.keys(this.tensorsMap).forEach((e=>{this.tensorsMap[e].forEach((e=>{!e||e.kept||e.isDisposed||this.keepIds.has(e.id)||e.dispose()}))}))}getIntermediateTensors(){return this.tensorsMap}resetIntermediateTensors(){for(const e in this.intermediateTensors)this.intermediateTensors[e].forEach((e=>e.dispose())),delete this.intermediateTensors[e]}async _executeAsync(e,t,n=!1,r={},a={}){n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepTensorForDebug=Ge().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(e){console.warn(e.message)}this.resetIntermediateTensors();const s=new nE(this.weightMap,r,a,this.functionExecutorMap);this.tensorsMap=await this.executeWithControlFlow(e,s,t,n);const o=t.map((e=>aS(e,this.tensorsMap,s))),i=o.map((e=>e.id)),l=Object.keys(e).map((t=>e[t].id));return this.keepIds=new Set([...i,...l,...this.weightIds]),this.keepTensorForDebug||this.disposeTensorsMap(),null==this.parent&&s.dispose(this.keepIds),o}async executeFunctionAsync(e,t,n){const r=e.reduce(((e,t,n)=>(e[this.inputs[n].name]=t,e)),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){const a=Object.keys(e),s=a.map((e=>this.graph.nodes[iS(e)[0]])),o=n.map((e=>iS(e)[0]));let i=o.map((e=>this.graph.nodes[e]));0===i.length&&(i=this._outputs);const{usedNodes:l,missingInputs:u,dynamicNode:c,syncInputs:p}=rE(e,i,this.weightMap,this._initNodes),d=[...s,...this.graph.weights,...this._initNodes||[]].map((e=>({node:e,contexts:t.currentContext}))),h=Object.assign({},this.weightMap);Object.keys(e).forEach((t=>{const[n,r]=iS(t),a=[];a[r]=e[t],h[n]=a}));const f={},m=this.getFrozenTensorIds(h),g={};for(;d.length>0;){const e=this.processStack(s,d,t,h,g,m,o,f,l);await Promise.all(e)}null!=c||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const v=i.filter((e=>!iE(e)&&!aS(e.name,h,t))).map((e=>e.name));if(v.length>0){let e="";throw null!=c&&(e=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${p}]`),new Error(`Cannot compute the outputs [${v}] from the provided inputs [${a}]. Consider providing the following inputs: [${u}]. ${e}`)}return h}processStack(e,t,n,r,a,s,o,i,l){const u=[];for(;t.length>0;){const e=t.pop();n.currentContext=e.contexts;let c="";if("Enter"===e.node.op&&rS("isConstant",e.node,r,n)&&([c]=sS(e.node.name,n)),null==r[e.node.name]){const p=tE(e.node,r,n,this._resourceManager);c||([c]=sS(e.node.name,n));const d=n.currentContext;We(p)?u.push(p.then((u=>(r[c]=u,n.currentContext=d,this.checkTensorForDisposal(c,e.node,r,n,s,o,i),this.processChildNodes(e.node,t,n,r,a,l),u)))):(r[c]=p,this.checkTensorForDisposal(c,e.node,r,n,s,o,i),this.processChildNodes(e.node,t,n,r,a,l))}else this.processChildNodes(e.node,t,n,r,a,l)}return u}processChildNodes(e,t,n,r,a,s){e.children.forEach((e=>{const[o]=sS(e.name,n);!a[o]&&s.has(e.name)&&("Merge"===e.op?e.inputNames.some((e=>!!aS(e,r,n)))&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((e=>!!aS(e,r,n)))&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})))}))}dispose(){Object.keys(this.weightMap).forEach((e=>this.weightMap[e].forEach((e=>e.dispose()))))}checkInputShapeAndType(e){Object.keys(e).forEach((t=>{const n=e[t],[r]=iS(t),a=this.graph.nodes[r];if(a.attrParams.shape&&a.attrParams.shape.value){const e=a.attrParams.shape.value;re(e.length===n.shape.length&&n.shape.every(((t,n)=>-1===e[n]||e[n]===t)),(()=>`The shape of dict['${a.name}'] provided in model.execute(dict) must be [${e}], but was [${n.shape}]`))}a.attrParams.dtype&&a.attrParams.dtype.value&&re(n.dtype===a.attrParams.dtype.value,(()=>`The dtype of dict['${a.name}'] provided in model.execute(dict) must be ${a.attrParams.dtype.value}, but was ${n.dtype}`))}))}mapInputs(e){const t={};for(const n in e)if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n]){t[this._signature.inputs[n].name]=e[n]}else t[n]=e[n];return t}checkInputs(e){const t=Object.keys(e).filter((e=>{const[t]=iS(e);return null==this.graph.nodes[t]}));if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map((e=>{if(null!=this._signature&&null!=this._signature.outputs&&null!=this._signature.outputs[e]){return this._signature.outputs[e].name}return e}),{})}checkOutputs(e){e.forEach((e=>{const[t]=iS(e);if(!this.graph.nodes[t])throw new Error(`The output '${e}' is not found in the graph`)}))}}class pE{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}class dE{constructor(e,t={}){this.modelUrl=e,this.loadOptions=t,this.version="n/a",null==t&&(this.loadOptions={}),this.resourceManager=new pE}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}findIOHandler(){const e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=Uo(e,this.loadOptions);else{const t=Xs(e,this.loadOptions);if(0===t.length)t.push(Uo(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}async load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=await this.handler.load();return this.loadSync(e)}loadSync(e){this.artifacts=e;const t=this.artifacts.modelTopology;let n;n=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=n,this.version=`${t.versions.producer}.${t.versions.minConsumer}`;const r=Rs(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new cE(NS.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){const t=NS.Instance.transformGraph(e.modelInitializer);this.initializer=new cE(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,t){if("string"==typeof e){const t=qs(e);if(0===t.length)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new Error(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,t){return this.execute(e,this.outputNodes)}normalizeInputs(e){if(!(e instanceof Ka||Array.isArray(e)))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${e.length} input tensors.`);return this.inputNodes.reduce(((t,n,r)=>(t[n]=e[r],t)),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce(((t,n)=>(t[n]=[e[n]],t)),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function hE(e,t={}){if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==t&&(t={}),t.fromTFHub&&null==e.load&&(e.endsWith("/")||(e+="/"),e=`${e}model.json?tfjs-format=file`);const n=new dE(e,t);return await n.load(),n}const fE="3.15.0";var mE,gE=n(377);function vE(e,t,n=new Map,r=new Set){if(null==e)return null;if("function"==typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);const a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(kE(e)){const a=Array.isArray(e)?[]:{};r.add(e);for(const s in e){const o=vE(e[s],t,n,r);a[s]=o}return r.delete(e),e.__proto__&&(a.__proto__=e.__proto__),a}throw new Error(`Can't recurse into non-iterable type: ${e}`)}return n.set(e,a.value),a.value}function bE(e,t=wE){return yE(e,t)}function yE(e,t,n=new Set){const r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");const a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(kE(r)){const a=Array.isArray(r)?[]:{};n.add(r);for(const s in r){const r=yE(e.map((e=>e[s])),t,n);a[s]=r}return n.delete(r),a}throw new Error(`Can't recurse into non-iterable type: ${r}`)}return a.value}function wE(e){return null===e?null:kE(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}async function xE(e,t){const n=new Map;vE(e,t,n);for(const e of Array.from(n.keys())){const t=n.get(e);if(We(t)){const r=await t;n.set(e,r)}}return vE(e,t,n)}function kE(e){let t=!1;if(Ge().get("IS_BROWSER"))t=e instanceof TextDecoder;else{const{StringDecoder:r}=n(977);t=e instanceof r}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"==typeof e&&!(e instanceof Ka)&&!(e instanceof Promise)&&!t)}function CE(e){return function(e,t){return vE(e,t)}(e,SE)}function SE(e){return e instanceof Ka?{value:e.clone(),recurse:!1}:kE(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}class EE{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}class TE extends EE{constructor(){super(TE.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,t=new Array(e),n=this.length();for(let e=0;e<n;e++)t[e]=this.get(this.wrap(this.begin+e));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}function $E(e){return new AE(e)}function IE(e){return new ME(e)}function NE(e,t){return new HE(e,t)}TE.INITIAL_CAPACITY=32;class OE{async toArray(){const e=[];let t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),t=[];let n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new FE(this,e)}filter(e){return new LE(this,e)}map(e){return new BE(this,e)}mapAsync(e){return new zE(this,e)}serialMapAsync(e){return new zE(this,e).serial()}flatmap(e){return new WE(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile((e=>!0===e))}rowMajorBatch(e,t=!0){return new DE(this,e,t)}columnMajorBatch(e,t=!0,n=wE){return this.rowMajorBatch(e,t).map((e=>bE(e,n)))}concatenate(e,t){return new HE($E([this,e]),t)}take(e){return e<0||null==e?this:new PE(this,e)}skip(e){return e<0||null==e?this:new RE(this,e)}prefetch(e){return new UE(this,e)}shuffle(e,t){return new GE(this,e,t)}serial(){return new _E(this)}}class AE extends OE{constructor(e){super(),this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:CE(e),done:!1}}}class ME extends OE{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message=`Error thrown while iterating through a dataset: ${e.message}`,e}}}class _E extends OE{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){return this.upstream.next()}}class RE extends OE{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const e=await this.upstream.next();if(e.done)return e;tl(e.value)}return this.upstream.next()}}class PE extends OE{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class DE extends OE{constructor(e,t,n=!0){super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){const e=[];for(;e.length<this.batchSize;){const t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}}class LE extends OE{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;tl(e.value)}}}class BE extends OE{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Map`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=us(e.value),n=this.transform(e.value),r=us(n);for(const e of t)ls(e,r)||e.dispose();return{value:n,done:!1}}}class FE extends OE{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}}class zE extends OE{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=us(e.value),n=await this.transform(e.value),r=us(n);for(const e of t)ls(e,r)||e.dispose();return{value:n,done:!1}}}class VE extends OE{constructor(){super(),this.outputQueue=new TE,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class WE extends VE{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){const e=await this.upstream.next();if(e.done)return!1;const t=us(e.value),n=this.transform(e.value),r=us(n);this.outputQueue.pushAll(n);for(const e of t)ls(e,r)||e.dispose();return!0}}class HE extends OE{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){const e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(mE||(mE={}));class jE extends OE{constructor(e,t=mE.FAIL){super(),this.iterators=e,this.mismatchMode=t,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}async nextState(e){await e;let t=0,n=0;const r=await xE(this.iterators,(function(e){if(e instanceof OE){return{value:e.next().then((e=>(t++,e.done&&n++,e.value))),recurse:!1}}return{value:null,recurse:!0}}));if(t===n)return{value:null,done:!0};if(n>0)switch(this.mismatchMode){case mE.FAIL:throw new Error(`Zipped streams should have the same length. Mismatched at element ${this.count}.`);case mE.SHORTEST:return{value:null,done:!0};case mE.LONGEST:}return this.count++,{value:r,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}}class UE extends OE{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new EE(t)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class GE extends UE{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=gE.alea(n||_a().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}}class qE{constructor(){this.size=null}batch(e,t=!0){const n=this;let r;return re(e>0,(()=>`batchSize needs to be positive, but it is\n      ${e}`)),r=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),XE((async()=>(await n.iterator()).columnMajorBatch(e,t,JE)),r)}concatenate(e){const t=this;let n;return n=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,XE((async()=>(await t.iterator()).concatenate(await e.iterator())),n)}filter(e){const t=this;let n;return n=this.size===1/0?1/0:null,XE((async()=>(await t.iterator()).filter((t=>el((()=>e(t)))))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){const t=this;return XE((async()=>(await t.iterator()).map((t=>el((()=>e(t)))))),this.size)}mapAsync(e){const t=this;return XE((async()=>(await t.iterator()).mapAsync(e)),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const t=this;return XE((async()=>(await t.iterator()).prefetch(e)),this.size)}repeat(e){const t=this;let n;return n=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,XE((async()=>NE(IE((async()=>({value:await t.iterator(),done:!1}))).take(e))),n)}skip(e){const t=this;let n;return n=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,XE((async()=>(await t.iterator()).skip(e)),n)}shuffle(e,t,n=!0){if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);const r=this,a=gE.alea(t||_a().toString());return XE((async()=>{let t=a.int32();return n&&(t+=a.int32()),(await r.iterator()).shuffle(e,t.toString())}),this.size)}take(e){const t=this;let n;return n=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,XE((async()=>(await t.iterator()).take(e)),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function XE(e,t=null){return new class extends qE{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function KE(e){return XE((async()=>$E(e)),e.length)}function YE(e){if(!kE(e))throw new Error("The argument to zip() must be an object or array.");let t;if(Array.isArray(e))for(let n=0;n<e.length;n++)t=null==t?e[n].size:Math.min(t,e[n].size);else if(e instanceof Object)for(const n in e)t=null==t?e[n].size:Math.min(t,e[n].size);return XE((async()=>function(e,t=mE.FAIL){return new jE(e,t)}(await xE(e,(e=>{if(e instanceof qE)return{value:e.iterator(),recurse:!1};if(kE(e))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")})),mE.SHORTEST)),t)}function JE(e){if(null===e)return null;const t=e[0];if(null==(n=t)||null===(r=n)||"object"!=typeof r&&"function"!=typeof r||Array.isArray(n)||"object"==typeof n&&n instanceof Ka||Se(n)){return{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof Ka?ed(e):As(e)}(e),recurse:!1}}var n,r;return{value:null,recurse:!0}}qE.MAX_BUFFER_SIZE=1e4;class ZE extends qE{constructor(e){super(),this.input=e}async iterator(){return(await this.input.iterator()).decodeUTF8().split("\n").map((e=>(e.endsWith("\r")&&(e=e.slice(0,-1)),e)))}}const QE='"',eT=Symbol("out"),tT=Symbol("field"),nT=Symbol("quote"),rT=Symbol("quoteafterquote"),aT=Symbol("quoteinquote");class sT extends qE{constructor(e,t){super(),this.input=e,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new ZE(e),t||(t={}),this.hasHeader=!1!==t.hasHeader,this.fullColumnNames=t.columnNames,this.columnConfigs=t.columnConfigs,this.configuredColumnsOnly=t.configuredColumnsOnly,t.delimWhitespace?(re(null==t.delimiter,(()=>"Delimiter should not be provided when delimWhitespace is true.")),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=t.delimiter?t.delimiter:","}async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){const e=await this.maybeReadHeaderLine();if(!this.fullColumnNames&&!e)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&e&&re(e.length===this.fullColumnNames.length,(()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+e.length.toString()+").")),this.fullColumnNames||(this.fullColumnNames=e);const t=this.fullColumnNames.reduce(((e,t)=>(e[t]=e[t]+1||1,e)),{}),n=Object.keys(t).filter((e=>t[e]>1));if(re(0===n.length,(()=>"Duplicate column names found: "+n.toString())),this.columnConfigs)for(const e of Object.keys(this.columnConfigs)){if(-1===this.fullColumnNames.indexOf(e))throw new Error('The key "'+e+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(this.hasHeader){const e=await this.base.iterator(),t=await e.next();if(t.done)throw new Error("No data was found for CSV parsing.");const n=t.value;return this.parseRow(n,!1)}return null}async iterator(){this.columnNamesValidated||await this.setColumnNames();let e=await this.base.iterator();return this.hasHeader&&(e=e.skip(1)),e.map((e=>this.makeDataElement(e)))}makeDataElement(e){const t=this.parseRow(e),n={},r={};for(let a=0;a<this.fullColumnNames.length;a++){const s=this.fullColumnNames[a],o=this.columnConfigs?this.columnConfigs[s]:null;if(!this.configuredColumnsOnly||o){const i=t[a];let l=null;if(""===i)if(o&&void 0!==o.default)l=o.default;else{if(o&&(o.required||o.isLabel))throw new Error(`Required column ${s} is empty in this line: ${e}`);l=void 0}else{const e=Number(i);if(isNaN(e))l=o&&"bool"===o.dtype?this.getBoolean(i):i;else if(o&&o.dtype)switch(o.dtype){case"float32":default:l=e;break;case"int32":l=Math.floor(e);break;case"bool":l=this.getBoolean(i)}else l=e}o&&o.isLabel?r[s]=l:n[s]=l}}return 0===Object.keys(r).length?n:{xs:n,ys:r}}getBoolean(e){return"1"===e||"true"===e.toLowerCase()?1:0}parseRow(e,t=!0){const n=[];let r=0;const a=e.length;let s=eT;for(let t=0;t<a;t++)switch(s){case eT:switch(e.charAt(t)){case QE:r=t+1,s=nT;break;case this.delimiter:if(r=t+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),s=eT;break;default:s=tT,r=t}break;case tT:if(e.charAt(t)===this.delimiter)n.push(e.substring(r,t)),s=eT,r=t+1;break;case nT:if(e.charAt(t)===QE)s=rT;break;case rT:switch(e.charAt(t)){case this.delimiter:n.push(e.substring(r,t-1)),s=eT,r=t+1;break;case QE:s=nT;break;default:s=aT}break;case aT:if(e.charAt(t)===QE)s=nT}if(s===rT?n.push(e.substring(r,a-1)):n.push(e.substring(r)),t&&n.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${n}`);return n}}class oT extends OE{constructor(e){super(),this.microphoneConfig=e,this.isClosed=!1,this.fftSize=e.fftSize||1024;const t=Math.log2(this.fftSize);if(this.fftSize<0||t<4||t>14||!Number.isInteger(t))throw new Error(`Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got ${this.fftSize}`);if(this.numFrames=e.numFramesPerSpectrogram||43,this.sampleRateHz=e.sampleRateHz,this.columnTruncateLength=e.columnTruncateLength||this.fftSize,this.audioTrackConstraints=e.audioTrackConstraints,this.smoothingTimeConstant=e.smoothingTimeConstant||0,this.includeSpectrogram=!1!==e.includeSpectrogram,this.includeWaveform=!0===e.includeWaveform,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(e={}){if(!Ge().get("IS_BROWSER"))throw new Error("microphone API is only supported in browser environment.");const t=new oT(e);return await t.start(),t}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1})}catch(e){throw new Error(`Error thrown while initializing video stream: ${e.message}`)}if(!this.stream)throw new Error("Could not obtain audio from microphone.");const e=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new e,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error(`Mismatch in sampling rate: Expected: ${this.sampleRateHz}; Actual: ${this.audioContext.sampleRate}`)}else this.sampleRateHz=this.audioContext.sampleRate;const t=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,t.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){if(this.isClosed)return{value:null,done:!0};let e,t;const n=await this.getAudioData();if(this.includeSpectrogram){const t=this.flattenQueue(n.freqDataQueue);e=this.getTensorFromAudioDataArray(t,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){const e=this.flattenQueue(n.timeDataQueue);t=this.getTensorFromAudioDataArray(e,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:e,waveform:t},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){const e=[],t=[];let n=0;return new Promise((r=>{const a=setInterval((()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&r({freqDataQueue:e,timeDataQueue:t}),e.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),t.push(this.timeData.slice())),++n===this.numFrames&&(clearInterval(a),r({freqDataQueue:e,timeDataQueue:t}))}),this.fftSize/this.sampleRateHz*1e3)}))}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(e){const t=e[0].length,n=new Float32Array(e.length*t);return e.forEach(((e,r)=>n.set(e,r*t))),n}getTensorFromAudioDataArray(e,t){const n=new Float32Array(ie(t));return n.set(e,n.length-e.length),As(n,t)}}class iT extends OE{constructor(e,t){if(super(),this.webcamVideoElement=e,this.webcamConfig=t,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=ad([0],"int32"),this.webcamConfig.centerCrop){const e=1*this.webcamConfig.resizeWidth/this.webcamVideoElement.width,t=1*this.webcamConfig.resizeHeight/this.webcamVideoElement.height,n=(1-e)/2,r=(1-t)/2,a=n+e,s=t+r;this.cropBox=sd([r,n,s,a],[1,4])}else this.cropBox=sd([0,0,1,1],[1,4])}summary(){return"webcam"}static async create(e,t={}){if(!Ge().get("IS_BROWSER"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!e){if(e=document.createElement("video"),!t.resizeWidth||!t.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");e.width=t.resizeWidth,e.height=t.resizeHeight}const n=new iT(e,t);return await n.start(),n}async start(){this.webcamConfig.facingMode&&re("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,(()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. Please provide 'user' or 'environment'`));try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(e){throw e.message=`Error thrown while initializing video stream: ${e.message}`,e}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(e){console.log(e),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise((e=>{this.webcamVideoElement.onloadedmetadata=()=>{e()}}))}async next(){if(this.isClosed)return{value:null,done:!0};let e;try{e=ui(this.webcamVideoElement)}catch(e){throw new Error(`Error thrown converting video to pixels: ${JSON.stringify(e)}`)}if(!this.resize)return{value:e,done:!1};try{return{value:this.cropAndResizeFrame(e),done:!1}}catch(e){throw new Error(`Error thrown cropping the video: ${e.message}`)}finally{e.dispose()}}needToResize(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}cropAndResizeFrame(e){return el((()=>{const t=oc(Oo(e,"float32"),0);let n;n=Ph.cropAndResize(t,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear");const r=n.shape;return fu(n,r.slice(1))}))}async capture(){return(await this.next()).value}stop(){this.stream.getTracks().forEach((e=>e.stop()));try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}}class lT{}class uT extends OE{split(e){return new cT(this,e)}}class cT extends uT{constructor(e,t){super(),this.upstream=e,this.impl=new pT(e,t)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class pT extends VE{constructor(e,t){super(),this.upstream=e,this.separator=t,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}async pump(){const e=await this.upstream.next();if(e.done)return""!==this.carryover&&(this.outputQueue.push(this.carryover),this.carryover="",!0);const t=e.value.split(this.separator);t[0]=this.carryover+t[0];for(const e of t.slice(0,-1))this.outputQueue.push(e);return this.carryover=t[t.length-1],!0}}class dT extends OE{decodeUTF8(){return new hT(this)}}class hT extends uT{constructor(e){super(),this.upstream=e,this.impl=new fT(e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class fT extends VE{constructor(e){if(super(),this.upstream=e,Ge().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{const{StringDecoder:e}=n(601);this.decoder=new e("utf8")}}summary(){return`${this.upstream.summary()} -> Utf8`}async pump(){const e=await this.upstream.next();let t,n;return!e.done&&(t=e.value,n=Ge().get("IS_BROWSER")?this.decoder.decode(t,{stream:!0}):this.decoder.write(Buffer.from(t.buffer)),this.outputQueue.push(n),!0)}}class mT extends dT{constructor(e,t={}){super(),this.file=e,this.options=t,re(e instanceof Uint8Array||!!Ge().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),(()=>"FileChunkIterator only supports File, Blob and Uint8Array right now.")),this.offset=t.offset||0,this.chunkSize=t.chunkSize||1048576}summary(){return`FileChunks ${this.file}`}async next(){if(this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size))return{value:null,done:!0};const e=new Promise(((e,t)=>{const n=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)e(new Uint8Array(this.file.slice(this.offset,n)));else{const r=new FileReader;r.onload=n=>{let a=r.result;if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),!(a instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));e(a)},r.onabort=e=>t(new Error("Aborted")),r.onerror=e=>t(new Error(e.type));const a=this.file.slice(this.offset,n);r.readAsArrayBuffer(a)}this.offset=n}));return{value:await e,done:!1}}}const gT=e=>({method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity});function vT(e){return"string"==typeof e&&"file://"===e.substr(0,7)}class bT extends lT{constructor(e,t={}){super(),this.input=e,this.options=t}async iterator(){if(vT(this.input)&&Ge().get("IS_NODE")){const e=n(792);this.input=e.readFileSync(this.input.substr(7))}return new mT(this.input,this.options)}}class yT extends lT{constructor(e,t={}){super(),this.url=e,this.fileOptions=t}async iterator(){return vT(this.url)?new bT(this.url,this.fileOptions).iterator():async function(e,t={},n){let r,a;"string"==typeof e?r=e:(r=e.url,a=gT(e));const s=await(n||Ra)(r,a);if(s.ok){const e=new Uint8Array(await s.arrayBuffer());return new mT(e,t)}throw new Error(s.statusText)}(this.url,this.fileOptions)}}function wT(e,t={}){return new sT(new yT(e),t)}function xT(e){const t=IE(e);return XE((async()=>t))}function kT(e){return XE((async()=>{const t=await e();return IE((()=>t.next()))}))}async function CT(e,t){return iT.create(e,t)}async function ST(e){return oT.create(e)}const ET="3.15.0";function TT(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&re("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the CPU backend.`))}))}const $T=md;class IT extends q{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new G(this,Ji())}nextDataId(){return IT.nextDataId++}write(e,t,n){this.firstUse&&(this.firstUse=!1,Ge().get("IS_NODE")&&aa("\n============================\nHi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&$e(n[0])){const a=n.map((e=>Pa(e)));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){if(this.data.has(e)){return this.data.get(e).refCount}return 0}incRef(e){this.data.get(e).refCount++}decRef(e){if(this.data.has(e)){this.data.get(e).refCount--}}move(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){return lf(this.readSync(n.real.dataId),this.readSync(n.imag.dataId))}return this.data.get(e).values}bufferSync(e){const t=this.readSync(e.dataId);let n=t;if("string"===e.dtype)try{n=t.map((e=>Da(e)))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return No(e.shape,e.dtype,n)}makeOutput(e,t,n){const r=this.write(e,t,n);return Ji().makeTensorFromDataId(r,t,n,this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=_a();e();return{kernelMs:_a()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){TT([e],"where");const t=this.readSync(e.dataId);return $T(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}IT.nextDataId=0;function NT(e,t,n){return({inputs:r,attrs:a,backend:s})=>{const{x:o}=r;if(TT(o,e),"string"===o.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const i=s,l=i.data.get(o.dataId).values,u=ie(o.shape),c=n||o.dtype,p=we(c,u);for(let e=0;e<u;++e)p[e]=t(l[e],a);return i.makeTensorInfo(o.shape,c,p)}}function OT(e,t,n){return({inputs:r,attrs:a,backend:s})=>{const{x:o}=r;if(TT(o,e),"string"===o.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const i=s,l=i.data.get(o.dataId).values,u=n||o.dtype,c=t(l,u,a);return i.makeTensorInfo(o.shape,u,c)}}cl("cpu",(()=>new IT),1);const AT=NT(Xt,(e=>e>=0?e:Math.exp(e)-1)),MT={kernelName:Xt,backendName:"cpu",kernelFunc:AT};function _T(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const RT={kernelName:dn,backendName:"cpu",kernelFunc:_T};function PT(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:s}=r;TT([a],"leakyRelu");const o=ie(a.shape),i=n.data.get(a.dataId).values,l=ye("float32",o);for(let e=0;e<i.length;e++)l[e]=i[e]<0?s*i[e]:i[e];return n.makeTensorInfo(a.shape,"float32",l)}const DT={kernelName:bn,backendName:"cpu",kernelFunc:PT};function LT(e){return(t,n,r,a,s)=>{const o=ni(t,n),i=o.length,l=_e(o),u=ye(s,ie(o)),c=t.length,p=n.length,d=_e(t),h=_e(n),f=ei(t,o),m=ei(n,o);if(f.length+m.length===0)for(let t=0;t<u.length;++t)u[t]=e(r[t%r.length],a[t%a.length]);else for(let t=0;t<u.length;++t){const n=Ve(t,i,l),s=n.slice(-c);f.forEach((e=>s[e]=0));const o=ze(s,c,d),g=n.slice(-p);m.forEach((e=>g[e]=0));const v=ze(g,p,h);u[t]=e(r[o],a[v])}return[u,o]}}const BT=LT(((e,t)=>e<0?t*e:e));function FT(e){const{inputs:t,backend:n}=e,{x:r,alpha:a}=t;TT([r,a],"prelu");const s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,[i,l]=BT(r.shape,a.shape,s,o,"float32");return n.makeTensorInfo(l,"float32",i)}const zT={kernelName:tr,backendName:"cpu",kernelFunc:FT},VT=NT(or,(e=>Math.max(0,e))),WT={kernelName:or,backendName:"cpu",kernelFunc:VT},HT=NT(dr,(e=>Math.min(Math.max(0,e),6))),jT={kernelName:dr,backendName:"cpu",kernelFunc:HT};function UT(e){return(t,n,r)=>{const a=ye(n,t.length);for(let n=0;n<t.length;++n)a[n]=e(t[n],r);return a}}const GT=UT((e=>1/(1+Math.exp(-e)))),qT=NT(Cr,(e=>1/(1+Math.exp(-e)))),XT={kernelName:Cr,backendName:"cpu",kernelFunc:qT};function KT(e,t,n,r,a){if("linear"===n)return _T({inputs:{x:t},backend:e});if("relu"===n)return VT({inputs:{x:t},backend:e});if("elu"===n)return AT({inputs:{x:t},backend:e});if("relu6"===n)return HT({inputs:{x:t},backend:e});if("prelu"===n)return FT({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return PT({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return qT({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}function YT(e){const{inputs:t,backend:n}=e,{real:r,imag:a}=t,s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,i=n.makeTensorInfo(r.shape,"complex64");return n.data.get(i.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(a.shape,"float32",o)},i}const JT={kernelName:Ct,backendName:"cpu",kernelFunc:YT};function ZT(e,t,n="float32"){if("complex64"===n){return YT({inputs:{real:ZT(e,t,"float32"),imag:ZT(e,t,"float32")},backend:e})}const r=Le(ie(t),n);return e.makeTensorInfo(t,n,r)}function QT(e){const{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,s)}const e$={kernelName:ar,backendName:"cpu",kernelFunc:QT};function t$(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dtype:s}=r;if("complex64"===s){if("complex64"===a.dtype)return _T({inputs:{x:a},backend:n});const e=ZT(n,a.shape,a.dtype),t=t$({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),r=YT({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===a.dtype){const e=QT({inputs:{input:a},backend:n}),t=t$({inputs:{x:e},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(e),t}if(!Ce(a.dtype,s)){const e=_T({inputs:{x:a},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:s}}if("int32"===s){const e=n.data.get(a.dataId).values,t=Int32Array.from(e);return n.makeTensorInfo(a.shape,"int32",t)}if("bool"===s){const e=n.data.get(a.dataId).values,t=Ma([0],a.dtype),[r,s]=LT(((e,t)=>e!==t?1:0))(a.shape,[],e,t,"bool");return n.makeTensorInfo(s,"bool",r)}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${s}`)}const n$={kernelName:wt,backendName:"cpu",kernelFunc:t$};function r$(e,t,n,r){return null==n?({inputs:n,backend:a})=>{const{a:s,b:o}=n,i=a;TT([s,o],e);const l=i.data.get(s.dataId).values,u=i.data.get(o.dataId).values,c="string"===s.dtype?zf(l):l,p="string"===s.dtype?zf(u):u,d=r||s.dtype,[h,f]=t(s.shape,o.shape,c,p,d);return i.makeTensorInfo(f,d,h)}:({inputs:e,backend:a})=>{const{a:s,b:o}=e,i=a;if("complex64"===s.dtype||"complex64"===o.dtype){const e=t$({inputs:{x:s},backend:i,attrs:{dtype:"complex64"}}),t=i.data.get(e.dataId),r=t.complexTensorInfos.real,a=t.complexTensorInfos.imag,l=i.data.get(r.dataId).values,u=i.data.get(a.dataId).values,c=t$({inputs:{x:o},backend:i,attrs:{dtype:"complex64"}}),p=i.data.get(c.dataId),d=p.complexTensorInfos.real,h=p.complexTensorInfos.imag,f=i.data.get(d.dataId).values,m=i.data.get(h.dataId).values,[g,v,b]=n(s.shape,o.shape,l,u,f,m),y=i.makeTensorInfo(b,"float32",g),w=i.makeTensorInfo(b,"float32",v),x=YT({inputs:{real:y,imag:w},backend:i});return i.disposeIntermediateTensorInfo(e),i.disposeIntermediateTensorInfo(c),i.disposeIntermediateTensorInfo(y),i.disposeIntermediateTensorInfo(w),x}{const e=i.data.get(s.dataId).values,n=i.data.get(o.dataId).values,a=r||s.dtype,[l,u]=t(s.shape,o.shape,e,n,a);return i.makeTensorInfo(u,a,l)}}}function a$(e){return(t,n,r,a,s,o)=>{const i=ni(t,n),l=ie(i),u=i.length,c=_e(i),p=ye("float32",l),d=ye("float32",l),h=ei(t,i),f=ei(n,i),m=lf(r,a),g=lf(s,o),v=t.length,b=_e(t),y=n.length,w=_e(n);if(h.length+f.length===0)for(let t=0;t<p.length;t++){const n=t%m.length,r=t%g.length,a=e(m[2*n],m[2*n+1],g[2*r],g[2*r+1]);p[t]=a.real,d[t]=a.imag}else for(let t=0;t<p.length;t++){const n=Ve(t,u,c),r=n.slice(-v);h.forEach((e=>r[e]=0));const a=ze(r,v,b),s=n.slice(-y);f.forEach((e=>s[e]=0));const o=ze(s,y,w),i=e(m[2*a],m[2*a+1],g[2*o],g[2*o+1]);p[t]=i.real,d[t]=i.imag}return[p,d,i]}}const s$=LT(((e,t)=>e+t)),o$=a$(((e,t,n,r)=>({real:e+n,imag:t+r}))),i$=r$(et,s$,o$),l$={kernelName:et,backendName:"cpu",kernelFunc:i$};function u$(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:s}=r,o=ie(a.shape),i=ge(s,o),l=ie(i);re(o===l,(()=>`The new shape (${i}) has ${l} elements and the old shape (${a.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`)),n.incRef(a.dataId);const u=n.data.get(a.dataId);if(null!=u.complexTensorInfos){const e=u.complexTensorInfos.real,t=u.complexTensorInfos.imag;e.shape=i,t.shape=i}return{dataId:a.dataId,shape:i,dtype:a.dtype}}const c$={kernelName:ir,backendName:"cpu",kernelFunc:u$};function p$(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:s}=t,{transposeA:o,transposeB:i}=r;TT([a,s],"matMul");const l=a.shape.length,u=s.shape.length,c=o?a.shape[l-2]:a.shape[l-1],p=i?s.shape[u-1]:s.shape[u-2],d=o?a.shape[l-1]:a.shape[l-2],h=i?s.shape[u-2]:s.shape[u-1],f=a.shape.slice(0,-2),m=s.shape.slice(0,-2),g=ie(f),v=ie(m),b=ni(a.shape.slice(0,-2),s.shape.slice(0,-2)).concat([d,h]);re(c===p,(()=>`Error in matMul: inner shapes (${c}) and (${p}) of Tensors with shapes ${a.shape} and ${s.shape} and transposeA=${o} and transposeB=${i} must match.`));const y=i?[v,h,p]:[v,p,h],w=u$({inputs:{x:a},backend:n,attrs:{shape:o?[g,c,d]:[g,d,c]}}),x=u$({inputs:{x:s},backend:n,attrs:{shape:y}}),k=o?w.shape[1]:w.shape[2],C=o?w.shape[2]:w.shape[1],S=i?x.shape[1]:x.shape[2],E=Math.max(g,v),T=n.data.get(w.dataId).values,$=n.data.get(x.dataId).values,I=_e(w.shape),N=_e(x.shape),[O,A,M]=o?[I[0],1,I[1]]:[I[0],I[1],1],[_,R,P]=i?[1,N[1],N[0]]:[N[1],1,N[0]],D=C*S,L=No([E,C,S],w.dtype),B=L.values,F=n.blockSize;for(let e=0;e<E;e++)for(let t=0;t<C;t+=F)for(let n=0;n<S;n+=F)for(let r=0;r<k;r+=F){const a=Math.min(t+F,C),s=Math.min(n+F,S),o=Math.min(r+F,k);for(let i=t;i<a;i++)for(let t=n;t<s;t++){let n=0;for(let a=r;a<o;a++){const r=Math.min(e,g-1)*O,s=Math.min(e,v-1)*P;n+=T[r+i*A+a*M]*$[a*_+t*R+s]}B[e*D+(i*S+t)]+=n}}return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(x),n.makeTensorInfo(b,L.dtype,L.values)}const d$={kernelName:mt,backendName:"cpu",kernelFunc:p$};const h$={kernelName:ta,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:s,bias:o,preluActivationWeights:i}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:p}=r;let d,h,f;const m=[];d=p$({inputs:{a:a,b:s},attrs:{transposeA:l,transposeB:u},backend:n}),o&&(h=i$({inputs:{a:d,b:o},backend:n}),m.push(d),d=h),c&&(f=KT(n,d,c,i,p),m.push(d),d=f);for(const e of m)n.disposeIntermediateTensorInfo(e);return d}};function f$(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const m$={kernelName:Je,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend;TT(t,"abs");let r=new Float32Array(ie(t.shape));return r=f$(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},g$=NT(Ze,(e=>Math.acos(e))),v$={kernelName:Ze,backendName:"cpu",kernelFunc:g$},b$=NT(Qe,(e=>Math.acosh(e))),y$={kernelName:Qe,backendName:"cpu",kernelFunc:b$};const w$={kernelName:tt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,r=t;TT(t,"addN");const a=r.map((e=>n.data.get(e.dataId).values)),s=No(r[0].shape,r[0].dtype),o=s.values;for(let e=0;e<r.length;e++){const t=a[e];for(let e=0;e<o.length;e++)o[e]+=t[e]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}};function x$(e,t,n,r,a){const s=t.length,o=ie(t),i=_e(t),l=_e(a),u=ye(n,ie(a));for(let t=0;t<o;++t){const n=Ve(t,s,i),a=new Array(n.length);for(let e=0;e<a.length;e++)a[e]=n[r[e]];u[ze(a,s,l)]=e[t]}return u}function k$(e){const{inputs:t,attrs:n,backend:r}=e,{x:a}=t,{perm:s}=n;TT(a,"transpose");const o=a.shape.length,i=new Array(o);for(let e=0;e<i.length;e++)i[e]=a.shape[s[e]];const l=x$(r.data.get(a.dataId).values,a.shape,a.dtype,s,i);return{dataId:r.write(l,i,a.dtype),shape:i,dtype:a.dtype}}const C$={kernelName:qr,backendName:"cpu",kernelFunc:k$};const S$={kernelName:nt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:o}=r;TT(a,"all");const i=ve(s,a.shape);let l=i;const u=Dc(l,a.shape.length);let c=a;null!=u&&(c=k$({inputs:{x:a},backend:n,attrs:{perm:u}}),l=Bc(l.length,a.shape.length)),Pc("all",l,c.shape.length);const[p,d]=_c(c.shape,l),h=ie(d),f=Le(ie(p),c.dtype),m=n.data.get(c.dataId).values;for(let e=0;e<f.length;++e){const t=e*h;let n=m[t];for(let e=0;e<h;++e){const r=m[t+e];n=n&&r}f[e]=n}null!=u&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(p,c.dtype,f);if(o){const e=u$({inputs:{x:g},backend:n,attrs:{shape:Rc(p,i)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const E$={kernelName:rt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:o}=r;TT(a,"any");const i=ve(s,a.shape);let l=i;const u=Dc(l,a.shape.length);let c=a;null!=u&&(c=k$({inputs:{x:a},backend:n,attrs:{perm:u}}),l=Bc(l.length,a.shape.length)),Pc("any",l,c.shape.length);const[p,d]=_c(c.shape,l),h=ie(d),f=Le(ie(p),c.dtype),m=n.data.get(c.dataId).values;for(let e=0;e<f.length;++e){const t=e*h;let n=m[t];for(let e=0;e<h;++e){const r=m[t+e];n=n||r}f[e]=n}null!=u&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(p,c.dtype,f);if(o){const e=u$({inputs:{x:g},backend:n,attrs:{shape:Rc(p,i)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const T$={kernelName:at,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s}=r;TT(a,"argMax");let o=ve(s,a.shape);const i=Dc(o,a.shape.length);let l=a;const u=[];null!=i&&(l=k$({inputs:{x:a},backend:n,attrs:{perm:i}}),u.push(l),o=Bc(o.length,l.shape.length)),o=[o[0]],Pc("argMax",o,l.shape.length);const[c,p]=_c(l.shape,o),d=Le(ie(c),"int32"),h=ie(p),f=n.data.get(l.dataId).values;for(let e=0;e<d.length;++e){const t=e*h;let n=f[t],r=0;for(let e=0;e<h;++e){const a=f[t+e];a>n&&(n=a,r=e)}d[e]=r}return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(c,"int32",d)}};const $$={kernelName:st,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s}=r;TT(a,"argMin");let o=ve(s,a.shape);const i=Dc(o,a.shape.length);let l=a;const u=[];null!=i&&(l=k$({inputs:{x:a},backend:n,attrs:{perm:i}}),u.push(l),o=Bc(o.length,l.shape.length)),o=[o[0]],Pc("argMin",o,l.shape.length);const[c,p]=_c(l.shape,o),d=Le(ie(c),"int32"),h=ie(p),f=n.data.get(l.dataId).values;for(let e=0;e<d.length;++e){const t=e*h;let n=f[t],r=0;for(let e=0;e<h;++e){const a=f[t+e];a<n&&(n=a,r=e)}d[e]=r}return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(c,"int32",d)}},I$=NT(ot,(e=>Math.asin(e))),N$={kernelName:ot,backendName:"cpu",kernelFunc:I$},O$=NT(it,(e=>Math.asinh(e))),A$={kernelName:it,backendName:"cpu",kernelFunc:O$},M$=NT(lt,(e=>Math.atan(e))),_$={kernelName:lt,backendName:"cpu",kernelFunc:M$},R$=LT(((e,t)=>Math.atan2(e,t))),P$=r$(ct,R$),D$={kernelName:ct,backendName:"cpu",kernelFunc:P$},L$=NT(ut,(e=>Math.atanh(e))),B$={kernelName:ut,backendName:"cpu",kernelFunc:L$};function F$(e,t,n,r,a,s){const o=a.strideHeight,i=a.strideWidth,l=a.dilationHeight,u=a.dilationWidth,c=a.effectiveFilterHeight,p=a.effectiveFilterWidth,d=a.padInfo.top,h=a.padInfo.left,f="max"===s?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=No(a.outShape,n),g=m.values,v=a.outShape[1]*a.outShape[2]*a.outShape[3],b=a.outShape[2]*a.outShape[3],y=a.outShape[3];for(let t=0;t<a.batchSize;++t){const n=t*v,m=t*r[0];for(let t=0;t<a.inChannels;++t)for(let v=0;v<a.outHeight;++v){const w=v*o-d,x=Math.max(0,w),k=Math.min(a.inHeight,c+w),C=n+v*b;for(let n=0;n<a.outWidth;++n){const o=n*i-h,c=Math.max(0,o),d=Math.min(a.inWidth,p+o);let v=f,b=0,w=0;for(let n=x;n<k;n+=l){const a=m+n*r[1];for(let n=c;n<d;n+=u){const o=e[a+n*r[2]+t];"max"===s&&o>v?v=o:"avg"===s&&(b+=o,w++)}if(isNaN(v))break}g[C+n*y+t]="avg"===s?b/w:v}}}return m}function z$(e,t,n,r,a=!1,s=!1){const o=No(r.outShape,"int32"),i=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,p=r.effectiveFilterHeight,d=r.effectiveFilterWidth,h=r.padInfo.top,f=r.padInfo.left,m=No(t,n,e);for(let e=0;e<r.batchSize;++e)for(let t=0;t<r.inChannels;++t)for(let n=0;n<r.outHeight;++n){const g=n*i-h;let v=g;for(;v<0;)v+=u;const b=Math.min(r.inHeight,p+g);for(let i=0;i<r.outWidth;++i){const p=i*l-f;let h=p;for(;h<0;)h+=c;const y=Math.min(r.inWidth,d+p);let w=Number.NEGATIVE_INFINITY,x=-1;for(let n=v;n<b;n+=u){const o=n-g;for(let i=h;i<y;i+=c){const l=i-p,u=m.get(e,n,i,t);u>w&&(w=u,x=a?s?((e*r.inHeight+n)*r.inWidth+i)*r.inChannels+t:(n*r.inWidth+i)*r.inChannels+t:o*d+l)}}o.set(x,e,n,i,t)}}return o}function V$(e,t,n,r,a,s){const o=a.strideDepth,i=a.strideHeight,l=a.strideWidth,u=a.dilationDepth,c=a.dilationHeight,p=a.dilationWidth,d=a.effectiveFilterDepth,h=a.effectiveFilterHeight,f=a.effectiveFilterWidth,m=a.padInfo.front,g=a.padInfo.top,v=a.padInfo.left,b="max"===s?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=No(a.outShape,n),w=y.values,x=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[2]*a.outShape[3]*a.outShape[4],C=a.outShape[3]*a.outShape[4],S=a.outShape[4];for(let t=0;t<a.batchSize;++t){const n=t*x,y=t*r[0];for(let t=0;t<a.inChannels;++t)for(let x=0;x<a.outDepth;++x){const E=x*o-m;let T=E;for(;T<0;)T+=u;const $=Math.min(a.inDepth,d+E),I=n+x*k;for(let n=0;n<a.outHeight;++n){const o=n*i-g;let d=o;for(;d<0;)d+=c;const m=Math.min(a.inHeight,h+o),x=I+n*C;for(let n=0;n<a.outWidth;++n){const o=n*l-v;let i=o;for(;i<0;)i+=p;const h=Math.min(a.inWidth,f+o),g=x+n*S;let k=b,C=0,E=0;for(let n=T;n<$;n+=u){const a=y+n*r[1];for(let n=d;n<m;n+=c){const o=a+n*r[2];for(let n=i;n<h;n+=p){const a=e[o+n*r[3]+t];if("max"===s&&a>k?k=a:"avg"===s&&(C+=a,E++),isNaN(k))break}if(isNaN(k))break}if(isNaN(k))break}w[g+t]="avg"===s?C/E:k}}}}return y}const W$={kernelName:pt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;TT(a,"avgPool");const{filterSize:s,strides:o,pad:i,dimRoundingMode:l}=r;re(pu(o,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`));const u=tu(a.shape,s,o,1,i,l);let c;if(1===u.filterWidth&&1===u.filterHeight&&ue(u.inShape,u.outShape))c=_T({inputs:{x:a},backend:n});else{const e=n.data.get(a.dataId).values,t=_e(a.shape),r=F$(e,a.shape,a.dtype,t,u,"avg");c=n.makeTensorInfo(u.outShape,a.dtype,r.values)}return c}};const H$={kernelName:ht,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:s,strides:o,pad:i,dimRoundingMode:l,dataFormat:u}=r;TT(a,"avgPool3d");const c=nu(a.shape,s,o,1,i,l,u),p=V$(n.data.get(a.dataId).values,a.shape,a.dtype,_e(a.shape),c,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}};const j$={kernelName:ft,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,{filterSize:o,strides:i,pad:l,dimRoundingMode:u}=r;TT([a,s],"avgPool3DGrad");const c=nu(s.shape,o,i,1,l,u),p=c.strideDepth,d=c.strideHeight,h=c.strideWidth,f=c.filterDepth,m=c.filterHeight,g=c.filterWidth,v=c.dilationDepth,b=c.dilationHeight,y=c.dilationWidth,w=c.effectiveFilterDepth,x=c.effectiveFilterHeight,k=c.effectiveFilterWidth,C=w-1-c.padInfo.front,S=k-1-c.padInfo.left,E=x-1-c.padInfo.top,T=No(s.shape,"float32"),$=1/(f*m*g),I=n.bufferSync(a);for(let e=0;e<c.batchSize;++e)for(let t=0;t<c.inChannels;++t)for(let n=0;n<c.inDepth;++n)for(let r=0;r<c.inHeight;++r)for(let a=0;a<c.inWidth;++a){const s=n-C,o=r-E,i=a-S;let l=0;for(let n=0;n<w;n+=v){const r=(s+n)/p;if(!(r<0||r>=c.outDepth||Math.floor(r)!==r))for(let n=0;n<x;n+=b){const a=(o+n)/d;if(!(a<0||a>=c.outHeight||Math.floor(a)!==a))for(let n=0;n<k;n+=y){const s=(i+n)/h;if(s<0||s>=c.outWidth||Math.floor(s)!==s)continue;l+=I.get(e,r,a,s,t)}}}T.set(l*$,e,n,r,a,t)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}};const U$={kernelName:dt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,o=s;TT([a,s],"avgPoolGrad");const{filterSize:i,strides:l,pad:u}=r,c=tu(o.shape,i,l,1,u),p=c.strideHeight,d=c.strideWidth,h=c.filterHeight,f=c.filterWidth,m=c.dilationHeight,g=c.dilationWidth,v=c.effectiveFilterHeight,b=c.effectiveFilterWidth,y=b-1-c.padInfo.left,w=v-1-c.padInfo.top,x=No(o.shape,"float32"),k=1/(h*f),C=n.data.get(a.dataId).values,S=No(a.shape,"float32",C);for(let e=0;e<c.batchSize;++e)for(let t=0;t<c.inChannels;++t)for(let n=0;n<c.inHeight;++n)for(let r=0;r<c.inWidth;++r){const a=n-w,s=r-y;let o=0;for(let n=0;n<v;n+=m){const r=(a+n)/p;if(!(r<0||r>=c.outHeight||Math.floor(r)!==r))for(let n=0;n<b;n+=g){const a=(s+n)/d;if(a<0||a>=c.outWidth||Math.floor(a)!==a)continue;o+=S.get(e,r,a,t)}}x.set(o*k,e,n,r,t)}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};const G$={kernelName:on,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,scale:s,offset:o,mean:i,variance:l}=t;re(i.shape.length===l.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),re(null==o||i.shape.length===o.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),re(null==s||i.shape.length===s.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks.")),TT([a,i,l,s,o],"batchNorm");let{varianceEpsilon:u}=r;null==u&&(u=.001);const c=n.data.get(a.dataId).values,p=n.data.get(i.dataId).values,d=n.data.get(l.dataId).values,h=s?n.data.get(s.dataId).values:new Float32Array([1]),f=o?n.data.get(o.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),g=f.length,v=h.length,b=d.length,y=p.length;let w=0,x=0,k=0,C=0;for(let e=0;e<c.length;++e)m[e]=f[w++]+(c[e]-p[x++])*h[k++]/Math.sqrt(d[C++]+u),w>=g&&(w=0),x>=y&&(x=0),k>=v&&(k=0),C>=b&&(C=0);return n.makeTensorInfo(a.shape,a.dtype,m)}};function q$(e,t,n,r,a){const s=Ti(r,t,n),o=ie(n),i=_e(r);if(s){const n=$i(t,i);return"string"===a?e.slice(n,n+o):e.subarray(n,n+o)}const l=No(r,a,"string"===a?zf(e):e),u=No(n,a);for(let e=0;e<u.size;++e){const n=u.indexToLoc(e),r=n.map(((e,n)=>e+t[n]));u.set(l.get(...r),...n)}return"string"===a?Vf(u.values):u.values}function X$(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:s,size:o}=r;TT(a,"slice");const[i,l]=Ii(a,s,o);fi(a,i,l);const u=q$(n.data.get(a.dataId).values,i,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,u)}const K$={kernelName:yr,backendName:"cpu",kernelFunc:X$};const Y$={kernelName:gt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:s,crops:o}=r;TT([a],"batchToSpaceND");const i=s.reduce(((e,t)=>e*t)),l=Xh(a.shape,s,i),u=Kh(l.length,s.length),c=Yh(a.shape,s,i),p=Jh(o,s.length),d=Zh(c,o,s.length),h=u$({inputs:{x:a},backend:n,attrs:{shape:l}}),f=k$({inputs:{x:h},backend:n,attrs:{perm:u}}),m=u$({inputs:{x:f},backend:n,attrs:{shape:c}}),g=X$({inputs:{x:m},backend:n,attrs:{begin:p,size:d}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}};function J$(e,t,n,r,a){const s=ie(r),o=Le(a,n);for(let n=0;n<e.length;n++){const r=e[n];if(r<0)throw new Error("Input x must be non-negative!");r>=a||(o[r]+=s>0?t[n]:1)}return o}function Z$(e,t,n,r=!1){const a=e.shape[0],s=e.shape[1],o=No([a,n],t.dtype);for(let i=0;i<a;i++)for(let a=0;a<s;a++){const s=e.get(i,a);if(s<0)throw new Error("Input x must be non-negative!");s>=n||(r?o.set(1,i,s):t.size>0?o.set(o.get(i,s)+t.get(i,a),i,s):o.set(o.get(i,s)+1,i,s))}return o}const Q$={kernelName:vt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:s}=t,{size:o}=r,i=J$(n.data.get(a.dataId).values,n.data.get(s.dataId).values,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,i)}};const eI={kernelName:yt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:a}=t,s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,i=ni(Array.from(s),Array.from(o));return n.makeTensorInfo([i.length],"int32",Int32Array.from(i))}},tI=UT((e=>Math.ceil(e))),nI=OT(xt,tI),rI={kernelName:xt,backendName:"cpu",kernelFunc:nI},aI=NT(kt,((e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),sI={kernelName:kt,backendName:"cpu",kernelFunc:aI},oI={kernelName:St,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend,r=new Float32Array(ie(t.shape)),a=n.data.get(t.dataId),s=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,i=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values;for(let e=0;e<i.length;e++){const t=i[e],n=l[e];r[e]=Math.hypot(t,n)}return n.makeOutput(r,t.shape,"float32")}};function iI(e,t,n,r){const a=we(n,ie(t));if(r&&"string"!==n){let t=0;e.forEach((e=>{const n=ie(e.shape);a.set(e.vals,t),t+=n}))}else{let r=0;e.forEach((e=>{const s="string"===n?zf(e.vals):e.vals;let o=0;for(let n=0;n<e.shape[0];++n){const i=n*t[1]+r;for(let t=0;t<e.shape[1];++t)a[i+t]=s[o++]}r+=e.shape[1]}))}return a}function lI(e){const{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,s)}const uI={kernelName:fn,backendName:"cpu",kernelFunc:lI};function cI(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,s=ve(a,t[0].shape)[0];let o=jh(t.map((e=>e.shape)),s);if(0===ie(o))return n.makeTensorInfo(o,t[0].dtype,[]);const i=t.filter((e=>ie(e.shape)>0));if(1===i.length)return _T({inputs:{x:i[0]},backend:n});if(Hh(i.map((e=>e.shape)),s),"complex64"===i[0].dtype){const e=i.map((e=>QT({inputs:{input:e},backend:n}))),t=i.map((e=>lI({inputs:{input:e},backend:n}))),r=cI({inputs:e,backend:n,attrs:{axis:s}}),a=cI({inputs:t,backend:n,attrs:{axis:s}}),o=YT({inputs:{real:r,imag:a},backend:n});return e.forEach((e=>n.disposeIntermediateTensorInfo(e))),t.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a),o}const l=i.map((e=>{const t=ie(e.shape.slice(s));return u$({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),u=l.map((e=>({vals:n.data.get(e.dataId).values,shape:e.shape})));o=jh(l.map((e=>e.shape)),1);const c=1===l[0].shape[0],p=iI(u,o,t[0].dtype,c),d=jh(i.map((e=>e.shape)),s),h=n.makeTensorInfo(d,t[0].dtype,p);return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),h}const pI={kernelName:Et,backendName:"cpu",kernelFunc:cI};function dI(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:o,pad:i,dataFormat:l,dilations:u,dimRoundingMode:c}=r;TT([a,s],"conv2d");const p=du(l),d=ru(a.shape,s.shape,o,u,i,c,!1,p),h=d.filterHeight,f=d.filterWidth,m=d.dilationHeight,g=d.dilationWidth,v=d.padInfo.left,b=d.padInfo.top,y="channelsLast"===d.dataFormat,w=new Ua(d.outShape,a.dtype),x=_e(a.shape),k=_e(s.shape),C=x[0],S=y?x[1]:x[2],E=y?x[2]:1,T=y?1:x[1],$=w.strides[0],I=y?w.strides[1]:w.strides[2],N=y?w.strides[2]:1,O=y?1:w.strides[1],A=n.data.get(a.dataId).values,M=n.data.get(s.dataId).values,_=w.values;for(let e=0;e<d.batchSize;++e){const t=e*C,n=e*$;for(let e=0;e<d.outHeight;++e){const r=n+e*I,a=e*d.strideHeight-b;for(let e=0;e<h;++e){const n=a+e*m;if(n<0||n>=d.inHeight)continue;const s=e*k[0],o=t+n*S;for(let e=0;e<d.outWidth;++e){const t=r+e*N,n=e*d.strideWidth-v;for(let e=0;e<f;++e){const r=n+e*g;if(r<0||r>=d.inWidth)continue;const a=o+r*E;let i=s+e*k[1];for(let e=0;e<d.inChannels;++e){const n=A[a+e*T];for(let e=0;e<d.outChannels;++e)_[t+e*O]+=n*M[i+e];i+=d.outChannels}}}}}}return n.makeTensorInfo(w.shape,w.dtype,_)}const hI={kernelName:Tt,backendName:"cpu",kernelFunc:dI};const fI={kernelName:$t,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:o,pad:i,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;TT([a,s],"conv2dBackpropFilter");const p=du(l),d=ru(a.shape,c,o,1,i,u,!1,p),{strideHeight:h,strideWidth:f,filterHeight:m,filterWidth:g}=d,v="channelsLast"===d.dataFormat,b=new Ua(d.filterShape,"float32"),y=d.padInfo.left,w=d.padInfo.top,x=n.data.get(a.dataId).values,k=n.data.get(s.dataId).values,C=new Ua(a.shape,a.dtype,x),S=new Ua(s.shape,s.dtype,k);for(let e=0;e<m;++e){const t=Math.max(0,Math.ceil((w-e)/h)),n=Math.min(d.outHeight,(d.inHeight+w-e)/h);for(let r=0;r<g;++r){const a=Math.max(0,Math.ceil((y-r)/f)),s=Math.min(d.outWidth,(d.inWidth+y-r)/f);for(let o=0;o<d.inChannels;++o)for(let i=0;i<d.outChannels;++i){let l=0;for(let u=0;u<d.batchSize;++u)for(let c=t;c<n;++c){const t=e+c*h-w;for(let e=a;e<s;++e){const n=r+e*f-y;l+=v?C.get(u,t,n,o)*S.get(u,c,e,i):C.get(u,o,t,n)*S.get(u,i,c,e)}}b.set(l,e,r,o,i)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};const mI={kernelName:It,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{inputShape:o,strides:i,pad:l,dataFormat:u,dimRoundingMode:c}=r;TT([a,s],"conv2dBackpropInput");const p=_e(s.shape),d=_e(a.shape);let h=du(u);const f=ru(o,s.shape,i,1,l,c,!1,h),m=new Ua(f.inShape,"float32"),g=m.values,v=n.data.get(a.dataId).values,b=n.data.get(s.dataId).values,[y,w,x]=p,{batchSize:k,filterHeight:C,filterWidth:S,inChannels:E,inHeight:T,inWidth:$,outChannels:I,outHeight:N,outWidth:O,strideHeight:A,strideWidth:M}=f;h=f.dataFormat;const _=C-1-f.padInfo.top,R=S-1-f.padInfo.left,P="channelsLast"===h,D=m.strides[0],L=P?m.strides[1]:m.strides[2],B=P?m.strides[2]:1,F=P?1:m.strides[1],z=d[0],V=P?d[1]:d[2],W=P?d[2]:1,H=P?1:d[1];for(let e=0;e<k;++e)for(let t=0;t<E;++t)for(let n=0;n<T;++n){const r=n-_,a=Math.max(0,Math.ceil(r/A)),s=Math.min(N,(C+r)/A);for(let o=0;o<$;++o){const i=o-R,l=Math.max(0,Math.ceil(i/M)),u=Math.min(O,(S+i)/M);let c=0;for(let n=a;n<s;++n){const a=n*A-r;for(let r=l;r<u;++r){const s=z*e+V*n+W*r,o=y*(C-1-a)+w*(S-1-(r*M-i))+x*t;for(let e=0;e<I;++e){c+=v[s+H*e]*b[o+e]}}}g[D*e+L*n+B*o+F*t]=c}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};const gI={kernelName:Nt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:o,pad:i,dilations:l}=r;TT([a,s],"conv3d");const u=au(a.shape,s.shape,o,l,i),{filterDepth:c,filterHeight:p,filterWidth:d,dilationDepth:h,dilationHeight:f,dilationWidth:m,padInfo:g}=u,v=g.front,b=g.left,y=g.top,w=new Ua(u.outShape,a.dtype),x=n.data.get(a.dataId).values,k=n.data.get(s.dataId).values,C=w.values,S=_e(a.shape),E=_e(s.shape);for(let e=0;e<u.batchSize;++e){const t=e*S[0],n=e*w.strides[0];for(let e=0;e<u.outDepth;++e){const r=n+e*w.strides[1],a=e*u.strideDepth-v;for(let e=0;e<c;++e){const n=a+e*h;if(n<0||n>=u.inDepth)continue;const s=e*E[0],o=t+n*S[1];for(let e=0;e<u.outHeight;++e){const t=r+e*w.strides[2],n=e*u.strideHeight-y;for(let e=0;e<p;++e){const r=n+e*f;if(r<0||r>=u.inHeight)continue;const a=s+e*E[1],i=o+r*S[2];for(let e=0;e<u.outWidth;++e){const n=t+e*u.outChannels,r=e*u.strideWidth-b;for(let e=0;e<d;++e){const t=r+e*m;if(t<0||t>=u.inWidth)continue;const s=a+e*E[2],o=i+t*u.inChannels;let l=s;for(let e=0;e<u.inChannels;++e){const t=x[o+e];for(let e=0;e<u.outChannels;++e)C[n+e]+=t*k[l+e];l+=u.outChannels}}}}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};const vI={kernelName:Ot,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:o,pad:i,filterShape:l}=r;TT([a,s],"conv3dBackpropFilterV2");const u=_e(a.shape),c=_e(s.shape),p=au(a.shape,l,o,1,i),d=p.strideDepth,h=p.strideHeight,f=p.strideWidth,m=p.filterDepth,g=p.filterHeight,v=p.filterWidth,b=new Ua(p.filterShape,"float32"),y=b.values,[w,x,k,C]=b.strides,S=n.data.get(s.dataId).values,[E,T,$,I]=c,N=n.data.get(a.dataId).values,[O,A,M,_]=u,R=p.padInfo.front,P=p.padInfo.left,D=p.padInfo.top;for(let e=0;e<m;++e){const t=Math.max(0,Math.ceil((R-e)/d)),n=Math.min(p.outDepth,(p.inDepth+R-e)/d),r=e*w;for(let a=0;a<g;++a){const s=Math.max(0,Math.ceil((D-a)/h)),o=Math.min(p.outHeight,(p.inHeight+D-a)/h),i=a*x+r;for(let r=0;r<v;++r){const l=Math.max(0,Math.ceil((P-r)/f)),u=Math.min(p.outWidth,(p.inWidth+P-r)/f),c=r*k+i;for(let i=0;i<p.inChannels;++i){const m=i*C+c;for(let c=0;c<p.outChannels;++c){let g=0;for(let m=0;m<p.batchSize;++m){const p=m*O,v=m*E;for(let m=t;m<n;++m){const t=(e+m*d-R)*A+p,n=m*T+v;for(let e=s;e<o;++e){const s=(a+e*h-D)*M+t,o=e*$+n;for(let e=l;e<u;++e){const t=e*I+o;g+=N[(r+e*f-P)*_+s+i]*S[t+c]}}}}y[m+c]=g}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};const bI={kernelName:At,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{pad:o,strides:i,inputShape:l}=r;TT([a],"conv3dBackpropInputV2");const u=_e(a.shape),c=_e(s.shape),p=au(l,s.shape,i,1,o),d=new Ua(p.inShape,"float32"),h=d.values,[f,m,g,v]=d.strides,b=n.data.get(a.dataId).values,[y,w,x,k]=u,C=n.data.get(s.dataId).values,[S,E,T,$]=c,{batchSize:I,filterDepth:N,filterHeight:O,filterWidth:A,inChannels:M,inDepth:_,inHeight:R,inWidth:P,outChannels:D,outDepth:L,outHeight:B,outWidth:F,strideDepth:z,strideHeight:V,strideWidth:W}=p,H=N-1-p.padInfo.front,j=O-1-p.padInfo.top,U=A-1-p.padInfo.left;for(let e=0;e<I;++e)for(let t=0;t<M;++t)for(let n=0;n<_;++n){const r=n-H,a=Math.max(0,Math.ceil(r/z)),s=Math.min(L,(N+r)/z);for(let o=0;o<R;++o){const i=o-j,l=Math.max(0,Math.ceil(i/V)),u=Math.min(B,(O+i)/V);for(let c=0;c<P;++c){const p=c-U,d=Math.max(0,Math.ceil(p/W)),I=Math.min(F,(A+p)/W);let M=0;for(let n=a;n<s;++n){const a=n*z-r;for(let r=l;r<u;++r){const s=r*V-i;for(let o=d;o<I;++o){const i=y*e+w*n+x*r+k*o,l=S*(N-1-a)+E*(O-1-s)+T*(A-1-(o*W-p))+$*t;for(let e=0;e<D;++e){M+=b[i+e]*C[l+e]}}}}h[f*e+m*n+g*o+v*c+t]=M}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}},yI=NT(Mt,(e=>Math.cos(e))),wI={kernelName:Mt,backendName:"cpu",kernelFunc:yI},xI=NT(_t,(e=>Math.cosh(e))),kI={kernelName:_t,backendName:"cpu",kernelFunc:xI};const CI={kernelName:Dt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:s,boxInd:o}=t,{cropSize:i,method:l,extrapolationValue:u}=r,[c,p,d,h]=a.shape,f=s.shape[0],[m,g]=i,v=No([f,m,g,h],"float32"),b=n.data.get(s.dataId).values,y=n.data.get(o.dataId).values,w=n.data.get(a.dataId).values,x=_e(a.shape),k=_e(v.shape);for(let e=0;e<f;e++){const t=4*e,n=b[t],r=b[t+1],a=b[t+2],s=b[t+3],o=y[e];if(o>=c)continue;const i=m>1?(a-n)*(p-1)/(m-1):0,f=g>1?(s-r)*(d-1)/(g-1):0;for(let t=0;t<m;t++){const c=m>1?n*(p-1)+t*i:.5*(n+a)*(p-1);if(c<0||c>p-1)for(let n=0;n<g;n++)for(let r=0;r<h;r++){const a=r+n*k[2]+t*k[1]+e*k[0];v.values[a]=u}else if("bilinear"===l){const n=Math.floor(c),a=Math.ceil(c),i=c-n;for(let l=0;l<g;l++){const c=g>1?r*(d-1)+l*f:.5*(r+s)*(d-1);if(c<0||c>d-1){for(let n=0;n<h;n++){const r=n+l*k[2]+t*k[1]+e*k[0];v.values[r]=u}continue}const p=Math.floor(c),m=Math.ceil(c),b=c-p;for(let r=0;r<h;r++){let s=r+p*x[2]+n*x[1]+o*x[0];const u=w[s];s=r+m*x[2]+n*x[1]+o*x[0];const c=w[s];s=r+p*x[2]+a*x[1]+o*x[0];const d=w[s];s=r+m*x[2]+a*x[1]+o*x[0];const h=u+(c-u)*b,f=d+(w[s]-d)*b;s=r+l*k[2]+t*k[1]+e*k[0],v.values[s]=h+(f-h)*i}}}else for(let n=0;n<g;++n){const a=g>1?r*(d-1)+n*f:.5*(r+s)*(d-1);if(a<0||a>d-1){for(let r=0;r<h;r++){const a=r+n*k[2]+t*k[1]+e*k[0];v.values[a]=u}continue}const i=Math.round(a),l=Math.round(c);for(let r=0;r<h;r++){const a=r+i*x[2]+l*x[1]+o*x[0],s=r+n*k[2]+t*k[1]+e*k[0];v.values[s]=w[a]}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const SI={kernelName:Rt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,exclusive:o,reverse:i}=r;TT(a,"cumprod");const l=Dc([s],a.shape.length);let u=a;null!=l&&(u=k$({inputs:{x:a},backend:n,attrs:{perm:l}}));const c=Bc(1,a.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const p=as(u.dtype,"int32"),d=De(ie(u.shape),p),h=n.data.get(u.dataId).values,f=u.shape[u.shape.length-1],m=i?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let e=0;e<h.length;e+=f)for(let t=0;t<f;t++){const n=m(e,t);if(0===t)d[n]=o?1:h[n];else{const r=m(e,t-1);d[n]=o?h[r]*d[r]:h[n]*d[r]}}const g=n.makeTensorInfo(u.shape,p,d);if(null!=l){const e=k$({inputs:{x:g},backend:n,attrs:{perm:Lc(l)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),e}return g}};const EI={kernelName:Pt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,exclusive:o,reverse:i}=r;TT(a,"cumsum");const l=Dc([s],a.shape.length);let u=a;null!=l&&(u=k$({inputs:{x:a},backend:n,attrs:{perm:l}}));const c=Bc(1,a.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const p=as(u.dtype,"int32"),d=Le(ie(u.shape),p),h=n.data.get(u.dataId).values,f=u.shape[u.shape.length-1],m=i?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let e=0;e<h.length;e+=f)for(let t=0;t<f;t++){const n=m(e,t);if(0===t)d[n]=o?0:h[n];else{const r=m(e,t-1);d[n]=o?h[r]+d[r]:h[n]+d[r]}}const g=n.makeTensorInfo(u.shape,p,d);if(null!=l){const e=k$({inputs:{x:g},backend:n,attrs:{perm:Lc(l)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),e}return g}};const TI={kernelName:Lt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:s}=t,{size:o,binaryOutput:i}=r;if(1===a.shape.length){const e=J$(n.data.get(a.dataId).values,n.data.get(s.dataId).values,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,e)}if(2===a.shape.length){const e=Z$(n.bufferSync(a),n.bufferSync(s),o,i);return n.makeTensorInfo(e.shape,s.dtype,e.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}};const $I={kernelName:Bt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:s,dataFormat:o}=r;re("NHWC"===o,(()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`));const i=a.shape[0],l=a.shape[1],u=a.shape[2],c=a.shape[3],p=l*s,d=u*s,h=c/(s*s),f=n.data.get(a.dataId).values,m=new Float32Array(i*p*d*h);let g=0;for(let e=0;e<i;++e)for(let t=0;t<p;++t){const n=Math.floor(t/s),r=t%s;for(let t=0;t<d;++t){const a=Math.floor(t/s),o=(r*s+t%s)*h;for(let t=0;t<h;++t){const r=t+o+c*(a+u*(n+l*e));m[g++]=f[r]}}}return n.makeTensorInfo([i,p,d,h],a.dtype,m)}};function II(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:o,pad:i,dilations:l,dimRoundingMode:u}=r;TT([a,s],"depthwiseConv2DNative");const c=_e(a.shape),p=_e(s.shape);let d=l;null==d&&(d=[1,1]),re(pu(o,d),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${d}'`));const h=ru(a.shape,s.shape,o,d,i,u,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:v,padInfo:b}=h,y=b.left,w=b.top,x=h.outChannels/h.inChannels,k=new Ua(h.outShape,a.dtype),C=n.data.get(a.dataId).values,S=n.data.get(s.dataId).values,E=k.values;for(let e=0;e<h.batchSize;++e){const t=e*c[0],n=e*k.strides[0];for(let e=0;e<h.outHeight;++e){const r=n+e*k.strides[1],a=e*h.strideHeight-w;for(let e=0;e<f;++e){const n=a+e*g;if(n<0||n>=h.inHeight)continue;const s=e*p[0],o=t+n*c[1];for(let e=0;e<h.outWidth;++e){const t=r+e*k.strides[2],n=e*h.strideWidth-y;for(let e=0;e<m;++e){const r=n+e*v;if(r<0||r>=h.inWidth)continue;const a=s+e*p[1],i=o+r*h.inChannels;let l=t,u=a;for(let e=0;e<h.inChannels;++e){const t=C[i+e];for(let e=0;e<x;++e)E[l+e]+=t*S[u+e];l+=x,u+=x}}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const NI={kernelName:Ft,backendName:"cpu",kernelFunc:II};const OI={kernelName:zt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:o,dilations:i,pad:l,dimRoundingMode:u,filterShape:c}=r;TT([a,s],"depthwiseConv2dNativeBackpropFilter");const p=ru(a.shape,c,o,i,l,u,!0),{strideHeight:d,strideWidth:h,filterHeight:f,filterWidth:m}=p,g=new Ua(p.filterShape,"float32"),v=p.padInfo.left,b=p.padInfo.top,y=p.outChannels/p.inChannels,w=n.data.get(a.dataId).values,x=new Ua(a.shape,a.dtype,w),k=n.data.get(s.dataId).values,C=new Ua(s.shape,s.dtype,k);for(let e=0;e<f;++e){const t=Math.max(0,Math.ceil((b-e)/d)),n=Math.min(p.outHeight,(p.inHeight+b-e)/d);for(let r=0;r<m;++r){const a=Math.max(0,Math.ceil((v-r)/h)),s=Math.min(p.outWidth,(p.inWidth+v-r)/h);for(let o=0;o<p.outChannels;++o){const i=Math.trunc(o/y),l=o%y;let u=0;for(let l=0;l<p.batchSize;++l)for(let c=t;c<n;++c){const t=e+c*d-b;for(let e=a;e<s;++e){const n=r+e*h-v;u+=x.get(l,t,n,i)*C.get(l,c,e,o)}}g.set(u,e,r,i,l)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};const AI={kernelName:Vt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{strides:o,dilations:i,pad:l,dimRoundingMode:u,inputShape:c}=r;TT([a,s],"depthwiseConv2DNativeBackpropInput");const p=_e(a.shape),d=_e(s.shape),h=ru(c,s.shape,o,i,l,u,!0),f=new Ua(h.inShape,"float32"),m=f.values,[g,v,b]=f.strides,y=n.data.get(a.dataId).values,[w,x,k]=p,C=n.data.get(s.dataId).values,[S,E,T]=d,{batchSize:$,filterHeight:I,filterWidth:N,inChannels:O,inHeight:A,inWidth:M,outChannels:_,outHeight:R,outWidth:P,strideHeight:D,strideWidth:L}=h,B=I-1-h.padInfo.top,F=N-1-h.padInfo.left,z=_/O;for(let e=0;e<$;++e)for(let t=0;t<O;++t)for(let n=0;n<A;++n){const r=n-B,a=Math.max(0,Math.ceil(r/D)),s=Math.min(R,(I+r)/D);for(let o=0;o<M;++o){const i=o-F,l=Math.max(0,Math.ceil(i/L)),u=Math.min(P,(N+i)/L);let c=0;for(let n=a;n<s;++n){const a=n*D-r;for(let r=l;r<u;++r){const s=w*e+x*n+k*r,o=S*(I-1-a)+E*(N-1-(r*L-i))+T*t;for(let e=0;e<z;++e){c+=y[s+(t*z+e)]*C[o+e]}}}m[g*e+v*n+b*o+t]=c}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}};const MI={kernelName:Wt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,a=ie(r.shape),s=n.data.get(r.dataId).values,o=No([a,a],r.dtype),i=o.values;for(let e=0;e<s.length;e++)i[e*a+e]=s[e];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}},_I={kernelName:Ht,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:a}=e,{strides:s,pad:o,dilations:i}=n,l=t,u=l.data.get(r.dataId).values,c=r.shape.length,p=l.data.get(a.dataId).values,d=a.shape.length,{batchSize:h,inHeight:f,inWidth:m,inChannels:g,outHeight:v,outWidth:b,padInfo:y,strideHeight:w,strideWidth:x,filterHeight:k,filterWidth:C,dilationHeight:S,dilationWidth:E,outShape:T}=eu(r.shape,a.shape,s,o,"NHWC",i),$=ie(T),I=T.length,N=we(r.dtype,$);for(let e=0;e<h;++e)for(let t=0;t<v;++t){const n=t*w-y.top;for(let s=0;s<b;++s){const o=s*x-y.left;for(let i=0;i<g;++i){let l=Number.MIN_SAFE_INTEGER;for(let t=0;t<k;++t){const s=n+t*S;if(s>=0&&s<f)for(let n=0;n<C;++n){const h=o+n*E;if(h>=0&&h<m){const o=ze([e,s,h,i],c,_e(r.shape)),f=ze([t,n,i],d,_e(a.shape)),m=u[o]+p[f];m>l&&(l=m)}}}N[ze([e,t,s,i],I,_e(T))]=l}}}return{dataId:l.write(Ma(N,r.dtype),T,r.dtype),shape:T,dtype:r.dtype}}},RI={kernelName:Ut,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:a,dy:s}=e,{strides:o,pad:i,dilations:l}=n,u=t,c=Pe(r.shape,u.data.get(r.dataId).values),p=Pe(a.shape,u.data.get(a.dataId).values),{batchSize:d,inHeight:h,inWidth:f,inChannels:m,outHeight:g,outWidth:v,padInfo:b,strideHeight:y,strideWidth:w,filterHeight:x,filterWidth:k,dilationHeight:C,dilationWidth:S,outShape:E}=eu(r.shape,a.shape,o,i,"NHWC",l);re(s.rank===E.length,(()=>`Error in ${Ut}, dy must have the same rank as output ${E.length}, but got ${s.rank}`));const T=Pe(E,u.data.get(s.dataId).values),$=Be(a.shape,a.dtype);for(let e=0;e<d;++e)for(let t=0;t<g;++t){const n=t*y-b.top;for(let r=0;r<v;++r){const a=r*w-b.left;for(let s=0;s<m;++s){let o=Number.MIN_SAFE_INTEGER,i=0,l=0;for(let t=0;t<x;++t){const r=n+t*C;if(r>=0&&r<h)for(let n=0;n<k;++n){const u=a+n*S;if(u>=0&&u<f){const a=c[e][r][u][s]+p[t][n][s];a>o&&(o=a,i=t,l=n)}}}$[i][l][s]+=T[e][t][r][s]}}}return{dataId:u.write(Ma($,r.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},PI={kernelName:jt,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:a,dy:s}=e,{strides:o,pad:i,dilations:l}=n,u=t,c=Pe(r.shape,u.data.get(r.dataId).values),p=Pe(a.shape,u.data.get(a.dataId).values),{batchSize:d,inHeight:h,inWidth:f,inChannels:m,outHeight:g,outWidth:v,padInfo:b,strideHeight:y,strideWidth:w,filterHeight:x,filterWidth:k,dilationHeight:C,dilationWidth:S,outShape:E}=eu(r.shape,a.shape,o,i,"NHWC",l);re(s.rank===E.length,(()=>`Error in ${jt}, dy must have the same rank as output ${E.length}, but got ${s.rank}`));const T=Pe(E,u.data.get(s.dataId).values),$=Be(r.shape,r.dtype);for(let e=0;e<d;++e)for(let t=0;t<g;++t){const n=t*y-b.top;for(let r=0;r<v;++r){const a=r*w-b.left;for(let s=0;s<m;++s){let o=Number.MIN_SAFE_INTEGER,i=n<0?0:n,l=a<0?0:a;for(let t=0;t<x;++t){const r=n+t*C;if(r>=0&&r<h)for(let n=0;n<k;++n){const u=a+n*S;if(u>=0&&u<f){const a=c[e][r][u][s]+p[t][n][s];a>o&&(o=a,i=r,l=u)}}}$[e][i][l][s]+=T[e][t][r][s]}}}return{dataId:u.write(Ma($,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},DI=LT(((e,t)=>e*t)),LI=a$(((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n}))),BI=r$(Hn,DI,LI),FI={kernelName:Hn,backendName:"cpu",kernelFunc:BI};function zI(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:o}=r;let i;TT(a,"sum"),i="bool"===a.dtype?t$({inputs:{x:a},backend:n,attrs:{dtype:"int32"}}):_T({inputs:{x:a},backend:n});const l=i.shape.length,u=ve(s,i.shape),c=Dc(u,l);let p=u,d=i;null!=c&&(d=k$({inputs:{x:i},backend:n,attrs:{perm:c}}),p=Bc(p.length,l)),Pc("sum",p,d.shape.length);const[h,f]=_c(d.shape,p);let m=ZT(n,h,as(d.dtype,"int32"));const g=ie(f),v=n.data.get(m.dataId).values,b=n.data.get(d.dataId).values;for(let e=0;e<v.length;++e){const t=e*g;let n=0;for(let e=0;e<g;++e)n+=b[t+e];v[e]=n}if(o){const e=m;m=u$({inputs:{x:m},backend:n,attrs:{shape:Rc(m.shape,u)}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(i),null!=c&&n.disposeIntermediateTensorInfo(d),m}const VI={kernelName:Tr,backendName:"cpu",kernelFunc:zI};const WI={kernelName:qt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,s=t,{allDims:o,summedDims:i,idDims:l}=bf(a,s.length);wf(o.length,l,s);const{path:u,steps:c}=xf(i,l),p=c.length;let d=null,h=o.length;const f=[];for(let e=0;e<p;++e){for(const t of c[e]){const{permutationIndices:e,expandDims:r}=yf(h,l[t]);let a;kf(e)?a=s[t]:(a=k$({inputs:{x:s[t]},backend:n,attrs:{perm:e}}),f.push(a));const o=a.shape.slice();for(let e=0;e<r.length;++e)o.splice(r[e],0,1);ue(a.shape,o)||(a=u$({inputs:{x:a},backend:n,attrs:{shape:o}}),f.push(a)),null===d?d=a:(d=BI({inputs:{a:a,b:d},backend:n}),f.push(d))}e<p-1&&(u[e]>=0&&(d=zI({inputs:{x:d},backend:n,attrs:{axis:u[e]-(o.length-h),keepDims:!1}}),f.push(d)),h--)}for(const e of f)e!==d&&n.disposeIntermediateTensorInfo(e);return d}};const HI={kernelName:Kt,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:r,y:a}=t;TT([r,a],"eluGrad");const s=new Float32Array(ie(a.shape)),o=n.data.get(a.dataId).values,i=n.data.get(r.dataId).values;for(let e=0;e<o.length;++e){const t=o[e];s[e]=t>=1?i[e]:i[e]*(t+1)}return n.makeTensorInfo(a.shape,"float32",s)}},jI=LT(((e,t)=>e===t?1:0)),UI=r$(Jt,jI,null,"bool"),GI={kernelName:Jt,backendName:"cpu",kernelFunc:UI},qI=tf,XI=nf,KI=rf,YI=af,JI=sf,ZI=of,QI=NT(Yt,(e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+qI*n);return t*(1-((((ZI*r+JI)*r+YI)*r+KI)*r+XI)*r*Math.exp(-n*n))})),eN={kernelName:Yt,backendName:"cpu",kernelFunc:QI},tN=UT((e=>Math.exp(e))),nN=OT(Zt,tN,"float32"),rN={kernelName:Zt,backendName:"cpu",kernelFunc:nN};function aN(e){const{inputs:t,backend:n,attrs:r}=e,{input:a}=t,{dim:s}=r,o=a.shape.length,i=a.shape.slice();let l=s;return s<0&&(re(-(o+1)<=s,(()=>`Axis must be in the interval [${-(o+1)}, ${o}]`)),l=o+s+1),i.splice(l,0,1),u$({inputs:{x:a},backend:n,attrs:{shape:i}})}const sN={kernelName:Qt,backendName:"cpu",kernelFunc:aN},oN=UT((e=>Math.expm1(e))),iN=OT(en,oN),lN={kernelName:en,backendName:"cpu",kernelFunc:iN},uN=LT(((e,t)=>e/t)),cN=r$(Gt,uN),pN={kernelName:Gt,backendName:"cpu",kernelFunc:cN},dN=LT(((e,t)=>e-t)),hN=a$(((e,t,n,r)=>({real:e-n,imag:t-r}))),fN=r$(Vr,dN,hN),mN={kernelName:Vr,backendName:"cpu",kernelFunc:fN};function gN(e,t,n){const r=e.shape,a=r[0],s=r[1],o=n.data.get(e.dataId),i=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,u=[a,s],c=ie(u),p=ye("float32",c),d=ye("float32",c);for(let e=0;e<a;e++){const r=X$({inputs:{x:i},backend:n,attrs:{begin:[e,0],size:[1,s]}}),a=X$({inputs:{x:l},backend:n,attrs:{begin:[e,0],size:[1,s]}}),o=YT({inputs:{real:r,imag:a},backend:n}),{real:u,imag:c}=vN(o,t,n),h=lf(u,c);for(let t=0;t<s;t++){const n=df(h,t);p[e*s+t]=n.real,d[e*s+t]=n.imag}n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o)}const h=n.makeTensorInfo(u,"float32",p),f=n.makeTensorInfo(u,"float32",d),m=YT({inputs:{real:h,imag:f},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),m}function vN(e,t,n){const r=ie(e.shape),a=n.data.get(e.dataId),s=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(0==((i=r)&i-1)){const a=bN(s,o,r,t,n),i=[e.shape[0],e.shape[1]];if(t){const e=n.makeTensorInfo(i,"float32",a.real),t=n.makeTensorInfo(i,"float32",a.imag),s=n.makeTensorInfo([],"float32",Aa(r,"float32")),o=_T({inputs:{x:s},backend:n}),l=pN.kernelFunc({inputs:{a:e,b:s},backend:n}),u=pN.kernelFunc({inputs:{a:t,b:o},backend:n}),c=n.data.get(l.dataId).values,p=n.data.get(u.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),{real:c,imag:p}}return a}{const e=function(e,t,n){const r=new Float32Array(2*t);for(let a=0;a<t;a++){let s=0,o=0;for(let r=0;r<t;r++){const i=mf(a*r,t,n),l=df(e,r);s+=l.real*i.real-l.imag*i.imag,o+=l.real*i.imag+l.imag*i.real}n&&(s/=t,o/=t),hf(r,s,o,a)}return r}(lf(s,o),r,t);return uf(e)}var i}function bN(e,t,n,r,a){if(1===n)return{real:e,imag:t};const s=lf(e,t),o=n/2,i=cf(s),l=i.real,u=i.imag,c=[l.length],p=a.makeTensorInfo(c,"float32",l),d=a.makeTensorInfo(c,"float32",u),h=YT({inputs:{real:p,imag:d},backend:a}),f=pf(s),m=f.real,g=f.imag,v=[m.length],b=a.makeTensorInfo(v,"float32",m),y=a.makeTensorInfo(v,"float32",g),w=YT({inputs:{real:b,imag:y},backend:a}),x=bN(l,u,o,r,a),k=x.real,C=x.imag,S=[k.length],E=a.makeTensorInfo(S,"float32",k),T=a.makeTensorInfo(S,"float32",C),$=YT({inputs:{real:E,imag:T},backend:a}),I=bN(m,g,o,r,a),N=I.real,O=I.imag,A=[N.length],M=a.makeTensorInfo(A,"float32",N),_=a.makeTensorInfo(A,"float32",O),R=YT({inputs:{real:M,imag:_},backend:a}),P=ff(n,r),D=[P.real.length],L=a.makeTensorInfo(D,"float32",P.real),B=a.makeTensorInfo(D,"float32",P.imag),F=YT({inputs:{real:L,imag:B},backend:a}),z=BI({inputs:{a:F,b:R},backend:a}),V=i$({inputs:{a:$,b:z},backend:a}),W=fN({inputs:{a:$,b:z},backend:a}),H=QT({inputs:{input:V},backend:a}),j=QT({inputs:{input:W},backend:a}),U=lI({inputs:{input:V},backend:a}),G=lI({inputs:{input:W},backend:a}),q=cI({inputs:[H,j],backend:a,attrs:{axis:0}}),X=cI({inputs:[U,G],backend:a,attrs:{axis:0}}),K=a.data.get(q.dataId).values,Y=a.data.get(X.dataId).values;return a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(w),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(T),a.disposeIntermediateTensorInfo($),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(_),a.disposeIntermediateTensorInfo(R),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(X),{real:K,imag:Y}}const yN={kernelName:tn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,a=ie(r.shape),s=r.shape[r.shape.length-1],o=u$({inputs:{x:r},backend:n,attrs:{shape:[a/s,s]}}),i=gN(o,!1,n),l=u$({inputs:{x:i},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),l}};function wN(e){const{backend:t,attrs:n}=e,{shape:r,value:a,dtype:s}=n,o=s||Oe(a),i=we(o,ie(r));return function(e,t,n){e.fill(t)}(i,a),t.makeTensorInfo(r,o,i)}const xN={kernelName:nn,backendName:"cpu",kernelFunc:wN};const kN={kernelName:rn,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,a=n,s=ye(r.dtype,ie(r.shape)),[o,i,l,u]=r.shape,c=a.data.get(r.dataId).values;for(let e=0;e<o;e++){const t=e*l*i*u;for(let e=0;e<i;e++){const n=e*(l*u);for(let e=0;e<l;e++){const r=e*u;for(let a=0;a<u;a++){const o=Math.round(l-e-1),i=t+n+r+a;let p=c[i];if(o>=0&&o<l){p=c[t+n+o*u+a]}s[i]=p}}}}return{dataId:a.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},CN=UT((e=>Math.floor(e))),SN=OT(an,CN),EN={kernelName:an,backendName:"cpu",kernelFunc:SN},TN=LT(((e,t)=>Math.floor(e/t))),$N=r$(sn,TN,null,"int32"),IN={kernelName:sn,backendName:"cpu",kernelFunc:$N};const NN={kernelName:na,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s,bias:o,preluActivationWeights:i}=t,{strides:l,pad:u,dataFormat:c,dilations:p,dimRoundingMode:d,activation:h,leakyreluAlpha:f}=r;let m=dI({inputs:{x:a,filter:s},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:p,dimRoundingMode:d}});if(o){const e=m;m=i$({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(e)}if(h){const e=m;m=KT(n,m,h,i,f),n.disposeIntermediateTensorInfo(e)}return m}};const ON={kernelName:ra,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s,bias:o,preluActivationWeights:i}=t,{strides:l,pad:u,dataFormat:c,dilations:p,dimRoundingMode:d,activation:h,leakyreluAlpha:f}=r;let m=II({inputs:{x:a,filter:s},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:p,dimRoundingMode:d}});if(o){const e=m;m=i$({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(e)}if(h){const e=m;m=KT(n,m,h,i,f),n.disposeIntermediateTensorInfo(e)}return m}};function AN(e,t,n,r,a,s,o,i,l){const u=No([r,s],n);for(let n=0;n<r;n++){const r=[];let c=0;for(let t=0;t<a;t++){const s=e[n*a+t];c+=s*o[t],r.push(s)}if(c<0||c>=l/s)throw new Error(`Invalid indices: ${r} does not index into ${i}`);for(let e=0;e<s;e++)u.values[n*s+e]=t.get(...t.indexToLoc(c*s+e))}return u}const MN={kernelName:un,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:a}=t,s=ie(r.shape),o=a.shape,i=o[o.length-1],[l,u,c,p]=ci(r,a);if(0===u)return n.makeTensorInfo(l,r.dtype,[]);const d=AN(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,u,i,c,p,r.shape,s);return n.makeTensorInfo(l,r.dtype,d.values)}};function _N(e,t,n){const r=No(n,e.dtype);for(let n=0;n<r.size;++n){const a=r.indexToLoc(n).slice(),s=a[0],o=a[2],i=t.locToIndex([s,o]);a[2]=t.values[i];const l=e.locToIndex(a);0<=l&&l<e.values.length&&(r.values[n]=e.values[l])}return r}const RN={kernelName:ln,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,indices:s}=t,{axis:o,batchDims:i}=r;TT([a,s],"gatherV2");const l=ve(o,a.shape)[0],u=n.data.get(s.dataId).values,c=a.shape[l];for(let e=0;e<u.length;++e){const t=u[e];re(t<=c-1&&t>=0,(()=>`GatherV2: the index value ${t} is not in [0, ${c-1}]`))}let p=i;null==i&&(p=0);const d=ie(s.shape),h=Ff(a,s,l,p),f=u$({inputs:{x:a},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),m=u$({inputs:{x:s},backend:n,attrs:{shape:[h.batchSize,d/h.batchSize]}}),g=[h.batchSize,h.outerSize,d/h.batchSize,h.sliceSize],v=n.bufferSync(m),b=_N(n.bufferSync(f),v,g);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(h.outputShape,b.dtype,b.values)}},PN=LT(((e,t)=>e>t?1:0)),DN=r$(cn,PN,null,"bool"),LN={kernelName:cn,backendName:"cpu",kernelFunc:DN},BN=LT(((e,t)=>e>=t?1:0)),FN=r$(pn,BN,null,"bool"),zN={kernelName:pn,backendName:"cpu",kernelFunc:FN};const VN={kernelName:hn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,a=ie(r.shape),s=r.shape[r.shape.length-1],o=u$({inputs:{x:r},backend:n,attrs:{shape:[a/s,s]}}),i=gN(o,!0,n),l=u$({inputs:{x:i},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),l}},WN=NT(mn,(e=>Number.isFinite(e)?1:0),"bool"),HN={kernelName:mn,backendName:"cpu",kernelFunc:WN},jN=NT(gn,(e=>Math.abs(e)===1/0?1:0),"bool"),UN={kernelName:gn,backendName:"cpu",kernelFunc:jN},GN=NT(vn,(e=>Number.isNaN(e)?1:0),"bool"),qN={kernelName:vn,backendName:"cpu",kernelFunc:GN},XN=LT(((e,t)=>e<t?1:0)),KN=r$(yn,XN,null,"bool"),YN={kernelName:yn,backendName:"cpu",kernelFunc:KN},JN=LT(((e,t)=>e<=t?1:0)),ZN=r$(wn,JN,null,"bool"),QN={kernelName:wn,backendName:"cpu",kernelFunc:ZN};function eO(e,t,n){const r=(t-e)/(n-1),a=Le(n,"float32");a[0]=e;for(let e=1;e<a.length;e++)a[e]=a[e-1]+r;return a}const tO={kernelName:xn,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:a,num:s}=n,o=eO(r,a,s);return t.makeTensorInfo([o.length],"float32",o)}},nO=UT((e=>Math.log(e))),rO=OT(kn,nO),aO={kernelName:kn,backendName:"cpu",kernelFunc:rO},sO=NT(Cn,(e=>Math.log1p(e))),oO={kernelName:Cn,backendName:"cpu",kernelFunc:sO},iO=LT(((e,t)=>e&&t)),lO=r$(Sn,iO,null,"bool"),uO={kernelName:Sn,backendName:"cpu",kernelFunc:lO},cO=NT(En,(e=>e?0:1),"bool"),pO={kernelName:En,backendName:"cpu",kernelFunc:cO},dO=LT(((e,t)=>e||t)),hO=r$(Tn,dO,null,"bool"),fO={kernelName:Tn,backendName:"cpu",kernelFunc:hO};const mO={kernelName:In,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:s,bias:o,alpha:i,beta:l}=r;TT(a,"LRN");const u=a.shape[3],c=u-1,p=n.data.get(a.dataId).values,d=ie(a.shape),h=new Float32Array(d);function f(e){const t=e%u;let n=e-t+Math.max(0,t-s);const r=e-t+Math.min(t+s,c);let a=0;for(;n<=r;n++){const e=p[n];a+=e*e}return a}for(let e=0;e<d;e++){const t=f(e),n=p[e]*Math.pow(o+i*t,-l);h[e]=n}return n.makeTensorInfo(a.shape,a.dtype,h)}};const gO={kernelName:Nn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,y:s,dy:o}=t,{depthRadius:i,bias:l,alpha:u,beta:c}=r;TT(o,"LRNGrad");const p=ie(o.shape),d=o.shape[3],h=n.data.get(o.dataId).values,f=n.data.get(a.dataId).values,m=n.data.get(s.dataId).values,g=new Float32Array(p),v=p;for(let e=0;e<v;e++){const t=e%d,n=e-t+Math.max(0,t-i),r=e-t+Math.min(d,t+i+1);let a=0;for(let e=n;e<r;e++)a+=Math.pow(f[e],2);a=u*a+l;for(let t=n;t<r;t++){let n=-2*u*c*f[t]*m[e]/a;e===t&&(n+=Math.pow(a,-c)),n*=h[e],g[t]+=n}}return n.makeTensorInfo(o.shape,a.dtype,g)}};function vO(e,t,n,r){const a=ye(r,ie(n));for(let n=0;n<a.length;++n){const r=n*t;let s=e[r];for(let n=0;n<t;++n){const t=e[r+n];(Number.isNaN(t)||t>s)&&(s=t)}a[n]=s}return a}function bO(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reductionIndices:s,keepDims:o}=r,i=n;let l=a.shape;const u=l.length,c=ve(s,l);let p=c;const d=Dc(p,u);let h=i.data.get(a.dataId).values;if(null!=d){const e=new Array(u);for(let t=0;t<e.length;t++)e[t]=l[d[t]];h=x$(h,l,a.dtype,d,e),p=Bc(p.length,u),l=e}TT(a,"max"),Pc("max",p,u);const[f,m]=_c(l,p),g=vO(h,ie(m),f,a.dtype),v=i.write(g,f,a.dtype);let b=f;if(o){b=Rc(f,c)}return{dataId:v,shape:b,dtype:a.dtype}}const yO={kernelName:On,backendName:"cpu",kernelFunc:bO},wO=LT(((e,t)=>Math.max(e,t))),xO=r$(An,wO),kO={kernelName:An,backendName:"cpu",kernelFunc:xO};const CO={kernelName:Mn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;TT(a,"maxPool");const{filterSize:s,strides:o,pad:i,dimRoundingMode:l}=r;re(pu(o,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`));const u=tu(a.shape,s,o,1,i,l);let c;if(1===u.filterWidth&&1===u.filterHeight&&ue(u.inShape,u.outShape))c=_T({inputs:{x:a},backend:n});else{const e=n.data.get(a.dataId).values,t=_e(a.shape),r=F$(e,a.shape,a.dtype,t,u,"max");c=n.makeTensorInfo(u.outShape,a.dtype,r.values)}return c}};const SO={kernelName:Rn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:s,strides:o,pad:i,dimRoundingMode:l,dataFormat:u}=r;TT(a,"maxPool3d");const c=nu(a.shape,s,o,1,i,l,u),p=V$(n.data.get(a.dataId).values,a.shape,a.dtype,_e(a.shape),c,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}};const EO={kernelName:Pn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,{filterSize:o,strides:i,pad:l,dimRoundingMode:u}=r;TT([a,s],"maxPool3DGrad");const c=nu(s.shape,o,i,1,l,u),p=function(e,t){const n=No(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,s=t.strideWidth,o=t.dilationDepth,i=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,p=t.effectiveFilterWidth,d=t.padInfo.front,h=t.padInfo.top,f=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let v=0;v<t.outDepth;++v){const b=v*r-d;let y=b;for(;y<0;)y+=o;const w=Math.min(t.inDepth,u+b);for(let r=0;r<t.outHeight;++r){const u=r*a-h;let d=u;for(;d<0;)d+=i;const x=Math.min(t.inHeight,c+u);for(let a=0;a<t.outWidth;++a){const h=a*s-f;let k=h;for(;k<0;)k+=l;const C=Math.min(t.inWidth,p+h);let S=Number.NEGATIVE_INFINITY,E=-1;for(let t=y;t<w;t+=o){const n=t-b;for(let r=d;r<x;r+=i){const a=r-u;for(let s=k;s<C;s+=l){const o=s-h,i=e.get(m,t,r,s,g);i>=S&&(S=i,E=n*c*p+a*c+o)}}}n.set(E,m,v,r,a,g)}}}return n}(n.bufferSync(s),c),d=c.strideDepth,h=c.strideHeight,f=c.strideWidth,m=c.dilationDepth,g=c.dilationHeight,v=c.dilationWidth,b=c.effectiveFilterDepth,y=c.effectiveFilterHeight,w=c.effectiveFilterWidth,x=b-1-c.padInfo.front,k=w-1-c.padInfo.left,C=y-1-c.padInfo.top,S=No(s.shape,"float32"),E=n.bufferSync(a);for(let e=0;e<c.batchSize;++e)for(let t=0;t<c.inChannels;++t)for(let n=0;n<c.inDepth;++n)for(let r=0;r<c.inHeight;++r)for(let a=0;a<c.inWidth;++a){const s=n-x,o=r-C,i=a-k;let l=0;for(let n=0;n<b;n+=m){const r=(s+n)/d;if(!(r<0||r>=c.outDepth||Math.floor(r)!==r))for(let a=0;a<y;a+=g){const s=(o+a)/h;if(!(s<0||s>=c.outHeight||Math.floor(s)!==s))for(let o=0;o<w;o+=v){const u=(i+o)/f;if(u<0||u>=c.outWidth||Math.floor(u)!==u)continue;const d=b*y*w-1-p.get(e,r,s,u,t)===n*y*w+a*w+o?1:0;if(0===d)continue;l+=E.get(e,r,s,u,t)*d}}}S.set(l,e,n,r,a,t)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}};const TO={kernelName:_n,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s,output:o}=t,i=s;TT([s,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:p}=r,d=tu(i.shape,l,u,1,c,p),h=n.data.get(i.dataId).values,f=No(d.outShape,i.dtype,z$(h,i.shape,i.dtype,d).values),m=d.strideHeight,g=d.strideWidth,v=d.dilationHeight,b=d.dilationWidth,y=d.effectiveFilterHeight,w=d.effectiveFilterWidth,x=w-1-d.padInfo.left,k=y-1-d.padInfo.top,C=No(i.shape,"float32"),S=n.data.get(a.dataId).values,E=No(a.shape,"float32",S);for(let e=0;e<d.batchSize;++e)for(let t=0;t<d.inChannels;++t)for(let n=0;n<d.inHeight;++n)for(let r=0;r<d.inWidth;++r){const a=n-k,s=r-x;let o=0;for(let n=0;n<y;n+=v){const r=(a+n)/m;if(!(r<0||r>=d.outHeight||Math.floor(r)!==r))for(let a=0;a<w;a+=b){const i=(s+a)/g;if(i<0||i>=d.outWidth||Math.floor(i)!==i)continue;const l=y*w-1-f.get(e,r,i,t)===n*w+a?1:0;if(0===l)continue;o+=E.get(e,r,i,t)*l}}C.set(o,e,n,r,t)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};const $O={kernelName:Dn,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:a,strides:s,pad:o,includeBatchInIndex:i}=t,l=n;TT(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,c=tu(r.shape,a,s,[1,1],o),[p,d]=function(e,t,n,r,a){const s=F$(e,0,n,_e(t),a,"max"),o=z$(e,t,n,a,!0,r);return[s.values,o.values]}(u,r.shape,r.dtype,i,c),h=l.write(p,c.outShape,r.dtype),f=l.write(d,c.outShape,r.dtype);return[{dataId:h,shape:c.outShape,dtype:r.dtype},{dataId:f,shape:c.outShape,dtype:"int32"}]}};const IO={kernelName:Ln,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:o}=r,i=ve(s,a.shape),l=ie(_c(a.shape,i)[1]),u=[],c=n.makeTensorInfo([],"float32",new Float32Array([l]));u.push(c);const p=t$({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});u.push(p);const d=cN({inputs:{a:p,b:c},backend:n});u.push(d);const h=zI({inputs:{x:d},backend:n,attrs:{axis:s,keepDims:o}});return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),h}};const NO={kernelName:Bn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:o}=r;TT(a,"min");const i=ve(s,a.shape);let l=i;const u=Dc(l,a.shape.length);let c=a;null!=u&&(c=k$({inputs:{x:a},backend:n,attrs:{perm:u}}),l=Bc(l.length,a.shape.length)),Pc("min",l,c.shape.length);const[p,d]=_c(c.shape,l),h=ie(d),f=Le(ie(p),c.dtype),m=n.data.get(c.dataId).values;for(let e=0;e<f.length;++e){const t=e*h;let n=m[t];for(let e=0;e<h;++e){const r=m[t+e];(Number.isNaN(r)||r<n)&&(n=r)}f[e]=n}null!=u&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(p,c.dtype,f);if(o){const e=u$({inputs:{x:g},backend:n,attrs:{shape:Rc(p,i)}});return n.disposeIntermediateTensorInfo(g),e}return g}},OO=LT(((e,t)=>Math.min(e,t))),AO=r$(Fn,OO),MO={kernelName:Fn,backendName:"cpu",kernelFunc:AO};const _O={kernelName:zn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:s,mode:o}=r;TT(a,"mirrorPad");const i=s.map(((e,t)=>e[0]+a.shape[t]+e[1])),l=s.map((e=>e[0])),u=s.map(((e,t)=>e[0]+a.shape[t])),c="reflect"===o?0:1,p=n.data.get(a.dataId).values,d=a.shape.length,h=_e(a.shape),f=ie(i),m=i.length,g=_e(i),v=ye(a.dtype,f);for(let e=0;e<f;e++){let t=Ve(e,m,g);for(let e=0;e<m;e++)t[e]<l[e]?t[e]=2*l[e]-t[e]-c:t[e]>=u[e]&&(t[e]=2*(u[e]-1)-t[e]+c);t=t.map(((e,t)=>e-l[t]));const n=ze(t,d,h);v[e]=p[n]}return{dataId:n.write(v,i,a.dtype),shape:i,dtype:a.dtype}}},RO=LT(((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),PO=r$(Vn,RO),DO={kernelName:Vn,backendName:"cpu",kernelFunc:PO};var LO=n(948);function BO(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:s}=r,o=a.shape.length;let i=s;if(-1===i&&(i=o-1),i!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${i}`);const l=ve([i],a.shape),u=bO({inputs:{x:a},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=Rc(u.shape,l),p=u$({inputs:{x:u},backend:n,attrs:{shape:c}}),d=fN({inputs:{a:a,b:p},backend:n}),h=nN({inputs:{x:d},backend:n}),f=zI({inputs:{x:h},backend:n,attrs:{axis:l,keepDims:!1}}),m=u$({inputs:{x:f},backend:n,attrs:{shape:c}}),g=cN({inputs:{a:h,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}const FO={kernelName:Nr,backendName:"cpu",kernelFunc:BO};const zO={kernelName:Wn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:s,seed:o,normalized:i}=r;TT(a,"multinomial");const l=i?a:BO({inputs:{logits:a},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],p=n.data.get(l.dataId).values,d=[u,s],h=Le(ie(d),"int32");for(let e=0;e<u;++e){const t=e*c,n=new Float32Array(c-1);n[0]=p[t];for(let e=1;e<n.length;++e)n[e]=n[e-1]+p[t+e];const r=LO.alea(o.toString()),a=e*s;for(let e=0;e<s;++e){const t=r();h[a+e]=n.length;for(let r=0;r<n.length;r++)if(t<n[r]){h[a+e]=r;break}}}return i||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(d,"int32",h)}};function VO(e,t,n){const r=Aa(-1,n);return DI([],t,r,e,n)}const WO={kernelName:jn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;TT(r,"neg");const a=n.data.get(r.dataId).values,[s,o]=VO(a,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,s)}},HO=Yd;const jO={kernelName:Gn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:o,iouThreshold:i,scoreThreshold:l}=r;TT(a,"NonMaxSuppression");const u=n.data.get(a.dataId).values,c=n.data.get(s.dataId).values,{selectedIndices:p}=HO(u,c,o,i,l);return n.makeTensorInfo([p.length],"int32",new Int32Array(p))}},UO=Jd;const GO={kernelName:qn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:o,iouThreshold:i,scoreThreshold:l,padToMaxOutputSize:u}=r;TT(a,"NonMaxSuppressionPadded");const c=n.data.get(a.dataId).values,p=n.data.get(s.dataId).values,{selectedIndices:d,validOutputs:h}=UO(c,p,o,i,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},qO=Zd;const XO={kernelName:Xn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:o,iouThreshold:i,scoreThreshold:l,softNmsSigma:u}=r;TT(a,"NonMaxSuppressionWithScore");const c=n.data.get(a.dataId).values,p=n.data.get(s.dataId).values,d=o,h=i,f=l,m=u,{selectedIndices:g,selectedScores:v}=qO(c,p,d,h,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}},KO=LT(((e,t)=>e!==t?1:0)),YO=r$(Un,KO,null,"bool"),JO={kernelName:Un,backendName:"cpu",kernelFunc:YO};const ZO={kernelName:Yn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{depth:s,onValue:o,offValue:i}=r;TT(a,"oneHot");const l=ie(a.shape),u=new Float32Array(l*s);u.fill(i);const c=n.data.get(a.dataId).values;for(let e=0;e<l;++e)c[e]>=0&&c[e]<s&&(u[e*s+c[e]]=o);return n.makeTensorInfo([...a.shape,s],"int32",u)}};function QO(e){const{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){const e=QT({inputs:{input:r},backend:n}),t=QO({inputs:{x:e},backend:n}),a=lI({inputs:{input:r},backend:n}),s=QO({inputs:{x:a},backend:n}),o=YT({inputs:{real:t,imag:s},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),o}return wN({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const eA={kernelName:Jr,backendName:"cpu",kernelFunc:QO};const tA={kernelName:Kn,backendName:"cpu",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:a}=n;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){const t=QT({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r}),s=lI({inputs:{input:a},backend:r}),o=QO({inputs:{x:s},backend:r}),i=YT({inputs:{real:n,imag:o},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(o),i}return wN({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function nA(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(1===t.length)return aN({inputs:{input:t[0]},backend:n,attrs:{dim:a}});const s=t[0].shape,o=t[0].dtype;t.forEach((e=>{ae(s,e.shape,"All tensors passed to stack must have matching shapes"),re(o===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const i=[],l=cI({inputs:t.map((e=>{const t=aN({inputs:{input:e},backend:n,attrs:{dim:a}});return i.push(t),t})),backend:n,attrs:{axis:a}});return i.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}const rA={kernelName:Jn,backendName:"cpu",kernelFunc:nA};const aA={kernelName:Zn,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:s,constantValue:o}=r;TT(a,"pad");const i=s.map(((e,t)=>e[0]+a.shape[t]+e[1])),l=s.map((e=>e[0])),u=n.data.get(a.dataId).values,c=ie(a.shape),p=a.shape.length,d=_e(a.shape),h=ie(i),f=i.length,m=_e(i),g=ye(a.dtype,h);0!==o&&g.fill(o);for(let e=0;e<c;e++){g[ze(Ve(e,p,d).map(((e,t)=>e+l[t])),f,m)]=u[e]}return{dataId:n.write(g,i,a.dtype),shape:i,dtype:a.dtype}}},sA=LT(((e,t)=>Math.pow(e,t))),oA=r$(er,sA),iA={kernelName:er,backendName:"cpu",kernelFunc:oA};function lA(e,t,n,r){const[a,s]=_c(e,r),o=as(t,"int32"),i=Le(ie(a),o),l=ie(s);for(let e=0;e<i.length;++e){const t=e*l;let r=1;for(let e=0;e<l;++e)r*=n[t+e];i[e]=r}return{outVals:i,outShape:a,outDtype:o}}const uA={kernelName:nr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:o}=r;TT(a,"prod");const i=a.shape.length,l=ve(s,a.shape),u=Dc(l,i);let c=l,p=a;const d=[];null!=u&&(p=k$({inputs:{x:a},backend:n,attrs:{perm:u}}),d.push(p),c=Bc(c.length,i));const h=n.data.get(p.dataId).values,{outVals:f,outShape:m,outDtype:g}=lA(p.shape,p.dtype,h,c);let v=m;return o&&(v=Rc(m,l)),d.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(v,g,f)}};function cA(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return Le(0,r);const a=Le(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(let e=1;e<a.length;e++)a[e]=a[e-1]+n;return a}const pA={kernelName:rr,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:a,dtype:s,step:o}=n,i=cA(r,a,o,s);return t.makeTensorInfo([i.length],s,i)}},dA=NT(sr,(e=>1/e)),hA={kernelName:sr,backendName:"cpu",kernelFunc:dA};const fA={kernelName:cr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:s,halfPixelCenters:o,size:i}=r;TT(a,"resizeBilinear");const l=_e(a.shape),[u,c]=i,[p,d,h,f]=a.shape,m=n.data.get(a.dataId).values,g=new Float32Array(ie([p,u,c,f])),v=[s&&u>1?d-1:d,s&&c>1?h-1:h],b=[s&&u>1?u-1:u,s&&c>1?c-1:c];let y=0;const w=v[0]/b[0],x=v[1]/b[1];for(let e=0;e<p;e++)for(let t=0;t<u;t++){let n;n=o?w*(t+.5)-.5:w*t;const r=Math.max(0,Math.floor(n)),a=n-r,s=Math.min(d-1,Math.ceil(n)),i=e*l[0]+r*l[1],u=e*l[0]+s*l[1];for(let e=0;e<c;e++){let t;t=o?x*(e+.5)-.5:x*e;const n=Math.max(0,Math.floor(t)),r=t-n,s=Math.min(h-1,Math.ceil(t)),c=i+n*l[2],p=u+n*l[2],d=i+s*l[2],v=u+s*l[2];for(let e=0;e<f;e++){const t=m[c+e],n=m[p+e],s=t+(m[d+e]-t)*r,o=s+(n+(m[v+e]-n)*r-s)*a;g[y++]=o}}}return n.makeTensorInfo([p,u,c,f],"float32",g)}};const mA={kernelName:pr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:s}=t,{alignCorners:o}=r;TT([s,a],"resizeBilinearGrad");const i=_e(a.shape),[l,u,c,p]=a.shape,[,d,h]=s.shape,f=new Float32Array(l*u*c*p),m=[o&&d>1?u-1:u,o&&h>1?c-1:c],g=[o&&d>1?d-1:d,o&&h>1?h-1:h],v=m[0]/g[0],b=m[1]/g[1],y=n.data.get(s.dataId).values;let w=0;for(let e=0;e<l;e++){const t=e*i[0];for(let e=0;e<d;e++){const n=e*v,r=Math.floor(n),a=Math.min(Math.ceil(n),u-1),s=t+r*i[1],o=t+a*i[1],l=n-r,d=1-l;for(let e=0;e<h;e++){const t=e*b,n=Math.floor(t),r=Math.min(Math.ceil(t),c-1),a=t-n,u=1-a,h=s+n*i[2],m=s+r*i[2],g=o+n*i[2],v=o+r*i[2],x=d*u,k=d*a,C=l*u,S=l*a;for(let e=0;e<p;e++){const t=y[w++];f[h+e]+=t*x,f[m+e]+=t*k,f[g+e]+=t*C,f[v+e]+=t*S}}}}return n.makeTensorInfo([l,c,u,p],"float32",f)}};const gA={kernelName:lr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:s,halfPixelCenters:o,size:i}=r;TT(a,"resizeNearestNeighbor");const l=_e(a.shape),[u,c]=i,[p,d,h,f]=a.shape,m=n.data.get(a.dataId).values,g=new Float32Array(p*u*c*f),v=[s&&u>1?d-1:d,s&&c>1?h-1:h],b=[s&&u>1?u-1:u,s&&c>1?c-1:c],y=v[0]/b[0],w=v[1]/b[1];let x=0;for(let e=0;e<p;e++){const t=e*l[0];for(let e=0;e<u;e++){const n=o?y*(e+.5):y*e;let r=Math.min(d-1,s?Math.round(n):Math.floor(n));o&&(r=Math.max(0,r));const a=t+r*l[1];for(let e=0;e<c;e++){const t=o?w*(e+.5):w*e;let n=Math.min(h-1,s?Math.round(t):Math.floor(t));o&&(n=Math.max(0,n));const r=a+n*l[2];for(let e=0;e<f;e++){const t=m[r+e];g[x++]=t}}}}return n.makeTensorInfo([p,u,c,f],a.dtype,g)}};const vA={kernelName:ur,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:s}=t,{alignCorners:o}=r;TT([s,a],"resizeNearestNeighborGrad");const i=_e(a.shape),l=_e(s.shape),[u,c,p,d]=a.shape,[,h,f]=s.shape,m=new Float32Array(u*c*p*d),g=n.data.get(s.dataId).values,v=[o&&h>1?c-1:c,o&&f>1?p-1:p],b=[o&&h>1?h-1:h,o&&f>1?f-1:f],y=v[0]/b[0],w=v[1]/b[1],x=1/y,k=1/w,C=2*Math.ceil(x)+2,S=2*Math.ceil(k)+2;for(let e=0;e<u;e++){const t=e*i[0];for(let e=0;e<c;e++){const n=t+e*i[1],r=Math.floor(e*x),a=Math.floor(r-C/2);for(let r=0;r<p;r++){const s=n+r*i[2],u=Math.floor(r*k),v=Math.floor(u-S/2);for(let n=0;n<d;n++){let i=0;for(let s=0;s<C;s++){const u=s+a;if(u<0||u>=h)continue;const d=t+u*l[1],m=u*y;if(e===Math.min(c-1,o?Math.round(m):Math.floor(m)))for(let e=0;e<S;e++){const t=e+v;if(t<0||t>=f)continue;const a=d+t*l[2],s=t*w;r===Math.min(p-1,o?Math.round(s):Math.floor(s))&&(i+=g[a+n])}}m[s+n]=i}}}}return n.makeTensorInfo(a.shape,a.dtype,m)}};const bA={kernelName:hr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:s}=r;TT(a,"reverse");const o=a.shape.length,i=ve(s,a.shape);if(0===o)return _T({inputs:{x:a},backend:n});const l=new Ua(a.shape,a.dtype),u=n.bufferSync(a);for(let e=0;e<l.size;e++){const t=l.indexToLoc(e),n=t.slice();i.forEach((e=>n[e]=a.shape[e]-1-n[e])),l.set(u.get(...n),...t)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}},yA={kernelName:ea,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:a,fillValue:s,center:o}=t,i=n,l=ye(r.dtype,ie(r.shape)),[u,c,p,d]=r.shape,[h,f]=qh(o,c,p),m=Math.sin(a),g=Math.cos(a),v=i.data.get(r.dataId).values;for(let e=0;e<u;e++){const t=e*p*c*d;for(let e=0;e<c;e++){const n=e*(p*d);for(let r=0;r<p;r++){const a=r*d;for(let o=0;o<d;o++){const i=[u,e,r,o],b=i[2],y=i[1];let w=(b-h)*g-(y-f)*m,x=(b-h)*m+(y-f)*g;w=Math.round(w+h),x=Math.round(x+f);let k=s;if("number"!=typeof s&&(k=3===o?255:s[o]),w>=0&&w<p&&x>=0&&x<c){k=v[t+x*(p*d)+w*d+o]}l[t+n+a+o]=k}}}}return{dataId:i.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},wA=NT(fr,(e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2==0?t:t+1})),xA={kernelName:fr,backendName:"cpu",kernelFunc:wA},kA=UT((e=>1/Math.sqrt(e))),CA=OT(mr,kA),SA={kernelName:mr,backendName:"cpu",kernelFunc:CA};function EA(e,t,n,r,a,s,o,i,l,u){const c=[r/a,a],p=e.values,d=t.values;if(0===r)return No(n,t.dtype);const h=No(c,t.dtype);h.values.fill(l);for(let e=0;e<s;e++){const s=[];let l=0;for(let t=0;t<o;t++){const n=p[e*o+t];s.push(n),l+=n*i[t]}if(l<0||l>=r/a)throw new Error(`Invalid indices: ${s} does not index into ${n}`);for(let n=0;n<a;n++)u?h.values[l*a+n]+=d[e*a+n]:h.values[l*a+n]=0===t.rank?d[0]:d[e*a+n]}return h}const TA={kernelName:gr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:s}=t,{shape:o}=r,{sliceRank:i,numUpdates:l,sliceSize:u,strides:c,outputSize:p}=hi(0,a,o),d=EA(n.bufferSync(a),n.bufferSync(s),o,p,u,l,i,c,0,!0);return n.makeTensorInfo(o,d.dtype,d.values)}};const $A={kernelName:vr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:a,e:s}=t;TT([r,a,s],"select");const o=r.shape.length,i=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values,c=as(a.dtype,s.dtype),p=Le(ie(a.shape),c);let d=0;const h=0===o||o>1||1===a.shape.length?1:ie(a.shape.slice(1));for(let e=0;e<i.length;e++)for(let t=0;t<h;t++)1===i[e]?p[d++]=l[e]:p[d++]=u[e];return n.makeTensorInfo(a.shape,c,p)}},IA=Qh,NA=ef,OA=NT(br,(e=>e>=0?NA*e:IA*(Math.exp(e)-1))),AA={kernelName:br,backendName:"cpu",kernelFunc:OA},MA=NT(kr,(e=>e<0?-1:e>0?1:0)),_A={kernelName:kr,backendName:"cpu",kernelFunc:MA},RA=NT(wr,(e=>Math.sin(e))),PA={kernelName:wr,backendName:"cpu",kernelFunc:RA},DA=NT(xr,(e=>Math.sinh(e))),LA={kernelName:xr,backendName:"cpu",kernelFunc:DA},BA=Math.log(1.1920928955078125e-7)+2,FA=NT(Sr,(e=>{const t=e>-BA,n=e<BA,r=Math.exp(e);let a;return a=n?r:t?e:Math.log(1+r),a})),zA={kernelName:Sr,backendName:"cpu",kernelFunc:FA};const VA={kernelName:$r,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:s,paddings:o}=r;TT([a],"spaceToBatchND");const i=ie(s),l=[[0,0]];l.push(...o);for(let e=1+s.length;e<a.shape.length;++e)l.push([0,0]);const u=aA.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),c=Xh(u.shape,s,i,!1),p=Kh(c.length,s.length,!1),d=Yh(u.shape,s,i,!1),h=u$({inputs:{x:u},backend:n,attrs:{shape:c}}),f=k$({inputs:{x:h},backend:n,attrs:{perm:p}}),m=u$({inputs:{x:f},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),m}};function WA(e,t,n,r,a,s,o){const i=t[0],l=s[0],u=new Array(l),c=new Array(i),p=t[1];if(0===l){if(0!==i)throw new Error(Ef(i));return[we(n,0),[0,p],we(a,0),u,c]}let d=!0,h=0;const f=new Array(l).fill(0);for(let t=0;t<i;++t){const n=e[t*p];if(n<0)throw new Error(Tf(t,n));if(n>=l)throw new Error($f(t,n,l));++f[n],d=d&&n>=h,h=n}let m=!0;for(let e=0;e<l;++e){const t=0===f[e];u[e]=t,m=m&&!t,f[e]=Math.max(f[e],1),e>0&&(f[e]+=f[e-1])}if(m&&d){const t=e,n=r;for(let e=0;e<i;++e)c[e]=e;return[t,[i,p],n,u,c]}{const t=f[l-1],s=we(n,t*p),d=we(a,t),h=new Array(l).fill(0);for(let t=0;t<i;++t){const n=e[t*p],a=h[n],o=(0===n?0:f[n-1])+a;h[n]++;for(let n=0;n<p;++n)s[o*p+n]=e[t*p+n];d[o]=r[t],c[t]=o}for(let e=0;e<l;++e){if(0===h[e]){const t=0===e?0:f[e-1];s[t*p+0]=e;for(let e=1;e<p;++e)s[t*p+e]=0;d[t]=o}}return[s,[t,p],d,u,c]}}const HA={kernelName:Or,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:s,defaultValue:o}=t;if(1!==s.shape.length)throw new Error(`Dense shape must be a vector, saw:\n        ${s.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n        ${r.shape}`);if(1!==a.shape.length)throw new Error(`Values must be a vector, saw:\n        ${a.shape}`);if(0!==o.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${o.shape}`);const i=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values,c=n.data.get(o.dataId).values[0],[p,d,h,f,m]=WA(i,r.shape,r.dtype,l,a.dtype,u,c);return[n.makeTensorInfo(d,r.dtype,p),n.makeTensorInfo([d[0]],a.dtype,h),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};function jA(e,t,n,r,a){const s=ie(r),o=t[0],i=a.length,l=[];let u=1,c=-1;for(let e=0;e<i;++e){const t=a[e];if(-1===t){if(-1!==c)throw new Error(If(c,e));c=e,l.push(1)}else{if(t<0)throw new Error(Nf(e,t));u*=t,l.push(t)}}if(-1!==c){if(u<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(s/u);if(u*e!==s)throw new Error(Af(r,l));l[c]=e}if(ie(l)!==s)throw new Error(Mf(r,l));const p=r.length,d=[];if(p>0){d[p-1]=1;for(let e=p-2;e>=0;--e)d[e]=d[e+1]*r[e+1]}const h=[];if(i>0){h[i-1]=1;for(let e=i-2;e>=0;--e)h[e]=h[e+1]*l[e+1]}const f=we(n,o*i);for(let t=0;t<o;++t){let n=0;for(let r=0;r<p;++r)n+=e[t*p+r]*d[r];for(let e=0;e<i;++e)f[t*i+e]=Math.trunc(n/h[e]),n%=h[e]}return[f,[o,i],l]}const UA={kernelName:Ar,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:s}=t;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape\n        ${r.shape}`);if(1!==a.shape.length)throw new Error(`Input shape should be a vector but received shape\n        ${a.shape}`);if(1!==s.shape.length)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=Array.from(n.data.get(a.dataId).values),i=n.data.get(r.dataId).values,l=Array.from(n.data.get(s.dataId).values),[u,c,p]=jA(i,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([p.length],s.dtype,new Int32Array(p))]}};function GA(e,t,n,r,a,s=!1,o=0){const i=r.length,l=[t[0],e.length/t[0]],u=l[1],c=i>0?a[i-1]+1:0;if(c<0)throw new Error("segment ids must be >= 0");const p=t.slice();p[0]=c;const d=we(n,p.reduce(((e,t)=>e*t),1));if(0===i)return c>0&&d.fill(o),[d,p];if(c<=0)throw new Error("segment ids must be >= 0");let h=0,f=1,m=0,g=a[h];for(;;){let t=0;if(f<i){if(t=a[f],g===t){++f;continue}if(g>=t)throw new Error("segment ids are not increasing")}if(g<0||g>=c)throw new Error(Pf(g,c));g>m&&d.fill(o,m*u,g*u);for(let t=h;t<f;++t){const n=r[t];if(n<0||n>=l[0])throw new Error(Df(t,r[t],l[0]));for(let t=0;t<u;t++)d[g*u+t]+=e[n*u+t]}if(s)for(let e=0;e<u;e++)d[g*u+e]/=f-h;if(h=f,++f,m=g+1,g=t,f>i)break}return m<c&&d.fill(o,m*u,c*u),[d,p]}const qA={kernelName:Mr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error(`Indices should be a vector but received shape\n          ${a.shape}`);if(1!==s.shape.length)throw new Error(`Segment ids should be a vector but received shape\n          ${s.shape}`);if(a.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,l=n.data.get(s.dataId).values,[u,c]=GA(o,r.shape,r.dtype,i,l,!0);return n.makeTensorInfo(c,r.dtype,u)}};const XA={kernelName:_r,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error(`Indices should be a vector but received shape\n         ${a.shape}`);if(1!==s.shape.length)throw new Error(`Segment ids should be a vector but received shape\n         ${s.shape}`);if(a.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,l=n.data.get(s.dataId).values,[u,c]=GA(o,r.shape,r.dtype,i,l);return n.makeTensorInfo(c,r.dtype,u)}};const KA={kernelName:Rr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:a,sparseValues:s,defaultValue:o}=t,{outputShape:i}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:p,outputSize:d}=hi(0,a,i),h=EA(n.bufferSync(a),n.bufferSync(s),i,d,c,u,l,p,n.data.get(o.dataId).values[0],!1);return n.makeTensorInfo(i,h.dtype,h.values)}};const YA={kernelName:Ir,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:s,axis:o}=r,i=ve(o,a.shape)[0],l=Sf(a,s,i),u=new Array(a.shape.length).fill(0),c=a.shape.slice();return l.map((e=>{const t=[...c];t[i]=e;const r=X$({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[i]+=e,r}))}},JA=UT((e=>Math.sqrt(e))),ZA=NT(Er,(e=>Math.sqrt(e))),QA={kernelName:Er,backendName:"cpu",kernelFunc:ZA},eM={kernelName:Dr,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{const{x:n}=e,r=t;TT(n,"square");const a=r.data.get(n.dataId).values,s=new Float32Array(a.length);for(let e=0;e<a.length;++e){const t=a[e];s[e]=t*t}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},tM=LT(((e,t)=>{const n=e-t;return n*n})),nM=r$(Pr,tM),rM={kernelName:Pr,backendName:"cpu",kernelFunc:nM},aM=NT(Zr,((e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),sM={kernelName:Zr,backendName:"cpu",kernelFunc:aM};function oM(e,t,n,r){const a=No(e,t.dtype);for(let e=0;e<a.size;e++){const s=a.indexToLoc(e),o=new Array(s.length);for(let e=0;e<o.length;e++)o[e]=s[e]*n[e]+r[e];a.set(t.get(...o),...s)}return a}const iM={kernelName:Lr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:s,end:o,strides:i,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:p,shrinkAxisMask:d}=r;TT(a,"stridedSlice");const{finalShapeSparse:h,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:b,end:y,strides:w}=Ni(a.shape,s,o,i,l,u,c,p,d);let x;if(m)x=u$({inputs:{x:a},backend:n,attrs:{shape:f}});else if(g||v){re(a.shape.length>=1,(()=>`Input must have rank at least 1, got: ${a.shape.length}`));const e=gi(b,y,w),t=X$({inputs:{x:a},backend:n,attrs:{begin:b,size:e}});x=u$({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{const e=oM(h,n.bufferSync(a),w,b);x=n.makeTensorInfo(f,e.dtype,e.values)}return x}};class lM{constructor(e,t,n,r,a,s){this.separator=Pa(e),this.nGramWidths=t,this.leftPad=Pa(n),this.rightPad=Pa(r),this.padWidth=a,this.preserveShort=s}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,a,s){for(let o=0;o<a;++o){const i=this.getPadWidth(s),l=Math.max(0,i-o),u=Math.max(0,i-(a-(o+1))),c=s-(l+u),p=t+(l>0?0:o-i);let d=0;d+=l*this.leftPad.length;for(let t=0;t<c;++t)d+=e[p+t].length;d+=u*this.rightPad.length;d+=(l+u+c-1)*this.separator.length,n[r+o]=new Uint8Array(d);const h=n[r+o];let f=0;const m=e=>e.forEach((e=>h[f++]=e));for(let e=0;e<l;++e)m(this.leftPad),m(this.separator);for(let t=0;t<c-1;++t)m(e[p+t]),m(this.separator);if(c>0){m(e[p+c-1]);for(let e=0;e<u;++e)m(this.separator),m(this.rightPad)}else{for(let e=0;e<u-1;++e)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,t){const n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error(`First split value must be 0, got ${e}`);for(let a=1;a<r;++a){let r=t[a]>=e;if(r=r&&t[a]<=n,!r)throw new Error(`Invalid split value ${t[a]}, must be in [${e}, ${n}]`);e=t[a]}if(e!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${e}`)}const a=r-1,s=we("int32",r);if(0===n||0===r){const e=new Array(n);for(let e=0;e<=a;++e)s[e]=0;return[e,s]}s[0]=0;for(let e=1;e<=a;++e){const n=t[e]-t[e-1];let r=0;this.nGramWidths.forEach((e=>{r+=this.getNumNGrams(n,e)})),this.preserveShort&&n>0&&0===r&&(r=1),s[e]=s[e-1]+r}const o=new Array(s[a]);for(let n=0;n<a;++n){const r=t[n];let a=s[n];if(this.nGramWidths.forEach((s=>{const i=t[n+1]-t[n],l=this.getNumNGrams(i,s);this.createNGrams(e,r,o,a,l,s),a+=l})),this.preserveShort&&a===s[n]){const s=t[n+1]-t[n];if(0===s)continue;const i=s+2*this.padWidth,l=1;this.createNGrams(e,r,o,a,l,i)}}return[o,s]}}function uM(e,t,n,r,a,s,o,i){return new lM(n,r,a,s,o,i).compute(e,t)}const cM={kernelName:Br,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:s,leftPad:o,rightPad:i,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:p}=t,d=n.data.get(c.dataId).values,h=n.data.get(p.dataId).values,[f,m]=uM(d,h,a,s,o,i,l,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(p.shape,"int32",m)]}};function pM(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){const a=t[0];let s=e.indexOf(a);for(;-1!==s;){const t=e.subarray(0,s);n&&0===t.length||r.push(t),s=(e=e.subarray(s+1)).indexOf(a)}return void(n&&0===e.length||r.push(e))}let a=0;for(let s=0;s<e.length+1;s++)if(s===e.length||-1!==t.indexOf(e[s])){const t=e.subarray(a,s);n&&0===t.length||r.push(t),a=s+1}}function dM(e,t,n){const r=e.length,a=[];let s=0,o=0;const i=new Array(r);for(let l=0;l<r;++l){const r=a.length;pM(e[l],t,n,a);const u=a.length-r;i[l]=u,s+=u,o=Math.max(o,u)}const l=we("int32",2*s),u=new Array(s),c=[r,o];let p=0;for(let e=0;e<r;++e)for(let t=0;t<i[e];++t)l[2*p]=e,l[2*p+1]=t,u[p]=a[p],++p;return[l,u,c]}const hM={kernelName:Fr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:s,delimiter:o}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(1!==s.shape.length)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(0!==o.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const i=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values[0],[u,c,p]=dM(i,l,a),d=c.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(p))]}};function fM(e,t){const n=we("int32",e.length);for(let r=0;r<e.length;++r)n[r]=Oa(e[r]).modulo(t).getLowBitsUnsigned();return n}const mM={kernelName:zr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:s}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const o=fM(n.data.get(s.dataId).values,a);return n.makeTensorInfo(s.shape,"int32",o)}},gM=NT(Wr,(e=>Math.tan(e))),vM={kernelName:Wr,backendName:"cpu",kernelFunc:gM},bM=NT(Hr,(e=>Math.tanh(e)));function yM(e,t){const n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];const r=No(n,e.dtype);for(let t=0;t<r.values.length;++t){const n=r.indexToLoc(t),a=new Array(e.rank);for(let t=0;t<a.length;t++)a[t]=n[t]%e.shape[t];const s=e.locToIndex(a);r.values[t]=e.values[s]}return r}const wM={kernelName:jr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:s}=r;TT(a,"tile");const o=yM(n.bufferSync(a),s);return n.makeTensorInfo(o.shape,o.dtype,o.values)}},xM=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function kM(e,t,n=0,r=e.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,s=t-n+1,o=Math.log(a),i=.5*Math.exp(2*o/3),l=.5*Math.sqrt(o*i*(a-i)/a)*Math.sign(s-a/2);kM(e,t,Math.max(n,Math.floor(t-s*i/a+l)),Math.min(r,Math.floor(t+(a-s)*i/a+l)))}const a=e[t];let s=n,o=r;for(Q(e,n,t),xM(e[r],a)>0&&Q(e,n,r);s<o;){for(Q(e,s,o),s++,o--;xM(e[s],a)<0;)s+=1;for(;xM(e[o],a)>0;)o-=1}0===xM(e[n],a)?Q(e,n,o):(o+=1,Q(e,o,r)),o<=t&&(n=o+1),t<=o&&(r=o-1)}}function CM(e,t,n,r,a){const s=t[t.length-1],[o,i]=[e.length/s,s],l=ye(n,o*r),u=ye("int32",o*r);for(let t=0;t<o;t++){const n=t*i,s=e.subarray(n,n+i);let o=new Array(s.length);s.forEach(((e,t)=>o[t]={value:e,index:t})),r<o.length&&(kM(o,r),o=o.slice(0,r)),a&&o.sort(xM);const c=t*r,p=l.subarray(c,c+r),d=u.subarray(c,c+r);for(let e=0;e<r;e++)p[e]=o[e].value,d[e]=o[e].index}const c=t.slice();return c[c.length-1]=r,[No(c,n,l),No(c,"int32",u)]}const SM={kernelName:Ur,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:s,sorted:o}=r;TT(a,"topk");const i=n.data.get(a.dataId).values,[l,u]=CM(i,a.shape,a.dtype,s,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}};const EM={kernelName:Gr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{image:a,transforms:s}=t,{interpolation:o,fillMode:i,fillValue:l,outputShape:u}=n,[c,p,d,h]=a.shape,[f,m]=null!=u?u:[p,d],g=[c,f,m,h],v=_e(a.shape),b=v[0],y=v[1],w=v[2],x=ye(a.dtype,ie(g));x.fill(l);const k=r.data.get(a.dataId).values,C=r.data.get(s.dataId).values;for(let e=0;e<c;++e){const t=1===s.shape[0]?C:C.subarray(8*e,8*e+8);for(let n=0;n<f;++n)for(let r=0;r<m;++r)for(let a=0;a<h;++a){let s;const u=t[6]*r+t[7]*n+1;if(0===u)continue;const c=(t[0]*r+t[1]*n+t[2])/u,h=(t[3]*r+t[4]*n+t[5])/u,f=TM(c,d,i),m=TM(h,p,i);switch(o){case"nearest":s=IM(k,p,d,b,y,w,e,m,f,a,l);break;case"bilinear":s=NM(k,p,d,b,y,w,e,m,f,a,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}x[e*b+n*y+r*w+a]=s}return r.makeTensorInfo(g,a.dtype,x)}return{dataId:r.write(x,g,a.dtype),shape:a.shape,dtype:a.dtype}}};function TM(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{const e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return J(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=t-1;n+=t*(Math.trunc(-n/e)+1)}else if(n>t-1)if(t<=1)n=0;else{const e=t-1;n-=t*Math.trunc(n/e)}return J(0,n,t-1)}(e,t);case"nearest":return function(e,t){return J(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function $M(e,t,n,r,a,s,o,i,l,u,c){return 0<=i&&i<t&&0<=l&&l<n?e[o*r+i*a+l*s+u]:c}function IM(e,t,n,r,a,s,o,i,l,u,c){return $M(e,t,n,r,a,s,o,Math.round(i),Math.round(l),u,c)}function NM(e,t,n,r,a,s,o,i,l,u,c){const p=Math.floor(i),d=Math.floor(l),h=p+1,f=d+1;return(h-i)*((f-l)*$M(e,t,n,r,a,s,o,p,d,u,c)+(l-d)*$M(e,t,n,r,a,s,o,p,f,u,c))+(i-p)*((f-l)*$M(e,t,n,r,a,s,o,h,d,u,c)+(l-d)*$M(e,t,n,r,a,s,o,h,f,u,c))}function OM(e,t,n,r){const a=ve(t,n)[0],s=[1,n[0],1];for(let e=0;e<a;e++)s[0]*=n[e];s[1]=n[a];for(let e=a+1;e<n.length;e++)s[2]*=n[e];const o={},i=new Int32Array(n[a]),l=new Ua(s,r,e),u=[],c=1===s[0]&&1===s[2];for(let t=0;t<n[a];t++){let n;if(c)n=e[t].toString();else{const e=[];for(let n=0;n<s[0];n++)for(let r=0;r<s[2];r++)e.push(l.get(n,t,r));n=e.join(",")}if(void 0!==o[n])i[t]=o[n];else{const e=Object.keys(o).length;o[n]=e,i[t]=e,u.push(t)}}const p=s.slice();p[1]=Object.keys(o).length;const d=new Ua(p,r);u.forEach(((e,t)=>{for(let n=0;n<s[0];n++)for(let r=0;r<s[2];r++)d.set(l.get(n,e,r),n,t,r)}));const h=n.slice();return h[a]=p[1],{outputValues:d.values,outputShape:h,indices:i}}const AM={kernelName:Xr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:s}=t;TT(s,"unique");const o=r.data.get(s.dataId).values,{outputValues:i,outputShape:l,indices:u}=OM(o,a,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,i),r.makeTensorInfo([u.length],"int32",u)]}};const MM={kernelName:Kr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:a}=t;let{axis:s}=r;s<0&&(s+=a.shape.length);const o=a.shape.length,i=a.shape[s],l=new Array(o-1);let u=0;for(let e=0;e<o;e++)e!==s&&(l[u++]=a.shape[e]);const c=new Array(o).fill(0),p=a.shape.slice();p[s]=1;const d=new Array(i);for(let e=0;e<d.length;e++){c[s]=e;const t=X$({inputs:{x:a},backend:n,attrs:{begin:c,size:p}});d[e]=u$({inputs:{x:t},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(t)}return d}};const _M={kernelName:Yr,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:s}=t,{numSegments:o}=r;TT(a,"unsortedSegmentSum");const i=[],l=[],u=a.shape.length-s.shape.length;let c=s;for(let e=0;e<u;++e){const t=aN({inputs:{input:c},backend:n,attrs:{dim:e+1}});c=t,l.push(t)}for(let e=0;e<o;++e){const t=Aa(e,"int32"),r=n.makeTensorInfo([],"int32",t),s=UI({inputs:{a:r,b:c},backend:n}),o=t$({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),u=BI({inputs:{a:o,b:a},backend:n}),p=zI({inputs:{x:u},backend:n,attrs:{axis:0,keepDims:!1}});i.push(p),l.push(r),l.push(s),l.push(o),l.push(u),l.push(p)}const p=nA({inputs:i,backend:n,attrs:{axis:0}});return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),p}},RM=[h$,m$,v$,y$,l$,w$,S$,E$,T$,$$,N$,A$,_$,D$,B$,W$,H$,j$,U$,d$,G$,Y$,Q$,eI,n$,rI,sI,JT,oI,pI,hI,fI,mI,gI,vI,bI,wI,kI,CI,SI,EI,TI,$I,NI,OI,AI,MI,_I,RI,PI,WI,MT,HI,GI,eN,rN,sN,lN,yN,xN,kN,EN,IN,NN,ON,MN,RN,LN,zN,RT,VN,uI,HN,UN,qN,DT,YN,QN,tO,aO,oO,uO,pO,fO,mO,gO,yO,kO,CO,SO,EO,TO,$O,IO,NO,MO,_O,DO,zO,FI,WO,jO,GO,XO,JO,ZO,tA,rA,aA,iA,zT,uA,pA,e$,pN,hA,WT,jT,c$,fA,mA,gA,vA,bA,yA,xA,SA,TA,$A,AA,XT,_A,PA,LA,K$,FO,zA,VA,HA,UA,qA,XA,KA,YA,QA,eM,rM,sM,iM,cM,hM,mM,mN,VI,vM,{kernelName:Hr,backendName:"cpu",kernelFunc:bM},wM,SM,EM,C$,AM,MM,_M,eA];for(const e of RM)pa(e);const PM={},DM={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function LM(e,t){if(!(e in PM)||null!=t){const n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==t?function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;if(n.addEventListener("webglcontextlost",(t=>{t.preventDefault(),delete PM[e]}),!1),1===e)return n.getContext("webgl",DM)||n.getContext("experimental-webgl",DM);return n.getContext("webgl2",DM)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;PM[e]=n}const n=PM[e];return null==n||n.isContextLost()?(delete PM[e],LM(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),PM[e])}var BM,FM,zM;function VM(e,t){return[t,e]}function WM(e){const t=ie(e);return de(Math.ceil(t/4))}function HM(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function jM(e,t){const n=e;let r,a,s,o,i,l,u,c,p,d;return 2===Ge().getNumber("WEBGL_VERSION")?(r=n.R32F,a=n.R16F,s=n.RGBA16F,o=n.RGBA32F,i=n.RED,u=4,c=1,p=n.HALF_FLOAT,d=n.FLOAT,l=n.RGBA8):(r=e.RGBA,a=e.RGBA,s=e.RGBA,o=n.RGBA,i=e.RGBA,u=4,c=4,p=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT,l=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:o,textureFormatFloat:i,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:p,textureTypeFloat:d}}function UM(e,t){const n=t();return Ge().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(BM||(BM={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(FM||(FM={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(zM||(zM={}));function GM(e){return!!(Ge().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function qM(e,t){return n_(e,(()=>e.getExtension(t)),'Extension "'+t+'" not supported on this browser.')}const XM=/ERROR: [0-9]+:([0-9]+):/g;function KM(e,t){const n=XM.exec(t);if(null==n)return console.log(`Couldn't parse line number in error: ${t}`),void console.log(e);const r=+n[1],a=e.split("\n"),s=a.length.toString().length+2,o=a.map(((e,t)=>fe((t+1).toString(),s)+e));let i=0;for(let e=0;e<o.length;e++)i=Math.max(o[e].length,i);const l=o.slice(0,r-1),u=o.slice(r-1,r),c=o.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log(`%c ${fe(u[0],i)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join("\n"))}function YM(e,t){if(UM(e,(()=>e.validateProgram(t))),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function JM(e,t,n,r,a,s,o){const i=e.getAttribLocation(t,n);return-1!==i&&(UM(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,r))),UM(e,(()=>e.vertexAttribPointer(i,a,e.FLOAT,!1,s,o))),UM(e,(()=>e.enableVertexAttribArray(i))),!0)}function ZM(e,t,n,r){UM(e,(()=>function(e,t,n){r_(e,n),UM(e,(()=>e.activeTexture(e.TEXTURE0+n))),UM(e,(()=>e.bindTexture(e.TEXTURE_2D,t)))}(e,t,r))),UM(e,(()=>e.uniform1i(n,r)))}function QM(e,t,n){UM(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,n))),UM(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)))}function e_(e,t){UM(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,t))),UM(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)))}function t_(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}(e,t))}function n_(e,t,n){const r=UM(e,(()=>t()));if(null==r)throw new Error(n);return r}function r_(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){throw new Error(`textureUnit must be in ${`[gl.TEXTURE0, gl.TEXTURE${n}]`}.`)}}function a_(e,t=2){return ie(e.slice(0,e.length-t))}function s_(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function o_(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[a_(e),...s_(e)]),t}function i_(e){return e%2==0}function l_(e,t){if(ue(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(i_(n)&&i_(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&i_(e[0])&&i_(t[0])}let u_,c_;function p_(e,t){return null!=e.getExtension(t)}function d_(e){try{if(null!=LM(e))return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function h_(e){if(0===e)return!1;const t=LM(e);if(1!==e){if(p_(t,"EXT_color_buffer_float"))return f_(t);const e="EXT_color_buffer_half_float";if(p_(t,e)){const n=t.getExtension(e);return function(e,t){const n=jM(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const a=1,s=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,s,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),i}(t,n)}return!1}if(!p_(t,"OES_texture_float"))return!1;if(!p_(t,"WEBGL_color_buffer_float"))return!1;return f_(t)}function f_(e){const t=jM(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function m_(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&re("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the WebGL backend.`))}))}const g_=Ge();function v_(){let e,t,n,r,a,s,o,i,l,u;return 2===Ge().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",s="outputColor",o="out vec4 outputColor;",i="\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",l="",u="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",s="gl_FragColor",o="",i="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",u="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:s,defineOutput:o,defineSpecialNaN:i,defineSpecialInf:l,defineRound:u}}function b_(e,t,n="index"){const r=_e(t);return r.map(((t,a)=>`${`int ${e[a]} = ${n} / ${t}`}; ${a===r.length-1?`int ${e[a+1]} = ${n} - ${e[a]} * ${t}`:`index -= ${e[a]} * ${t}`};`)).join("")}function y_(e,t,n="index"){const r=_e(t);return r.map(((t,a)=>`${`int ${e[a]} = ${n} / outShapeStrides[${a}]`}; ${a===r.length-1?`int ${e[a+1]} = ${n} - ${e[a]} * outShapeStrides[${a}]`:`index -= ${e[a]} * outShapeStrides[${a}]`};`)).join("")}function w_(e,t,n="index"){const r=function(e,t){const n=e.length,r=e.map((e=>`${t}[${e}]`)),a=new Array(n-1);a[n-2]=r[n-1];for(let e=n-3;e>=0;--e)a[e]=`(${a[e+1]} * ${r[e+1]})`;return a}(e.map(((e,t)=>t)),t);return r.map(((t,a)=>`${`int ${e[a]} = ${n} / ${r[a]}`}; ${a===r.length-1?`int ${e[a+1]} = ${n} - ${e[a]} * ${r[a]}`:`index -= ${e[a]} * ${r[a]}`};`)).join("")}function x_(e){const t=_e(e).map((e=>e.toString()));return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;\n  }\n`}g_.registerFlag("HAS_WEBGL",(()=>g_.getNumber("WEBGL_VERSION")>0)),g_.registerFlag("WEBGL_VERSION",(()=>d_(2)?2:d_(1)?1:0)),g_.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(()=>!1)),g_.registerFlag("WEBGL_BUFFER_SUPPORTED",(()=>2===g_.get("WEBGL_VERSION"))),g_.registerFlag("WEBGL_CPU_FORWARD",(()=>!0)),g_.registerFlag("WEBGL_FORCE_F16_TEXTURES",(()=>!1)),g_.registerFlag("WEBGL_PACK",(()=>g_.getBool("HAS_WEBGL"))),g_.registerFlag("WEBGL_PACK_NORMALIZATION",(()=>g_.getBool("WEBGL_PACK"))),g_.registerFlag("WEBGL_PACK_CLIP",(()=>g_.getBool("WEBGL_PACK"))),g_.registerFlag("WEBGL_PACK_DEPTHWISECONV",(()=>g_.getBool("WEBGL_PACK"))),g_.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(()=>g_.getBool("WEBGL_PACK"))),g_.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(()=>g_.getBool("WEBGL_PACK"))),g_.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(()=>g_.getBool("WEBGL_PACK"))),g_.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(()=>g_.getBool("WEBGL_PACK"))),g_.registerFlag("WEBGL_PACK_REDUCE",(()=>g_.getBool("WEBGL_PACK"))),g_.registerFlag("WEBGL_LAZILY_UNPACK",(()=>g_.getBool("WEBGL_PACK"))),g_.registerFlag("WEBGL_CONV_IM2COL",(()=>g_.getBool("WEBGL_PACK"))),g_.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(()=>function(e){if(null==u_){const t=LM(e);u_=t.getParameter(t.MAX_TEXTURE_SIZE)}return u_}(g_.getNumber("WEBGL_VERSION")))),g_.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(()=>function(e){if(null==c_){const t=LM(e);c_=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,c_)}(g_.getNumber("WEBGL_VERSION")))),g_.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(()=>{const e=g_.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=LM(e);return t=p_(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:p_(n,"EXT_disjoint_timer_query")?1:0,t}(e)})),g_.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(()=>g_.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!ys())),g_.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(()=>function(e){if(0===e)return!1;const t=LM(e);if(1===e){if(!p_(t,"OES_texture_float"))return!1}else if(!p_(t,"EXT_color_buffer_float"))return!1;return f_(t)}(g_.getNumber("WEBGL_VERSION")))),g_.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(()=>!g_.getBool("WEBGL_FORCE_F16_TEXTURES")&&g_.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))),g_.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(()=>h_(g_.getNumber("WEBGL_VERSION")))),g_.registerFlag("WEBGL_FENCE_API_ENABLED",(()=>{return 2===(e=g_.getNumber("WEBGL_VERSION"))&&null!=LM(e).fenceSync;var e})),g_.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(()=>g_.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0)),g_.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(()=>-1),(e=>{if(e<0&&-1!==e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)})),g_.registerFlag("WEBGL_FLUSH_THRESHOLD",(()=>ys()?1:-1),(e=>{if(e<0&&-1!==e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)})),g_.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(()=>128)),g_.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(()=>!1)),g_.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e5)),g_.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(()=>128));const k_="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:C_}=v;function S_(e,t,n){const r=[];if(e.forEach((e=>{const t=ie(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push(`uniform float ${e.name}${t>1?`[${t}]`:""};`):(r.push(`uniform sampler2D ${e.name};`),r.push(`uniform int offset${e.name};`)),n.enableShapeUniforms){const{uniformShape:t}=P_(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:r.push(`uniform int ${e.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${e.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${e.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${e.name}Shape;`)}r.push(`uniform ivec2 ${e.name}TexShape;`)}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((e=>{r.push(`uniform ${e.type} ${e.name}${e.arrayIndex?`[${e.arrayIndex}]`:""};`)}));const a=r.join("\n"),s=e.map((e=>function(e,t,n=!1,r){let a="";a+=n?T_(e,r):E_(e,r);const s=e.shapeInfo.logicalShape,o=t.logicalShape;s.length<=o.length&&(a+=n?function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",s=e.shapeInfo.logicalShape.length,o=t.logicalShape.length,i=C_(e.shapeInfo.logicalShape,t.logicalShape),l=R_(o),u=o-s;let c;const p=["x","y","z","w","u","v"];c=0===s?"":o<2&&i.length>=1?"coords = 0;":i.map((e=>`coords.${p[e+u]} = 0;`)).join("\n");let d="";d=o<2&&s>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${p[t+u]}`)).join(", ");let h="return outputValue;";const f=1===ie(e.shapeInfo.logicalShape),m=1===ie(t.logicalShape);if(1!==s||f||m){if(f&&!m)h=1===o?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(i.length){const e=s-2,t=s-1;i.indexOf(e)>-1&&i.indexOf(t)>-1?h="return vec4(outputValue.x);":i.indexOf(e)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":i.indexOf(t)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}}else h="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${a}() {\n      ${l} coords = getOutputCoords();\n      ${c}\n      vec4 outputValue = get${r}(${d});\n      ${h}\n    }\n  `}(e,t):function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",s=t.texShape,o=e.shapeInfo.texShape,i=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&i===l&&null==e.shapeInfo.flatOffset&&ue(o,s))return`\n      float ${a}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;const u=R_(l),c=C_(e.shapeInfo.logicalShape,t.logicalShape),p=l-i;let d;const h=["x","y","z","w","u","v"];d=0===i?"":l<2&&c.length>=1?"coords = 0;":c.map((e=>`coords.${h[e+p]} = 0;`)).join("\n");let f="";f=l<2&&i>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${h[t+p]}`)).join(", ");return`\n    float ${a}() {\n      ${u} coords = getOutputCoords();\n      ${d}\n      return get${r}(${f});\n    }\n  `}(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms))).join("\n"),o=t.texShape,i=v_(),l=function(e){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${e.texture2D}(textureSampler, uv).r;\n    }\n  `}(i);let u,c,p=function(e){return`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFs} vec2 resultUV;\n    ${e.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${e.defineSpecialNaN}\n    ${e.defineSpecialInf}\n    ${e.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${$_}\n    ${I_}\n    ${N_}\n  `}(i);t.isPacked?(u=function(e,t,n){switch(e.length){case 0:return A_();case 1:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${r[1]}.0);\n      }\n    `;if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${r[0]}.0);\n      }\n    `;if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);\n    }\n  `}(0,t,n);case 2:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(ue(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));\n      }\n    `;const a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n      int r = 2 * (index / ${a});\n      int c = imod(index, ${a}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),s=a*Math.ceil(e[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      int b = index / ${s};\n      index -= b * ${s};\n\n      int r = 2 * (index / ${a});\n      int c = imod(index, ${a}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),s=a*Math.ceil(e[e.length-2]/2);let o=s,i="",l="b, r, c";for(let t=2;t<e.length-1;t++)o*=e[e.length-t-1],i=`\n      int b${t} = index / ${o};\n      index -= b${t} * ${o};\n    `+i,l=`b${t}, `+l;return`\n    ivec${e.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      ${i}\n\n      int b = index / ${s};\n      index -= b * ${s};\n\n      int r = 2 * (index / ${a});\n      int c = imod(index, ${a}) * 2;\n\n      return ivec${e.length}(${l});\n    }\n  `}(e,t,n)}}(t.logicalShape,o,n.enableShapeUniforms),c=function(e){return`\n    void setOutput(vec4 val) {\n      ${e.output} = val;\n    }\n  `}(i)):(u=function(e,t,n){switch(e.length){case 0:return A_();case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.x * ${t[1]}.0);\n      }\n    `;if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.y * ${t[0]}.0);\n      }\n    `;if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      return resTexRC.x * ${t[1]} + resTexRC.y;\n    }\n  `}(0,t,n);case 2:return function(e,t,n){if(ue(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\n      }\n    `;if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `;if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `;if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      int r = index / ${e[1]};\n      int c = index - r * ${e[1]};\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n){return`\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ${y_(["r","c","d"],e)}\n    return ivec3(r, c, d);\n  }\n`}const r=b_(["r","c","d"],e);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec3(r, c, d);\n    }\n  `}(e,t,n);case 4:return function(e,t,n){if(n){return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ${y_(["r","c","d","d2"],e)}\n      return ivec4(r, c, d, d2);\n    }\n  `}const r=b_(["r","c","d","d2"],e);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec4(r, c, d, d2);\n    }\n  `}(e,t,n);case 5:return function(e,t){const n=b_(["r","c","d","d2","d3"],e);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},\n                             ${t[1]}));\n\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(e,t);case 6:return function(e,t){const n=b_(["r","c","d","d2","d3","d4"],e);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}(t.logicalShape,o,n.enableShapeUniforms),c=function(e){return`\n    void setOutput(float val) {\n      ${e.output} = vec4(val, 0, 0, 0);\n    }\n  `}(i)),n.packedInputs&&(p+=O_);return[p,l,c,a,u,s,n.userCode].join("\n")}function E_(e,t=!1){const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[a,s]=e.shapeInfo.texShape;if(1===a&&1===s)return`\n      float ${r}() {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const o=M_(n);if(t)return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});\n      return sampleTexture(${n}, uv);\n    }\n  `;const[i,l]=e.shapeInfo.texShape;return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${i}, ${l}, ${o});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`\n      float ${r}(int index) {\n        ${__(e)}\n      }\n    `;const a=e.shapeInfo.texShape,s=a[0],o=a[1];if(1===o&&1===s)return`\n      float ${r}(int index) {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const i=M_(n);if(1===o)return t?`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${i}) + 0.5) / float(${n}TexShape[0]));\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${i}) + 0.5) / ${s}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(1===s)return t?`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${i}) + 0.5) / float(${n}TexShape[1]), 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${i}) + 0.5) / ${o}.0, 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(t)return`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${i});\n      return sampleTexture(${n}, uv);\n    }\n  `;return`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${s}, ${o}, index + ${i});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e.shapeInfo.texShape;if(null!=s&&ue(n,s)){if(t)return`\n      float ${a}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `;const e=s[0];return`\n    float ${a}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${s[1]}.0, ${e}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `}const{newShape:o,keptDims:i}=be(n),l=o;if(l.length<n.length){const n=["row","col"];return`\n      ${E_(D_(e,l),t)}\n      float ${a}(int row, int col) {\n        return ${a}(${L_(n,i)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${a}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));\n        ${__(e)}\n      }\n    `;const u=s[0],c=s[1],p=M_(r);if(1===c)return t?`\n      float ${a}(int row, int col) {\n        float index = dot(vec3(row, col, ${p}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${a}(int row, int col) {\n      float index = dot(vec3(row, col, ${p}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;if(1===u)return t?`\n      float ${a}(int row, int col) {\n        float index = dot(vec3(row, col, ${p}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${a}(int row, int col) {\n      float index = dot(vec3(row, col, ${p}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);\n      return sampleTexture(${r}, uv);\n    }\n  `;if(t)return`\n      float ${a}(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${r}Shape[1] + col + ${p};\n        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n        return sampleTexture(${r}, uv);\n      }\n    `;return`\n  float ${a}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${n[1]} + col + ${p};\n    vec2 uv = uvFromFlat(${u}, ${c}, index);\n    return sampleTexture(${r}, uv);\n  }\n`}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[1]*n[2],o=n[2],{newShape:i,keptDims:l}=be(n),u=i;if(u.length<n.length){const n=["row","col","depth"];return`\n        ${E_(D_(e,u),t)}\n        float ${a}(int row, int col, int depth) {\n          return ${a}(${L_(n,l)});\n        }\n      `}if(e.shapeInfo.isUniform)return`\n      float ${a}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${s}, ${o}, 1)));\n        ${__(e)}\n      }\n    `;const c=e.shapeInfo.texShape,p=c[0],d=c[1],h=e.shapeInfo.flatOffset;if(d===s&&null==h)return t?`\n      float ${a}(int row, int col, int depth) {\n        int stride1 = ${r}Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n        float ${a}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${o}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${d}.0, ${p}.0);\n          return sampleTexture(${r}, uv);\n        }\n      `;if(d===o&&null==h)return t?`\n      float ${a}(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${a}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${p}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;const f=M_(r);if(t)return`\n    float ${a}(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ${r}Shape[1] * ${r}Shape[2];\n      int stride1 = ${r}Shape[2];\n      int index = row * ${s} + col * ${o} + depth + ${f};\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n      return sampleTexture(${r}, uv);\n    }\n    `;return`\n      float ${a}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${s} + col * ${o} + depth + ${f};\n        vec2 uv = uvFromFlat(${p}, ${d}, index);\n        return sampleTexture(${r}, uv);\n      }\n  `}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[3],o=n[2]*s,i=n[1]*o,{newShape:l,keptDims:u}=be(n);if(l.length<n.length){const n=["row","col","depth","depth2"];return`\n      ${E_(D_(e,l),t)}\n      float ${a}(int row, int col, int depth, int depth2) {\n        return ${a}(${L_(n,u)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${a}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${i}, ${o}, ${s}, 1)));\n        ${__(e)}\n      }\n    `;const c=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,d=p[0],h=p[1],f=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(h===i&&null==c)return t?`\n      float ${a}(int row, int col, int depth, int depth2) {\n        ${f}\n        ${m}\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${a}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${o}, ${s}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${h}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;if(h===s&&null==c)return t?`\n      float ${a}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${a}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${n[1]*n[2]}, ${n[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${h}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;const v=M_(r);if(t)return`\n    float ${a}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ${f}\n      ${m}\n      ${g}\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${v});\n      return sampleTexture(${r}, uv);\n    }\n  `;return`\n    float ${a}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${i} + col * ${o} +\n          depth * ${s} + depth2;\n      vec2 uv = uvFromFlat(${d}, ${h}, index + ${v});\n      return sampleTexture(${r}, uv);\n    }\n  `}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],s=t[3]*a,o=t[2]*s,i=t[1]*o,{newShape:l,keptDims:u}=be(t);if(l.length<t.length){const t=["row","col","depth","depth2","depth3"];return`\n      ${E_(D_(e,l))}\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        return ${r}(${L_(t,u)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${i}, ${o}, ${s}, ${a})) +\n          depth3;\n        ${__(e)}\n      }\n    `;const c=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,d=p[0],h=p[1];if(h===i&&null==c)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${o}, ${s}, ${a}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${h}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(h===a&&null==c)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]},\n               ${t[2]*t[3]}, ${t[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${h}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const f=M_(n);return`\n    float ${r}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${i} + col * ${o} + depth * ${s} +\n          depth2 * ${a} + depth3 + ${f};\n      vec2 uv = uvFromFlat(${d}, ${h}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:a,keptDims:s}=be(t);if(a.length<t.length){const t=["row","col","depth","depth2","depth3","depth4"];return`\n      ${E_(D_(e,a))}\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${r}(${L_(t,s)});\n      }\n    `}const o=t[5],i=t[4]*o,l=t[3]*i,u=t[2]*l,c=t[1]*u;if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${c}, ${u}, ${l}, ${i})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${o}, 1)));\n        ${__(e)}\n      }\n    `;const p=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],f=d[1];if(f===c&&null==p)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${u}, ${l}, ${i}, ${o})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${h}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(f===o&&null==p)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]*t[4]},\n               ${t[2]*t[3]*t[4]},\n               ${t[3]*t[4]},\n               ${t[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${h}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const m=M_(n);return`\n    float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${c} + col * ${u} + depth * ${l} +\n          depth2 * ${i} + depth3 * ${o} + depth4 + ${m};\n      vec2 uv = uvFromFlat(${h}, ${f}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function T_(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=v_();return`\n    vec4 ${n}() {\n      return ${r.texture2D}(${t}, halfCR);\n    }\n  `}(e);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,s=v_();if(t)return`\n    vec4 ${r}(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ${s.texture2D}(${n}, uv);\n    }\n  `;const o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return`\n    vec4 ${r}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${o[0]}, ${o[1]}, index);\n      return ${s.texture2D}(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e.shapeInfo.texShape,o=s[0],i=s[1],l=v_();if(null!=s&&ue(n,s))return t?`\n      vec4 ${a}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n\n        return ${l.texture2D}(${r}, uv);\n      }\n    `:`\n      vec4 ${a}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}.0, ${o}.0);\n\n        return ${l.texture2D}(${r}, uv);\n      }\n    `;if(t)return`\n    vec4 ${a}(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ${l.texture2D}(${r}, uv);\n    }\n  `;const u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=Math.ceil(n[1]/2);return`\n    vec4 ${a}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);\n      return ${l.texture2D}(${r}, uv);\n    }\n  `}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e.shapeInfo.texShape,o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(1===n[0]){const r=[1,2],s=["b","row","col"];return`\n        ${T_(D_(e,n.slice(1)),t)}\n        vec4 ${a}(int b, int row, int col) {\n          return ${a}(${L_(s,r)});\n        }\n      `}const i=v_();if(t)return`\n    vec4 ${a}(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ${i.texture2D}(${r}, uv);\n    }\n  `;const l=o[0],u=o[1],c=Math.ceil(n[2]/2),p=c*Math.ceil(n[1]/2);return`\n    vec4 ${a}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${l}, ${u}, ${p}, ${c}, b, row, col);\n      return ${i.texture2D}(${r}, uv);\n    }\n  `}(e,t);default:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=v_();if(t)return`\n    vec4 ${r}(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ${n}Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${a.texture2D}(${n}, uv);\n    }\n  `;const s=e.shapeInfo.logicalShape,o=s.length,i=e.shapeInfo.texShape,l=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=l[0],c=l[1],p=Math.ceil(s[o-1]/2);let d=p*Math.ceil(s[o-2]/2),h="int b, int row, int col",f=`b * ${d} + (row / 2) * ${p} + (col / 2)`;for(let e=2;e<o-1;e++)h=`int b${e}, `+h,d*=s[o-e-1],f=`b${e} * ${d} + `+f;return`\n    vec4 ${r}(${h}) {\n      int index = ${f};\n      int texR = index / ${c};\n      int texC = index - texR * ${c};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});\n      return ${a.texture2D}(${n}, uv);\n    }\n  `}(e,t)}}const $_="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",I_="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",N_="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",O_="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function A_(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function M_(e){return`offset${e}`}function __(e){const t=e.name,n=ie(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${t}[i];\n      }\n    }\n  `}function R_(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function P_(e,t,n){const{newShape:r,keptDims:a}=be(t),s=t.length,o=e&&3===s&&1===t[0],i=o?t.slice(1):r,l=!e&&s>1&&!ue(t,n)&&r.length<s||o;return{useSqueezeShape:l,uniformShape:l?i:t,keptDims:a}}function D_(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function L_(e,t){return t.map((t=>e[t])).join(", ")}function B_(e,t,n,r){const a=n.map(((e,n)=>{const r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),s=a.map((e=>e.shapeInfo)),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},i=S_(a,o,t),l=function(e,t){const n=n_(e,(()=>e.createShader(e.FRAGMENT_SHADER)),"Unable to create fragment WebGLShader.");if(UM(e,(()=>e.shaderSource(n,t))),UM(e,(()=>e.compileShader(n))),Ge().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw KM(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,i),u=e.createProgram(l);return Ge().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:i,webGLProgram:u,inShapeInfos:s,outShapeInfo:o,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:l,source:i,webGLProgram:u,inShapeInfos:s,outShapeInfo:o},F_(e,t,u))}function F_(e,t,n){const r={},a={},s={},o=[];let i,l,u,c=null,p=null;p=e.getUniformLocation(n,"NAN",!1),1===Ge().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(n,"INFINITY",!1));const d=!1;for(let o=0;o<t.variableNames.length;o++){const i=t.variableNames[o];r[i]=e.getUniformLocation(n,i,d),r[`offset${i}`]=e.getUniformLocation(n,`offset${i}`,d),t.enableShapeUniforms&&(a[`${i}Shape`]=e.getUniformLocation(n,`${i}Shape`,d),s[`${i}TexShape`]=e.getUniformLocation(n,`${i}TexShape`,d))}return t.enableShapeUniforms&&(i=e.getUniformLocation(n,"outShape",d),u=e.getUniformLocation(n,"outShapeStrides",d),l=e.getUniformLocation(n,"outTexShape",d)),t.customUniforms&&t.customUniforms.forEach(((t,r)=>{o[r]=e.getUniformLocation(n,t.name,d)})),{uniformLocations:r,customUniformLocations:o,infLoc:c,nanLoc:p,inShapesLocations:a,inTexShapesLocations:s,outShapeLocation:i,outShapeStridesLocation:u,outTexShapeLocation:l}}function z_(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach(((e,n)=>{const r=e.logicalShape,a=t[n],s=a.shape;if(!ue(r,s))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${s} must match`);if(e.isUniform&&a.isUniform)return;const o=e.texShape,i=a.isUniform?null:a.texData.texShape;if(!ue(o,i))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${i} must match`)}))}function V_(e){return Ge().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class W_{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=BM.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=v_();this.outputShape=e,this.enableShapeUniforms=V_(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?y_(["r","c","d"],e):b_(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${t.output} = result;\n      }\n    `}}class H_{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=BM.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=v_();this.outputShape=e,this.enableShapeUniforms=V_(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?y_(["r","c","d"],e):b_(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${t.output} = result;\n      }\n    `}}class j_{constructor(e){this.variableNames=["A"],this.outTexUsage=FM.DOWNLOAD;const t=v_();this.outputShape=e,this.userCode=`\n      ${k_}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${t.output} = encode_float(x);\n      }\n    `}}class U_{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=FM.DOWNLOAD;const t=v_();this.outputShape=e,this.userCode=`\n      ${k_}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${t.output} = encode_float(x);\n      }\n    `}}class G_{constructor(e,t=!1){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=v_();this.outputShape=e,this.enableShapeUniforms=V_(this.outputShape.length);let r="result";t&&(r="floor(result * 255. + 0.5)"),this.userCode=`\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":x_(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ${n.texture2D}(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ${n.output} = vec4(${r}, 0., 0., 0.);\n      }\n    `}}class q_{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=v_();this.outputShape=e,this.enableShapeUniforms=V_(this.outputShape.length);let r="",a="result";t&&(a="floor(result * 255. + 0.5)");for(let t=0;t<=1;t++)for(let a=0;a<=1;a++){const s=2*t+a;r+=`\n          localCoords = coords;\n          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {\n          localCoords[2] += ${a};\n          if (localCoords[1] + ${t} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {\n            localCoords[1] += ${t};\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ${n.texture2D}(A, uv);\n\n            if (offset == 0) {\n              result[${s}] = values[0];\n            } else if (offset == 1) {\n              result[${s}] = values[1];\n            } else if (offset == 2) {\n              result[${s}] = values[2];\n            } else {\n              result[${s}] = values[3];\n            }\n          }\n        }\n        `}this.userCode=`\n        ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":x_(e)}\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ${r}\n\n          ${n.output} = ${a};\n        }\n    `}}function X_(e){const t=v_();return function(e,t){const n=n_(e,(()=>e.createShader(e.VERTEX_SHADER)),"Unable to create vertex WebGLShader.");if(UM(e,(()=>e.shaderSource(n,t))),UM(e,(()=>e.compileShader(n))),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,`${t.version}\n    precision highp float;\n    ${t.attribute} vec3 clipSpacePos;\n    ${t.attribute} vec2 uv;\n    ${t.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}function K_(e){return function(e,t){const n=n_(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return UM(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),UM(e,(()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Y_(e){return function(e,t){const n=n_(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return UM(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n))),UM(e,(()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Uint16Array([0,1,2,2,1,3]))}function J_(e,t,n,r,a,s){!function(e,t){const n=Ge().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error(`Requested texture size [${e}x${t}] is invalid.`);if(e>n||t>n)throw new Error(`Requested texture size [${e}x${t}] greater than WebGL maximum on this browser / GPU [${n}x${n}].`)}(t,n);const o=function(e){return n_(e,(()=>e.createTexture()),"Unable to create WebGLTexture.")}(e),i=e.TEXTURE_2D;return UM(e,(()=>e.bindTexture(i,o))),UM(e,(()=>e.texParameteri(i,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE))),UM(e,(()=>e.texParameteri(i,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))),UM(e,(()=>e.texParameteri(i,e.TEXTURE_MIN_FILTER,e.NEAREST))),UM(e,(()=>e.texParameteri(i,e.TEXTURE_MAG_FILTER,e.NEAREST))),1===Ge().getNumber("WEBGL_VERSION")?UM(e,(()=>e.texImage2D(i,0,r,t,n,0,a,s,null))):UM(e,(()=>e.texStorage2D(i,1,r,t,n))),UM(e,(()=>e.bindTexture(e.TEXTURE_2D,null))),{texture:o,texShape:[n,t]}}function Z_(e){return e.internalFormatFloat}function Q_(e){return e.internalFormatHalfFloat}function eR(e){return e.downloadTextureFormat}function tR(e){return e.internalFormatPackedFloat}function nR(e){return e.internalFormatPackedHalfFloat}function rR(e,t,n,r,a,s,o,i){const l=e,u=new Float32Array(function(e,t){const[n,r]=HM(e,t);return n*r*4}(s,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}class aR{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const t=Ge().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,function(e,t){PM[e]=t}(t,e)):this.gl=LM(t);let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===Ge().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=qM(this.gl,e),p_(this.gl,t))this.textureHalfFloatExtension=qM(this.gl,t);else if(Ge().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),p_(this.gl,r))this.colorBufferHalfFloatExtension=qM(this.gl,r);else if(Ge().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",p_(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!p_(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=K_(this.gl),this.indexBuffer=Y_(this.gl),this.framebuffer=function(e){return n_(e,(()=>e.createFramebuffer()),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=jM(this.gl,this.textureHalfFloatExtension)}get debug(){return Ge().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;UM(e,(()=>e.finish())),UM(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,null))),UM(e,(()=>e.deleteFramebuffer(this.framebuffer))),UM(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,null))),UM(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null))),UM(e,(()=>e.deleteBuffer(this.indexBuffer))),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,s]=VM(t,n);return J_(e,a,s,Z_(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,s]=VM(t,n);return J_(e,a,s,Q_(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,s]=VM(t,n);return J_(e,a,s,eR(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){UM(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),n.data instanceof Uint8Array?2===Ge().getNumber("WEBGL_VERSION")?UM(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data))):UM(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data))):2===Ge().getNumber("WEBGL_VERSION")?UM(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n))):UM(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n))),UM(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,s){let o,i,l;UM(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),i=e.UNSIGNED_BYTE,l=e.RGBA):(o=new Float32Array(n*r*4),i=e.FLOAT,l=s.internalFormatPackedFloat),o.set(a),2===Ge().getNumber("WEBGL_VERSION")?UM(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,i,o))):UM(e,(()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,i,o))),UM(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,s]=HM(t,n);return J_(e,a,s,nR(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,s]=HM(t,n);return J_(e,a,s,tR(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(e_(this.gl,this.framebuffer),this.outputTexture=null),UM(this.gl,(()=>this.gl.deleteTexture(e)))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n,r){const[a,s]=VM(t,n),o=new Uint8Array(t*n*4);return UM(e,(()=>e.readPixels(0,0,a,s,r.downloadTextureFormat,e.UNSIGNED_BYTE,o))),new Float32Array(o.buffer)}(this.gl,t,n,this.textureConfig)))}downloadPackedMatrixFromBuffer(e,t,n,r,a,s){return rR(this.gl,e,0,0,0,a,s,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const r=function(e,t,n,r){const a=e.createBuffer();UM(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,a)));const s=16*t*n;return UM(e,(()=>e.bufferData(e.PIXEL_PACK_BUFFER,s,e.STREAM_READ))),UM(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0))),UM(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null))),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(Ge().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,a=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=r.clientWaitSync(a,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=a}else Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n){const r=new Float32Array(t*n*4);return UM(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r))),r}(this.gl,t,n)))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=X_(t));const n=function(e){return n_(e,(()=>e.createProgram()),"Unable to create WebGLProgram.")}(t);return UM(t,(()=>t.attachShader(n,this.vertexShader))),UM(t,(()=>t.attachShader(n,e))),function(e,t){if(UM(e,(()=>e.linkProgram(t))),!Ge().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,n),this.debug&&YM(t,n),this.vertexAttrsAreBound||(this.setProgram(n),this.vertexAttrsAreBound=function(e,t,n){return UM(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),JM(e,t,"clipSpacePos",n,3,20,0)&&JM(e,t,"uv",n,2,20,12)}(t,this.program,this.vertexBuffer)),n}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&UM(this.gl,(()=>this.gl.deleteProgram(e)))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&YM(this.gl,this.program),UM(this.gl,(()=>this.gl.useProgram(e)))}getUniformLocation(e,t,n=!0){return this.throwIfDisposed(),n?function(e,t,n){return n_(e,(()=>e.getUniformLocation(t,n)),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),UM(this.gl,(()=>this.gl.getAttribLocation(e,t)))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),ZM(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[r,a]=HM(t,n);this.setOutputMatrixTextureDriver(e,r,a)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&YM(this.gl,this.program),t_(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),UM(e,(()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),UM(this.gl,(()=>this.gl.finish()))}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=qM(this.gl,2===Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await me((()=>this.disposed||this.isQueryAvailable(e,Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))),this.getQueryTime(e,Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise((t=>{this.addItemToPoll((()=>e.isFencePassed()),(()=>t()))}))}pollItems(){const e=function(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((e=>e.isDoneFn)));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||me((()=>(this.pollItems(),0===this.itemsToPoll.length)))}bindTextureToFrameBuffer(e){this.throwIfDisposed(),QM(this.gl,e,this.framebuffer),this.debug&&t_(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(QM(this.gl,this.outputTexture,this.framebuffer),this.debug&&t_(this.gl)):e_(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;QM(r,e,this.framebuffer),this.debug&&t_(r),this.outputTexture=e,UM(r,(()=>r.viewport(0,0,t,n))),UM(r,(()=>r.scissor(0,0,t,n)))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),UM(this.gl,(()=>this.gl.scissor(e,t,n,r)))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{addImpl:sR,bincountImpl:oR,bincountReduceImpl:iR,ceilImpl:lR,concatImpl:uR,equalImpl:cR,expImpl:pR,expm1Impl:dR,floorImpl:hR,gatherNdImpl:fR,gatherV2Impl:mR,greaterImpl:gR,greaterEqualImpl:vR,lessImpl:bR,lessEqualImpl:yR,linSpaceImpl:wR,logImpl:xR,maxImpl:kR,maximumImpl:CR,minimumImpl:SR,multiplyImpl:ER,negImpl:TR,notEqualImpl:$R,prodImpl:IR,rangeImpl:NR,rsqrtImpl:OR,sigmoidImpl:AR,simpleAbsImpl:MR,sliceImpl:_R,sparseFillEmptyRowsImpl:RR,sparseReshapeImpl:PR,sparseSegmentReductionImpl:DR,sqrtImpl:LR,stridedSliceImpl:BR,stringNGramsImpl:FR,stringSplitImpl:zR,stringToHashBucketFastImpl:VR,subImpl:WR,tileImpl:HR,topKImpl:jR,transposeImpl:UR,uniqueImpl:GR}=U;function qR(e,t){return["x","y","z","w","u","v"].slice(0,t).map((t=>`${e}.${t}`))}function XR(e,t){return 1===t?[e]:qR(e,t)}class KR{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=V_(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=XR("rc",this.rank),t=R_(this.rank),n=this.getOutOfBoundsCondition(e),r=this.getSetup(e),a=this.getOutput(e);this.userCode=`\n        void main() {\n          ${t} rc = getOutputCoords();\n\n          if(${n}) {\n            setOutput(vec4(0));\n          } else {\n            ${r}\n\n            setOutput(vec4(${a}));\n          }\n        }\n      `}}getSourceCoordsArr(e){const t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let a=`${0===n?"r":"rp1"}, ${0===r?"c":"cp1"}`;for(let t=2;t<this.rank;t++)a=`${e[e.length-1-t]},`+a;t.push(a)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let n=this.rank-2;n<this.rank;n++)t+=`${e[n]} >= ${this.enableShapeUniforms?`outShape[${n}]`:this.outputShape[n]}`,n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),n=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],r=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`\n      int r = ${t[0]};\n      int c = ${t[1]};\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ${n};\n      bool rEdge = rp1 >= ${r};\n    `}getOutput(e){const t=this.getSourceCoordsArr(e);if(1===this.rank){return`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`}return`getA(${t[0]}),\n            cEdge ? 0. : getA(${t[1]}),\n            rEdge ? 0. : getA(${t[2]}),\n            rEdge || cEdge ? 0. : getA(${t[3]})`}}class YR{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=V_(this.outputShape.length);let n="";for(let e=0;e<4;e++){let t="thisRC = rc;";e%2==1&&(t+="thisRC.z += 1;"),e>1&&(t+="thisRC.y += 1;"),n+=`\n        ${t}\n        ${e>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${e}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${e>0?"}":""}\n      `}var r,a;this.userCode=`\n      ${r=t,a=this.enableShapeUniforms,`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${a?w_(["r","c","d"],"inputShape"):b_(["r","c","d"],r)}\n      return ivec3(r, c, d);\n    }\n  `}\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":x_(e)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};\n        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}}class JR{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,t,n){const r=QR(t,n),a=eP(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);const s=ZR(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();const e=this.freeTextures[a].shift();return this.usedTextures[a].push(e),e}let o;return r===zM.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===zM.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===zM.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===zM.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===zM.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(o),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),o}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;const a=QR(n,r),s=eP(t,a,r);s in this.freeTextures||(this.freeTextures[s]=[]);const o=ZR(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),i=Ge().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==i&&this._numBytesAllocated>i?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[s].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const l=this.usedTextures[s],u=l.indexOf(e);if(u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l.splice(u,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));for(const e in this.usedTextures)this.usedTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function ZR(e,t,n,r,a){const s=function(e,t){switch(e){case zM.PACKED_2X2_FLOAT32:return tR(t);case zM.PACKED_2X2_FLOAT16:return nR(t);case zM.UNPACKED_FLOAT32:return Z_(t);case zM.UNPACKED_FLOAT16:return Q_(t);case zM.PACKED_4X1_UNSIGNED_BYTE:return eR(t);default:throw new Error(`Unknown physical texture type ${e}`)}}(t,r);let o;if(a){const[t,n]=HM(e[0],e[1]);o=t*n}else{const[t,n]=VM(e[0],e[1]);o=t*n}const i=function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}(n,s);return o*i}function QR(e,t){if(e===FM.UPLOAD)return zM.PACKED_2X2_FLOAT32;if(e===FM.RENDER||null==e)return function(e){return Ge().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?zM.PACKED_2X2_FLOAT32:zM.UNPACKED_FLOAT32:e?zM.PACKED_2X2_FLOAT16:zM.UNPACKED_FLOAT16}(t);if(e===FM.DOWNLOAD||e===FM.PIXELS)return zM.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function eP(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}class tP{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=V_(this.outputShape.length),this.userCode=`\n      float unaryOperation(float x) {\n        ${t}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const nP="return abs(x);";const rP="return x;";class aP{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=V_(this.outputShape.length),this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${t}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}class sP{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=V_(this.outputShape.length);const t=e.length,n=XR("rc",t),r=R_(t),a=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),s=n.slice(-2),o=t<=1?"rc":`vec2(${s.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${a});\n\n        setOutput(getChannel(packedInput, ${o}));\n      }\n    `}}const oP=md,iP={};const lP=Ge().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class uP extends q{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Ge().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof aR)t=e;else{const n=LM(Ge().getNumber("WEBGL_VERSION"),e);t=new aR(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const e=LM(Ge().getNumber("WEBGL_VERSION"));t=new aR(e),this.binaryCache=((n=Ge().getNumber("WEBGL_VERSION"))in iP||(iP[n]={}),iP[n]),this.gpgpuCreatedLocally=!0}var n;this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new JR(this.gpgpu),this.numMBBeforeWarning=null==Ge().global.screen?1024:Ge().global.screen.height*Ge().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new G(this,Ji())}nextDataId(){return uP.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(e,t,n){if((Ge().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Ge().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:FM.UPLOAD,refCount:1}),r}refCount(e){if(this.texData.has(e)){return this.texData.get(e).refCount}return 0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(e,t,n,r,a){if(Ge().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:FM.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:a,slice:s,shape:o,isPacked:i}=t;if(null!=s){let t;t=i?new aP(o,rP):new tP(o,rP);const n=this.runWebGLProgram(t,[{dataId:e,shape:o,dtype:r}],r),a=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),a}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;const l=null!=this.activeTimers;let u,c;if(l&&(u=_a()),"complex64"===r){c=lf(this.readSync(a.real.dataId),this.readSync(a.imag.dataId))}else c=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=_a()-u),this.convertAndCacheOnCPU(e,c)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise((e=>t.push(e)))}const t=this.texData.get(e),{values:n,shape:r,slice:a,dtype:s,complexTensorInfos:o,isPacked:i}=t;if(null!=a){let t;t=i?new aP(r,rP):new tP(r,rP);const n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:s}],s),a=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),a}if(null!=n)return this.convertAndCacheOnCPU(e);if(Ge().getBool("DEBUG")&&!Ge().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Ge().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l,u,c=null;if("complex64"!==s&&Ge().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);const t=this.texData.get(l.dataId);c=this.gpgpu.createBufferFromTexture(t.texture.texture,...WM(r))}if(this.pendingRead.set(e,[]),"complex64"!==s&&await this.gpgpu.createAndWaitForFence(),"complex64"===s){const e=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]);u=lf(e[0],e[1])}else if(null==c)u=this.getValuesFromTexture(e);else{const e=ie(r);u=this.gpgpu.downloadFloat32MatrixFromBuffer(c,e)}if(null!=l&&this.disposeIntermediateTensorInfo(l),null!=c){const e=this.gpgpu.gl;UM(e,(()=>e.deleteBuffer(c)))}const p=this.convertAndCacheOnCPU(e,u),d=this.pendingRead.get(e);return this.pendingRead.delete(e),d.forEach((e=>e(p))),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Ji().removeDataId(e,this),this.pendingDeletes--),p}readToGPU(e,t={}){const n=this.texData.get(e),{values:r,shape:a,slice:s,dtype:o,isPacked:i,texture:l}=n;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=s){let n;n=i?new aP(a,rP):new tP(a,rP);const r=this.runWebGLProgram(n,[{dataId:e,shape:a,dtype:o}],o),s=this.readToGPU(r,t);return this.disposeIntermediateTensorInfo(r),s}if(null==l)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,t.customTexShape),c=Ji().makeTensorFromDataId(u.dataId,u.shape,u.dtype),p=this.texData.get(u.dataId);return Object.assign({tensorRef:c},p.texture)}bufferSync(e){const t=this.readSync(e.dataId);let n=t;if("string"===e.dtype)try{n=t.map((e=>Da(e)))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return No(e.shape,e.dtype,n)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!GM(n)){if(Ge().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`);throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:r}=this.texData.get(e),a=ie(t);if(Ge().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),r=this.texData.get(n.dataId),s=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...WM(t)).subarray(0,a);return this.disposeIntermediateTensorInfo(n),s}const s=Ge().getBool("WEBGL_PACK")&&!0===r,o=s?o_(t):t,i=s?new U_(o):new j_(o),l=this.runWebGLProgram(i,[{shape:o,dtype:n,dataId:e}],"float32"),u=this.texData.get(l.dataId),c=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(l),c}timerAvailable(){return Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();const a=oe(this.activeTimers.map((e=>e.query))).filter((e=>null!=e)),s=oe(this.activeTimers.map((e=>e.name))).filter((e=>null!=e));this.activeTimers=t,r&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(a);o.kernelMs=ee(e),o.getExtraProfileInfo=()=>e.map(((e,t)=>({name:s[t],ms:e}))).map((e=>`${e.name}: ${e.ms}`)).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:_a(),endMs:null}}endTimer(e){return Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=_a(),e)}async getQueryTime(e){if(Ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:a,isPacked:s,slice:o}=this.texData.get(e),i=o&&o.origDataId||e,l=this.dataRefCount.get(i);l>1?this.dataRefCount.set(i,l-1):(this.dataRefCount.delete(i),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,a,s)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=lP){return Ge().getBool("WEBGL_CPU_FORWARD")&&e.every((e=>null==this.texData.get(e.dataId).texture&&ie(e.shape)<t))}getGPGPUContext(){return this.gpgpu}where(e){aa("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return oP(e.shape,t)}packedUnaryOp(e,t,n){const r=new aP(e.shape,t),a=this.compileAndRun(r,[e],n);return Ji().makeTensorFromDataId(a.dataId,a.shape,a.dtype)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=MR(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Ge().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,nP,e.dtype);const t=new tP(e.shape,nP),n=this.compileAndRun(t,[e]);return Ji().makeTensorFromDataId(n.dataId,n.shape,n.dtype)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&$e(n[0])){const a=n.map((e=>Pa(e)));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){const{dataId:r}=this.makeTensorInfo(e,t,n);return Ji().makeTensorFromDataId(r,e,t,this)}unpackTensor(e){const t=new sP(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new KR(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[a_(e.shape),...s_(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[a_(t),...s_(t)],s=new YR(a,n),o=[n],i=this.runWebGLProgram(s,[r],e.dtype,o,!0);return{dataId:i.dataId,shape:t,dtype:i.dtype}}decode(e,t){const n=this.texData.get(e),{isPacked:r,shape:a,dtype:s}=n;if(null!=t){re(ie(a)<=t[0]*t[1]*4,(()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."))}const o=o_(a);let i;i=r?new H_(o):new W_(o);const l=[null!=t?t:WM(o)];return{dtype:s,shape:a,dataId:this.runWebGLProgram(i,[{shape:o,dtype:s,dataId:e}],s,l,!0,t).dataId}}runWebGLProgram(e,t,n,r,a=!1,s){const o=this.makeTensorInfo(e.outputShape,n),i=this.texData.get(o.dataId);if(e.packedOutput&&(i.isPacked=!0),e.outPackingScheme===BM.DENSE){const t=null!=s?s:WM(e.outputShape);i.texShape=t.map((e=>2*e))}if(null!=e.outTexUsage&&(i.usage=e.outTexUsage),0===ie(o.shape))return i.values=ye(o.dtype,0),o;const l=[],u=t.map((t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&ie(t.shape)<=Ge().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!=!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),l.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!l_(n.shape,t.shape)){const e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),l.push(t),n=this.texData.get(t.dataId),e.shape=r}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(o.dataId);const c={shape:o.shape,texData:i,isUniform:!1},p=function(e,t,n){let r="";t.concat(n).forEach((t=>{const a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const s=t.texData.texShape,{useSqueezeShape:o,uniformShape:i,keptDims:l}=P_(e.packedInputs,t.shape,s);let u="",c="",p="";if(1===i.length&&e.packedInputs){const e=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];u=`${e[0]>1}_${e[1]>1}`}else if(2!==i.length||e.packedInputs){if(i.length>2&&!e.packedInputs){const e=_e(i);p=`${e[0]===s[1]}_${e[e.length-1]===s[1]}`}}else c=`${i[0]>1}_${i[1]>1}`;const d=t.shape.length,h=2===i.length&&ue(t.shape,s),f=1===ie(t.shape),m=ei(t.shape,n.shape),g=!e.packedInputs&&d===n.shape.length&&ue(s,n.texData.texShape),v=e.packedInputs||i.length>2?"":`${s[0]>1}_${s[1]>1}`;r+=`${d}_${g}_${o?l:""}_${i.length}_${f}_${m}_${h}_${u}_${c}_${p}_${v}_${a}`}else{const e=t.isUniform?"uniform":t.texData.texShape;r+=`${t.shape}_${e}_${a}`}}));const a=e.userCode;let s=e.constructor.name;return s+="_"+r+"_"+a+`${Ge().getNumber("WEBGL_VERSION")}`,s}(e,u,c),d=this.getAndSaveBinary(p,(()=>B_(this.gpgpu,e,u,c))),h=null!=this.activeTimers;let f;h&&(f=this.startTimer()),Ge().get("ENGINE_COMPILE_ONLY")||function(e,t,n,r,a){t.program.enableShapeUniforms||(z_(t.inShapeInfos,n),z_([t.outShapeInfo],[r]));const s=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(s.texture,o[0],o[1]):e.setOutputMatrixTexture(s.texture,o[0],o[1]),e.setProgram(t.webGLProgram),1===Ge().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach(((n,r)=>{const a=t.program.variableNames[r],s=t.uniformLocations[a],o=t.uniformLocations[`offset${a}`],i=t.inShapesLocations[`${a}Shape`],l=t.inTexShapesLocations[`${a}TexShape`];if(i){const{uniformShape:r}=P_(t.program.packedInputs,n.shape,n.texData.texShape);switch(r.length){case 1:e.gl.uniform1iv(i,new Int32Array(r));break;case 2:e.gl.uniform2iv(i,new Int32Array(r));break;case 3:e.gl.uniform3iv(i,new Int32Array(r));break;case 4:e.gl.uniform4iv(i,new Int32Array(r))}}if(l&&e.gl.uniform2i(l,n.texData.texShape[0],n.texData.texShape[1]),null!=s)if(n.isUniform)if(ie(n.shape)<2)e.gl.uniform1f(s,n.uniformValues[0]);else{let t=n.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(s,t)}else null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,s,r)}));const i=t.outShapeLocation;if(i)switch(r.shape.length){case 1:e.gl.uniform1iv(i,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(i,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(i,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(i,new Int32Array(r.shape))}if(t.outShapeStridesLocation){const n=_e(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a&&t.program.customUniforms.forEach(((n,r)=>{const s=t.customUniformLocations[r],o=a[r];if("float"===n.type)e.gl.uniform1fv(s,o);else if("vec2"===n.type)e.gl.uniform2fv(s,o);else if("vec3"===n.type)e.gl.uniform3fv(s,o);else if("vec4"===n.type)e.gl.uniform4fv(s,o);else if("int"===n.type)e.gl.uniform1iv(s,o);else if("ivec2"===n.type)e.gl.uniform2iv(s,o);else if("ivec3"===n.type)e.gl.uniform3iv(s,o);else{if("ivec4"!==n.type)throw Error(`uniform type ${n.type} is not supported yet.`);e.gl.uniform4iv(s,o)}})),e.executeProgram()}(this.gpgpu,d,u,c,r),l.forEach((e=>this.disposeIntermediateTensorInfo(e))),h&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));const m=Ge().get("WEBGL_FLUSH_THRESHOLD");if(m>0){const e=_a();e-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!Ge().getBool("WEBGL_LAZILY_UNPACK")&&i.isPacked&&!1===a){const e=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),e}return o}compileAndRun(e,t,n,r,a=!1){n=n||t[0].dtype;return this.runWebGLProgram(e,t,n,r,a)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!Ge().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach((e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}))}this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=el((()=>{if(!Ge().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Ge().getBool("DEBUG");Ge().set("DEBUG",!1);const t=this.abs($l(1e-8)).dataSync()[0];if(Ge().set("DEBUG",e),t>0)return 32}return 16}))),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:r,values:a,texture:s,usage:o,isPacked:i}=t;if(null!=s)return;const l=null!=this.activeTimers;let u;l&&(u=_a());let c=t.texShape;if(null==c&&(c=function(e,t=!1){let n=Ge().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map(((t,n)=>n>=e.length-2?Z(e[n]):e[n]))).length&&(e=[2,e[0]])),2!==e.length){const t=be(e);e=t.newShape}let r=ie(e);if(e.length<=1&&r<=n)return[1,r];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){const t=a_(e);let n=2,a=2;return e.length&&([n,a]=s_(e)),r=t*(n/2)*(a/2),de(r).map((e=>2*e))}return de(r)}(n,i),t.texShape=c),null!=a){const e=o_(n);let s,o=c[1],p=c[0];const d=a instanceof Uint8Array||a instanceof Uint8ClampedArray;!i&&d||([o,p]=HM(c[0],c[1])),s=i?new q_(e,d):new G_(e,d);const h=d?[p,o]:c,f=this.makeTensorInfo(h,r),m=this.texData.get(f.dataId);m.usage=d?FM.PIXELS:FM.UPLOAD,m.texShape=h,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),o,p,a);const g=[[p,o]],v=!0,b=this.runWebGLProgram(s,[f],r,g,v),y=this.texData.get(b.dataId);t.texShape=y.texShape,t.isPacked=y.isPacked,t.usage=y.usage,Ge().get("ENGINE_COMPILE_ONLY")?this.disposeData(b.dataId):(t.texture=y.texture,t.values=null,this.texData.delete(b.dataId)),this.disposeIntermediateTensorInfo(f),l&&(this.uploadWaitMs+=_a()-u)}else{const e=this.acquireTexture(c,o,r,i);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error(`Unknown dtype ${t}`)}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*Ee(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const n=new Promise((e=>{try{this.checkCompletion_(t),e(!0)}catch(e){throw e}}));e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await Wh(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw KM(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const[,e]of Object.entries(this.binaryCache)){const{uniformLocations:t,customUniformLocations:n,infLoc:r,nanLoc:a,inShapesLocations:s,inTexShapesLocations:o,outShapeLocation:i,outShapeStridesLocation:l,outTexShapeLocation:u}=F_(this.gpgpu,e.program,e.webGLProgram);e.uniformLocations=t,e.customUniformLocations=n,e.infLoc=r,e.nanLoc=a,e.inShapesLocations=s,e.inTexShapesLocations=o,e.outShapeLocation=i,e.outShapeStridesLocation=l,e.outTexShapeLocation=u}}}uP.nextDataId=0;ws()&&cl("webgl",(()=>new uP),2);class cP{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=ni(t,n),this.enableShapeUniforms=V_(this.outputShape.length),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${e}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}class pP{constructor(e,t,n,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ni(t,n);const a=this.outputShape.length;this.enableShapeUniforms=V_(a);let s="";if(r)if(0===a||1===ie(this.outputShape))s="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{if(s=`\n          ${R_(a)} coords = getOutputCoords();\n        `,1===a)this.enableShapeUniforms?s+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":s+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const e=XR("coords",a);this.enableShapeUniforms?s+=`\n            bool nextRowOutOfBounds =\n              (${e[a-2]} + 1) >= outShape[${a} - 2];\n            bool nextColOutOfBounds =\n              (${e[a-1]} + 1) >= outShape[${a} - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `:s+=`\n            bool nextRowOutOfBounds =\n              (${e[a-2]} + 1) >= ${this.outputShape[a-2]};\n            bool nextColOutOfBounds =\n              (${e[a-1]} + 1) >= ${this.outputShape[a-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${e}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${s}\n\n        setOutput(result);\n      }\n    `}}function dP(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const hP={kernelName:dn,backendName:"webgl",kernelFunc:dP};function fP(e){const{inputs:t,backend:n}=e,{real:r,imag:a}=t,s=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(s.dataId),i=dP({inputs:{x:r},backend:n}),l=dP({inputs:{x:a},backend:n});return o.complexTensorInfos={real:i,imag:l},s}const mP={kernelName:Ct,backendName:"webgl",kernelFunc:fP},gP="return (a < 0.) ? b * a : a;",vP="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const bP={kernelName:bn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:s}=r,o=n.makeTensorInfo([],"float32",Aa(s,"float32")),i=Ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pP(vP,a.shape,o.shape):new cP(gP,a.shape,o.shape),l=n.runWebGLProgram(i,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),l}},yP="return (a < 0.) ? b * a : a;",wP="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const xP={kernelName:tr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r,alpha:a}=t,s=Ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pP(wP,r.shape,a.shape):new cP(yP,r.shape,a.shape);return n.runWebGLProgram(s,[r,a],"float32")}};function kP({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:a,backend:s})=>{const{x:o}=a,i=s,l=r||o.dtype;if(i.shouldExecuteOnCPU([o])&&null!=n){const e=i.texData.get(o.dataId),t=n(e.values,l);return i.makeTensorInfo(o.shape,l,t)}let u;return u=Ge().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=t?new aP(o.shape,t):new tP(o.shape,e),i.runWebGLProgram(u,[o],l)}}function CP({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:a,dtype:s}){return({inputs:o,backend:i})=>{const{a:l,b:u}=o,c=i;if(r&&"complex64"===l.dtype){const t=c.texData.get(l.dataId),n=c.texData.get(u.dataId),[r,a]=[[t.complexTensorInfos.real,n.complexTensorInfos.real],[t.complexTensorInfos.imag,n.complexTensorInfos.imag]].map((t=>{const[n,r]=t,a={dataId:n.dataId,dtype:n.dtype,shape:l.shape},s={dataId:r.dataId,dtype:r.dtype,shape:u.shape},o=new cP(e,l.shape,u.shape);return c.runWebGLProgram(o,[a,s],as(n.dtype,r.dtype))})),s=fP({inputs:{real:r,imag:a},backend:c});return c.disposeIntermediateTensorInfo(r),c.disposeIntermediateTensorInfo(a),s}const p=s||as(l.dtype,u.dtype);if(("string"===l.dtype||"string"===u.dtype||c.shouldExecuteOnCPU([l,u]))&&null!=a){const e=c.texData.get(l.dataId).values,t=c.texData.get(u.dataId).values,n="string"===l.dtype?zf(e):e,r="string"===l.dtype?zf(t):t,[s,o]=a(l.shape,u.shape,n,r,p),i=c.makeTensorInfo(o,p);return c.texData.get(i.dataId).values=s,i}let d;return d=Ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=t?new pP(t,l.shape,u.shape,n):new cP(e,l.shape,u.shape),c.runWebGLProgram(d,[l,u],p)}}function SP(e,t=!1){if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n";if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n";if("prelu"===e)return t?wP:yP;if("leakyrelu"===e)return t?vP:gP;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}class EP{constructor(e,t,n,r=!1,a=!1,s=!1,o=null,i=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=V_(this.outputShape.length);const u=r?e[1]:e[2],c=Math.ceil(u/2),p=r?"i * 2, rc.y":"rc.y, i * 2",d=a?"rc.z, i * 2":"i * 2, rc.z",h=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",g="";o&&(m=i?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${o}\n        }`:l?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${o}\n        }`:`vec4 activation(vec4 x) {\n          ${o}\n        }`,g="result = activation(result);");const v=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let b="rc.x",y="rc.x";e[0]<t[0]?b=`int(min(float(rc.x), ${e[0]-1}.))`:t[0]<e[0]&&(y=`int(min(float(rc.x), ${t[0]-1}.))`),this.userCode=`\n      ${m}\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ${c}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ${c}; i++) {\n          int batchA = ${b};\n          int batchB = ${y};\n          vec4 a = getMatrixA(batchA, ${p});\n          vec4 b = getMatrixB(batchB, ${d});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${h[0]} * ${f[0]});\n          result += (${h[1]} * ${f[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${v}\n\n        ${g}\n\n        setOutput(result);\n      }\n    `}}const TP="return areal * breal - aimag * bimag;",$P="return areal * bimag + aimag * breal;";class IP{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=ni(t,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}const NP="return a * b;";function OP(e){const{inputs:t,backend:n}=e,{a:r,b:a}=t,s=as(r.dtype,a.dtype);if("complex64"===r.dtype){const e=n.texData.get(r.dataId),t=n.texData.get(a.dataId),s=new IP(TP,r.shape,a.shape),o=new IP($P,r.shape,a.shape),i=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:r.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:a.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:a.shape}],l=n.runWebGLProgram(s,i,"float32"),u=n.runWebGLProgram(o,i,"float32"),c=fP({inputs:{real:l,imag:u},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),c}if(n.shouldExecuteOnCPU([r,a])){const e=n.texData.get(r.dataId),t=n.texData.get(a.dataId),[o,i]=ER(r.shape,a.shape,e.values,t.values,s),l=n.makeTensorInfo(i,s);return n.texData.get(l.dataId).values=o,l}let o;return o=Ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pP(NP,r.shape,a.shape):new cP(NP,r.shape,a.shape),n.runWebGLProgram(o,[r,a],s)}const AP={kernelName:Hn,backendName:"webgl",kernelFunc:OP};function MP(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:s}=r,o=n,i=ie(a.shape),l=ge(s,i),u=ie(l);re(i===u,(()=>`The new shape (${l}) has ${u} elements and the old shape (${a.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`));const c=o.texData.get(a.dataId);return!c.isPacked||l_(a.shape,l)||null!==c.texture&&l_(c.shape,l)?(o.incRef(a.dataId),{dataId:a.dataId,shape:l,dtype:a.dtype}):function(e,t,n){const r=[a_(e.shape),...s_(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},s=[a_(t),...s_(t)],o=new YR(s,r),i=[r],l=n.runWebGLProgram(o,[a],e.dtype,i,!0);return{dataId:l.dataId,shape:t,dtype:l.dtype}}(a,l,o)}const _P={kernelName:ir,backendName:"webgl",kernelFunc:MP};class RP{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:a,outSize:s}=e;this.outputShape=[r,s];const o=4*Math.floor(n/4),i=n%4;let l="sumValue += dot(values, ones);";if(null!=t){const e=1/t;l=`sumValue += dot(values * ${ce(e)?e.toPrecision(2):e}, ones);`}let u="";a%n>0&&(u=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${u}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${o}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${l}\n        }\n\n        int inIdx = inOffset + ${o};\n        if (${1===i}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${l}\n        } else if (${2===i}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${l}\n        } else if (${3===i}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${l}\n        }\n        setOutput(sumValue);\n      }\n    `}}class PP{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:a,outSize:s}=e;this.outputShape=[r,s];let o="0.0",i="";"prod"===t?o="1.0":"min"===t?(o="1.0 / 1e-20",i="min"):"max"===t&&(o="-1.0 / 1e-20",i="max");let l=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");const u=4*Math.floor(n/4),c=n%4;let p=`\n      if (${"sum"===t}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===t}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${i}(values, minMaxValue);\n        if (${"min"===t} || ${"max"===t}) {\n          minMaxValue = ${i}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,d="vec4";"all"===t?(o="1.0",p="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(o="0.0",p="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");let h="";a%n>0&&(h=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${o};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${h}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${o});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${p}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${p}\n        } else if (${2===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${p}\n        } else if (${3===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${p}\n        }\n        setOutput(${l});\n      }\n    `}}function DP(e,t,n,r){const a=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],r=Gh(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape);let s=e;for(let o=0;o<a.length;o++){const{inSize:i,windowSize:l,outSize:u}=a[o];let c,p;c="mean"===n?0===o?new RP({windowSize:l,inSize:i,batchSize:e.shape[0],outSize:u},i):new RP({windowSize:l,inSize:i,batchSize:e.shape[0],outSize:u}):new PP({windowSize:l,inSize:i,batchSize:e.shape[0],outSize:u},n),p=s,s=r.runWebGLProgram(c,[s],t),p.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(p)}return s}class LP{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;const r=R_(this.rank),a=function(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let t=0;t<e.length;t++)r[e[t]]=n[t];return r.join()}(t);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${a}));\n    }\n    `}}class BP{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=R_(this.rank),a=qR("rc",this.rank),s=new Array(this.rank);for(let e=0;e<t.length;e++)s[t[e]]=a[e];const o=`vec2(${s.slice(-2).join()})`,i=`++${a[this.rank-1]} < ${n[this.rank-1]}`,l=`getChannel(getA(${s.join()}), ${o})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${l};\n      if(${i}) {\n        result[1] = ${l};\n      }\n      --${a[this.rank-1]};\n      if(++${a[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${l};\n        if(${i}) {\n          result[3] = ${l};\n        }\n      }\n      setOutput(result);\n    }\n    `}}function FP(e,t,n){const r=Ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new BP(e.shape,t):new LP(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function zP(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:o}=r;return function(e,t,n,r){const a=t,s=e.shape.length,o=ve(a,e.shape);let i=o;const l=Dc(i,s),u=null!=l;let c=e;u&&(c=FP(e,l,r),i=Bc(i.length,s)),Pc("sum",i,s);const[p,d]=_c(c.shape,i);let h=p;n&&(h=Rc(p,o));const f=ie(d),m=MP({inputs:{x:c},attrs:{shape:[ie(e.shape)/f,f]},backend:r}),g=DP(m,ss(e.dtype),"sum",r),v=MP({inputs:{x:g},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(g),u&&r.disposeIntermediateTensorInfo(c),v}(a,s,o,n)}const VP={kernelName:Tr,backendName:"webgl",kernelFunc:zP};function WP(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{perm:s}=r,o=n,i=a.shape.length,l=new Array(i);for(let e=0;e<l.length;e++)l[e]=a.shape[s[e]];let u;if(o.shouldExecuteOnCPU([a])){const e=o.texData.get(a.dataId).values,t=UR(e,a.shape,a.dtype,s,l);u=o.makeTensorInfo(l,a.dtype);o.texData.get(u.dataId).values=t}else u=FP(a,s,o);return u}const HP={kernelName:qr,backendName:"webgl",kernelFunc:WP};function jP({a:e,b:t,transposeA:n,transposeB:r,backend:a,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:i=0,activation:l=null}){const u=e.shape.length,c=t.shape.length,p=n?e.shape[u-2]:e.shape[u-1],d=r?t.shape[c-1]:t.shape[c-2],h=n?e.shape[u-1]:e.shape[u-2],f=r?t.shape[c-2]:t.shape[c-1],m=e.shape.slice(0,-2),g=t.shape.slice(0,-2),v=ie(m),b=ie(g),y=ni(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([h,f]);re(p===d,(()=>`Error in matMul: inner shapes (${p}) and (${d}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${r} must match.`));const w=n?[v,p,h]:[v,h,p],x=r?[b,f,d]:[b,d,f],k=MP({inputs:{x:e},backend:a,attrs:{shape:w}}),C=MP({inputs:{x:t},backend:a,attrs:{shape:x}}),S=[k,C],E=Math.max(v,b),T=n?k.shape[1]:k.shape[2],$=null!=s,I=null!=o,N="leakyrelu"===l,O=null!=l?SP(l,!0):null;let A;if((1===h||1===f)&&T>1e3&&!1===($||I||N||null!=O)){let e=k,t=C;n&&(e=WP({inputs:{x:k},backend:a,attrs:{perm:[0,2,1]}}),S.push(e)),r&&(t=WP({inputs:{x:C},backend:a,attrs:{perm:[0,2,1]}}),S.push(t));const s=1===f;let o=e;1!==f&&(o=MP({inputs:{x:e},backend:a,attrs:{shape:[E,T,1]}}),S.push(o));const i=1===f?2:1;let l=t;s&&(l=MP({inputs:{x:t},backend:a,attrs:{shape:[E,1,T]}}),S.push(l));const u=OP({inputs:{a:o,b:l},backend:a});A=zP({inputs:{x:u},backend:a,attrs:{axis:i,keepDims:!0}}),S.push(u)}else{const l=as(e.dtype,t.dtype),u=new EP(w,x,[E,h,f],n,r,$,O,I,N),c=[k,C];if(null!=s&&c.push(s),I&&c.push(o),N){const e=a.makeTensorInfo([],"float32",Aa(i,"float32"));c.push(e),S.push(e)}A=a.runWebGLProgram(u,c,l)}const M=MP({inputs:{x:A},backend:a,attrs:{shape:y}});S.push(A);for(const e of S)a.disposeIntermediateTensorInfo(e);return M}const UP={kernelName:ta,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:s,bias:o,preluActivationWeights:i}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:p}=r;return jP({a:a,b:s,transposeA:l,transposeB:u,backend:n,bias:o,preluActivationWeights:i,leakyreluAlpha:p,activation:c})}},GP="return abs(x);";const qP={kernelName:Je,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const e=n.texData.get(r.dataId),t=MR(e.values);return n.makeTensorInfo(r.shape,r.dtype,t)}let a;return a=Ge().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new aP(r.shape,GP):new tP(r.shape,GP),n.runWebGLProgram(a,[r],r.dtype)}},XP=kP({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),KP={kernelName:Ze,backendName:"webgl",kernelFunc:XP},YP=kP({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),JP={kernelName:Qe,backendName:"webgl",kernelFunc:YP},ZP="return a + b;",QP=CP({opSnippet:ZP,packedOpSnippet:ZP,supportsComplex:!0,cpuKernelImpl:sR}),eD={kernelName:et,backendName:"webgl",kernelFunc:QP};class tD{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`float v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}class nD{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`vec4 v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}const rD={kernelName:tt,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,a=n;if(1===a.length)return dP({inputs:{x:a[0]},backend:r});if(a.length>Ge().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(a.length/2),n=e({inputs:a.slice(0,t),backend:r}),s=e({inputs:a.slice(t),backend:r});return e({inputs:[n,s],backend:r})}const s=a.map((e=>e.dtype)).reduce(((e,t)=>as(e,t))),o=a.map((e=>e.shape)),i=Ge().getBool("WEBGL_PACK")?new nD(a[0].shape,o):new tD(a[0].shape,o);return r.runWebGLProgram(i,a,s)}};const aD={kernelName:nt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:o}=r,i=a.shape.length,l=ve(s,a.shape);let u=l;const c=Dc(u,i);let p=a;null!=c&&(p=WP({inputs:{x:a},backend:n,attrs:{perm:c}}),u=Bc(u.length,i)),Pc("all",u,i);const[d,h]=_c(p.shape,u),f=MP({inputs:{x:p},backend:n,attrs:{shape:[-1,ie(h)]}}),m=DP(f,f.dtype,"all",n);let g;if(o){g=MP({inputs:{x:m},backend:n,attrs:{shape:Rc(d,l)}})}else g=MP({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=c&&n.disposeIntermediateTensorInfo(p),g}};const sD={kernelName:rt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:o}=r,i=a.shape.length,l=ve(s,a.shape);let u=l;const c=Dc(u,i);let p=a;null!=c&&(p=WP({inputs:{x:a},backend:n,attrs:{perm:c}}),u=Bc(u.length,i)),Pc("any",u,i);const[d,h]=_c(p.shape,u),f=MP({inputs:{x:p},backend:n,attrs:{shape:[-1,ie(h)]}}),m=DP(f,f.dtype,"any",n);let g;if(o){g=MP({inputs:{x:m},backend:n,attrs:{shape:Rc(d,l)}})}else g=MP({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=c&&n.disposeIntermediateTensorInfo(p),g}};class oD{constructor(e,t,n){this.variableNames=["A"];const{windowSize:r,batchSize:a,outSize:s}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,s];const o="max"===t?">":"<",i=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${r}; i++) {\n          int inIdx = ${i};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${o} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}class iD{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,re(e.length>2,(()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`));const a=e[e.length-1],s=Math.ceil(a/t);this.outputShape=e.slice(0,-1),s>1&&this.outputShape.push(s),r||this.variableNames.push("bestIndicesA");const o=this.outputShape,i=o.length,l=R_(i),u=XR("coords",i);let c,p;if(1===s){p=i+1;const e=R_(p);c=`\n        ${e} sourceLocR = ${e}(${u.join()}, 0);\n        ++${u[i-1]};\n        ${e} sourceLocG = ${e}(${u.join()}, 0);\n        ++${u[i-2]};\n        ${e} sourceLocA = ${e}(${u.join()}, 0);\n        --${u[i-1]};\n        ${e} sourceLocB = ${e}(${u.join()}, 0);\n        --${u[i-2]};`}else p=i,c=`\n        ${l} sourceLocR = coords;\n        ++${u[i-1]};\n        ${l} sourceLocG = coords;\n        ++${u[i-2]};\n        ${l} sourceLocA = coords;\n        --${u[i-1]};\n        ${l} sourceLocB = coords;\n        --${u[i-2]};`;const d=["x","y","z","w","u","v"].slice(0,p),h="."+d[p-1],f=d.map((e=>"int "+e)),m=XR("sourceLocR",p-1).concat("inIdx.r"),g=XR("sourceLocG",p-1).concat("inIdx.g"),v=XR("sourceLocB",p-1).concat("inIdx.b"),b=XR("sourceLocA",p-1).concat("inIdx.a"),y="max"===n?"greaterThan":"lessThan",w=r?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),\n                             getBestIndicesAChannel(${g.join()}),\n                             getBestIndicesAChannel(${v.join()}),\n                             getBestIndicesAChannel(${b.join()})));`,x=`vec4(\n            getAChannel(${m.join()}),\n            hasNextCol ? getAChannel(${g.join()}) : 0.,\n            hasNextRow ? getAChannel(${v.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${b.join()}) : 0.)`,k=r?"":`\n      float getBestIndicesAChannel(${f.join()}) {\n        return getChannel(getBestIndicesA(${d.join()}),\n                                          vec2(${d.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${f.join()}) {\n        return getChannel(getA(${d.join()}),\n                               vec2(${d.slice(-2).join()}));\n      }\n      ${k}\n      void main() {\n        ${l} coords = getOutputCoords();\n        bool hasNextCol = ${u[i-1]} < ${o[i-1]-1};\n        bool hasNextRow = ${u[i-2]} < ${o[i-2]-1};\n        ${c}\n        ivec4 srcIdx = ivec4(sourceLocR${h}, sourceLocG${h},\n          sourceLocB${h}, sourceLocA${h}) * ${t};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${x};\n\n        for (int i = 0; i < ${t}; i++) {\n          inIdx = srcIdx;\n          ${w}\n          vec4 candidate = ${x};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${y}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}function lD(e,t,n,r=null){let a=t.shape[0],s=t.shape[1];null!=r&&(a=r.shape[0],s=r.shape[1]);const o=Gh(s),i={windowSize:o,inSize:s,batchSize:a,outSize:Math.ceil(s/o)},l=new oD(i,n,null==r),u=[t];null!=r&&u.push(r);const c=e.runWebGLProgram(l,u,"int32");if(1===c.shape[1])return c;const p=lD(e,t,n,c);return e.disposeIntermediateTensorInfo(c),p}function uD(e,t,n,r=null){const a=null!=r?r.shape:t.shape,s=Gh(a[a.length-1]),o=new iD(a,s,n,null==r),i=null==r?[t]:[t,r],l=e.runWebGLProgram(o,i,"int32");if(l.shape.length===t.shape.length){const r=uD(e,t,n,l);return e.disposeIntermediateTensorInfo(l),r}return l}function cD(e,t,n,r){const a=[n];if(Pc("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!Ge().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],s=e.texData.get(t.dataId);let o=t;null!==s&&s.isPacked&&(o=e.unpackTensor(t),n.push(o));const[i,l]=_c(o.shape,a),u=ie(l),c=MP({inputs:{x:o},backend:e,attrs:{shape:[-1,u]}});n.push(c);const p=lD(e,c,r);n.push(p);const d=MP({inputs:{x:p},backend:e,attrs:{shape:i}});return n.forEach((t=>e.disposeIntermediateTensorInfo(t))),d}return uD(e,t,r)}const pD={kernelName:at,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s}=r;let o=ve(s,a.shape);const i=Dc(o,a.shape.length);let l=a;const u=[];null!=i&&(l=WP({inputs:{x:a},backend:n,attrs:{perm:i}}),u.push(l),o=Bc(o.length,l.shape.length)),Pc("argMax",[o[0]],l.shape.length);const c=cD(n,l,o[0],"max");return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}};const dD={kernelName:st,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s}=r;let o=ve(s,a.shape);const i=Dc(o,a.shape.length);let l=a;const u=[];null!=i&&(l=WP({inputs:{x:a},backend:n,attrs:{perm:i}}),u.push(l),o=Bc(o.length,l.shape.length)),Pc("argMin",[o[0]],l.shape.length);const c=cD(n,l,o[0],"min");return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}},hD=kP({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),fD={kernelName:ot,backendName:"webgl",kernelFunc:hD},mD=kP({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),gD={kernelName:it,backendName:"webgl",kernelFunc:mD},vD=kP({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),bD={kernelName:lt,backendName:"webgl",kernelFunc:vD},yD=CP({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),wD={kernelName:ct,backendName:"webgl",kernelFunc:yD},xD=kP({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),kD={kernelName:ut,backendName:"webgl",kernelFunc:xD};class CD{constructor(e,t,n,r=!1,a=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const s=e.filterWidth,o=e.strideHeight,i=e.strideWidth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterHeight,p=e.effectiveFilterWidth,d=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t,m=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let v="0.0";if(f||(v="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec2 strides = ivec2(${o}, ${i});\n        const ivec2 pads = ivec2(${d}, ${h});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${c};\n              wR += ${l}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${p};\n                wC += ${u}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${t} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${r?a?m:g:`wR * ${p} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let b=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(b="avgValue / count");const y=4*Math.floor(s/4),w=s%4,x=`\n      if (${f}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${o}, ${i});\n      const ivec2 pads = ivec2(${d}, ${h});\n      const float initializationValue = ${v};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${v});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${c};\n            wR += ${l}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${y}; wC += 4) {\n            int xC = xCCorner + wC * ${u};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              getValue(batch, xR, xC + 3 * ${u}, d)\n            );\n\n            ${x}\n          }\n\n          int xC = xCCorner + ${y};\n          if (${1===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${x}\n          } else if (${2===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${x}\n          } else if (${3===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              initializationValue\n            );\n\n            ${x}\n          }\n        }\n        setOutput(${b});\n      }\n    `}}class SD{constructor(e,t,n,r=!1,a=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const s=e.filterWidth,o=e.strideDepth,i=e.strideHeight,l=e.strideWidth,u=e.dilationDepth,c=e.dilationHeight,p=e.dilationWidth,d=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;const b="avg"===t;let y="0.0";if(b||(y="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${o}, ${i}, ${l});\n        const ivec3 pads = ivec3(${m}, ${g}, ${v});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${d};\n              wD += ${u}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${h};\n                wR += ${c}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${f};\n                  wC += ${p}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ${t} currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${r?a?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${h} * ${f} +\n                      wR * ${f} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let w=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(w="avgValue / count");const x=4*Math.floor(s/4),k=s%4,C=`\n      if (${b}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${o}, ${i}, ${l});\n      const ivec3 pads = ivec3(${m}, ${g}, ${v});\n      const float initializationValue = ${y};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${y});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${d};\n            wD += ${u}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${h};\n            wR += ${c}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${x}; wC += 4) {\n              int xC = xCCorner + wC * ${p};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${p}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${p}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${p}, ch)\n              );\n\n              ${C}\n            }\n\n            int xC = xCCorner + ${x};\n            if (${1===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${C}\n            } else if (${2===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${p}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${C}\n            } else if (${3===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${p}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${p}, ch),\n                initializationValue\n              );\n\n              ${C}\n            }\n          }\n          setOutput(${w});\n        }\n      }\n    `}}const ED={kernelName:pt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;m_(a,"avgPool");const{filterSize:s,strides:o,pad:i,dimRoundingMode:l}=r;re(pu(o,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`));const u=tu(a.shape,s,o,1,i,l);if(1===u.filterWidth&&1===u.filterHeight&&ue(u.inShape,u.outShape))return dP({inputs:{x:a},backend:n});const c=new CD(u,"avg",!1);return n.runWebGLProgram(c,[a],"float32")}};const TD={kernelName:ht,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:s,strides:o,pad:i,dimRoundingMode:l,dataFormat:u}=r,c=nu(a.shape,s,o,[1,1,1],i,l,u),p=new SD(c,"avg",!1);return n.runWebGLProgram(p,[a],"float32")}};class $D{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,s=e.dilationHeight,o=e.dilationWidth,i=e.effectiveFilterHeight,l=e.effectiveFilterWidth,u=i-1-e.padInfo.top,c=l-1-e.padInfo.left,p=1/(t*n);this.userCode=`\n      const ivec2 pads = ivec2(${u}, ${c});\n      const float avgMultiplier = float(${p});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${i};\n            wR += ${s}) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${l};\n            wC+= ${o}) {\n            float dyC = float(dyCCorner + wC) / ${a}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class ID{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,s=e.strideHeight,o=e.strideWidth,i=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,p=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=c-1-e.padInfo.front,f=p-1-e.padInfo.top,m=d-1-e.padInfo.left,g=1/(t*n*r);this.userCode=`\n      const ivec3 pads = ivec3(${h}, ${f}, ${m});\n      const float avgMultiplier = float(${g});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${c};\n            wD += ${i}) {\n          float dyD = float(dyDCorner + wD) / ${a}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${p};\n              wR += ${l}) {\n            float dyR = float(dyRCorner + wR) / ${s}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${d};\n                wC += ${u}) {\n              float dyC = float(dyCCorner + wC) / ${o}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const ND={kernelName:ft,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,o=s,{filterSize:i,strides:l,pad:u,dimRoundingMode:c}=r,p=nu(o.shape,i,l,[1,1,1],u,c),d=new ID(p);return n.runWebGLProgram(d,[a],o.dtype)}};const OD={kernelName:dt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,o=s;m_([a,s],"avgPoolGrad");const{filterSize:i,strides:l,pad:u}=r,c=tu(o.shape,i,l,1,u),p=new $D(c);return n.runWebGLProgram(p,[a],o.dtype)}};const AD={kernelName:mt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:a,b:s}=t,{transposeA:o,transposeB:i}=r;return jP({a:a,b:s,transposeA:o,transposeB:i,backend:n})}};class MD{constructor(e,t,n,r,a,s){this.outputShape=[],this.variableNames=["x","mean","variance"],ni(e,t),ni(e,n);let o="0.0";null!=r&&(ni(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let i="1.0";null!=a&&(ni(e,a),this.variableNames.push("scale"),i="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${o};\n        float scale = ${i};\n        float inv = scale * inversesqrt(variance + float(${s}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}class _D{constructor(e,t,n,r,a,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],ni(e,t),ni(e,n);let o="vec4(0.0)";null!=r&&(ni(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let i="vec4(1.0)";null!=a&&(ni(e,a),this.variableNames.push("scale"),i="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        vec4 offset = ${o};\n        vec4 scale = ${i};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${s}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}const RD={kernelName:on,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,mean:a,variance:s,offset:o,scale:i}=e;re(a.shape.length===s.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),re(null==o||a.shape.length===o.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),re(null==i||a.shape.length===i.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));let{varianceEpsilon:l}=n;null==l&&(l=.001);const u=[r,a,s];let c=null;null!=o&&(c=o.shape,u.push(o));let p=null;null!=i&&(p=i.shape,u.push(i));const d=Ge().getBool("WEBGL_PACK_NORMALIZATION")?new _D(r.shape,a.shape,s.shape,c,p,l):new MD(r.shape,a.shape,s.shape,c,p,l);return t.runWebGLProgram(d,u,u[0].dtype)}};class PD{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=R_(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return DD.slice(0,e).map((e=>"sourceLoc."+e)).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}(this.rank);let r;r=`\n        ${t} sourceLoc;\n        ${t} coords = getOutputCoords();\n        ${e.map(((e,t)=>`sourceLoc.${DD[t]} = start[${t}] + coords.${DD[t]};`)).join("\n")}\n      `,this.userCode=`\n      void main() {\n        ${r}\n        setOutput(getSource(${n}));\n      }\n    `}}const DD=["x","y","z","w","u","v"];class LD{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=R_(this.rank),n=XR("coords",this.rank),r=XR("sourceLoc",this.rank),a=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,s=`getChannel(getSource(${r.join()}), ${a})`,o=`\n      result.x = ${s};\n      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${s};\n        --${r[this.rank-1]};\n      }\n    `,i=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${s};\n        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${s};\n        }\n      }\n    `,l=this.rank<=4?`sourceLoc = coords +\n            ${t}(${e.map(((e,t)=>`start[${t}]`)).join()});`:e.map(((e,t)=>`${r[t]} = ${n[t]} + start[${t}];`)).join("\n");this.userCode=`\n      void main() {\n        ${t} coords = getOutputCoords();\n        ${t} sourceLoc;\n        ${l}\n        vec4 result = vec4(0.);\n        ${o}\n        ${i}\n        setOutput(result);\n      }\n    `}}function BD(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:s,size:o}=r,[i,l]=Ii(a,s,o);if(fi(a,i,l),0===ie(l))return n.makeTensorInfo(l,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){const e=n.texData.get(a.dataId),t=_R(e.values,i,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,t)}const{isPacked:u}=n.texData.get(a.dataId),c=Ti(a.shape,i,l);if(u||!c){const e=Ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new LD(l):new PD(l),t=[i];return n.runWebGLProgram(e,[a],a.dtype,t)}return n.uploadToGPU(a.dataId),function(e,t,n,r){const a=r.texData.get(e.dataId),s=r.makeTensorInfo(n,e.dtype),o=r.texData.get(s.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=e.dtype;let i=$i(t,_e(e.shape));a.slice&&(i+=a.slice.flatOffset),o.slice={flatOffset:i,origDataId:a.slice&&a.slice.origDataId||e.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),s}(a,i,l,n)}const FD={kernelName:yr,backendName:"webgl",kernelFunc:BD},zD={kernelName:gt,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:s,crops:o}=r;re(a.shape.length<=4,(()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"));const i=s.reduce(((e,t)=>e*t)),l=Xh(a.shape,s,i),u=Kh(l.length,s.length),c=Yh(a.shape,s,i),p=Jh(o,s.length),d=Zh(c,o,s.length),h=[],f=MP({inputs:{x:a},backend:n,attrs:{shape:l}}),m=WP({inputs:{x:f},backend:n,attrs:{perm:u}}),g=MP({inputs:{x:m},backend:n,attrs:{shape:c}}),v=BD({inputs:{x:g},backend:n,attrs:{begin:p,size:d}});return h.push(f),h.push(m),h.push(g),h.forEach((e=>n.disposeIntermediateTensorInfo(e))),v}};const VD={kernelName:vt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:s}=t,{size:o}=r,i=n.readSync(a.dataId),l=n.readSync(s.dataId),u=oR(i,l,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,u)}};const WD={kernelName:yt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:a}=t,s=n.readSync(r.dataId),o=n.readSync(a.dataId),i=ni(Array.from(s),Array.from(o));return n.makeTensorInfo([i.length],"int32",Int32Array.from(i))}},HD=CP({opSnippet:"return float(a != b);",cpuKernelImpl:$R,dtype:"bool"}),jD={kernelName:Un,backendName:"webgl",kernelFunc:HD};function UD(e){const{inputs:t,backend:n}=e,{input:r}=t;return dP({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}const GD={kernelName:ar,backendName:"webgl",kernelFunc:UD};const qD={kernelName:wt,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r,attrs:a}=t,{x:s}=n,{dtype:o}=a;if("complex64"===o){if("complex64"===s.dtype)return dP({inputs:{x:s},backend:r});const t=Xc(s.shape),n=e({inputs:{x:s},backend:r,attrs:{dtype:"float32"}}),a=fP({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),a}if("complex64"===s.dtype){const t=UD({inputs:{input:s},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(t),n}if(!Ce(s.dtype,o)){const e=dP({inputs:{x:s},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:o}}if("int32"===o)return function(e,t){const n=new tP(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(s,r);if("bool"===o){const e=r.makeTensorInfo([],"bool",ye("bool",1)),t=HD({inputs:{a:s,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${o}`)}},XD="return ceil(x);",KD=kP({opSnippet:XD,packedOpSnippet:XD,cpuKernelImpl:lR}),YD={kernelName:xt,backendName:"webgl",kernelFunc:KD};class JD{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class ZD{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const QD={kernelName:kt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{clipValueMin:s,clipValueMax:o}=r;let i;i=Ge().getBool("WEBGL_PACK_CLIP")?new ZD(a.shape):new JD(a.shape);const l=[[s],[o]];return n.runWebGLProgram(i,[a],a.dtype,l)}};class eL{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function tL(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const nL={kernelName:St,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,a=n.texData.get(r.dataId),s=new eL(r.shape),o=[tL(r,a.complexTensorInfos.real),tL(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(s,o,o[0].dtype)}};class rL{constructor(e){this.outputShape=[],this.outputShape=jh(e,1),this.variableNames=e.map(((e,t)=>`T${t}`));const t=new Array(e.length-1);t[0]=e[0][1];for(let n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];const n=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let e=1;e<t.length;e++){const r=t[e-1];n.push(`else if (yC < ${t[e]}) setOutput(getT${e}(yR, yC-${r}));`)}const r=t.length,a=t[t.length-1];n.push(`else setOutput(getT${r}(yR, yC-${a}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}class aL{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=jh(e,t);const n=this.outputShape,r=n.length,a=R_(r),s=XR("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(((e,t)=>`T${t}`));const i=new Array(e.length-1);i[0]=e[0][t];for(let n=1;n<i.length;n++)i[n]=i[n-1]+e[n][t];const l=o[t],u=o.slice(-2),c=o.join();let p=`if (${l} < ${i[0]}) {\n        return getChannel(\n            getT0(${c}), vec2(${u.join()}));\n        }`;for(let e=1;e<i.length;e++){const t=i[e-1];p+=`\n        if (${l} < ${i[e]}  && ${l} >= ${i[e-1]}) {\n          return getChannel(\n            getT${e}(${sL(o,l,t)}),\n            vec2(${sL(u,l,t)}));\n        }`}const d=i.length,h=i[i.length-1];p+=`\n        return getChannel(\n          getT${d}(${sL(o,l,h)}),\n          vec2(${sL(u,l,h)}));`,this.userCode=`\n      float getValue(${o.map((e=>"int "+e))}) {\n        ${p}\n      }\n\n      void main() {\n        ${a} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${s}), 0., 0., 0.);\n\n        ${s[r-1]} = ${s[r-1]} + 1;\n        if (${s[r-1]} < ${n[r-1]}) {\n          result.g = getValue(${s});\n        }\n\n        ${s[r-2]} = ${s[r-2]} + 1;\n        if (${s[r-2]} < ${n[r-2]}) {\n          result.a = getValue(${s});\n        }\n\n        ${s[r-1]} = ${s[r-1]} - 1;\n        if (${s[r-2]} < ${n[r-2]} &&\n            ${s[r-1]} < ${n[r-1]}) {\n          result.b = getValue(${s});\n        }\n        setOutput(result);\n      }\n    `}}function sL(e,t,n){const r=e.indexOf(t);return e.map(((e,t)=>t===r?`${e} - ${n}`:e)).join()}function oL(e){const{inputs:t,backend:n}=e,{input:r}=t;return dP({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}const iL={kernelName:fn,backendName:"webgl",kernelFunc:oL};function lL(e,t,n){const r=e[0].dtype;if("complex64"===r){const r=e.map((e=>UD({inputs:{input:e},backend:n}))),a=e.map((e=>oL({inputs:{input:e},backend:n}))),s=lL(r,t,n),o=lL(a,t,n),i=fP({inputs:{real:s,imag:o},backend:n});return r.forEach((e=>n.disposeIntermediateTensorInfo(e))),a.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),i}let a=n.shouldExecuteOnCPU(e);if("string"===r&&(a=!0),a){const a=e.map((e=>{const r=ie(e.shape.slice(t));return MP({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),s=a.map((e=>({vals:n.readSync(e.dataId),shape:e.shape}))),o=jh(a.map((e=>e.shape)),1),i=1===a[0].shape[0],l=uR(s,o,r,i),u=jh(e.map((e=>e.shape)),t),c=n.makeTensorInfo(u,r,l);return a.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}if(e.length>Ge().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const r=Math.floor(e.length/2),a=lL(e.slice(0,r),t,n),s=lL(e.slice(r),t,n),o=lL([a,s],t,n);return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),o}if(Ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){const a=new aL(e.map((e=>e.shape)),t);return n.runWebGLProgram(a,e,r)}const{tensors2D:s,outShape:o}=function(e,t,n){const r=jh(e.map((e=>e.shape)),t);return{tensors2D:e.map((e=>MP({inputs:{x:e},attrs:{shape:[-1,ie(e.shape.slice(t))]},backend:n}))),outShape:r}}(e,t,n),i=new rL(s.map((e=>e.shape))),l=n.runWebGLProgram(i,s,r);s.forEach((e=>n.disposeIntermediateTensorInfo(e)));const u=MP({inputs:{x:l},attrs:{shape:o},backend:n});return n.disposeIntermediateTensorInfo(l),u}function uL(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,s=ve(a,t[0].shape)[0],o=jh(t.map((e=>e.shape)),s);if(0===ie(o))return n.makeTensorInfo(o,t[0].dtype,[]);const i=t.filter((e=>ie(e.shape)>0));if(1===i.length)return dP({inputs:{x:i[0]},backend:n});return Hh(i.map((e=>e.shape)),s),lL(i,s,n)}const cL={kernelName:Et,backendName:"webgl",kernelFunc:uL};class pL{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const s=e.padInfo.top,o=e.padInfo.left,i=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,p=e.filterHeight,d=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,g=m?1:2,v=m?2:3,b=m?3:1;let y="",w="";n&&(y=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:a?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,w="result = activation(result);");const x=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${y}\n\n      const ivec2 strides = ivec2(${i}, ${l});\n      const ivec2 pads = ivec2(${s}, ${o});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${b}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${g}], coords[${v}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${p}; wR++) {\n          int xR = xRCorner + wR * ${u};\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${d}; wC++) {\n            int xC = xCCorner + wC * ${c};\n\n            if (xC < 0 || xC >= ${e.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${h}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${m}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===f}) {\n\n              if (${m}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${h}) *\n                    getW(wR, wC, ${h}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${h}, xR, xC) *\n                    getW(wR, wC, ${h}, d2);\n              }\n\n            } else if (${2===f}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${h}, d2),\n                getW(wR, wC, ${h} + 1, d2)\n              );\n\n              if (${m}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${h}),\n                  getX(batch, xR, xC, ${h} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${h}, xR, xC),\n                  getX(batch, ${h} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===f}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${h}, d2),\n                getW(wR, wC, ${h} + 1, d2),\n                getW(wR, wC, ${h} + 2, d2)\n              );\n\n              if (${m}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${h}),\n                  getX(batch, xR, xC, ${h} + 1),\n                  getX(batch, xR, xC, ${h} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${h}, xR, xC),\n                  getX(batch, ${h} + 1, xR, xC),\n                  getX(batch, ${h} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${x}\n        ${w}\n        setOutput(result);\n      }\n    `}}class dL{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,s=e.strideHeight,o=e.strideWidth,i=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.filterDepth,p=e.filterHeight,d=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${a}, ${s}, ${o});\n      const ivec3 pads = ivec3(${t}, ${n}, ${r});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${c}; wF++) {\n          int xF = xFCorner + wF * ${i};\n\n          if (xF < 0 || xF >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${p}; wR++) {\n            int xR = xRCorner + wR * ${l};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${d}; wC++) {\n              int xC = xCCorner + wC * ${u};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${h}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===f}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${h}) *\n                  getW(wF, wR, wC, ${h}, d2);\n              } else if (${2===f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${h}),\n                  getX(batch, xF, xR, xC, ${h} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${h}, d2),\n                  getW(wF, wR, wC, ${h} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${h}),\n                  getX(batch, xF, xR, xC, ${h} + 1),\n                  getX(batch, xF, xR, xC, ${h} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${h}, d2),\n                  getW(wF, wR, wC, ${h} + 1, d2),\n                  getW(wF, wR, wC, ${h} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class hL{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=V_(this.outputShape.length);const{dataFormat:n}=t,r=v_(),a="channelsLast"===n,s=a?0:1,o=a?1:2,i=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":`if(blockIndex < ${e[1]} && pos < ${e[0]}) {`;let l="";for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)l+=`\n          blockIndex = rc.y + ${t};\n          pos = rc.x + ${e};\n\n          ${i}\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[${s}] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[${o}] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (${a}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*e+t}] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*e+t}] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${l}\n\n        ${r.output} = result;\n      }\n    `}}function fL({x:e,filter:t,convInfo:n,backend:r,bias:a=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:i=null}){const l=e.shape,u=r.texData.get(e.dataId),c=n.inChannels,p=l[0]*l[1]*l[2],d=n.outChannels,h="channelsLast"===n.dataFormat;let f;const m=[];if(!((1===p||1===d)&&c>1e3)&&u.isPacked&&h&&null!=u.texture&&l[2]%2!=0&&ue(u.shape.slice(-3),l.slice(-3))){const c=l[0]*l[1]*(l[2]+1),p={dataId:e.dataId,shape:[1,c,n.inChannels],dtype:e.dtype},d=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,re(l_(u.shape,p.shape),(()=>`packed reshape ${u.shape} to ${p.shape} isn't free`));const h=MP({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});m.push(h);const g=jP({a:p,b:h,backend:r,transposeA:false,transposeB:false,bias:a,activation:i,preluActivationWeights:s,leakyreluAlpha:o}),v=r.texData.get(g.dataId);re(v.isPacked,(()=>"batchMatMul result is expected to be packed")),u.shape=d,v.shape=n.outShape,f=dP({inputs:{x:g},backend:r}),f.shape=n.outShape,m.push(g)}else{const u=MP({inputs:{x:e},backend:r,attrs:{shape:[1,h?l[0]*l[1]*l[2]:l[0]*l[2]*l[3],n.inChannels]}}),c=MP({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),p=jP({a:u,b:c,transposeA:false,transposeB:false,backend:r,bias:a,activation:i,preluActivationWeights:s,leakyreluAlpha:o});f=MP({inputs:{x:p},backend:r,attrs:{shape:n.outShape}}),m.push(u),m.push(c),m.push(p)}for(const e of m)r.disposeIntermediateTensorInfo(e);return f}function mL({x:e,filter:t,convInfo:n,backend:r,bias:a=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:i=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:p,outHeight:d,dataFormat:h}=n,f="channelsLast"===h,m=l*u*c,g=d*p,v=[m,g],b=[],y=MP({inputs:{x:e},backend:r,attrs:{shape:e.shape.slice(1)}}),w=MP({inputs:{x:t},backend:r,attrs:{shape:[1,m,ie(t.shape)/m]}});b.push(y),b.push(w);const x=new hL(v,n),k=[y.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],C=r.runWebGLProgram(x,[y],"float32",k),S=MP({inputs:{x:C},backend:r,attrs:{shape:[1,v[0],v[1]]}});b.push(C),b.push(S);const E=null!=a,T=null!=s,$="leakyrelu"===i,I=i?SP(i,!0):null,N=new EP(S.shape,w.shape,[1,g,n.outChannels],!0,!1,E,I,T,$),O=[S,w];if(a&&O.push(a),T&&O.push(s),$){const e=r.makeTensorInfo([],"float32",Aa(o,"float32"));O.push(e),b.push(e)}const A=r.runWebGLProgram(N,O,"float32"),M=MP({inputs:{x:A},backend:r,attrs:{shape:f?[1,d,p,n.outChannels]:[1,n.outChannels,d,p]}});b.push(A);for(const e of b)r.disposeIntermediateTensorInfo(e);return M}const gL={kernelName:Tt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:o,pad:i,dataFormat:l,dilations:u,dimRoundingMode:c}=r,p=du(l),d=ru(a.shape,s.shape,o,u,i,c,!1,p);let h;if(1!==d.filterHeight||1!==d.filterWidth||1!==d.dilationHeight||1!==d.dilationWidth||1!==d.strideHeight||1!==d.strideWidth||"SAME"!==d.padInfo.type&&"VALID"!==d.padInfo.type)if(Ge().getBool("WEBGL_CONV_IM2COL")&&1===a.shape[0])h=mL({x:a,filter:s,convInfo:d,backend:n});else{const e=new pL(d);h=n.runWebGLProgram(e,[a,s],"float32")}else h=fL({x:a,filter:s,convInfo:d,backend:n});const f=MP({inputs:{x:h},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(h),f}};class vL{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,s="channelsLast"===e.dataFormat;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${a};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              if (${s}) {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class bL{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,s="channelsLast"===e.dataFormat,o=t-1-e.padInfo.top,i=n-1-e.padInfo.left,l=s?1:2,u=s?2:3,c=s?3:1;this.userCode=`\n      const ivec2 pads = ivec2(${o}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${c}];\n\n        ivec2 dyCorner = ivec2(coords[${l}], coords[${u}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${a}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n\n              if (${s}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class yL{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,s=e.padInfo.top,o=e.padInfo.left;this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yF = 0; yF < ${e.outDepth}; yF++) {\n            int xF = wF + yF * ${t} - ${a};\n\n            if (xF < 0 || xF >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${e.outHeight}; yR++) {\n              int xR = wR + yR * ${n} - ${s};\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${e.outWidth}; yC++) {\n                int xC = wC + yC * ${r} - ${o};\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class wL{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,s=e.strideHeight,o=e.strideWidth,i=t-1-e.padInfo.front,l=n-1-e.padInfo.top,u=r-1-e.padInfo.left;this.userCode=`\n      const ivec3 pads = ivec3(${i}, ${l}, ${u});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${t}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${a}.0;\n\n          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${t} - 1 - wF;\n\n          for (int wR = 0; wR < ${n}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${s}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${n} - 1 - wR;\n\n            for (int wC = 0; wC < ${r}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${o}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${r} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const xL={kernelName:$t,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:o,pad:i,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,p=du(l),d=ru(a.shape,c,o,1,i,u,!1,p),h=new vL(d);return n.runWebGLProgram(h,[a,s],"float32")}};const kL={kernelName:It,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{inputShape:o,strides:i,pad:l,dataFormat:u,dimRoundingMode:c}=r,p=du(u),d=ru(o,s.shape,i,1,l,c,!1,p),h=new bL(d);return n.runWebGLProgram(h,[a,s],"float32")}};const CL={kernelName:Nt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:o,pad:i,dilations:l}=r,u=au(a.shape,s.shape,o,l,i),c=new dL(u);return n.runWebGLProgram(c,[a,s],"float32")}};const SL={kernelName:Ot,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:o,pad:i,filterShape:l}=r,u=au(a.shape,l,o,1,i),c=new yL(u);return n.runWebGLProgram(c,[a,s],"float32")}};const EL={kernelName:At,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{pad:o,strides:i,inputShape:l}=r,u=au(l,s.shape,i,1,o),c=new wL(u);return n.runWebGLProgram(c,[a,s],"float32")}},TL=kP({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),$L={kernelName:Mt,backendName:"webgl",kernelFunc:TL},IL=kP({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),NL={kernelName:_t,backendName:"webgl",kernelFunc:IL};class OL{constructor(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[s,o,i,l]=e,[u]=t,[c,p]=n;this.outputShape=[u,c,p,l];const d="bilinear"===r?1:0,[h,f]=[o-1+".0",i-1+".0"],[m,g,v]=c>1?[""+(o-1)/(c-1),"(y2-y1) * height_ratio",`y1*${h} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${h}`],[b,y,w]=p>1?[""+(i-1)/(p-1),"(x2-x1) * width_ratio",`x1*${f} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${f}`];this.userCode=`\n      const float height_ratio = float(${m});\n      const float width_ratio = float(${b});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${s}) {\n          return;\n        }\n\n        float height_scale = ${g};\n        float width_scale = ${y};\n\n        float in_y = ${v};\n        if( in_y < 0.0 || in_y > ${h} ) {\n          setOutput(float(${a}));\n          return;\n        }\n        float in_x = ${w};\n        if( in_x < 0.0 || in_x > ${f} ) {\n          setOutput(float(${a}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${d} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}const AL={kernelName:Dt,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:s,boxInd:o}=t,{cropSize:i,method:l,extrapolationValue:u}=r,c=new OL(a.shape,s.shape,i,l,u);return n.runWebGLProgram(c,[a,s,o],"float32")}};class ML{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=e;const r=e.length,a=t?"1.0":`getX(${_L(r,"coords")})`,s=e[e.length-1];let o="",i="";t?(o=n?"end != "+(s-1):"end != 0",i=n?"end + 1":"end - 1"):(o=n?`end + pow2 < ${s}`:"end >= pow2",i=n?"end + pow2":"end - pow2"),this.userCode=`\n      void main() {\n        ${R_(r)} coords = getOutputCoords();\n        int end = ${RL(r,"coords")};\n        float val = ${a};\n        int pow2 = int(pow(2.0, index));\n        if (${o}) {\n          int idx = ${i};\n          ${RL(r,"coords")} = idx;\n          val *= getX(${_L(r,"coords")});\n        }\n        setOutput(val);\n      }\n    `}}function _L(e,t){if(1===e)return`${t}`;if(2===e)return`${t}.x, ${t}.y`;if(3===e)return`${t}.x, ${t}.y, ${t}.z`;if(4===e)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw Error(`Cumulative product for rank ${e} is not yet supported`)}function RL(e,t){if(1===e)return`${t}`;if(2===e)return`${t}.y`;if(3===e)return`${t}.z`;if(4===e)return`${t}.w`;throw Error(`Cumulative product for rank ${e} is not yet supported`)}const PL={kernelName:Rt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,exclusive:o,reverse:i}=r,l=a.shape.length,u=Dc([s],l);let c=a;null!=u&&(c=WP({inputs:{x:a},backend:n,attrs:{perm:u}}));const p=Bc(1,l)[0];if(p!==l-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${a.shape.length-1} but got axis=${s}`);const d=c.shape[p];let h=dP({inputs:{x:c},backend:n});for(let e=0;e<=Math.ceil(Math.log2(d))-1;e++){const t=new ML(c.shape,!1,i),r=[[e]],a=h;h=n.runWebGLProgram(t,[h],h.dtype,r),n.disposeIntermediateTensorInfo(a)}if(o){const e=new ML(c.shape,o,i),t=h;h=n.runWebGLProgram(e,[h],h.dtype),n.disposeIntermediateTensorInfo(t)}if(null!=u){const e=WP({inputs:{x:h},backend:n,attrs:{perm:Lc(u)}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(c),e}return h}};class DL{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=e;const r=e.length,a=t?"0.0":`getX(${LL(r,"coords")})`,s=e[e.length-1];let o="",i="";t?(o=n?"end != "+(s-1):"end != 0",i=n?"end + 1":"end - 1"):(o=n?`end + pow2 < ${s}`:"end >= pow2",i=n?"end + pow2":"end - pow2"),this.userCode=`\n      void main() {\n        ${R_(r)} coords = getOutputCoords();\n        int end = ${BL(r,"coords")};\n        float val = ${a};\n        int pow2 = int(pow(2.0, index));\n        if (${o}) {\n          int idx = ${i};\n          ${BL(r,"coords")} = idx;\n          val += getX(${LL(r,"coords")});\n        }\n        setOutput(val);\n      }\n    `}}function LL(e,t){if(1===e)return`${t}`;if(2===e)return`${t}.x, ${t}.y`;if(3===e)return`${t}.x, ${t}.y, ${t}.z`;if(4===e)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}function BL(e,t){if(1===e)return`${t}`;if(2===e)return`${t}.y`;if(3===e)return`${t}.z`;if(4===e)return`${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}const FL={kernelName:Pt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,exclusive:o,reverse:i}=r,l=a.shape.length,u=Dc([s],l);let c=a;null!=u&&(c=WP({inputs:{x:a},backend:n,attrs:{perm:u}}));const p=Bc(1,l)[0];if(p!==l-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${a.shape.length-1} but got axis=${s}`);const d=c.shape[p];let h=dP({inputs:{x:c},backend:n});for(let e=0;e<=Math.ceil(Math.log2(d))-1;e++){const t=new DL(c.shape,!1,i),r=[[e]],a=h;h=n.runWebGLProgram(t,[h],h.dtype,r),n.disposeIntermediateTensorInfo(a)}if(o){const e=new DL(c.shape,o,i),t=h;h=n.runWebGLProgram(e,[h],h.dtype),n.disposeIntermediateTensorInfo(t)}if(null!=u){const e=WP({inputs:{x:h},backend:n,attrs:{perm:Lc(u)}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(c),e}return h}};const zL={kernelName:Lt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:s}=t,{size:o,binaryOutput:i}=r;if(1===a.shape.length){const e=n.readSync(a.dataId),t=n.readSync(s.dataId),r=oR(e,t,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,r)}if(2===a.shape.length){const e=n.bufferSync(a),t=n.bufferSync(s),r=iR(e,t,o,i);return n.makeTensorInfo(r.shape,s.dtype,r.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}};class VL{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${t};\n      int offset_h = imod(h, ${t});\n      int in_w = w / ${t};\n      int offset_w = imod(w, ${t});\n      int offset_d = (offset_h * ${t} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const WL={kernelName:Bt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:s,dataFormat:o}=r,i=a.shape[0],l=("NHWC"===o?a.shape[1]:a.shape[2])*s,u=("NHWC"===o?a.shape[2]:a.shape[3])*s,c=("NHWC"===o?a.shape[3]:a.shape[1])/(s*s),p=new VL("NHWC"===o?[i,l,u,c]:[i,c,l,u],s,o);return n.runWebGLProgram(p,[a],a.dtype)}};class HL{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=V_(this.outputShape.length);const s=e.filterHeight,o=e.filterWidth,i=e.outChannels/e.inChannels;let l="",u="";n&&(l=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:a?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,u="result = activation(result);");const c=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${l}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${i};\n        int q = d2 - d1 * ${i};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${s}; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${o}; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${c}\n        ${u}\n        setOutput(result);\n      }\n    `}}class jL{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=V_(this.outputShape.length);const s=e.outChannels/e.inChannels,o=e.padInfo.left,i=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,p=c;let d="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let e=0;e<c;e++)d+=`\n          vec4 xTexelC${2*e};\n          int xTexelC${2*e}Ready;\n          vec4 xTexelC${2*e+1};\n          int xTexelC${2*e+1}Ready;\n          vec4 xC${e};`;d+=`\n    for (int r = 0; r < ${u}; r++) {\n      `;for(let e=0;e<c;e++)d+=`\n          xTexelC${2*e} = vec4(0.0);\n          xTexelC${2*e}Ready = 0;\n          xTexelC${2*e+1} = vec4(0.0);\n          xTexelC${2*e+1}Ready = 0;\n          xC${e} = vec4(0.0);`;d+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let e=0;e<(p+1)/2;e++){const t=2*e;if(d+=`\n          xC = xCCorner + ${t*l};\n          `,1===i){if(t<c&&(o%2==1?(d+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n              `,d+=1===l&&t>0?`\n                xC${t} = vec4(xTexelC${t-2}.zw, xTexelC${t}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${t} = vec4(previous.zw, xTexelC${t}.xy);\n                  } else {\n                    xC${t} = vec4(0.0, 0.0, xTexelC${t}.xy);\n                  }\n                  `):d+=`\n                if (xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                xC${t} = xTexelC${t};\n                `,t+1<c)){const e=o%2==0?Z(l):l;l%2==0&&o%2==1||l%2!=0&&o%2!=1?(d+=`\n                  xCOffset = xC + imod(pads[1], 2) + ${e};\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                    xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC${t+1}.zw = vec2(0.0);\n                    }\n                    xTexelC${t+1}Ready = 1;\n                  }\n                  `,l>1&&(d+=`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                      xTexelC${t} = getX(batch, xR, xCOffset, d1);\n                      xTexelC${t}Ready = 1;\n                    }\n                    `),d+=`\n                  xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.xy);\n                  `):d+=1===e?`\n                    xC${t+1} = xTexelC${t};\n                    `:`\n                    xCOffset = xC + ${e};\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                      xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC${t+1}.zw = vec2(0.0);\n                      }\n                      xTexelC${t+1}Ready = 1;\n                    }\n\n                    xC${t+1} = xTexelC${t+1};\n                    `}}else t<c&&(o%2==1?(d+=`\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${t+1}Ready == 0) {\n                  xTexelC${t+1} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC${t+1}.zw = vec2(0.0);\n                  }\n                  xTexelC${t+1}Ready = 1;\n                }\n\n                xC${t} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n              `,t+1<c&&(d+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${t+1} = vec4(xTexelC${t+1}.xy, final.xy);\n                `)):(d+=`\n                if(xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                  xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t+1}.zw = vec2(0.);\n                  }\n                  xTexelC${t+1}Ready = 1;\n                }\n\n                xC${t} = vec4(\n                  xTexelC${t}.xy, xTexelC${t+1}.xy);\n              `,t+1<c&&(d+=`\n                  xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n                `)));t<c&&(d+=`\n            wTexel = getW(r, ${t}, d1, q);\n            dotProd += xC${t} * vec4(wTexel.xz, wTexel.xz);\n          `,t+1<c&&(d+=`\n              wTexel = getW(r, ${t+1}, d1, q);\n              dotProd += xC${t+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}d+="\n    }\n  ",d+="\n      }\n    ";let h="",f="";n&&(h=r?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:a?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`vec4 activation(vec4 x) {\n          ${n}\n        }`,f="result = activation(result);");const m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${h}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${s};\n        int q = d2 - d1 * ${s};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${d}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${m}\n        ${f}\n        setOutput(result);\n      }\n    `}}const UL={kernelName:Ft,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:o,pad:i,dilations:l,dimRoundingMode:u}=r;let c=l;null==c&&(c=[1,1]),re(pu(o,c),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`));const p=ru(a.shape,s.shape,o,c,i,u,!0);let d;d=Ge().getBool("WEBGL_PACK_DEPTHWISECONV")&&p.strideWidth<=2&&p.outChannels/p.inChannels==1?new jL(p):new HL(p);const h=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];return n.runWebGLProgram(d,[a,s],"float32",h)}};class GL{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${s} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${a};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class qL{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,s=t-1-e.padInfo.top,o=n-1-e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${s}, ${o});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${a}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${i}; dm++) {\n              int d2 = d1 * ${i} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const XL={kernelName:zt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:o,dilations:i,pad:l,dimRoundingMode:u,filterShape:c}=r,p=ru(a.shape,c,o,i,l,u,!0),d=new GL(p);return n.runWebGLProgram(d,[a,s],"float32")}};const KL={kernelName:Vt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{strides:o,dilations:i,pad:l,dimRoundingMode:u,inputShape:c}=r,p=ru(c,s.shape,o,i,l,u,!0),d=new qL(p);return n.runWebGLProgram(d,[a,s],"float32")}};class YL{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const JL={kernelName:Wt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,a=[...r.shape,...r.shape],s=ie(r.shape),o=MP({inputs:{x:r},backend:n,attrs:{shape:[s]}}),i=new YL(s),l=n.runWebGLProgram(i,[o],o.dtype),u=MP({inputs:{x:l},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}};class ZL{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:r,strideHeight:a,strideWidth:s,filterHeight:o,filterWidth:i,dilationHeight:l,dilationWidth:u}=e,{top:c,left:p}=r;this.userCode=`\n      const ivec2 strides = ivec2(${a}, ${s});\n      const ivec2 pads = ivec2(${c}, ${p});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${o}; h++) {\n          int hIn = hBeg + h * ${l};\n\n          if (hIn >= 0 && hIn < ${t}) {\n            for (int w = 0; w < ${i}; w++) {\n              int wIn = wBeg + w * ${u};\n\n              if (wIn >= 0 && wIn < ${n}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}const QL={kernelName:Ht,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:o,pad:i,dilations:l}=r,u=eu(a.shape,s.shape,o,i,"NHWC",l);let c;const p=new ZL(u);c=n.runWebGLProgram(p,[a,s],"float32");const d=MP({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),d}};const eB={kernelName:qt,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,s=t,{allDims:o,summedDims:i,idDims:l}=bf(a,s.length);wf(o.length,l,s);const{path:u,steps:c}=xf(i,l),p=c.length;let d=null,h=o.length;const f=[];for(let e=0;e<p;++e){for(const t of c[e]){const{permutationIndices:e,expandDims:r}=yf(h,l[t]);let a;kf(e)?a=s[t]:(a=WP({inputs:{x:s[t]},backend:n,attrs:{perm:e}}),f.push(a));const o=a.shape.slice();for(let e=0;e<r.length;++e)o.splice(r[e],0,1);ue(a.shape,o)||(a=MP({inputs:{x:a},backend:n,attrs:{shape:o}}),f.push(a)),null===d?d=a:(d=OP({inputs:{a:a,b:d},backend:n}),f.push(d))}e<p-1&&(u[e]>=0&&(d=zP({inputs:{x:d},backend:n,attrs:{axis:u[e]-(o.length-h),keepDims:!1}}),f.push(d)),h--)}for(const e of f)e!==d&&n.disposeIntermediateTensorInfo(e);return d}},tB=kP({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),nB={kernelName:Xt,backendName:"webgl",kernelFunc:tB},rB={kernelName:Kt,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:r,y:a}=t,s=Ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pP("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new cP("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(s,[r,a],r.dtype)}},aB=CP({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:cR}),sB={kernelName:Jt,backendName:"webgl",kernelFunc:aB},oB=kP({opSnippet:`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${tf};\n  float a1 = ${nf};\n  float a2 = ${rf};\n  float a3 = ${af};\n  float a4 = ${sf};\n  float a5 = ${of};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`}),iB={kernelName:Yt,backendName:"webgl",kernelFunc:oB},lB=kP({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:pR,dtype:"float32"}),uB={kernelName:Zt,backendName:"webgl",kernelFunc:lB};function cB(e){const{inputs:t,attrs:n,backend:r}=e,{dim:a}=n,{input:s}=t,o=s.shape.length,i=s.shape.slice();let l=a;return a<0&&(re(-(o+1)<=a,(()=>`Axis must be in the interval [${-(o+1)}, ${o}]`)),l=o+a+1),i.splice(l,0,1),MP({inputs:{x:s},backend:r,attrs:{shape:i}})}const pB={kernelName:Qt,backendName:"webgl",kernelFunc:cB},dB="return exp(x) - 1.0;",hB=kP({opSnippet:dB,packedOpSnippet:dB,cpuKernelImpl:dR}),fB={kernelName:en,backendName:"webgl",kernelFunc:hB};class mB{constructor(e,t,n){this.variableNames=["real","imag"];const r=t[1];this.outputShape=t;const a=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,s=n?`${r}.0`:"1.0";let o;if("real"===e)o="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);o="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${a};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${o}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${r});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${r}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${s};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}function gB(e,t,n){const r=n.texData.get(e.dataId),a=ie(e.shape),s=e.shape[e.shape.length-1],o=MP({inputs:{x:e},backend:n,attrs:{shape:[a/s,s]}}),i=o.shape,l=new mB("real",i,t),u=new mB("imag",i,t),c=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:i},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:i}],p=n.runWebGLProgram(l,c,"float32"),d=n.runWebGLProgram(u,c,"float32"),h=fP({inputs:{real:p,imag:d},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d);const f=MP({inputs:{x:h},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(h),f}const vB={kernelName:tn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return gB(r,!1,n)}};class bB{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function yB(e){const{backend:t,attrs:n}=e,{shape:r,value:a}=n;let{dtype:s}=n;if(s=s||Oe(a),"string"===s){const e=we(s,ie(r));return e.fill(a),t.makeTensorInfo(r,s,e)}{const e=new bB(r,a),n=[[a]];return t.runWebGLProgram(e,[],s,n)}}const wB={kernelName:nn,backendName:"webgl",kernelFunc:yB};class xB{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${t} - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${t}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const kB={kernelName:rn,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{const{image:n}=e,r=t,a=new xB(n.shape);return r.runWebGLProgram(a,[n],n.dtype)}},CB="return floor(x);",SB=kP({opSnippet:CB,packedOpSnippet:CB,cpuKernelImpl:hR}),EB={kernelName:an,backendName:"webgl",kernelFunc:SB},TB=CP({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),$B={kernelName:sn,backendName:"webgl",kernelFunc:TB};class IB{constructor(e){this.variableNames=["A"];const t=v_(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);\n\n        vec4 values = ${t.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}class NB{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=v_(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${r}.0, ${n}.0);\n            vec4 values = ${t.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${t.output} = result;\n      }\n    `}}const OB={kernelName:Qr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:a}=t;const{numChannels:s}=r,o="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,i="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,[l,u]=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=[u,l],p=[u,l,s];(i||o)&&(null==AB&&(AB=document.createElement("canvas").getContext("2d")),AB.canvas.width=l,AB.canvas.height=u,AB.drawImage(a,0,0,l,u),a=AB.canvas);const d=n.makeTensorInfo(c,"int32");n.texData.get(d.dataId).usage=FM.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),a);const h=Ge().getBool("WEBGL_PACK")?new NB(p):new IB(p),f=n.runWebGLProgram(h,[d],"int32");return n.disposeData(d.dataId),f}};let AB;const MB={kernelName:na,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s,bias:o,preluActivationWeights:i}=t,{strides:l,pad:u,dataFormat:c,dilations:p,dimRoundingMode:d,activation:h,leakyreluAlpha:f}=r,m=du(c),g=ru(a.shape,s.shape,l,p,u,d,!1,m);let v;const b=[];if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(Ge().getBool("WEBGL_CONV_IM2COL")&&1===a.shape[0])v=mL({x:a,filter:s,convInfo:g,backend:n,bias:o,activation:h,preluActivationWeights:i,leakyreluAlpha:f});else{const e=null!=o,t=null!=i,r="leakyrelu"===h,l=h?SP(h,!1):null,u=new pL(g,e,l,t,r),c=[a,s];if(o&&c.push(o),i&&c.push(i),r){const e=n.makeTensorInfo([],"float32",Aa(f,"float32"));c.push(e),b.push(e)}v=n.runWebGLProgram(u,c,"float32")}else v=fL({x:a,filter:s,convInfo:g,backend:n,bias:o,activation:h,preluActivationWeights:i,leakyreluAlpha:f});const y=MP({inputs:{x:v},backend:n,attrs:{shape:g.outShape}});return b.push(v),b.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}};const _B={kernelName:ra,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s,bias:o,preluActivationWeights:i}=t,{strides:l,pad:u,dilations:c,dimRoundingMode:p,activation:d,leakyreluAlpha:h}=r,f=[];let m=c;null==m&&(m=[1,1]),re(pu(l,m),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`));const g=ru(a.shape,s.shape,l,m,u,p,!0),v=Ge().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels==1,b=d?SP(d,v):null,y=[a,s],w=null!=o,x=null!=i,k="leakyrelu"===d;if(w&&y.push(o),x&&y.push(i),k){const e=n.makeTensorInfo([],"float32",Aa(h,"float32"));y.push(e),f.push(e)}let C;C=v?new jL(g,w,b,x,k):new HL(g,w,b,x,k);const S=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],E=n.runWebGLProgram(C,y,"float32",S);return f.forEach((e=>n.disposeIntermediateTensorInfo(e))),E}};class RB{constructor(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;const r=R_(t.length),a=R_(n.length),s=this.sliceDim>1?"strides[j]":"strides";this.userCode=`\n        ${r} strides = ${r}(${this.strides});\n         void main() {\n          ${a} coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ${this.sliceDim}; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ${s};\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      `}}const PB={kernelName:un,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:a}=t,s=a.shape,o=s[s.length-1],i=ie(r.shape),[l,u,c,p]=ci(r,a),d=MP({inputs:{x:a},backend:n,attrs:{shape:[u,o]}}),h=MP({inputs:{x:r},backend:n,attrs:{shape:[ie(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){const e=n.readSync(a.dataId),t=n.bufferSync(r),s=fR(e,t,r.dtype,u,o,c,p,r.shape,i);return n.makeTensorInfo(l,r.dtype,s.values)}const f=new RB(o,p,[u,c]),m=n.runWebGLProgram(f,[h,d],h.dtype),g=MP({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}};class DB{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=R_(this.rank),r=function(e,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let t=0;t<e.length;t++)2===t?r.push("index"):r.push(`${n[t]}`);return r.join()}(e);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;\n        setOutput(inBounds * getA(${r}));\n      }\n    `}}function LB(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,indices:s}=t,{axis:o,batchDims:i}=r,l=ve(o,a.shape)[0];if(Ge().get("DEBUG")){const e=n.readSync(s.dataId),t=a.shape[l];for(let n=0;n<e.length;++n){const r=e[n];re(r<=t-1&&r>=0,(()=>`GatherV2: the index value ${r} is not in [0, ${t-1}]`))}}const u=Ff(a,s,l,i),c=ie(s.shape),p=[],d=MP({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),h=MP({inputs:{x:s},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});p.push(d),p.push(h);const f=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([a,s])||"string"===a.dtype){const e=n.bufferSync(h),t=n.bufferSync(d),r=mR(t,e,f);return p.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(u.outputShape,r.dtype,r.values)}const m=new DB(d.shape,f),g=n.runWebGLProgram(m,[d,h],d.dtype);p.push(g);const v=MP({inputs:{x:g},backend:n,attrs:{shape:u.outputShape}});return p.forEach((e=>n.disposeIntermediateTensorInfo(e))),v}const BB={kernelName:ln,backendName:"webgl",kernelFunc:LB},FB=CP({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:gR,dtype:"bool"}),zB={kernelName:cn,backendName:"webgl",kernelFunc:FB},VB=CP({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:vR}),WB={kernelName:pn,backendName:"webgl",kernelFunc:VB};const HB={kernelName:hn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return gB(r,!0,n)}},jB=kP({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),UB={kernelName:mn,backendName:"webgl",kernelFunc:jB},GB=kP({opSnippet:"return float(isinf(x));",dtype:"bool"}),qB={kernelName:gn,backendName:"webgl",kernelFunc:GB},XB=kP({opSnippet:"return float(isnan(x));",dtype:"bool"}),KB={kernelName:vn,backendName:"webgl",kernelFunc:XB},YB=CP({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:bR,dtype:"bool"}),JB={kernelName:yn,backendName:"webgl",kernelFunc:YB},ZB=CP({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:yR,dtype:"bool"}),QB={kernelName:wn,backendName:"webgl",kernelFunc:ZB};const eF={kernelName:xn,backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:a,num:s}=n,o=wR(r,a,s);return t.makeTensorInfo([o.length],"float32",o)}},tF=kP({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:xR}),nF={kernelName:kn,backendName:"webgl",kernelFunc:tF},rF=kP({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),aF={kernelName:Cn,backendName:"webgl",kernelFunc:rF},sF=CP({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),oF={kernelName:Sn,backendName:"webgl",kernelFunc:sF},iF=kP({opSnippet:"return float(!(x >= 1.0));"}),lF={kernelName:En,backendName:"webgl",kernelFunc:iF},uF=CP({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),cF={kernelName:Tn,backendName:"webgl",kernelFunc:uF};class pF{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];const s=t,o=e[3]-1;let i;this.outputShape=e;const l=`float(${n}) + float(${r}) * sum`;i=.5===a?`inversesqrt(${l})`:1===a?`1.0/(${l})`:`exp(log(${l}) * float(-${a}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${s}; j <= ${s}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${o}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${i};\n        setOutput(val);\n      }\n    `}}class dF{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const s=t,o=e[3]-1;let i;this.outputShape=e;const l=`float(${n}) + float(${r}) * sum`;i=.5===a?`inversesqrt(${l})`:1===a?`1.0/(${l})`:`exp(log(${l}) * float(-${a}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${s};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${s}; j <= ${s}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${i};\n        setOutput(result);\n      }\n    `}}const hF={kernelName:In,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:s,bias:o,alpha:i,beta:l}=r,u=Ge().getBool("WEBGL_PACK_NORMALIZATION")?new dF(a.shape,s,o,i,l):new pF(a.shape,s,o,i,l);return n.runWebGLProgram(u,[a],a.dtype)}};class fF{constructor(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${t})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${t} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${r}) * norm + float(${n});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${r})\n                * float(${a})\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${a});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}const mF={kernelName:Nn,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a,y:s,dy:o}=t,{depthRadius:i,bias:l,alpha:u,beta:c}=r,p=new fF(a.shape,i,l,u,c);return n.runWebGLProgram(p,[a,s,o],a.dtype)}};function gF(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reductionIndices:s,keepDims:o}=r,i=a.shape.length,l=ve(s,a.shape);let u=l;const c=Dc(u,i),p=null!=c,d=n.shouldExecuteOnCPU([a]);let h=a;if(p){if(d){const e=n.texData.get(h.dataId).values,t=new Array(i);for(let e=0;e<t.length;e++)t[e]=a.shape[c[e]];const r=UR(e,a.shape,a.dtype,c,t);h=n.makeTensorInfo(t,a.dtype);n.texData.get(h.dataId).values=r}else h=FP(a,c,n);u=Bc(u.length,i)}Pc("max",u,i);const[f,m]=_c(h.shape,u);let g,v=f;if(o&&(v=Rc(f,l)),d){const e=n.texData.get(h.dataId).values,t=kR(e,ie(m),v,a.dtype);g=n.makeTensorInfo(v,a.dtype);n.texData.get(g.dataId).values=t}else g=function(e,t,n,r){const a=ie(t),s=MP({inputs:{x:e},attrs:{shape:[ie(e.shape)/a,a]},backend:r}),o=DP(s,e.dtype,"max",r),i=MP({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(o),i}(h,m,v,n);return p&&n.disposeIntermediateTensorInfo(h),g}const vF={kernelName:On,backendName:"webgl",kernelFunc:gF},bF=CP({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:CR}),yF={kernelName:An,backendName:"webgl",kernelFunc:bF};const wF={kernelName:Mn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;m_(a,"maxPool");const{filterSize:s,strides:o,pad:i,dimRoundingMode:l}=r;re(pu(o,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`));const u=tu(a.shape,s,o,1,i,l);if(1===u.filterWidth&&1===u.filterHeight&&ue(u.inShape,u.outShape))return dP({inputs:{x:a},backend:n});const c=new CD(u,"max",!1);return n.runWebGLProgram(c,[a],a.dtype)}};const xF={kernelName:Rn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:s,strides:o,pad:i,dataFormat:l,dimRoundingMode:u}=r,c=nu(a.shape,s,o,[1,1,1],i,u,l),p=new SD(c,"max",!1);return n.runWebGLProgram(p,[a],a.dtype)}};class kF{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,s=e.effectiveFilterWidth,o=a-1-e.padInfo.top,i=s-1-e.padInfo.left,l=a*s-1;this.userCode=`\n      const ivec2 pads = ivec2(${o}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${a};\n          wR += ${r}) {\n          float dyR = float(dyRCorner + wR) / ${t}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${s}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${l} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${s} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class CF{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,s=e.dilationHeight,o=e.dilationWidth,i=e.effectiveFilterDepth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=i-1-e.padInfo.front,p=l-1-e.padInfo.top,d=u-1-e.padInfo.left,h=i*l*u-1;this.userCode=`\n      const ivec3 pads = ivec3(${c}, ${p}, ${d});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${i};\n           wD += ${a}) {\n          float dyD = float(dyDCorner + wD) / ${t}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${l};\n              wR += ${s}) {\n            float dyR = float(dyRCorner + wR) / ${n}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${u};\n                wC += ${o}) {\n              float dyC = float(dyCCorner + wC) / ${r}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${h} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${l} * ${u} +\n                  wR * ${u} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const SF={kernelName:Pn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,o=s,{filterSize:i,strides:l,pad:u,dimRoundingMode:c}=r,p=nu(o.shape,i,l,[1,1,1],u,c),d=new SD(p,"max",!0),h=n.runWebGLProgram(d,[o],o.dtype),f=new CF(p),m=n.runWebGLProgram(f,[a,h],o.dtype);return n.disposeIntermediateTensorInfo(h),m}};const EF={kernelName:_n,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s,output:o}=t,i=s;m_([s,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:p}=r,d=tu(i.shape,l,u,1,c,p),h=new CD(d,"max",!0),f=n.runWebGLProgram(h,[i],i.dtype),m=new kF(d),g=n.runWebGLProgram(m,[a,f],i.dtype);return n.disposeIntermediateTensorInfo(f),g}};const TF={kernelName:Dn,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:a,strides:s,pad:o,includeBatchInIndex:i}=t,l=n;re(4===r.shape.length,(()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`));const u=[1,1];re(pu(s,u),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`));const c=tu(r.shape,a,s,u,o),[p,d]=function(e,t,n,r){let a=new CD(n,"max",!1);const s=r.runWebGLProgram(a,[e],"float32");return a=new CD(n,"max",!0,!0,t),[s,r.runWebGLProgram(a,[e],"float32")]}(r,i,c,l);return[p,d]}};const $F={kernelName:Ln,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{keepDims:a,axis:s}=t,o=n,i=r.shape.length,l=ve(s,r.shape);let u=l;const c=Dc(u,i),p=null!=c,d=o.shouldExecuteOnCPU([r]),h=[];let f=r;if(p){if(d){const e=o.texData.get(f.dataId).values,t=new Array(i);for(let e=0;e<t.length;e++)t[e]=r.shape[c[e]];const n=UR(e,r.shape,r.dtype,c,t);f=o.makeTensorInfo(t,r.dtype);o.texData.get(f.dataId).values=n}else f=FP(r,c,o);h.push(f),u=Bc(u.length,i)}Pc("sum",u,i);const[m,g]=_c(f.shape,u);let v=m;a&&(v=Rc(m,l));const b=function(e,t,n,r){const a=ie(t),s=MP({inputs:{x:e},attrs:{shape:[ie(e.shape)/a,a]},backend:r}),o=DP(s,"float32","mean",r),i=MP({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(o),i}(f,g,v,o);for(const e of h)o.disposeIntermediateTensorInfo(e);return b}};const IF={kernelName:Bn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:o}=r,i=a.shape.length,l=ve(s,a.shape);let u=l;const c=Dc(u,i);let p=a;null!=c&&(p=WP({inputs:{x:a},backend:n,attrs:{perm:c}}),u=Bc(u.length,a.shape.length)),Pc("min",u,i);const[d,h]=_c(p.shape,u),f=MP({inputs:{x:p},backend:n,attrs:{shape:[-1,ie(h)]}}),m=DP(f,f.dtype,"min",n);let g;if(o){g=MP({inputs:{x:m},backend:n,attrs:{shape:Rc(d,l)}})}else g=MP({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=c&&n.disposeIntermediateTensorInfo(p),g}},NF=CP({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:SR}),OF={kernelName:Fn,backendName:"webgl",kernelFunc:NF};class AF{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,a=R_(r),s=t.map((e=>e[0])).join(","),o=t.map(((t,n)=>t[0]+e[n])).join(","),i=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),l="reflect"===n?0:1;this.userCode=1!==r?`\n      ${a} start = ${a}(${s});\n      ${a} end = ${a}(${o});\n\n      void main() {\n        ${a} outC = getOutputCoords();\n        for (int i = 0; i < ${r}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${l};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};\n          }\n        }\n        ${a} coords = outC - start;\n        setOutput(getX(${i}));\n      }\n    `:`\n        int start = ${s};\n        int end = ${o};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${l};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${l};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}class MF{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,a=R_(r),s=t.map((e=>e[0])).join(","),o=t.map(((t,n)=>t[0]+e[n])).join(","),i=XR("rc",r),l=XR("source",r),u=`${i[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${l.slice(-2).join()})`,p="reflect"===n?0:1;let d="";if(1===r){const e=`\n        ${a} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${p};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${p};\n        }\n        source -= start;\n      `;d=`\n        ${a} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${l.join()}), ${c});\n        ${i[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${l.join()}), ${c});\n        }\n      `}else{const e=`\n        ${a} source = rc;\n        ${a} lt = ${a}(lessThan(source, start));\n        ${a} gte = ${a}(greaterThanEqual(source, end));\n        ${a} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${p}) +\n                gte * ((end - 1) * 2 - source + ${p});\n        source -= start;\n      `;d=`\n        ${a} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${l.join()}), ${c});\n        ${i[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${l.join()}), ${c});\n        }\n        rc = outputLoc;\n        ${i[r-2]} += 1;\n        if(${i[r-2]} < ${this.outputShape[r-2]}) {\n          ${e}\n          result[2] = getChannel(getX(${l.join()}), ${c});\n          ${i[r-1]} += 1;\n          if(${u}) {\n            ${e}\n            result[3] = getChannel(getX(${l.join()}), ${c});\n          }\n        }\n      `}this.userCode=`\n      const ${a} start = ${a}(${s});\n      const ${a} end = ${a}(${o});\n\n      void main() {\n        ${a} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${d}\n        setOutput(result);\n      }\n    `}}const _F={kernelName:zn,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r}=e,{paddings:a,mode:s}=n,o=Ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new MF(r.shape,a,s):new AF(r.shape,a,s);return t.runWebGLProgram(o,[r],r.dtype)}},RF=CP({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),PF={kernelName:Vn,backendName:"webgl",kernelFunc:RF};class DF{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${t-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${t-1}));\n      }\n    `}}const LF=CP({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),BF={kernelName:Gt,backendName:"webgl",kernelFunc:LF},FF="return a - b;",zF=CP({opSnippet:FF,packedOpSnippet:FF,supportsComplex:!0,cpuKernelImpl:WR}),VF={kernelName:Vr,backendName:"webgl",kernelFunc:zF};function WF(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:s}=r,o=ve([s],a.shape),i=gF({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=Rc(i.shape,o),u=MP({inputs:{x:i},backend:n,attrs:{shape:l}}),c=zF({inputs:{a:a,b:u},backend:n}),p=lB({inputs:{x:c},backend:n}),d=zP({inputs:{x:p},backend:n,attrs:{axis:o,keepDims:!1}}),h=MP({inputs:{x:d},backend:n,attrs:{shape:l}}),f=LF({inputs:{a:p,b:h},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),f}const HF={kernelName:Nr,backendName:"webgl",kernelFunc:WF};const jF={kernelName:Wn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:s,seed:o,normalized:i}=r,l=i?a:WF({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),u=l.shape[0],c=l.shape[1],p=new DF(u,c,s),d=[[o]],h=n.runWebGLProgram(p,[l],"int32",d);return i||n.disposeIntermediateTensorInfo(l),h}};const UF={kernelName:jn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const e=n.texData.get(r.dataId),[t,a]=TR(e.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,t)}let a;return a=Ge().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new aP(r.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new tP(r.shape,"if (isnan(x)) return x;\n  return -x;\n"),n.runWebGLProgram(a,[r],r.dtype)}},GF=Yd;const qF={kernelName:Gn,backendName:"webgl",kernelFunc:function(e){aa("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:o,iouThreshold:i,scoreThreshold:l}=r,u=n.readSync(a.dataId),c=n.readSync(s.dataId),{selectedIndices:p}=GF(u,c,o,i,l);return n.makeTensorInfo([p.length],"int32",new Int32Array(p))}},XF=Jd;const KF={kernelName:qn,backendName:"webgl",kernelFunc:function(e){aa("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:o,iouThreshold:i,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(a.dataId),p=n.readSync(s.dataId),{selectedIndices:d,validOutputs:h}=XF(c,p,o,i,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},YF=Zd;const JF={kernelName:Xn,backendName:"webgl",kernelFunc:function(e){aa("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:o,iouThreshold:i,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(a.dataId),p=n.readSync(s.dataId),d=o,h=i,f=l,m=u,{selectedIndices:g,selectedScores:v}=YF(c,p,d,h,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}};class ZF{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${r}), float(${n}),\n                      float(index == coords.y)));\n      }\n    `}}const QF={kernelName:Yn,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{depth:s,onValue:o,offValue:i}=r,l=ie(a.shape),u=new ZF(l,s,o,i),c=MP({inputs:{x:a},backend:n,attrs:{shape:[l]}}),p=n.runWebGLProgram(u,[c],a.dtype);n.disposeIntermediateTensorInfo(c);const d=MP({inputs:{x:p},backend:n,attrs:{shape:[...a.shape,s]}});return n.disposeIntermediateTensorInfo(p),d}};function ez(e){const{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){const e=UD({inputs:{input:r},backend:n}),t=ez({inputs:{x:e},backend:n}),a=oL({inputs:{input:r},backend:n}),s=ez({inputs:{x:a},backend:n}),o=fP({inputs:{real:t,imag:s},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),o}return yB({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const tz={kernelName:Jr,backendName:"webgl",kernelFunc:ez};const nz={kernelName:Kn,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:a}=n;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){const t=UD({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r}),s=oL({inputs:{input:a},backend:r}),o=ez({inputs:{x:s},backend:r}),i=fP({inputs:{real:n,imag:o},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(o),i}return yB({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};const rz={kernelName:Jn,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(1===t.length)return cB({inputs:{input:t[0]},backend:n,attrs:{dim:a}});const s=t[0].shape,o=t[0].dtype;t.forEach((e=>{ae(s,e.shape,"All tensors passed to stack must have matching shapes"),re(o===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const i=[],l=uL({inputs:t.map((e=>{const t=cB({inputs:{input:e},backend:n,attrs:{dim:a}});return i.push(t),t})),backend:n,attrs:{axis:a}});return i.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}};class az{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,a=R_(r),s=t.map((e=>e[0])).join(","),o=t.map(((t,n)=>t[0]+e[n])).join(","),i=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\n      ${a} start = ${a}(${s});\n      ${a} end = ${a}(${o});\n\n      void main() {\n        ${a} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${a} coords = outC - start;\n          setOutput(getX(${i}));\n        }\n      }\n    `:`\n        int start = ${s};\n        int end = ${o};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}class sz{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,a=R_(r),s=t.map((e=>e[0])).join(","),o=t.map(((t,n)=>t[0]+e[n])).join(","),i=XR("rc",r),l=XR("source",r),u=`${i[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${l.slice(-2).join()})`,p=[`${a} rc = outputLoc;`,`${i[r-1]} += 1;\n       if(${u}) {\n      `,1===r?"":`}\n       rc = outputLoc;\n       ${i[r-2]} += 1;\n       if(${i[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${i[r-1]} += 1;\n         if(${u}) {`],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let h="";for(let e=0,t=1===r?2:4;e<t;e++)h+=`\n        ${p[e]}\n        if (${d}) {\n          result[${e}] = float(value);\n        } else {\n          ${a} source = rc - start;\n          result[${e}] = getChannel(getX(${l.join()}), ${c});\n        }\n      `;h+=1===r?"} ":"}}",this.userCode=`\n      const ${a} start = ${a}(${s});\n      const ${a} end = ${a}(${o});\n\n      void main() {\n        ${a} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${h}\n        setOutput(result);\n      }\n    `}}const oz=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:s,constantValue:o}=r;if(0===ie(a.shape)){const e=s.map(((e,t)=>e[0]+a.shape[t]+e[1]));return yB({backend:n,attrs:{shape:e,value:o,dtype:a.dtype}})}const i=Ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new sz(a.shape,s,o):new az(a.shape,s,o),l=[[o]];return n.runWebGLProgram(i,[a],a.dtype,l)},iz={kernelName:Zn,backendName:"webgl",kernelFunc:oz},lz=CP({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),uz={kernelName:er,backendName:"webgl",kernelFunc:lz};const cz={kernelName:nr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:o}=r,i=a.shape.length,l=[],u=ve(s,a.shape);let c=u;const p=Dc(c,i);let d,h=a;if(null!=p&&(h=WP({inputs:{x:a},backend:n,attrs:{perm:p}}),c=Bc(c.length,i),l.push(h)),Pc("prod",c,i),n.shouldExecuteOnCPU([h])){const e=n.texData.get(h.dataId).values,{outVals:t,outShape:r,outDtype:a}=IR(h.shape,h.dtype,e,c);d=n.makeTensorInfo(r,a,t)}else{const[e,t]=_c(h.shape,c),r=ie(t),s=MP({inputs:{x:h},backend:n,attrs:{shape:[-1,r]}}),o=DP(s,ss(a.dtype),"prod",n);d=MP({inputs:{x:o},backend:n,attrs:{shape:e}}),l.push(s),l.push(o)}if(o){l.push(d);const e=Rc(d.shape,u);d=MP({inputs:{x:d},backend:n,attrs:{shape:e}})}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),d}},pz=e=>{const{backend:t,attrs:n}=e,{start:r,stop:a,step:s,dtype:o}=n,i=NR(r,a,s,o);return t.makeTensorInfo([i.length],o,i)},dz={kernelName:rr,backendName:"webgl",kernelFunc:pz},hz=kP({opSnippet:"return 1.0 / x;"}),fz={kernelName:sr,backendName:"webgl",kernelFunc:hz},mz=kP({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),gz={kernelName:or,backendName:"webgl",kernelFunc:mz},vz=kP({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),bz={kernelName:dr,backendName:"webgl",kernelFunc:vz};class yz{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];const[s,o,i,l]=e;this.outputShape=[s,t,n,l];const u=[r&&t>1?o-1:o,r&&n>1?i-1:i],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];let p;p=a?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]});\n      const vec2 inputShapeRC = vec2(${o}.0, ${i}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${p};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}class wz{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,o,i,l]=e;this.outputShape=[s,t,n,l];const u=[r&&t>1?o-1:o,r&&n>1?i-1:i],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];let p;p=a?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]},\n          ${u[1]/c[1]});\n      const vec3 inputShapeRC = vec3(${o}.0, ${i}.0,\n                                     ${i}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${p};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}const xz={kernelName:cr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:s,halfPixelCenters:o,size:i}=r,[l,u]=i,c=Ge().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new wz(a.shape,l,u,s,o):new yz(a.shape,l,u,s,o);return n.runWebGLProgram(c,[a],"float32")}};class kz{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,a]=t,[,s,o]=e,i=[n&&s>1?r-1:r,n&&o>1?a-1:a],l=[n&&s>1?s-1:s,n&&o>1?o-1:o],u=i[0]/l[0],c=i[1]/l[1],p=1/u,d=1/c,h=2*Math.ceil(p)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${p});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${h});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${s}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${o}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${a-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const Cz={kernelName:pr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:s}=t,{alignCorners:o}=r,i=new kz(s.shape,a.shape,o);return n.runWebGLProgram(i,[s],s.dtype)}};class Sz{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];const[s,o,i,l]=e;this.outputShape=[s,t,n,l];const u=[r&&t>1?o-1:o,r&&n>1?i-1:i],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],p=r?"0.5":"0.0";let d;d=a?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]});\n      const vec2 inputShapeRC = vec2(${o}.0, ${i}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${d};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}class Ez{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,o,i,l]=e;this.outputShape=[s,t,n,l];const u=[r&&t>1?o-1:o,r&&n>1?i-1:i],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],p=r?"0.5":"0.0";let d;d=a?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]},\n          ${u[1]/c[1]});\n      const vec3 inputShapeRC = vec3(${o}.0, ${i}.0,\n                                     ${i}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${d};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    `}}const Tz={kernelName:lr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:s,halfPixelCenters:o,size:i}=r,[l,u]=i,c=Ge().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Ez(a.shape,l,u,s,o):new Sz(a.shape,l,u,s,o);return n.runWebGLProgram(c,[a],a.dtype)}};class $z{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,a]=t,[,s,o]=e,i=[n&&s>1?r-1:r,n&&o>1?a-1:a],l=[n&&s>1?s-1:s,n&&o>1?o-1:o],u=i[0]/l[0],c=i[1]/l[1],p=1/u,d=1/c,h=2*Math.ceil(p)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${p});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${h});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${s}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${o}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${i[0]}) *\n                (float(dyR) / float(${l[0]}));\n\n            float sourceFracCol =\n                float(${i[1]}) *\n                  (float(dyC) / float(${l[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${r}) - 1),\n                ${n} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${a}) - 1),\n                ${n} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const Iz={kernelName:ur,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:s}=t,{alignCorners:o}=r,i=new $z(s.shape,a.shape,o);return n.runWebGLProgram(i,[s],s.dtype)}};class Nz{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=e,1===n)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${e[0]} - coord - 1));\n        }\n      `);const r=e.map(((n,r)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - coords[${n}] - 1`:`coords[${n}]`)(r))).join(","),a=R_(n);this.userCode=`\n      void main() {\n        ${a} coords = getOutputCoords();\n        setOutput(getX(${r}));\n      }\n    `}}class Oz{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=e;const r=XR("rc",n),a=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,s=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,o=R_(n);function i(n){const r=e.map(((r,a)=>function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - ${r[n]} - 1`:`${r[n]}`}(a,n)));return`getChannel(getX(${r.join(",")}), vec2(${r.slice(-2).join(",")}))`}this.userCode=1===n?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${e[0]} - rc - 1),\n            ${e[0]} - rc - 1);\n          if(${a}){\n              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),\n                ${e[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${o} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function(e){return i(e)}(r.slice())};\n          if(${a}){\n            result.g = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",i(e)}(r.slice())};\n          }\n          if(${s}) {\n            result.b = ${function(e){return e[n-2]="("+e[n-2]+" + 1)",i(e)}(r.slice())};\n            if(${a}) {\n              result.a = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",i(e)}(r.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}const Az={kernelName:hr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:s}=r,o=a.shape.length,i=ve(s,a.shape);if(0===o)return dP({inputs:{x:a},backend:n});const l=Ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Oz(a.shape,i):new Nz(a.shape,i);return n.runWebGLProgram(l,[a],a.dtype)}};class Mz{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],r=e[2];this.outputShape=e;let a="";a="number"==typeof t?`float outputValue = ${t.toFixed(2)};`:`\n        vec3 fill = vec3(${t.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ${a}\n          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${n}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const _z={kernelName:ea,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:a,fillValue:s,center:o}=t,i=n,l=new Mz(r.shape,s),[u,c]=qh(o,r.shape[1],r.shape[2]),p=[[u,c,Math.sin(a),Math.cos(a)]];return i.runWebGLProgram(l,[r],r.dtype,p)}},Rz=kP({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),Pz={kernelName:fr,backendName:"webgl",kernelFunc:Rz},Dz=kP({opSnippet:"return inversesqrt(x);",cpuKernelImpl:OR}),Lz={kernelName:mr,backendName:"webgl",kernelFunc:Dz};class Bz{constructor(e,t,n,r,a,s,o=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;const i=R_(a.length),l=R_(s.length);let u="";1===n?u="i":2===n&&(u="i, j");const c=`getIndices(${u})`;let p="";1===r?p="i":2===r&&(p="i, coords[1]");const d=`getUpdates(${p})`,h=t>1?"strides[j]":"strides";this.userCode=`\n        ${i} strides = ${i}(${a});\n\n        void main() {\n          ${l} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${e}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${t}; j++) {\n              int index = round(${c});\n              flattenedIndex += index * ${h};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${d};\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      `}}const Fz={kernelName:gr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:s}=t,{shape:o}=r,{sliceRank:i,numUpdates:l,sliceSize:u,strides:c,outputSize:p}=hi(0,a,o),d=[p/u,u];if(0===p)return n.makeTensorInfo(o,a.dtype);const h=MP({inputs:{x:a},backend:n,attrs:{shape:[l,i]}}),f=MP({inputs:{x:s},backend:n,attrs:{shape:[l,u]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new Bz(l,i,h.shape.length,f.shape.length,c,d),v=n.runWebGLProgram(g,[f,h,m],f.dtype),b=MP({inputs:{x:v},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),b}};class zz{constructor(e,t,n){let r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)a="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],o=[];for(let r=0;r<t.length;r++)o.push(`${n[r]}`),r<e&&s.push(`${n[r]}`);r=s.join(),a=o.join()}const s=R_(n);this.userCode=`\n      void main() {\n        ${s} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${a}));\n        } else {\n          setOutput(getB(${a}));\n        }\n      }\n    `}}const Vz={kernelName:vr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:a,e:s}=t,o=new zz(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,s],as(a.dtype,s.dtype))}},Wz=kP({opSnippet:`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${Qh};\n  float scale = ${ef};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`}),Hz={kernelName:br,backendName:"webgl",kernelFunc:Wz},jz=kP({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:AR}),Uz={kernelName:Cr,backendName:"webgl",kernelFunc:jz},Gz=kP({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),qz={kernelName:kr,backendName:"webgl",kernelFunc:Gz},Xz=kP({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),Kz={kernelName:wr,backendName:"webgl",kernelFunc:Xz},Yz=kP({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),Jz={kernelName:xr,backendName:"webgl",kernelFunc:Yz},Zz=kP({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),Qz={kernelName:Sr,backendName:"webgl",kernelFunc:Zz},eV={kernelName:$r,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:s,paddings:o}=r;re(a.shape.length<=4,(()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"));const i=s.reduce(((e,t)=>e*t)),l=[[0,0]];l.push(...o);for(let e=1+s.length;e<a.shape.length;++e)l.push([0,0]);const u=[],c=oz({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),p=Xh(c.shape,s,i,!1),d=Kh(p.length,s.length,!1),h=Yh(c.shape,s,i,!1),f=MP({inputs:{x:c},backend:n,attrs:{shape:p}}),m=WP({inputs:{x:f},backend:n,attrs:{perm:d}}),g=MP({inputs:{x:m},backend:n,attrs:{shape:h}});return u.push(c),u.push(f),u.push(m),u.forEach((e=>n.disposeIntermediateTensorInfo(e))),g}};const tV={kernelName:Or,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:s,defaultValue:o}=t;if(1!==s.shape.length)throw new Error(`Dense shape must be a vector, saw:\n         ${s.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n         ${r.shape}`);if(1!==a.shape.length)throw new Error(`Values must be a vector, saw:\n         ${a.shape}`);if(0!==o.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${o.shape}`);const i=n.readSync(r.dataId),l=n.readSync(a.dataId),u=n.readSync(s.dataId),c=n.readSync(o.dataId)[0],[p,d,h,f,m]=RR(i,r.shape,r.dtype,l,a.dtype,u,c);return[n.makeTensorInfo(d,r.dtype,p),n.makeTensorInfo([d[0]],a.dtype,h),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};const nV={kernelName:Ar,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:s}=t;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(1!==a.shape.length)throw new Error(`Input shape should be a vector but received shape ${a.shape}`);if(1!==s.shape.length)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=Array.from(n.readSync(a.dataId)),i=n.readSync(r.dataId),l=Array.from(n.readSync(s.dataId)),[u,c,p]=PR(i,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([p.length],s.dtype,new Int32Array(p))]}};const rV={kernelName:Mr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error(`Indices should be a vector but received shape\n              ${a.shape}`);if(1!==s.shape.length)throw new Error(`Segment ids should be a vector but received shape\n              ${s.shape}`);const o=n.readSync(r.dataId),i=n.readSync(a.dataId),l=n.readSync(s.dataId),[u,c]=DR(o,r.shape,r.dtype,i,l,!0);return n.makeTensorInfo(c,r.dtype,u)}};const aV={kernelName:_r,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error(`Indices should be a vector but received shape\n             ${a.shape}`);if(1!==s.shape.length)throw new Error(`Segment ids should be a vector but received shape\n             ${s.shape}`);const o=n.readSync(r.dataId),i=n.readSync(a.dataId),l=n.readSync(s.dataId),[u,c]=DR(o,r.shape,r.dtype,i,l);return n.makeTensorInfo(c,r.dtype,u)}};const sV={kernelName:Rr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:a,sparseValues:s,defaultValue:o}=t,{outputShape:i}=r,{sliceRank:l,numUpdates:u,strides:c,outputSize:p}=hi(0,a,i),d=new Bz(u,l,a.shape.length,s.shape.length,c,[p,1],!1),h=n.runWebGLProgram(d,[s,a,o],s.dtype),f=MP({inputs:{x:h},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),f}};const oV={kernelName:Ir,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:s,axis:o}=r,i=ve(o,a.shape)[0],l=Sf(a,s,i),u=a.shape.length,c=new Array(u).fill(0),p=a.shape.slice();return l.map((e=>{const t=[...p];t[i]=e;const r=BD({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[i]+=e,r}))}},iV="return sqrt(x);",lV=kP({opSnippet:iV,packedOpSnippet:iV,cpuKernelImpl:LR}),uV={kernelName:Er,backendName:"webgl",kernelFunc:lV},cV=kP({opSnippet:"return x * x;"}),pV={kernelName:Dr,backendName:"webgl",kernelFunc:cV},dV="return (a - b) * (a - b);",hV=CP({opSnippet:dV,packedOpSnippet:dV}),fV={kernelName:Pr,backendName:"webgl",kernelFunc:hV};const mV={kernelName:Zr,backendName:"webgl",kernelFunc:function({inputs:e,attrs:t,backend:n}){const{x:r}=e,a=`if (isnan(x)) return x;\n    return x > 0.0 ? 1.0 : float(${t.alpha});\n  `,s=new tP(r.shape,a);return n.runWebGLProgram(s,[r],r.dtype)}};class gV{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,a=R_(n.length),s=R_(n.length);let o="";if(1===r)o="coords * strides + begin";else{let e=0;o=n.map(((t,r)=>(e++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${e-1}] * strides[${r}] + begin[${r}]`))).join(",")}this.userCode=`\n      ${a} begin = ${a}(${e});\n      ${a} strides = ${a}(${t});\n\n      void main() {\n        ${s} coords = getOutputCoords();\n        setOutput(getX(${o}));\n      }\n    `}}const vV={kernelName:Lr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:s,end:o,strides:i,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:p,shrinkAxisMask:d}=r,{finalShapeSparse:h,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:b,end:y,strides:w}=Ni(a.shape,s,o,i,l,u,c,p,d);let x;if(m)x=MP({inputs:{x:a},backend:n,attrs:{shape:f}});else if(g||v){re(a.shape.length>=1,(()=>`Input must have rank at least 1, got: ${a.shape.length}`));const e=gi(b,y,w),t=BD({inputs:{x:a},backend:n,attrs:{begin:b,size:e}});x=MP({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{if(n.shouldExecuteOnCPU([a])){const e=n.readSync(a.dataId),t=No(a.shape,a.dtype,e),r=BR(h,t,w,b);x=n.makeTensorInfo(f,a.dtype,r.values)}else{const e=new gV(b,w,h);x=n.runWebGLProgram(e,[a],a.dtype)}}const k=MP({inputs:{x:x},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(x),k}};const bV={kernelName:Br,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:s,leftPad:o,rightPad:i,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:p}=t,d=n.readSync(c.dataId),h=n.readSync(p.dataId),[f,m]=FR(d,h,a,s,o,i,l,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(p.shape,"int32",m)]}};const yV={kernelName:Fr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:s,delimiter:o}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(1!==s.shape.length)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(0!==o.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const i=n.readSync(s.dataId),l=n.readSync(o.dataId)[0],[u,c,p]=zR(i,l,a),d=c.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(p))]}};const wV={kernelName:zr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:s}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(s.dataId),i=VR(o,a);return n.makeTensorInfo(s.shape,"int32",i)}},xV=kP({opSnippet:"return tan(x);"}),kV={kernelName:Wr,backendName:"webgl",kernelFunc:xV},CV=kP({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),SV={kernelName:Hr,backendName:"webgl",kernelFunc:CV};class EV{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;const r=R_(this.rank),a=function(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(1===t)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let t=0;t<e.length;t++)r.push(`imod(${n[t]}, ${e[t]})`);return r.join()}(e);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${a}));\n      }\n    `}}function TV(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:s}=r;if("string"===a.dtype||a.shape.length>5){const e=n.readSync(a.dataId),t="string"===a.dtype?e.map((e=>Da(e))):e,r=No(a.shape,a.dtype,t),o=HR(r,s);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const o=new EV(a.shape,s);return n.runWebGLProgram(o,[a],a.dtype)}const $V={kernelName:jr,backendName:"webgl",kernelFunc:TV};class IV{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class NV{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function OV(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function AV(e){let t=1;for(;t<e;)t*=2;return t}const MV={kernelName:Ur,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:s,sorted:o}=r,i=Ge().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Ge().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=a.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([a])||c<i||s>l){const e=n.readSync(a.dataId),[t,r]=jR(e,u,a.dtype,s,o);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===s)return u[u.length-1]=0,[n.makeTensorInfo(u,a.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(1===c)return[a,yB({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const p=n.texData.get(a.dataId),d=null!==p&&p.isPacked,h=d?n.unpackTensor(a):a,f=ie(u)/c,m=MP({inputs:{x:h},attrs:{shape:[f,c]},backend:n});d&&OV(n,h);const g=AV(s),v=AV(c);let b=null;const y=()=>null===b?[m,m]:[m,b],w=(e,t,r)=>{const a=y(),s=new IV(r),o=[[c],[null===b?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],i=b;b=n.runWebGLProgram(s,a,"int32",o),OV(n,i)};for(let e=1;e<g;e*=2){const t=2*e;for(let n=e;n>=1;n/=2)w(t,n,[f,v])}for(let e=v;e>g;e/=2){const t=y(),r=new NV([f,e/2]),a=[[c],[null===b?1:0],[g]],s=b;b=n.runWebGLProgram(r,t,"int32",a),OV(n,s);const o=g/2,i=2*o;for(let e=o;e>=1;e/=2)w(i,e,b.shape)}let x=b;b=BD({inputs:{x:b},backend:n,attrs:{begin:0,size:[f,s]}}),OV(n,x);let k=LB({inputs:{x:m,indices:b},backend:n,attrs:{axis:1,batchDims:1}});OV(n,m);const C=u.slice(0,-1);C.push(s),x=b,b=MP({inputs:{x:b},attrs:{shape:C},backend:n}),OV(n,x);const S=k;return k=MP({inputs:{x:k},attrs:{shape:C},backend:n}),OV(n,S),[k,b]}};class _V{constructor(e,t,n,r,a,s){this.variableNames=["Image","Transforms"],this.outputShape=s;const o="nearest"===n?1:2;let i;switch(r){case"constant":default:i=1;break;case"reflect":i=2;break;case"wrap":i=3;break;case"nearest":i=4}this.userCode=`\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(${i} == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${i} == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${i} == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(${a});\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(${a});\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(${t}));\n                float mapY = mapCoord(inY, float(${e}));\n\n                if (${o} == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        `}}const RV={kernelName:Gr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:a,transforms:s}=t,{interpolation:o,fillMode:i,fillValue:l,outputShape:u}=r,[c,p,d,h]=a.shape,[f,m]=null!=u?u:[p,d],g=new _V(p,d,o,i,l,[c,f,m,h]);return n.runWebGLProgram(g,[a,s],"float32")}};const PV={kernelName:Xr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:s}=t;m_(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(s.dataId),{outputValues:i,outputShape:l,indices:u}=GR(o,a,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,i),r.makeTensorInfo([u.length],"int32",u)]}};const DV={kernelName:Kr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:a}=t;let{axis:s}=r;s<0&&(s+=a.shape.length);const o=a,i=o.shape.length,l=a.shape[s],u=new Array(i-1);let c=0;for(let e=0;e<i;e++)e!==s&&(u[c++]=o.shape[e]);const p=[],d=new Array(i).fill(0),h=o.shape.slice();h[s]=1;const f=new Array(l);for(let e=0;e<f.length;e++){d[s]=e;const t=BD({inputs:{x:o},backend:n,attrs:{begin:d,size:h}}),r=MP({inputs:{x:t},backend:n,attrs:{shape:u}});f[e]=r,p.push(t)}return p.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}};class LV{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,r=e.batchSize,a=e.inSize,s=e.numSegments,o=s*Math.ceil(a/n);this.outputShape=[r,o];const i=4*Math.floor(n/4),l=n%4,u="\n        sumValue += dot(values, segFilter);\n    ";let c="";a%n>0&&(c=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return initializationValue;\n        }\n      `);let p="";a%n>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${c}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${p}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${s})) * float(${n}));\n        int currentSeg = int(mod(float(outIdx), float(${s})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${i}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${u}\n        }\n\n        int inIdx = inOffset + ${i};\n        if (${1===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${u}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${u}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${u}\n        }\n        setOutput(sumValue);\n      }\n    `}}const BV={kernelName:Yr,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:s}=t,{numSegments:o}=r,i=a.shape.length,l=[];let u=0;const c=Dc([u],i);let p=a;null!=c&&(p=WP({inputs:{x:a},backend:n,attrs:{perm:c}}),l.push(p),u=Bc(1,i)[0]);const d=Bf(p.shape,u,o),h=ie([p.shape[u]]),f=MP({inputs:{x:p},backend:n,attrs:{shape:[-1,h]}});l.push(f);const m=ss(a.dtype),g=(e,t,r,a,s)=>{const o=e.shape[0],i=e.shape[1],u=Lf(i,s),c=new LV({windowSize:u,inSize:i,batchSize:o,numSegments:s},t),p=n.compileAndRun(c,[e,r],a);if(l.push(p),p.shape[1]===s)return p;const d=pz({backend:n,attrs:{start:0,stop:s,step:1,dtype:"float32"}}),h=TV({inputs:{x:d},backend:n,attrs:{reps:[i/u]}});l.push(d),l.push(h);return g(p,t,h,a,s)},v=MP({inputs:{x:g(f,"unsortedSegmentSum",s,m,o)},backend:n,attrs:{shape:d}});let b=v;if(null!=c){l.push(v);const e=Lc(c);b=WP({inputs:{x:b},backend:n,attrs:{perm:e}})}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),b}},FV=[UP,qP,KP,JP,eD,rD,aD,sD,pD,dD,fD,gD,bD,wD,kD,ED,TD,ND,OD,AD,RD,zD,VD,WD,qD,YD,QD,mP,nL,cL,gL,xL,kL,CL,SL,EL,$L,NL,AL,PL,FL,zL,WL,UL,XL,KL,JL,QL,eB,nB,rB,sB,iB,uB,pB,fB,vB,wB,kB,EB,$B,OB,MB,_B,PB,BB,zB,WB,hP,HB,iL,UB,qB,KB,bP,JB,QB,eF,nF,aF,oF,lF,cF,hF,mF,vF,yF,wF,xF,SF,EF,TF,$F,IF,OF,_F,PF,jF,AP,UF,qF,KF,JF,jD,QF,nz,rz,iz,uz,xP,cz,dz,GD,BF,fz,gz,bz,_P,xz,Cz,Tz,Iz,Az,_z,Pz,Lz,Fz,Vz,Hz,Uz,qz,Kz,Jz,FD,HF,Qz,eV,tV,nV,rV,aV,sV,oV,uV,pV,fV,mV,vV,bV,yV,wV,VF,VP,kV,SV,$V,MV,RV,HP,PV,DV,BV,tz];for(const e of FV)pa(e);const zV={"tfjs-core":Ui,"tfjs-backend-cpu":"3.15.0","tfjs-backend-webgl":"3.15.0","tfjs-data":ET,"tfjs-layers":xy,"tfjs-converter":fE,tfjs:"3.15.0"}},368:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t,n){var a=n.value;if("function"!=typeof a)throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(r(a)));var s=!1;return{configurable:!0,get:function(){if(s||this===e.prototype||this.hasOwnProperty(t)||"function"!=typeof a)return a;var n=a.bind(this);return s=!0,Object.defineProperty(this,t,{configurable:!0,get:function(){return n},set:function(e){a=e,delete this[t]}}),s=!1,n},set:function(e){a=e}}}function s(e){var t;return"undefined"!=typeof Reflect&&"function"==typeof Reflect.ownKeys?t=Reflect.ownKeys(e.prototype):(t=Object.getOwnPropertyNames(e.prototype),"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e.prototype)))),t.forEach((function(t){if("constructor"!==t){var n=Object.getOwnPropertyDescriptor(e.prototype,t);"function"==typeof n.value&&Object.defineProperty(e.prototype,t,a(e,t,n))}})),e}function o(){return 1===arguments.length?s.apply(void 0,arguments):a.apply(void 0,arguments)}n.r(t),n.d(t,{boundClass:function(){return s},boundMethod:function(){return a},default:function(){return o}})},720:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},s={};function o(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=s[e])?r:(n=l(e,(0|e)<0?-1:0,!0),o&&(s[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=l(e,e<0?-1:0,!1),o&&(a[e]=n),n)}function i(e,t){if(isNaN(e))return t?v:g;if(t){if(e<0)return v;if(e>=h)return k}else{if(e<=-f)return C;if(e+1>=f)return x}return e<0?i(-e,t).neg():l(e%d|0,e/d|0,t)}function l(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=i,n.fromBits=l;var u=Math.pow;function c(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return c(e.substring(1),t,n).neg();for(var a=i(u(n,8)),s=g,o=0;o<e.length;o+=8){var l=Math.min(8,e.length-o),p=parseInt(e.substring(o,o+l),n);if(l<8){var d=i(u(n,l));s=s.mul(d).add(i(p))}else s=(s=s.mul(a)).add(i(p))}return s.unsigned=t,s}function p(e,t){return"number"==typeof e?i(e,t):"string"==typeof e?c(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=c,n.fromValue=p;var d=4294967296,h=d*d,f=h/2,m=o(1<<24),g=o(0);n.ZERO=g;var v=o(0,!0);n.UZERO=v;var b=o(1);n.ONE=b;var y=o(1,!0);n.UONE=y;var w=o(-1);n.NEG_ONE=w;var x=l(-1,2147483647,!1);n.MAX_VALUE=x;var k=l(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var C=l(0,-2147483648,!1);n.MIN_VALUE=C;var S=n.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(C)){var t=i(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=i(u(e,6),this.unsigned),s=this,o="";;){var l=s.div(a),c=(s.sub(l.mul(a)).toInt()>>>0).toString(e);if((s=l).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(C)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1==(1&this.low)},S.isEven=function(){return 0==(1&this.low)},S.equals=function(e){return r(e)||(e=p(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(e){return this.comp(e)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return this.comp(e)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(e){return this.comp(e)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return this.comp(e)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(e){if(r(e)||(e=p(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(C)?C:this.not().add(b)},S.neg=S.negate,S.add=function(e){r(e)||(e=p(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,s=65535&this.low,o=e.high>>>16,i=65535&e.high,u=e.low>>>16,c=0,d=0,h=0,f=0;return h+=(f+=s+(65535&e.low))>>>16,d+=(h+=a+u)>>>16,c+=(d+=n+i)>>>16,c+=t+o,l((h&=65535)<<16|(f&=65535),(c&=65535)<<16|(d&=65535),this.unsigned)},S.subtract=function(e){return r(e)||(e=p(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){if(this.isZero())return g;if(r(e)||(e=p(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(C))return e.isOdd()?C:g;if(e.eq(C))return this.isOdd()?C:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return i(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,s=this.low>>>16,o=65535&this.low,u=e.high>>>16,c=65535&e.high,d=e.low>>>16,h=65535&e.low,f=0,v=0,b=0,y=0;return b+=(y+=o*h)>>>16,v+=(b+=s*h)>>>16,b&=65535,v+=(b+=o*d)>>>16,f+=(v+=a*h)>>>16,v&=65535,f+=(v+=s*d)>>>16,v&=65535,f+=(v+=o*c)>>>16,f+=n*h+a*d+s*c+o*u,l((b&=65535)<<16|(y&=65535),(f&=65535)<<16|(v&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(e){if(r(e)||(e=p(e)),e.isZero())throw Error("division by zero");var n,a,s;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return y;s=v}else{if(this.eq(C))return e.eq(b)||e.eq(w)?C:e.eq(C)?b:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?b:w:(a=this.sub(e.mul(n)),s=n.add(a.div(e)));if(e.eq(C))return this.unsigned?v:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=g}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),c=o<=48?1:u(2,o-48),d=i(n),h=d.mul(e);h.isNegative()||h.gt(a);)h=(d=i(n-=c,this.unsigned)).mul(e);d.isZero()&&(d=b),s=s.add(d),a=a.sub(h)}return s},S.div=S.divide,S.modulo=function(e){return r(e)||(e=p(e)),t?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return l(~this.low,~this.high,this.unsigned)},S.and=function(e){return r(e)||(e=p(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return r(e)||(e=p(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return r(e)||(e=p(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},666:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,s=Object.create(a.prototype),o=new I(r||[]);return s._invoke=function(e,t,n){var r=p;return function(a,s){if(r===h)throw new Error("Generator is already running");if(r===f){if("throw"===a)throw s;return O()}for(n.method=a,n.arg=s;;){var o=n.delegate;if(o){var i=E(o,n);if(i){if(i===m)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===p)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var l=c(e,t,n);if("normal"===l.type){if(r=n.done?f:d,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=f,n.method="throw",n.arg=l.arg)}}}(e,n,o),s}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var p="suspendedStart",d="suspendedYield",h="executing",f="completed",m={};function g(){}function v(){}function b(){}var y={};l(y,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(N([])));x&&x!==n&&r.call(x,s)&&(y=x);var k=b.prototype=g.prototype=Object.create(y);function C(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(a,s,o,i){var l=c(e[a],e,s);if("throw"!==l.type){var u=l.arg,p=u.value;return p&&"object"==typeof p&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(p).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,i)}))}i(l.arg)}var a;this._invoke=function(e,r){function s(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(s,s):s()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var a=c(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var s=a.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function $(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function N(e){if(e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:O}}function O(){return{value:t,done:!0}}return v.prototype=b,l(k,"constructor",b),l(b,"constructor",v),v.displayName=l(b,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,i,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},C(S.prototype),l(S.prototype,o,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,a,s){void 0===s&&(s=Promise);var o=new S(u(t,n,r,a),s);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},C(k),l(k,i,"Generator"),l(k,s,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach($),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return i.type="throw",i.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var s=a;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),$(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;$(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},377:function(e,t,n){var r=n(832),a=n(652),s=n(801),o=n(30),i=n(618),l=n(49),u=n(971);u.alea=r,u.xor128=a,u.xorwow=s,u.xorshift7=o,u.xor4096=i,u.tychei=l,e.exports=u},832:function(e,t,n){var r;!function(e,a,s){function o(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.alea=l}(0,e=n.nmd(e),n.amdD)},49:function(e,t,n){var r;!function(e,a,s){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.tychei=l}(0,e=n.nmd(e),n.amdD)},652:function(e,t,n){var r;!function(e,a,s){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.xor128=l}(0,e=n.nmd(e),n.amdD)},618:function(e,t,n){var r;!function(e,a,s){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,s=t.i;return t.w=r=r+1640531527|0,n=a[s+34&127],e=a[s=s+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[s]=n^e,t.i=s,n+(r^r>>>16)|0},function(e,t){var n,r,a,s,o,i=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),a=0,s=-32;s<l;++s)t&&(r^=t.charCodeAt((s+32)%t.length)),0===s&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,s>=0&&(o=o+1640531527|0,a=0==(n=i[127&s]^=r+o)?a+1:0);for(a>=128&&(i[127&(t&&t.length||0)]=-1),a=127,s=512;s>0;--s)r=i[a+34&127],n=i[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,i[a]=r^n;e.w=o,e.X=i,e.i=a}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.xor4096=l}(0,e=n.nmd(e),n.amdD)},30:function(e,t,n){var r;!function(e,a,s){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.xorshift7=l}(0,e=n.nmd(e),n.amdD)},801:function(e,t,n){var r;!function(e,a,s){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.xorwow=l}(0,e=n.nmd(e),n.amdD)},971:function(e,t,n){var r;!function(a,s){var o,i=(0,eval)("this"),l=256,u=s.pow(l,6),c=s.pow(2,52),p=2*c,d=255;function h(e,t,n){var r=[],d=v(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,b(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(l):(e=new Uint8Array(l),(i.crypto||i.msCrypto).getRandomValues(e)),b(e)}catch(e){var t=i.navigator,n=t&&t.plugins;return[+new Date,i,n,i.screen,b(a)]}}():e,3),r),h=new f(r),y=function(){for(var e=h.g(6),t=u,n=0;e<c;)e=(e+n)*l,t*=l,n=h.g(1);for(;e>=p;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|h.g(4)},y.quick=function(){return h.g(4)/4294967296},y.double=y,v(b(h.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,h),e.state=function(){return m(h,{})}),n?(s.random=e,t):e})(y,d,"global"in t?t.global:this==s,t.state)}function f(e){var t,n=e.length,r=this,a=0,s=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<l;)o[a]=a++;for(a=0;a<l;a++)o[a]=o[s=d&s+e[a%n]+(t=o[a])],o[s]=t;(r.g=function(e){for(var t,n=0,a=r.i,s=r.j,o=r.S;e--;)t=o[a=d&a+1],n=n*l+o[d&(o[a]=o[s=d&s+t])+(o[s]=t)];return r.i=a,r.j=s,n})(l)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(g(e[n],t-1))}catch(e){}return r.length?r:"string"==a?e:e+"\0"}function v(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return b(t)}function b(e){return String.fromCharCode.apply(0,e)}if(s.seedrandom=h,v(s.random(),a),e.exports){e.exports=h;try{o=n(42)}catch(e){}}else void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}([],Math)},744:function(e,t){"use strict";t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[e,r]of t)n[e]=r;return n}},914:function(){},410:function(){},628:function(){},778:function(){},601:function(){},792:function(){},977:function(){},42:function(){}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e};var r={};!function(){"use strict";n.d(r,{a:function(){return JE}});var e={};n.r(e),n.d(e,{auroraPreloaderContent:function(){return Il},bindMethods:function(){return Kl},cancelAnimationFrame:function(){return Ml},colorHexToRgb:function(){return Wl},colorHsbToHsl:function(){return Gl},colorHslToHsb:function(){return ql},colorHslToRgb:function(){return Ul},colorRgbToHex:function(){return Hl},colorRgbToHsl:function(){return jl},colorThemeCSSProperties:function(){return Xl},deleteProps:function(){return Ol},eventNameToColonCase:function(){return Nl},extend:function(){return Vl},flattenArray:function(){return Yl},getTranslate:function(){return Ll},id:function(){return Cl},iosPreloaderContent:function(){return $l},isObject:function(){return Fl},mdPreloaderContent:function(){return Tl},merge:function(){return zl},nextFrame:function(){return Rl},nextTick:function(){return _l},now:function(){return Pl},parseUrlQuery:function(){return Dl},requestAnimationFrame:function(){return Al},serializeObject:function(){return Bl},uniqueNumber:function(){return kl}});var t={};function a(e,t){const n=Object.create(null),r=e.split(",");for(let e=0;e<r.length;e++)n[r[e]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}n.r(t),n.d(t,{$:function(){return hu},add:function(){return fc},addClass:function(){return fu},animate:function(){return yc},animationEnd:function(){return _u},append:function(){return Yu},appendTo:function(){return Ju},attr:function(){return bu},blur:function(){return Sc},change:function(){return Mc},children:function(){return pc},click:function(){return Cc},closest:function(){return uc},css:function(){return Wu},data:function(){return xu},dataset:function(){return Cu},default:function(){return Uc},detach:function(){return hc},each:function(){return Hu},empty:function(){return mc},eq:function(){return Ku},filter:function(){return ju},find:function(){return cc},focus:function(){return Ec},focusin:function(){return Tc},focusout:function(){return $c},hasClass:function(){return vu},height:function(){return Du},hide:function(){return Fu},html:function(){return Uu},index:function(){return Xu},insertAfter:function(){return tc},insertBefore:function(){return ec},is:function(){return qu},keydown:function(){return Nc},keypress:function(){return Oc},keyup:function(){return Ic},mousedown:function(){return _c},mouseenter:function(){return Dc},mouseleave:function(){return Lc},mousemove:function(){return Rc},mouseout:function(){return Bc},mouseover:function(){return Fc},mouseup:function(){return Pc},next:function(){return nc},nextAll:function(){return rc},off:function(){return Nu},offset:function(){return Bu},on:function(){return Iu},once:function(){return Ou},outerHeight:function(){return Lu},outerWidth:function(){return Pu},parent:function(){return ic},parents:function(){return lc},prepend:function(){return Zu},prependTo:function(){return Qu},prev:function(){return ac},prevAll:function(){return sc},prop:function(){return wu},remove:function(){return dc},removeAttr:function(){return yu},removeClass:function(){return mu},removeData:function(){return ku},resize:function(){return Hc},scroll:function(){return jc},scrollLeft:function(){return bc},scrollTo:function(){return gc},scrollTop:function(){return vc},show:function(){return zu},siblings:function(){return oc},stop:function(){return wc},styles:function(){return Vu},submit:function(){return Ac},text:function(){return Gu},toggleClass:function(){return gu},touchend:function(){return Vc},touchmove:function(){return Wc},touchstart:function(){return zc},transform:function(){return Tu},transition:function(){return $u},transitionEnd:function(){return Mu},trigger:function(){return Au},val:function(){return Su},value:function(){return Eu},width:function(){return Ru}});const s="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",o=a(s);function i(e){return!!e||""===e}function l(e){if(I(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],a=_(r)?p(r):l(r);if(a)for(const e in a)t[e]=a[e]}return t}return _(e)||P(e)?e:void 0}const u=/;(?![^(]*\))/g,c=/:(.+)/;function p(e){const t={};return e.split(u).forEach((e=>{if(e){const n=e.split(c);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function d(e){let t="";if(_(e))t=e;else if(I(e))for(let n=0;n<e.length;n++){const r=d(e[n]);r&&(t+=r+" ")}else if(P(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function h(e,t){if(e===t)return!0;let n=A(e),r=A(t);if(n||r)return!(!n||!r)&&e.getTime()===t.getTime();if(n=I(e),r=I(t),n||r)return!(!n||!r)&&function(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=h(e[r],t[r]);return n}(e,t);if(n=P(e),r=P(t),n||r){if(!n||!r)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e){const r=e.hasOwnProperty(n),a=t.hasOwnProperty(n);if(r&&!a||!r&&a||!h(e[n],t[n]))return!1}}return String(e)===String(t)}function f(e,t){return e.findIndex((e=>h(e,t)))}const m=e=>_(e)?e:null==e?"":I(e)||P(e)&&(e.toString===L||!M(e.toString))?JSON.stringify(e,g,2):String(e),g=(e,t)=>t&&t.__v_isRef?g(e,t.value):N(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n])=>(e[`${t} =>`]=n,e)),{})}:O(t)?{[`Set(${t.size})`]:[...t.values()]}:!P(t)||I(t)||F(t)?t:String(t),v={},b=[],y=()=>{},w=()=>!1,x=/^on[^a-z]/,k=e=>x.test(e),C=e=>e.startsWith("onUpdate:"),S=Object.assign,E=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},T=Object.prototype.hasOwnProperty,$=(e,t)=>T.call(e,t),I=Array.isArray,N=e=>"[object Map]"===B(e),O=e=>"[object Set]"===B(e),A=e=>e instanceof Date,M=e=>"function"==typeof e,_=e=>"string"==typeof e,R=e=>"symbol"==typeof e,P=e=>null!==e&&"object"==typeof e,D=e=>P(e)&&M(e.then)&&M(e.catch),L=Object.prototype.toString,B=e=>L.call(e),F=e=>"[object Object]"===B(e),z=e=>_(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,V=a(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),W=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},H=/-(\w)/g,j=W((e=>e.replace(H,((e,t)=>t?t.toUpperCase():"")))),U=/\B([A-Z])/g,G=W((e=>e.replace(U,"-$1").toLowerCase())),q=W((e=>e.charAt(0).toUpperCase()+e.slice(1))),X=W((e=>e?`on${q(e)}`:"")),K=(e,t)=>!Object.is(e,t),Y=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},J=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Z=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Q;const ee=()=>Q||(Q="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{});let te;class ne{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&te&&(this.parent=te,this.index=(te.scopes||(te.scopes=[])).push(this)-1)}run(e){if(this.active)try{return te=this,e()}finally{te=this.parent}else 0}on(){te=this}off(){te=this.parent}stop(e){if(this.active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}function re(e,t=te){t&&t.active&&t.effects.push(e)}const ae=e=>{const t=new Set(e);return t.w=0,t.n=0,t},se=e=>(e.w&ue)>0,oe=e=>(e.n&ue)>0,ie=new WeakMap;let le=0,ue=1;let ce;const pe=Symbol(""),de=Symbol("");class he{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,re(this,n)}run(){if(!this.active)return this.fn();let e=ce,t=me;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=ce,ce=this,me=!0,ue=1<<++le,le<=30?(({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=ue})(this):fe(this),this.fn()}finally{le<=30&&(e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const a=t[r];se(a)&&!oe(a)?a.delete(e):t[n++]=a,a.w&=~ue,a.n&=~ue}t.length=n}})(this),ue=1<<--le,ce=this.parent,me=t,this.parent=void 0}}stop(){this.active&&(fe(this),this.onStop&&this.onStop(),this.active=!1)}}function fe(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let me=!0;const ge=[];function ve(){ge.push(me),me=!1}function be(){const e=ge.pop();me=void 0===e||e}function ye(e,t,n){if(me&&ce){let t=ie.get(e);t||ie.set(e,t=new Map);let r=t.get(n);r||t.set(n,r=ae());we(r,void 0)}}function we(e,t){let n=!1;le<=30?oe(e)||(e.n|=ue,n=!se(e)):n=!e.has(ce),n&&(e.add(ce),ce.deps.push(e))}function xe(e,t,n,r,a,s){const o=ie.get(e);if(!o)return;let i=[];if("clear"===t)i=[...o.values()];else if("length"===n&&I(e))o.forEach(((e,t)=>{("length"===t||t>=r)&&i.push(e)}));else switch(void 0!==n&&i.push(o.get(n)),t){case"add":I(e)?z(n)&&i.push(o.get("length")):(i.push(o.get(pe)),N(e)&&i.push(o.get(de)));break;case"delete":I(e)||(i.push(o.get(pe)),N(e)&&i.push(o.get(de)));break;case"set":N(e)&&i.push(o.get(pe))}if(1===i.length)i[0]&&ke(i[0]);else{const e=[];for(const t of i)t&&e.push(...t);ke(ae(e))}}function ke(e,t){for(const t of I(e)?e:[...e])(t!==ce||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const Ce=a("__proto__,__v_isRef,__isVue"),Se=new Set(Object.getOwnPropertyNames(Symbol).map((e=>Symbol[e])).filter(R)),Ee=Oe(),Te=Oe(!1,!0),$e=Oe(!0),Ie=Ne();function Ne(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=ft(this);for(let e=0,t=this.length;e<t;e++)ye(n,0,e+"");const r=n[t](...e);return-1===r||!1===r?n[t](...e.map(ft)):r}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){ve();const n=ft(this)[t].apply(this,e);return be(),n}})),e}function Oe(e=!1,t=!1){return function(n,r,a){if("__v_isReactive"===r)return!e;if("__v_isReadonly"===r)return e;if("__v_isShallow"===r)return t;if("__v_raw"===r&&a===(e?t?st:at:t?rt:nt).get(n))return n;const s=I(n);if(!e&&s&&$(Ie,r))return Reflect.get(Ie,r,a);const o=Reflect.get(n,r,a);if(R(r)?Se.has(r):Ce(r))return o;if(e||ye(n,0,r),t)return o;if(wt(o)){return!s||!z(r)?o.value:o}return P(o)?e?lt(o):it(o):o}}function Ae(e=!1){return function(t,n,r,a){let s=t[n];if(pt(s)&&wt(s)&&!wt(r))return!1;if(!e&&!pt(r)&&(dt(r)||(r=ft(r),s=ft(s)),!I(t)&&wt(s)&&!wt(r)))return s.value=r,!0;const o=I(t)&&z(n)?Number(n)<t.length:$(t,n),i=Reflect.set(t,n,r,a);return t===ft(a)&&(o?K(r,s)&&xe(t,"set",n,r):xe(t,"add",n,r)),i}}const Me={get:Ee,set:Ae(),deleteProperty:function(e,t){const n=$(e,t),r=(e[t],Reflect.deleteProperty(e,t));return r&&n&&xe(e,"delete",t,void 0),r},has:function(e,t){const n=Reflect.has(e,t);return R(t)&&Se.has(t)||ye(e,0,t),n},ownKeys:function(e){return ye(e,0,I(e)?"length":pe),Reflect.ownKeys(e)}},_e={get:$e,set:(e,t)=>!0,deleteProperty:(e,t)=>!0},Re=S({},Me,{get:Te,set:Ae(!0)}),Pe=e=>e,De=e=>Reflect.getPrototypeOf(e);function Le(e,t,n=!1,r=!1){const a=ft(e=e.__v_raw),s=ft(t);t!==s&&!n&&ye(a,0,t),!n&&ye(a,0,s);const{has:o}=De(a),i=r?Pe:n?vt:gt;return o.call(a,t)?i(e.get(t)):o.call(a,s)?i(e.get(s)):void(e!==a&&e.get(t))}function Be(e,t=!1){const n=this.__v_raw,r=ft(n),a=ft(e);return e!==a&&!t&&ye(r,0,e),!t&&ye(r,0,a),e===a?n.has(e):n.has(e)||n.has(a)}function Fe(e,t=!1){return e=e.__v_raw,!t&&ye(ft(e),0,pe),Reflect.get(e,"size",e)}function ze(e){e=ft(e);const t=ft(this);return De(t).has.call(t,e)||(t.add(e),xe(t,"add",e,e)),this}function Ve(e,t){t=ft(t);const n=ft(this),{has:r,get:a}=De(n);let s=r.call(n,e);s||(e=ft(e),s=r.call(n,e));const o=a.call(n,e);return n.set(e,t),s?K(t,o)&&xe(n,"set",e,t):xe(n,"add",e,t),this}function We(e){const t=ft(this),{has:n,get:r}=De(t);let a=n.call(t,e);a||(e=ft(e),a=n.call(t,e));r&&r.call(t,e);const s=t.delete(e);return a&&xe(t,"delete",e,void 0),s}function He(){const e=ft(this),t=0!==e.size,n=e.clear();return t&&xe(e,"clear",void 0,void 0),n}function je(e,t){return function(n,r){const a=this,s=a.__v_raw,o=ft(s),i=t?Pe:e?vt:gt;return!e&&ye(o,0,pe),s.forEach(((e,t)=>n.call(r,i(e),i(t),a)))}}function Ue(e,t,n){return function(...r){const a=this.__v_raw,s=ft(a),o=N(s),i="entries"===e||e===Symbol.iterator&&o,l="keys"===e&&o,u=a[e](...r),c=n?Pe:t?vt:gt;return!t&&ye(s,0,l?de:pe),{next(){const{value:e,done:t}=u.next();return t?{value:e,done:t}:{value:i?[c(e[0]),c(e[1])]:c(e),done:t}},[Symbol.iterator](){return this}}}}function Ge(e){return function(...t){return"delete"!==e&&this}}function qe(){const e={get(e){return Le(this,e)},get size(){return Fe(this)},has:Be,add:ze,set:Ve,delete:We,clear:He,forEach:je(!1,!1)},t={get(e){return Le(this,e,!1,!0)},get size(){return Fe(this)},has:Be,add:ze,set:Ve,delete:We,clear:He,forEach:je(!1,!0)},n={get(e){return Le(this,e,!0)},get size(){return Fe(this,!0)},has(e){return Be.call(this,e,!0)},add:Ge("add"),set:Ge("set"),delete:Ge("delete"),clear:Ge("clear"),forEach:je(!0,!1)},r={get(e){return Le(this,e,!0,!0)},get size(){return Fe(this,!0)},has(e){return Be.call(this,e,!0)},add:Ge("add"),set:Ge("set"),delete:Ge("delete"),clear:Ge("clear"),forEach:je(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((a=>{e[a]=Ue(a,!1,!1),n[a]=Ue(a,!0,!1),t[a]=Ue(a,!1,!0),r[a]=Ue(a,!0,!0)})),[e,n,t,r]}const[Xe,Ke,Ye,Je]=qe();function Ze(e,t){const n=t?e?Je:Ye:e?Ke:Xe;return(t,r,a)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get($(n,r)&&r in t?n:t,r,a)}const Qe={get:Ze(!1,!1)},et={get:Ze(!1,!0)},tt={get:Ze(!0,!1)};const nt=new WeakMap,rt=new WeakMap,at=new WeakMap,st=new WeakMap;function ot(e){return e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((e=>B(e).slice(8,-1))(e))}function it(e){return pt(e)?e:ut(e,!1,Me,Qe,nt)}function lt(e){return ut(e,!0,_e,tt,at)}function ut(e,t,n,r,a){if(!P(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const s=a.get(e);if(s)return s;const o=ot(e);if(0===o)return e;const i=new Proxy(e,2===o?r:n);return a.set(e,i),i}function ct(e){return pt(e)?ct(e.__v_raw):!(!e||!e.__v_isReactive)}function pt(e){return!(!e||!e.__v_isReadonly)}function dt(e){return!(!e||!e.__v_isShallow)}function ht(e){return ct(e)||pt(e)}function ft(e){const t=e&&e.__v_raw;return t?ft(t):e}function mt(e){return J(e,"__v_skip",!0),e}const gt=e=>P(e)?it(e):e,vt=e=>P(e)?lt(e):e;function bt(e){me&&ce&&we((e=ft(e)).dep||(e.dep=ae()))}function yt(e,t){(e=ft(e)).dep&&ke(e.dep)}function wt(e){return!(!e||!0!==e.__v_isRef)}function xt(e){return kt(e,!1)}function kt(e,t){return wt(e)?e:new Ct(e,t)}class Ct{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:ft(e),this._value=t?e:gt(e)}get value(){return bt(this),this._value}set value(e){e=this.__v_isShallow?e:ft(e),K(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:gt(e),yt(this))}}const St={get:(e,t,n)=>function(e){return wt(e)?e.value:e}(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const a=e[t];return wt(a)&&!wt(n)?(a.value=n,!0):Reflect.set(e,t,n,r)}};function Et(e){return ct(e)?e:new Proxy(e,St)}class Tt{constructor(e,t,n,r){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new he(e,(()=>{this._dirty||(this._dirty=!0,yt(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=n}get value(){const e=ft(this);return bt(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}Promise.resolve();function $t(e,t,n,r){let a;try{a=r?e(...r):e()}catch(e){Nt(e,t,n)}return a}function It(e,t,n,r){if(M(e)){const a=$t(e,t,n,r);return a&&D(a)&&a.catch((e=>{Nt(e,t,n)})),a}const a=[];for(let s=0;s<e.length;s++)a.push(It(e[s],t,n,r));return a}function Nt(e,t,n,r=!0){t&&t.vnode;if(t){let r=t.parent;const a=t.proxy,s=n;for(;r;){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,a,s))return;r=r.parent}const o=t.appContext.config.errorHandler;if(o)return void $t(o,null,10,[e,a,s])}!function(e,t,n,r=!0){console.error(e)}(e,0,0,r)}let Ot=!1,At=!1;const Mt=[];let _t=0;const Rt=[];let Pt=null,Dt=0;const Lt=[];let Bt=null,Ft=0;const zt=Promise.resolve();let Vt=null,Wt=null;function Ht(e){const t=Vt||zt;return e?t.then(this?e.bind(this):e):t}function jt(e){Mt.length&&Mt.includes(e,Ot&&e.allowRecurse?_t+1:_t)||e===Wt||(null==e.id?Mt.push(e):Mt.splice(function(e){let t=_t+1,n=Mt.length;for(;t<n;){const r=t+n>>>1;Yt(Mt[r])<e?t=r+1:n=r}return t}(e.id),0,e),Ut())}function Ut(){Ot||At||(At=!0,Vt=zt.then(Jt))}function Gt(e,t,n,r){I(e)?n.push(...e):t&&t.includes(e,e.allowRecurse?r+1:r)||n.push(e),Ut()}function qt(e){Gt(e,Bt,Lt,Ft)}function Xt(e,t=null){if(Rt.length){for(Wt=t,Pt=[...new Set(Rt)],Rt.length=0,Dt=0;Dt<Pt.length;Dt++)Pt[Dt]();Pt=null,Dt=0,Wt=null,Xt(e,t)}}function Kt(e){if(Lt.length){const e=[...new Set(Lt)];if(Lt.length=0,Bt)return void Bt.push(...e);for(Bt=e,Bt.sort(((e,t)=>Yt(e)-Yt(t))),Ft=0;Ft<Bt.length;Ft++)Bt[Ft]();Bt=null,Ft=0}}const Yt=e=>null==e.id?1/0:e.id;function Jt(e){At=!1,Ot=!0,Xt(e),Mt.sort(((e,t)=>Yt(e)-Yt(t)));try{for(_t=0;_t<Mt.length;_t++){const e=Mt[_t];e&&!1!==e.active&&$t(e,null,14)}}finally{_t=0,Mt.length=0,Kt(),Ot=!1,Vt=null,(Mt.length||Rt.length||Lt.length)&&Jt(e)}}new Set;new Map;let Zt,Qt=[],en=!1;function tn(e,...t){Zt?Zt.emit(e,...t):en||Qt.push({event:e,args:t})}function nn(e,t){var n,r;if(Zt=e,Zt)Zt.enabled=!0,Qt.forEach((({event:e,args:t})=>Zt.emit(e,...t))),Qt=[];else if("undefined"!=typeof window&&window.HTMLElement&&!(null===(r=null===(n=window.navigator)||void 0===n?void 0:n.userAgent)||void 0===r?void 0:r.includes("jsdom"))){(t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push((e=>{nn(e,t)})),setTimeout((()=>{Zt||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,en=!0,Qt=[])}),3e3)}else en=!0,Qt=[]}const rn=on("component:added"),an=on("component:updated"),sn=on("component:removed");function on(e){return t=>{tn(e,t.appContext.app,t.uid,t.parent?t.parent.uid:void 0,t)}}function ln(e,t,...n){const r=e.vnode.props||v;let a=n;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in r){const e=`${"modelValue"===o?"model":o}Modifiers`,{number:t,trim:s}=r[e]||v;s?a=n.map((e=>e.trim())):t&&(a=n.map(Z))}let i;__VUE_PROD_DEVTOOLS__&&function(e,t,n){tn("component:emit",e.appContext.app,e,t,n)}(e,t,a);let l=r[i=X(t)]||r[i=X(j(t))];!l&&s&&(l=r[i=X(G(t))]),l&&It(l,e,6,a);const u=r[i+"Once"];if(u){if(e.emitted){if(e.emitted[i])return}else e.emitted={};e.emitted[i]=!0,It(u,e,6,a)}}function un(e,t,n=!1){const r=t.emitsCache,a=r.get(e);if(void 0!==a)return a;const s=e.emits;let o={},i=!1;if(__VUE_OPTIONS_API__&&!M(e)){const r=e=>{const n=un(e,t,!0);n&&(i=!0,S(o,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return s||i?(I(s)?s.forEach((e=>o[e]=null)):S(o,s),r.set(e,o),o):(r.set(e,null),null)}function cn(e,t){return!(!e||!k(t))&&(t=t.slice(2).replace(/Once$/,""),$(e,t[0].toLowerCase()+t.slice(1))||$(e,G(t))||$(e,t))}let pn=null,dn=null;function hn(e){const t=pn;return pn=e,dn=e&&e.type.__scopeId||null,t}function fn(e,t=pn,n){if(!t)return e;if(e._n)return e;const r=(...n)=>{r._d&&ta(-1);const a=hn(t),s=e(...n);return hn(a),r._d&&ta(1),__VUE_PROD_DEVTOOLS__&&an(t),s};return r._n=!0,r._c=!0,r._d=!0,r}function mn(e){const{type:t,vnode:n,proxy:r,withProxy:a,props:s,propsOptions:[o],slots:i,attrs:l,emit:u,render:c,renderCache:p,data:d,setupState:h,ctx:f,inheritAttrs:m}=e;let g,v;const b=hn(e);try{if(4&n.shapeFlag){const e=a||r;g=ba(c.call(e,e,p,s,h,d,f)),v=l}else{const e=t;0,g=ba(e.length>1?e(s,{attrs:l,slots:i,emit:u}):e(s,null)),v=t.props?l:gn(l)}}catch(t){Yr.length=0,Nt(t,e,1),g=pa(Xr)}let y=g;if(v&&!1!==m){const e=Object.keys(v),{shapeFlag:t}=y;e.length&&7&t&&(o&&e.some(C)&&(v=vn(v,o)),y=fa(y,v))}return n.dirs&&(y.dirs=y.dirs?y.dirs.concat(n.dirs):n.dirs),n.transition&&(y.transition=n.transition),g=y,hn(b),g}const gn=e=>{let t;for(const n in e)("class"===n||"style"===n||k(n))&&((t||(t={}))[n]=e[n]);return t},vn=(e,t)=>{const n={};for(const r in e)C(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function bn(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let a=0;a<r.length;a++){const s=r[a];if(t[s]!==e[s]&&!cn(n,s))return!0}return!1}function yn({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}function wn(e,t){t&&t.pendingBranch?I(e)?t.effects.push(...e):t.effects.push(e):qt(e)}function xn(e,t){if(Ma){let n=Ma.provides;const r=Ma.parent&&Ma.parent.provides;r===n&&(n=Ma.provides=Object.create(r)),n[e]=t}else 0}function kn(e,t,n=!1){const r=Ma||pn;if(r){const a=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(a&&e in a)return a[e];if(arguments.length>1)return n&&M(t)?t.call(r.proxy):t}else 0}const Cn={};function Sn(e,t,n){return En(e,t,n)}function En(e,t,{immediate:n,deep:r,flush:a,onTrack:s,onTrigger:o}=v){const i=Ma;let l,u,c=!1,p=!1;if(wt(e)?(l=()=>e.value,c=dt(e)):ct(e)?(l=()=>e,r=!0):I(e)?(p=!0,c=e.some(ct),l=()=>e.map((e=>wt(e)?e.value:ct(e)?In(e):M(e)?$t(e,i,2):void 0))):l=M(e)?t?()=>$t(e,i,2):()=>{if(!i||!i.isUnmounted)return u&&u(),It(e,i,3,[d])}:y,t&&r){const e=l;l=()=>In(e())}let d=e=>{u=g.onStop=()=>{$t(e,i,4)}};if(Fa)return d=y,t?n&&It(t,i,3,[l(),p?[]:void 0,d]):l(),y;let h=p?[]:Cn;const f=()=>{if(g.active)if(t){const e=g.run();(r||c||(p?e.some(((e,t)=>K(e,h[t]))):K(e,h)))&&(u&&u(),It(t,i,3,[e,h===Cn?void 0:h,d]),h=e)}else g.run()};let m;f.allowRecurse=!!t,m="sync"===a?f:"post"===a?()=>Dr(f,i&&i.suspense):()=>{!i||i.isMounted?function(e){Gt(e,Pt,Rt,Dt)}(f):f()};const g=new he(l,m);return t?n?f():h=g.run():"post"===a?Dr(g.run.bind(g),i&&i.suspense):g.run(),()=>{g.stop(),i&&i.scope&&E(i.scope.effects,g)}}function Tn(e,t,n){const r=this.proxy,a=_(e)?e.includes(".")?$n(r,e):()=>r[e]:e.bind(r,r);let s;M(t)?s=t:(s=t.handler,n=t);const o=Ma;Ra(this);const i=En(a,s.bind(r),n);return o?Ra(o):Pa(),i}function $n(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function In(e,t){if(!P(e)||e.__v_skip)return e;if((t=t||new Set).has(e))return e;if(t.add(e),wt(e))In(e.value,t);else if(I(e))for(let n=0;n<e.length;n++)In(e[n],t);else if(O(e)||N(e))e.forEach((e=>{In(e,t)}));else if(F(e))for(const n in e)In(e[n],t);return e}function Nn(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Jn((()=>{e.isMounted=!0})),er((()=>{e.isUnmounting=!0})),e}const On=[Function,Array],An={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:On,onEnter:On,onAfterEnter:On,onEnterCancelled:On,onBeforeLeave:On,onLeave:On,onAfterLeave:On,onLeaveCancelled:On,onBeforeAppear:On,onAppear:On,onAfterAppear:On,onAppearCancelled:On},setup(e,{slots:t}){const n=_a(),r=Nn();let a;return()=>{const s=t.default&&Bn(t.default(),!0);if(!s||!s.length)return;const o=ft(e),{mode:i}=o;const l=s[0];if(r.isLeaving)return Pn(l);const u=Dn(l);if(!u)return Pn(l);const c=Rn(u,o,r,n);Ln(u,c);const p=n.subTree,d=p&&Dn(p);let h=!1;const{getTransitionKey:f}=u.type;if(f){const e=f();void 0===a?a=e:e!==a&&(a=e,h=!0)}if(d&&d.type!==Xr&&(!oa(u,d)||h)){const e=Rn(d,o,r,n);if(Ln(d,e),"out-in"===i)return r.isLeaving=!0,e.afterLeave=()=>{r.isLeaving=!1,n.update()},Pn(l);"in-out"===i&&u.type!==Xr&&(e.delayLeave=(e,t,n)=>{_n(r,d)[String(d.key)]=d,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=n})}return l}}},Mn=An;function _n(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Rn(e,t,n,r){const{appear:a,mode:s,persisted:o=!1,onBeforeEnter:i,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:p,onLeave:d,onAfterLeave:h,onLeaveCancelled:f,onBeforeAppear:m,onAppear:g,onAfterAppear:v,onAppearCancelled:b}=t,y=String(e.key),w=_n(n,e),x=(e,t)=>{e&&It(e,r,9,t)},k={mode:s,persisted:o,beforeEnter(t){let r=i;if(!n.isMounted){if(!a)return;r=m||i}t._leaveCb&&t._leaveCb(!0);const s=w[y];s&&oa(e,s)&&s.el._leaveCb&&s.el._leaveCb(),x(r,[t])},enter(e){let t=l,r=u,s=c;if(!n.isMounted){if(!a)return;t=g||l,r=v||u,s=b||c}let o=!1;const i=e._enterCb=t=>{o||(o=!0,x(t?s:r,[e]),k.delayedLeave&&k.delayedLeave(),e._enterCb=void 0)};t?(t(e,i),t.length<=1&&i()):i()},leave(t,r){const a=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return r();x(p,[t]);let s=!1;const o=t._leaveCb=n=>{s||(s=!0,r(),x(n?f:h,[t]),t._leaveCb=void 0,w[a]===e&&delete w[a])};w[a]=e,d?(d(t,o),d.length<=1&&o()):o()},clone:e=>Rn(e,t,n,r)};return k}function Pn(e){if(zn(e))return(e=fa(e)).children=null,e}function Dn(e){return zn(e)?e.children?e.children[0]:void 0:e}function Ln(e,t){6&e.shapeFlag&&e.component?Ln(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Bn(e,t=!1){let n=[],r=0;for(let a=0;a<e.length;a++){const s=e[a];s.type===Gr?(128&s.patchFlag&&r++,n=n.concat(Bn(s.children,t))):(t||s.type!==Xr)&&n.push(s)}if(r>1)for(let e=0;e<n.length;e++)n[e].patchFlag=-2;return n}const Fn=e=>!!e.type.__asyncLoader;const zn=e=>e.type.__isKeepAlive;RegExp,RegExp;function Vn(e,t){return I(e)?e.some((e=>Vn(e,t))):_(e)?e.split(",").includes(t):!!e.test&&e.test(t)}function Wn(e,t){jn(e,"a",t)}function Hn(e,t){jn(e,"da",t)}function jn(e,t,n=Ma){const r=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(Xn(t,r,n),n){let e=n.parent;for(;e&&e.parent;)zn(e.parent.vnode)&&Un(r,t,n,e),e=e.parent}}function Un(e,t,n,r){const a=Xn(t,e,r,!0);tr((()=>{E(r[t],a)}),n)}function Gn(e){let t=e.shapeFlag;256&t&&256,512&t&&512,e.shapeFlag=t}function qn(e){return 128&e.shapeFlag?e.ssContent:e}function Xn(e,t,n=Ma,r=!1){if(n){const a=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...r)=>{if(n.isUnmounted)return;ve(),Ra(n);const a=It(t,n,e,r);return Pa(),be(),a});return r?a.unshift(s):a.push(s),s}}const Kn=e=>(t,n=Ma)=>(!Fa||"sp"===e)&&Xn(e,t,n),Yn=Kn("bm"),Jn=Kn("m"),Zn=Kn("bu"),Qn=Kn("u"),er=Kn("bum"),tr=Kn("um"),nr=Kn("sp"),rr=Kn("rtg"),ar=Kn("rtc");function sr(e,t=Ma){Xn("ec",e,t)}let or=!0;function ir(e){const t=cr(e),n=e.proxy,r=e.ctx;or=!1,t.beforeCreate&&lr(t.beforeCreate,e,"bc");const{data:a,computed:s,methods:o,watch:i,provide:l,inject:u,created:c,beforeMount:p,mounted:d,beforeUpdate:h,updated:f,activated:m,deactivated:g,beforeDestroy:v,beforeUnmount:b,destroyed:w,unmounted:x,render:k,renderTracked:C,renderTriggered:S,errorCaptured:E,serverPrefetch:T,expose:$,inheritAttrs:N,components:O,directives:A,filters:_}=t;if(u&&function(e,t,n=y,r=!1){I(e)&&(e=fr(e));for(const n in e){const a=e[n];let s;s=P(a)?"default"in a?kn(a.from||n,a.default,!0):kn(a.from||n):kn(a),wt(s)&&r?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:e=>s.value=e}):t[n]=s}}(u,r,null,e.appContext.config.unwrapInjectedRef),o)for(const e in o){const t=o[e];M(t)&&(r[e]=t.bind(n))}if(a){0;const t=a.call(n,n);0,P(t)&&(e.data=it(t))}if(or=!0,s)for(const e in s){const t=s[e],a=M(t)?t.bind(n,n):M(t.get)?t.get.bind(n,n):y;0;const o=!M(t)&&M(t.set)?t.set.bind(n):y,i=qa({get:a,set:o});Object.defineProperty(r,e,{enumerable:!0,configurable:!0,get:()=>i.value,set:e=>i.value=e})}if(i)for(const e in i)ur(i[e],r,n,e);if(l){const e=M(l)?l.call(n):l;Reflect.ownKeys(e).forEach((t=>{xn(t,e[t])}))}function R(e,t){I(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(c&&lr(c,e,"c"),R(Yn,p),R(Jn,d),R(Zn,h),R(Qn,f),R(Wn,m),R(Hn,g),R(sr,E),R(ar,C),R(rr,S),R(er,b),R(tr,x),R(nr,T),I($))if($.length){const t=e.exposed||(e.exposed={});$.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});k&&e.render===y&&(e.render=k),null!=N&&(e.inheritAttrs=N),O&&(e.components=O),A&&(e.directives=A)}function lr(e,t,n){It(I(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function ur(e,t,n,r){const a=r.includes(".")?$n(n,r):()=>n[r];if(_(e)){const n=t[e];M(n)&&Sn(a,n)}else if(M(e))Sn(a,e.bind(n));else if(P(e))if(I(e))e.forEach((e=>ur(e,t,n,r)));else{const r=M(e.handler)?e.handler.bind(n):t[e.handler];M(r)&&Sn(a,r,e)}else 0}function cr(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:a,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,i=s.get(t);let l;return i?l=i:a.length||n||r?(l={},a.length&&a.forEach((e=>pr(l,e,o,!0))),pr(l,t,o)):l=t,s.set(t,l),l}function pr(e,t,n,r=!1){const{mixins:a,extends:s}=t;s&&pr(e,s,n,!0),a&&a.forEach((t=>pr(e,t,n,!0)));for(const a in t)if(r&&"expose"===a);else{const r=dr[a]||n&&n[a];e[a]=r?r(e[a],t[a]):t[a]}return e}const dr={data:hr,props:gr,emits:gr,methods:gr,computed:gr,beforeCreate:mr,created:mr,beforeMount:mr,mounted:mr,beforeUpdate:mr,updated:mr,beforeDestroy:mr,beforeUnmount:mr,destroyed:mr,unmounted:mr,activated:mr,deactivated:mr,errorCaptured:mr,serverPrefetch:mr,components:gr,directives:gr,watch:function(e,t){if(!e)return t;if(!t)return e;const n=S(Object.create(null),e);for(const r in t)n[r]=mr(e[r],t[r]);return n},provide:hr,inject:function(e,t){return gr(fr(e),fr(t))}};function hr(e,t){return t?e?function(){return S(M(e)?e.call(this,this):e,M(t)?t.call(this,this):t)}:t:e}function fr(e){if(I(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function mr(e,t){return e?[...new Set([].concat(e,t))]:t}function gr(e,t){return e?S(S(Object.create(null),e),t):t}function vr(e,t,n,r=!1){const a={},s={};J(s,ia,1),e.propsDefaults=Object.create(null),br(e,t,a,s);for(const t in e.propsOptions[0])t in a||(a[t]=void 0);n?e.props=r?a:ut(a,!1,Re,et,rt):e.type.props?e.props=a:e.props=s,e.attrs=s}function br(e,t,n,r){const[a,s]=e.propsOptions;let o,i=!1;if(t)for(let l in t){if(V(l))continue;const u=t[l];let c;a&&$(a,c=j(l))?s&&s.includes(c)?(o||(o={}))[c]=u:n[c]=u:cn(e.emitsOptions,l)||l in r&&u===r[l]||(r[l]=u,i=!0)}if(s){const t=ft(n),r=o||v;for(let o=0;o<s.length;o++){const i=s[o];n[i]=yr(a,t,i,r[i],e,!$(r,i))}}return i}function yr(e,t,n,r,a,s){const o=e[n];if(null!=o){const e=$(o,"default");if(e&&void 0===r){const e=o.default;if(o.type!==Function&&M(e)){const{propsDefaults:s}=a;n in s?r=s[n]:(Ra(a),r=s[n]=e.call(null,t),Pa())}else r=e}o[0]&&(s&&!e?r=!1:!o[1]||""!==r&&r!==G(n)||(r=!0))}return r}function wr(e,t,n=!1){const r=t.propsCache,a=r.get(e);if(a)return a;const s=e.props,o={},i=[];let l=!1;if(__VUE_OPTIONS_API__&&!M(e)){const r=e=>{l=!0;const[n,r]=wr(e,t,!0);S(o,n),r&&i.push(...r)};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!s&&!l)return r.set(e,b),b;if(I(s))for(let e=0;e<s.length;e++){0;const t=j(s[e]);xr(t)&&(o[t]=v)}else if(s){0;for(const e in s){const t=j(e);if(xr(t)){const n=s[e],r=o[t]=I(n)||M(n)?{type:n}:n;if(r){const e=Sr(Boolean,r.type),n=Sr(String,r.type);r[0]=e>-1,r[1]=n<0||e<n,(e>-1||$(r,"default"))&&i.push(t)}}}}const u=[o,i];return r.set(e,u),u}function xr(e){return"$"!==e[0]}function kr(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:null===e?"null":""}function Cr(e,t){return kr(e)===kr(t)}function Sr(e,t){return I(t)?t.findIndex((t=>Cr(t,e))):M(t)&&Cr(t,e)?0:-1}const Er=e=>"_"===e[0]||"$stable"===e,Tr=e=>I(e)?e.map(ba):[ba(e)],$r=(e,t,n)=>{const r=fn(((...e)=>Tr(t(...e))),n);return r._c=!1,r},Ir=(e,t,n)=>{const r=e._ctx;for(const n in e){if(Er(n))continue;const a=e[n];if(M(a))t[n]=$r(0,a,r);else if(null!=a){0;const e=Tr(a);t[n]=()=>e}}},Nr=(e,t)=>{const n=Tr(t);e.slots.default=()=>n};function Or(e,t){if(null===pn)return e;const n=pn.proxy,r=e.dirs||(e.dirs=[]);for(let e=0;e<t.length;e++){let[a,s,o,i=v]=t[e];M(a)&&(a={mounted:a,updated:a}),a.deep&&In(s),r.push({dir:a,instance:n,value:s,oldValue:void 0,arg:o,modifiers:i})}return e}function Ar(e,t,n,r){const a=e.dirs,s=t&&t.dirs;for(let o=0;o<a.length;o++){const i=a[o];s&&(i.oldValue=s[o].value);let l=i.dir[r];l&&(ve(),It(l,n,8,[e.el,i,e,t]),be())}}function Mr(){return{app:null,config:{isNativeTag:w,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _r=0;function Rr(e,t){return function(n,r=null){null==r||P(r)||(r=null);const a=Mr(),s=new Set;let o=!1;const i=a.app={_uid:_r++,_component:n,_props:r,_container:null,_context:a,_instance:null,version:Ka,get config(){return a.config},set config(e){0},use:(e,...t)=>(s.has(e)||(e&&M(e.install)?(s.add(e),e.install(i,...t)):M(e)&&(s.add(e),e(i,...t))),i),mixin:e=>(__VUE_OPTIONS_API__&&(a.mixins.includes(e)||a.mixins.push(e)),i),component:(e,t)=>t?(a.components[e]=t,i):a.components[e],directive:(e,t)=>t?(a.directives[e]=t,i):a.directives[e],mount(s,l,u){if(!o){const c=pa(n,r);return c.appContext=a,l&&t?t(c,s):e(c,s,u),o=!0,i._container=s,s.__vue_app__=i,__VUE_PROD_DEVTOOLS__&&(i._instance=c.component,function(e,t){tn("app:init",e,t,{Fragment:Gr,Text:qr,Comment:Xr,Static:Kr})}(i,Ka)),ja(c.component)||c.component.proxy}},unmount(){o&&(e(null,i._container),__VUE_PROD_DEVTOOLS__&&(i._instance=null,function(e){tn("app:unmount",e)}(i)),delete i._container.__vue_app__)},provide:(e,t)=>(a.provides[e]=t,i)};return i}}function Pr(e,t,n,r,a=!1){if(I(e))return void e.forEach(((e,s)=>Pr(e,t&&(I(t)?t[s]:t),n,r,a)));if(Fn(r)&&!a)return;const s=4&r.shapeFlag?ja(r.component)||r.component.proxy:r.el,o=a?null:s,{i:i,r:l}=e;const u=t&&t.r,c=i.refs===v?i.refs={}:i.refs,p=i.setupState;if(null!=u&&u!==l&&(_(u)?(c[u]=null,$(p,u)&&(p[u]=null)):wt(u)&&(u.value=null)),M(l))$t(l,i,12,[o,c]);else{const t=_(l),r=wt(l);if(t||r){const r=()=>{if(e.f){const n=t?c[l]:l.value;a?I(n)&&E(n,s):I(n)?n.includes(s)||n.push(s):t?c[l]=[s]:(l.value=[s],e.k&&(c[e.k]=l.value))}else t?(c[l]=o,$(p,l)&&(p[l]=o)):wt(l)&&(l.value=o,e.k&&(c[e.k]=o))};o?(r.id=-1,Dr(r,n)):r()}else 0}}const Dr=wn;function Lr(e,t){"boolean"!=typeof __VUE_OPTIONS_API__&&(ee().__VUE_OPTIONS_API__=!0),"boolean"!=typeof __VUE_PROD_DEVTOOLS__&&(ee().__VUE_PROD_DEVTOOLS__=!1);const n=ee();n.__VUE__=!0,__VUE_PROD_DEVTOOLS__&&nn(n.__VUE_DEVTOOLS_GLOBAL_HOOK__,n);const{insert:r,remove:a,patchProp:s,createElement:o,createText:i,createComment:l,setText:u,setElementText:c,parentNode:p,nextSibling:d,setScopeId:h=y,cloneNode:f,insertStaticContent:m}=e,g=(e,t,n,r=null,a=null,s=null,o=!1,i=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!oa(e,t)&&(r=Z(e),U(e,a,s,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:u,ref:c,shapeFlag:p}=t;switch(u){case qr:w(e,t,n,r);break;case Xr:x(e,t,n,r);break;case Kr:null==e&&k(t,n,r,o);break;case Gr:_(e,t,n,r,a,s,o,i,l);break;default:1&p?E(e,t,n,r,a,s,o,i,l):6&p?R(e,t,n,r,a,s,o,i,l):(64&p||128&p)&&u.process(e,t,n,r,a,s,o,i,l,te)}null!=c&&a&&Pr(c,e&&e.ref,s,t||e,!t)},w=(e,t,n,a)=>{if(null==e)r(t.el=i(t.children),n,a);else{const n=t.el=e.el;t.children!==e.children&&u(n,t.children)}},x=(e,t,n,a)=>{null==e?r(t.el=l(t.children||""),n,a):t.el=e.el},k=(e,t,n,r)=>{[e.el,e.anchor]=m(e.children,t,n,r,e.el,e.anchor)},C=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=d(e),a(e),e=n;a(t)},E=(e,t,n,r,a,s,o,i,l)=>{o=o||"svg"===t.type,null==e?T(t,n,r,a,s,o,i,l):O(e,t,a,s,o,i,l)},T=(e,t,n,a,i,l,u,p)=>{let d,h;const{type:m,props:g,shapeFlag:v,transition:b,patchFlag:y,dirs:w}=e;if(e.el&&void 0!==f&&-1===y)d=e.el=f(e.el);else{if(d=e.el=o(e.type,l,g&&g.is,g),8&v?c(d,e.children):16&v&&N(e.children,d,null,a,i,l&&"foreignObject"!==m,u,p),w&&Ar(e,null,a,"created"),g){for(const t in g)"value"===t||V(t)||s(d,t,null,g[t],l,e.children,a,i,J);"value"in g&&s(d,"value",null,g.value),(h=g.onVnodeBeforeMount)&&ka(h,a,e)}I(d,e,e.scopeId,u,a)}__VUE_PROD_DEVTOOLS__&&(Object.defineProperty(d,"__vnode",{value:e,enumerable:!1}),Object.defineProperty(d,"__vueParentComponent",{value:a,enumerable:!1})),w&&Ar(e,null,a,"beforeMount");const x=(!i||i&&!i.pendingBranch)&&b&&!b.persisted;x&&b.beforeEnter(d),r(d,t,n),((h=g&&g.onVnodeMounted)||x||w)&&Dr((()=>{h&&ka(h,a,e),x&&b.enter(d),w&&Ar(e,null,a,"mounted")}),i)},I=(e,t,n,r,a)=>{if(n&&h(e,n),r)for(let t=0;t<r.length;t++)h(e,r[t]);if(a){if(t===a.subTree){const t=a.vnode;I(e,t,t.scopeId,t.slotScopeIds,a.parent)}}},N=(e,t,n,r,a,s,o,i,l=0)=>{for(let u=l;u<e.length;u++){const l=e[u]=i?ya(e[u]):ba(e[u]);g(null,l,t,n,r,a,s,o,i)}},O=(e,t,n,r,a,o,i)=>{const l=t.el=e.el;let{patchFlag:u,dynamicChildren:p,dirs:d}=t;u|=16&e.patchFlag;const h=e.props||v,f=t.props||v;let m;n&&Br(n,!1),(m=f.onVnodeBeforeUpdate)&&ka(m,n,t,e),d&&Ar(t,e,n,"beforeUpdate"),n&&Br(n,!0);const g=a&&"foreignObject"!==t.type;if(p?A(e.dynamicChildren,p,l,n,r,g,o):i||F(e,t,l,null,n,r,g,o,!1),u>0){if(16&u)M(l,t,h,f,n,r,a);else if(2&u&&h.class!==f.class&&s(l,"class",null,f.class,a),4&u&&s(l,"style",h.style,f.style,a),8&u){const o=t.dynamicProps;for(let t=0;t<o.length;t++){const i=o[t],u=h[i],c=f[i];c===u&&"value"!==i||s(l,i,u,c,a,e.children,n,r,J)}}1&u&&e.children!==t.children&&c(l,t.children)}else i||null!=p||M(l,t,h,f,n,r,a);((m=f.onVnodeUpdated)||d)&&Dr((()=>{m&&ka(m,n,t,e),d&&Ar(t,e,n,"updated")}),r)},A=(e,t,n,r,a,s,o)=>{for(let i=0;i<t.length;i++){const l=e[i],u=t[i],c=l.el&&(l.type===Gr||!oa(l,u)||70&l.shapeFlag)?p(l.el):n;g(l,u,c,null,r,a,s,o,!0)}},M=(e,t,n,r,a,o,i)=>{if(n!==r){for(const l in r){if(V(l))continue;const u=r[l],c=n[l];u!==c&&"value"!==l&&s(e,l,c,u,i,t.children,a,o,J)}if(n!==v)for(const l in n)V(l)||l in r||s(e,l,n[l],null,i,t.children,a,o,J);"value"in r&&s(e,"value",n.value,r.value)}},_=(e,t,n,a,s,o,l,u,c)=>{const p=t.el=e?e.el:i(""),d=t.anchor=e?e.anchor:i("");let{patchFlag:h,dynamicChildren:f,slotScopeIds:m}=t;m&&(u=u?u.concat(m):m),null==e?(r(p,n,a),r(d,n,a),N(t.children,n,d,s,o,l,u,c)):h>0&&64&h&&f&&e.dynamicChildren?(A(e.dynamicChildren,f,n,s,o,l,u),(null!=t.key||s&&t===s.subTree)&&Fr(e,t,!0)):F(e,t,n,d,s,o,l,u,c)},R=(e,t,n,r,a,s,o,i,l)=>{t.slotScopeIds=i,null==e?512&t.shapeFlag?a.ctx.activate(t,n,r,o,l):P(t,n,r,a,s,o,l):D(e,t,l)},P=(e,t,n,r,a,s,o)=>{const i=e.component=Aa(e,r,a);if(zn(e)&&(i.ctx.renderer=te),za(i),i.asyncDep){if(a&&a.registerDep(i,L),!e.el){const e=i.subTree=pa(Xr);x(null,e,t,n)}}else L(i,e,t,n,a,s,o)},D=(e,t,n)=>{const r=t.component=e.component;if(function(e,t,n){const{props:r,children:a,component:s}=e,{props:o,children:i,patchFlag:l}=t,u=s.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!a&&!i||i&&i.$stable)||r!==o&&(r?!o||bn(r,o,u):!!o);if(1024&l)return!0;if(16&l)return r?bn(r,o,u):!!o;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(o[n]!==r[n]&&!cn(u,n))return!0}}return!1}(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void B(r,t,n);r.next=t,function(e){const t=Mt.indexOf(e);t>_t&&Mt.splice(t,1)}(r.update),r.update()}else t.component=e.component,t.el=e.el,r.vnode=t},L=(e,t,n,r,a,s,o)=>{const i=e.effect=new he((()=>{if(e.isMounted){let t,{next:n,bu:r,u:i,parent:l,vnode:u}=e,c=n;0,Br(e,!1),n?(n.el=u.el,B(e,n,o)):n=u,r&&Y(r),(t=n.props&&n.props.onVnodeBeforeUpdate)&&ka(t,l,n,u),Br(e,!0);const d=mn(e);0;const h=e.subTree;e.subTree=d,g(h,d,p(h.el),Z(h),e,a,s),n.el=d.el,null===c&&yn(e,d.el),i&&Dr(i,a),(t=n.props&&n.props.onVnodeUpdated)&&Dr((()=>ka(t,l,n,u)),a),__VUE_PROD_DEVTOOLS__&&an(e)}else{let o;const{el:i,props:l}=t,{bm:u,m:c,parent:p}=e,d=Fn(t);if(Br(e,!1),u&&Y(u),!d&&(o=l&&l.onVnodeBeforeMount)&&ka(o,p,t),Br(e,!0),i&&re){const n=()=>{e.subTree=mn(e),re(i,e.subTree,e,a,null)};d?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{0;const o=e.subTree=mn(e);0,g(null,o,n,r,e,a,s),t.el=o.el}if(c&&Dr(c,a),!d&&(o=l&&l.onVnodeMounted)){const e=t;Dr((()=>ka(o,p,e)),a)}256&t.shapeFlag&&e.a&&Dr(e.a,a),e.isMounted=!0,__VUE_PROD_DEVTOOLS__&&rn(e),t=n=r=null}}),(()=>jt(e.update)),e.scope),l=e.update=i.run.bind(i);l.id=e.uid,Br(e,!0),l()},B=(e,t,n)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,r){const{props:a,attrs:s,vnode:{patchFlag:o}}=e,i=ft(a),[l]=e.propsOptions;let u=!1;if(!(r||o>0)||16&o){let r;br(e,t,a,s)&&(u=!0);for(const s in i)t&&($(t,s)||(r=G(s))!==s&&$(t,r))||(l?!n||void 0===n[s]&&void 0===n[r]||(a[s]=yr(l,i,s,void 0,e,!0)):delete a[s]);if(s!==i)for(const e in s)t&&$(t,e)||(delete s[e],u=!0)}else if(8&o){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let o=n[r];const c=t[o];if(l)if($(s,o))c!==s[o]&&(s[o]=c,u=!0);else{const t=j(o);a[t]=yr(l,i,t,c,e,!1)}else c!==s[o]&&(s[o]=c,u=!0)}}u&&xe(e,"set","$attrs")}(e,t.props,r,n),((e,t,n)=>{const{vnode:r,slots:a}=e;let s=!0,o=v;if(32&r.shapeFlag){const e=t._;e?n&&1===e?s=!1:(S(a,t),n||1!==e||delete a._):(s=!t.$stable,Ir(t,a)),o=t}else t&&(Nr(e,t),o={default:1});if(s)for(const e in a)Er(e)||e in o||delete a[e]})(e,t.children,n),ve(),Xt(void 0,e.update),be()},F=(e,t,n,r,a,s,o,i,l=!1)=>{const u=e&&e.children,p=e?e.shapeFlag:0,d=t.children,{patchFlag:h,shapeFlag:f}=t;if(h>0){if(128&h)return void W(u,d,n,r,a,s,o,i,l);if(256&h)return void z(u,d,n,r,a,s,o,i,l)}8&f?(16&p&&J(u,a,s),d!==u&&c(n,d)):16&p?16&f?W(u,d,n,r,a,s,o,i,l):J(u,a,s,!0):(8&p&&c(n,""),16&f&&N(d,n,r,a,s,o,i,l))},z=(e,t,n,r,a,s,o,i,l)=>{t=t||b;const u=(e=e||b).length,c=t.length,p=Math.min(u,c);let d;for(d=0;d<p;d++){const r=t[d]=l?ya(t[d]):ba(t[d]);g(e[d],r,n,null,a,s,o,i,l)}u>c?J(e,a,s,!0,!1,p):N(t,n,r,a,s,o,i,l,p)},W=(e,t,n,r,a,s,o,i,l)=>{let u=0;const c=t.length;let p=e.length-1,d=c-1;for(;u<=p&&u<=d;){const r=e[u],c=t[u]=l?ya(t[u]):ba(t[u]);if(!oa(r,c))break;g(r,c,n,null,a,s,o,i,l),u++}for(;u<=p&&u<=d;){const r=e[p],u=t[d]=l?ya(t[d]):ba(t[d]);if(!oa(r,u))break;g(r,u,n,null,a,s,o,i,l),p--,d--}if(u>p){if(u<=d){const e=d+1,p=e<c?t[e].el:r;for(;u<=d;)g(null,t[u]=l?ya(t[u]):ba(t[u]),n,p,a,s,o,i,l),u++}}else if(u>d)for(;u<=p;)U(e[u],a,s,!0),u++;else{const h=u,f=u,m=new Map;for(u=f;u<=d;u++){const e=t[u]=l?ya(t[u]):ba(t[u]);null!=e.key&&m.set(e.key,u)}let v,y=0;const w=d-f+1;let x=!1,k=0;const C=new Array(w);for(u=0;u<w;u++)C[u]=0;for(u=h;u<=p;u++){const r=e[u];if(y>=w){U(r,a,s,!0);continue}let c;if(null!=r.key)c=m.get(r.key);else for(v=f;v<=d;v++)if(0===C[v-f]&&oa(r,t[v])){c=v;break}void 0===c?U(r,a,s,!0):(C[c-f]=u+1,c>=k?k=c:x=!0,g(r,t[c],n,null,a,s,o,i,l),y++)}const S=x?function(e){const t=e.slice(),n=[0];let r,a,s,o,i;const l=e.length;for(r=0;r<l;r++){const l=e[r];if(0!==l){if(a=n[n.length-1],e[a]<l){t[r]=a,n.push(r);continue}for(s=0,o=n.length-1;s<o;)i=s+o>>1,e[n[i]]<l?s=i+1:o=i;l<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}s=n.length,o=n[s-1];for(;s-- >0;)n[s]=o,o=t[o];return n}(C):b;for(v=S.length-1,u=w-1;u>=0;u--){const e=f+u,p=t[e],d=e+1<c?t[e+1].el:r;0===C[u]?g(null,p,n,d,a,s,o,i,l):x&&(v<0||u!==S[v]?H(p,n,d,2):v--)}}},H=(e,t,n,a,s=null)=>{const{el:o,type:i,transition:l,children:u,shapeFlag:c}=e;if(6&c)return void H(e.component.subTree,t,n,a);if(128&c)return void e.suspense.move(t,n,a);if(64&c)return void i.move(e,t,n,te);if(i===Gr){r(o,t,n);for(let e=0;e<u.length;e++)H(u[e],t,n,a);return void r(e.anchor,t,n)}if(i===Kr)return void(({el:e,anchor:t},n,a)=>{let s;for(;e&&e!==t;)s=d(e),r(e,n,a),e=s;r(t,n,a)})(e,t,n);if(2!==a&&1&c&&l)if(0===a)l.beforeEnter(o),r(o,t,n),Dr((()=>l.enter(o)),s);else{const{leave:e,delayLeave:a,afterLeave:s}=l,i=()=>r(o,t,n),u=()=>{e(o,(()=>{i(),s&&s()}))};a?a(o,i,u):u()}else r(o,t,n)},U=(e,t,n,r=!1,a=!1)=>{const{type:s,props:o,ref:i,children:l,dynamicChildren:u,shapeFlag:c,patchFlag:p,dirs:d}=e;if(null!=i&&Pr(i,null,n,e,!0),256&c)return void t.ctx.deactivate(e);const h=1&c&&d,f=!Fn(e);let m;if(f&&(m=o&&o.onVnodeBeforeUnmount)&&ka(m,t,e),6&c)K(e.component,n,r);else{if(128&c)return void e.suspense.unmount(n,r);h&&Ar(e,null,t,"beforeUnmount"),64&c?e.type.remove(e,t,n,a,te,r):u&&(s!==Gr||p>0&&64&p)?J(u,t,n,!1,!0):(s===Gr&&384&p||!a&&16&c)&&J(l,t,n),r&&q(e)}(f&&(m=o&&o.onVnodeUnmounted)||h)&&Dr((()=>{m&&ka(m,t,e),h&&Ar(e,null,t,"unmounted")}),n)},q=e=>{const{type:t,el:n,anchor:r,transition:s}=e;if(t===Gr)return void X(n,r);if(t===Kr)return void C(e);const o=()=>{a(n),s&&!s.persisted&&s.afterLeave&&s.afterLeave()};if(1&e.shapeFlag&&s&&!s.persisted){const{leave:t,delayLeave:r}=s,a=()=>t(n,o);r?r(e.el,o,a):a()}else o()},X=(e,t)=>{let n;for(;e!==t;)n=d(e),a(e),e=n;a(t)},K=(e,t,n)=>{const{bum:r,scope:a,update:s,subTree:o,um:i}=e;r&&Y(r),a.stop(),s&&(s.active=!1,U(o,e,t,n)),i&&Dr(i,t),Dr((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve()),__VUE_PROD_DEVTOOLS__&&sn(e)},J=(e,t,n,r=!1,a=!1,s=0)=>{for(let o=s;o<e.length;o++)U(e[o],t,n,r,a)},Z=e=>6&e.shapeFlag?Z(e.component.subTree):128&e.shapeFlag?e.suspense.next():d(e.anchor||e.el),Q=(e,t,n)=>{null==e?t._vnode&&U(t._vnode,null,null,!0):g(t._vnode||null,e,t,null,null,null,n),Kt(),t._vnode=e},te={p:g,um:U,m:H,r:q,mt:P,mc:N,pc:F,pbc:A,n:Z,o:e};let ne,re;return t&&([ne,re]=t(te)),{render:Q,hydrate:ne,createApp:Rr(Q,ne)}}function Br({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Fr(e,t,n=!1){const r=e.children,a=t.children;if(I(r)&&I(a))for(let e=0;e<r.length;e++){const t=r[e];let s=a[e];1&s.shapeFlag&&!s.dynamicChildren&&((s.patchFlag<=0||32===s.patchFlag)&&(s=a[e]=ya(a[e]),s.el=t.el),n||Fr(t,s))}}const zr="components";function Vr(e,t){return jr(zr,e,!0,t)||e}const Wr=Symbol();function Hr(e){return _(e)?jr(zr,e,!1)||e:e||Wr}function jr(e,t,n=!0,r=!1){const a=pn||Ma;if(a){const n=a.type;if(e===zr){const e=Ua(n);if(e&&(e===t||e===j(t)||e===q(j(t))))return n}const s=Ur(a[e]||n[e],t)||Ur(a.appContext[e],t);return!s&&r?n:s}}function Ur(e,t){return e&&(e[t]||e[j(t)]||e[q(j(t))])}const Gr=Symbol(void 0),qr=Symbol(void 0),Xr=Symbol(void 0),Kr=Symbol(void 0),Yr=[];let Jr=null;function Zr(e=!1){Yr.push(Jr=e?null:[])}function Qr(){Yr.pop(),Jr=Yr[Yr.length-1]||null}let ea=1;function ta(e){ea+=e}function na(e){return e.dynamicChildren=ea>0?Jr||b:null,Qr(),ea>0&&Jr&&Jr.push(e),e}function ra(e,t,n,r,a,s){return na(ca(e,t,n,r,a,s,!0))}function aa(e,t,n,r,a){return na(pa(e,t,n,r,a,!0))}function sa(e){return!!e&&!0===e.__v_isVNode}function oa(e,t){return e.type===t.type&&e.key===t.key}const ia="__vInternal",la=({key:e})=>null!=e?e:null,ua=({ref:e,ref_key:t,ref_for:n})=>null!=e?_(e)||wt(e)||M(e)?{i:pn,r:e,k:t,f:!!n}:e:null;function ca(e,t=null,n=null,r=0,a=null,s=(e===Gr?0:1),o=!1,i=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&la(t),ref:t&&ua(t),scopeId:dn,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:a,dynamicChildren:null,appContext:null};return i?(wa(l,n),128&s&&e.normalize(l)):n&&(l.shapeFlag|=_(n)?8:16),ea>0&&!o&&Jr&&(l.patchFlag>0||6&s)&&32!==l.patchFlag&&Jr.push(l),l}const pa=da;function da(e,t=null,n=null,r=0,a=null,s=!1){if(e&&e!==Wr||(e=Xr),sa(e)){const r=fa(e,t,!0);return n&&wa(r,n),r}if(Ga(e)&&(e=e.__vccOpts),t){t=ha(t);let{class:e,style:n}=t;e&&!_(e)&&(t.class=d(e)),P(n)&&(ht(n)&&!I(n)&&(n=S({},n)),t.style=l(n))}return ca(e,t,n,r,a,_(e)?1:(e=>e.__isSuspense)(e)?128:(e=>e.__isTeleport)(e)?64:P(e)?4:M(e)?2:0,s,!0)}function ha(e){return e?ht(e)||ia in e?S({},e):e:null}function fa(e,t,n=!1){const{props:r,ref:a,patchFlag:s,children:o}=e,i=t?xa(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:i,key:i&&la(i),ref:t&&t.ref?n&&a?I(a)?a.concat(ua(t)):[a,ua(t)]:ua(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Gr?-1===s?16:16|s:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&fa(e.ssContent),ssFallback:e.ssFallback&&fa(e.ssFallback),el:e.el,anchor:e.anchor}}function ma(e=" ",t=0){return pa(qr,null,e,t)}function ga(e,t){const n=pa(Kr,null,e);return n.staticCount=t,n}function va(e="",t=!1){return t?(Zr(),aa(Xr,null,e)):pa(Xr,null,e)}function ba(e){return null==e||"boolean"==typeof e?pa(Xr):I(e)?pa(Gr,null,e.slice()):"object"==typeof e?ya(e):pa(qr,null,String(e))}function ya(e){return null===e.el||e.memo?e:fa(e)}function wa(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if(I(t))n=16;else if("object"==typeof t){if(65&r){const n=t.default;return void(n&&(n._c&&(n._d=!1),wa(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||ia in t?3===r&&pn&&(1===pn.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=pn}}else M(t)?(t={default:t,_ctx:pn},n=32):(t=String(t),64&r?(n=16,t=[ma(t)]):n=8);e.children=t,e.shapeFlag|=n}function xa(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if("class"===e)t.class!==r.class&&(t.class=d([t.class,r.class]));else if("style"===e)t.style=l([t.style,r.style]);else if(k(e)){const n=t[e],a=r[e];!a||n===a||I(n)&&n.includes(a)||(t[e]=n?[].concat(n,a):a)}else""!==e&&(t[e]=r[e])}return t}function ka(e,t,n,r=null){It(e,t,7,[n,r])}function Ca(e,t,n,r){let a;const s=n&&n[r];if(I(e)||_(e)){a=new Array(e.length);for(let n=0,r=e.length;n<r;n++)a[n]=t(e[n],n,void 0,s&&s[n])}else if("number"==typeof e){0,a=new Array(e);for(let n=0;n<e;n++)a[n]=t(n+1,n,void 0,s&&s[n])}else if(P(e))if(e[Symbol.iterator])a=Array.from(e,((e,n)=>t(e,n,void 0,s&&s[n])));else{const n=Object.keys(e);a=new Array(n.length);for(let r=0,o=n.length;r<o;r++){const o=n[r];a[r]=t(e[o],o,r,s&&s[r])}}else a=[];return n&&(n[r]=a),a}function Sa(e,t,n={},r,a){if(pn.isCE)return pa("slot","default"===t?null:{name:t},r&&r());let s=e[t];s&&s._c&&(s._d=!1),Zr();const o=s&&Ea(s(n)),i=aa(Gr,{key:n.key||`_${t}`},o||(r?r():[]),o&&1===e._?64:-2);return!a&&i.scopeId&&(i.slotScopeIds=[i.scopeId+"-s"]),s&&s._c&&(s._d=!0),i}function Ea(e){return e.some((e=>!sa(e)||e.type!==Xr&&!(e.type===Gr&&!Ea(e.children))))?e:null}const Ta=e=>e?Da(e)?ja(e)||e.proxy:Ta(e.parent):null,$a=S(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ta(e.parent),$root:e=>Ta(e.root),$emit:e=>e.emit,$options:e=>__VUE_OPTIONS_API__?cr(e):e.type,$forceUpdate:e=>()=>jt(e.update),$nextTick:e=>Ht.bind(e.proxy),$watch:e=>__VUE_OPTIONS_API__?Tn.bind(e):y}),Ia={get({_:e},t){const{ctx:n,setupState:r,data:a,props:s,accessCache:o,type:i,appContext:l}=e;let u;if("$"!==t[0]){const i=o[t];if(void 0!==i)switch(i){case 1:return r[t];case 2:return a[t];case 4:return n[t];case 3:return s[t]}else{if(r!==v&&$(r,t))return o[t]=1,r[t];if(a!==v&&$(a,t))return o[t]=2,a[t];if((u=e.propsOptions[0])&&$(u,t))return o[t]=3,s[t];if(n!==v&&$(n,t))return o[t]=4,n[t];__VUE_OPTIONS_API__&&!or||(o[t]=0)}}const c=$a[t];let p,d;return c?("$attrs"===t&&ye(e,0,t),c(e)):(p=i.__cssModules)&&(p=p[t])?p:n!==v&&$(n,t)?(o[t]=4,n[t]):(d=l.config.globalProperties,$(d,t)?d[t]:void 0)},set({_:e},t,n){const{data:r,setupState:a,ctx:s}=e;return a!==v&&$(a,t)?(a[t]=n,!0):r!==v&&$(r,t)?(r[t]=n,!0):!$(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(s[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:a,propsOptions:s}},o){let i;return!!n[o]||e!==v&&$(e,o)||t!==v&&$(t,o)||(i=s[0])&&$(i,o)||$(r,o)||$($a,o)||$(a.config.globalProperties,o)},defineProperty(e,t,n){return null!=n.get?this.set(e,t,n.get(),null):null!=n.value&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};const Na=Mr();let Oa=0;function Aa(e,t,n){const r=e.type,a=(t?t.appContext:e.appContext)||Na,s={uid:Oa++,vnode:e,type:r,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new ne(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:wr(r,a),emitsOptions:un(r,a),emit:null,emitted:null,propsDefaults:v,inheritAttrs:r.inheritAttrs,ctx:v,data:v,props:v,attrs:v,slots:v,refs:v,setupState:v,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=ln.bind(null,s),e.ce&&e.ce(s),s}let Ma=null;const _a=()=>Ma||pn,Ra=e=>{Ma=e,e.scope.on()},Pa=()=>{Ma&&Ma.scope.off(),Ma=null};function Da(e){return 4&e.vnode.shapeFlag}let La,Ba,Fa=!1;function za(e,t=!1){Fa=t;const{props:n,children:r}=e.vnode,a=Da(e);vr(e,n,a,t),((e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=ft(t),J(t,"_",n)):Ir(t,e.slots={})}else e.slots={},t&&Nr(e,t);J(e.slots,ia,1)})(e,r);const s=a?function(e,t){const n=e.type;0;e.accessCache=Object.create(null),e.proxy=mt(new Proxy(e.ctx,Ia)),!1;const{setup:r}=n;if(r){const n=e.setupContext=r.length>1?Ha(e):null;Ra(e),ve();const a=$t(r,e,0,[e.props,n]);if(be(),Pa(),D(a)){if(a.then(Pa,Pa),t)return a.then((n=>{Va(e,n,t)})).catch((t=>{Nt(t,e,0)}));e.asyncDep=a}else Va(e,a,t)}else Wa(e,t)}(e,t):void 0;return Fa=!1,s}function Va(e,t,n){M(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:P(t)&&(__VUE_PROD_DEVTOOLS__&&(e.devtoolsRawSetupState=t),e.setupState=Et(t)),Wa(e,n)}function Wa(e,t,n){const r=e.type;if(!e.render){if(!t&&La&&!r.render){const t=r.template;if(t){0;const{isCustomElement:n,compilerOptions:a}=e.appContext.config,{delimiters:s,compilerOptions:o}=r,i=S(S({isCustomElement:n,delimiters:s},a),o);r.render=La(t,i)}}e.render=r.render||y,Ba&&Ba(e)}__VUE_OPTIONS_API__&&(Ra(e),ve(),ir(e),be(),Pa())}function Ha(e){const t=t=>{e.exposed=t||{}};let n;return{get attrs(){return n||(n=function(e){return new Proxy(e.attrs,{get:(t,n)=>(ye(e,0,"$attrs"),t[n])})}(e))},slots:e.slots,emit:e.emit,expose:t}}function ja(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Et(mt(e.exposed)),{get:(t,n)=>n in t?t[n]:n in $a?$a[n](e):void 0}))}function Ua(e){return M(e)&&e.displayName||e.name}function Ga(e){return M(e)&&"__vccOpts"in e}const qa=(e,t)=>function(e,t,n=!1){let r,a;const s=M(e);return s?(r=e,a=y):(r=e.get,a=e.set),new Tt(r,a,s||!a,n)}(e,0,Fa);function Xa(e,t,n){const r=arguments.length;return 2===r?P(t)&&!I(t)?sa(t)?pa(e,null,[t]):pa(e,t):pa(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&sa(n)&&(n=[n]),pa(e,t,n))}Symbol("");const Ka="3.2.31",Ya="undefined"!=typeof document?document:null,Ja=Ya&&Ya.createElement("template"),Za={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const a=t?Ya.createElementNS("http://www.w3.org/2000/svg",e):Ya.createElement(e,n?{is:n}:void 0);return"select"===e&&r&&null!=r.multiple&&a.setAttribute("multiple",r.multiple),a},createText:e=>Ya.createTextNode(e),createComment:e=>Ya.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ya.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,r,a,s){const o=n?n.previousSibling:t.lastChild;if(a&&(a===s||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),n),a!==s&&(a=a.nextSibling););else{Ja.innerHTML=r?`<svg>${e}</svg>`:e;const a=Ja.content;if(r){const e=a.firstChild;for(;e.firstChild;)a.appendChild(e.firstChild);a.removeChild(e)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};const Qa=/\s*!important$/;function es(e,t,n){if(I(n))n.forEach((n=>es(e,t,n)));else if(t.startsWith("--"))e.setProperty(t,n);else{const r=function(e,t){const n=ns[t];if(n)return n;let r=j(t);if("filter"!==r&&r in e)return ns[t]=r;r=q(r);for(let n=0;n<ts.length;n++){const a=ts[n]+r;if(a in e)return ns[t]=a}return t}(e,t);Qa.test(n)?e.setProperty(G(r),n.replace(Qa,""),"important"):e[r]=n}}const ts=["Webkit","Moz","ms"],ns={};const rs="http://www.w3.org/1999/xlink";let as=Date.now,ss=!1;if("undefined"!=typeof window){as()>document.createEvent("Event").timeStamp&&(as=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);ss=!!(e&&Number(e[1])<=53)}let os=0;const is=Promise.resolve(),ls=()=>{os=0};function us(e,t,n,r){e.addEventListener(t,n,r)}function cs(e,t,n,r,a=null){const s=e._vei||(e._vei={}),o=s[t];if(r&&o)o.value=r;else{const[n,i]=function(e){let t;if(ps.test(e)){let n;for(t={};n=e.match(ps);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[G(e.slice(2)),t]}(t);if(r){const o=s[t]=function(e,t){const n=e=>{const r=e.timeStamp||as();(ss||r>=n.attached-1)&&It(function(e,t){if(I(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=(()=>os||(is.then(ls),os=as()))(),n}(r,a);us(e,n,o,i)}else o&&(!function(e,t,n,r){e.removeEventListener(t,n,r)}(e,n,o,i),s[t]=void 0)}}const ps=/(?:Once|Passive|Capture)$/;const ds=/^on[a-z]/;"undefined"!=typeof HTMLElement&&HTMLElement;const hs="transition",fs="animation",ms=(e,{slots:t})=>Xa(Mn,ys(e),t);ms.displayName="Transition";const gs={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},vs=(ms.props=S({},Mn.props,gs),(e,t=[])=>{I(e)?e.forEach((e=>e(...t))):e&&e(...t)}),bs=e=>!!e&&(I(e)?e.some((e=>e.length>1)):e.length>1);function ys(e){const t={};for(const n in e)n in gs||(t[n]=e[n]);if(!1===e.css)return t;const{name:n="v",type:r,duration:a,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:i=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:u=o,appearToClass:c=i,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=e,f=function(e){if(null==e)return null;if(P(e))return[ws(e.enter),ws(e.leave)];{const t=ws(e);return[t,t]}}(a),m=f&&f[0],g=f&&f[1],{onBeforeEnter:v,onEnter:b,onEnterCancelled:y,onLeave:w,onLeaveCancelled:x,onBeforeAppear:k=v,onAppear:C=b,onAppearCancelled:E=y}=t,T=(e,t,n)=>{ks(e,t?c:i),ks(e,t?u:o),n&&n()},$=(e,t)=>{ks(e,h),ks(e,d),t&&t()},I=e=>(t,n)=>{const a=e?C:b,o=()=>T(t,e,n);vs(a,[t,o]),Cs((()=>{ks(t,e?l:s),xs(t,e?c:i),bs(a)||Es(t,r,m,o)}))};return S(t,{onBeforeEnter(e){vs(v,[e]),xs(e,s),xs(e,o)},onBeforeAppear(e){vs(k,[e]),xs(e,l),xs(e,u)},onEnter:I(!1),onAppear:I(!0),onLeave(e,t){const n=()=>$(e,t);xs(e,p),Ns(),xs(e,d),Cs((()=>{ks(e,p),xs(e,h),bs(w)||Es(e,r,g,n)})),vs(w,[e,n])},onEnterCancelled(e){T(e,!1),vs(y,[e])},onAppearCancelled(e){T(e,!0),vs(E,[e])},onLeaveCancelled(e){$(e),vs(x,[e])}})}function ws(e){return Z(e)}function xs(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e._vtc||(e._vtc=new Set)).add(t)}function ks(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Cs(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let Ss=0;function Es(e,t,n,r){const a=e._endId=++Ss,s=()=>{a===e._endId&&r()};if(n)return setTimeout(s,n);const{type:o,timeout:i,propCount:l}=Ts(e,t);if(!o)return r();const u=o+"end";let c=0;const p=()=>{e.removeEventListener(u,d),s()},d=t=>{t.target===e&&++c>=l&&p()};setTimeout((()=>{c<l&&p()}),i+1),e.addEventListener(u,d)}function Ts(e,t){const n=window.getComputedStyle(e),r=e=>(n[e]||"").split(", "),a=r("transitionDelay"),s=r("transitionDuration"),o=$s(a,s),i=r("animationDelay"),l=r("animationDuration"),u=$s(i,l);let c=null,p=0,d=0;t===hs?o>0&&(c=hs,p=o,d=s.length):t===fs?u>0&&(c=fs,p=u,d=l.length):(p=Math.max(o,u),c=p>0?o>u?hs:fs:null,d=c?c===hs?s.length:l.length:0);return{type:c,timeout:p,propCount:d,hasTransform:c===hs&&/\b(transform|all)(,|$)/.test(n.transitionProperty)}}function $s(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map(((t,n)=>Is(t)+Is(e[n]))))}function Is(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Ns(){return document.body.offsetHeight}new WeakMap,new WeakMap;const Os=e=>{const t=e.props["onUpdate:modelValue"];return I(t)?e=>Y(t,e):t};const As={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const a=O(t);us(e,"change",(()=>{const t=Array.prototype.filter.call(e.options,(e=>e.selected)).map((e=>n?Z(_s(e)):_s(e)));e._assign(e.multiple?a?new Set(t):t:t[0])})),e._assign=Os(r)},mounted(e,{value:t}){Ms(e,t)},beforeUpdate(e,t,n){e._assign=Os(n)},updated(e,{value:t}){Ms(e,t)}};function Ms(e,t){const n=e.multiple;if(!n||I(t)||O(t)){for(let r=0,a=e.options.length;r<a;r++){const a=e.options[r],s=_s(a);if(n)I(t)?a.selected=f(t,s)>-1:a.selected=t.has(s);else if(h(_s(a),t))return void(e.selectedIndex!==r&&(e.selectedIndex=r))}n||-1===e.selectedIndex||(e.selectedIndex=-1)}}function _s(e){return"_value"in e?e._value:e.value}const Rs={beforeMount(e,{value:t},{transition:n}){e._vod="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):Ps(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Ps(e,!0),r.enter(e)):r.leave(e,(()=>{Ps(e,!1)})):Ps(e,t))},beforeUnmount(e,{value:t}){Ps(e,t)}};function Ps(e,t){e.style.display=t?e._vod:"none"}const Ds=S({patchProp:(e,t,n,r,a=!1,s,l,u,c)=>{"class"===t?function(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,r,a):"style"===t?function(e,t,n){const r=e.style,a=_(n);if(n&&!a){for(const e in n)es(r,e,n[e]);if(t&&!_(t))for(const e in t)null==n[e]&&es(r,e,"")}else{const s=r.display;a?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=s)}}(e,n,r):k(t)?C(t)||cs(e,t,0,r,l):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,n,r){if(r)return"innerHTML"===t||"textContent"===t||!!(t in e&&ds.test(t)&&M(n));if("spellcheck"===t||"draggable"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if(ds.test(t)&&_(n))return!1;return t in e}(e,t,r,a))?function(e,t,n,r,a,s,o){if("innerHTML"===t||"textContent"===t)return r&&o(r,a,s),void(e[t]=null==n?"":n);if("value"===t&&"PROGRESS"!==e.tagName&&!e.tagName.includes("-")){e._value=n;const r=null==n?"":n;return e.value===r&&"OPTION"!==e.tagName||(e.value=r),void(null==n&&e.removeAttribute(t))}if(""===n||null==n){const r=typeof e[t];if("boolean"===r)return void(e[t]=i(n));if(null==n&&"string"===r)return e[t]="",void e.removeAttribute(t);if("number"===r){try{e[t]=0}catch(e){}return void e.removeAttribute(t)}}try{e[t]=n}catch(e){}}(e,t,r,s,l,u,c):("true-value"===t?e._trueValue=r:"false-value"===t&&(e._falseValue=r),function(e,t,n,r,a){if(r&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(rs,t.slice(6,t.length)):e.setAttributeNS(rs,t,n);else{const r=o(t);null==n||r&&!i(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}(e,t,r,a))}},Za);let Ls;function Bs(){return Ls||(Ls=Lr(Ds))}function Fs(e){if(_(e)){return document.querySelector(e)}return e}const zs="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,Vs=e=>zs?Symbol(e):e,Ws=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Hs=e=>"number"==typeof e&&isFinite(e),js=e=>"[object RegExp]"===so(e),Us=e=>oo(e)&&0===Object.keys(e).length;function Gs(e,t){"undefined"!=typeof console&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const qs=Object.assign;let Xs;const Ks=()=>Xs||(Xs="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{});function Ys(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const Js=Object.prototype.hasOwnProperty;function Zs(e,t){return Js.call(e,t)}const Qs=Array.isArray,eo=e=>"function"==typeof e,to=e=>"string"==typeof e,no=e=>"boolean"==typeof e,ro=e=>null!==e&&"object"==typeof e,ao=Object.prototype.toString,so=e=>ao.call(e),oo=e=>"[object Object]"===so(e);function io(){const e=new Map;return{events:e,on(t,n){const r=e.get(t);r&&r.push(n)||e.set(t,[n])},off(t,n){const r=e.get(t);r&&r.splice(r.indexOf(n)>>>0,1)},emit(t,n){(e.get(t)||[]).slice().map((e=>e(n))),(e.get("*")||[]).slice().map((e=>e(t,n)))}}}const lo=Object.prototype.hasOwnProperty;function uo(e,t){return lo.call(e,t)}const co=e=>null!==e&&"object"==typeof e,po=[];po[0]={w:[0],i:[3,0],"[":[4],o:[7]},po[1]={w:[1],".":[2],"[":[4],o:[7]},po[2]={w:[2],i:[3,0],0:[3,0]},po[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]},po[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]},po[5]={"'":[4,0],o:8,l:[5,0]},po[6]={'"':[4,0],o:8,l:[6,0]};const ho=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function fo(e){if(null==e)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function mo(e){const t=e.trim();return("0"!==e.charAt(0)||!isNaN(parseInt(e)))&&(n=t,ho.test(n)?function(e){const t=e.charCodeAt(0);return t!==e.charCodeAt(e.length-1)||34!==t&&39!==t?e:e.slice(1,-1)}(t):"*"+t);var n}const go=new Map;function vo(e,t){if(!co(e))return null;let n=go.get(t);if(n||(n=function(e){const t=[];let n,r,a,s,o,i,l,u=-1,c=0,p=0;const d=[];function h(){const t=e[u+1];if(5===c&&"'"===t||6===c&&'"'===t)return u++,a="\\"+t,d[0](),!0}for(d[0]=()=>{void 0===r?r=a:r+=a},d[1]=()=>{void 0!==r&&(t.push(r),r=void 0)},d[2]=()=>{d[0](),p++},d[3]=()=>{if(p>0)p--,c=4,d[0]();else{if(p=0,void 0===r)return!1;if(r=mo(r),!1===r)return!1;d[1]()}};null!==c;)if(u++,n=e[u],"\\"!==n||!h()){if(s=fo(n),l=po[c],o=l[s]||l.l||8,8===o)return;if(c=o[0],void 0!==o[1]&&(i=d[o[1]],i&&(a=n,!1===i())))return;if(7===c)return t}}(t),n&&go.set(t,n)),!n)return null;const r=n.length;let a=e,s=0;for(;s<r;){const e=a[n[s]];if(void 0===e)return null;a=e,s++}return a}function bo(e){if(!co(e))return e;for(const t in e)if(uo(e,t))if(t.includes(".")){const n=t.split("."),r=n.length-1;let a=e;for(let e=0;e<r;e++)n[e]in a||(a[n[e]]={}),a=a[n[e]];a[n[r]]=e[t],delete e[t],co(a[n[r]])&&bo(a[n[r]])}else co(e[t])&&bo(e[t]);return e}const yo=e=>e,wo=e=>"",xo=e=>0===e.length?"":e.join(""),ko=e=>null==e?"":Qs(e)||oo(e)&&e.toString===ao?JSON.stringify(e,null,2):String(e);function Co(e,t){return e=Math.abs(e),2===t?e?e>1?1:0:1:e?Math.min(e,2):0}function So(e={}){const t=e.locale,n=function(e){const t=Hs(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(Hs(e.named.count)||Hs(e.named.n))?Hs(e.named.count)?e.named.count:Hs(e.named.n)?e.named.n:t:t}(e),r=ro(e.pluralRules)&&to(t)&&eo(e.pluralRules[t])?e.pluralRules[t]:Co,a=ro(e.pluralRules)&&to(t)&&eo(e.pluralRules[t])?Co:void 0,s=e.list||[],o=e.named||{};Hs(e.pluralIndex)&&function(e,t){t.count||(t.count=e),t.n||(t.n=e)}(n,o);function i(t){const n=eo(e.messages)?e.messages(t):!!ro(e.messages)&&e.messages[t];return n||(e.parent?e.parent.message(t):wo)}const l=oo(e.processor)&&eo(e.processor.normalize)?e.processor.normalize:xo,u=oo(e.processor)&&eo(e.processor.interpolate)?e.processor.interpolate:ko,c={list:e=>s[e],named:e=>o[e],plural:e=>e[r(n,e.length,a)],linked:(t,n)=>{const r=i(t)(c);return to(n)?(a=n,e.modifiers?e.modifiers[a]:yo)(r):r;var a},message:i,type:oo(e.processor)&&to(e.processor.type)?e.processor.type:"text",interpolate:u,normalize:l};return c}function Eo(e,t,n={}){const{domain:r,messages:a,args:s}=n,o=new SyntaxError(String(e));return o.code=e,t&&(o.location=t),o.domain=r,o}function To(e){throw e}function $o(e,t,n){const r={start:e,end:t};return null!=n&&(r.source=n),r}const Io=" ",No="\n",Oo=String.fromCharCode(8232),Ao=String.fromCharCode(8233);function Mo(e){const t=e;let n=0,r=1,a=1,s=0;const o=e=>"\r"===t[e]&&t[e+1]===No,i=e=>t[e]===Ao,l=e=>t[e]===Oo,u=e=>o(e)||(e=>t[e]===No)(e)||i(e)||l(e),c=e=>o(e)||i(e)||l(e)?No:t[e];function p(){return s=0,u(n)&&(r++,a=0),o(n)&&n++,n++,a++,t[n]}return{index:()=>n,line:()=>r,column:()=>a,peekOffset:()=>s,charAt:c,currentChar:()=>c(n),currentPeek:()=>c(n+s),next:p,peek:function(){return o(n+s)&&s++,s++,t[n+s]},reset:function(){n=0,r=1,a=1,s=0},resetPeek:function(e=0){s=e},skipToPeek:function(){const e=n+s;for(;e!==n;)p();s=0}}}const _o=void 0;function Ro(e,t={}){const n=!1!==t.location,r=Mo(e),a=()=>r.index(),s=()=>function(e,t,n){return{line:e,column:t,offset:n}}(r.line(),r.column(),r.index()),o=s(),i=a(),l={currentType:14,offset:i,startLoc:o,endLoc:o,lastType:14,lastOffset:i,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},u=()=>l,{onError:c}=t;function p(e,t,n,...r){const a=u();if(t.column+=n,t.offset+=n,c){const n=Eo(e,$o(a.startLoc,t),{domain:"tokenizer",args:r});c(n)}}function d(e,t,r){e.endLoc=s(),e.currentType=t;const a={type:t};return n&&(a.loc=$o(e.startLoc,e.endLoc)),null!=r&&(a.value=r),a}const h=e=>d(e,14);function f(e,t){return e.currentChar()===t?(e.next(),t):(p(0,s(),0,t),"")}function m(e){let t="";for(;e.currentPeek()===Io||e.currentPeek()===No;)t+=e.currentPeek(),e.peek();return t}function g(e){const t=m(e);return e.skipToPeek(),t}function v(e){if(e===_o)return!1;const t=e.charCodeAt(0);return t>=97&&t<=122||t>=65&&t<=90||95===t}function b(e,t){const{currentType:n}=t;if(2!==n)return!1;m(e);const r=function(e){if(e===_o)return!1;const t=e.charCodeAt(0);return t>=48&&t<=57}("-"===e.currentPeek()?e.peek():e.currentPeek());return e.resetPeek(),r}function y(e){m(e);const t="|"===e.currentPeek();return e.resetPeek(),t}function w(e,t=!0){const n=(t=!1,r="",a=!1)=>{const s=e.currentPeek();return"{"===s?"%"!==r&&t:"@"!==s&&s?"%"===s?(e.peek(),n(t,"%",!0)):"|"===s?!("%"!==r&&!a)||!(r===Io||r===No):s===Io?(e.peek(),n(!0,Io,a)):s!==No||(e.peek(),n(!0,No,a)):"%"===r||t},r=n();return t&&e.resetPeek(),r}function x(e,t){const n=e.currentChar();return n===_o?_o:t(n)?(e.next(),n):null}function k(e){return x(e,(e=>{const t=e.charCodeAt(0);return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57||95===t||36===t}))}function C(e){return x(e,(e=>{const t=e.charCodeAt(0);return t>=48&&t<=57}))}function S(e){return x(e,(e=>{const t=e.charCodeAt(0);return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}))}function E(e){let t="",n="";for(;t=C(e);)n+=t;return n}function T(e){const t=e.currentChar();switch(t){case"\\":case"'":return e.next(),`\\${t}`;case"u":return $(e,t,4);case"U":return $(e,t,6);default:return p(3,s(),0,t),""}}function $(e,t,n){f(e,t);let r="";for(let a=0;a<n;a++){const n=S(e);if(!n){p(4,s(),0,`\\${t}${r}${e.currentChar()}`);break}r+=n}return`\\${t}${r}`}function I(e){g(e);const t=f(e,"|");return g(e),t}function N(e,t){let n=null;switch(e.currentChar()){case"{":return t.braceNest>=1&&p(8,s(),0),e.next(),n=d(t,2,"{"),g(e),t.braceNest++,n;case"}":return t.braceNest>0&&2===t.currentType&&p(7,s(),0),e.next(),n=d(t,3,"}"),t.braceNest--,t.braceNest>0&&g(e),t.inLinked&&0===t.braceNest&&(t.inLinked=!1),n;case"@":return t.braceNest>0&&p(6,s(),0),n=O(e,t)||h(t),t.braceNest=0,n;default:let r=!0,a=!0,o=!0;if(y(e))return t.braceNest>0&&p(6,s(),0),n=d(t,1,I(e)),t.braceNest=0,t.inLinked=!1,n;if(t.braceNest>0&&(5===t.currentType||6===t.currentType||7===t.currentType))return p(6,s(),0),t.braceNest=0,A(e,t);if(r=function(e,t){const{currentType:n}=t;if(2!==n)return!1;m(e);const r=v(e.currentPeek());return e.resetPeek(),r}(e,t))return n=d(t,5,function(e){g(e);let t="",n="";for(;t=k(e);)n+=t;return e.currentChar()===_o&&p(6,s(),0),n}(e)),g(e),n;if(a=b(e,t))return n=d(t,6,function(e){g(e);let t="";return"-"===e.currentChar()?(e.next(),t+=`-${E(e)}`):t+=E(e),e.currentChar()===_o&&p(6,s(),0),t}(e)),g(e),n;if(o=function(e,t){const{currentType:n}=t;if(2!==n)return!1;m(e);const r="'"===e.currentPeek();return e.resetPeek(),r}(e,t))return n=d(t,7,function(e){g(e),f(e,"'");let t="",n="";const r=e=>"'"!==e&&e!==No;for(;t=x(e,r);)n+="\\"===t?T(e):t;const a=e.currentChar();return a===No||a===_o?(p(2,s(),0),a===No&&(e.next(),f(e,"'")),n):(f(e,"'"),n)}(e)),g(e),n;if(!r&&!a&&!o)return n=d(t,13,function(e){g(e);let t="",n="";const r=e=>"{"!==e&&"}"!==e&&e!==Io&&e!==No;for(;t=x(e,r);)n+=t;return n}(e)),p(1,s(),0,n.value),g(e),n}return n}function O(e,t){const{currentType:n}=t;let r=null;const a=e.currentChar();switch(8!==n&&9!==n&&12!==n&&10!==n||a!==No&&a!==Io||p(9,s(),0),a){case"@":return e.next(),r=d(t,8,"@"),t.inLinked=!0,r;case".":return g(e),e.next(),d(t,9,".");case":":return g(e),e.next(),d(t,10,":");default:return y(e)?(r=d(t,1,I(e)),t.braceNest=0,t.inLinked=!1,r):function(e,t){const{currentType:n}=t;if(8!==n)return!1;m(e);const r="."===e.currentPeek();return e.resetPeek(),r}(e,t)||function(e,t){const{currentType:n}=t;if(8!==n&&12!==n)return!1;m(e);const r=":"===e.currentPeek();return e.resetPeek(),r}(e,t)?(g(e),O(e,t)):function(e,t){const{currentType:n}=t;if(9!==n)return!1;m(e);const r=v(e.currentPeek());return e.resetPeek(),r}(e,t)?(g(e),d(t,12,function(e){let t="",n="";for(;t=k(e);)n+=t;return n}(e))):function(e,t){const{currentType:n}=t;if(10!==n)return!1;const r=()=>{const t=e.currentPeek();return"{"===t?v(e.peek()):!("@"===t||"%"===t||"|"===t||":"===t||"."===t||t===Io||!t)&&(t===No?(e.peek(),r()):v(t))},a=r();return e.resetPeek(),a}(e,t)?(g(e),"{"===a?N(e,t)||r:d(t,11,function(e){const t=(n=!1,r)=>{const a=e.currentChar();return"{"!==a&&"%"!==a&&"@"!==a&&"|"!==a&&a?a===Io?r:a===No?(r+=a,e.next(),t(n,r)):(r+=a,e.next(),t(!0,r)):r};return t(!1,"")}(e))):(8===n&&p(9,s(),0),t.braceNest=0,t.inLinked=!1,A(e,t))}}function A(e,t){let n={type:14};if(t.braceNest>0)return N(e,t)||h(t);if(t.inLinked)return O(e,t)||h(t);const r=e.currentChar();switch(r){case"{":return N(e,t)||h(t);case"}":return p(5,s(),0),e.next(),d(t,3,"}");case"@":return O(e,t)||h(t);default:if(y(e))return n=d(t,1,I(e)),t.braceNest=0,t.inLinked=!1,n;if(w(e))return d(t,0,function(e){let t="";for(;;){const n=e.currentChar();if("{"===n||"}"===n||"@"===n||"|"===n||!n)break;if("%"===n){if(!w(e))break;t+=n,e.next()}else if(n===Io||n===No)if(w(e))t+=n,e.next();else{if(y(e))break;t+=n,e.next()}else t+=n,e.next()}return t}(e));if("%"===r)return e.next(),d(t,4,"%")}return n}return{nextToken:function(){const{currentType:e,offset:t,startLoc:n,endLoc:o}=l;return l.lastType=e,l.lastOffset=t,l.lastStartLoc=n,l.lastEndLoc=o,l.offset=a(),l.startLoc=s(),r.currentChar()===_o?d(l,14):A(r,l)},currentOffset:a,currentPosition:s,context:u}}const Po=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function Do(e,t,n){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const e=parseInt(t||n,16);return e<=55295||e>=57344?String.fromCodePoint(e):""}}}function Lo(e={}){const t=!1!==e.location,{onError:n}=e;function r(e,t,r,a,...s){const o=e.currentPosition();if(o.offset+=a,o.column+=a,n){const e=Eo(t,$o(r,o),{domain:"parser",args:s});n(e)}}function a(e,n,r){const a={type:e,start:n,end:n};return t&&(a.loc={start:r,end:r}),a}function s(e,n,r,a){e.end=n,a&&(e.type=a),t&&e.loc&&(e.loc.end=r)}function o(e,t){const n=e.context(),r=a(3,n.offset,n.startLoc);return r.value=t,s(r,e.currentOffset(),e.currentPosition()),r}function i(e,t){const n=e.context(),{lastOffset:r,lastStartLoc:o}=n,i=a(5,r,o);return i.index=parseInt(t,10),e.nextToken(),s(i,e.currentOffset(),e.currentPosition()),i}function l(e,t){const n=e.context(),{lastOffset:r,lastStartLoc:o}=n,i=a(4,r,o);return i.key=t,e.nextToken(),s(i,e.currentOffset(),e.currentPosition()),i}function u(e,t){const n=e.context(),{lastOffset:r,lastStartLoc:o}=n,i=a(9,r,o);return i.value=t.replace(Po,Do),e.nextToken(),s(i,e.currentOffset(),e.currentPosition()),i}function c(e){const t=e.context(),n=a(6,t.offset,t.startLoc);let o=e.nextToken();if(9===o.type){const t=function(e){const t=e.nextToken(),n=e.context(),{lastOffset:o,lastStartLoc:i}=n,l=a(8,o,i);return 12!==t.type?(r(e,11,n.lastStartLoc,0),l.value="",s(l,o,i),{nextConsumeToken:t,node:l}):(null==t.value&&r(e,13,n.lastStartLoc,0,Bo(t)),l.value=t.value||"",s(l,e.currentOffset(),e.currentPosition()),{node:l})}(e);n.modifier=t.node,o=t.nextConsumeToken||e.nextToken()}switch(10!==o.type&&r(e,13,t.lastStartLoc,0,Bo(o)),o=e.nextToken(),2===o.type&&(o=e.nextToken()),o.type){case 11:null==o.value&&r(e,13,t.lastStartLoc,0,Bo(o)),n.key=function(e,t){const n=e.context(),r=a(7,n.offset,n.startLoc);return r.value=t,s(r,e.currentOffset(),e.currentPosition()),r}(e,o.value||"");break;case 5:null==o.value&&r(e,13,t.lastStartLoc,0,Bo(o)),n.key=l(e,o.value||"");break;case 6:null==o.value&&r(e,13,t.lastStartLoc,0,Bo(o)),n.key=i(e,o.value||"");break;case 7:null==o.value&&r(e,13,t.lastStartLoc,0,Bo(o)),n.key=u(e,o.value||"");break;default:r(e,12,t.lastStartLoc,0);const c=e.context(),p=a(7,c.offset,c.startLoc);return p.value="",s(p,c.offset,c.startLoc),n.key=p,s(n,c.offset,c.startLoc),{nextConsumeToken:o,node:n}}return s(n,e.currentOffset(),e.currentPosition()),{node:n}}function p(e){const t=e.context(),n=a(2,1===t.currentType?e.currentOffset():t.offset,1===t.currentType?t.endLoc:t.startLoc);n.items=[];let p=null;do{const a=p||e.nextToken();switch(p=null,a.type){case 0:null==a.value&&r(e,13,t.lastStartLoc,0,Bo(a)),n.items.push(o(e,a.value||""));break;case 6:null==a.value&&r(e,13,t.lastStartLoc,0,Bo(a)),n.items.push(i(e,a.value||""));break;case 5:null==a.value&&r(e,13,t.lastStartLoc,0,Bo(a)),n.items.push(l(e,a.value||""));break;case 7:null==a.value&&r(e,13,t.lastStartLoc,0,Bo(a)),n.items.push(u(e,a.value||""));break;case 8:const s=c(e);n.items.push(s.node),p=s.nextConsumeToken||null}}while(14!==t.currentType&&1!==t.currentType);return s(n,1===t.currentType?t.lastOffset:e.currentOffset(),1===t.currentType?t.lastEndLoc:e.currentPosition()),n}function d(e){const t=e.context(),{offset:n,startLoc:o}=t,i=p(e);return 14===t.currentType?i:function(e,t,n,o){const i=e.context();let l=0===o.items.length;const u=a(1,t,n);u.cases=[],u.cases.push(o);do{const t=p(e);l||(l=0===t.items.length),u.cases.push(t)}while(14!==i.currentType);return l&&r(e,10,n,0),s(u,e.currentOffset(),e.currentPosition()),u}(e,n,o,i)}return{parse:function(n){const o=Ro(n,qs({},e)),i=o.context(),l=a(0,i.offset,i.startLoc);return t&&l.loc&&(l.loc.source=n),l.body=d(o),14!==i.currentType&&r(o,13,i.lastStartLoc,0,n[i.offset]||""),s(l,o.currentOffset(),o.currentPosition()),l}}}function Bo(e){if(14===e.type)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"":t}function Fo(e,t){for(let n=0;n<e.length;n++)zo(e[n],t)}function zo(e,t){switch(e.type){case 1:Fo(e.cases,t),t.helper("plural");break;case 2:Fo(e.items,t);break;case 6:zo(e.key,t),t.helper("linked");break;case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named")}}function Vo(e,t={}){const n=function(e,t={}){const n={ast:e,helpers:new Set};return{context:()=>n,helper:e=>(n.helpers.add(e),e)}}(e);n.helper("normalize"),e.body&&zo(e.body,n);const r=n.context();e.helpers=Array.from(r.helpers)}function Wo(e,t){const{helper:n}=e;switch(t.type){case 0:!function(e,t){t.body?Wo(e,t.body):e.push("null")}(e,t);break;case 1:!function(e,t){const{helper:n,needIndent:r}=e;if(t.cases.length>1){e.push(`${n("plural")}([`),e.indent(r());const a=t.cases.length;for(let n=0;n<a&&(Wo(e,t.cases[n]),n!==a-1);n++)e.push(", ");e.deindent(r()),e.push("])")}}(e,t);break;case 2:!function(e,t){const{helper:n,needIndent:r}=e;e.push(`${n("normalize")}([`),e.indent(r());const a=t.items.length;for(let n=0;n<a&&(Wo(e,t.items[n]),n!==a-1);n++)e.push(", ");e.deindent(r()),e.push("])")}(e,t);break;case 6:!function(e,t){const{helper:n}=e;e.push(`${n("linked")}(`),Wo(e,t.key),t.modifier&&(e.push(", "),Wo(e,t.modifier)),e.push(")")}(e,t);break;case 8:case 7:case 9:case 3:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${n("interpolate")}(${n("list")}(${t.index}))`,t);break;case 4:e.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(t.key)}))`,t)}}function Ho(e,t={}){const n=qs({},t),r=Lo(n).parse(e);return Vo(r,n),((e,t={})=>{const n=to(t.mode)?t.mode:"normal",r=to(t.filename)?t.filename:"message.intl",a=!!t.sourceMap,s=null!=t.breakLineCode?t.breakLineCode:"arrow"===n?";":"\n",o=t.needIndent?t.needIndent:"arrow"!==n,i=e.helpers||[],l=function(e,t){const{sourceMap:n,filename:r,breakLineCode:a,needIndent:s}=t,o={source:e.loc.source,filename:r,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:a,needIndent:s,indentLevel:0};function i(e,t){o.code+=e}function l(e,t=!0){const n=t?a:"";i(s?n+"  ".repeat(e):n)}return{context:()=>o,push:i,indent:function(e=!0){const t=++o.indentLevel;e&&l(t)},deindent:function(e=!0){const t=--o.indentLevel;e&&l(t)},newline:function(){l(o.indentLevel)},helper:e=>`_${e}`,needIndent:()=>o.needIndent}}(e,{mode:n,filename:r,sourceMap:a,breakLineCode:s,needIndent:o});l.push("normal"===n?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(o),i.length>0&&(l.push(`const { ${i.map((e=>`${e}: _${e}`)).join(", ")} } = ctx`),l.newline()),l.push("return "),Wo(l,e),l.deindent(o),l.push("}");const{code:u,map:c}=l.context();return{ast:e,code:u,map:c?c.toJSON():void 0}})(r,n)}const jo="i18n:init";let Uo=null;const Go=qo("function:translate");function qo(e){return t=>Uo&&Uo.emit(e,t)}let Xo;let Ko=null;const Yo=e=>{Ko=e};let Jo=0;function Zo(e={}){const t=to(e.version)?e.version:"9.1.9",n=to(e.locale)?e.locale:"en-US",r=Qs(e.fallbackLocale)||oo(e.fallbackLocale)||to(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:n,a=oo(e.messages)?e.messages:{[n]:{}},s=oo(e.datetimeFormats)?e.datetimeFormats:{[n]:{}},o=oo(e.numberFormats)?e.numberFormats:{[n]:{}},i=qs({},e.modifiers||{},{upper:e=>to(e)?e.toUpperCase():e,lower:e=>to(e)?e.toLowerCase():e,capitalize:e=>to(e)?`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`:e}),l=e.pluralRules||{},u=eo(e.missing)?e.missing:null,c=!no(e.missingWarn)&&!js(e.missingWarn)||e.missingWarn,p=!no(e.fallbackWarn)&&!js(e.fallbackWarn)||e.fallbackWarn,d=!!e.fallbackFormat,h=!!e.unresolving,f=eo(e.postTranslation)?e.postTranslation:null,m=oo(e.processor)?e.processor:null,g=!no(e.warnHtmlMessage)||e.warnHtmlMessage,v=!!e.escapeParameter,b=eo(e.messageCompiler)?e.messageCompiler:Xo,y=eo(e.onWarn)?e.onWarn:Gs,w=e,x=ro(w.__datetimeFormatters)?w.__datetimeFormatters:new Map,k=ro(w.__numberFormatters)?w.__numberFormatters:new Map,C=ro(w.__meta)?w.__meta:{};Jo++;const S={version:t,cid:Jo,locale:n,fallbackLocale:r,messages:a,datetimeFormats:s,numberFormats:o,modifiers:i,pluralRules:l,missing:u,missingWarn:c,fallbackWarn:p,fallbackFormat:d,unresolving:h,postTranslation:f,processor:m,warnHtmlMessage:g,escapeParameter:v,messageCompiler:b,onWarn:y,__datetimeFormatters:x,__numberFormatters:k,__meta:C};return __INTLIFY_PROD_DEVTOOLS__&&function(e,t,n){Uo&&Uo.emit(jo,{timestamp:Date.now(),i18n:e,version:t,meta:n})}(S,t,C),S}function Qo(e,t,n,r,a){const{missing:s,onWarn:o}=e;if(null!==s){const r=s(e,n,t,a);return to(r)?r:t}return t}function ei(e,t,n){const r=e;r.__localeChainCache||(r.__localeChainCache=new Map);let a=r.__localeChainCache.get(n);if(!a){a=[];let e=[n];for(;Qs(e);)e=ti(a,e,t);const s=Qs(t)?t:oo(t)?t.default?t.default:null:t;e=to(s)?[s]:s,Qs(e)&&ti(a,e,!1),r.__localeChainCache.set(n,a)}return a}function ti(e,t,n){let r=!0;for(let a=0;a<t.length&&no(r);a++){const s=t[a];to(s)&&(r=ni(e,t[a],n))}return r}function ni(e,t,n){let r;const a=t.split("-");do{r=ri(e,a.join("-"),n),a.splice(-1,1)}while(a.length&&!0===r);return r}function ri(e,t,n){let r=!1;if(!e.includes(t)&&(r=!0,t)){r="!"!==t[t.length-1];const a=t.replace(/!/g,"");e.push(a),(Qs(n)||oo(n))&&n[a]&&(r=n[a])}return r}function ai(e,t,n){e.__localeChainCache=new Map,ei(e,n,t)}const si=e=>e;let oi=Object.create(null);function ii(e){return Eo(e,null,void 0)}const li=()=>"",ui=e=>eo(e);function ci(e,...t){const{fallbackFormat:n,postTranslation:r,unresolving:a,fallbackLocale:s,messages:o}=e,[i,l]=di(...t),u=(no(l.missingWarn)?l.missingWarn:e.missingWarn,no(l.fallbackWarn)?l.fallbackWarn:e.fallbackWarn,no(l.escapeParameter)?l.escapeParameter:e.escapeParameter),c=!!l.resolvedMessage,p=to(l.default)||no(l.default)?no(l.default)?i:l.default:n?i:"",d=n||""!==p,h=to(l.locale)?l.locale:e.locale;u&&function(e){Qs(e.list)?e.list=e.list.map((e=>to(e)?Ys(e):e)):ro(e.named)&&Object.keys(e.named).forEach((t=>{to(e.named[t])&&(e.named[t]=Ys(e.named[t]))}))}(l);let[f,m,g]=c?[i,h,o[h]||{}]:function(e,t,n,r,a,s){const{messages:o,onWarn:i}=e,l=ei(e,r,n);let u,c={},p=null,d=n,h=null;const f="translate";for(let n=0;n<l.length;n++){u=h=l[n],c=o[u]||{};if(null===(p=vo(c,t))&&(p=c[t]),to(p)||eo(p))break;const r=Qo(e,t,u,0,f);r!==t&&(p=r),d=h}return[p,u,c]}(e,i,h,s),v=i;if(c||to(f)||ui(f)||d&&(f=p,v=f),!(c||(to(f)||ui(f))&&to(m)))return a?-1:i;let b=!1;const y=ui(f)?f:pi(e,i,m,f,v,(()=>{b=!0}));if(b)return f;const w=function(e,t,n,r){const{modifiers:a,pluralRules:s}=e,o=r=>{const a=vo(n,r);if(to(a)){let n=!1;const s=pi(e,r,t,a,r,(()=>{n=!0}));return n?li:s}return ui(a)?a:li},i={locale:t,modifiers:a,pluralRules:s,messages:o};e.processor&&(i.processor=e.processor);r.list&&(i.list=r.list);r.named&&(i.named=r.named);Hs(r.plural)&&(i.pluralIndex=r.plural);return i}(e,m,g,l),x=function(e,t,n){0;0;return t(n)}(0,y,So(w)),k=r?r(x):x;if(__INTLIFY_PROD_DEVTOOLS__){const t={timestamp:Date.now(),key:to(i)?i:ui(f)?f.key:"",locale:m||(ui(f)?f.locale:""),format:to(f)?f:ui(f)?f.source:"",message:k};t.meta=qs({},e.__meta,Ko||{}),Go(t)}return k}function pi(e,t,n,r,a,s){const{messageCompiler:o,warnHtmlMessage:i}=e;if(ui(r)){const e=r;return e.locale=e.locale||n,e.key=e.key||t,e}const l=o(r,function(e,t,n,r,a,s){return{warnHtmlMessage:a,onError:e=>{throw s&&s(e),e},onCacheKey:e=>((e,t,n)=>Ws({l:e,k:t,s:n}))(t,n,e)}}(0,n,a,0,i,s));return l.locale=n,l.key=t,l.source=r,l}function di(...e){const[t,n,r]=e,a={};if(!to(t)&&!Hs(t)&&!ui(t))throw ii(14);const s=Hs(t)?String(t):(ui(t),t);return Hs(n)?a.plural=n:to(n)?a.default=n:oo(n)&&!Us(n)?a.named=n:Qs(n)&&(a.list=n),Hs(r)?a.plural=r:to(r)?a.default=r:oo(r)&&qs(a,r),[s,a]}const hi="undefined"!=typeof Intl;hi&&Intl.DateTimeFormat,hi&&Intl.NumberFormat;function fi(e,...t){const{datetimeFormats:n,unresolving:r,fallbackLocale:a,onWarn:s}=e,{__datetimeFormatters:o}=e;const[i,l,u,c]=mi(...t),p=(no(u.missingWarn)?u.missingWarn:e.missingWarn,no(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn,!!u.part),d=to(u.locale)?u.locale:e.locale,h=ei(e,a,d);if(!to(i)||""===i)return new Intl.DateTimeFormat(d).format(l);let f,m={},g=null,v=d,b=null;for(let t=0;t<h.length&&(f=b=h[t],m=n[f]||{},g=m[i],!oo(g));t++)Qo(e,i,f,0,"datetime format"),v=b;if(!oo(g)||!to(f))return r?-1:i;let y=`${f}__${i}`;Us(c)||(y=`${y}__${JSON.stringify(c)}`);let w=o.get(y);return w||(w=new Intl.DateTimeFormat(f,qs({},g,c)),o.set(y,w)),p?w.formatToParts(l):w.format(l)}function mi(...e){const[t,n,r,a]=e;let s,o={},i={};if(to(t)){if(!/\d{4}-\d{2}-\d{2}(T.*)?/.test(t))throw ii(16);s=new Date(t);try{s.toISOString()}catch(e){throw ii(16)}}else if((e=>"[object Date]"===so(e))(t)){if(isNaN(t.getTime()))throw ii(15);s=t}else{if(!Hs(t))throw ii(14);s=t}return to(n)?o.key=n:oo(n)&&(o=n),to(r)?o.locale=r:oo(r)&&(i=r),oo(a)&&(i=a),[o.key||"",s,o,i]}function gi(e,t,n){const r=e;for(const e in n){const n=`${t}__${e}`;r.__datetimeFormatters.has(n)&&r.__datetimeFormatters.delete(n)}}function vi(e,...t){const{numberFormats:n,unresolving:r,fallbackLocale:a,onWarn:s}=e,{__numberFormatters:o}=e;const[i,l,u,c]=bi(...t),p=(no(u.missingWarn)?u.missingWarn:e.missingWarn,no(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn,!!u.part),d=to(u.locale)?u.locale:e.locale,h=ei(e,a,d);if(!to(i)||""===i)return new Intl.NumberFormat(d).format(l);let f,m={},g=null,v=d,b=null;for(let t=0;t<h.length&&(f=b=h[t],m=n[f]||{},g=m[i],!oo(g));t++)Qo(e,i,f,0,"number format"),v=b;if(!oo(g)||!to(f))return r?-1:i;let y=`${f}__${i}`;Us(c)||(y=`${y}__${JSON.stringify(c)}`);let w=o.get(y);return w||(w=new Intl.NumberFormat(f,qs({},g,c)),o.set(y,w)),p?w.formatToParts(l):w.format(l)}function bi(...e){const[t,n,r,a]=e;let s={},o={};if(!Hs(t))throw ii(14);const i=t;return to(n)?s.key=n:oo(n)&&(s=n),to(r)?s.locale=r:oo(r)&&(o=r),oo(a)&&(o=a),[s.key||"",i,s,o]}function yi(e,t,n){const r=e;for(const e in n){const n=`${t}__${e}`;r.__numberFormatters.has(n)&&r.__numberFormatters.delete(n)}}function wi(){return"undefined"!=typeof navigator&&"undefined"!=typeof window?window:void 0!==n.g?n.g:{}}"boolean"!=typeof __INTLIFY_PROD_DEVTOOLS__&&(Ks().__INTLIFY_PROD_DEVTOOLS__=!1);const xi="function"==typeof Proxy;let ki,Ci;function Si(){return function(){var e;return void 0!==ki||("undefined"!=typeof window&&window.performance?(ki=!0,Ci=window.performance):void 0!==n.g&&(null===(e=n.g.perf_hooks)||void 0===e?void 0:e.performance)?(ki=!0,Ci=n.g.perf_hooks.performance):ki=!1),ki}()?Ci.now():Date.now()}class Ei{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const n={};if(e.settings)for(const t in e.settings){const r=e.settings[t];n[t]=r.defaultValue}const r=`__vue-devtools-plugin-settings__${e.id}`;let a=Object.assign({},n);try{const e=localStorage.getItem(r),t=JSON.parse(e);Object.assign(a,t)}catch(e){}this.fallbacks={getSettings:()=>a,setSettings(e){try{localStorage.setItem(r,JSON.stringify(e))}catch(e){}a=e},now:()=>Si()},t&&t.on("plugin:settings:set",((e,t)=>{e===this.plugin.id&&this.fallbacks.setSettings(t)})),this.proxiedOn=new Proxy({},{get:(e,t)=>this.target?this.target.on[t]:(...e)=>{this.onQueue.push({method:t,args:e})}}),this.proxiedTarget=new Proxy({},{get:(e,t)=>this.target?this.target[t]:"on"===t?this.proxiedOn:Object.keys(this.fallbacks).includes(t)?(...e)=>(this.targetQueue.push({method:t,args:e,resolve:()=>{}}),this.fallbacks[t](...e)):(...e)=>new Promise((n=>{this.targetQueue.push({method:t,args:e,resolve:n})}))})}async setRealTarget(e){this.target=e;for(const e of this.onQueue)this.target.on[e.method](...e.args);for(const e of this.targetQueue)e.resolve(await this.target[e.method](...e.args))}}function Ti(e,t){const n=e,r=wi(),a=wi().__VUE_DEVTOOLS_GLOBAL_HOOK__,s=xi&&n.enableEarlyProxy;if(!a||!r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&s){const e=s?new Ei(n,a):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:e}),e&&t(e.proxiedTarget)}else a.emit("devtools-plugin:setup",e,t)}const $i={"vue-devtools-plugin-vue-i18n":"Vue I18n devtools","vue-i18n-resource-inspector":"I18n Resources","vue-i18n-timeline":"Vue I18n"},Ii={"vue-i18n-resource-inspector":"Search for scopes ..."},Ni={"vue-i18n-timeline":16764185};function Oi(e,...t){return Eo(e,null,void 0)}const Ai="__INTLIFY_META__",Mi=Vs("__transrateVNode"),_i=Vs("__datetimeParts"),Ri=Vs("__numberParts"),Pi=Vs("__enableEmitter"),Di=Vs("__disableEmitter"),Li=Vs("__setPluralRules");Vs("__intlifyMeta");const Bi=Vs("__injectWithOption");let Fi=0;function zi(e){return(t,n,r,a)=>e(n,r,_a()||void 0,a)}function Vi(e,t){const{messages:n,__i18n:r}=t,a=oo(n)?n:Qs(r)?{}:{[e]:{}};if(Qs(r)&&r.forEach((({locale:e,resource:t})=>{e?(a[e]=a[e]||{},Hi(t,a[e])):Hi(t,a)})),t.flatJson)for(const e in a)Zs(a,e)&&bo(a[e]);return a}const Wi=e=>!ro(e)||Qs(e);function Hi(e,t){if(Wi(e)||Wi(t))throw Oi(20);for(const n in e)Zs(e,n)&&(Wi(e[n])||Wi(t[n])?t[n]=e[n]:Hi(e[n],t[n]))}function ji(e={}){const{__root:t}=e,n=void 0===t;let r=!no(e.inheritLocale)||e.inheritLocale;const a=xt(t&&r?t.locale.value:to(e.locale)?e.locale:"en-US"),s=xt(t&&r?t.fallbackLocale.value:to(e.fallbackLocale)||Qs(e.fallbackLocale)||oo(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:a.value),o=xt(Vi(a.value,e)),i=xt(oo(e.datetimeFormats)?e.datetimeFormats:{[a.value]:{}}),l=xt(oo(e.numberFormats)?e.numberFormats:{[a.value]:{}});let u=t?t.missingWarn:!no(e.missingWarn)&&!js(e.missingWarn)||e.missingWarn,c=t?t.fallbackWarn:!no(e.fallbackWarn)&&!js(e.fallbackWarn)||e.fallbackWarn,p=t?t.fallbackRoot:!no(e.fallbackRoot)||e.fallbackRoot,d=!!e.fallbackFormat,h=eo(e.missing)?e.missing:null,f=eo(e.missing)?zi(e.missing):null,m=eo(e.postTranslation)?e.postTranslation:null,g=!no(e.warnHtmlMessage)||e.warnHtmlMessage,v=!!e.escapeParameter;const b=t?t.modifiers:oo(e.modifiers)?e.modifiers:{};let y,w=e.pluralRules||t&&t.pluralRules;y=Zo({version:"9.1.9",locale:a.value,fallbackLocale:s.value,messages:o.value,datetimeFormats:i.value,numberFormats:l.value,modifiers:b,pluralRules:w,missing:null===f?void 0:f,missingWarn:u,fallbackWarn:c,fallbackFormat:d,unresolving:!0,postTranslation:null===m?void 0:m,warnHtmlMessage:g,escapeParameter:v,__datetimeFormatters:oo(y)?y.__datetimeFormatters:void 0,__numberFormatters:oo(y)?y.__numberFormatters:void 0,__v_emitter:oo(y)?y.__v_emitter:void 0,__meta:{framework:"vue"}}),ai(y,a.value,s.value);const x=qa({get:()=>a.value,set:e=>{a.value=e,y.locale=a.value}}),k=qa({get:()=>s.value,set:e=>{s.value=e,y.fallbackLocale=s.value,ai(y,a.value,e)}}),C=qa((()=>o.value)),S=qa((()=>i.value)),E=qa((()=>l.value));function T(e,n,r,u,c,d){let h;if(a.value,s.value,o.value,i.value,l.value,__INTLIFY_PROD_DEVTOOLS__)try{Yo((()=>{const e=_a();return e&&e.type[Ai]?{[Ai]:e.type[Ai]}:null})()),h=e(y)}finally{Yo(null)}else h=e(y);if(Hs(h)&&-1===h){const[e,r]=n();return t&&p?u(t):c(e)}if(d(h))return h;throw Oi(14)}function $(...e){return T((t=>ci(t,...e)),(()=>di(...e)),0,(t=>t.t(...e)),(e=>e),(e=>to(e)))}const I={normalize:function(e){return e.map((e=>to(e)?pa(qr,null,e,0):e))},interpolate:e=>e,type:"vnode"};function N(e){return o.value[e]||{}}Fi++,t&&(Sn(t.locale,(e=>{r&&(a.value=e,y.locale=e,ai(y,a.value,s.value))})),Sn(t.fallbackLocale,(e=>{r&&(s.value=e,y.fallbackLocale=e,ai(y,a.value,s.value))})));const O={id:Fi,locale:x,fallbackLocale:k,get inheritLocale(){return r},set inheritLocale(e){r=e,e&&t&&(a.value=t.locale.value,s.value=t.fallbackLocale.value,ai(y,a.value,s.value))},get availableLocales(){return Object.keys(o.value).sort()},messages:C,datetimeFormats:S,numberFormats:E,get modifiers(){return b},get pluralRules(){return w||{}},get isGlobal(){return n},get missingWarn(){return u},set missingWarn(e){u=e,y.missingWarn=u},get fallbackWarn(){return c},set fallbackWarn(e){c=e,y.fallbackWarn=c},get fallbackRoot(){return p},set fallbackRoot(e){p=e},get fallbackFormat(){return d},set fallbackFormat(e){d=e,y.fallbackFormat=d},get warnHtmlMessage(){return g},set warnHtmlMessage(e){g=e,y.warnHtmlMessage=e},get escapeParameter(){return v},set escapeParameter(e){v=e,y.escapeParameter=e},t:$,rt:function(...e){const[t,n,r]=e;if(r&&!ro(r))throw Oi(15);return $(t,n,qs({resolvedMessage:!0},r||{}))},d:function(...e){return T((t=>fi(t,...e)),(()=>mi(...e)),0,(t=>t.d(...e)),(()=>""),(e=>to(e)))},n:function(...e){return T((t=>vi(t,...e)),(()=>bi(...e)),0,(t=>t.n(...e)),(()=>""),(e=>to(e)))},te:function(e,t){return null!==vo(N(to(t)?t:a.value),e)},tm:function(e){const n=function(e){let t=null;const n=ei(y,s.value,a.value);for(let r=0;r<n.length;r++){const a=vo(o.value[n[r]]||{},e);if(null!=a){t=a;break}}return t}(e);return null!=n?n:t&&t.tm(e)||{}},getLocaleMessage:N,setLocaleMessage:function(e,t){o.value[e]=t,y.messages=o.value},mergeLocaleMessage:function(e,t){o.value[e]=o.value[e]||{},Hi(t,o.value[e]),y.messages=o.value},getDateTimeFormat:function(e){return i.value[e]||{}},setDateTimeFormat:function(e,t){i.value[e]=t,y.datetimeFormats=i.value,gi(y,e,t)},mergeDateTimeFormat:function(e,t){i.value[e]=qs(i.value[e]||{},t),y.datetimeFormats=i.value,gi(y,e,t)},getNumberFormat:function(e){return l.value[e]||{}},setNumberFormat:function(e,t){l.value[e]=t,y.numberFormats=l.value,yi(y,e,t)},mergeNumberFormat:function(e,t){l.value[e]=qs(l.value[e]||{},t),y.numberFormats=l.value,yi(y,e,t)},getPostTranslationHandler:function(){return eo(m)?m:null},setPostTranslationHandler:function(e){m=e,y.postTranslation=e},getMissingHandler:function(){return h},setMissingHandler:function(e){null!==e&&(f=zi(e)),h=e,y.missing=f},[Mi]:function(...e){return T((t=>{let n;const r=t;try{r.processor=I,n=ci(r,...e)}finally{r.processor=null}return n}),(()=>di(...e)),0,(t=>t[Mi](...e)),(e=>[pa(qr,null,e,0)]),(e=>Qs(e)))},[Ri]:function(...e){return T((t=>vi(t,...e)),(()=>bi(...e)),0,(t=>t[Ri](...e)),(()=>[]),(e=>to(e)||Qs(e)))},[_i]:function(...e){return T((t=>fi(t,...e)),(()=>mi(...e)),0,(t=>t[_i](...e)),(()=>[]),(e=>to(e)||Qs(e)))},[Li]:function(e){w=e,y.pluralRules=w},[Bi]:e.__injectWithOption};return O}function Ui(e={}){const t=ji(function(e){const t=to(e.locale)?e.locale:"en-US",n=to(e.fallbackLocale)||Qs(e.fallbackLocale)||oo(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:t,r=eo(e.missing)?e.missing:void 0,a=!no(e.silentTranslationWarn)&&!js(e.silentTranslationWarn)||!e.silentTranslationWarn,s=!no(e.silentFallbackWarn)&&!js(e.silentFallbackWarn)||!e.silentFallbackWarn,o=!no(e.fallbackRoot)||e.fallbackRoot,i=!!e.formatFallbackMessages,l=oo(e.modifiers)?e.modifiers:{},u=e.pluralizationRules,c=eo(e.postTranslation)?e.postTranslation:void 0,p=!to(e.warnHtmlInMessage)||"off"!==e.warnHtmlInMessage,d=!!e.escapeParameterHtml,h=!no(e.sync)||e.sync;let f=e.messages;if(oo(e.sharedMessages)){const t=e.sharedMessages;f=Object.keys(t).reduce(((e,n)=>{const r=e[n]||(e[n]={});return qs(r,t[n]),e}),f||{})}const{__i18n:m,__root:g,__injectWithOption:v}=e,b=e.datetimeFormats,y=e.numberFormats;return{locale:t,fallbackLocale:n,messages:f,flatJson:e.flatJson,datetimeFormats:b,numberFormats:y,missing:r,missingWarn:a,fallbackWarn:s,fallbackRoot:o,fallbackFormat:i,modifiers:l,pluralRules:u,postTranslation:c,warnHtmlMessage:p,escapeParameter:d,inheritLocale:h,__i18n:m,__root:g,__injectWithOption:v}}(e)),n={id:t.id,get locale(){return t.locale.value},set locale(e){t.locale.value=e},get fallbackLocale(){return t.fallbackLocale.value},set fallbackLocale(e){t.fallbackLocale.value=e},get messages(){return t.messages.value},get datetimeFormats(){return t.datetimeFormats.value},get numberFormats(){return t.numberFormats.value},get availableLocales(){return t.availableLocales},get formatter(){return{interpolate:()=>[]}},set formatter(e){},get missing(){return t.getMissingHandler()},set missing(e){t.setMissingHandler(e)},get silentTranslationWarn(){return no(t.missingWarn)?!t.missingWarn:t.missingWarn},set silentTranslationWarn(e){t.missingWarn=no(e)?!e:e},get silentFallbackWarn(){return no(t.fallbackWarn)?!t.fallbackWarn:t.fallbackWarn},set silentFallbackWarn(e){t.fallbackWarn=no(e)?!e:e},get modifiers(){return t.modifiers},get formatFallbackMessages(){return t.fallbackFormat},set formatFallbackMessages(e){t.fallbackFormat=e},get postTranslation(){return t.getPostTranslationHandler()},set postTranslation(e){t.setPostTranslationHandler(e)},get sync(){return t.inheritLocale},set sync(e){t.inheritLocale=e},get warnHtmlInMessage(){return t.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(e){t.warnHtmlMessage="off"!==e},get escapeParameterHtml(){return t.escapeParameter},set escapeParameterHtml(e){t.escapeParameter=e},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(e){},get pluralizationRules(){return t.pluralRules||{}},__composer:t,t(...e){const[n,r,a]=e,s={};let o=null,i=null;if(!to(n))throw Oi(15);const l=n;return to(r)?s.locale=r:Qs(r)?o=r:oo(r)&&(i=r),Qs(a)?o=a:oo(a)&&(i=a),t.t(l,o||i||{},s)},rt:(...e)=>t.rt(...e),tc(...e){const[n,r,a]=e,s={plural:1};let o=null,i=null;if(!to(n))throw Oi(15);const l=n;return to(r)?s.locale=r:Hs(r)?s.plural=r:Qs(r)?o=r:oo(r)&&(i=r),to(a)?s.locale=a:Qs(a)?o=a:oo(a)&&(i=a),t.t(l,o||i||{},s)},te:(e,n)=>t.te(e,n),tm:e=>t.tm(e),getLocaleMessage:e=>t.getLocaleMessage(e),setLocaleMessage(e,n){t.setLocaleMessage(e,n)},mergeLocaleMessage(e,n){t.mergeLocaleMessage(e,n)},d:(...e)=>t.d(...e),getDateTimeFormat:e=>t.getDateTimeFormat(e),setDateTimeFormat(e,n){t.setDateTimeFormat(e,n)},mergeDateTimeFormat(e,n){t.mergeDateTimeFormat(e,n)},n:(...e)=>t.n(...e),getNumberFormat:e=>t.getNumberFormat(e),setNumberFormat(e,n){t.setNumberFormat(e,n)},mergeNumberFormat(e,n){t.mergeNumberFormat(e,n)},getChoiceIndex:(e,t)=>-1,__onComponentInstanceCreated(t){const{componentInstanceCreatedListener:r}=e;r&&r(t,n)}};return n}const Gi={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>"parent"===e||"global"===e,default:"parent"},i18n:{type:Object}},qi={name:"i18n-t",props:qs({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>Hs(e)||!isNaN(e)}},Gi),setup(e,t){const{slots:n,attrs:r}=t,a=e.i18n||pl({useScope:e.scope,__useComponent:!0}),s=Object.keys(n).filter((e=>"_"!==e));return()=>{const n={};e.locale&&(n.locale=e.locale),void 0!==e.plural&&(n.plural=to(e.plural)?+e.plural:e.plural);const o=function({slots:e},t){return 1===t.length&&"default"===t[0]?e.default?e.default():[]:t.reduce(((t,n)=>{const r=e[n];return r&&(t[n]=r()),t}),{})}(t,s),i=a[Mi](e.keypath,o,n),l=qs({},r);return to(e.tag)||ro(e.tag)?Xa(e.tag,l,i):Xa(Gr,l,i)}}};function Xi(e,t,n,r){const{slots:a,attrs:s}=t;return()=>{const t={part:!0};let o={};e.locale&&(t.locale=e.locale),to(e.format)?t.key=e.format:ro(e.format)&&(to(e.format.key)&&(t.key=e.format.key),o=Object.keys(e.format).reduce(((t,r)=>n.includes(r)?qs({},t,{[r]:e.format[r]}):t),{}));const i=r(e.value,t,o);let l=[t.key];Qs(i)?l=i.map(((e,t)=>{const n=a[e.type];return n?n({[e.type]:e.value,index:t,parts:i}):[e.value]})):to(i)&&(l=[i]);const u=qs({},s);return to(e.tag)||ro(e.tag)?Xa(e.tag,u,l):Xa(Gr,u,l)}}const Ki=["localeMatcher","style","unit","unitDisplay","currency","currencyDisplay","useGrouping","numberingSystem","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","notation","formatMatcher"],Yi={name:"i18n-n",props:qs({value:{type:Number,required:!0},format:{type:[String,Object]}},Gi),setup(e,t){const n=e.i18n||pl({useScope:"parent",__useComponent:!0});return Xi(e,t,Ki,((...e)=>n[Ri](...e)))}},Ji=["dateStyle","timeStyle","fractionalSecondDigits","calendar","dayPeriod","numberingSystem","localeMatcher","timeZone","hour12","hourCycle","formatMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName"],Zi={name:"i18n-d",props:qs({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Gi),setup(e,t){const n=e.i18n||pl({useScope:"parent",__useComponent:!0});return Xi(e,t,Ji,((...e)=>n[_i](...e)))}};function Qi(e){const t=(t,{instance:n,value:r,modifiers:a})=>{if(!n||!n.$)throw Oi(22);const s=function(e,t){const n=e;if("composition"===e.mode)return n.__getInstance(t)||e.global;{const r=n.__getInstance(t);return null!=r?r.__composer:e.global.__composer}}(e,n.$);const o=function(e){if(to(e))return{path:e};if(oo(e)){if(!("path"in e))throw Oi(19);return e}throw Oi(20)}(r);t.textContent=s.t(...function(e){const{path:t,locale:n,args:r,choice:a,plural:s}=e,o={},i=r||{};to(n)&&(o.locale=n);Hs(a)&&(o.plural=a);Hs(s)&&(o.plural=s);return[t,i,o]}(o))};return{beforeMount:t,beforeUpdate:t}}const el="vue-i18n: composer properties";let tl;async function nl(e,t){return new Promise(((n,r)=>{try{Ti({id:"vue-devtools-plugin-vue-i18n",label:$i["vue-devtools-plugin-vue-i18n"],packageName:"vue-i18n",homepage:"https://vue-i18n.intlify.dev",logo:"https://vue-i18n.intlify.dev/vue-i18n-devtools-logo.png",componentStateTypes:[el],app:e},(r=>{tl=r,r.on.visitComponentTree((({componentInstance:e,treeNode:n})=>{!function(e,t,n){const r="composition"===n.mode?n.global:n.global.__composer;if(e&&e.vnode.el.__VUE_I18N__&&e.vnode.el.__VUE_I18N__!==r){const n={label:`i18n (${e.type.name||e.type.displayName||e.type.__file} Scope)`,textColor:0,backgroundColor:16764185};t.tags.push(n)}}(e,n,t)})),r.on.inspectComponent((({componentInstance:e,instanceData:n})=>{e.vnode.el.__VUE_I18N__&&n&&("legacy"===t.mode?e.vnode.el.__VUE_I18N__!==t.global.__composer&&rl(n,e.vnode.el.__VUE_I18N__):rl(n,e.vnode.el.__VUE_I18N__))})),r.addInspector({id:"vue-i18n-resource-inspector",label:$i["vue-i18n-resource-inspector"],icon:"language",treeFilterPlaceholder:Ii["vue-i18n-resource-inspector"]}),r.on.getInspectorTree((n=>{n.app===e&&"vue-i18n-resource-inspector"===n.inspectorId&&function(e,t){e.rootNodes.push({id:"global",label:"Global Scope"});const n="composition"===t.mode?t.global:t.global.__composer;for(const[r,a]of t.__instances){const s="composition"===t.mode?a:a.__composer;if(n===s)continue;const o=r.type.name||r.type.displayName||r.type.__file;e.rootNodes.push({id:s.id.toString(),label:`${o} Scope`})}}(n,t)})),r.on.getInspectorState((n=>{n.app===e&&"vue-i18n-resource-inspector"===n.inspectorId&&function(e,t){const n=ll(e.nodeId,t);n&&(e.state=function(e){const t={},n="Locale related info",r=[{type:n,key:"locale",editable:!0,value:e.locale.value},{type:n,key:"fallbackLocale",editable:!0,value:e.fallbackLocale.value},{type:n,key:"availableLocales",editable:!1,value:e.availableLocales},{type:n,key:"inheritLocale",editable:!0,value:e.inheritLocale}];t[n]=r;const a="Locale messages info",s=[{type:a,key:"messages",editable:!1,value:al(e.messages.value)}];t[a]=s;const o="Datetime formats info",i=[{type:o,key:"datetimeFormats",editable:!1,value:e.datetimeFormats.value}];t[o]=i;const l="Datetime formats info",u=[{type:l,key:"numberFormats",editable:!1,value:e.numberFormats.value}];return t[l]=u,t}(n))}(n,t)})),r.on.editInspectorState((n=>{n.app===e&&"vue-i18n-resource-inspector"===n.inspectorId&&function(e,t){const n=ll(e.nodeId,t);if(n){const[t]=e.path;"locale"===t&&to(e.state.value)?n.locale.value=e.state.value:"fallbackLocale"===t&&(to(e.state.value)||Qs(e.state.value)||ro(e.state.value))?n.fallbackLocale.value=e.state.value:"inheritLocale"===t&&no(e.state.value)&&(n.inheritLocale=e.state.value)}}(n,t)})),r.addTimelineLayer({id:"vue-i18n-timeline",label:$i["vue-i18n-timeline"],color:Ni["vue-i18n-timeline"]}),n(!0)}))}catch(e){console.error(e),r(!1)}}))}function rl(e,t){const n=el;e.state.push({type:n,key:"locale",editable:!0,value:t.locale.value}),e.state.push({type:n,key:"availableLocales",editable:!1,value:t.availableLocales}),e.state.push({type:n,key:"fallbackLocale",editable:!0,value:t.fallbackLocale.value}),e.state.push({type:n,key:"inheritLocale",editable:!0,value:t.inheritLocale}),e.state.push({type:n,key:"messages",editable:!1,value:al(t.messages.value)}),e.state.push({type:n,key:"datetimeFormats",editable:!1,value:t.datetimeFormats.value}),e.state.push({type:n,key:"numberFormats",editable:!1,value:t.numberFormats.value})}function al(e){const t={};return Object.keys(e).forEach((n=>{const r=e[n];var a;eo(r)&&"source"in r?t[n]={_custom:{type:"function",display:"<span></span> "+((a=r).source?`("${ol(a.source)}")`:"(?)")}}:ro(r)?t[n]=al(r):t[n]=r})),t}const sl={"<":"&lt;",">":"&gt;",'"':"&quot;","&":"&amp;"};function ol(e){return e.replace(/[<>"&]/g,il)}function il(e){return sl[e]||e}function ll(e,t){if("global"===e)return"composition"===t.mode?t.global:t.global.__composer;{const n=Array.from(t.__instances.values()).find((t=>t.id.toString()===e));return n?"composition"===t.mode?n:n.__composer:null}}function ul(e,t){if(tl){let n;t&&"groupId"in t&&(n=t.groupId,delete t.groupId),tl.addTimelineEvent({layerId:"vue-i18n-timeline",event:{title:e,groupId:n,time:Date.now(),meta:{},data:t||{},logType:"compile-error"===e?"error":"fallback"===e||"missing"===e?"warning":"default"}})}}function cl(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[Li](t.pluralizationRules||e.pluralizationRules);const n=Vi(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(n).forEach((t=>e.mergeLocaleMessage(t,n[t]))),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach((n=>e.mergeDateTimeFormat(n,t.datetimeFormats[n]))),t.numberFormats&&Object.keys(t.numberFormats).forEach((n=>e.mergeNumberFormat(n,t.numberFormats[n]))),e}function pl(e={}){const t=_a();if(null==t)throw Oi(16);if(!t.appContext.app.__VUE_I18N_SYMBOL__)throw Oi(17);const n=kn(t.appContext.app.__VUE_I18N_SYMBOL__);if(!n)throw Oi(22);const r="composition"===n.mode?n.global:n.global.__composer,a=Us(e)?"__i18n"in t.type?"local":"global":e.useScope?e.useScope:"local";if("global"===a){let n=ro(e.messages)?e.messages:{};"__i18nGlobal"in t.type&&(n=Vi(r.locale.value,{messages:n,__i18n:t.type.__i18nGlobal}));const a=Object.keys(n);if(a.length&&a.forEach((e=>{r.mergeLocaleMessage(e,n[e])})),ro(e.datetimeFormats)){const t=Object.keys(e.datetimeFormats);t.length&&t.forEach((t=>{r.mergeDateTimeFormat(t,e.datetimeFormats[t])}))}if(ro(e.numberFormats)){const t=Object.keys(e.numberFormats);t.length&&t.forEach((t=>{r.mergeNumberFormat(t,e.numberFormats[t])}))}return r}if("parent"===a){let a=function(e,t,n=!1){let r=null;const a=t.root;let s=t.parent;for(;null!=s;){const t=e;if("composition"===e.mode)r=t.__getInstance(s);else{const e=t.__getInstance(s);null!=e&&(r=e.__composer),n&&r&&!r[Bi]&&(r=null)}if(null!=r)break;if(a===s)break;s=s.parent}return r}(n,t,e.__useComponent);return null==a&&(a=r),a}if("legacy"===n.mode)throw Oi(18);const s=n;let o=s.__getInstance(t);if(null==o){const n=t.type,a=qs({},e);n.__i18n&&(a.__i18n=n.__i18n),r&&(a.__root=r),o=ji(a),function(e,t,n){let r=null;Jn((()=>{if(__VUE_I18N_PROD_DEVTOOLS__&&t.vnode.el){t.vnode.el.__VUE_I18N__=n,r=io();const e=n;e[Pi]&&e[Pi](r),r.on("*",ul)}}),t),tr((()=>{if(__VUE_I18N_PROD_DEVTOOLS__&&t.vnode.el&&t.vnode.el.__VUE_I18N__){r&&r.off("*",ul);const e=n;e[Di]&&e[Di](),delete t.vnode.el.__VUE_I18N__}e.__deleteInstance(t)}),t)}(s,t,o),s.__setInstance(t,o)}return o}const dl=["locale","fallbackLocale","availableLocales"],hl=["t","rt","d","n","tm"];var fl;if(Xo=function(e,t={}){{const n=(t.onCacheKey||si)(e),r=oi[n];if(r)return r;let a=!1;const s=t.onError||To;t.onError=e=>{a=!0,s(e)};const{code:o}=Ho(e,t),i=new Function(`return ${o}`)();return a?i:oi[n]=i}},function(){let e=!1;"boolean"!=typeof __VUE_I18N_FULL_INSTALL__&&(e=!0,Ks().__VUE_I18N_FULL_INSTALL__=!0),"boolean"!=typeof __VUE_I18N_LEGACY_API__&&(e=!0,Ks().__VUE_I18N_LEGACY_API__=!0),"boolean"!=typeof __VUE_I18N_PROD_DEVTOOLS__&&(e=!0,Ks().__VUE_I18N_PROD_DEVTOOLS__=!1),"boolean"!=typeof __INTLIFY_PROD_DEVTOOLS__&&(Ks().__INTLIFY_PROD_DEVTOOLS__=!1)}(),__INTLIFY_PROD_DEVTOOLS__){const e=Ks();e.__INTLIFY__=!0,fl=e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__,Uo=fl}function ml(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function gl(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(t).forEach((function(n){void 0===e[n]?e[n]=t[n]:ml(t[n])&&ml(e[n])&&Object.keys(t[n]).length>0&&gl(e[n],t[n])}))}var vl={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function bl(){var e="undefined"!=typeof document?document:{};return gl(e,vl),e}var yl={document:vl,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function wl(){var e="undefined"!=typeof window?window:{};return gl(e,yl),e}var xl=0;function kl(){return xl+=1}function Cl(e,t){void 0===e&&(e="xxxxxxxxxx"),void 0===t&&(t="0123456789abcdef");var n=t.length;return e.replace(/x/g,(function(){return t[Math.floor(Math.random()*n)]}))}var Sl,El,Tl='\n  <span class="preloader-inner">\n    <svg viewBox="0 0 36 36">\n      <circle cx="18" cy="18" r="16"></circle>\n    </svg>\n  </span>\n'.trim(),$l=('\n  <span class="preloader-inner">\n    '+[0,1,2,3,4,5,6,7].map((function(){return'<span class="preloader-inner-line"></span>'})).join("")+"\n  </span>\n").trim(),Il='\n  <span class="preloader-inner">\n    <span class="preloader-inner-circle"></span>\n  </span>\n';function Nl(e){var t;return e.split("").map((function(e,n){return e.match(/[A-Z]/)&&0!==n&&!t?(t=!0,":"+e.toLowerCase()):e.toLowerCase()})).join("")}function Ol(e){var t=e;Object.keys(t).forEach((function(e){try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}}))}function Al(e){return wl().requestAnimationFrame(e)}function Ml(e){return wl().cancelAnimationFrame(e)}function _l(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function Rl(e){return Al((function(){Al(e)}))}function Pl(){return Date.now()}function Dl(e){var t,n,r,a,s=wl(),o={},i=e||s.location.href;if("string"==typeof i&&i.length)for(a=(n=(i=i.indexOf("?")>-1?i.replace(/\S*\?/,""):"").split("&").filter((function(e){return""!==e}))).length,t=0;t<a;t+=1)r=n[t].replace(/#\S+/g,"").split("="),o[decodeURIComponent(r[0])]=void 0===r[1]?void 0:decodeURIComponent(r.slice(1).join("="))||"";return o}function Ll(e,t){void 0===t&&(t="x");var n,r,a,s=wl(),o=s.getComputedStyle(e,null);return s.WebKitCSSMatrix?((r=o.transform||o.webkitTransform).split(",").length>6&&(r=r.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),a=new s.WebKitCSSMatrix("none"===r?"":r)):n=(a=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(r=s.WebKitCSSMatrix?a.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===t&&(r=s.WebKitCSSMatrix?a.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),r||0}function Bl(e,t){if(void 0===t&&(t=[]),"string"==typeof e)return e;var n,r=[];function a(e){if(t.length>0){for(var n="",r=0;r<t.length;r+=1)n+=0===r?t[r]:"["+encodeURIComponent(t[r])+"]";return n+"["+encodeURIComponent(e)+"]"}return encodeURIComponent(e)}function s(e){return encodeURIComponent(e)}return Object.keys(e).forEach((function(o){var i;if(Array.isArray(e[o])){i=[];for(var l=0;l<e[o].length;l+=1)Array.isArray(e[o][l])||"object"!=typeof e[o][l]?i.push(a(o)+"[]="+s(e[o][l])):((n=t.slice()).push(o),n.push(String(l)),i.push(Bl(e[o][l],n)));i.length>0&&r.push(i.join("&"))}else null===e[o]||""===e[o]?r.push(a(o)+"="):"object"==typeof e[o]?((n=t.slice()).push(o),""!==(i=Bl(e[o],n))&&r.push(i)):void 0!==e[o]&&""!==e[o]?r.push(a(o)+"="+s(e[o])):""===e[o]&&r.push(a(o))})),r.join("&")}function Fl(e){return"object"==typeof e&&null!==e&&e.constructor&&e.constructor===Object}function zl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];t.splice(0,1);for(var a=t,s=0;s<a.length;s+=1){var o=t[s];if(null!=o)for(var i=Object.keys(Object(o)),l=0,u=i.length;l<u;l+=1){var c=i[l],p=Object.getOwnPropertyDescriptor(o,c);void 0!==p&&p.enumerable&&(r[c]=o[c])}}return r}function Vl(){for(var e,t,n=!0,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];"boolean"==typeof a[0]?(n=a[0],e=a[1],a.splice(0,2),t=a):(e=a[0],a.splice(0,1),t=a);for(var o=0;o<t.length;o+=1){var i=a[o];if(null!=i)for(var l=Object.keys(Object(i)),u=0,c=l.length;u<c;u+=1){var p=l[u],d=Object.getOwnPropertyDescriptor(i,p);void 0!==d&&d.enumerable&&(n?Fl(e[p])&&Fl(i[p])?Vl(e[p],i[p]):!Fl(e[p])&&Fl(i[p])?(e[p]={},Vl(e[p],i[p])):e[p]=i[p]:e[p]=i[p])}}return e}function Wl(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r})),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?n.slice(1).map((function(e){return parseInt(e,16)})):null}function Hl(e,t,n){var r=[e,t,n].map((function(e){var t=e.toString(16);return 1===t.length?"0"+t:t})).join("");return"#"+r}function jl(e,t,n){e/=255,t/=255,n/=255;var r,a=Math.max(e,t,n),s=Math.min(e,t,n),o=a-s;0===o?r=0:a===e?r=(t-n)/o%6:a===t?r=(n-e)/o+2:a===n&&(r=(e-t)/o+4);var i=(s+a)/2;return r<0&&(r=6+r),[60*r,0===o?0:o/(1-Math.abs(2*i-1)),i]}function Ul(e,t,n){var r,a=(1-Math.abs(2*n-1))*t,s=e/60,o=a*(1-Math.abs(s%2-1));Number.isNaN(e)||void 0===e?r=[0,0,0]:s<=1?r=[a,o,0]:s<=2?r=[o,a,0]:s<=3?r=[0,a,o]:s<=4?r=[0,o,a]:s<=5?r=[o,0,a]:s<=6&&(r=[a,0,o]);var i=n-a/2;return r.map((function(e){return Math.max(0,Math.min(255,Math.round(255*(e+i))))}))}function Gl(e,t,n){var r={h:e,s:0,l:0},a=t,s=n;return r.l=(2-a)*s/2,r.s=r.l&&r.l<1?a*s/(r.l<.5?2*r.l:2-2*r.l):r.s,[r.h,r.s,r.l]}function ql(e,t,n){var r={h:e,s:0,b:0},a=n,s=t*(a<.5?a:1-a);return r.b=a+s,r.s=a>0?2*s/r.b:r.s,[r.h,r.s,r.b]}function Xl(){for(var e,t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];if(1===r.length?t=Wl(e=r[0]):3===r.length&&(t=r,e=Hl.apply(void 0,t)),!t)return{};var s=jl.apply(void 0,t),o=[s[0],s[1],Math.max(0,s[2]-.08)],i=[s[0],s[1],Math.max(0,s[2]+.08)],l=Hl.apply(void 0,Ul.apply(void 0,o)),u=Hl.apply(void 0,Ul.apply(void 0,i));return{"--f7-theme-color":e,"--f7-theme-color-rgb":t.join(", "),"--f7-theme-color-shade":l,"--f7-theme-color-tint":u}}function Kl(e,t){Object.keys(t).forEach((function(n){Fl(t[n])&&Object.keys(t[n]).forEach((function(r){"function"==typeof t[n][r]&&(t[n][r]=t[n][r].bind(e))})),e[n]=t[n]}))}function Yl(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){Array.isArray(t)?e.push.apply(e,Yl.apply(void 0,t)):e.push(t)})),e}function Jl(){return Sl||(Sl=function(){var e=wl(),t=bl();return{touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),pointerEvents:!!e.PointerEvent&&"maxTouchPoints"in e.navigator&&e.navigator.maxTouchPoints>=0,passiveListener:function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("testPassiveListener",null,n)}catch(e){}return t}(),intersectionObserver:"IntersectionObserver"in e}}()),Sl}function Zl(e,t){return void 0===e&&(e={}),El&&!t||(El=function(e){var t=(void 0===e?{}:e).userAgent,n=Jl(),r=wl(),a=r.navigator.platform,s=t||r.navigator.userAgent,o={ios:!1,android:!1,androidChrome:!1,desktop:!1,iphone:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!r.cordova&&!r.phonegap),phonegap:!(!r.cordova&&!r.phonegap),electron:!1,capacitor:!!r.Capacitor,nwjs:!1},i=r.screen.width,l=r.screen.height,u=s.match(/(Android);?[\s\/]+([\d.]+)?/),c=s.match(/(iPad).*OS\s([\d_]+)/),p=s.match(/(iPod)(.*OS\s([\d_]+))?/),d=!c&&s.match(/(iPhone\sOS|iOS|iPhone;\sCPU\sOS)\s([\d_]+)/),h=s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0,f=s.indexOf("Edge/")>=0,m=s.indexOf("Gecko/")>=0&&s.indexOf("Firefox/")>=0,g="Win32"===a,v=s.toLowerCase().indexOf("electron")>=0,b="undefined"!=typeof nw&&"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.nw,y="MacIntel"===a;return!c&&y&&n.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(i+"x"+l)>=0&&((c=s.match(/(Version)\/([\d.]+)/))||(c=[0,1,"13_0_0"]),y=!1),o.ie=h,o.edge=f,o.firefox=m,u&&(o.os="android",o.osVersion=u[2],o.android=!0,o.androidChrome=s.toLowerCase().indexOf("chrome")>=0),(c||d||p)&&(o.os="ios",o.ios=!0),d&&!p&&(o.osVersion=d[2].replace(/_/g,"."),o.iphone=!0),c&&(o.osVersion=c[2].replace(/_/g,"."),o.ipad=!0),p&&(o.osVersion=p[3]?p[3].replace(/_/g,"."):null,o.ipod=!0),o.ios&&o.osVersion&&s.indexOf("Version/")>=0&&"10"===o.osVersion.split(".")[0]&&(o.osVersion=s.toLowerCase().split("version/")[1].split(" ")[0]),o.webView=!(!(d||c||p)||!s.match(/.*AppleWebKit(?!.*Safari)/i)&&!r.navigator.standalone)||r.matchMedia&&r.matchMedia("(display-mode: standalone)").matches,o.webview=o.webView,o.standalone=o.webView,o.desktop=!(o.ios||o.android)||v||b,o.desktop&&(o.electron=v,o.nwjs=b,o.macos=y,o.windows=g,o.macos&&(o.os="macos"),o.windows&&(o.os="windows")),o.pixelRatio=r.devicePixelRatio||1,o.prefersColorScheme=function(){var e;return r.matchMedia&&r.matchMedia("(prefers-color-scheme: light)").matches&&(e="light"),r.matchMedia&&r.matchMedia("(prefers-color-scheme: dark)").matches&&(e="dark"),e},o}(e)),El}var Ql=function(){function e(e){void 0===e&&(e=[]);this.eventsParents=e,this.eventsListeners={}}var t=e.prototype;return t.on=function(e,t,n){var r=this;if("function"!=typeof t)return r;var a=n?"unshift":"push";return e.split(" ").forEach((function(e){r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][a](t)})),r},t.once=function(e,t,n){var r=this;if("function"!=typeof t)return r;function a(){r.off(e,a),a.f7proxy&&delete a.f7proxy;for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];t.apply(r,s)}return a.f7proxy=t,r.on(e,a,n)},t.off=function(e,t){var n=this;return n.eventsListeners?(e.split(" ").forEach((function(e){void 0===t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach((function(r,a){(r===t||r.f7proxy&&r.f7proxy===t)&&n.eventsListeners[e].splice(a,1)}))})),n):n},t.emit=function(){var e,t,n,r,a=this;if(!a.eventsListeners)return a;for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];"string"==typeof o[0]||Array.isArray(o[0])?(e=o[0],t=o.slice(1,o.length),n=a,r=a.eventsParents):(e=o[0].events,t=o[0].data,n=o[0].context||a,r=o[0].local?[]:o[0].parents||a.eventsParents);var l=Array.isArray(e)?e:e.split(" "),u=l.map((function(e){return e.replace("local::","")})),c=l.filter((function(e){return e.indexOf("local::")<0}));return u.forEach((function(e){if(a.eventsListeners&&a.eventsListeners[e]){var r=[];a.eventsListeners[e].forEach((function(e){r.push(e)})),r.forEach((function(e){e.apply(n,t)}))}})),r&&r.length>0&&r.forEach((function(e){e.emit.apply(e,[c].concat(t))})),a},e}(),eu=Ql;function tu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nu(e,t){return nu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},nu(e,t)}var ru=function(e){var t,n;function r(t,n){var r;void 0===t&&(t={}),void 0===n&&(n=[]);var a=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r=e.call(this,n)||this);return a.params=t,a.params&&a.params.on&&Object.keys(a.params.on).forEach((function(e){a.on(e,a.params.on[e])})),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,nu(t,n);var a,s,o,i=r.prototype;return i.useModuleParams=function(e,t){if(e.params){var n={};Object.keys(e.params).forEach((function(e){void 0!==t[e]&&(n[e]=Vl({},t[e]))})),Vl(t,e.params),Object.keys(n).forEach((function(e){Vl(t[e],n[e])}))}},i.useModulesParams=function(e){var t=this;t.modules&&Object.keys(t.modules).forEach((function(n){var r=t.modules[n];r.params&&Vl(e,r.params)}))},i.useModule=function(e,t){void 0===e&&(e=""),void 0===t&&(t={});var n=this;if(n.modules){var r="string"==typeof e?n.modules[e]:e;r&&(r.instance&&Object.keys(r.instance).forEach((function(e){var t=r.instance[e];n[e]="function"==typeof t?t.bind(n):t})),r.on&&n.on&&Object.keys(r.on).forEach((function(e){n.on(e,r.on[e])})),r.vnode&&(n.vnodeHooks||(n.vnodeHooks={}),Object.keys(r.vnode).forEach((function(e){Object.keys(r.vnode[e]).forEach((function(t){var a=r.vnode[e][t];n.vnodeHooks[t]||(n.vnodeHooks[t]={}),n.vnodeHooks[t][e]||(n.vnodeHooks[t][e]=[]),n.vnodeHooks[t][e].push(a.bind(n))}))}))),r.create&&r.create.bind(n)(t))}},i.useModules=function(e){void 0===e&&(e={});var t=this;t.modules&&Object.keys(t.modules).forEach((function(n){var r=e[n]||{};t.useModule(n,r)}))},r.installModule=function(e){var t=this;t.prototype.modules||(t.prototype.modules={});var n=e.name||Object.keys(t.prototype.modules).length+"_"+Pl();if(t.prototype.modules[n]=e,e.proto&&Object.keys(e.proto).forEach((function(n){t.prototype[n]=e.proto[n]})),e.static&&Object.keys(e.static).forEach((function(n){t[n]=e.static[n]})),e.install){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];e.install.apply(t,a)}return t},r.use=function(e){var t=this;if(Array.isArray(e))return e.forEach((function(e){return t.installModule(e)})),t;for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return t.installModule.apply(t,[e].concat(r))},a=r,o=[{key:"components",set:function(e){this.use&&this.use(e)}}],(s=null)&&tu(a.prototype,s),o&&tu(a,o),r}(eu),au=ru;function su(e){return su=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},su(e)}function ou(e,t){return ou=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ou(e,t)}function iu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function lu(e,t,n){return lu=iu()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&ou(a,n.prototype),a},lu.apply(null,arguments)}function uu(e){var t="function"==typeof Map?new Map:void 0;return uu=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return lu(e,arguments,su(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),ou(r,e)},uu(e)}var cu=function(e){var t,n;function r(t){var n,r,a;return n=e.call.apply(e,[this].concat(t))||this,r=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),a=r.__proto__,Object.defineProperty(r,"__proto__",{get:function(){return a},set:function(e){a.__proto__=e}}),n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r}(uu(Array));function pu(e){void 0===e&&(e=[]);var t=[];return e.forEach((function(e){Array.isArray(e)?t.push.apply(t,pu(e)):t.push(e)})),t}function du(e,t){return Array.prototype.filter.call(e,t)}function hu(e,t){var n=wl(),r=bl(),a=[];if(!t&&e instanceof cu)return e;if(!e)return new cu(a);if("string"==typeof e){var s=e.trim();if(s.indexOf("<")>=0&&s.indexOf(">")>=0){var o="div";0===s.indexOf("<li")&&(o="ul"),0===s.indexOf("<tr")&&(o="tbody"),0!==s.indexOf("<td")&&0!==s.indexOf("<th")||(o="tr"),0===s.indexOf("<tbody")&&(o="table"),0===s.indexOf("<option")&&(o="select");var i=r.createElement(o);i.innerHTML=s;for(var l=0;l<i.childNodes.length;l+=1)a.push(i.childNodes[l])}else a=function(e,t){if("string"!=typeof e)return[e];for(var n=[],r=t.querySelectorAll(e),a=0;a<r.length;a+=1)n.push(r[a]);return n}(e.trim(),t||r)}else if(e.nodeType||e===n||e===r)a.push(e);else if(Array.isArray(e)){if(e instanceof cu)return e;a=e}return new cu(function(e){for(var t=[],n=0;n<e.length;n+=1)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(a))}function fu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=pu(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).add.apply(t,r)})),this}function mu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=pu(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).remove.apply(t,r)})),this}function gu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=pu(t.map((function(e){return e.split(" ")})));this.forEach((function(e){r.forEach((function(t){e.classList.toggle(t)}))}))}function vu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=pu(t.map((function(e){return e.split(" ")})));return du(this,(function(e){return r.filter((function(t){return e.classList.contains(t)})).length>0})).length>0}function bu(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var n=0;n<this.length;n+=1)if(2===arguments.length)this[n].setAttribute(e,t);else for(var r in e)this[n][r]=e[r],this[n].setAttribute(r,e[r]);return this}function yu(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this}function wu(e,t){if(1!==arguments.length||"string"!=typeof e){for(var n=0;n<this.length;n+=1)if(2===arguments.length)this[n][e]=t;else for(var r in e)this[n][r]=e[r];return this}return this[0]?this[0][e]:this}function xu(e,t){var n;if(void 0===t){if(!(n=this[0]))return;if(n.dom7ElementDataStorage&&e in n.dom7ElementDataStorage)return n.dom7ElementDataStorage[e];var r=n.getAttribute("data-"+e);return r||void 0}for(var a=0;a<this.length;a+=1)(n=this[a]).dom7ElementDataStorage||(n.dom7ElementDataStorage={}),n.dom7ElementDataStorage[e]=t;return this}function ku(e){for(var t=0;t<this.length;t+=1){var n=this[t];n.dom7ElementDataStorage&&n.dom7ElementDataStorage[e]&&(n.dom7ElementDataStorage[e]=null,delete n.dom7ElementDataStorage[e])}}function Cu(){var e=this[0];if(e){var t,n={};if(e.dataset)for(var r in e.dataset)n[r]=e.dataset[r];else for(var a=0;a<e.attributes.length;a+=1){var s=e.attributes[a];s.name.indexOf("data-")>=0&&(n[(t=s.name.split("data-")[1],t.toLowerCase().replace(/-(.)/g,(function(e,t){return t.toUpperCase()})))]=s.value)}for(var o in n)"false"===n[o]?n[o]=!1:"true"===n[o]?n[o]=!0:parseFloat(n[o])===1*n[o]&&(n[o]*=1);return n}}function Su(e){if(void 0===e){var t=this[0];if(!t)return;if(t.multiple&&"select"===t.nodeName.toLowerCase()){for(var n=[],r=0;r<t.selectedOptions.length;r+=1)n.push(t.selectedOptions[r].value);return n}return t.value}for(var a=0;a<this.length;a+=1){var s=this[a];if(Array.isArray(e)&&s.multiple&&"select"===s.nodeName.toLowerCase())for(var o=0;o<s.options.length;o+=1)s.options[o].selected=e.indexOf(s.options[o].value)>=0;else s.value=e}return this}function Eu(e){return this.val(e)}function Tu(e){for(var t=0;t<this.length;t+=1)this[t].style.transform=e;return this}function $u(e){for(var t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!=typeof e?e+"ms":e;return this}function Iu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],s=t[2],o=t[3];function i(e){var t=e.target;if(t){var n=e.target.dom7EventData||[];if(n.indexOf(e)<0&&n.unshift(e),hu(t).is(a))s.apply(t,n);else for(var r=hu(t).parents(),o=0;o<r.length;o+=1)hu(r[o]).is(a)&&s.apply(r[o],n)}}function l(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),s.apply(this,t)}"function"==typeof t[1]&&(r=t[0],s=t[1],o=t[2],a=void 0),o||(o=!1);for(var u,c=r.split(" "),p=0;p<this.length;p+=1){var d=this[p];if(a)for(u=0;u<c.length;u+=1){var h=c[u];d.dom7LiveListeners||(d.dom7LiveListeners={}),d.dom7LiveListeners[h]||(d.dom7LiveListeners[h]=[]),d.dom7LiveListeners[h].push({listener:s,proxyListener:i}),d.addEventListener(h,i,o)}else for(u=0;u<c.length;u+=1){var f=c[u];d.dom7Listeners||(d.dom7Listeners={}),d.dom7Listeners[f]||(d.dom7Listeners[f]=[]),d.dom7Listeners[f].push({listener:s,proxyListener:l}),d.addEventListener(f,l,o)}}return this}function Nu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],s=t[2],o=t[3];"function"==typeof t[1]&&(r=t[0],s=t[1],o=t[2],a=void 0),o||(o=!1);for(var i=r.split(" "),l=0;l<i.length;l+=1)for(var u=i[l],c=0;c<this.length;c+=1){var p=this[c],d=void 0;if(!a&&p.dom7Listeners?d=p.dom7Listeners[u]:a&&p.dom7LiveListeners&&(d=p.dom7LiveListeners[u]),d&&d.length)for(var h=d.length-1;h>=0;h-=1){var f=d[h];s&&f.listener===s||s&&f.listener&&f.listener.dom7proxy&&f.listener.dom7proxy===s?(p.removeEventListener(u,f.proxyListener,o),d.splice(h,1)):s||(p.removeEventListener(u,f.proxyListener,o),d.splice(h,1))}}return this}function Ou(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],s=n[1],o=n[2],i=n[3];function l(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];o.apply(this,n),e.off(a,s,l,i),l.dom7proxy&&delete l.dom7proxy}return"function"==typeof n[1]&&(a=n[0],o=n[1],i=n[2],s=void 0),l.dom7proxy=o,e.on(a,s,l,i)}function Au(){for(var e=wl(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=n[0].split(" "),s=n[1],o=0;o<a.length;o+=1)for(var i=a[o],l=0;l<this.length;l+=1){var u=this[l];if(e.CustomEvent){var c=new e.CustomEvent(i,{detail:s,bubbles:!0,cancelable:!0});u.dom7EventData=n.filter((function(e,t){return t>0})),u.dispatchEvent(c),u.dom7EventData=[],delete u.dom7EventData}}return this}function Mu(e){var t=this;return e&&t.on("transitionend",(function n(r){r.target===this&&(e.call(this,r),t.off("transitionend",n))})),this}function _u(e){var t=this;return e&&t.on("animationend",(function n(r){r.target===this&&(e.call(this,r),t.off("animationend",n))})),this}function Ru(){var e=wl();return this[0]===e?e.innerWidth:this.length>0?parseFloat(this.css("width")):null}function Pu(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function Du(){var e=wl();return this[0]===e?e.innerHeight:this.length>0?parseFloat(this.css("height")):null}function Lu(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function Bu(){if(this.length>0){var e=wl(),t=bl(),n=this[0],r=n.getBoundingClientRect(),a=t.body,s=n.clientTop||a.clientTop||0,o=n.clientLeft||a.clientLeft||0,i=n===e?e.scrollY:n.scrollTop,l=n===e?e.scrollX:n.scrollLeft;return{top:r.top+i-s,left:r.left+l-o}}return null}function Fu(){for(var e=0;e<this.length;e+=1)this[e].style.display="none";return this}function zu(){for(var e=wl(),t=0;t<this.length;t+=1){var n=this[t];"none"===n.style.display&&(n.style.display=""),"none"===e.getComputedStyle(n,null).getPropertyValue("display")&&(n.style.display="block")}return this}function Vu(){var e=wl();return this[0]?e.getComputedStyle(this[0],null):{}}function Wu(e,t){var n,r=wl();if(1===arguments.length){if("string"!=typeof e){for(n=0;n<this.length;n+=1)for(var a in e)this[n].style[a]=e[a];return this}if(this[0])return r.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(n=0;n<this.length;n+=1)this[n].style[e]=t;return this}return this}function Hu(e){return e?(this.forEach((function(t,n){e.apply(t,[t,n])})),this):this}function ju(e){return hu(du(this,e))}function Uu(e){if(void 0===e)return this[0]?this[0].innerHTML:null;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this}function Gu(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this}function qu(e){var t,n,r=wl(),a=bl(),s=this[0];if(!s||void 0===e)return!1;if("string"==typeof e){if(s.matches)return s.matches(e);if(s.webkitMatchesSelector)return s.webkitMatchesSelector(e);if(s.msMatchesSelector)return s.msMatchesSelector(e);for(t=hu(e),n=0;n<t.length;n+=1)if(t[n]===s)return!0;return!1}if(e===a)return s===a;if(e===r)return s===r;if(e.nodeType||e instanceof cu){for(t=e.nodeType?[e]:e,n=0;n<t.length;n+=1)if(t[n]===s)return!0;return!1}return!1}function Xu(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}}function Ku(e){if(void 0===e)return this;var t=this.length;if(e>t-1)return hu([]);if(e<0){var n=t+e;return hu(n<0?[]:[this[n]])}return hu([this[e]])}function Yu(){for(var e,t=bl(),n=0;n<arguments.length;n+=1){e=n<0||arguments.length<=n?void 0:arguments[n];for(var r=0;r<this.length;r+=1)if("string"==typeof e){var a=t.createElement("div");for(a.innerHTML=e;a.firstChild;)this[r].appendChild(a.firstChild)}else if(e instanceof cu)for(var s=0;s<e.length;s+=1)this[r].appendChild(e[s]);else this[r].appendChild(e)}return this}function Ju(e){return hu(e).append(this),this}function Zu(e){var t,n,r=bl();for(t=0;t<this.length;t+=1)if("string"==typeof e){var a=r.createElement("div");for(a.innerHTML=e,n=a.childNodes.length-1;n>=0;n-=1)this[t].insertBefore(a.childNodes[n],this[t].childNodes[0])}else if(e instanceof cu)for(n=0;n<e.length;n+=1)this[t].insertBefore(e[n],this[t].childNodes[0]);else this[t].insertBefore(e,this[t].childNodes[0]);return this}function Qu(e){return hu(e).prepend(this),this}function ec(e){for(var t=hu(e),n=0;n<this.length;n+=1)if(1===t.length)t[0].parentNode.insertBefore(this[n],t[0]);else if(t.length>1)for(var r=0;r<t.length;r+=1)t[r].parentNode.insertBefore(this[n].cloneNode(!0),t[r])}function tc(e){for(var t=hu(e),n=0;n<this.length;n+=1)if(1===t.length)t[0].parentNode.insertBefore(this[n],t[0].nextSibling);else if(t.length>1)for(var r=0;r<t.length;r+=1)t[r].parentNode.insertBefore(this[n].cloneNode(!0),t[r].nextSibling)}function nc(e){return this.length>0?e?this[0].nextElementSibling&&hu(this[0].nextElementSibling).is(e)?hu([this[0].nextElementSibling]):hu([]):this[0].nextElementSibling?hu([this[0].nextElementSibling]):hu([]):hu([])}function rc(e){var t=[],n=this[0];if(!n)return hu([]);for(;n.nextElementSibling;){var r=n.nextElementSibling;e?hu(r).is(e)&&t.push(r):t.push(r),n=r}return hu(t)}function ac(e){if(this.length>0){var t=this[0];return e?t.previousElementSibling&&hu(t.previousElementSibling).is(e)?hu([t.previousElementSibling]):hu([]):t.previousElementSibling?hu([t.previousElementSibling]):hu([])}return hu([])}function sc(e){var t=[],n=this[0];if(!n)return hu([]);for(;n.previousElementSibling;){var r=n.previousElementSibling;e?hu(r).is(e)&&t.push(r):t.push(r),n=r}return hu(t)}function oc(e){return this.nextAll(e).add(this.prevAll(e))}function ic(e){for(var t=[],n=0;n<this.length;n+=1)null!==this[n].parentNode&&(e?hu(this[n].parentNode).is(e)&&t.push(this[n].parentNode):t.push(this[n].parentNode));return hu(t)}function lc(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].parentNode;r;)e?hu(r).is(e)&&t.push(r):t.push(r),r=r.parentNode;return hu(t)}function uc(e){var t=this;return void 0===e?hu([]):(t.is(e)||(t=t.parents(e).eq(0)),t)}function cc(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].querySelectorAll(e),a=0;a<r.length;a+=1)t.push(r[a]);return hu(t)}function pc(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].children,a=0;a<r.length;a+=1)e&&!hu(r[a]).is(e)||t.push(r[a]);return hu(t)}function dc(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}function hc(){return this.remove()}function fc(){for(var e,t,n=this,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];for(e=0;e<a.length;e+=1){var o=hu(a[e]);for(t=0;t<o.length;t+=1)n.push(o[t])}return n}function mc(){for(var e=0;e<this.length;e+=1){var t=this[e];if(1===t.nodeType){for(var n=0;n<t.childNodes.length;n+=1)t.childNodes[n].parentNode&&t.childNodes[n].parentNode.removeChild(t.childNodes[n]);t.textContent=""}}return this}function gc(){for(var e=wl(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],s=n[1],o=n[2],i=n[3],l=n[4];return 4===n.length&&"function"==typeof i&&(l=i,a=n[0],s=n[1],o=n[2],l=n[3],i=n[4]),void 0===i&&(i="swing"),this.each((function(){var t,n,r,u,c,p,d,h,f=this,m=s>0||0===s,g=a>0||0===a;if(void 0===i&&(i="swing"),m&&(t=f.scrollTop,o||(f.scrollTop=s)),g&&(n=f.scrollLeft,o||(f.scrollLeft=a)),o){m&&(r=f.scrollHeight-f.offsetHeight,c=Math.max(Math.min(s,r),0)),g&&(u=f.scrollWidth-f.offsetWidth,p=Math.max(Math.min(a,u),0));var v=null;m&&c===t&&(m=!1),g&&p===n&&(g=!1),e.requestAnimationFrame((function r(a){void 0===a&&(a=(new Date).getTime()),null===v&&(v=a);var s,u=Math.max(Math.min((a-v)/o,1),0),b="linear"===i?u:.5-Math.cos(u*Math.PI)/2;m&&(d=t+b*(c-t)),g&&(h=n+b*(p-n)),m&&c>t&&d>=c&&(f.scrollTop=c,s=!0),m&&c<t&&d<=c&&(f.scrollTop=c,s=!0),g&&p>n&&h>=p&&(f.scrollLeft=p,s=!0),g&&p<n&&h<=p&&(f.scrollLeft=p,s=!0),s?l&&l():(m&&(f.scrollTop=d),g&&(f.scrollLeft=h),e.requestAnimationFrame(r))}))}}))}function vc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],s=t[2],o=t[3];3===t.length&&"function"==typeof s&&(r=t[0],a=t[1],o=t[2],s=t[3]);var i=this;return void 0===r?i.length>0?i[0].scrollTop:null:i.scrollTo(void 0,r,a,s,o)}function bc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],s=t[2],o=t[3];3===t.length&&"function"==typeof s&&(r=t[0],a=t[1],o=t[2],s=t[3]);var i=this;return void 0===r?i.length>0?i[0].scrollLeft:null:i.scrollTo(r,void 0,a,s,o)}function yc(e,t){var n,r=wl(),a=this,s={props:Object.assign({},e),params:Object.assign({duration:300,easing:"swing"},t),elements:a,animating:!1,que:[],easingProgress:function(e,t){return"swing"===e?.5-Math.cos(t*Math.PI)/2:"function"==typeof e?e(t):t},stop:function(){s.frameId&&r.cancelAnimationFrame(s.frameId),s.animating=!1,s.elements.each((function(e){delete e.dom7AnimateInstance})),s.que=[]},done:function(e){if(s.animating=!1,s.elements.each((function(e){delete e.dom7AnimateInstance})),e&&e(a),s.que.length>0){var t=s.que.shift();s.animate(t[0],t[1])}},animate:function(e,t){if(s.animating)return s.que.push([e,t]),s;var n=[];s.elements.each((function(t,a){var o,i,l,u,c;t.dom7AnimateInstance||(s.elements[a].dom7AnimateInstance=s),n[a]={container:t},Object.keys(e).forEach((function(s){o=r.getComputedStyle(t,null).getPropertyValue(s).replace(",","."),i=parseFloat(o),l=o.replace(i,""),u=parseFloat(e[s]),c=e[s]+l,n[a][s]={initialFullValue:o,initialValue:i,unit:l,finalValue:u,finalFullValue:c,currentValue:i}}))}));var o,i,l=null,u=0,c=0,p=!1;return s.animating=!0,s.frameId=r.requestAnimationFrame((function d(){var h,f;o=(new Date).getTime(),p||(p=!0,t.begin&&t.begin(a)),null===l&&(l=o),t.progress&&t.progress(a,Math.max(Math.min((o-l)/t.duration,1),0),l+t.duration-o<0?0:l+t.duration-o,l),n.forEach((function(r){var a=r;i||a.done||Object.keys(e).forEach((function(r){if(!i&&!a.done){h=Math.max(Math.min((o-l)/t.duration,1),0),f=s.easingProgress(t.easing,h);var p=a[r],d=p.initialValue,m=p.finalValue,g=p.unit;a[r].currentValue=d+f*(m-d);var v=a[r].currentValue;(m>d&&v>=m||m<d&&v<=m)&&(a.container.style[r]=m+g,(c+=1)===Object.keys(e).length&&(a.done=!0,u+=1),u===n.length&&(i=!0)),i?s.done(t.complete):a.container.style[r]=v+g}}))})),i||(s.frameId=r.requestAnimationFrame(d))})),s}};if(0===s.elements.length)return a;for(var o=0;o<s.elements.length;o+=1)s.elements[o].dom7AnimateInstance?n=s.elements[o].dom7AnimateInstance:s.elements[o].dom7AnimateInstance=s;return n||(n=s),"stop"===e?n.stop():n.animate(s.props,s.params),a}function wc(){for(var e=this,t=0;t<e.length;t+=1)e[t].dom7AnimateInstance&&e[t].dom7AnimateInstance.stop()}hu.fn=cu.prototype;var xc="resize scroll".split(" ");function kc(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0===n[0]){for(var a=0;a<this.length;a+=1)xc.indexOf(e)<0&&(e in this[a]?this[a][e]():hu(this[a]).trigger(e));return this}return this.on.apply(this,[e].concat(n))}}var Cc=kc("click"),Sc=kc("blur"),Ec=kc("focus"),Tc=kc("focusin"),$c=kc("focusout"),Ic=kc("keyup"),Nc=kc("keydown"),Oc=kc("keypress"),Ac=kc("submit"),Mc=kc("change"),_c=kc("mousedown"),Rc=kc("mousemove"),Pc=kc("mouseup"),Dc=kc("mouseenter"),Lc=kc("mouseleave"),Bc=kc("mouseout"),Fc=kc("mouseover"),zc=kc("touchstart"),Vc=kc("touchend"),Wc=kc("touchmove"),Hc=kc("resize"),jc=kc("scroll"),Uc=hu;Object.keys(t).forEach((function(e){"$"!==e&&(hu.fn[e]=t[e])}));var Gc=hu;function qc(e,t,n){return qc=Xc()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&Kc(a,n.prototype),a},qc.apply(null,arguments)}function Xc(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Kc(e,t){return Kc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Kc(e,t)}function Yc(e){void 0===e&&(e={});var t=e,n=t.defaultSelector,r=t.constructor,a=t.domProp,s=t.app,o=t.addMethods,i={create:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return qc(r,s?[s].concat(t):t)},get:function(e){if(void 0===e&&(e=n),e instanceof r)return e;var t=Gc(e);return 0!==t.length?t[0][a]:void 0},destroy:function(e){var t=i.get(e);if(t&&t.destroy)return t.destroy()}};return o&&Array.isArray(o)&&o.forEach((function(e){i[e]=function(t){void 0===t&&(t=n);for(var r=i.get(t),a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];if(r&&r[e])return r[e].apply(r,s)}})),i}function Jc(){return Jc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jc.apply(this,arguments)}function Zc(e){void 0===e&&(e={});var t=e,n=t.defaultSelector,r=t.constructor,a=t.app,s=Vl(Yc({defaultSelector:n,constructor:r,app:a,domProp:"f7Modal"}),{open:function(e,t,n){var s=Gc(e);if(s.length>1&&n){var o=Gc(n).parents(".page");o.length&&s.each((function(e){var t=Gc(e);t.parents(o)[0]===o[0]&&(s=t)}))}if(s.length>1&&(s=s.eq(s.length-1)),s.length){var i=s[0].f7Modal;if(!i){var l=s.dataset();i=new r(a,Jc({el:s},l))}return i.open(t)}},close:function(e,t,s){void 0===e&&(e=n);var o=Gc(e);if(o.length){if(o.length>1){var i;if(s){var l=Gc(s);l.length&&(i=l.parents(o))}o=i&&i.length>0?i:o.eq(o.length-1)}var u=o[0].f7Modal;if(!u){var c=o.dataset();u=new r(a,Jc({el:o},c))}return u.close(t)}}});return s}var Qc=[];var ep=function(e){var t=this,n=wl(),r=bl();return new Promise((function(a,s){var o,i,l,u=t.instance;if(e){if("string"==typeof e){var c=e.match(/([a-z0-9-]*)/i);if(e.indexOf(".")<0&&c&&c[0].length===e.length){if(!u||u&&!u.params.lazyModulesPath)return void s(new Error('Framework7: "lazyModulesPath" app parameter must be specified to fetch module by name'));o=u.params.lazyModulesPath+"/"+e+"/"+e+".js"}else o=e}else"function"==typeof e?l=e:i=e;if(l){var p=l(t,!1);if(!p)return void s(new Error("Framework7: Can't find Framework7 component in specified component function"));if(t.prototype.modules&&t.prototype.modules[p.name])return void a();m(p),a()}if(i){var d=i;if(!d)return void s(new Error("Framework7: Can't find Framework7 component in specified component"));if(t.prototype.modules&&t.prototype.modules[d.name])return void a();m(d),a()}if(o){if(Qc.indexOf(o)>=0)return void a();Qc.push(o);var h=new Promise((function(e,a){t.request.get(o,(function(s){var i="f7_component_loader_callback_"+Cl(),l=r.createElement("script");l.innerHTML="window."+i+" = function (Framework7, Framework7AutoInstallComponent) {return "+s.trim()+"}",Gc("head").append(l);var u=n[i];delete n[i],Gc(l).remove();var c=u(t,!1);c?(t.prototype.modules&&t.prototype.modules[c.name]||m(c),e()):a(new Error("Framework7: Can't find Framework7 component in "+o+" file"))}),(function(e,t){a(e,t)}))})),f=new Promise((function(e){t.request.get(o.replace(".js",u.rtl?".rtl.css":".css"),(function(t){var n=r.createElement("style");n.innerHTML=t,Gc("head").append(n),e()}),(function(){e()}))}));Promise.all([h,f]).then((function(){a()})).catch((function(e){s(e)}))}}else s(new Error("Framework7: Lazy module must be specified"));function m(e){t.use(e),u&&(u.useModuleParams(e,u.params),u.useModule(e))}}))};function tp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function np(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rp(e,t){return rp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},rp(e,t)}var ap=function(e){var t,n;function r(t){var n;if(void 0===t&&(t={}),n=e.call(this,t)||this,r.instance&&"undefined"!=typeof window)throw new Error("Framework7 is already initialized and can't be initialized more than once");var a=Zl({userAgent:t.userAgent||void 0}),s=Jl(),o=Vl({},t),i=np(n);i.device=a,i.support=s;var l=wl(),u=bl();r.instance=i;var c={version:"1.0.0",id:"io.framework7.myapp",el:"body",theme:"auto",language:l.navigator.language,routes:[],name:"Framework7",lazyModulesPath:null,initOnDeviceReady:!0,init:!0,autoDarkTheme:!1,iosTranslucentBars:!0,iosTranslucentModals:!0,component:void 0,componentUrl:void 0,userAgent:null,url:null};return i.useModulesParams(c),i.params=Vl(c,t),Vl(i,{id:i.params.id,name:i.params.name,version:i.params.version,routes:i.params.routes,language:i.params.language,theme:"auto"===i.params.theme?a.ios?"ios":a.desktop&&a.electron?"aurora":"md":i.params.theme,passedParams:o,online:l.navigator.onLine}),t.store&&(i.params.store=t.store),i.$el&&i.$el[0]&&(i.$el[0].f7=i),i.useModules(),i.initStore(),i.params.init&&(a.cordova&&i.params.initOnDeviceReady?Gc(u).on("deviceready",(function(){i.init()})):i.init()),i||np(n)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,rp(t,n);var a,s,o,i=r.prototype;return i.mount=function(e){var t=this,n=wl(),r=bl(),a=Gc(e||t.params.el).eq(0);t.$el=a,t.$el&&t.$el[0]&&(t.el=t.$el[0],t.el.f7=t,t.rtl="rtl"===a.css("direction"));var s="(prefers-color-scheme: dark)",o="(prefers-color-scheme: light)";t.mq={},n.matchMedia&&(t.mq.dark=n.matchMedia(s),t.mq.light=n.matchMedia(o)),t.colorSchemeListener=function(e){var n=e.matches,a=e.media;if(n){var i=r.querySelector("html");a===s?(i.classList.add("theme-dark"),t.darkTheme=!0,t.emit("darkThemeChange",!0)):a===o&&(i.classList.remove("theme-dark"),t.darkTheme=!1,t.emit("darkThemeChange",!1))}},t.emit("mount")},i.initStore=function(){var e=this;void 0!==e.params.store&&e.params.store.__store?e.store=e.params.store:e.store=e.createStore(e.params.store)},i.enableAutoDarkTheme=function(){var e=wl(),t=bl();if(e.matchMedia){var n=this,r=t.querySelector("html");n.mq.dark&&n.mq.light&&(n.mq.dark.addListener(n.colorSchemeListener),n.mq.light.addListener(n.colorSchemeListener)),n.mq.dark&&n.mq.dark.matches?(r.classList.add("theme-dark"),n.darkTheme=!0,n.emit("darkThemeChange",!0)):n.mq.light&&n.mq.light.matches&&(r.classList.remove("theme-dark"),n.darkTheme=!1,n.emit("darkThemeChange",!1))}},i.disableAutoDarkTheme=function(){if(wl().matchMedia){var e=this;e.mq.dark&&e.mq.dark.removeListener(e.colorSchemeListener),e.mq.light&&e.mq.light.removeListener(e.colorSchemeListener)}},i.initAppComponent=function(e){var t=this;t.router.componentLoader(t.params.component,t.params.componentUrl,{componentOptions:{el:t.$el[0]}},(function(n){t.$el=Gc(n),t.$el[0].f7=t,t.$elComponent=n.f7Component,t.el=t.$el[0],e&&e()}),(function(){}))},i.init=function(e){var t=this;t.mount(e);var n=function(){if(!t.initialized){t.$el.addClass("framework7-initializing"),t.rtl&&Gc("html").attr("dir","rtl"),t.params.autoDarkTheme&&t.enableAutoDarkTheme();var e=wl();e.addEventListener("offline",(function(){t.online=!1,t.emit("offline"),t.emit("connection",!1)})),e.addEventListener("online",(function(){t.online=!0,t.emit("online"),t.emit("connection",!0)})),t.$el.addClass("framework7-root"),Gc("html").removeClass("ios md aurora").addClass(t.theme);var n=t.device;t.params.iosTranslucentBars&&"ios"===t.theme&&n.ios&&Gc("html").addClass("ios-translucent-bars"),t.params.iosTranslucentModals&&"ios"===t.theme&&n.ios&&Gc("html").addClass("ios-translucent-modals"),Rl((function(){t.$el.removeClass("framework7-initializing")})),t.initialized=!0,t.emit("init")}};return t.params.component||t.params.componentUrl?t.initAppComponent((function(){n()})):n(),t},i.loadModule=function(){return r.loadModule.apply(r,arguments)},i.loadModules=function(){return r.loadModules.apply(r,arguments)},i.getVnodeHooks=function(e,t){var n=this;return n.vnodeHooks&&n.vnodeHooks[e]&&n.vnodeHooks[e][t]||[]},a=r,o=[{key:"Dom7",get:function(){return Gc}},{key:"$",get:function(){return Gc}},{key:"device",get:function(){return Zl()}},{key:"support",get:function(){return Jl()}},{key:"Class",get:function(){return au}},{key:"Events",get:function(){return eu}}],(s=[{key:"$",get:function(){return Gc}}])&&tp(a.prototype,s),o&&tp(a,o),r}(au);ap.ModalMethods=Zc,ap.ConstructorMethods=Yc,ap.loadModule=ep,ap.loadModules=function(e){return Promise.all(e.map((function(e){return ap.loadModule(e)})))};var sp=ap,op={name:"device",static:{getDevice:Zl},on:{init:function(){var e=bl(),t=Zl(),n=[],r=e.querySelector("html"),a=e.querySelector('meta[name="apple-mobile-web-app-status-bar-style"]');r&&(t.standalone&&t.ios&&a&&"black-translucent"===a.content&&n.push("device-full-viewport"),n.push("device-pixel-ratio-"+Math.floor(t.pixelRatio)),t.os&&!t.desktop?n.push("device-"+t.os):t.desktop&&(n.push("device-desktop"),t.os&&n.push("device-"+t.os)),(t.cordova||t.phonegap)&&n.push("device-cordova"),t.capacitor&&n.push("device-capacitor"),n.forEach((function(e){r.classList.add(e)})))}}},ip={name:"support",static:{getSupport:Jl}},lp={name:"utils",proto:{utils:e},static:{utils:e}},up={name:"resize",create:function(){var e=this;e.getSize=function(){if(!e.el)return{width:0,height:0,left:0,top:0};var t=e.$el.offset(),n=[e.el.offsetWidth,e.el.offsetHeight,t.left,t.top],r=n[0],a=n[1],s=n[2],o=n[3];return e.width=r,e.height=a,e.left=s,e.top=o,{width:r,height:a,left:s,top:o}}},on:{init:function(){var e=this,t=wl();e.getSize(),t.addEventListener("resize",(function(){e.emit("resize")}),!1),t.addEventListener("orientationchange",(function(){e.emit("orientationchange")}))},orientationchange:function(){var e=bl();Zl().ipad&&(e.body.scrollLeft=0,setTimeout((function(){e.body.scrollLeft=0}),0))},resize:function(){this.getSize()}}};function cp(e){var t="function"==typeof Map?new Map:void 0;return cp=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return pp(e,arguments,fp(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),hp(r,e)},cp(e)}function pp(e,t,n){return pp=dp()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&hp(a,n.prototype),a},pp.apply(null,arguments)}function dp(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function hp(e,t){return hp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},hp(e,t)}function fp(e){return fp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fp(e)}var mp={},gp=0,vp=function(e){Object.assign(this,e)},bp=function(e){var t,n;function r(t){var n;return n=e.call(this)||this,Object.assign(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),t),n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,hp(t,n),r}(cp(Error)),yp=function(e){return new Promise((function(t,n){var r=wl(),a=bl(),s=Vl({},mp);"beforeCreate beforeOpen beforeSend error complete success statusCode".split(" ").forEach((function(e){delete s[e]}));var o=Vl({url:r.location.toString(),method:"GET",data:!1,async:!0,cache:!0,user:"",password:"",headers:{},xhrFields:{},statusCode:{},processData:!0,dataType:"text",contentType:"application/x-www-form-urlencoded",timeout:0},s),i=Vl({},o,e);if(e.abortController&&(i.abortController=e.abortController),i.abortController&&i.abortController.canceled)n(new bp({options:i,status:"canceled",message:"canceled"}));else if(!1!==S("beforeCreate",i)){i.type&&(i.method=i.type);var l,u=i.url.indexOf("?")>=0?"&":"?",c=i.method.toUpperCase();if(("GET"===c||"HEAD"===c||"OPTIONS"===c||"DELETE"===c)&&i.data)(l="string"==typeof i.data?i.data.indexOf("?")>=0?i.data.split("?")[1]:i.data:Bl(i.data)).length&&(i.url+=u+l,"?"===u&&(u="&"));if("json"===i.dataType&&i.url.indexOf("callback=")>=0){var p,d="f7jsonp_"+(Date.now()+(gp+=1)),h=i.url.split("callback="),f=h[0]+"callback="+d;if(h[1].indexOf("&")>=0){var m=h[1].split("&").filter((function(e){return e.indexOf("=")>0})).join("&");m.length>0&&(f+="&"+m)}var g=a.createElement("script");return g.type="text/javascript",g.onerror=function(){clearTimeout(p),S("error",null,"scripterror","scripterror"),n(new bp({options:i,status:"scripterror",message:"scripterror"})),S("complete",null,"scripterror")},g.src=f,r[d]=function(e){clearTimeout(p),S("success",e),g.parentNode.removeChild(g),g=null,delete r[d],t(new vp({options:i,data:e}))},a.querySelector("head").appendChild(g),void(i.timeout>0&&(p=setTimeout((function(){g.parentNode.removeChild(g),g=null,S("error",null,"timeout","timeout"),n(new bp({options:i,status:"timeout",message:"timeout"}))}),i.timeout)))}"GET"!==c&&"HEAD"!==c&&"OPTIONS"!==c&&"DELETE"!==c||!1===i.cache&&(i.url+=u+"_nocache"+Date.now());var v=new XMLHttpRequest;if(i.abortController){var b=!1;i.abortController.onAbort=function(){b||(b=!0,v.abort(),n(new bp({options:i,xhr:v,status:"canceled",message:"canceled"})))}}if(v.requestUrl=i.url,v.requestParameters=i,!1!==S("beforeOpen",v,i)){v.open(c,i.url,i.async,i.user,i.password);var y=null;if(("POST"===c||"PUT"===c||"PATCH"===c)&&i.data)if(i.processData)if([ArrayBuffer,Blob,Document,FormData].indexOf(i.data.constructor)>=0)y=i.data;else{var w="---------------------------"+Date.now().toString(16);"multipart/form-data"===i.contentType?v.setRequestHeader("Content-Type","multipart/form-data; boundary="+w):v.setRequestHeader("Content-Type",i.contentType),y="";var x=Bl(i.data);if("multipart/form-data"===i.contentType){x=x.split("&");for(var k=[],C=0;C<x.length;C+=1)k.push('Content-Disposition: form-data; name="'+x[C].split("=")[0]+'"\r\n\r\n'+x[C].split("=")[1]+"\r\n");y="--"+w+"\r\n"+k.join("--"+w+"\r\n")+"--"+w+"--\r\n"}else y="application/json"===i.contentType?JSON.stringify(i.data):x}else y=i.data,v.setRequestHeader("Content-Type",i.contentType);"json"!==i.dataType||i.headers&&i.headers.Accept||v.setRequestHeader("Accept","application/json"),i.headers&&Object.keys(i.headers).forEach((function(e){void 0!==i.headers[e]&&v.setRequestHeader(e,i.headers[e])})),void 0===i.crossDomain&&(i.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(i.url)&&RegExp.$2!==r.location.host),i.crossDomain||v.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.xhrFields&&Vl(v,i.xhrFields),v.onload=function(){var e;if(v.status>=200&&v.status<300||0===v.status)if("json"===i.dataType){var r;try{e=JSON.parse(v.responseText)}catch(e){r=!0}r?(S("error",v,"parseerror","parseerror"),n(new bp({options:i,xhr:v,status:"parseerror",message:"parseerror"}))):(S("success",e,v.status,v),t(new vp({options:i,data:e,status:v.status,xhr:v})))}else S("success",e="text"===v.responseType||""===v.responseType?v.responseText:v.response,v.status,v),t(new vp({options:i,data:e,status:v.status,xhr:v}));else S("error",v,v.status,v.statusText),n(new bp({options:i,xhr:v,status:v.status,message:v.statusText}));i.statusCode&&(mp.statusCode&&mp.statusCode[v.status]&&mp.statusCode[v.status](v),i.statusCode[v.status]&&i.statusCode[v.status](v)),S("complete",v,v.status)},v.onerror=function(){S("error",v,v.status,v.status),n(new bp({options:i,xhr:v,status:v.status,message:v.statusText})),S("complete",v,"error")},i.timeout>0&&(v.timeout=i.timeout,v.ontimeout=function(){S("error",v,"timeout","timeout"),n(new bp({options:i,xhr:v,status:"timeout",message:"timeout"})),S("complete",v,"timeout")}),!1!==S("beforeSend",v,i)?v.send(y):n(new bp({options:i,xhr:v,status:"canceled",message:"canceled"}))}else n(new bp({options:i,xhr:v,status:"canceled",message:"canceled"}))}else n(new bp({options:i,status:"canceled",message:"canceled"}));function S(e){for(var t,n,r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return mp[e]&&(t=mp[e].apply(mp,a)),i[e]&&(n=i[e].apply(i,a)),"boolean"!=typeof t&&(t=!0),"boolean"!=typeof n&&(n=!0),(!i.abortController||!i.abortController.canceled||"beforeCreate"!==e&&"beforeOpen"!==e&&"beforeSend"!==e)&&(t&&n)}}))};function wp(e){for(var t=[],n=t[0],r=t[1],a=t[2],s=t[3],o=t[4],i=arguments.length,l=new Array(i>1?i-1:0),u=1;u<i;u++)l[u-1]=arguments[u];"function"==typeof l[1]?(n=l[0],a=l[1],s=l[2],o=l[3]):(n=l[0],r=l[1],a=l[2],s=l[3],o=l[4]),[a,s].forEach((function(e){"string"==typeof e&&(o=e,e===a?a=void 0:s=void 0)}));var c={url:n,method:"post"===e||"postJSON"===e?"POST":"GET",data:r,success:a,error:s,dataType:o=o||("json"===e||"postJSON"===e?"json":void 0)};return"postJSON"===e&&Vl(c,{contentType:"application/json",processData:!1,crossDomain:!0,data:"string"==typeof r?r:JSON.stringify(r)}),yp(c)}Object.assign(yp,{get:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return wp.apply(void 0,["get"].concat(t))},post:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return wp.apply(void 0,["post"].concat(t))},json:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return wp.apply(void 0,["json"].concat(t))},getJSON:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return wp.apply(void 0,["json"].concat(t))},postJSON:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return wp.apply(void 0,["postJSON"].concat(t))}}),yp.abortController=function(){var e={canceled:!1,onAbort:null,abort:function(){e.canceled=!0,e.onAbort&&e.onAbort()}};return e},yp.setup=function(e){e.type&&!e.method&&Vl(e,{method:e.type}),Vl(mp,e)};var xp={name:"request",proto:{request:yp},static:{request:yp}};var kp={name:"touch",params:{touch:{touchClicksDistanceThreshold:5,disableContextMenu:!1,tapHold:!1,tapHoldDelay:750,tapHoldPreventClicks:!0,activeState:!0,activeStateElements:"a, button, label, span, .actions-button, .stepper-button, .stepper-button-plus, .stepper-button-minus, .card-expandable, .menu-item, .link, .item-link, .accordion-item-toggle",activeStateOnMouseMove:!1,mdTouchRipple:!0,iosTouchRipple:!1,auroraTouchRipple:!1,touchRippleElements:".ripple, .link, .item-link, .list-button, .links-list a, .button, button, .input-clear-button, .dialog-button, .tab-link, .item-radio, .item-checkbox, .actions-button, .searchbar-disable-button, .fab a, .checkbox, .radio, .data-table .sortable-cell:not(.input-cell), .notification-close-button, .stepper-button, .stepper-button-minus, .stepper-button-plus, .menu-item-content, .list.accordion-list .accordion-item-toggle",touchRippleInsetElements:".ripple-inset, .icon-only, .searchbar-disable-button, .input-clear-button, .notification-close-button, .md .navbar .link.back"}},create:function(){var e=Jl();Vl(this,{touchEvents:{start:e.touch?"touchstart":e.pointerEvents?"pointerdown":"mousedown",move:e.touch?"touchmove":e.pointerEvents?"pointermove":"mousemove",end:e.touch?"touchend":e.pointerEvents?"pointerup":"mouseup"}})},on:{init:function(){var e,t,n,r,a,s,o,i,l,u,c,p,d,h=this,f=Zl(),m=Jl(),g=wl(),v=bl(),b=h.params.touch,y=b[h.theme+"TouchRipple"];function w(e){var t,n=Gc(e),r=n.parents(b.activeStateElements);if(n.closest(".no-active-state").length)return null;if(n.is(b.activeStateElements)&&(t=n),r.length>0&&(t=t?t.add(r):r),t&&t.length>1){for(var a,s=[],o=0;o<t.length;o+=1)a||(s.push(t[o]),(t.eq(o).hasClass("prevent-active-state-propagation")||t.eq(o).hasClass("no-active-state-propagation"))&&(a=!0));t=Gc(s)}return t||n}function x(e){return e.parents(".page-content").length>0}function k(){i&&i.addClass("active-state")}function C(){i&&(i.removeClass("active-state"),i=null)}function S(e,t,n){e&&(u=h.touchRipple.create(h,e,t,n))}function E(){u&&(u.remove(),u=void 0,c=void 0)}function T(n){(c=function(e){var t=b.touchRippleElements,n=Gc(e);if(n.is(t))return!n.hasClass("no-ripple")&&n;if(n.parents(t).length>0){var r=n.parents(t).eq(0);return!r.hasClass("no-ripple")&&r}return!1}(n),c&&0!==c.length)?x(c)?(clearTimeout(p),p=setTimeout((function(){E(),S(c,e,t)}),80)):(E(),S(c,e,t)):c=void 0}function $(){clearTimeout(p),E()}function I(){u||!c||r?E():(clearTimeout(p),S(c,e,t),setTimeout(E,0))}function N(){Gc(".active-state").removeClass("active-state"),y&&I()}f.ios&&f.webView&&g.addEventListener("touchstart",(function(){}));var O=!1,A=null,M=".dialog-button, .actions-button",_=!1,R=null;function P(e,t){h.emit({events:e,data:[t]})}function D(e){P("touchstart touchstart:active",e)}function L(e){P("touchmove touchmove:active",e)}function B(e){P("touchend touchend:active",e)}function F(e){P("touchstart:passive",e)}function z(e){P("touchmove:passive",e)}function V(e){P("touchend:passive",e)}var W=!!m.passiveListener&&{passive:!0},H=!m.passiveListener||{passive:!0,capture:!0},j=!!m.passiveListener&&{passive:!1},U=!m.passiveListener||{passive:!1,capture:!0};v.addEventListener("click",(function(e){P("click",e)}),!0),m.passiveListener?(v.addEventListener(h.touchEvents.start,D,U),v.addEventListener(h.touchEvents.move,L,j),v.addEventListener(h.touchEvents.end,B,j),v.addEventListener(h.touchEvents.start,F,H),v.addEventListener(h.touchEvents.move,z,W),v.addEventListener(h.touchEvents.end,V,W)):(v.addEventListener(h.touchEvents.start,(function(e){D(e),F(e)}),!0),v.addEventListener(h.touchEvents.move,(function(e){L(e),z(e)}),!1),v.addEventListener(h.touchEvents.end,(function(e){B(e),V(e)}),!1)),m.touch?(h.on("click",(function(e){var t=e&&e.detail&&"f7Overswipe"===e.detail,r=e&&e.detail&&"f7Segmented"===e.detail,i=e&&e.detail&&"f7TouchMoveActivable"===e.detail,l=o;return n&&e.target!==n?l=!(t||r||i):i&&(l=!1),b.tapHold&&b.tapHoldPreventClicks&&a&&(l=!0),l&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault()),b.tapHold&&(s=setTimeout((function(){a=!1}),f.ios||f.androidChrome?100:400)),o=!1,n=null,!l})),h.on("touchstart",(function(u){return r=!1,a=!1,o=!1,d=void 0,u.targetTouches.length>1?(i&&C(),!0):(u.touches.length>1&&i&&C(),b.tapHold&&(s&&clearTimeout(s),s=setTimeout((function(){u&&u.touches&&u.touches.length>1||(a=!0,u.preventDefault(),o=!0,Gc(u.target).trigger("taphold",u),h.emit("taphold",u))}),b.tapHoldDelay)),n=u.target,e=u.targetTouches[0].pageX,t=u.targetTouches[0].pageY,O=u.target.closest(".segmented-strong .button-active, .segmented-strong .tab-link-active"),_="ios"===h.theme&&u.target.closest(M),O&&(A=O.closest(".segmented-strong")),b.activeState&&((i=w(n))&&!x(i)?k():i&&(l=setTimeout(k,80))),y&&T(n),!0)})),h.on("touchmove",(function(a){var u,c,p=!0;"touchmove"===a.type&&(u=a.targetTouches[0],c=b.touchClicksDistanceThreshold);var h=a.targetTouches[0].pageX,f=a.targetTouches[0].pageY;if(void 0===d&&(d=!!(d||Math.abs(f-t)>Math.abs(h-e))),(_||!d&&O&&A)&&a.cancelable&&a.preventDefault(),!d&&O&&A){var m=v.elementFromPoint(a.targetTouches[0].clientX,a.targetTouches[0].clientY).closest(".segmented-strong .button:not(.button-active):not(.tab-link-active)");m&&A.contains(m)&&(Gc(m).trigger("click","f7Segmented"),n=m)}if(c&&u){var g=u.pageX,x=u.pageY;(Math.abs(g-e)>c||Math.abs(x-t)>c)&&(r=!0)}else r=!0;if(r){if(o=!0,_){var S=v.elementFromPoint(a.targetTouches[0].clientX,a.targetTouches[0].clientY);(R=S.closest(M))&&i&&i[0]===R?p=!1:R&&setTimeout((function(){i=w(R),k()}))}b.tapHold&&clearTimeout(s),b.activeState&&p&&(clearTimeout(l),C()),y&&$()}})),h.on("touchend",(function(e){return d=void 0,O=!1,A=null,_=!1,clearTimeout(l),clearTimeout(s),R&&(Gc(R).trigger("click","f7TouchMoveActivable"),R=null),v.activeElement===e.target?(b.activeState&&C(),y&&I(),!0):(b.activeState&&(k(),setTimeout(C,0)),y&&I(),!(b.tapHoldPreventClicks&&a||o)||(e.cancelable&&e.preventDefault(),o=!0,!1))})),v.addEventListener("touchcancel",(function(){n=null,clearTimeout(l),clearTimeout(s),b.activeState&&C(),y&&I()}),{passive:!0})):b.activeState&&(h.on("touchstart",(function(n){var r=w(n.target);r&&(r.addClass("active-state"),"which"in n&&3===n.which&&setTimeout((function(){Gc(".active-state").removeClass("active-state")}),0)),y&&(e=n.pageX,t=n.pageY,T(n.target,n.pageX,n.pageY))})),h.on("touchmove",(function(){b.activeStateOnMouseMove||Gc(".active-state").removeClass("active-state"),y&&$()})),h.on("touchend",N),v.addEventListener("pointercancel",N,{passive:!0})),v.addEventListener("contextmenu",(function(e){b.disableContextMenu&&(f.ios||f.android||f.cordova||g.Capacitor&&g.Capacitor.isNative)&&e.preventDefault(),y&&(i&&C(),I())}))}}};function Cp(e,t){void 0===t&&(t={});for(var n=function(e){for(var t=[],n=0;n<e.length;){var r=e[n];if("*"!==r&&"+"!==r&&"?"!==r)if("\\"!==r)if("{"!==r)if("}"!==r)if(":"!==r)if("("!==r)t.push({type:"CHAR",index:n,value:e[n++]});else{var a=1,s="";if("?"===e[i=n+1])throw new TypeError('Pattern cannot start with "?" at '+i);for(;i<e.length;)if("\\"!==e[i]){if(")"===e[i]){if(0==--a){i++;break}}else if("("===e[i]&&(a++,"?"!==e[i+1]))throw new TypeError("Capturing groups are not allowed at "+i);s+=e[i++]}else s+=e[i++]+e[i++];if(a)throw new TypeError("Unbalanced pattern at "+n);if(!s)throw new TypeError("Missing pattern at "+n);t.push({type:"PATTERN",index:n,value:s}),n=i}else{for(var o="",i=n+1;i<e.length;){var l=e.charCodeAt(i);if(!(l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||95===l))break;o+=e[i++]}if(!o)throw new TypeError("Missing parameter name at "+n);t.push({type:"NAME",index:n,value:o}),n=i}else t.push({type:"CLOSE",index:n,value:e[n++]});else t.push({type:"OPEN",index:n,value:e[n++]});else t.push({type:"ESCAPED_CHAR",index:n++,value:e[n++]});else t.push({type:"MODIFIER",index:n,value:e[n++]})}return t.push({type:"END",index:n,value:""}),t}(e),r=t.prefixes,a=void 0===r?"./":r,s="[^"+Ep(t.delimiter||"/#?")+"]+?",o=[],i=0,l=0,u="",c=function(e){if(l<n.length&&n[l].type===e)return n[l++].value},p=function(e){var t=c(e);if(void 0!==t)return t;var r=n[l],a=r.type,s=r.index;throw new TypeError("Unexpected "+a+" at "+s+", expected "+e)},d=function(){for(var e,t="";e=c("CHAR")||c("ESCAPED_CHAR");)t+=e;return t};l<n.length;){var h=c("CHAR"),f=c("NAME"),m=c("PATTERN");if(f||m){var g=h||"";-1===a.indexOf(g)&&(u+=g,g=""),u&&(o.push(u),u=""),o.push({name:f||i++,prefix:g,suffix:"",pattern:m||s,modifier:c("MODIFIER")||""})}else{var v=h||c("ESCAPED_CHAR");if(v)u+=v;else if(u&&(o.push(u),u=""),c("OPEN")){g=d();var b=c("NAME")||"",y=c("PATTERN")||"",w=d();p("CLOSE"),o.push({name:b||(y?i++:""),pattern:b&&!y?s:y,prefix:g,suffix:w,modifier:c("MODIFIER")||""})}else p("END")}}return o}function Sp(e,t){return function(e,t){void 0===t&&(t={});var n=Tp(t),r=t.encode,a=void 0===r?function(e){return e}:r,s=t.validate,o=void 0===s||s,i=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:"+e.pattern+")$",n)}));return function(t){for(var n="",r=0;r<e.length;r++){var s=e[r];if("string"!=typeof s){var l=t?t[s.name]:void 0,u="?"===s.modifier||"*"===s.modifier,c="*"===s.modifier||"+"===s.modifier;if(Array.isArray(l)){if(!c)throw new TypeError('Expected "'+s.name+'" to not repeat, but got an array');if(0===l.length){if(u)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var p=0;p<l.length;p++){var d=a(l[p],s);if(o&&!i[r].test(d))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'", but got "'+d+'"');n+=s.prefix+d+s.suffix}}else if("string"!=typeof l&&"number"!=typeof l){if(!u){var h=c?"an array":"a string";throw new TypeError('Expected "'+s.name+'" to be '+h)}}else{d=a(String(l),s);if(o&&!i[r].test(d))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but got "'+d+'"');n+=s.prefix+d+s.suffix}}else n+=s}return n}}(Cp(e,t),t)}function Ep(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Tp(e){return e&&e.sensitive?"":"i"}function $p(e,t,n){return function(e,t,n){void 0===n&&(n={});for(var r=n.strict,a=void 0!==r&&r,s=n.start,o=void 0===s||s,i=n.end,l=void 0===i||i,u=n.encode,c=void 0===u?function(e){return e}:u,p="["+Ep(n.endsWith||"")+"]|$",d="["+Ep(n.delimiter||"/#?")+"]",h=o?"^":"",f=0,m=e;f<m.length;f++){var g=m[f];if("string"==typeof g)h+=Ep(c(g));else{var v=Ep(c(g.prefix)),b=Ep(c(g.suffix));if(g.pattern)if(t&&t.push(g),v||b)if("+"===g.modifier||"*"===g.modifier){var y="*"===g.modifier?"?":"";h+="(?:"+v+"((?:"+g.pattern+")(?:"+b+v+"(?:"+g.pattern+"))*)"+b+")"+y}else h+="(?:"+v+"("+g.pattern+")"+b+")"+g.modifier;else h+="("+g.pattern+")"+g.modifier;else h+="(?:"+v+b+")"+g.modifier}}if(l)a||(h+=d+"?"),h+=n.endsWith?"(?="+p+")":"$";else{var w=e[e.length-1],x="string"==typeof w?d.indexOf(w[w.length-1])>-1:void 0===w;a||(h+="(?:"+d+"(?="+p+"))?"),x||(h+="(?="+d+"|"+p+")")}return new RegExp(h,Tp(n))}(Cp(e,n),t,n)}function Ip(e,t,n){return e instanceof RegExp?function(e,t){if(!t)return e;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,r=0,a=n.exec(e.source);a;)t.push({name:a[1]||r++,prefix:"",suffix:"",modifier:"",pattern:""}),a=n.exec(e.source);return e}(e,t):Array.isArray(e)?function(e,t,n){var r=e.map((function(e){return Ip(e,t,n).source}));return new RegExp("(?:"+r.join("|")+")",Tp(n))}(e,t,n):$p(e,t,n)}var Np={queue:[],clearQueue:function(){0!==Np.queue.length&&Np.queue.shift()()},routerQueue:[],clearRouterQueue:function(){if(0!==Np.routerQueue.length){var e=Np.routerQueue.pop(),t=e.router,n=e.stateUrl,r=e.action,a=t.params.animate;!1===t.params.browserHistoryAnimate&&(a=!1),"back"===r&&t.back({animate:a,browserHistory:!1}),"load"===r&&t.navigate(n,{animate:a,browserHistory:!1})}},handle:function(e){if(!Np.blockPopstate){var t=e.state;Np.previousState=Np.state,Np.state=t,Np.allowChange=!0,Np.clearQueue(),(t=Np.state)||(t={}),this.views.forEach((function(e){var n=e.router,r=t[e.id];if(!r&&e.params.browserHistory&&(r={url:e.router.history[0]}),r){var a=r.url||void 0,s=n.params.animate;!1===n.params.browserHistoryAnimate&&(s=!1),a!==n.url&&(n.history.indexOf(a)>=0?n.allowPageChange?n.back({animate:s,browserHistory:!1}):Np.routerQueue.push({action:"back",router:n}):n.allowPageChange?n.navigate(a,{animate:s,browserHistory:!1}):Np.routerQueue.unshift({action:"load",stateUrl:a,router:n}))}}))}},initViewState:function(e,t){var n,r=wl(),a=Vl({},Np.state||{},((n={})[e]=t,n));Np.state=a,r.history.replaceState(a,"")},push:function(e,t,n){var r,a=wl();if("#!/"===n.substr(-3)&&(n=n.replace("#!/","")),Np.allowChange){Np.previousState=Np.state;var s=Vl({},Np.previousState||{},((r={})[e]=t,r));Np.state=s,a.history.pushState(s,"",n)}else Np.queue.push((function(){Np.push(e,t,n)}))},replace:function(e,t,n){var r,a=wl();if("#!/"===n.substr(-3)&&(n=n.replace("#!/","")),Np.allowChange){Np.previousState=Np.state;var s=Vl({},Np.previousState||{},((r={})[e]=t,r));Np.state=s,a.history.replaceState(s,"",n)}else Np.queue.push((function(){Np.replace(e,t,n)}))},go:function(e){var t=wl();Np.allowChange=!1,t.history.go(e)},back:function(){var e=wl();Np.allowChange=!1,e.history.back()},allowChange:!0,previousState:{},state:{},blockPopstate:!0,init:function(e){var t=wl(),n=bl();Np.state=t.history.state,Gc(t).on("load",(function(){setTimeout((function(){Np.blockPopstate=!1}),0)})),n.readyState&&"complete"===n.readyState&&(Np.blockPopstate=!1),Gc(t).on("popstate",Np.handle.bind(e))}},Op=Np;var Ap=function(e){var t,n,r,a,s,o,i,l,u,c=e,p=c.$el,d=c.$navbarsEl,h=c.app,f=c.params,m=Jl(),g=Zl(),v=!1,b=!1,y={},w=[],x=[],k=!0,C=[],S=[],E=f[h.theme+"SwipeBackAnimateShadow"],T=f[h.theme+"SwipeBackAnimateOpacity"],$=f[h.theme+"SwipeBackActiveArea"],I=f[h.theme+"SwipeBackThreshold"],N=h.rtl?"right center":"left center",O=h.rtl?"calc(100% - var(--f7-navbar-large-title-padding-left) - var(--f7-safe-area-left)) center":"calc(var(--f7-navbar-large-title-padding-left) + var(--f7-safe-area-left)) center";function A(e){var t=void 0===e?{}:e,n=t.progress,r=t.reset,a=t.transition,s=t.reflow,o=["overflow","transform","transform-origin","opacity"];if(!0===a||!1===a)for(var i=0;i<l.length;i+=1){var u=l[i];u&&u.el&&(!0===a&&u.el.classList.add("navbar-page-transitioning"),!1===a&&u.el.classList.remove("navbar-page-transitioning"))}s&&l.length&&l[0]&&l[0].el&&(l[0].el._clientLeft=l[0].el.clientLeft);for(var c=0;c<l.length;c+=1){var p=l[c];if(p&&p.el){!p.className||p.classNameSet||r||(p.el.classList.add(p.className),p.classNameSet=!0),p.className&&r&&p.el.classList.remove(p.className);for(var d=0;d<o.length;d+=1){var h=o[d];p[h]&&(r?p.el.style[h]="":"function"==typeof p[h]?p.el.style[h]=p[h](n):p.el.style[h]=p[h])}}}}function M(e){var n=f[h.theme+"SwipeBack"];!k||!n||v||h.swipeout&&h.swipeout.el||!c.allowPageChange||Gc(e.target).closest(".range-slider, .calendar-months").length>0||Gc(e.target).closest(".page-master, .page-master-detail").length>0&&f.masterDetailBreakpoint>0&&h.width>=f.masterDetailBreakpoint||(b=!1,v=!0,t=void 0,y.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,y.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,a=Pl(),s=c.dynamicNavbar)}function _(e){if(v){var a="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,u="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if(void 0===t&&(t=!!(t||Math.abs(u-y.y)>Math.abs(a-y.x))||a<y.x&&!h.rtl||a>y.x&&h.rtl),t||e.f7PreventSwipeBack||h.preventSwipeBack)v=!1;else{if(!b){var m=!1,k=Gc(e.target),M=k.closest(".swipeout");M.length>0&&(!h.rtl&&M.find(".swipeout-actions-left").length>0&&(m=!0),h.rtl&&M.find(".swipeout-actions-right").length>0&&(m=!0)),((w=k.closest(".page")).hasClass("no-swipeback")||k.closest(".no-swipeback, .card-opened").length>0)&&(m=!0),(x=p.find(".page-previous:not(.stacked)")).length>1&&(x=x.eq(x.length-1));y.x,p.offset().left;if(n=p.width(),(h.rtl?y.x<p.offset().left-p[0].scrollLeft+(n-$):y.x-p.offset().left>$)&&(m=!0),0!==x.length&&0!==w.length||(m=!0),m)return void(v=!1);E&&0===(o=w.find(".page-shadow-effect")).length&&(o=Gc('<div class="page-shadow-effect"></div>'),w.append(o)),T&&0===(i=x.find(".page-opacity-effect")).length&&(i=Gc('<div class="page-opacity-effect"></div>'),x.append(i)),s&&(C=d.find(".navbar-current:not(.stacked)"),(S=d.find(".navbar-previous:not(.stacked)")).length>1&&(S=S.eq(S.length-1)),l=function(){var e,t,n=[],r=h.rtl?-1:1,a=C.hasClass("navbar-transparent")&&!C.hasClass("navbar-large")&&!C.hasClass("navbar-transparent-visible"),s=C.hasClass("navbar-large"),o=C.hasClass("navbar-large-collapsed"),i=C.hasClass("navbar-large-transparent")||C.hasClass("navbar-large")&&C.hasClass("navbar-transparent"),l=S.hasClass("navbar-transparent")&&!S.hasClass("navbar-large")&&!S.hasClass("navbar-transparent-visible"),u=S.hasClass("navbar-large"),c=S.hasClass("navbar-large-collapsed"),p=S.hasClass("navbar-large-transparent")||S.hasClass("navbar-large")&&S.hasClass("navbar-transparent"),d=s&&!o,m=u&&!c,v=C.find(".left, .title, .right, .subnavbar, .fading, .title-large, .navbar-bg"),b=S.find(".left, .title, .right, .subnavbar, .fading, .title-large, .navbar-bg");return f.iosAnimateNavbarBackIcon&&(e=C.hasClass("sliding")||C.find(".navbar-inner.sliding").length?C.find(".left").find(".back .icon + span").eq(0):C.find(".left.sliding").find(".back .icon + span").eq(0),t=S.hasClass("sliding")||S.find(".navbar-inner.sliding").length?S.find(".left").find(".back .icon + span").eq(0):S.find(".left.sliding").find(".back .icon + span").eq(0),e.length&&b.each((function(t){Gc(t).hasClass("title")&&(t.f7NavbarLeftOffset+=e.prev(".icon")[0].offsetWidth)}))),v.each((function(t){var l=Gc(t),u=l.hasClass("subnavbar"),c=l.hasClass("left"),p=l.hasClass("title"),h=l.hasClass("navbar-bg");if((!p&&!h||!a)&&(d||!l.hasClass(".title-large"))){var v={el:t};if(d){if(p)return;if(l.hasClass("title-large"))return n.indexOf(v)<0&&n.push(v),v.overflow="visible",void l.find(".title-large-text").each((function(e){n.push({el:e,transform:function(e){return"translateX("+100*e*r+"%)"}})}))}if(m&&(d||l.hasClass("title-large")&&(n.indexOf(v)<0&&n.push(v),v.opacity=0),c))return n.indexOf(v)<0&&n.push(v),v.opacity=function(e){return 1-Math.pow(e,.33)},void l.find(".back span").each((function(e){n.push({el:e,"transform-origin":N,transform:function(e){return"translateX(calc("+e+" * (var(--f7-navbarTitleLargeOffset) - var(--f7-navbarLeftTextOffset)))) translateY(calc("+e+" * (var(--f7-navbar-large-title-height) - var(--f7-navbar-large-title-padding-vertical) / 2))) scale("+(1+1*e)+")"}})}));if(h)return n.indexOf(v)<0&&n.push(v),d||m||(o?(i&&(v.className="ios-swipeback-navbar-bg-large"),v.transform=function(e){return"translateX("+100*e*r+"%) translateY(calc(-1 * var(--f7-navbar-large-title-height)))"}):v.transform=function(e){return"translateX("+100*e*r+"%)"}),!d&&m&&(v.className="ios-swipeback-navbar-bg-large",v.transform=function(e){return"translateX("+100*e*r+"%) translateY(calc(-1 * "+(1-e)+" * var(--f7-navbar-large-title-height)))"}),d&&m&&(v.transform=function(e){return"translateX("+100*e*r+"%)"}),void(d&&!m&&(v.transform=function(e){return"translateX("+100*e*r+"%) translateY(calc(-"+e+" * var(--f7-navbar-large-title-height)))"}));if(!l.hasClass("title-large")){var b=l.hasClass("sliding")||l.parents(".navbar-inner.sliding").length;if(n.indexOf(v)<0&&n.push(v),(!u||u&&!b)&&(v.opacity=function(e){return 1-Math.pow(e,.33)}),b){var y=v;if(c&&e.length&&f.iosAnimateNavbarBackIcon){var w={el:e[0]};y=w,n.push(w)}y.transform=function(e){var t=e*y.el.f7NavbarRightOffset;return 1===g.pixelRatio&&(t=Math.round(t)),u&&s?"translate3d("+t+"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)":"translate3d("+t+"px,0,0)"}}}}})),b.each((function(e){var a=Gc(e),s=a.hasClass("subnavbar"),o=a.hasClass("left"),i=a.hasClass("title"),h=a.hasClass("navbar-bg");if(!i&&!h||!l){var v={el:e};if(m){if(i)return;if(n.indexOf(v)<0&&n.push(v),a.hasClass("title-large"))return v.opacity=1,v.overflow="visible",void a.find(".title-large-text").each((function(e){n.push({el:e,"transform-origin":O,opacity:function(e){return Math.pow(e,3)},transform:function(e){return"translateX(calc("+(1-e)+" * (var(--f7-navbarLeftTextOffset) - var(--f7-navbarTitleLargeOffset)))) translateY(calc("+(e-1)+" * var(--f7-navbar-large-title-height) + "+(1-e)+" * var(--f7-navbar-large-title-padding-vertical))) scale("+(.5+.5*e)+")"}})}))}if(h)return n.indexOf(v)<0&&n.push(v),d||m||(c?(p&&(v.className="ios-swipeback-navbar-bg-large"),v.transform=function(e){return"translateX("+(100*e-100)*r+"%) translateY(calc(-1 * var(--f7-navbar-large-title-height)))"}):v.transform=function(e){return"translateX("+(100*e-100)*r+"%)"}),!d&&m&&(v.transform=function(e){return"translateX("+(100*e-100)*r+"%) translateY(calc(-1 * "+(1-e)+" * var(--f7-navbar-large-title-height)))"}),d&&!m&&(v.className="ios-swipeback-navbar-bg-large",v.transform=function(e){return"translateX("+(100*e-100)*r+"%) translateY(calc(-"+e+" * var(--f7-navbar-large-title-height)))"}),void(d&&m&&(v.transform=function(e){return"translateX("+(100*e-100)*r+"%)"}));if(!a.hasClass("title-large")){var b=a.hasClass("sliding")||S.children(".navbar-inner.sliding").length;if(n.indexOf(v)<0&&n.push(v),(!s||s&&!b)&&(v.opacity=function(e){return Math.pow(e,3)}),b){var y=v;if(o&&t.length&&f.iosAnimateNavbarBackIcon){var w={el:t[0]};y=w,n.push(w)}y.transform=function(e){var t=y.el.f7NavbarLeftOffset*(1-e);return 1===g.pixelRatio&&(t=Math.round(t)),s&&u?"translate3d("+t+"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)":"translate3d("+t+"px,0,0)"}}}}})),n}()),Gc(".sheet.modal-in").length>0&&h.sheet&&h.sheet.close(Gc(".sheet.modal-in"))}e.f7PreventSwipePanel=!0,b=!0,h.preventSwipePanelBySwipeBack=!0,e.preventDefault();var _=h.rtl?-1:1;(r=(a-y.x-I)*_)<0&&(r=0);var R=Math.min(Math.max(r/n,0),1),P={percentage:R,progress:R,currentPageEl:w[0],previousPageEl:x[0],currentNavbarEl:C[0],previousNavbarEl:S[0]};p.trigger("swipeback:move",P),c.emit("swipebackMove",P);var D=r*_,L=(r/5-n/5)*_;h.rtl?(D=Math.max(D,-n),L=Math.max(L,0)):(D=Math.min(D,n),L=Math.min(L,0)),1===g.pixelRatio&&(D=Math.round(D),L=Math.round(L)),c.swipeBackActive=!0,Gc([w[0],x[0]]).addClass("page-swipeback-active"),w.transform("translate3d("+D+"px,0,0)"),E&&(o[0].style.opacity=1-1*R),"ios"===h.theme&&x.transform("translate3d("+L+"px,0,0)"),T&&(i[0].style.opacity=1-1*R),s&&A({progress:R})}}}function R(){if(h.preventSwipePanelBySwipeBack=!1,!v||!b)return v=!1,void(b=!1);v=!1,b=!1,c.swipeBackActive=!1;var e=Gc([w[0],x[0]]);if(e.removeClass("page-swipeback-active"),0===r)return e.transform(""),o&&o.length>0&&o.remove(),i&&i.length>0&&i.remove(),void(s&&A({reset:!0}));var t=Pl()-a,l=!1;(t<300&&r>10||t>=300&&r>n/2)&&(w.removeClass("page-current").addClass("page-next"+("ios"!==h.theme?" page-next-on-right":"")),x.removeClass("page-previous").addClass("page-current").removeAttr("aria-hidden"),o&&(o[0].style.opacity=""),i&&(i[0].style.opacity=""),s&&(c.setNavbarPosition(C,"next"),c.setNavbarPosition(S,"current",!1)),l=!0),e.addClass("page-transitioning page-transitioning-swipeback"),g.ios&&(w[0]._clientLeft=w[0].clientLeft),e.transform(""),s&&A({progress:l?1:0,transition:!0,reflow:!!g.ios}),k=!1,c.allowPageChange=!1;var u={currentPageEl:w[0],previousPageEl:x[0],currentNavbarEl:C[0],previousNavbarEl:S[0]};l?(c.currentRoute=x[0].f7Page.route,c.currentPage=x[0],c.pageCallback("beforeOut",w,C,"current","next",{route:w[0].f7Page.route,swipeBack:!0}),c.pageCallback("beforeIn",x,S,"previous","current",{route:x[0].f7Page.route,swipeBack:!0},w[0]),p.trigger("swipeback:beforechange",u),c.emit("swipebackBeforeChange",u)):(p.trigger("swipeback:beforereset",u),c.emit("swipebackBeforeReset",u)),w.transitionEnd((function(){e.removeClass("page-transitioning page-transitioning-swipeback"),s&&A({reset:!0,transition:!1}),k=!0,c.allowPageChange=!0,l?(1===c.history.length&&c.history.unshift(c.url),c.history.pop(),c.saveHistory(),f.browserHistory&&Op.back(),c.pageCallback("afterOut",w,C,"current","next",{route:w[0].f7Page.route,swipeBack:!0}),c.pageCallback("afterIn",x,S,"previous","current",{route:x[0].f7Page.route,swipeBack:!0}),f.stackPages&&c.initialPages.indexOf(w[0])>=0?(w.addClass("stacked"),s&&C.addClass("stacked")):(c.pageCallback("beforeRemove",w,C,"next",{swipeBack:!0}),c.removePage(w),s&&c.removeNavbar(C)),p.trigger("swipeback:afterchange",u),c.emit("swipebackAfterChange",u),c.emit("routeChanged",c.currentRoute,c.previousRoute,c),f.preloadPreviousPage&&c.back(c.history[c.history.length-2],{preload:!0})):(p.trigger("swipeback:afterreset",u),c.emit("swipebackAfterReset",u)),o&&o.length>0&&o.remove(),i&&i.length>0&&i.remove()}))}u=!("touchstart"!==h.touchEvents.start||!m.passiveListener)&&{passive:!0,capture:!1},p.on(h.touchEvents.start,M,u),h.on("touchmove:active",_),h.on("touchend:passive",R),c.on("routerDestroy",(function(){var e=!("touchstart"!==h.touchEvents.start||!m.passiveListener)&&{passive:!0,capture:!1};p.off(h.touchEvents.start,M,e),h.off("touchmove:active",_),h.off("touchend:passive",R)}))};function Mp(e,t,n){var r=this,a=t.route.redirect,s="forward"===e?"navigate":"back";if(n.initial&&r.params.browserHistory&&(n.replaceState=!0,n.history=!0),"function"==typeof a){r.allowPageChange=!1;var o=a.call(r,{router:r,to:t,resolve:function(e,t){void 0===t&&(t={}),r.allowPageChange=!0,r[s](e,Vl({},n,t))},reject:function(){r.allowPageChange=!0},direction:e,app:r.app});return o&&"string"==typeof o?(r.allowPageChange=!0,r[s](o,n)):r}return r[s](a,n)}function _p(e,t,n,r,a,s,o,i){var l=[];Array.isArray(n)?l.push.apply(l,n):n&&"function"==typeof n&&l.push(n),t&&(Array.isArray(t)?l.push.apply(l,t):l.push(t)),function t(){0!==l.length?l.shift().call(e,{router:e,to:r,from:a,resolve:function(){t()},reject:function(){o()},direction:i,app:e.app}):s()}()}function Rp(e,t,n,r,a){var s=this;function o(){e&&e.route&&(s.params.routesBeforeEnter||e.route.beforeEnter)?(s.allowPageChange=!1,_p(s,s.params.routesBeforeEnter,e.route.beforeEnter,e,t,(function(){s.allowPageChange=!0,n()}),(function(){r()}),a)):n()}t&&t.route&&(s.params.routesBeforeLeave||t.route.beforeLeave)?(s.allowPageChange=!1,_p(s,s.params.routesBeforeLeave,t.route.beforeLeave,e,t,(function(){s.allowPageChange=!0,o()}),(function(){r()}),a)):o()}function Pp(e,t){if(!e.view)throw new Error("Framework7: it is not allowed to use router methods on global app router. Use router methods only on related View, e.g. app.views.main.router."+t+"(...)")}function Dp(e,t,n,r){function a(e){e.then((function(e){n({component:e.default||e._default||e})})).catch((function(e){throw r(),new Error(e)}))}if(t instanceof Promise)a(t);else{var s=t.call(e);s instanceof Promise?a(s):n({component:s})}}function Lp(){return Lp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lp.apply(this,arguments)}function Bp(e,t,n){void 0===n&&(n={});var r,a,s,o=bl(),i=Gc(t),l=e.app,u=e.view,c=Vl(!1,{animate:e.params.animate,browserHistory:!0,replaceState:!1,history:!0,reloadCurrent:e.params.reloadPages,reloadPrevious:!1,reloadAll:!1,clearPreviousHistory:!1,reloadDetail:e.params.reloadDetail,on:{}},n),p=e.params.masterDetailBreakpoint>0,d=p&&c.route&&c.route.route&&(!0===c.route.route.master||"function"==typeof c.route.route.master&&c.route.route.master(l,e)),h=0,f=e.currentRoute.modal;if(f||"popup popover sheet loginScreen actions customModal panel".split(" ").forEach((function(t){e.currentRoute&&e.currentRoute.route&&e.currentRoute.route[t]&&(f=!0,s=t)})),f){var m=e.currentRoute.modal||e.currentRoute.route.modalInstance||l[s].get(),g=e.history[e.history.length-2],v=e.findMatchingRoute(g);!v&&g&&(v={url:g,path:g.split("?")[0],query:Dl(g),route:{path:g.split("?")[0],url:g}}),e.modalRemove(m)}var b,y,w,x,k=e.dynamicNavbar,C=e.$el,S=i,E=c.reloadPrevious||c.reloadCurrent||c.reloadAll;if(e.allowPageChange=!1,0===S.length)return e.allowPageChange=!0,e;S.length&&e.removeThemeElements(S),k&&(w=S.children(".navbar"),y=e.$navbarsEl,0===w.length&&S[0]&&S[0].f7Page&&(w=S[0].f7Page.$navbarEl)),c.route&&c.route.route&&c.route.route.keepAlive&&!c.route.route.keepAliveData&&(c.route.route.keepAliveData={pageEl:i[0]});var T,$,I,N,O=C.children(".page:not(.stacked)").filter((function(e){return e!==S[0]}));if(k&&(T=y.children(".navbar:not(.stacked)").filter((function(e){return e!==w[0]}))),c.reloadPrevious&&O.length<2)return e.allowPageChange=!0,e;if(p&&!c.reloadAll){for(var A=0;A<O.length;A+=1)r||!O[A].classList.contains("page-master")||(r=O[A]);if(($=!d&&r)&&r)for(var M=0;M<O.length;M+=1)O[M].classList.contains("page-master-detail")&&(a=O[M]);I=$&&c.reloadDetail&&l.width>=e.params.masterDetailBreakpoint&&r}$&&(N=!a||I||c.reloadAll||c.reloadCurrent);var _="next";if(c.reloadCurrent||c.reloadAll||I?_="current":c.reloadPrevious&&(_="previous"),S.removeClass("page-previous page-current page-next").addClass("page-"+_+(d?" page-master":"")+($?" page-master-detail":"")+(N?" page-master-detail-root":"")).removeClass("stacked").trigger("page:unstack").trigger("page:position",{position:_}),e.emit("pageUnstack",S[0]),e.emit("pagePosition",S[0],_),(d||$)&&(S.trigger("page:role",{role:d?"master":"detail",root:!!N}),e.emit("pageRole",S[0],{role:d?"master":"detail",detailRoot:!!N})),k&&w.length&&(w.removeClass("navbar-previous navbar-current navbar-next").addClass("navbar-"+_+(d?" navbar-master":"")+($?" navbar-master-detail":"")+(N?" navbar-master-detail-root":"")).removeClass("stacked"),w.trigger("navbar:position",{position:_}),e.emit("navbarPosition",w[0],_),(d||$)&&e.emit("navbarRole",w[0],{role:d?"master":"detail",detailRoot:!!N})),c.reloadCurrent||I)I?(b=O.filter((function(e){return!e.classList.contains("page-master")})),k&&(x=Gc(b.map((function(e){return l.navbar.getElByPage(e)})))),b.length>1&&r&&(h=b.length-1,Gc(r).removeClass("page-master-stacked").trigger("page:masterunstack"),e.emit("pageMasterUnstack",r),k&&(Gc(l.navbar.getElByPage(r)).removeClass("navbar-master-stacked"),e.emit("navbarMasterUnstack",l.navbar.getElByPage(r))))):(b=O.eq(O.length-1),k&&(x=Gc(l.navbar.getElByPage(b))));else if(c.reloadPrevious)b=O.eq(O.length-2),k&&(x=Gc(l.navbar.getElByPage(b)));else if(c.reloadAll)b=O.filter((function(e){return e!==S[0]})),k&&(x=T.filter((function(e){return e!==w[0]})));else{var R=[],P=[];if(O.length>1){var D=0;for(D=0;D<O.length-1;D+=1)if(r&&O[D]===r)O.eq(D).addClass("page-master-stacked"),O.eq(D).trigger("page:masterstack"),e.emit("pageMasterStack",O[D]),k&&(Gc(l.navbar.getElByPage(r)).addClass("navbar-master-stacked"),e.emit("navbarMasterStack",l.navbar.getElByPage(r)));else{var L=l.navbar.getElByPage(O.eq(D));e.params.stackPages?(O.eq(D).addClass("stacked"),O.eq(D).trigger("page:stack"),e.emit("pageStack",O[D]),k&&Gc(L).addClass("stacked")):(R.push(O[D]),e.pageCallback("beforeRemove",O[D],T&&T[D],"previous",void 0,c),e.removePage(O[D]),k&&L&&(P.push(L),e.removeNavbar(L)))}}b=C.children(".page:not(.stacked)").filter((function(e){return e!==S[0]&&R.indexOf(e)<0})),k&&(x=y.children(".navbar:not(.stacked)").filter((function(e){return e!==w[0]&&P.indexOf(P)<0}))),R=[],P=[]}if($&&!c.reloadAll&&((b.length>1||I)&&(b=b.filter((function(e){return!e.classList.contains("page-master")}))),x&&(x.length>1||I)&&(x=x.filter((function(e){return!e.classList.contains("navbar-master")})))),e.params.browserHistory&&(c.browserHistory||c.replaceState)&&!c.reloadPrevious){var B=e.params.browserHistoryRoot||"";Op[c.reloadCurrent||I&&a||c.reloadAll||c.replaceState?"replace":"push"](u.id,{url:c.route.url},B+e.params.browserHistorySeparator+c.route.url)}c.reloadPrevious||(e.currentPageEl=S[0],k&&w.length?e.currentNavbarEl=w[0]:delete e.currentNavbarEl,e.currentRoute=c.route);var F=c.route.url;c.history&&(((c.reloadCurrent||I&&a)&&e.history.length)>0||c.replaceState?(I&&h>0&&(e.history=e.history.slice(0,e.history.length-h)),e.history[e.history.length-(c.reloadPrevious?2:1)]=F):c.reloadPrevious?e.history[e.history.length-2]=F:c.reloadAll?e.history=[F]:e.history.push(F)),e.saveHistory();var z=S.parents(o).length>0,V=S[0].f7Component;if(c.reloadPrevious?(V&&!z?V.mount((function(e){Gc(e).insertBefore(b)})):S.insertBefore(b),k&&w.length&&(w.find(".title-large").length&&w.addClass("navbar-large"),x.length?w.insertBefore(x):(e.$navbarsEl.parents(o).length||e.$el.prepend(e.$navbarsEl),y.append(w)))):(b.next(".page")[0]!==S[0]&&(V&&!z?V.mount((function(e){C.append(e)})):C.append(S[0])),k&&w.length&&(w.find(".title-large").length&&w.addClass("navbar-large"),e.$navbarsEl.parents(o).length||e.$el.prepend(e.$navbarsEl),y.append(w[0]))),z?c.route&&c.route.route&&c.route.route.keepAlive&&!S[0].f7PageMounted&&(S[0].f7PageMounted=!0,e.pageCallback("mounted",S,w,_,E?_:"current",c,b)):e.pageCallback("mounted",S,w,_,E?_:"current",c,b),(c.reloadCurrent||I)&&b.length>0?e.params.stackPages&&e.initialPages.indexOf(b[0])>=0?(b.addClass("stacked"),b.trigger("page:stack"),e.emit("pageStack",b[0]),k&&x.addClass("stacked")):(e.pageCallback("beforeOut",b,x,"current",void 0,c),e.pageCallback("afterOut",b,x,"current",void 0,c),e.pageCallback("beforeRemove",b,x,"current",void 0,c),e.removePage(b),k&&x&&x.length&&e.removeNavbar(x)):c.reloadAll?b.each((function(t,n){var r=Gc(t),a=Gc(l.navbar.getElByPage(r));e.params.stackPages&&e.initialPages.indexOf(r[0])>=0?(r.addClass("stacked"),r.trigger("page:stack"),e.emit("pageStack",r[0]),k&&a.addClass("stacked")):(r.hasClass("page-current")&&(e.pageCallback("beforeOut",b,x,"current",void 0,c),e.pageCallback("afterOut",b,x,"current",void 0,c)),e.pageCallback("beforeRemove",r,x&&x.eq(n),"previous",void 0,c),e.removePage(r),k&&a.length&&e.removeNavbar(a))})):c.reloadPrevious&&(e.params.stackPages&&e.initialPages.indexOf(b[0])>=0?(b.addClass("stacked"),b.trigger("page:stack"),e.emit("pageStack",b[0]),k&&x.addClass("stacked")):(e.pageCallback("beforeRemove",b,x,"previous",void 0,c),e.removePage(b),k&&x&&x.length&&e.removeNavbar(x))),c.route.route.tab&&e.tabLoad(c.route.route.tab,Vl({},c,{history:!1,browserHistory:!1})),p&&u.checkMasterDetailBreakpoint(),e.pageCallback("init",S,w,_,E?_:"current",c,b),c.reloadCurrent||c.reloadAll||I)return e.allowPageChange=!0,e.pageCallback("beforeIn",S,w,_,"current",c),S.removeAttr("aria-hidden"),k&&w&&w.removeAttr("aria-hidden"),e.pageCallback("afterIn",S,w,_,"current",c),c.reloadCurrent&&c.clearPreviousHistory&&e.clearPreviousHistory(),I&&(e.setPagePosition(Gc(r),"previous"),r.f7Page&&r.f7Page.navbarEl&&e.setNavbarPosition(Gc(r.f7Page.navbarEl),"previous")),e;if(c.reloadPrevious)return e.allowPageChange=!0,e;function W(){e.setPagePosition(S,"current",!1),e.setPagePosition(b,"previous",!b.hasClass("page-master")),k&&(e.setNavbarPosition(w,"current",!1),e.setNavbarPosition(x,"previous",!x.hasClass("navbar-master"))),e.allowPageChange=!0,e.pageCallback("afterOut",b,x,"current","previous",c),e.pageCallback("afterIn",S,w,"next","current",c);var t=(e.params.preloadPreviousPage||e.params[l.theme+"SwipeBack"])&&!d;t||(S.hasClass("smart-select-page")||S.hasClass("photo-browser-page")||S.hasClass("autocomplete-page")||S.hasClass("color-picker-page"))&&(t=!0),t||(e.params.stackPages?(b.addClass("stacked"),b.trigger("page:stack"),e.emit("pageStack",b[0]),k&&x.addClass("stacked")):S.attr("data-name")&&"smart-select-page"===S.attr("data-name")||(e.pageCallback("beforeRemove",b,x,"previous",void 0,c),e.removePage(b),k&&x.length&&e.removeNavbar(x))),c.clearPreviousHistory&&e.clearPreviousHistory(),e.emit("routeChanged",e.currentRoute,e.previousRoute,e),e.params.browserHistory&&Op.clearRouterQueue()}function H(){e.setPagePosition(b,"current",!1),e.setPagePosition(S,"next",!1),k&&(e.setNavbarPosition(x,"current",!1),e.setNavbarPosition(w,"next",!1))}if(e.pageCallback("beforeOut",b,x,"current","previous",c),e.pageCallback("beforeIn",S,w,"next","current",c),!c.animate||d&&l.width>=e.params.masterDetailBreakpoint)W();else{var j=e.params[e.app.theme+"PageLoadDelay"],U=e.params.transition;c.transition&&(U=c.transition),!U&&e.currentRoute&&e.currentRoute.route&&(U=e.currentRoute.route.transition),!U&&e.currentRoute&&e.currentRoute.route.options&&(U=e.currentRoute.route.options.transition),U&&(S[0].f7PageTransition=U),j?setTimeout((function(){H(),e.animate(b,S,x,w,"forward",U,(function(){W()}))}),j):(H(),e.animate(b,S,x,w,"forward",U,(function(){W()})))}return e}function Fp(e,t,n,r){if(void 0===t&&(t={}),void 0===n&&(n={}),!e.allowPageChange&&!r)return e;var a=t,s=n,o=a.url,i=a.content,l=a.el,u=a.pageName,c=a.component,p=a.componentUrl;if(!s.reloadCurrent&&s.route&&s.route.route&&s.route.route.parentPath&&e.currentRoute.route&&e.currentRoute.route.parentPath===s.route.route.parentPath){if(s.route.url===e.url)return e.allowPageChange=!0,!1;var d=Object.keys(s.route.params).length===Object.keys(e.currentRoute.params).length;if(d&&Object.keys(s.route.params).forEach((function(t){t in e.currentRoute.params&&e.currentRoute.params[t]===s.route.params[t]||(d=!1)})),d)return!!s.route.route.tab&&e.tabLoad(s.route.route.tab,s);if(!d&&s.route.route.tab&&e.currentRoute.route.tab&&e.currentRoute.parentPath===s.route.parentPath)return e.tabLoad(s.route.route.tab,s)}if(s.route&&s.route.url&&e.url===s.route.url&&!s.reloadCurrent&&!s.reloadPrevious&&!e.params.allowDuplicateUrls)return e.allowPageChange=!0,!1;if(!s.route&&o&&(s.route=e.parseRouteUrl(o),Vl(s.route,{route:{url:o,path:o}})),(o||p||c)&&(e.allowPageChange=!1),i)Bp(e,e.getPageEl(i),s);else if(l)Bp(e,e.getPageEl(l),s);else if(u)Bp(e,e.$el.children('.page[data-name="'+u+'"]').eq(0),s);else if(c||p)try{e.pageComponentLoader({routerEl:e.el,component:c,componentUrl:p,options:s,resolve:function(t,n){return Bp(e,t,Vl(s,n))},reject:function(){return e.allowPageChange=!0,e}})}catch(t){throw e.allowPageChange=!0,t}else o&&(e.xhrAbortController&&(e.xhrAbortController.abort(),e.xhrAbortController=!1),e.xhrRequest(o,s).then((function(t){Bp(e,e.getPageEl(t),s)})).catch((function(){e.allowPageChange=!0})));return e}function zp(e,t,n){var r,a,s,o,i,l,u,c,p=Zl(),d=bl(),h=Gc(t),f=e.app,m=e.view,g=Vl(!1,{animate:e.params.animate,browserHistory:!0,replaceState:!1},n),v=e.params.masterDetailBreakpoint>0,b=v&&g.route&&g.route.route&&(!0===g.route.route.master||"function"==typeof g.route.route.master&&g.route.route.master(f,e)),y=e.dynamicNavbar,w=h,x=e.$el.children(".page-current"),k=0===x.length&&g.preload,C=v&&x.hasClass("page-master");if(w.length&&e.removeThemeElements(w),y&&(o=w.children(".navbar"),s=e.$navbarsEl,0===o.length&&w[0]&&w[0].f7Page&&(o=w[0].f7Page.$navbarEl),i=s.find(".navbar-current")),e.allowPageChange=!1,0===w.length||0===x.length&&!g.preload)return e.allowPageChange=!0,e;if(e.removeThemeElements(w),g.route&&g.route.route&&g.route.route.keepAlive&&!g.route.route.keepAliveData&&(g.route.route.keepAliveData={pageEl:h[0]}),v){for(var S=e.$el.children(".page:not(.stacked)").filter((function(e){return e!==w[0]})),E=0;E<S.length;E+=1)r||!S[E].classList.contains("page-master")||(r=S[E]);!(l=!b&&r&&e.history.indexOf(g.route.url)>e.history.indexOf(r.f7Page.route.url))&&!b&&r&&r.f7Page&&g.route.route.masterRoute&&(l=g.route.route.masterRoute.path===r.f7Page.route.route.path)}if(l&&r&&r.f7Page&&(u=e.history.indexOf(g.route.url)-e.history.indexOf(r.f7Page.route.url)==1),w.addClass("page-"+(k?"current":"previous")+(b?" page-master":"")+(l?" page-master-detail":"")+(u?" page-master-detail-root":"")).removeClass("stacked").removeAttr("aria-hidden").trigger("page:unstack").trigger("page:position",{position:k?"current":"previous"}),e.emit("pageUnstack",w[0]),e.emit("pagePosition",w[0],k?"current":"previous"),(b||l)&&(w.trigger("page:role",{role:b?"master":"detail",root:!!u}),e.emit("pageRole",w[0],{role:b?"master":"detail",detailRoot:!!u})),y&&o.length>0&&(o.addClass("navbar-"+(k?"current":"previous")+(b?" navbar-master":"")+(l?" navbar-master-detail":"")+(u?" navbar-master-detail-root":"")).removeClass("stacked").removeAttr("aria-hidden"),o.trigger("navbar:position",{position:k?"current":"previous"}),e.emit("navbarPosition",o[0],k?"current":"previous"),(b||u)&&e.emit("navbarRole",o[0],{role:b?"master":"detail",detailRoot:!!u})),g.force&&(x.prev(".page-previous:not(.stacked)").length>0||0===x.prev(".page-previous").length))if(e.history.indexOf(g.route.url)>=0?(c=e.history.length-e.history.indexOf(g.route.url)-1,e.history=e.history.slice(0,e.history.indexOf(g.route.url)+2),m.history=e.history):e.history[[e.history.length-2]]?e.history[e.history.length-2]=g.route.url:e.history.unshift(e.url),c&&e.params.stackPages)x.prevAll(".page-previous").each((function(t){var n,s=Gc(t);y&&(n=Gc(f.navbar.getElByPage(s))),s[0]!==w[0]&&s.index()>w.index()&&(e.initialPages.indexOf(s[0])>=0?(s.addClass("stacked"),s.trigger("page:stack"),e.emit("pageStack",s[0]),y&&n.addClass("stacked")):(e.pageCallback("beforeRemove",s,n,"previous",void 0,g),s[0]===r&&(a=!0),e.removePage(s),y&&n.length>0&&e.removeNavbar(n)))}));else{var T,$=x.prev(".page-previous:not(.stacked)");y&&(T=Gc(f.navbar.getElByPage($))),e.params.stackPages&&e.initialPages.indexOf($[0])>=0?($.addClass("stacked"),$.trigger("page:stack"),e.emit("pageStack",$[0]),T.addClass("stacked")):$.length>0&&(e.pageCallback("beforeRemove",$,T,"previous",void 0,g),$[0]===r&&(a=!0),e.removePage($),y&&T.length&&e.removeNavbar(T))}var I=w.parents(d).length>0,N=w[0].f7Component;function O(){k&&(!I&&N?N.mount((function(t){e.$el.append(t)})):e.$el.append(w)),0===w.next(x).length&&(!I&&N?N.mount((function(e){Gc(e).insertBefore(x)})):w.insertBefore(x)),y&&o.length&&(o.find(".title-large").length&&o.addClass("navbar-large"),o.insertBefore(i),i.length>0?o.insertBefore(i):(e.$navbarsEl.parents(d).length||e.$el.prepend(e.$navbarsEl),s.append(o))),I?g.route&&g.route.route&&g.route.route.keepAlive&&!w[0].f7PageMounted&&(w[0].f7PageMounted=!0,e.pageCallback("mounted",w,o,"previous","current",g,x)):e.pageCallback("mounted",w,o,"previous","current",g,x)}if(g.preload){O(),g.route.route.tab&&e.tabLoad(g.route.route.tab,Vl({},g,{history:!1,browserHistory:!1,preload:!0})),b&&(w.removeClass("page-master-stacked").trigger("page:masterunstack"),e.emit("pageMasterUnstack",w[0]),y&&(Gc(f.navbar.getElByPage(w)).removeClass("navbar-master-stacked"),e.emit("navbarMasterUnstack",f.navbar.getElByPage(w)))),e.pageCallback("init",w,o,"previous","current",g,x),k&&(e.pageCallback("beforeIn",w,o,"current",void 0,g),e.pageCallback("afterIn",w,o,"current",void 0,g));var A=w.prevAll(".page-previous:not(.stacked):not(.page-master)");return A.length>0&&A.each((function(t){var n,r=Gc(t);y&&(n=Gc(f.navbar.getElByPage(r))),e.params.stackPages&&e.initialPages.indexOf(t)>=0?(r.addClass("stacked"),r.trigger("page:stack"),e.emit("pageStack",r[0]),y&&n.addClass("stacked")):(e.pageCallback("beforeRemove",r,n,"previous",void 0),e.removePage(r),y&&n.length&&e.removeNavbar(n))})),e.allowPageChange=!0,e}if(!(p.ie||p.edge||p.firefox&&!p.ios)&&e.params.browserHistory&&g.browserHistory)if(g.replaceState){var M=e.params.browserHistoryRoot||"";Op.replace(m.id,{url:g.route.url},M+e.params.browserHistorySeparator+g.route.url)}else c?Op.go(-c):Op.back();if(g.replaceState?e.history[e.history.length-1]=g.route.url:(1===e.history.length&&e.history.unshift(e.url),e.history.pop()),e.saveHistory(),e.currentPageEl=w[0],y&&o.length?e.currentNavbarEl=o[0]:delete e.currentNavbarEl,e.currentRoute=g.route,(p.ie||p.edge||p.firefox&&!p.ios)&&e.params.browserHistory&&g.browserHistory)if(g.replaceState){var _=e.params.browserHistoryRoot||"";Op.replace(m.id,{url:g.route.url},_+e.params.browserHistorySeparator+g.route.url)}else c?Op.go(-c):Op.back();function R(){e.setPagePosition(w,"current",!1),e.setPagePosition(x,"next",!0),y&&(e.setNavbarPosition(o,"current",!1),e.setNavbarPosition(i,"next",!0)),e.pageCallback("afterOut",x,i,"current","next",g),e.pageCallback("afterIn",w,o,"previous","current",g),e.params.stackPages&&e.initialPages.indexOf(x[0])>=0?(x.addClass("stacked"),x.trigger("page:stack"),e.emit("pageStack",x[0]),y&&i.addClass("stacked")):(e.pageCallback("beforeRemove",x,i,"next",void 0,g),e.removePage(x),y&&i.length&&e.removeNavbar(i)),e.allowPageChange=!0,e.emit("routeChanged",e.currentRoute,e.previousRoute,e),(e.params.preloadPreviousPage||e.params[f.theme+"SwipeBack"])&&e.history[e.history.length-2]&&!b&&e.back(e.history[e.history.length-2],{preload:!0}),e.params.browserHistory&&Op.clearRouterQueue()}if(O(),g.route.route.tab&&e.tabLoad(g.route.route.tab,Vl({},g,{history:!1,browserHistory:!1})),v&&(C||a)&&m.checkMasterDetailBreakpoint(!1),e.pageCallback("init",w,o,"previous","current",g,x),e.pageCallback("beforeOut",x,i,"current","next",g),e.pageCallback("beforeIn",w,o,"previous","current",g),!g.animate||C&&f.width>=e.params.masterDetailBreakpoint)R();else{var P=e.params.transition;x[0]&&x[0].f7PageTransition&&(P=x[0].f7PageTransition,delete x[0].f7PageTransition),g.transition&&(P=g.transition),!P&&e.previousRoute&&e.previousRoute.route&&(P=e.previousRoute.route.transition),!P&&e.previousRoute&&e.previousRoute.route&&e.previousRoute.route.options&&(P=e.previousRoute.route.options.transition),e.setPagePosition(x,"current"),e.setPagePosition(w,"previous",!1),y&&(e.setNavbarPosition(i,"current"),e.setNavbarPosition(o,"previous",!1)),e.animate(x,w,i,o,"backward",P,(function(){R()}))}return e}function Vp(e,t,n,r){if(!e.allowPageChange&&!r)return e;var a=t,s=n,o=a.url,i=a.content,l=a.el,u=a.pageName,c=a.component,p=a.componentUrl;if(s.route.url&&e.url===s.route.url&&!s.reloadCurrent&&!s.reloadPrevious&&!e.params.allowDuplicateUrls)return!1;if(!s.route&&o&&(s.route=e.parseRouteUrl(o)),(o||p||c)&&(e.allowPageChange=!1),i)zp(e,e.getPageEl(i),s);else if(l)zp(e,e.getPageEl(l),s);else if(u)zp(e,e.$el.children('.page[data-name="'+u+'"]').eq(0),s);else if(c||p)try{e.pageComponentLoader({routerEl:e.el,component:c,componentUrl:p,options:s,resolve:function(t,n){return zp(e,t,Vl(s,n))},reject:function(){return e.allowPageChange=!0,e}})}catch(t){throw e.allowPageChange=!0,t}else o&&(e.xhrAbortController&&(e.xhrAbortController.abort(),e.xhrAbortController=!1),e.xhrRequest(o,s).then((function(t){zp(e,e.getPageEl(t),s)})).catch((function(){e.allowPageChange=!0})));return e}function Wp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hp(e,t){return Hp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Hp(e,t)}var jp=function(e){var t,n;function r(t,n){var r,a=Wp(r=e.call(this,{},[void 0===n?t:n])||this);a.isAppRouter=void 0===n,a.isAppRouter?Vl(!1,a,{app:t,params:t.params.view,routes:t.routes||[],cache:t.cache}):Vl(!1,a,{app:t,view:n,viewId:n.id,id:n.params.routerId,params:n.params,routes:n.routes,history:n.history,scrollHistory:n.scrollHistory,cache:t.cache,dynamicNavbar:"ios"===t.theme&&n.params.iosDynamicNavbar,initialPages:[],initialNavbars:[]}),a.useModules(),a.allowPageChange=!0;var s={},o={};return Object.defineProperty(a,"currentRoute",{enumerable:!0,configurable:!0,set:function(e){void 0===e&&(e={}),o=Vl({},s),(s=e)&&(a.url=s.url,a.emit("routeChange",e,o,a))},get:function(){return s}}),Object.defineProperty(a,"previousRoute",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}}),a||Wp(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Hp(t,n);var a=r.prototype;return a.mount=function(){var e=this,t=e.view;Vl(!1,e,{tempDom:bl().createElement("div"),$el:t.$el,el:t.el,$navbarsEl:t.$navbarsEl,navbarsEl:t.navbarsEl}),e.emit("local::mount routerMount",e)},a.animatableNavElements=function(e,t,n,r,a){var s,o,i=this,l=i.dynamicNavbar,u=i.params.iosAnimateNavbarBackIcon;function c(e,t){var n,r=e.hasClass("sliding")||t.hasClass("sliding"),a=e.hasClass("subnavbar"),s=!r||!a,o=e.find(".back .icon");return r&&u&&e.hasClass("left")&&o.length>0&&o.next("span").length&&(e=o.next("span"),n=!0),{$el:e,isIconLabel:n,leftOffset:e[0].f7NavbarLeftOffset,rightOffset:e[0].f7NavbarRightOffset,isSliding:r,isSubnavbar:a,needsOpacityTransition:s}}return l&&(s=[],o=[],e.children(".navbar-inner").children(".left, .right, .title, .subnavbar").each((function(t){var o=Gc(t);o.hasClass("left")&&r&&"forward"===a||o.hasClass("title")&&n||s.push(c(o,e.children(".navbar-inner")))})),t.hasClass("navbar-master")&&i.params.masterDetailBreakpoint>0&&i.app.width>=i.params.masterDetailBreakpoint||t.children(".navbar-inner").children(".left, .right, .title, .subnavbar").each((function(e){var s=Gc(e);s.hasClass("left")&&n&&!r&&"forward"===a||s.hasClass("left")&&n&&"backward"===a||s.hasClass("title")&&r||o.push(c(s,t.children(".navbar-inner")))})),[o,s].forEach((function(e){e.forEach((function(t){var n=t,r=t.isSliding,a=t.$el,i=e===o?s:o;r&&a.hasClass("title")&&i&&i.forEach((function(e){if(e.isIconLabel){var t=e.$el[0];n.leftOffset+=t&&t.offsetLeft||0}}))}))}))),{newNavEls:s,oldNavEls:o}},a.animate=function(e,t,n,r,a,s,o){var i=this;if(i.params.animateCustom)i.params.animateCustom.apply(i,[e,t,n,r,a,o]);else{var l=i.dynamicNavbar,u="ios"===i.app.theme;if(s){var c="router-transition-custom router-transition-"+s+"-"+a;return("forward"===a?t:e).animationEnd((function(){i.$el.removeClass(c),l&&i.$navbarsEl.length&&(r&&i.$navbarsEl.prepend(r),n&&i.$navbarsEl.prepend(n)),o&&o()})),l&&(r&&t&&(i.setNavbarPosition(r,""),r.removeClass("navbar-next navbar-previous navbar-current"),t.prepend(r)),n&&e&&(i.setNavbarPosition(n,""),n.removeClass("navbar-next navbar-previous navbar-current"),e.prepend(n))),void i.$el.addClass(c)}var p,d,h,f,m,g,v,b="router-transition-"+a+" router-transition";if(u&&l){i.params.masterDetailBreakpoint>0&&i.app.width>=i.params.masterDetailBreakpoint&&(n.hasClass("navbar-master")&&r.hasClass("navbar-master-detail")||n.hasClass("navbar-master-detail")&&r.hasClass("navbar-master"))||(g=n&&n.hasClass("navbar-large"),v=r&&r.hasClass("navbar-large"),h=g&&!n.hasClass("navbar-large-collapsed"),f=v&&!r.hasClass("navbar-large-collapsed"),m=h&&!f||f&&!h);var y=i.animatableNavElements(r,n,f,h,a);p=y.newNavEls,d=y.oldNavEls}("forward"===a?t:e).animationEnd((function(){i.dynamicNavbar&&(r&&(r.removeClass("router-navbar-transition-to-large router-navbar-transition-from-large"),r.addClass("navbar-no-title-large-transition"),Rl((function(){r.removeClass("navbar-no-title-large-transition")}))),n&&n.removeClass("router-navbar-transition-to-large router-navbar-transition-from-large"),r.hasClass("sliding")||r.children(".navbar-inner.sliding").length?r.find(".title, .left, .right, .left .icon, .subnavbar").transform(""):r.find(".sliding").transform(""),n.hasClass("sliding")||n.children(".navbar-inner.sliding").length?n.find(".title, .left, .right, .left .icon, .subnavbar").transform(""):n.find(".sliding").transform("")),i.$el.removeClass(b),o&&o()})),l?(w(0),Rl((function(){i.$el.addClass(b),m&&(i.el._clientLeft=i.el.clientLeft),w(1)}))):i.$el.addClass(b)}function w(e){u&&l&&(1===e&&(f&&(r.addClass("router-navbar-transition-to-large"),n.addClass("router-navbar-transition-to-large")),h&&(r.addClass("router-navbar-transition-from-large"),n.addClass("router-navbar-transition-from-large"))),p.forEach((function(t){var n=t.$el,r="forward"===a?t.rightOffset:t.leftOffset;t.isSliding&&(t.isSubnavbar&&v?n[0].style.setProperty("transform","translate3d("+r*(1-e)+"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)","important"):n.transform("translate3d("+r*(1-e)+"px,0,0)"))})),d.forEach((function(t){var n=t.$el,r="forward"===a?t.leftOffset:t.rightOffset;t.isSliding&&(t.isSubnavbar&&g?n.transform("translate3d("+r*e+"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)"):n.transform("translate3d("+r*e+"px,0,0)"))})))}},a.removeModal=function(e){this.removeEl(e)},a.removeTabContent=function(e){Gc(e).html("")},a.removeNavbar=function(e){this.removeEl(e)},a.removePage=function(e){var t=Gc(e),n=t&&t[0]&&t[0].f7Page;n&&n.route&&n.route.route&&n.route.route.keepAlive?t.remove():this.removeEl(e)},a.removeEl=function(e){if(e){var t=this,n=Gc(e);0!==n.length&&(n.find(".tab").each((function(e){Gc(e).children().each((function(e){e.f7Component&&(Gc(e).trigger("tab:beforeremove"),e.f7Component.destroy())}))})),n[0].f7Component&&n[0].f7Component.destroy&&n[0].f7Component.destroy(),t.params.removeElements&&(t.params.removeElementsWithTimeout?setTimeout((function(){n.remove()}),t.params.removeElementsTimeout):n.remove()))}},a.getPageEl=function(e){var t=this;if("string"==typeof e)t.tempDom.innerHTML=e;else{if(Gc(e).hasClass("page"))return e;t.tempDom.innerHTML="",Gc(t.tempDom).append(e)}return t.findElement(".page",t.tempDom)},a.findElement=function(e,t,n){var r=this,a=r.view,s=r.app,o=Gc(t),i=e;n&&(i+=":not(.stacked)");var l=o.find(i).filter((function(e){return 0===Gc(e).parents(".popup, .dialog, .popover, .actions-modal, .sheet-modal, .login-screen, .page").length}));return l.length>1&&("string"==typeof a.selector&&(l=o.find(a.selector+" "+i)),l.length>1&&(l=o.find("."+s.params.viewMainClass+" "+i))),1===l.length?l:(n||(l=r.findElement(i,o,!0)),l&&1===l.length?l:l&&l.length>1?Gc(l[0]):void 0)},a.flattenRoutes=function(e){void 0===e&&(e=this.routes);var t=this,n=[];return e.forEach((function(e){var r=!1;if("tabs"in e&&e.tabs){var a=e.tabs.map((function(t){var n=Vl({},e,{path:(e.path+"/"+t.path).replace("///","/").replace("//","/"),parentPath:e.path,tab:t});return delete n.tabs,delete n.routes,n}));r=!0,n=n.concat(t.flattenRoutes(a))}if("detailRoutes"in e){var s=e.detailRoutes.map((function(t){var n=Vl({},t);return n.masterRoute=e,n.masterRoutePath=e.path,n}));n=n.concat(e,t.flattenRoutes(s))}if("routes"in e){var o=e.routes.map((function(t){var n=Vl({},t);return n.path=(e.path+"/"+n.path).replace("///","/").replace("//","/"),n}));n=r?n.concat(t.flattenRoutes(o)):n.concat(e,t.flattenRoutes(o))}"routes"in e||"tabs"in e&&e.tabs||"detailRoutes"in e||n.push(e)})),n},a.parseRouteUrl=function(e){if(!e)return{};var t=Dl(e),n=e.split("#")[1],r=e.split("#")[0].split("?")[0];return{query:t,hash:n,params:{},url:e,path:r}},a.generateUrl=function(e){if(void 0===e&&(e={}),"string"==typeof e)return e;var t=e,n=t.name,r=t.path,a=t.params,s=t.query;if(!n&&!r)throw new Error('Framework7: "name" or "path" parameter is required');var o=this,i=n?o.findRouteByKey("name",n):o.findRouteByKey("path",r);if(!i)throw n?new Error('Framework7: route with name "'+n+'" not found'):new Error('Framework7: route with path "'+r+'" not found');var l=o.constructRouteUrl(i,{params:a,query:s});if(!l)throw new Error("Framework7: can't construct URL for route with name \""+n+'"');return l},a.constructRouteUrl=function(e,t){var n,r=void 0===t?{}:t,a=r.params,s=r.query,o=e.path,i=Sp(o);try{n=i(a||{})}catch(e){throw new Error("Framework7: error constructing route URL from passed params:\nRoute: "+o+"\n"+e.toString())}return s&&("string"==typeof s?n+="?"+s:Object.keys(s).length&&(n+="?"+Bl(s))),n},a.findTabRouteUrl=function(e){var t,n=this,r=Gc(e),a=n.currentRoute.route.parentPath,s=r.attr("id");return n.flattenRoutes(n.routes).forEach((function(e){e.parentPath===a&&e.tab&&e.tab.id===s&&(t=n.currentRoute.params&&Object.keys(n.currentRoute.params).length>0?n.constructRouteUrl(e,{params:n.currentRoute.params,query:n.currentRoute.query}):e.path)})),t},a.findRouteByKey=function(e,t){var n,r=this.routes;return this.flattenRoutes(r).forEach((function(r){n||r[e]===t&&(n=r)})),n},a.findMatchingRoute=function(e){if(e){var t,n=this,r=n.routes,a=n.flattenRoutes(r),s=n.parseRouteUrl(e),o=s.path,i=s.query,l=s.hash,u=s.params;return a.forEach((function(n){if(!t){var r,a,s=[],c=[n.path];if(n.alias&&("string"==typeof n.alias?c.push(n.alias):Array.isArray(n.alias)&&n.alias.forEach((function(e){c.push(e)}))),c.forEach((function(e){r||(r=Ip(e,s).exec(o))})),r)s.forEach((function(e,t){if("number"!=typeof e.name){var n=r[t+1];u[e.name]=null==n?n:decodeURIComponent(n)}})),n.parentPath&&(a=o.split("/").slice(0,n.parentPath.split("/").length-1).join("/")),t={query:i,hash:l,params:u,url:e,path:o,parentPath:a,route:n,name:n.name}}})),t}},a.replaceRequestUrlParams=function(e,t){void 0===e&&(e=""),void 0===t&&(t={});var n=e;return"string"==typeof n&&n.indexOf("{{")>=0&&t&&t.route&&t.route.params&&Object.keys(t.route.params).length&&Object.keys(t.route.params).forEach((function(e){var r=new RegExp("{{"+e+"}}","g");n=n.replace(r,t.route.params[e]||"")})),n},a.removeFromXhrCache=function(e){for(var t=this.cache.xhr,n=!1,r=0;r<t.length;r+=1)t[r].url===e&&(n=r);!1!==n&&t.splice(n,1)},a.xhrRequest=function(e,t){var n=this,r=n.params,a=t.ignoreCache,s=e,o=s.indexOf("?")>=0;return r.passRouteQueryToRequest&&t&&t.route&&t.route.query&&Object.keys(t.route.query).length&&(s+=(o?"&":"?")+Bl(t.route.query),o=!0),r.passRouteParamsToRequest&&t&&t.route&&t.route.params&&Object.keys(t.route.params).length&&(s+=(o?"&":"?")+Bl(t.route.params),o=!0),s.indexOf("{{")>=0&&(s=n.replaceRequestUrlParams(s,t)),r.xhrCacheIgnoreGetParameters&&s.indexOf("?")>=0&&(s=s.split("?")[0]),new Promise((function(e,o){if(r.xhrCache&&!a&&s.indexOf("nocache")<0&&r.xhrCacheIgnore.indexOf(s)<0)for(var i=0;i<n.cache.xhr.length;i+=1){var l=n.cache.xhr[i];if(l.url===s&&Pl()-l.time<r.xhrCacheDuration)return void e(l.content)}n.xhrAbortController=n.app.request.abortController(),n.app.request({abortController:n.xhrAbortController,url:s,method:"GET",beforeSend:function(e){n.emit("routerAjaxStart",e,t)},complete:function(a,i){n.emit("routerAjaxComplete",a),"error"!==i&&"timeout"!==i&&a.status>=200&&a.status<300||0===a.status?(r.xhrCache&&""!==a.responseText&&(n.removeFromXhrCache(s),n.cache.xhr.push({url:s,time:Pl(),content:a.responseText})),n.emit("routerAjaxSuccess",a,t),e(a.responseText)):(n.emit("routerAjaxError",a,t),o(a))},error:function(e){n.emit("routerAjaxError",e,t),o(e)}})}))},a.setNavbarPosition=function(e,t,n){e.removeClass("navbar-previous navbar-current navbar-next"),t&&e.addClass("navbar-"+t),!1===n?e.removeAttr("aria-hidden"):!0===n&&e.attr("aria-hidden","true"),e.trigger("navbar:position",{position:t}),this.emit("navbarPosition",e[0],t)},a.setPagePosition=function(e,t,n){e.removeClass("page-previous page-current page-next"),e.addClass("page-"+t),!1===n?e.removeAttr("aria-hidden"):!0===n&&e.attr("aria-hidden","true"),e.trigger("page:position",{position:t}),this.emit("pagePosition",e[0],t)},a.removeThemeElements=function(e){var t,n=this.app.theme;"ios"===n?t=".md-only, .aurora-only, .if-md, .if-aurora, .if-not-ios, .not-ios":"md"===n?t=".ios-only, .aurora-only, .if-ios, .if-aurora, .if-not-md, .not-md":"aurora"===n&&(t=".ios-only, .md-only, .if-ios, .if-md, .if-not-aurora, .not-aurora"),Gc(e).find(t).remove()},a.getPageData=function(e,t,n,r,a,s){void 0===a&&(a={});var o,i,l=this,u=Gc(e).eq(0),c=Gc(t).eq(0),p=u[0].f7Page||{};if(("next"===n&&"current"===r||"current"===n&&"previous"===r)&&(o="forward"),("current"===n&&"next"===r||"previous"===n&&"current"===r)&&(o="backward"),p&&!p.fromPage){var d=Gc(s);d.length&&(i=d[0].f7Page)}(i=p.pageFrom||i)&&i.pageFrom&&(i.pageFrom=null);var h={app:l.app,view:l.view,router:l,$el:u,el:u[0],$pageEl:u,pageEl:u[0],$navbarEl:c,navbarEl:c[0],name:u.attr("data-name"),position:n,from:n,to:r,direction:o,route:p.route?p.route:a,pageFrom:i};return u[0].f7Page=h,h},a.pageCallback=function(e,t,n,r,a,s,o){if(void 0===s&&(s={}),t){var i=this,l=Gc(t);if(l.length){var u=Gc(n),c=s.route,p=i.params.restoreScrollTopOnBack&&!(i.params.masterDetailBreakpoint>0&&l.hasClass("page-master")&&i.app.width>=i.params.masterDetailBreakpoint),d=l[0].f7Page&&l[0].f7Page.route&&l[0].f7Page.route.route&&l[0].f7Page.route.route.keepAlive;"beforeRemove"===e&&d&&(e="beforeUnmount");var h="page"+(e[0].toUpperCase()+e.slice(1,e.length)),f="page:"+e.toLowerCase(),m={};(m="beforeRemove"===e&&l[0].f7Page?Vl(l[0].f7Page,{from:r,to:a,position:r}):i.getPageData(l[0],u[0],r,a,c,o)).swipeBack=!!s.swipeBack;var g=s.route?s.route.route:{},v=g.on,b=void 0===v?{}:v,y=g.once,w=void 0===y?{}:y;if(s.on&&Vl(b,s.on),s.once&&Vl(w,s.once),"mounted"===e&&C(),"init"===e){if(p&&("previous"===r||!r)&&"current"===a&&i.scrollHistory[m.route.url]&&!l.hasClass("no-restore-scroll")){var x=l.find(".page-content");x.length>0&&(x=x.filter((function(e){return 0===Gc(e).parents(".tab:not(.tab-active)").length&&!Gc(e).is(".tab:not(.tab-active)")}))),x.scrollTop(i.scrollHistory[m.route.url])}if(C(),l[0].f7PageInitialized)return l.trigger("page:reinit",m),void i.emit("pageReinit",m);l[0].f7PageInitialized=!0}if(p&&"beforeOut"===e&&"current"===r&&"previous"===a){var k=l.find(".page-content");k.length>0&&(k=k.filter((function(e){return 0===Gc(e).parents(".tab:not(.tab-active)").length&&!Gc(e).is(".tab:not(.tab-active)")}))),i.scrollHistory[m.route.url]=k.scrollTop()}p&&"beforeOut"===e&&"current"===r&&"next"===a&&delete i.scrollHistory[m.route.url],l.trigger(f,m),i.emit(h,m),"beforeRemove"!==e&&"beforeUnmount"!==e||(l[0].f7RouteEventsAttached&&(l[0].f7RouteEventsOn&&Object.keys(l[0].f7RouteEventsOn).forEach((function(e){l.off(Nl(e),l[0].f7RouteEventsOn[e])})),l[0].f7RouteEventsOnce&&Object.keys(l[0].f7RouteEventsOnce).forEach((function(e){l.off(Nl(e),l[0].f7RouteEventsOnce[e])})),l[0].f7RouteEventsAttached=null,l[0].f7RouteEventsOn=null,l[0].f7RouteEventsOnce=null,delete l[0].f7RouteEventsAttached,delete l[0].f7RouteEventsOn,delete l[0].f7RouteEventsOnce),d||(l[0].f7Page&&l[0].f7Page.navbarEl&&delete l[0].f7Page.navbarEl.f7Page,l[0].f7Page=null))}}function C(){l[0].f7RouteEventsAttached||(l[0].f7RouteEventsAttached=!0,b&&Object.keys(b).length>0&&(l[0].f7RouteEventsOn=b,Object.keys(b).forEach((function(e){b[e]=b[e].bind(i),l.on(Nl(e),b[e])}))),w&&Object.keys(w).length>0&&(l[0].f7RouteEventsOnce=w,Object.keys(w).forEach((function(e){w[e]=w[e].bind(i),l.once(Nl(e),w[e])}))))}},a.saveHistory=function(){var e=this,t=wl();e.view.history=e.history,e.params.browserHistory&&e.params.browserHistoryStoreHistory&&t.localStorage&&(t.localStorage["f7router-"+e.view.id+"-history"]=JSON.stringify(e.history))},a.restoreHistory=function(){var e=this,t=wl();e.params.browserHistory&&e.params.browserHistoryStoreHistory&&t.localStorage&&t.localStorage["f7router-"+e.view.id+"-history"]&&(e.history=JSON.parse(t.localStorage["f7router-"+e.view.id+"-history"]),e.view.history=e.history)},a.clearHistory=function(){var e=this;e.history=[],e.view&&(e.view.history=[]),e.saveHistory()},a.updateCurrentUrl=function(e){var t=this;Pp(t,"updateCurrentUrl"),t.history.length?t.history[t.history.length-1]=e:t.history.push(e);var n=t.parseRouteUrl(e),r=n.query,a=n.hash,s=n.params,o=n.url,i=n.path;if(t.currentRoute&&Vl(t.currentRoute,{query:r,hash:a,params:s,url:o,path:i}),t.params.browserHistory){var l=t.params.browserHistoryRoot||"";Op.replace(t.view.id,{url:e},l+t.params.browserHistorySeparator+e)}t.saveHistory(),t.emit("routeUrlUpdate",t.currentRoute,t)},a.getInitialUrl=function(){var e=this;if(e.initialUrl)return{initialUrl:e.initialUrl,historyRestored:e.historyRestored};var t,n=e.app,r=e.view,a=bl(),s=wl(),o=n.params.url&&"string"==typeof n.params.url&&"undefined"!=typeof URL?new URL(n.params.url):a.location,i=e.params.url,l=o.href.split(o.origin)[1],u=e.params,c=u.browserHistory,p=u.browserHistoryOnLoad,d=u.browserHistorySeparator,h=e.params.browserHistoryRoot;return(s.cordova||s.Capacitor&&s.Capacitor.isNative)&&c&&!d&&!h&&o.pathname.indexOf("index.html")&&(console.warn("Framework7: wrong or not complete browserHistory configuration, trying to guess browserHistoryRoot"),h=o.pathname.split("index.html")[0]),c&&p?(h&&l.indexOf(h)>=0&&""===(l=l.split(h)[1])&&(l="/"),i=d.length>0&&l.indexOf(d)>=0?l.split(d)[1]:l,e.restoreHistory(),e.history.indexOf(i)>=0?e.history=e.history.slice(0,e.history.indexOf(i)+1):e.params.url===i?e.history=[i]:Op.state&&Op.state[r.id]&&Op.state[r.id].url===e.history[e.history.length-1]?i=e.history[e.history.length-1]:e.history=[l.split(d)[0]||"/",i],e.history.length>1?t=!0:e.history=[],e.saveHistory()):(i||(i=l),o.search&&i.indexOf("?")<0&&(i+=o.search),o.hash&&i.indexOf("#")<0&&(i+=o.hash)),e.initialUrl=i,e.historyRestored=t,{initialUrl:i,historyRestored:t}},a.init=function(){var e=this,t=e.app,n=e.view,r=bl();e.mount();var a=e.getInitialUrl(),s=a.initialUrl,o=a.historyRestored;(n&&e.params.iosSwipeBack&&"ios"===t.theme||n&&e.params.mdSwipeBack&&"md"===t.theme||n&&e.params.auroraSwipeBack&&"aurora"===t.theme)&&Ap(e);var i,l=e.params,u=l.browserHistory,c=l.browserHistoryOnLoad,p=l.browserHistoryAnimateOnLoad,d=l.browserHistoryInitialMatch;if(e.history.length>1){var h=d?s:e.history[0];(i=e.findMatchingRoute(h))||(i=Vl(e.parseRouteUrl(h),{route:{url:h,path:h.split("?")[0]}}))}else(i=e.findMatchingRoute(s))||(i=Vl(e.parseRouteUrl(s),{route:{url:s,path:s.split("?")[0]}}));if(e.params.stackPages&&e.$el.children(".page").each((function(t){var n=Gc(t);e.initialPages.push(n[0]),e.dynamicNavbar&&n.children(".navbar").length>0&&e.initialNavbars.push(n.children(".navbar")[0])})),0===e.$el.children(".page:not(.stacked)").length&&s&&e.params.loadInitialPage)e.navigate(s,{initial:!0,reloadCurrent:!0,browserHistory:!1,animate:!1,once:{modalOpen:function(){o&&((e.params.preloadPreviousPage||e.params[t.theme+"SwipeBack"])&&e.history.length>1&&e.back({preload:!0}))},pageAfterIn:function(){o&&((e.params.preloadPreviousPage||e.params[t.theme+"SwipeBack"])&&e.history.length>1&&e.back({preload:!0}))}}});else if(e.$el.children(".page:not(.stacked)").length){var f;if(e.currentRoute=i,e.$el.children(".page:not(.stacked)").each((function(a){var s,o=Gc(a);e.setPagePosition(o,"current"),e.dynamicNavbar&&((s=o.children(".navbar")).length>0?(e.$navbarsEl.parents(r).length||e.$el.prepend(e.$navbarsEl),e.setNavbarPosition(s,"current"),e.$navbarsEl.append(s),s.children(".title-large").length&&s.addClass("navbar-large"),o.children(".navbar").remove()):(e.$navbarsEl.addClass("navbar-hidden"),s.children(".title-large").length&&e.$navbarsEl.addClass("navbar-hidden navbar-large-hidden"))),e.currentRoute&&e.currentRoute.route&&(!0===e.currentRoute.route.master||"function"==typeof e.currentRoute.route.master&&e.currentRoute.route.master(t,e))&&e.params.masterDetailBreakpoint>0&&(o.addClass("page-master"),o.trigger("page:role",{role:"master"}),s&&s.length&&s.addClass("navbar-master"),n.checkMasterDetailBreakpoint());var i={route:e.currentRoute};e.currentRoute&&e.currentRoute.route&&e.currentRoute.route.options&&Vl(i,e.currentRoute.route.options),e.currentPageEl=o[0],e.dynamicNavbar&&s.length&&(e.currentNavbarEl=s[0]),e.removeThemeElements(o),e.dynamicNavbar&&s.length&&e.removeThemeElements(s),i.route.route.tab&&(f=!0,e.tabLoad(i.route.route.tab,Vl({},i))),e.pageCallback("init",o,s,"current",void 0,i),e.pageCallback("beforeIn",o,s,"current",void 0,i),e.pageCallback("afterIn",o,s,"current",void 0,i)})),o)if(d)(e.params.preloadPreviousPage||e.params[t.theme+"SwipeBack"])&&e.history.length>1&&e.back({preload:!0});else e.navigate(s,{initial:!0,browserHistory:!1,history:!1,animate:p,once:{pageAfterIn:function(){(e.params.preloadPreviousPage||e.params[t.theme+"SwipeBack"])&&e.history.length>2&&e.back({preload:!0})}}});o||f||(e.history.push(s),e.saveHistory())}!(s&&u&&c)||Op.state&&Op.state[n.id]||Op.initViewState(n.id,{url:s}),e.emit("local::init routerInit",e)},a.destroy=function(){var e=this;e.emit("local::destroy routerDestroy",e),Object.keys(e).forEach((function(t){e[t]=null,delete e[t]})),e=null},r}(au);jp.prototype.navigate=function(e,t){void 0===t&&(t={});var n,r,a,s,o,i,l,u=this;if(u.swipeBackActive)return u;if("string"==typeof e?n=e:(n=e.url,r=e.route,a=e.name,s=e.path,o=e.query,i=e.params),a||s)return(n=u.generateUrl({path:s,name:a,params:i,query:o}))?u.navigate(n,t):u;var c=u.app;if(Pp(u,"navigate"),"#"===n||""===n)return u;var p=n.replace("./","");if("/"!==p[0]&&0!==p.indexOf("#")){var d=u.currentRoute.parentPath||u.currentRoute.path;p=((d?d+"/":"/")+p).replace("///","/").replace("//","/")}if(!(l=r?Vl(u.parseRouteUrl(p),{route:Vl({},r)}):u.findMatchingRoute(p)))return u;if(l.route&&l.route.viewName){var h=l.route.viewName,f=c.views[h];if(!f)throw new Error('Framework7: There is no View with "'+h+'" name that was specified in this route');if(f!==u.view)return f.router.navigate(e,t)}if(l.route.redirect)return Mp.call(u,"forward",l,t);var m={};if(l.route.options?Vl(m,l.route.options,t):Vl(m,t),m.openIn&&(!u.params.ignoreOpenIn||u.params.ignoreOpenIn&&u.history.length>0))return function(e,t,n){var r={url:t,route:{path:t,options:Lp({},n,{openIn:void 0})}},a=Lp({},n);if("popup"===n.openIn&&(a.content='<div class="popup popup-router-open-in" data-url="'+t+'"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div>',r.route.popup=a),"loginScreen"===n.openIn&&(a.content='<div class="login-screen login-screen-router-open-in" data-url="'+t+'"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div>',r.route.loginScreen=a),"sheet"===n.openIn&&(a.content='<div class="sheet-modal sheet-modal-router-open-in" data-url="'+t+'"><div class="sheet-modal-inner"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div></div>',r.route.sheet=a),"popover"===n.openIn&&(a.targetEl=n.clickedEl||n.targetEl,a.content='<div class="popover popover-router-open-in" data-url="'+t+'"><div class="popover-inner"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div></div>',r.route.popover=a),n.openIn.indexOf("panel")>=0){var s=n.openIn.split(":"),o=s[1]||"left",i=s[2]||"cover";a.targetEl=n.clickedEl||n.targetEl,a.content='<div class="panel panel-router-open-in panel-'+o+" panel-"+i+'" data-url="'+t+'"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div>',r.route.panel=a}return e.navigate(r)}(u,p,m);function g(){var e=!1;function t(e,t){u.allowPageChange=!1;var n=!1;"popup popover sheet loginScreen actions customModal panel".split(" ").forEach((function(r){if(e[r]){n=!0;var a=Vl({},l,{route:e});u.allowPageChange=!0,u.modalLoad(r,a,Vl(m,t),"forward")}})),n||Fp(u,e,Vl(m,t),!0)}function n(){u.allowPageChange=!0}"popup popover sheet loginScreen actions customModal panel".split(" ").forEach((function(t){l.route[t]&&!e&&(e=!0,u.modalLoad(t,l,m,"forward"))})),l.route.keepAlive&&l.route.keepAliveData&&(Fp(u,{el:l.route.keepAliveData.pageEl},m,!1),e=!0),"url content component pageName el componentUrl".split(" ").forEach((function(t){var n;l.route[t]&&!e&&(e=!0,Fp(u,((n={})[t]=l.route[t],n),m,!1))})),e||(l.route.async&&(u.allowPageChange=!1,l.route.async.call(u,{router:u,to:m.route,from:u.currentRoute,resolve:t,reject:n,direction:"forward",app:c})),l.route.asyncComponent&&Dp(u,l.route.asyncComponent,t,n))}function v(){u.allowPageChange=!0}if(m.route=l,u.params.masterDetailBreakpoint>0&&l.route.masterRoute){var b=!0,y=!1;if(u.currentRoute&&u.currentRoute.route&&(!(!0===u.currentRoute.route.master||"function"==typeof u.currentRoute.route.master&&u.currentRoute.route.master(c,u))||u.currentRoute.route!==l.route.masterRoute&&u.currentRoute.route.path!==l.route.masterRoute.path||(b=!1),!u.currentRoute.route.masterRoute||u.currentRoute.route.masterRoute!==l.route.masterRoute&&u.currentRoute.route.masterRoute.path!==l.route.masterRoute.path||(b=!1,y=!0)),b||y&&t.reloadAll)return u.navigate({path:l.route.masterRoute.path,params:l.params||{}},{animate:!1,reloadAll:t.reloadAll,reloadCurrent:t.reloadCurrent,reloadPrevious:t.reloadPrevious,browserHistory:!t.initial,history:!t.initial,once:{pageAfterIn:function(){u.navigate(e,Vl({},t,{animate:!1,reloadAll:!1,reloadCurrent:!1,reloadPrevious:!1,history:!t.initial,browserHistory:!t.initial}))}}}),u}return Rp.call(u,l,u.currentRoute,(function(){l.route.modules?c.loadModules(Array.isArray(l.route.modules)?l.route.modules:[l.route.modules]).then((function(){g()})).catch((function(){v()})):g()}),(function(){v()}),"forward"),u},jp.prototype.refreshPage=function(){var e=this;return Pp(e,"refreshPage"),e.navigate(e.currentRoute.url,{ignoreCache:!0,reloadCurrent:!0})},jp.prototype.tabLoad=function(e,t){void 0===t&&(t={});var n,r,a=this,s=Vl({animate:a.params.animate,browserHistory:!0,history:!0,parentPageEl:null,preload:!1,on:{}},t);s.route&&(s.preload||s.route===a.currentRoute||(r=a.previousRoute,a.currentRoute=s.route),s.preload?(n=s.route,r=a.currentRoute):(n=a.currentRoute,r||(r=a.previousRoute)),a.params.browserHistory&&s.browserHistory&&!s.reloadPrevious&&Op.replace(a.view.id,{url:s.route.url},(a.params.browserHistoryRoot||"")+a.params.browserHistorySeparator+s.route.url),s.history&&(a.history[Math.max(a.history.length-1,0)]=s.route.url,a.saveHistory()));var o,i=Gc(s.parentPageEl||a.currentPageEl);o=i.length&&i.find("#"+e.id).length?i.find("#"+e.id).eq(0):a.view.selector?a.view.selector+" #"+e.id:"#"+e.id;var l,u=a.app.tab.show({tabEl:o,animate:s.animate,tabRoute:s.route}),c=u.$newTabEl,p=u.$oldTabEl,d=u.animated,h=u.onTabsChanged;if(c&&c.parents(".page").length>0&&s.route){var f=c.parents(".page")[0].f7Page;f&&s.route&&(f.route=s.route)}if(c[0].f7RouterTabLoaded)return p&&p.length?(d?h((function(){a.emit("routeChanged",a.currentRoute,a.previousRoute,a)})):a.emit("routeChanged",a.currentRoute,a.previousRoute,a),a):a;function m(t,n){var r=t.url,s=t.content,o=t.el,i=t.component,l=t.componentUrl;function u(t){a.allowPageChange=!0,t&&("string"==typeof t?c.html(t):(c.html(""),t.f7Component?t.f7Component.mount((function(e){c.append(e)})):c.append(t)),c[0].f7RouterTabLoaded=!0,function(t){a.removeThemeElements(c);var n=c;"string"!=typeof t&&(n=Gc(t)),n.trigger("tab:init tab:mounted",e),a.emit("tabInit tabMounted",c[0],e),p&&p.length&&(d?h((function(){a.emit("routeChanged",a.currentRoute,a.previousRoute,a),a.params.unloadTabContent&&a.tabRemove(p,c,e)})):(a.emit("routeChanged",a.currentRoute,a.previousRoute,a),a.params.unloadTabContent&&a.tabRemove(p,c,e)))}(t))}if(s)u(s);else if(o)u(o);else if(i||l)try{a.tabComponentLoader({tabEl:c[0],component:i,componentUrl:l,options:n,resolve:u,reject:function(){return a.allowPageChange=!0,a}})}catch(e){throw a.allowPageChange=!0,e}else r&&(a.xhrAbortController&&(a.xhrAbortController.abort(),a.xhrAbortController=!1),a.xhrRequest(r,n).then((function(e){u(e)})).catch((function(){a.allowPageChange=!0})))}function g(e,t){m(e,Vl(s,t))}function v(){a.allowPageChange=!0}return"url content component el componentUrl".split(" ").forEach((function(t){var n;e[t]&&(l=!0,m(((n={})[t]=e[t],n),s))})),e.async?e.async.call(a,{router:a,to:n,from:r,resolve:g,reject:v,app:a.app}):e.asyncComponent?Dp(a,e.asyncComponent,g,v):l||(a.allowPageChange=!0),a},jp.prototype.tabRemove=function(e,t,n){var r;e[0]&&(e[0].f7RouterTabLoaded=!1,delete e[0].f7RouterTabLoaded),e.children().each((function(e){e.f7Component&&(r=!0,Gc(e).trigger("tab:beforeremove",n),e.f7Component.destroy())})),r||e.trigger("tab:beforeremove",n),this.emit("tabBeforeRemove",e[0],t[0],n),this.removeTabContent(e[0],n)},jp.prototype.modalLoad=function(e,t,n,r){void 0===n&&(n={});var a,s=this,o=s.app,i="panel"===e,l=i?"panel":"modal",u=Vl({animate:s.params.animate,browserHistory:!0,history:!0,on:{},once:{}},n),c=Vl({},t.route[e]),p=t.route,d=function(e,t){var n,r=u.on,a=u.once;"open"===t&&(n=r.modalOpen||a.modalOpen||r.panelOpen||a.panelOpen),"close"===t&&(n=r.modalClose||a.modalClose||r.panelClose||a.panelClose),"closed"===t&&(n=r.modalClosed||a.modalClosed||r.panelClosed||a.panelClosed),n&&n(e)};function h(){var n=o[e].create(c);p.modalInstance=n;var r=n.el;function a(){n.close()}n.on(l+"Open",(function(){r||(s.removeThemeElements(n.el),n.$el.trigger(e.toLowerCase()+":init "+e.toLowerCase()+":mounted",t,n),s.emit((i?"":"modalInit")+" "+e+"Init "+e+"Mounted",n.el,t,n)),s.once("swipeBackMove",a),d(n,"open")})),n.on(l+"Close",(function(){s.off("swipeBackMove",a),n.closeByRouter||s.back(),d(n,"close")})),n.on(l+"Closed",(function(){n.$el.trigger(e.toLowerCase()+":beforeremove",t,n),n.emit((i?"":"modalBeforeRemove ")+e+"BeforeRemove",n.el,t,n);var r=n.el.f7Component;d(n,"closed"),r&&r.destroy(),_l((function(){(r||c.component||c.asyncComponent)&&s.removeModal(n.el),n.destroy(),delete n.route,delete p.modalInstance}))})),u.route&&(s.params.browserHistory&&u.browserHistory&&Op.push(s.view.id,{url:u.route.url,modal:e},(s.params.browserHistoryRoot||"")+s.params.browserHistorySeparator+u.route.url),u.route!==s.currentRoute&&(n.route=Vl(u.route,{modal:n}),s.currentRoute=n.route),u.history&&!u.reloadCurrent&&(s.history.push(u.route.url),s.saveHistory())),r&&(s.removeThemeElements(n.el),n.$el.trigger(e.toLowerCase()+":init "+e.toLowerCase()+":mounted",t,n),s.emit(l+"Init "+e+"Init "+e+"Mounted",n.el,t,n)),n.open(!1===u.animate||!0===u.animate?u.animate:void 0)}function f(e,t){var n=e.url,r=e.content,a=e.component,i=e.componentUrl;function l(e){e&&("string"==typeof e?c.content=e:e.f7Component?e.f7Component.mount((function(e){c.el=e,o.$el.append(e)})):c.el=e,h())}if(r)l(r);else if(a||i)try{s.modalComponentLoader({rootEl:o.el,component:a,componentUrl:i,options:t,resolve:l,reject:function(){return s.allowPageChange=!0,s}})}catch(e){throw s.allowPageChange=!0,e}else n?(s.xhrAbortController&&(s.xhrAbortController.abort(),s.xhrAbortController=!1),s.xhrRequest(n,t).then((function(e){c.content=e,h()})).catch((function(){s.allowPageChange=!0}))):h()}function m(e,t){f(e,Vl(u,t))}function g(){s.allowPageChange=!0}return"url content component el componentUrl template".split(" ").forEach((function(e){var t;c[e]&&!a&&(a=!0,f(((t={})[e]=c[e],t),u))})),a||"actions"!==e||h(),c.async&&c.async.call(s,{router:s,to:u.route,from:s.currentRoute,resolve:m,reject:g,direction:r,app:o}),c.asyncComponent&&Dp(s,c.asyncComponent,m,g),s},jp.prototype.modalRemove=function(e){Vl(e,{closeByRouter:!0}),e.close()},jp.prototype.back=function(){var e,t,n,r=this,a=Zl();if(r.swipeBackActive)return r;"object"==typeof(arguments.length<=0?void 0:arguments[0])?t=(arguments.length<=0?void 0:arguments[0])||{}:(e=arguments.length<=0?void 0:arguments[0],t=(arguments.length<=1?void 0:arguments[1])||{});var s=t,o=s.name,i=s.params,l=s.query;if(o)return(e=r.generateUrl({name:o,params:i,query:l}))?r.back(e,Vl({},t,{name:null,params:null,query:null})):r;var u=r.app;Pp(r,"back");var c,p=r.currentRoute.modal;if(p||"popup popover sheet loginScreen actions customModal panel".split(" ").forEach((function(e){r.currentRoute.route[e]&&(p=!0,c=e)})),p&&!t.preload){var d,h=r.currentRoute.modal||r.currentRoute.route.modalInstance||u[c].get(),f=r.history[r.history.length-2];if(h&&h.$el){var m=h.$el.prevAll(".modal-in");if(m.length&&m[0].f7Modal){var g=m[0];r.$el.parents(g).length||(d=g.f7Modal.route)}}if(d||(d=r.findMatchingRoute(f)),!d&&f&&(d={url:f,path:f.split("?")[0],query:Dl(f),route:{path:f.split("?")[0],url:f}}),!(e&&0!==e.replace(/[# ]/g,"").trim().length||d&&h))return r;var v=t.force&&d&&e;if(d&&h){var b=a.ie||a.edge||a.firefox&&!a.ios,y=r.params.browserHistory&&!1!==t.browserHistory,w=r.currentRoute&&r.currentRoute.route&&r.currentRoute.route.options&&!1===r.currentRoute.route.options.browserHistory;!y||b||w||Op.back(),r.currentRoute=d,r.history.pop(),r.saveHistory(),y&&b&&!w&&Op.back(),r.modalRemove(h),v&&r.navigate(e,{reloadCurrent:!0})}else h&&(r.modalRemove(h),e&&r.navigate(e,{reloadCurrent:!0}));return r}var x,k=r.$el.children(".page-current").prevAll(".page-previous:not(.page-master)").eq(0);if(r.params.masterDetailBreakpoint>0){var C=[];r.$el.children(".page").each((function(e){C.push(e.className)}));var S=r.$el.children(".page-current").prevAll(".page-master").eq(0);if(S.length){var E=r.history[r.history.length-2],T=r.findMatchingRoute(E);T&&S[0].f7Page&&T.route===S[0].f7Page.route.route&&(k=S,t.preload||(x=u.width>=r.params.masterDetailBreakpoint))}}if(!t.force&&k.length&&!x){if(r.params.browserHistory&&k[0].f7Page&&r.history[r.history.length-2]!==k[0].f7Page.route.url)return r.back(r.history[r.history.length-2],Vl(t,{force:!0})),r;var $=k[0].f7Page.route;return t.preload&&k.hasClass("stacked")?(Vp(r,{el:k},Vl(t,{route:$})),r):(Rp.call(r,$,r.currentRoute,(function(){Vp(r,{el:k},Vl(t,{route:$}))}),(function(){}),"backward"),r)}if("#"===e&&(e=void 0),e&&"/"!==e[0]&&0!==e.indexOf("#")&&(e=((r.path||"/")+e).replace("//","/")),!e&&r.history.length>1&&(e=r.history[r.history.length-2]),x&&!t.force&&r.history[r.history.length-3])return r.back(r.history[r.history.length-3],Vl({},t||{},{force:!0,animate:!1}));if(x&&!t.force)return r;if((n=r.findMatchingRoute(e))||e&&(n={url:e,path:e.split("?")[0],query:Dl(e),route:{path:e.split("?")[0],url:e}}),!n)return r;if(n.route.redirect)return Mp.call(r,"backward",n,t);var I,N={};if(n.route.options?Vl(N,n.route.options,t):Vl(N,t),N.route=n,N.force&&r.params.stackPages&&(r.$el.children(".page-previous.stacked").each((function(e){e.f7Page&&e.f7Page.route&&e.f7Page.route.url===n.url&&(I=!0,Vp(r,{el:e},N))})),I))return r;function O(){var e=!1;function t(e,t){r.allowPageChange=!1,Vp(r,e,Vl(N,t),!0)}function a(){r.allowPageChange=!0}n.route.keepAlive&&n.route.keepAliveData&&(Vp(r,{el:n.route.keepAliveData.pageEl},N),e=!0),"url content component pageName el componentUrl".split(" ").forEach((function(t){var a;n.route[t]&&!e&&(e=!0,Vp(r,((a={})[t]=n.route[t],a),N))})),e||(n.route.async&&(r.allowPageChange=!1,n.route.async.call(r,{router:r,to:n,from:r.currentRoute,resolve:t,reject:a,direction:"backward",app:u})),n.route.asyncComponent&&Dp(r,n.route.asyncComponent,t,a))}function A(){r.allowPageChange=!0}return N.preload?O():Rp.call(r,n,r.currentRoute,(function(){n.route.modules?u.loadModules(Array.isArray(n.route.modules)?n.route.modules:[n.route.modules]).then((function(){O()})).catch((function(){A()})):O()}),(function(){A()}),"backward"),r},jp.prototype.clearPreviousHistory=function(){var e=this;Pp(e,"clearPreviousHistory");var t=e.history[e.history.length-1];!function(e){Pp(e,"clearPreviousPages");var t=e.app,n=e.dynamicNavbar;e.$el.children(".page").filter((function(t){return!(!e.currentRoute||!e.currentRoute.modal&&!e.currentRoute.panel)||t!==e.currentPageEl})).each((function(r){var a=Gc(r),s=Gc(t.navbar.getElByPage(a));e.params.stackPages&&e.initialPages.indexOf(a[0])>=0?(a.addClass("stacked"),n&&s.addClass("stacked")):(e.pageCallback("beforeRemove",a,s,"previous",void 0,{}),e.removePage(a),n&&s.length&&e.removeNavbar(s))}))}(e),e.history=[t],e.view.history=[t],e.saveHistory()};var Up=jp,Gp={name:"router",static:{Router:Up},instance:{cache:{xhr:[],templates:[],components:[]}},create:function(){var e=this;e.app?e.params.router&&(e.router=new Up(e.app,e)):e.router=new Up(e)}};var qp=function(e){var t=e.app,n=Jl();if(!e.resizableInitialized){Vl(e,{resizable:!0,resizableWidth:null,resizableInitialized:!0});var r=Gc("html"),a=e.$el;if(a){var s,o,i,l,u,c,p,d={};(s=e.$el.children(".view-resize-handler")).length||(e.$el.append('<div class="view-resize-handler"></div>'),s=e.$el.children(".view-resize-handler")),e.$resizeHandlerEl=s,a.addClass("view-resizable");var h=!!n.passiveListener&&{passive:!0};e.$el.on(t.touchEvents.start,".view-resize-handler",m,h),t.on("touchmove:active",g),t.on("touchend:passive",v),t.on("resize",b),e.on("beforeOpen",b),e.once("viewDestroy",(function(){a.removeClass("view-resizable"),e.$resizeHandlerEl.remove(),e.$el.off(t.touchEvents.start,".view-resize-handler",m,h),t.off("touchmove:active",g),t.off("touchend:passive",v),t.off("resize",b),e.off("beforeOpen",b)}))}}function f(e){if(!e)return null;if(e.indexOf("%")>=0||e.indexOf("vw")>=0)return parseInt(e,10)/100*t.width;var n=parseInt(e,10);return Number.isNaN(n)?null:n}function m(t){if(e.resizable&&a.hasClass("view-resizable")&&a.hasClass("view-master-detail")){d.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,d.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,i=!1,o=!0;var n=a.children(".page-master");c=f(n.css("min-width")),p=f(n.css("max-width"))}}function g(n){if(o){n.f7PreventSwipePanel=!0;var h="touchmove"===n.type?n.targetTouches[0].pageX:n.pageX;i||(u=s[0].offsetLeft+s[0].offsetWidth,a.addClass("view-resizing"),r.css("cursor","col-resize")),i=!0,n.preventDefault(),l=h-d.x;var f=u+l;c&&!Number.isNaN(c)&&(f=Math.max(f,c)),p&&!Number.isNaN(p)&&(f=Math.min(f,p)),f=Math.min(Math.max(f,0),t.width),e.resizableWidth=f,r[0].style.setProperty("--f7-page-master-width",f+"px"),a.trigger("view:resize",f),e.emit("local::resize viewResize",e,f)}}function v(){if(Gc("html").css("cursor",""),!o||!i)return o=!1,void(i=!1);o=!1,i=!1,r[0].style.setProperty("--f7-page-master-width",e.resizableWidth+"px"),a.removeClass("view-resizing")}function b(){e.resizableWidth&&(c=f(s.css("min-width")),p=f(s.css("max-width")),c&&!Number.isNaN(c)&&e.resizableWidth<c&&(e.resizableWidth=Math.max(e.resizableWidth,c)),p&&!Number.isNaN(p)&&e.resizableWidth>p&&(e.resizableWidth=Math.min(e.resizableWidth,p)),e.resizableWidth=Math.min(Math.max(e.resizableWidth,0),t.width),r[0].style.setProperty("--f7-page-master-width",e.resizableWidth+"px"))}};function Xp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kp(e,t){return Kp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Kp(e,t)}var Yp=function(e){var t,n;function r(t,n,r){var a;void 0===r&&(r={});var s,o=Xp(a=e.call(this,r,[t])||this);if(!o.params.routerId&&!Gc(n).length){var i="Framework7: can't create a View instance because ";throw new Error(i+="string"==typeof n?'the selector "'+n+"\" didn't match any element":"el must be an HTMLElement or Dom7 object")}return o.params=Vl({el:n},{routes:[],routesAdd:[]},t.params.view,r),o.params.routes.length>0?o.routes=o.params.routes:o.routes=[].concat(t.routes,o.params.routesAdd),Vl(!1,o,{app:t,name:o.params.name,main:o.params.main,history:[],scrollHistory:{}}),o.useModules(),t.views.push(o),o.main&&(t.views.main=o),o.name&&(t.views[o.name]=o),o.index=t.views.indexOf(o),s=o.name?"view_"+o.name:o.main?"view_main":"view_"+o.index,o.id=s,o.params.init?(t.initialized?o.init():t.on("init",(function(){o.init()})),o||Xp(a)):o||Xp(a)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Kp(t,n);var a=r.prototype;return a.destroy=function(){var e=this,t=e.app;e.$el.trigger("view:beforedestroy"),e.emit("local::beforeDestroy viewBeforeDestroy",e),t.off("resize",e.checkMasterDetailBreakpoint),e.main?(t.views.main=null,delete t.views.main):e.name&&(t.views[e.name]=null,delete t.views[e.name]),e.$el[0].f7View=null,delete e.$el[0].f7View,t.views.splice(t.views.indexOf(e),1),e.params.router&&e.router&&e.router.destroy(),e.emit("local::destroy viewDestroy",e),Object.keys(e).forEach((function(t){e[t]=null,delete e[t]})),e=null},a.checkMasterDetailBreakpoint=function(e){var t=this,n=t.app,r=t.$el.hasClass("view-master-detail"),a=n.width>=t.params.masterDetailBreakpoint&&t.$el.children(".page-master").length;void 0===e&&a||!0===e?(t.$el.addClass("view-master-detail"),r||(t.emit("local::masterDetailBreakpoint viewMasterDetailBreakpoint",t),t.$el.trigger("view:masterDetailBreakpoint"))):(t.$el.removeClass("view-master-detail"),r&&(t.emit("local::masterDetailBreakpoint viewMasterDetailBreakpoint",t),t.$el.trigger("view:masterDetailBreakpoint")))},a.initMasterDetail=function(){var e=this,t=e.app;e.checkMasterDetailBreakpoint=e.checkMasterDetailBreakpoint.bind(e),e.checkMasterDetailBreakpoint(),e.params.masterDetailResizable&&qp(e),t.on("resize",e.checkMasterDetailBreakpoint)},a.mount=function(e){var t,n,r=this,a=r.app,s=r.params.el||e,o=Gc(s);t="string"==typeof s?s:(o.attr("id")?"#"+o.attr("id"):"")+(o.attr("class")?"."+o.attr("class").replace(/ /g,".").replace(".active",""):""),"ios"===a.theme&&r.params.iosDynamicNavbar&&0===(n=o.children(".navbars").eq(0)).length&&(n=Gc('<div class="navbars"></div>')),Vl(r,{$el:o,el:o[0],main:r.main||o.hasClass("view-main"),$navbarsEl:n,navbarsEl:n?n[0]:void 0,selector:t}),r.main&&(a.views.main=r),o&&o[0]&&(o[0].f7View=r),r.emit("local::mount viewMount",r)},a.init=function(e){var t=this;t.mount(e),t.params.router&&(t.params.masterDetailBreakpoint>0&&t.initMasterDetail(),t.router.init(),t.$el.trigger("view:init"),t.emit("local::init viewInit",t))},r}(au);Yp.use(Gp);var Jp=Yp;var Zp={name:"clicks",params:{clicks:{externalLinks:".external"}},on:{init:function(){!function(e){e.on("click",(function(t){var n=wl(),r=Gc(t.target),a=r.closest("a"),s=a.length>0,o=s&&a.attr("href");if(s&&(a.is(e.params.clicks.externalLinks)||o&&o.indexOf("javascript:")>=0)){var i=a.attr("target");o&&n.cordova&&n.cordova.InAppBrowser&&("_system"===i||"_blank"===i)?(t.preventDefault(),n.cordova.InAppBrowser.open(o,i)):o&&n.Capacitor&&n.Capacitor.Plugins&&n.Capacitor.Plugins.Browser&&("_system"===i||"_blank"===i)&&(t.preventDefault(),n.Capacitor.Plugins.Browser.open({url:o}))}else{Object.keys(e.modules).forEach((function(n){var a=e.modules[n].clicks;a&&(t.preventF7Router||Object.keys(a).forEach((function(n){var s=r.closest(n).eq(0);s.length>0&&a[n].call(e,s,s.dataset(),t)})))}));var l={};if(s&&(t.preventDefault(),l=a.dataset()),l.clickedEl=a[0],!t.preventF7Router&&!a.hasClass("prevent-router")&&!a.hasClass("router-prevent")&&(o&&o.length>0&&"#"!==o[0]||a.hasClass("back"))){var u;if(l.view&&"current"===l.view?u=e.views.current:l.view?u=Gc(l.view)[0].f7View:(u=r.parents(".view")[0]&&r.parents(".view")[0].f7View,!a.hasClass("back")&&u&&u.params.linksView&&("string"==typeof u.params.linksView?u=Gc(u.params.linksView)[0].f7View:u.params.linksView instanceof Jp&&(u=u.params.linksView))),u||e.views.main&&(u=e.views.main),!u||!u.router)return;a[0].f7RouteProps&&(l.props=a[0].f7RouteProps),a.hasClass("back")?u.router.back(o,l):u.router.navigate(o,l)}}}))}(this)}}},Qp={name:"history",static:{history:Op},on:{init:function(){Op.init(this)}}},ed={registrations:[],register:function(e,t){var n=this;return"serviceWorker"in wl().navigator&&n.serviceWorker.container?new Promise((function(r,a){n.serviceWorker.container.register(e,t?{scope:t}:{}).then((function(e){ed.registrations.push(e),n.emit("serviceWorkerRegisterSuccess",e),r(e)})).catch((function(e){n.emit("serviceWorkerRegisterError",e),a(e)}))})):new Promise((function(e,t){t(new Error("Service worker is not supported"))}))},unregister:function(e){var t,n=this;return"serviceWorker"in wl().navigator&&n.serviceWorker.container?(t=e?Array.isArray(e)?e:[e]:ed.registrations,Promise.all(t.map((function(e){return new Promise((function(t,r){e.unregister().then((function(){ed.registrations.indexOf(e)>=0&&ed.registrations.splice(ed.registrations.indexOf(e),1),n.emit("serviceWorkerUnregisterSuccess",e),t()})).catch((function(t){n.emit("serviceWorkerUnregisterError",e,t),r(t)}))}))})))):new Promise((function(e,t){t(new Error("Service worker is not supported"))}))}},td={name:"sw",params:{serviceWorker:{path:void 0,scope:void 0}},create:function(){var e=this,t=wl();Vl(e,{serviceWorker:{container:"serviceWorker"in t.navigator?t.navigator.serviceWorker:void 0,registrations:ed.registrations,register:ed.register.bind(e),unregister:ed.unregister.bind(e)}})},on:{init:function(){var e=wl();if("serviceWorker"in e.navigator){var t=this;if(!(t.device.cordova||e.Capacitor&&e.Capacitor.isNative)&&t.serviceWorker.container){var n=t.params.serviceWorker.path,r=t.params.serviceWorker.scope;if(n&&(!Array.isArray(n)||n.length))(Array.isArray(n)?n:[n]).forEach((function(e){t.serviceWorker.register(e,r)}))}}}}};function nd(){return nd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nd.apply(this,arguments)}var rd=function(e){void 0===e&&(e={});var t={__store:!0},n=nd({},e.state||{}),r=nd({},e.actions||{}),a=nd({},e.getters||{}),s=Vl({},n),o=[],i={},l={};Object.keys(a).forEach((function(e){i[e]=[],l[e]=[]}));var u=function(e){return a[e]({state:t.state})},c=function(e,t){l[e]||(l[e]=[]),l[e].push(t)};t.__removeCallback=function(e){!function(e){Object.keys(l).forEach((function(t){var n=l[t];n.indexOf(e)>=0&&n.splice(n.indexOf(e),1)}))}(e)};var p=function(e,t){if(void 0===t&&(t=!0),"constructor"!==e){o=[];var n=u(e);!function(e,t){i[e]||(i[e]=[]),t.forEach((function(t){i[e].indexOf(t)<0&&i[e].push(t)}))}(e,o);var r={value:n,onUpdated:function(t){c(e,t)}};if(!t)return r;var a=function(e){r.value=e};return r.__callback=a,c(e,a),r}};return t.state=new Proxy(s,{set:function(e,t,n){var r;return e[t]=n,r=t,Object.keys(i).filter((function(e){return i[e].indexOf(r)>=0})).forEach((function(e){l[e]&&l[e].length&&l[e].forEach((function(t){t(u(e))}))})),!0},get:function(e,t){return o.push(t),e[t]}}),t.getters=new Proxy(a,{set:function(){return!1},get:function(e,t){if(e[t])return p(t,!0)}}),t._gettersPlain=new Proxy(a,{set:function(){return!1},get:function(e,t){if(e[t])return p(t,!1)}}),t.dispatch=function(e,n){return new Promise((function(a,s){if(!r[e])throw s(),new Error('Framework7: Store action "'+e+'" is not found');a(r[e]({state:t.state,dispatch:t.dispatch},n))}))},t},ad={name:"store",static:{createStore:rd},proto:{createStore:rd}},sd=function(){var e=wl();return e.Capacitor&&e.Capacitor.isNative&&e.Capacitor.Plugins&&e.Capacitor.Plugins.StatusBar},od={hide:function(){var e=wl();Zl().cordova&&e.StatusBar&&e.StatusBar.hide(),sd()&&e.Capacitor.Plugins.StatusBar.hide()},show:function(){var e=wl();Zl().cordova&&e.StatusBar&&e.StatusBar.show(),sd()&&e.Capacitor.Plugins.StatusBar.show()},onClick:function(){var e;(e=Gc(".popup.modal-in").length>0?Gc(".popup.modal-in").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):Gc(".panel.panel-in").length>0?Gc(".panel.panel-in").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):Gc(".views > .view.tab-active").length>0?Gc(".views > .view.tab-active").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):Gc(".views").length>0?Gc(".views").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):this.$el.children(".view").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"))&&e.length>0&&(e.hasClass("tab")&&(e=e.parent(".tabs").children(".page-content.tab-active")),e.length>0&&e.scrollTop(0,300))},setTextColor:function(e){var t=wl();Zl().cordova&&t.StatusBar&&("white"===e?t.StatusBar.styleLightContent():t.StatusBar.styleDefault()),sd()&&("white"===e?t.Capacitor.Plugins.StatusBar.setStyle({style:"DARK"}):t.Capacitor.Plugins.StatusBar.setStyle({style:"LIGHT"}))},setBackgroundColor:function(e){var t=wl();Zl().cordova&&t.StatusBar&&t.StatusBar.backgroundColorByHexString(e),sd()&&t.Capacitor.Plugins.StatusBar.setBackgroundColor({color:e})},isVisible:function(){var e=wl(),t=Zl();return new Promise((function(n){t.cordova&&e.StatusBar&&n(e.StatusBar.isVisible),sd()&&e.Capacitor.Plugins.StatusBar.getInfo().then((function(e){n(e.visible)})),n(!1)}))},overlaysWebView:function(e){void 0===e&&(e=!0);var t=wl();Zl().cordova&&t.StatusBar&&t.StatusBar.overlaysWebView(e),sd()&&t.Capacitor.Plugins.StatusBar.setOverlaysWebView({overlay:e})},init:function(){var e=wl(),t=Zl(),n=this.params.statusbar;if(n.enabled){var r=t.cordova&&e.StatusBar,a=sd();(r||a)&&(n.scrollTopOnClick&&Gc(e).on("statusTap",od.onClick.bind(this)),t.ios&&(n.iosOverlaysWebView?od.overlaysWebView(!0):od.overlaysWebView(!1),"white"===n.iosTextColor?od.setTextColor("white"):od.setTextColor("black")),t.android&&(n.androidOverlaysWebView?od.overlaysWebView(!0):od.overlaysWebView(!1),"white"===n.androidTextColor?od.setTextColor("white"):od.setTextColor("black"))),n.iosBackgroundColor&&t.ios&&od.setBackgroundColor(n.iosBackgroundColor),n.androidBackgroundColor&&t.android&&od.setBackgroundColor(n.androidBackgroundColor)}}},id={name:"statusbar",params:{statusbar:{enabled:!0,scrollTopOnClick:!0,iosOverlaysWebView:!0,iosTextColor:"black",iosBackgroundColor:null,androidOverlaysWebView:!1,androidTextColor:"black",androidBackgroundColor:null}},create:function(){Kl(this,{statusbar:od})},on:{init:function(){od.init.call(this)}}};var ld={name:"view",params:{view:{init:!0,name:void 0,main:!1,router:!0,linksView:null,stackPages:!1,xhrCache:!0,xhrCacheIgnore:[],xhrCacheIgnoreGetParameters:!1,xhrCacheDuration:6e5,componentCache:!0,preloadPreviousPage:!0,allowDuplicateUrls:!1,reloadPages:!1,reloadDetail:!1,masterDetailBreakpoint:0,masterDetailResizable:!1,removeElements:!0,removeElementsWithTimeout:!1,removeElementsTimeout:0,restoreScrollTopOnBack:!0,unloadTabContent:!0,passRouteQueryToRequest:!0,passRouteParamsToRequest:!1,loadInitialPage:!0,iosSwipeBack:!0,iosSwipeBackAnimateShadow:!0,iosSwipeBackAnimateOpacity:!0,iosSwipeBackActiveArea:30,iosSwipeBackThreshold:0,mdSwipeBack:!1,mdSwipeBackAnimateShadow:!0,mdSwipeBackAnimateOpacity:!1,mdSwipeBackActiveArea:30,mdSwipeBackThreshold:0,auroraSwipeBack:!1,auroraSwipeBackAnimateShadow:!1,auroraSwipeBackAnimateOpacity:!0,auroraSwipeBackActiveArea:30,auroraSwipeBackThreshold:0,browserHistory:!1,browserHistoryRoot:void 0,browserHistoryAnimate:!0,browserHistoryAnimateOnLoad:!1,browserHistorySeparator:"#!",browserHistoryOnLoad:!0,browserHistoryInitialMatch:!1,browserHistoryStoreHistory:!0,animate:!0,iosDynamicNavbar:!0,iosAnimateNavbarBackIcon:!0,iosPageLoadDelay:0,mdPageLoadDelay:0,auroraPageLoadDelay:0,routesBeforeEnter:null,routesBeforeLeave:null}},static:{View:Jp},create:function(){var e=this;Vl(e,{views:Vl([],{create:function(t,n){return new Jp(e,t,n)},get:function(e){var t=Gc(e);if(t.length&&t[0].f7View)return t[0].f7View}})}),Object.defineProperty(e.views,"current",{enumerable:!0,configurable:!0,get:function(){return function(e){var t=Gc(".popover.modal-in .view"),n=Gc(".popup.modal-in .view"),r=Gc(".panel.panel-in .view"),a=Gc(".views");0===a.length&&(a=e.$el);var s=a.children(".view");if(0===s.length&&(s=a.children(".tabs").children(".view")),s.length>1&&s.hasClass("tab")&&0===(s=a.children(".view.tab-active")).length&&(s=a.children(".tabs").children(".view.tab-active")),t.length>0&&t[0].f7View)return t[0].f7View;if(n.length>0&&n[0].f7View)return n[0].f7View;if(r.length>0&&r[0].f7View)return r[0].f7View;if(s.length>0){if(1===s.length&&s[0].f7View)return s[0].f7View;if(s.length>1)return e.views.main}}(e)}}),e.view=e.views},on:{init:function(){var e=this;Gc(".view-init").each((function(t){if(!t.f7View){var n=Gc(t).dataset();e.views.create(t,n)}}))},"modalOpen panelOpen":function(e){var t=this;e.$el.find(".view-init").each((function(e){if(!e.f7View){var n=Gc(e).dataset();t.views.create(e,n)}}))},"modalBeforeDestroy panelBeforeDestroy":function(e){e&&e.$el&&e.$el.find(".view-init").each((function(e){var t=e.f7View;t&&t.destroy()}))}},vnode:{"view-init":{insert:function(e){var t=e.elm;if(!t.f7View){var n=Gc(t).dataset();this.views.create(t,n)}},destroy:function(e){var t=e.elm.f7View;t&&t.destroy()}}}},ud={size:function(e){var t=this,n=Gc(e);if(n.hasClass("navbars"))n=n.children(".navbar").each((function(e){t.navbar.size(e)}));else{var r=n.children(".navbar-inner");if(r.length){var a=r.hasClass("navbar-inner-centered-title")||t.params.navbar[t.theme+"CenterTitle"],s="ios"===t.theme&&!t.params.navbar[t.theme+"CenterTitle"];if((a||s)&&!(n.hasClass("stacked")||n.parents(".stacked").length>0||n.parents(".tab:not(.tab-active)").length>0||n.parents(".popup:not(.modal-in)").length>0)){"ios"!==t.theme&&t.params.navbar[t.theme+"CenterTitle"]&&r.addClass("navbar-inner-centered-title"),"ios"!==t.theme||t.params.navbar.iosCenterTitle||r.addClass("navbar-inner-left-title");var o,i,l,u,c=n.parents(".view").eq(0),p=t.rtl?r.children(".right"):r.children(".left"),d=t.rtl?r.children(".left"):r.children(".right"),h=r.children(".title"),f=r.children(".subnavbar"),m=0===p.length,g=0===d.length,v=m?0:p.outerWidth(!0),b=g?0:d.outerWidth(!0),y=h.outerWidth(!0),w=r.styles(),x=r[0].offsetWidth-parseInt(w.paddingLeft,10)-parseInt(w.paddingRight,10),k=n.hasClass("navbar-previous"),C=r.hasClass("sliding");c.length>0&&c[0].f7View&&(i=(o=c[0].f7View.router)&&o.dynamicNavbar),g&&(l=x-y),m&&(l=0),m||g||(l=(x-b-y+v)/2);var S=(x-y)/2;x-v-b>y?(S<v&&(S=v),S+y>x-b&&(S=x-b-y),u=S-l):u=0;var E=t.rtl?-1:1;if(i&&"ios"===t.theme){if(h.hasClass("sliding")||h.length>0&&C){var T=-(l+u)*E,$=(x-l-u-y)*E;if(k&&o&&o.params.iosAnimateNavbarBackIcon){var I=n.parent().find(".navbar-current").children(".left.sliding").find(".back .icon ~ span");I.length>0&&(T+=I[0].offsetLeft)}h[0].f7NavbarLeftOffset=T,h[0].f7NavbarRightOffset=$}if(!m&&(p.hasClass("sliding")||C))if(t.rtl)p[0].f7NavbarLeftOffset=-(x-p[0].offsetWidth)/2*E,p[0].f7NavbarRightOffset=v*E;else if(p[0].f7NavbarLeftOffset=-v,p[0].f7NavbarRightOffset=(x-p[0].offsetWidth)/2,o&&o.params.iosAnimateNavbarBackIcon&&p.find(".back .icon").length>0&&p.find(".back .icon ~ span").length){var N=p[0].f7NavbarLeftOffset,O=p[0].f7NavbarRightOffset;p[0].f7NavbarLeftOffset=0,p[0].f7NavbarRightOffset=0,p.find(".back .icon ~ span")[0].f7NavbarLeftOffset=N,p.find(".back .icon ~ span")[0].f7NavbarRightOffset=O-p.find(".back .icon")[0].offsetWidth}g||!d.hasClass("sliding")&&!C||(t.rtl?(d[0].f7NavbarLeftOffset=-b*E,d[0].f7NavbarRightOffset=(x-d[0].offsetWidth)/2*E):(d[0].f7NavbarLeftOffset=-(x-d[0].offsetWidth)/2,d[0].f7NavbarRightOffset=b)),f.length&&(f.hasClass("sliding")||C)&&(f[0].f7NavbarLeftOffset=t.rtl?f[0].offsetWidth:-f[0].offsetWidth,f[0].f7NavbarRightOffset=-f[0].f7NavbarLeftOffset)}if(a){var A=u;t.rtl&&m&&g&&h.length>0&&(A=-A),h.css({left:A+"px"})}}}}},hide:function(e,t,n,r){void 0===t&&(t=!0),void 0===n&&(n=!1),void 0===r&&(r=!1);var a=this,s=Gc(e),o=s.hasClass("navbar")&&s.parent(".navbars").length&&!r;if(o&&(s=s.parents(".navbars")),s.length&&!s.hasClass("navbar-hidden")){var i="navbar-hidden"+(t?" navbar-transitioning":"");(o?s.find(".navbar-current .title-large").length:s.find(".title-large").length)&&(i+=" navbar-large-hidden"),n&&(i+=" navbar-hidden-statusbar"),s.transitionEnd((function(){s.removeClass("navbar-transitioning")})),s.addClass(i),o?s.children(".navbar").each((function(e){Gc(e).trigger("navbar:hide"),a.emit("navbarHide",e)})):(s.trigger("navbar:hide"),a.emit("navbarHide",s[0]))}},show:function(e,t,n){void 0===e&&(e=".navbar-hidden"),void 0===t&&(t=!0),void 0===n&&(n=!1);var r=this,a=Gc(e),s=a.hasClass("navbar")&&a.parent(".navbars").length&&!n;s&&(a=a.parents(".navbars")),a.length&&a.hasClass("navbar-hidden")&&(t&&(a.addClass("navbar-transitioning"),a.transitionEnd((function(){a.removeClass("navbar-transitioning")}))),a.removeClass("navbar-hidden navbar-large-hidden navbar-hidden-statusbar"),s?a.children(".navbar").each((function(e){Gc(e).trigger("navbar:show"),r.emit("navbarShow",e)})):(a.trigger("navbar:show"),r.emit("navbarShow",a[0])))},getElByPage:function(e){var t,n,r;if(e.$navbarEl||e.$el?(r=e,t=e.$el):(t=Gc(e)).length>0&&(r=t[0].f7Page),r&&r.$navbarEl&&r.$navbarEl.length>0?n=r.$navbarEl:t&&(n=t.children(".navbar")),n&&(!n||0!==n.length))return n[0]},getPageByEl:function(e){var t,n=Gc(e);return n.parents(".page").length?n.parents(".page")[0]:(n.parents(".view").find(".page").each((function(e){e&&e.f7Page&&e.f7Page.navbarEl&&n[0]===e.f7Page.navbarEl&&(t=e)})),t)},collapseLargeTitle:function(e){var t=this,n=Gc(e);if(!(n.hasClass("navbars")&&((n=n.find(".navbar")).length>1&&(n=Gc(e).find(".navbar-large.navbar-current")),n.length>1||!n.length))){var r=Gc(t.navbar.getPageByEl(n));n.addClass("navbar-large-collapsed"),r.eq(0).addClass("page-with-navbar-large-collapsed").trigger("page:navbarlargecollapsed"),t.emit("pageNavbarLargeCollapsed",r[0]),n.trigger("navbar:collapse"),t.emit("navbarCollapse",n[0])}},expandLargeTitle:function(e){var t=this,n=Gc(e);if(!(n.hasClass("navbars")&&((n=n.find(".navbar-large")).length>1&&(n=Gc(e).find(".navbar-large.navbar-current")),n.length>1||!n.length))){var r=Gc(t.navbar.getPageByEl(n));n.removeClass("navbar-large-collapsed"),r.eq(0).removeClass("page-with-navbar-large-collapsed").trigger("page:navbarlargeexpanded"),t.emit("pageNavbarLargeExpanded",r[0]),n.trigger("navbar:expand"),t.emit("navbarExpand",n[0])}},toggleLargeTitle:function(e){var t=Gc(e);t.hasClass("navbars")&&((t=t.find(".navbar-large")).length>1&&(t=Gc(e).find(".navbar-large.navbar-current")),t.length>1||!t.length)||(t.hasClass("navbar-large-collapsed")?this.navbar.expandLargeTitle(t):this.navbar.collapseLargeTitle(t))},initNavbarOnScroll:function(e,t,n,r,a){var s,o,i,l,u,c,p,d,h,f,m,g,v,b,y=this,w=Jl(),x=Gc(e),k=Gc(t),C=k.find(".title-large"),S=C.length||k.hasClass(".navbar-large"),E=44,T=y.params.navbar.snapPageScrollToLargeTitle,$=y.params.navbar.snapPageScrollToTransparentNavbar;(r||n&&S)&&((h=k.css("--f7-navbar-large-title-height"))&&h.indexOf("px")>=0?(h=parseInt(h,10),Number.isNaN(h)&&C.length?h=C[0].offsetHeight:Number.isNaN(h)&&("ios"===y.theme?h=52:"md"===y.theme?h=48:"aurora"===y.theme&&(h=38))):C.length?h=C[0].offsetHeight:"ios"===y.theme?h=52:"md"===y.theme?h=48:"aurora"===y.theme&&(h=38)),n&&S&&(E+=h);function I(){x.find(".page-content").each((function(e){e.f7ScrollableDistance=e.scrollHeight-e.offsetHeight}))}function N(){k.hasClass("with-searchbar-expandable-enabled")||!g||o<0||(o>=h/2&&o<h?Gc(g).scrollTop(h,100):o<h&&Gc(g).scrollTop(0,200))}function O(){k.hasClass("with-searchbar-expandable-enabled")||!g||o<0||(o>=f/2&&o<f?Gc(g).scrollTop(f,100):o<f&&Gc(g).scrollTop(0,200))}var A=null,M=null;function _(e){g=this,e&&e.target&&e.target!==g||(o=g.scrollTop,m=o,r?function(e){if(!k.hasClass("navbar-hidden")&&!k.parent(".navbars").hasClass("navbar-hidden")){var t=k.hasClass("navbar-large-transparent")||k.hasClass("navbar-large")&&k.hasClass("navbar-transparent");A=M;var n=Math.min(h,e.f7ScrollableDistance||h);M=Math.min(Math.max(o/n,0),1);var r=A>0&&A<1;k.hasClass("with-searchbar-expandable-enabled")||(d=k.hasClass("navbar-large-collapsed"),0===M&&d?y.navbar.expandLargeTitle(k[0]):1!==M||d||y.navbar.collapseLargeTitle(k[0]),0===M&&d||0===M&&r||1===M&&!d||1===M&&r?("md"===y.theme&&k.find(".navbar-inner").css("overflow",""),k.find(".title").css("opacity",""),k.find(".title-large-text, .subnavbar").css("transform",""),t?k.find(".navbar-bg").css("opacity",""):k.find(".navbar-bg").css("transform","")):M>0&&M<1&&("md"===y.theme&&k.find(".navbar-inner").css("overflow","visible"),k.find(".title").css("opacity",M),k.find(".title-large-text, .subnavbar").css("transform","translate3d(0px, "+-1*M*h+"px, 0)"),t?k.find(".navbar-bg").css("opacity",M):k.find(".navbar-bg").css("transform","translate3d(0px, "+-1*M*h+"px, 0)")),T&&(w.touch?b&&(clearTimeout(b),b=null,b=setTimeout((function(){N(),clearTimeout(b),b=null}),70)):(clearTimeout(v),v=setTimeout((function(){N()}),300))))}}(g):a&&function(){var e=k.hasClass("navbar-hidden")||k.parent(".navbars").hasClass("navbar-hidden");if(!k.hasClass("with-searchbar-expandable-enabled")&&!e){f||(f=t.offsetHeight);var n=o/f,r=k.hasClass("navbar-transparent-visible");if(n=Math.max(Math.min(n,1),0),r&&1===n||!r&&0===n)k.find(".navbar-bg, .title").css("opacity","");else{if(r&&0===n)return k.trigger("navbar:transparenthide"),y.emit("navbarTransparentHide",k[0]),k.removeClass("navbar-transparent-visible"),void k.find(".navbar-bg, .title").css("opacity","");if(!r&&1===n)return k.trigger("navbar:transparentshow"),y.emit("navbarTransparentShow",k[0]),k.addClass("navbar-transparent-visible"),void k.find(".navbar-bg, .title").css("opacity","");k.find(".navbar-bg, .title").css("opacity",n),$&&(w.touch?b&&(clearTimeout(b),b=null,b=setTimeout((function(){O(),clearTimeout(b),b=null}),70)):(clearTimeout(v),v=setTimeout((function(){O()}),300)))}}}(),x.hasClass("page-previous")||n&&(x.hasClass("page-with-card-opened")||(i=g.scrollHeight,l=g.offsetHeight,u=o+l>=i,p=k.hasClass("navbar-hidden")||k.parent(".navbars").hasClass("navbar-hidden"),u?y.params.navbar.showOnPageScrollEnd&&(c="show"):c=s>o?y.params.navbar.showOnPageScrollTop||o<=E?"show":"hide":o>E?"hide":"show","show"===c&&p?(y.navbar.show(k,!0,!0),p=!1):"hide"!==c||p||(y.navbar.hide(k,!0,!1,!0),p=!0),s=o)))}function R(){m=!1}function P(){clearTimeout(b),b=null,b=setTimeout((function(){!1!==m&&(a&&!r?O():N(),clearTimeout(b),b=null)}),70)}x.on("scroll",".page-content",_,!0),w.touch&&(r&&T||a&&$)&&(y.on("touchstart:passive",R),y.on("touchend:passive",P)),I(),(r||a)&&x.find(".page-content").each((function(e){e.scrollTop>0&&_.call(e)})),y.on("resize",I),x[0].f7DetachNavbarScrollHandlers=function(){y.off("resize",I),delete x[0].f7DetachNavbarScrollHandlers,x.off("scroll",".page-content",_,!0),w.touch&&(r&&T||a&&$)&&(y.off("touchstart:passive",R),y.off("touchend:passive",P))}}},cd={name:"navbar",create:function(){Kl(this,{navbar:ud})},params:{navbar:{scrollTopOnTitleClick:!0,iosCenterTitle:!0,mdCenterTitle:!1,auroraCenterTitle:!0,hideOnPageScroll:!1,showOnPageScrollEnd:!0,showOnPageScrollTop:!0,collapseLargeTitleOnScroll:!0,snapPageScrollToLargeTitle:!0,snapPageScrollToTransparentNavbar:!0}},on:{"panelBreakpoint panelCollapsedBreakpoint panelResize viewResize resize viewMasterDetailBreakpoint":function(){var e=this;Gc(".navbar").each((function(t){e.navbar.size(t)}))},pageBeforeRemove:function(e){e.$el[0].f7DetachNavbarScrollHandlers&&e.$el[0].f7DetachNavbarScrollHandlers()},pageBeforeIn:function(e){var t=this;if("ios"===t.theme){var n,r=e.$el.parents(".view")[0].f7View,a=t.navbar.getElByPage(e);if(n=a?Gc(a).parents(".navbars"):e.$el.parents(".view").children(".navbars"),e.$el.hasClass("no-navbar")||r.router.dynamicNavbar&&!a){var s=!!(e.pageFrom&&e.router.history.length>0);t.navbar.hide(n,s)}else t.navbar.show(n)}},pageReinit:function(e){var t=Gc(this.navbar.getElByPage(e));t&&0!==t.length&&this.navbar.size(t)},pageInit:function(e){var t,n,r,a=this,s=Gc(a.navbar.getElByPage(e));s&&0!==s.length&&(a.navbar.size(s),s.find(".title-large").length>0&&s.addClass("navbar-large"),s.hasClass("navbar-large")&&(a.params.navbar.collapseLargeTitleOnScroll&&(t=!0),e.$el.addClass("page-with-navbar-large")),!t&&s.hasClass("navbar-transparent")&&(n=!0),(a.params.navbar.hideOnPageScroll||e.$el.find(".hide-navbar-on-scroll").length||e.$el.hasClass("hide-navbar-on-scroll")||e.$el.find(".hide-bars-on-scroll").length||e.$el.hasClass("hide-bars-on-scroll"))&&(r=!(e.$el.find(".keep-navbar-on-scroll").length||e.$el.hasClass("keep-navbar-on-scroll")||e.$el.find(".keep-bars-on-scroll").length||e.$el.hasClass("keep-bars-on-scroll"))),(t||r||n)&&a.navbar.initNavbarOnScroll(e.el,s[0],r,t,n))},"panelOpen panelSwipeOpen modalOpen":function(e){var t=this;e.$el.find(".navbar:not(.navbar-previous):not(.stacked)").each((function(e){t.navbar.size(e)}))},tabShow:function(e){var t=this;Gc(e).find(".navbar:not(.navbar-previous):not(.stacked)").each((function(e){t.navbar.size(e)}))}},clicks:{".navbar .title":function(e,t,n){if(this.params.navbar.scrollTopOnTitleClick&&!(Gc(n.target).closest("a, button").length>0)){var r,a=e.parents(".navbar"),s=a.parents(".navbars");0===(r=a.parents(".page-content")).length&&(a.parents(".page").length>0&&(r=a.parents(".page").find(".page-content")),0===r.length&&s.length&&s.nextAll(".page-current:not(.stacked)").length>0&&(r=s.nextAll(".page-current:not(.stacked)").find(".page-content")),0===r.length&&a.nextAll(".page-current:not(.stacked)").length>0&&(r=a.nextAll(".page-current:not(.stacked)").find(".page-content"))),r&&r.length>0&&(r.hasClass("tab")&&(r=r.parent(".tabs").children(".page-content.tab-active")),r.length>0&&r.scrollTop(0,300))}}},vnode:{navbar:{postpatch:function(e){this.navbar.size(e.elm)}}}},pd={setHighlight:function(e){var t=Gc(e);if(("ios"!==this.theme||t.hasClass("tabbar-highlight"))&&0!==t.length&&(t.hasClass("tabbar")||t.hasClass("tabbar-labels"))){var n=t.find(".tab-link-highlight"),r=t.find(".tab-link").length;if(0!==r){0===n.length?(t.children(".toolbar-inner").append('<span class="tab-link-highlight"></span>'),n=t.find(".tab-link-highlight")):n.next().length&&t.children(".toolbar-inner").append(n);var a,s,o=t.find(".tab-link-active");if(t.hasClass("tabbar-scrollable")&&o&&o[0])a=o[0].offsetWidth+"px",s=o[0].offsetLeft+"px";else{var i=o.index();a=100/r+"%",s=100*(this.rtl?-i:i)+"%"}Rl((function(){n.css("width",a).transform("translate3d("+s+",0,0)")}))}else n.remove()}},init:function(e){this.toolbar.setHighlight(e)},hide:function(e,t){void 0===t&&(t=!0);var n=Gc(e);if(!n.hasClass("toolbar-hidden")){var r="toolbar-hidden"+(t?" toolbar-transitioning":"");n.transitionEnd((function(){n.removeClass("toolbar-transitioning")})),n.addClass(r),n.trigger("toolbar:hide"),this.emit("toolbarHide",n[0])}},show:function(e,t){void 0===t&&(t=!0);var n=Gc(e);n.hasClass("toolbar-hidden")&&(t&&(n.addClass("toolbar-transitioning"),n.transitionEnd((function(){n.removeClass("toolbar-transitioning")}))),n.removeClass("toolbar-hidden"),n.trigger("toolbar:show"),this.emit("toolbarShow",n[0]))},initToolbarOnScroll:function(e){var t,n,r,a,s,o,i,l=this,u=Gc(e),c=u.parents(".view").children(".toolbar");(0===c.length&&(c=u.find(".toolbar")),0===c.length&&(c=u.parents(".views").children(".tabbar, .tabbar-labels")),0!==c.length)&&(u.on("scroll",".page-content",p,!0),u[0].f7ScrollToolbarHandler=p);function p(e){if(!u.hasClass("page-with-card-opened")&&!u.hasClass("page-previous")){var p=this;e&&e.target&&e.target!==p||(n=p.scrollTop,r=p.scrollHeight,a=p.offsetHeight,s=n+a>=r,i=c.hasClass("toolbar-hidden"),s?l.params.toolbar.showOnPageScrollEnd&&(o="show"):o=t>n?l.params.toolbar.showOnPageScrollTop||n<=44?"show":"hide":n>44?"hide":"show","show"===o&&i?(l.toolbar.show(c),i=!1):"hide"!==o||i||(l.toolbar.hide(c),i=!0),t=n)}}}},dd={name:"toolbar",create:function(){Kl(this,{toolbar:pd})},params:{toolbar:{hideOnPageScroll:!1,showOnPageScrollEnd:!0,showOnPageScrollTop:!0}},on:{pageBeforeRemove:function(e){e.$el[0].f7ScrollToolbarHandler&&e.$el.off("scroll",".page-content",e.$el[0].f7ScrollToolbarHandler,!0)},pageBeforeIn:function(e){var t=e.$el.parents(".view").children(".toolbar");0===t.length&&(t=e.$el.parents(".views").children(".tabbar, .tabbar-labels")),0===t.length&&(t=e.$el.find(".toolbar")),0!==t.length&&(e.$el.hasClass("no-toolbar")?this.toolbar.hide(t):this.toolbar.show(t))},pageInit:function(e){var t=this;if(e.$el.find(".tabbar, .tabbar-labels").each((function(e){t.toolbar.init(e)})),t.params.toolbar.hideOnPageScroll||e.$el.find(".hide-toolbar-on-scroll").length||e.$el.hasClass("hide-toolbar-on-scroll")||e.$el.find(".hide-bars-on-scroll").length||e.$el.hasClass("hide-bars-on-scroll")){if(e.$el.find(".keep-toolbar-on-scroll").length||e.$el.hasClass("keep-toolbar-on-scroll")||e.$el.find(".keep-bars-on-scroll").length||e.$el.hasClass("keep-bars-on-scroll"))return;t.toolbar.initToolbarOnScroll(e.el)}},init:function(){var e=this;e.$el.find(".tabbar, .tabbar-labels").each((function(t){e.toolbar.init(t)}))}},vnode:{tabbar:{insert:function(e){this.toolbar.init(e.elm)}}}},hd={name:"subnavbar",on:{pageInit:function(e){e.$navbarEl&&e.$navbarEl.length&&e.$navbarEl.find(".subnavbar").length&&e.$el.addClass("page-with-subnavbar"),e.$el.find(".subnavbar").filter((function(t){return Gc(t).parents(".page")[0]===e.$el[0]})).length&&e.$el.addClass("page-with-subnavbar")}}},fd=function(){function e(e,t,n,r){var a=this;if(t){var s=t[0].getBoundingClientRect(),o=s.left,i=s.top,l=s.width,u=s.height,c=n-o,p=r-i,d=Math.max(Math.pow(Math.pow(u,2)+Math.pow(l,2),.5),48),h=!1,f=e.params.touch.touchRippleInsetElements||"";if(f&&t.is(f)&&(h=!0),h&&(d=Math.max(Math.min(l,u),48)),h||"hidden"!==t.css("overflow"))a.rippleTransform="translate3d("+(l/2-c)+"px, "+(u/2-p)+"px, 0) scale(1)";else{var m=(d/2+Math.pow(Math.pow(c-l/2,2)+Math.pow(p-u/2,2),.5))/(d/2);a.rippleTransform="translate3d(0px, 0px, 0) scale("+m+")"}return h&&t.addClass("ripple-inset"),a.$rippleWaveEl=Gc('<div class="ripple-wave" style="width: '+d+"px; height: "+d+"px; margin-top:-"+d/2+"px; margin-left:-"+d/2+"px; left:"+c+"px; top:"+p+"px; --f7-ripple-transform: "+a.rippleTransform+'"></div>'),t.prepend(a.$rippleWaveEl),a.$rippleWaveEl.animationEnd((function(){a.$rippleWaveEl&&(a.$rippleWaveEl.hasClass("ripple-wave-out")||(a.$rippleWaveEl.addClass("ripple-wave-in"),a.shouldBeRemoved&&a.out()))})),a}}var t=e.prototype;return t.destroy=function(){var e=this;e.$rippleWaveEl&&e.$rippleWaveEl.remove(),Object.keys(e).forEach((function(t){e[t]=null,delete e[t]})),e=null},t.out=function(){var e=this,t=this.$rippleWaveEl;clearTimeout(e.removeTimeout),t.addClass("ripple-wave-out"),e.removeTimeout=setTimeout((function(){e.destroy()}),300),t.animationEnd((function(){clearTimeout(e.removeTimeout),e.destroy()}))},t.remove=function(){var e=this;e.shouldBeRemoved||(e.removeTimeout=setTimeout((function(){e.destroy()}),400),e.shouldBeRemoved=!0,e.$rippleWaveEl.hasClass("ripple-wave-in")&&e.out())},e}();function md(e,t,n){return md=gd()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&vd(a,n.prototype),a},md.apply(null,arguments)}function gd(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function vd(e,t){return vd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},vd(e,t)}var bd={name:"touch-ripple",static:{TouchRipple:fd},create:function(){this.touchRipple={create:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return md(fd,t)}}}};function yd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wd(e,t){return wd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},wd(e,t)}var xd=[],kd=[];var Cd=function(e){var t,n;function r(t,n){var r,a=yd(r=e.call(this,n,[t])||this),s={};a.useModulesParams(s),a.params=Vl(s,n),a.opened=!1;var o=a.params.containerEl?Gc(a.params.containerEl).eq(0):t.$el;return o.length||(o=t.$el),a.$containerEl=o,a.containerEl=o[0],a.useModules(),yd(r)||yd(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,wd(t,n);var a=r.prototype;return a.onOpen=function(){var e=this;e.opened=!0,xd.push(e),Gc("html").addClass("with-modal-"+e.type.toLowerCase()),e.$el.trigger("modal:open "+e.type.toLowerCase()+":open"),e.emit("local::open modalOpen "+e.type+"Open",e)},a.onOpened=function(){var e=this;e.$el.trigger("modal:opened "+e.type.toLowerCase()+":opened"),e.emit("local::opened modalOpened "+e.type+"Opened",e)},a.onClose=function(){var e=this;e.opened=!1,e.type&&e.$el&&(xd.splice(xd.indexOf(e),1),Gc("html").removeClass("with-modal-"+e.type.toLowerCase()),e.$el.trigger("modal:close "+e.type.toLowerCase()+":close"),e.emit("local::close modalClose "+e.type+"Close",e))},a.onClosed=function(){var e=this;e.type&&e.$el&&(e.$el.removeClass("modal-out"),e.$el.hide(),e.$el.trigger("modal:closed "+e.type.toLowerCase()+":closed"),e.emit("local::closed modalClosed "+e.type+"Closed",e))},a.open=function(e){var t,n=this,r=bl(),a=n.app,s=n.$el,o=n.$backdropEl,i=n.type,l=!0;if(void 0!==e?l=e:void 0!==n.params.animate&&(l=n.params.animate),!s||s.hasClass("modal-in"))return!1===e&&s[0]&&"dialog"!==i&&(s[0].style.display="block"),n;if("dialog"===i&&a.params.modal.queueDialogs&&(Gc(".dialog.modal-in").length>0?t=!0:xd.length>0&&xd.forEach((function(e){"dialog"===e.type&&(t=!0)})),t))return kd.push(n),n;var u=s.parent(),c=s.parents(r).length>0;function p(){s.hasClass("modal-out")?n.onClosed():s.hasClass("modal-in")&&n.onOpened()}return u.is(n.$containerEl)||(n.$containerEl.append(s),n.once(i+"Closed",(function(){c?u.append(s):s.remove()}))),s.show(),n._clientLeft=s[0].clientLeft,l?(o&&(o.removeClass("not-animated"),o.addClass("backdrop-in")),s.animationEnd((function(){p()})),s.transitionEnd((function(){p()})),s.removeClass("modal-out not-animated").addClass("modal-in"),n.onOpen()):(o&&o.addClass("backdrop-in not-animated"),s.removeClass("modal-out").addClass("modal-in not-animated"),n.onOpen(),n.onOpened()),n},a.close=function(e){var t=this,n=t.$el,r=t.$backdropEl,a=!0;if(void 0!==e?a=e:void 0!==t.params.animate&&(a=t.params.animate),!n||!n.hasClass("modal-in"))return kd.indexOf(t)>=0&&kd.splice(kd.indexOf(t),1),t;if(r){var s=!0;"popup"===t.type&&t.$el.prevAll(".popup.modal-in").add(t.$el.nextAll(".popup.modal-in")).each((function(e){var n=e.f7Modal;n&&n.params.closeByBackdropClick&&n.params.backdrop&&n.backdropEl===t.backdropEl&&(s=!1)})),s&&(r[a?"removeClass":"addClass"]("not-animated"),r.removeClass("backdrop-in"))}function o(){n.hasClass("modal-out")?t.onClosed():n.hasClass("modal-in")&&t.onOpened()}return n[a?"removeClass":"addClass"]("not-animated"),a?(n.animationEnd((function(){o()})),n.transitionEnd((function(){o()})),n.removeClass("modal-in").addClass("modal-out"),t.onClose()):(n.addClass("not-animated").removeClass("modal-in").addClass("modal-out"),t.onClose(),t.onClosed()),"dialog"===t.type&&0!==kd.length&&kd.shift().open(),t},a.destroy=function(){var e=this;e.destroyed||(e.emit("local::beforeDestroy modalBeforeDestroy "+e.type+"BeforeDestroy",e),e.$el&&(e.$el.trigger("modal:beforedestroy "+e.type.toLowerCase()+":beforedestroy"),e.$el.length&&e.$el[0].f7Modal&&delete e.$el[0].f7Modal),Ol(e),e.destroyed=!0)},r}(au),Sd=Cd;function Ed(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Td(e,t){return Td=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Td(e,t)}var $d=function(e){var t,n;function r(t,n){var r,a,s,o=Vl({backdrop:!0,closeByBackdropClick:!0,on:{}},n),i=Ed(r=e.call(this,t,o)||this);if(i.params=o,(a=i.params.el?Gc(i.params.el):Gc(i.params.content))&&a.length>0&&a[0].f7Modal)return a[0].f7Modal||Ed(r);if(0===a.length)return i.destroy()||Ed(r);function l(e){i&&!i.destroyed&&s&&e.target===s[0]&&i.close()}return i.params.backdrop&&0===(s=t.$el.children(".custom-modal-backdrop")).length&&(s=Gc('<div class="custom-modal-backdrop"></div>'),t.$el.append(s)),i.on("customModalOpened",(function(){i.params.closeByBackdropClick&&i.params.backdrop&&t.on("click",l)})),i.on("customModalClose",(function(){i.params.closeByBackdropClick&&i.params.backdrop&&t.off("click",l)})),Vl(i,{app:t,$el:a,el:a[0],$backdropEl:s,backdropEl:s&&s[0],type:"customModal"}),a[0].f7Modal=i,i||Ed(r)}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Td(t,n),r}(Sd),Id=$d,Nd={name:"modal",static:{Modal:Sd,CustomModal:Id},create:function(){var e=this;e.customModal={create:function(t){return new Id(e,t)}}},params:{modal:{queueDialogs:!0}}},Od=function(e,t){for(var n=t||{},r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];var o=a||[],i=Object.keys(n).map((function(e){return"_"===e[0]?n[e]?e.replace("_",""):"":e+'="'+n[e]+'"'})).filter((function(e){return!!e})).join(" ");if(["path","img","circle","polygon","line","input"].indexOf(e)>=0)return("<"+e+" "+i+" />").trim();var l=o.filter((function(e){return!!e})).map((function(e){return Array.isArray(e)?e.join(""):e})).join("");return("<"+e+" "+i+">"+l+"</"+e+">").trim()};function Ad(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Md(e,t){return Md=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Md(e,t)}var _d=function(e){var t,n;function r(t,n){var r,a=Vl({title:t.params.dialog.title,text:void 0,content:"",buttons:[],verticalButtons:!1,onClick:void 0,cssClass:void 0,destroyOnClose:!1,on:{}},n);void 0===a.closeByBackdropClick&&(a.closeByBackdropClick=t.params.dialog.closeByBackdropClick),void 0===a.backdrop&&(a.backdrop=t.params.dialog.backdrop);var s,o,i,l=Ad(r=e.call(this,t,a)||this),u=Zl(),c=bl(),p=a.title,d=a.text,h=a.content,f=a.buttons,m=a.verticalButtons,g=a.cssClass,v=a.backdrop;if(l.params=a,l.params.el)s=Gc(l.params.el);else{var b=["dialog"];0===f.length&&b.push("dialog-no-buttons"),f.length>0&&b.push("dialog-buttons-"+f.length),m&&b.push("dialog-buttons-vertical"),g&&b.push(g);var y="";f.length>0&&(y=Od("div",{class:"dialog-buttons"},f.map((function(e){return Od("span",{class:"dialog-button"+(e.bold?" dialog-button-bold":"")+(e.color?" color-"+e.color:"")+(e.cssClass?" "+e.cssClass:"")},e.text)}))));var w=Od("div",{class:b.join(" ")},Od("div",{class:"dialog-inner"},p&&Od("div",{class:"dialog-title"},p),d&&Od("div",{class:"dialog-text"},d),h),y);s=Gc(w)}if(s&&s.length>0&&s[0].f7Modal)return s[0].f7Modal||Ad(r);if(0===s.length)return l.destroy()||Ad(r);function x(e){var t=Gc(this).index(),n=f[t];n.onClick&&n.onClick(l,e),l.params.onClick&&l.params.onClick(l,t),!1!==n.close&&l.close()}function k(e){var t=e.keyCode;f.forEach((function(n,r){n.keyCodes&&n.keyCodes.indexOf(t)>=0&&(c.activeElement&&c.activeElement.blur(),n.onClick&&n.onClick(l,e),l.params.onClick&&l.params.onClick(l,r),!1!==n.close&&l.close())}))}function C(e){var t=e.target;0===Gc(t).closest(l.el).length&&l.params.closeByBackdropClick&&l.backdropEl&&l.backdropEl===t&&l.close()}return v&&0===(o=t.$el.children(".dialog-backdrop")).length&&(o=Gc('<div class="dialog-backdrop"></div>'),t.$el.append(o)),f&&f.length>0&&(l.on("open",(function(){s.find(".dialog-button").each((function(e,t){f[t].keyCodes&&(i=!0),Gc(e).on("click",x)})),!i||u.ios||u.android||u.cordova||u.capacitor||Gc(c).on("keydown",k)})),l.on("close",(function(){s.find(".dialog-button").each((function(e){Gc(e).off("click",x)})),!i||u.ios||u.android||u.cordova||u.capacitor||Gc(c).off("keydown",k),i=!1}))),Vl(l,{app:t,$el:s,el:s[0],$backdropEl:o,backdropEl:o&&o[0],type:"dialog",setProgress:function(e,n){return t.progressbar.set(s.find(".progressbar"),e,n),l},setText:function(e){var t=s.find(".dialog-text");return 0===t.length&&(t=Gc('<div class="dialog-text"></div>'),void 0!==p?t.insertAfter(s.find(".dialog-title")):s.find(".dialog-inner").prepend(t)),t.html(e),l.params.text=e,l},setTitle:function(e){var t=s.find(".dialog-title");return 0===t.length&&(t=Gc('<div class="dialog-title"></div>'),s.find(".dialog-inner").prepend(t)),t.html(e),l.params.title=e,l}}),l.on("opened",(function(){l.params.closeByBackdropClick&&t.on("click",C)})),l.on("close",(function(){l.params.closeByBackdropClick&&t.off("click",C)})),s[0].f7Modal=l,l.params.destroyOnClose&&l.once("closed",(function(){setTimeout((function(){l.destroy()}),0)})),l||Ad(r)}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Md(t,n),r}(Sd),Rd=_d;function Pd(){return Pd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pd.apply(this,arguments)}var Dd={name:"dialog",params:{dialog:{title:void 0,buttonOk:"OK",buttonCancel:"Cancel",usernamePlaceholder:"Username",passwordPlaceholder:"Password",preloaderTitle:"Loading... ",progressTitle:"Loading... ",backdrop:!0,closeByBackdropClick:!1,destroyPredefinedDialogs:!0,keyboardActions:!0,autoFocus:!0}},static:{Dialog:Rd},create:function(){var e=this;function t(){return e.params.dialog.title||e.name}var n=e.params.dialog.destroyPredefinedDialogs,r=e.params.dialog.keyboardActions,a=e.params.dialog.autoFocus?{on:{opened:function(e){e.$el.find("input").eq(0).focus()}}}:{};e.dialog=Vl(Zc({app:e,constructor:Rd,defaultSelector:".dialog.modal-in"}),{alert:function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];var i=s[0],l=s[1],u=s[2];return 2===s.length&&"function"==typeof s[1]&&(i=s[0],u=s[1],l=s[2]),new Rd(e,{title:void 0===l?t():l,text:i,buttons:[{text:e.params.dialog.buttonOk,bold:!0,onClick:u,keyCodes:r?[13,27]:null}],destroyOnClose:n}).open()},prompt:function(){for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];var l=o[0],u=o[1],c=o[2],p=o[3],d=o[4];return"function"==typeof o[1]&&(l=o[0],c=o[1],p=o[2],d=o[3],u=o[4]),d=null==d?"":d,new Rd(e,Pd({title:void 0===u?t():u,text:l,content:'<div class="dialog-input-field input"><input type="text" class="dialog-input" value="'+d+'"></div>',buttons:[{text:e.params.dialog.buttonCancel,keyCodes:r?[27]:null,color:"aurora"===e.theme?"gray":null},{text:e.params.dialog.buttonOk,bold:!0,keyCodes:r?[13]:null}],onClick:function(e,t){var n=e.$el.find(".dialog-input").val();0===t&&p&&p(n),1===t&&c&&c(n)},destroyOnClose:n},a)).open()},confirm:function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];var i=s[0],l=s[1],u=s[2],c=s[3];return"function"==typeof s[1]&&(i=s[0],u=s[1],c=s[2],l=s[3]),new Rd(e,{title:void 0===l?t():l,text:i,buttons:[{text:e.params.dialog.buttonCancel,onClick:c,keyCodes:r?[27]:null,color:"aurora"===e.theme?"gray":null},{text:e.params.dialog.buttonOk,bold:!0,onClick:u,keyCodes:r?[13]:null}],destroyOnClose:n}).open()},login:function(){for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];var l=o[0],u=o[1],c=o[2],p=o[3];return"function"==typeof o[1]&&(l=o[0],c=o[1],p=o[2],u=o[3]),new Rd(e,Pd({title:void 0===u?t():u,text:l,content:'\n              <div class="dialog-input-field dialog-input-double input">\n                <input type="text" name="dialog-username" placeholder="'+e.params.dialog.usernamePlaceholder+'" class="dialog-input">\n              </div>\n              <div class="dialog-input-field dialog-input-double input">\n                <input type="password" name="dialog-password" placeholder="'+e.params.dialog.passwordPlaceholder+'" class="dialog-input">\n              </div>',buttons:[{text:e.params.dialog.buttonCancel,keyCodes:r?[27]:null,color:"aurora"===e.theme?"gray":null},{text:e.params.dialog.buttonOk,bold:!0,keyCodes:r?[13]:null}],onClick:function(e,t){var n=e.$el.find('[name="dialog-username"]').val(),r=e.$el.find('[name="dialog-password"]').val();0===t&&p&&p(n,r),1===t&&c&&c(n,r)},destroyOnClose:n},a)).open()},password:function(){for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];var l=o[0],u=o[1],c=o[2],p=o[3];return"function"==typeof o[1]&&(l=o[0],c=o[1],p=o[2],u=o[3]),new Rd(e,Pd({title:void 0===u?t():u,text:l,content:'\n              <div class="dialog-input-field input">\n                <input type="password" name="dialog-password" placeholder="'+e.params.dialog.passwordPlaceholder+'" class="dialog-input">\n              </div>',buttons:[{text:e.params.dialog.buttonCancel,keyCodes:r?[27]:null,color:"aurora"===e.theme?"gray":null},{text:e.params.dialog.buttonOk,bold:!0,keyCodes:r?[13]:null}],onClick:function(e,t){var n=e.$el.find('[name="dialog-password"]').val();0===t&&p&&p(n),1===t&&c&&c(n)},destroyOnClose:n},a)).open()},preloader:function(t,r){var a={iosPreloaderContent:$l,mdPreloaderContent:Tl,auroraPreloaderContent:Il}[e.theme+"PreloaderContent"]||"";return new Rd(e,{title:null==t?e.params.dialog.preloaderTitle:t,content:'<div class="preloader'+(r?" color-"+r:"")+'">'+a+"</div>",cssClass:"dialog-preloader",destroyOnClose:n}).open()},progress:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0],o=r[1],i=r[2];2===r.length?"number"==typeof r[0]?(o=r[0],i=r[1],s=r[2]):"string"==typeof r[0]&&"string"==typeof r[1]&&(s=r[0],i=r[1],o=r[2]):1===r.length&&"number"==typeof r[0]&&(o=r[0],s=r[1],i=r[2]);var l=void 0===o,u=new Rd(e,{title:void 0===s?e.params.dialog.progressTitle:s,cssClass:"dialog-progress",content:'\n              <div class="progressbar'+(l?"-infinite":"")+(i?" color-"+i:"")+'">\n                '+(l?"":"<span></span>")+"\n              </div>\n            ",destroyOnClose:n});return l||u.setProgress(o),u.open()}})}};function Ld(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bd(e,t){return Bd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Bd(e,t)}var Fd=function(e){var t,n;function r(t,n){var r,a,s,o,i,l=Vl({on:{}},t.params.popup,n),u=Ld(r=e.call(this,t,l)||this),c=wl(),p=bl(),d=Jl(),h=Zl();if(u.params=l,(a=u.params.el?Gc(u.params.el).eq(0):Gc(u.params.content).filter((function(e){return 1===e.nodeType})).eq(0))&&a.length>0&&a[0].f7Modal)return a[0].f7Modal||Ld(r);if(0===a.length)return u.destroy()||Ld(r);function f(e){var t=e.target,n=Gc(t);if(!(!h.desktop&&h.cordova&&(c.Keyboard&&c.Keyboard.isVisible||c.cordova.plugins&&c.cordova.plugins.Keyboard&&c.cordova.plugins.Keyboard.isVisible))&&0===n.closest(u.el).length&&u.params&&u.params.closeByBackdropClick&&u.params.backdrop&&u.backdropEl&&u.backdropEl===t){var r=!0;u.$el.nextAll(".popup.modal-in").each((function(e){var t=e.f7Modal;t&&t.params.closeByBackdropClick&&t.params.backdrop&&t.backdropEl===u.backdropEl&&(r=!1)})),r&&u.close()}}function m(e){27===e.keyCode&&u.params.closeOnEscape&&u.close()}function g(e){return(t.height-2*e)/t.height}u.params.backdrop&&u.params.backdropEl?s=Gc(u.params.backdropEl):u.params.backdrop&&0===(s=u.$containerEl.children(".popup-backdrop")).length&&(s=Gc('<div class="popup-backdrop"></div>'),u.$containerEl.append(s)),Vl(u,{app:t,push:a.hasClass("popup-push")||u.params.push,$el:a,el:a[0],$backdropEl:s,backdropEl:s&&s[0],type:"popup",$htmlEl:Gc("html")}),u.params.push&&a.addClass("popup-push");var v,b,y,w,x,k,C,S,E,T,$,I=!0,N=!1,O=!1;function A(e){!N&&I&&u.params.swipeToClose&&(u.params.swipeHandler&&0===Gc(e.target).closest(u.params.swipeHandler).length||(N=!0,O=!1,v={x:"touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,y:"touchstart"===e.type?e.targetTouches[0].pageY:e.pageY},w=Pl(),y=void 0,u.params.swipeHandler||"touchstart"!==e.type||(k=Gc(e.target).closest(".page-content")[0])))}function M(e){if(N){if(b={x:"touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,y:"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY},void 0===y&&(y=!!(y||Math.abs(b.x-v.x)>Math.abs(b.y-v.y))),y)return N=!1,void(O=!1);x=v.y-b.y,i&&o&&x>0&&(x=0);var n=x<0?"to-bottom":"to-top";if(a.transition(0),"string"==typeof u.params.swipeToClose&&n!==u.params.swipeToClose)return a.transform(""),void a.transition("");if(O)u.emit("local::swipeMove popupSwipeMove",u),u.$el.trigger("popup:swipemove");else{if(i&&o&&(T=a[0].offsetHeight,0===($=a.prevAll(".popup.modal-in").eq(0)).length&&($=t.$el.children(".view, .views"))),k&&(C=k.scrollTop,E=k.scrollHeight,S=k.offsetHeight,!(E===S||"to-bottom"===n&&0===C||"to-top"===n&&C===E-S)))return a.transform(""),a.transition(""),N=!1,void(O=!1);O=!0,u.emit("local::swipeStart popupSwipeStart",u),u.$el.trigger("popup:swipestart")}if(e.preventDefault(),i&&o){var r=1-Math.abs(x/T),s=1-(1-g(o))*r;$.hasClass("popup")?$.hasClass("popup-push")?$.transition(0).forEach((function(e){e.style.setProperty("transform","translate3d(0, calc(-1 * "+r+" * (var(--f7-popup-push-offset) + 10px)) , 0px) scale("+s+")","important")})):$.transition(0).forEach((function(e){e.style.setProperty("transform","translate3d(0, 0px , 0px) scale("+s+")","important")})):$.transition(0).forEach((function(e){e.style.setProperty("transform","translate3d(0,0,0) scale("+s+")","important")}))}a.transition(0).transform("translate3d(0,"+-x+"px,0)")}}function _(){if(N=!1,O){u.emit("local::swipeEnd popupSwipeEnd",u),u.$el.trigger("popup:swipeend"),O=!1,I=!1,a.transition(""),i&&o&&$.transition("").transform("");var e=x<=0?"to-bottom":"to-top";if("string"==typeof u.params.swipeToClose&&e!==u.params.swipeToClose)return a.transform(""),void(I=!0);var t=Math.abs(x),n=(new Date).getTime()-w;n<300&&t>20||n>=300&&t>100?_l((function(){"to-bottom"===e?a.addClass("swipe-close-to-bottom"):a.addClass("swipe-close-to-top"),a.transform(""),u.emit("local::swipeclose popupSwipeClose",u),u.$el.trigger("popup:swipeclose"),u.close(),I=!0})):(I=!0,a.transform(""))}}var R,P=!!d.passiveListener&&{passive:!0};u.params.swipeToClose&&(a.on(t.touchEvents.start,A,P),t.on("touchmove",M),t.on("touchend:passive",_),u.once("popupDestroy",(function(){a.off(t.touchEvents.start,A,P),t.off("touchmove",M),t.off("touchend:passive",_)})));var D=function(){var e=i;u.push&&(i=u.push&&(t.width<630||t.height<630||a.hasClass("popup-tablet-fullscreen"))),i&&!e?L():i&&e?u.$htmlEl[0].style.setProperty("--f7-popup-push-scale",g(o)):!i&&e&&(u.$htmlEl.removeClass("with-modal-popup-push"),u.$htmlEl[0].style.removeProperty("--f7-popup-push-scale"))},L=function(){t.off("resize",D),u.push&&(i=u.push&&(t.width<630||t.height<630||a.hasClass("popup-tablet-fullscreen"))),i&&(o=parseInt(a.css("--f7-popup-push-offset"),10),Number.isNaN(o)&&(o=0),o&&(a.addClass("popup-push"),u.$htmlEl.addClass("with-modal-popup-push"),u.$htmlEl[0].style.setProperty("--f7-popup-push-scale",g(o)))),t.on("resize",D)};return u.on("open",(function(){R=!1,u.params.closeOnEscape&&Gc(p).on("keydown",m),a.prevAll(".popup.modal-in").addClass("popup-behind"),L()})),u.on("opened",(function(){a.removeClass("swipe-close-to-bottom swipe-close-to-top"),u.params.closeByBackdropClick&&t.on("click",f)})),u.on("close",(function(){R=u.$el.prevAll(".popup-push.modal-in").length>0,u.params.closeOnEscape&&Gc(p).off("keydown",m),u.params.closeByBackdropClick&&t.off("click",f),a.prevAll(".popup.modal-in").eq(0).removeClass("popup-behind"),i&&o&&!R&&(u.$htmlEl.removeClass("with-modal-popup-push"),u.$htmlEl.addClass("with-modal-popup-push-closing")),t.off("resize",D)})),u.on("closed",(function(){a.removeClass("popup-behind"),i&&o&&!R&&(u.$htmlEl.removeClass("with-modal-popup-push-closing"),u.$htmlEl[0].style.removeProperty("--f7-popup-push-scale"))})),a[0].f7Modal=u,u||Ld(r)}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Bd(t,n),r}(Sd),zd=Fd,Vd={name:"popup",params:{popup:{backdrop:!0,backdropEl:void 0,closeByBackdropClick:!0,closeOnEscape:!1,swipeToClose:!1,swipeHandler:null,push:!1,containerEl:null}},static:{Popup:zd},create:function(){this.popup=Zc({app:this,constructor:zd,defaultSelector:".popup.modal-in",parentSelector:".popup"})},clicks:{".popup-open":function(e,t){void 0===t&&(t={});this.popup.open(t.popup,t.animate,e)},".popup-close":function(e,t){void 0===t&&(t={});this.popup.close(t.popup,t.animate,e)}}};function Wd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hd(e,t){return Hd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Hd(e,t)}var jd=function(e){var t,n;function r(t,n){var r,a,s=Vl({on:{}},n),o=Wd(r=e.call(this,t,s)||this);return o.params=s,(a=o.params.el?Gc(o.params.el).eq(0):Gc(o.params.content).filter((function(e){return 1===e.nodeType})).eq(0))&&a.length>0&&a[0].f7Modal?a[0].f7Modal||Wd(r):0===a.length?o.destroy()||Wd(r):(Vl(o,{app:t,$el:a,el:a[0],type:"loginScreen"}),a[0].f7Modal=o,o||Wd(r))}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Hd(t,n),r}(Sd),Ud=jd,Gd={name:"loginScreen",static:{LoginScreen:Ud},create:function(){this.loginScreen=Zc({app:this,constructor:Ud,defaultSelector:".login-screen.modal-in"})},clicks:{".login-screen-open":function(e,t){void 0===t&&(t={});this.loginScreen.open(t.loginScreen,t.animate,e)},".login-screen-close":function(e,t){void 0===t&&(t={});this.loginScreen.close(t.loginScreen,t.animate,e)}}};function qd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xd(e,t){return Xd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Xd(e,t)}var Kd=function(e){var t,n;function r(t,n){var r,a,s=Vl({on:{}},t.params.popover,n),o=qd(r=e.call(this,t,s)||this),i=Zl(),l=wl(),u=bl();if(o.params=s,(a=o.params.el?Gc(o.params.el).eq(0):Gc(o.params.content).filter((function(e){return 1===e.nodeType})).eq(0))&&a.length>0&&a[0].f7Modal)return a[0].f7Modal||qd(r);var c,p,d=Gc(o.params.targetEl).eq(0);if(0===a.length)return o.destroy()||qd(r);o.params.backdrop&&o.params.backdropEl?c=Gc(o.params.backdropEl):o.params.backdrop&&0===(c=o.$containerEl.children(".popover-backdrop")).length&&(c=Gc('<div class="popover-backdrop"></div>'),o.$containerEl.append(c)),0===a.find(".popover-angle").length?(p=Gc('<div class="popover-angle"></div>'),a.prepend(p)):p=a.find(".popover-angle");var h=o.open;function f(){o.resize()}Vl(o,{app:t,$el:a,el:a[0],$targetEl:d,targetEl:d[0],$angleEl:p,angleEl:p[0],$backdropEl:c,backdropEl:c&&c[0],type:"popover",open:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1];return"boolean"==typeof t[0]&&(a=t[0],r=t[1]),r&&(o.$targetEl=Gc(r),o.targetEl=o.$targetEl[0]),h.call(o,a)}}),o.on("popoverOpen",(function(){o.resize(),t.on("resize",f),Gc(l).on("keyboardDidShow keyboardDidHide",f),o.on("popoverClose popoverBeforeDestroy",(function(){t.off("resize",f),Gc(l).off("keyboardDidShow keyboardDidHide",f)}))}));var m=null;function g(e){m=e.target}function v(e){var t=e.target,n=Gc(t);!i.desktop&&i.cordova&&(l.Keyboard&&l.Keyboard.isVisible||l.cordova.plugins&&l.cordova.plugins.Keyboard&&l.cordova.plugins.Keyboard.isVisible)||0===n.closest(o.el).length&&(o.params.closeByBackdropClick&&o.params.backdrop&&o.backdropEl&&o.backdropEl===t&&m===t||o.params.closeByOutsideClick&&m===t)&&o.close()}function b(e){27===e.keyCode&&o.params.closeOnEscape&&o.close()}return o.params.closeOnEscape&&(o.on("popoverOpen",(function(){Gc(u).on("keydown",b)})),o.on("popoverClose",(function(){Gc(u).off("keydown",b)}))),o.on("popoverOpened",(function(){(o.params.closeByOutsideClick||o.params.closeByBackdropClick)&&(t.on("touchstart",g),t.on("click",v))})),o.on("popoverClose",(function(){(o.params.closeByOutsideClick||o.params.closeByBackdropClick)&&(t.off("touchstart",g),t.off("click",v))})),a[0].f7Modal=o,o||qd(r)}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Xd(t,n),r.prototype.resize=function(){var e=this,t=e.app,n=e.$el,r=e.$targetEl,a=e.$angleEl,s=e.params,o=s.targetX,i=s.targetY;n.css({left:"",top:""});var l,u,c,p,d,h,f=[n.width(),n.height()],m=f[0],g=f[1],v=0;"ios"===t.theme||"aurora"===t.theme?(a.removeClass("on-left on-right on-top on-bottom").css({left:"",top:""}),v=a.width()/2):n.removeClass("popover-on-left popover-on-right popover-on-top popover-on-bottom popover-on-middle").css({left:"",top:""});var b=parseInt(Gc("html").css("--f7-safe-area-top"),10),y=parseInt(Gc("html").css("--f7-safe-area-left"),10),w=parseInt(Gc("html").css("--f7-safe-area-right"),10);if(Number.isNaN(b)&&(b=0),Number.isNaN(y)&&(y=0),Number.isNaN(w)&&(w=0),r&&r.length>0){c=r.outerWidth(),p=r.outerHeight();var x=r.offset();d=x.left-t.left,h=x.top-t.top;var k=r.parents(".page");k.length>0&&(h-=k[0].scrollTop)}else void 0!==o&&"undefined"!==i&&(d=o,h=i,c=e.params.targetWidth||0,p=e.params.targetHeight||0);var C,S=0,E=0,T=0,$="md"===t.theme?"bottom":"top";"md"===t.theme?(g<t.height-h-p?($="bottom",E=h+p):g<h-b?(E=h-g,$="top"):($="middle",E=p/2+h-g/2),E=Math.max(8,Math.min(E,t.height-g-8)),d<t.width/2?(C="right",S="middle"===$?d+c:d):(C="left",S="middle"===$?d-m:d+c-m),S=Math.max(8,Math.min(S,t.width-m-8-w),y),n.addClass("popover-on-"+$+" popover-on-"+C)):(g+v<h-b?E=h-g-v:g+v<t.height-h-p?($="bottom",E=h+p+v):($="middle",T=E=p/2+h-g/2,T-=E=Math.max(5,Math.min(E,t.height-g-5))),"top"===$||"bottom"===$?(T=S=c/2+d-m/2,S=Math.max(5,Math.min(S,t.width-m-5)),y&&(S=Math.max(S,y)),w&&S+m>t.width-5-w&&(S=t.width-5-w-m),"top"===$&&a.addClass("on-bottom"),"bottom"===$&&a.addClass("on-top"),l=m/2-v+(T-=S),l=Math.max(Math.min(l,m-2*v-13),13),a.css({left:l+"px"})):"middle"===$&&(S=d-m-v,a.addClass("on-right"),(S<5||S+m+w>t.width||S<y)&&(S<5&&(S=d+c+v),S+m+w>t.width&&(S=t.width-m-5-w),S<y&&(S=y),a.removeClass("on-right").addClass("on-left")),u=g/2-v+T,u=Math.max(Math.min(u,g-2*v-13),13),a.css({top:u+"px"})));n.css({top:E+"px",left:S+"px"})},r}(Sd),Yd=Kd,Jd={name:"popover",params:{popover:{backdrop:!0,backdropEl:void 0,closeByBackdropClick:!0,closeByOutsideClick:!0,closeOnEscape:!1,containerEl:null}},static:{Popover:Yd},create:function(){var e=this;e.popover=Vl(Zc({app:e,constructor:Yd,defaultSelector:".popover.modal-in"}),{open:function(t,n,r){var a=Gc(t);if(a.length>1){var s=Gc(n).parents(".page");s.length&&a.each((function(e){var t=Gc(e);t.parents(s)[0]===s[0]&&(a=t)}))}a.length>1&&(a=a.eq(a.length-1));var o=a[0].f7Modal,i=a.dataset();return o||(o=new Yd(e,Object.assign({el:a,targetEl:n},i))),o.open(n,r)}})},clicks:{".popover-open":function(e,t){void 0===t&&(t={});this.popover.open(t.popover,e,t.animate)},".popover-close":function(e,t){void 0===t&&(t={});this.popover.close(t.popover,t.animate,e)}}};function Zd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qd(e,t){return Qd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Qd(e,t)}var eh=function(e){var t,n;function r(t,n){var r,a,s,o,i=Vl({on:{}},t.params.actions,n),l=Zd(r=e.call(this,t,i)||this),u=Zl(),c=wl(),p=bl();if(l.params=i,l.params.buttons&&(a=l.params.buttons,Array.isArray(a[0])||(a=[a])),l.groups=a,l.params.el?s=Gc(l.params.el).eq(0):l.params.content?s=Gc(l.params.content).filter((function(e){return 1===e.nodeType})).eq(0):l.params.buttons&&(l.params.convertToPopover&&(l.popoverHtml=l.renderPopover()),l.actionsHtml=l.render()),s&&s.length>0&&s[0].f7Modal)return s[0].f7Modal||Zd(r);if(s&&0===s.length&&!l.actionsHtml&&!l.popoverHtml)return l.destroy()||Zd(r);l.params.backdrop&&l.params.backdropEl?o=Gc(l.params.backdropEl):l.params.backdrop&&0===(o=l.$containerEl.children(".actions-backdrop")).length&&(o=Gc('<div class="actions-backdrop"></div>'),l.$containerEl.append(o));var d,h=l.open,f=l.close;function m(e){var t,n,r=Gc(this);if(r.hasClass("list-button")||r.hasClass("item-link")?(t=r.parents("li").index(),n=r.parents(".list").index()):(t=r.index(),n=r.parents(".actions-group").index()),void 0!==a){var s=a[n][t];s.onClick&&s.onClick(l,e),l.params.onClick&&l.params.onClick(l,e),!1!==s.close&&l.close()}}function g(e){var t=e.target,n=Gc(t);!u.desktop&&u.cordova&&(c.Keyboard&&c.Keyboard.isVisible||c.cordova.plugins&&c.cordova.plugins.Keyboard&&c.cordova.plugins.Keyboard.isVisible)||0===n.closest(l.el).length&&(l.params.closeByBackdropClick&&l.params.backdrop&&l.backdropEl&&l.backdropEl===t||l.params.closeByOutsideClick)&&l.close()}function v(e){27===e.keyCode&&l.params.closeOnEscape&&l.close()}return l.open=function(e){var n=!1,r=l.params,a=r.targetEl,s=r.targetX,o=r.targetY,i=r.targetWidth,c=r.targetHeight;return l.params.convertToPopover&&(a||void 0!==s&&void 0!==o)&&(l.params.forceToPopover||u.ios&&u.ipad||t.width>=768||u.desktop&&"aurora"===t.theme)&&(n=!0),n&&l.popoverHtml?((d=t.popover.create({containerEl:l.params.containerEl,content:l.popoverHtml,backdrop:l.params.backdrop,targetEl:a,targetX:s,targetY:o,targetWidth:i,targetHeight:c,on:{open:function(){l.$el||(l.$el=d.$el),l.$el.trigger("modal:open "+l.type.toLowerCase()+":open"),l.emit("local::open modalOpen "+l.type+"Open",l)},opened:function(){l.$el||(l.$el=d.$el),l.$el.trigger("modal:opened "+l.type.toLowerCase()+":opened"),l.emit("local::opened modalOpened "+l.type+"Opened",l)},close:function(){l.$el||(l.$el=d.$el),l.$el.trigger("modal:close "+l.type.toLowerCase()+":close"),l.emit("local::close modalClose "+l.type+"Close",l)},closed:function(){l.$el||(l.$el=d.$el),l.$el.trigger("modal:closed "+l.type.toLowerCase()+":closed"),l.emit("local::closed modalClosed "+l.type+"Closed",l)}}})).open(e),d.once("popoverOpened",(function(){d.$el.find(".list-button, .item-link").each((function(e){Gc(e).on("click",m)}))})),d.once("popoverClosed",(function(){d.$el.find(".list-button, .item-link").each((function(e){Gc(e).off("click",m)})),_l((function(){d.destroy(),d=void 0}))}))):(l.$el=l.actionsHtml?Gc(l.actionsHtml):l.$el,l.$el[0].f7Modal=l,l.groups&&(l.$el.find(".actions-button").each((function(e){Gc(e).on("click",m)})),l.once("actionsClosed",(function(){l.$el.find(".actions-button").each((function(e){Gc(e).off("click",m)}))}))),l.el=l.$el[0],h.call(l,e)),l},l.close=function(e){return d?d.close(e):f.call(l,e),l},Vl(l,{app:t,$el:s,el:s?s[0]:void 0,$backdropEl:o,backdropEl:o&&o[0],type:"actions"}),l.params.closeOnEscape&&(l.on("open",(function(){Gc(p).on("keydown",v)})),l.on("close",(function(){Gc(p).off("keydown",v)}))),l.on("opened",(function(){(l.params.closeByBackdropClick||l.params.closeByOutsideClick)&&t.on("click",g)})),l.on("close",(function(){(l.params.closeByBackdropClick||l.params.closeByOutsideClick)&&t.off("click",g)})),s&&(s[0].f7Modal=l),l||Zd(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Qd(t,n);var a=r.prototype;return a.render=function(){var e=this;if(e.params.render)return e.params.render.call(e,e);var t=e.groups,n=e.params.cssClass;return Od("div",{class:"actions-modal"+(e.params.grid?" actions-grid":"")+" "+(n||"")},t.map((function(e){return Od("div",{class:"actions-group"},e.map((function(e){var t=["actions-"+(e.label?"label":"button")],n=e.color,r=e.bg,a=e.bold,s=e.disabled,o=e.label,i=e.text,l=e.icon;return n&&t.push("color-"+n),r&&t.push("bg-color-"+r),a&&t.push("actions-button-bold"),s&&t.push("disabled"),o?Od("div",{class:t.join(" ")},i):Od("div",{class:t.join(" ")},l&&Od("div",{class:"actions-button-media"},l),Od("div",{class:"actions-button-text"},i))})))})))},a.renderPopover=function(){var e=this;if(e.params.renderPopover)return e.params.renderPopover.call(e,e);var t=e.groups,n=e.params.cssClass;return Od("div",{class:"popover popover-from-actions "+(n||"")},Od("div",{class:"popover-inner"},t.map((function(e){return Od("div",{class:"list"},Od("ul",null,e.map((function(e){var t=[],n=e.color,r=e.bg,a=e.bold,s=e.disabled,o=e.label,i=e.text,l=e.icon;return n&&t.push("color-"+n),r&&t.push("bg-color-"+r),a&&t.push("popover-from-actions-bold"),s&&t.push("disabled"),o?(t.push("popover-from-actions-label"),'<li class="'+t.join(" ")+'">'+i+"</li>"):l?(t.push("item-link item-content"),Od("li",null,Od("a",{class:t.join(" ")},Od("div",{class:"item-media"},l),Od("div",{class:"item-inner"},Od("div",{class:"item-title"},i))))):(t.push("list-button"),Od("li",null,Od("a",{class:t.join(" ")},i)))}))))}))))},r}(Sd),th=eh,nh={name:"actions",params:{actions:{convertToPopover:!0,forceToPopover:!1,backdrop:!0,backdropEl:void 0,cssClass:null,closeByBackdropClick:!0,closeOnEscape:!1,render:null,renderPopover:null,containerEl:null}},static:{Actions:th},create:function(){this.actions=Zc({app:this,constructor:th,defaultSelector:".actions-modal.modal-in"})},clicks:{".actions-open":function(e,t){void 0===t&&(t={});this.actions.open(t.actions,t.animate,e)},".actions-close":function(e,t){void 0===t&&(t={});this.actions.close(t.actions,t.animate,e)}}};function rh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ah(e,t){return ah=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ah(e,t)}var sh=function(e){var t,n;function r(t,n){var r,a,s,o,i,l=Vl({on:{}},t.params.sheet,n),u=rh(r=e.call(this,t,l)||this),c=wl(),p=bl(),d=Jl(),h=Zl();if(u.params=l,void 0===u.params.backdrop&&(u.params.backdrop="ios"!==t.theme),(a=u.params.el?Gc(u.params.el).eq(0):Gc(u.params.content).filter((function(e){return 1===e.nodeType})).eq(0))&&a.length>0&&a[0].f7Modal)return a[0].f7Modal||rh(r);if(0===a.length)return u.destroy()||rh(r);function f(e){var t=e.target,n=Gc(t);!h.desktop&&h.cordova&&(c.Keyboard&&c.Keyboard.isVisible||c.cordova.plugins&&c.cordova.plugins.Keyboard&&c.cordova.plugins.Keyboard.isVisible)||0===n.closest(u.el).length&&(u.params.closeByBackdropClick&&u.params.backdrop&&u.backdropEl&&u.backdropEl===t||u.params.closeByOutsideClick)&&u.close()}function m(e){27===e.keyCode&&u.params.closeOnEscape&&u.close()}function g(e){return(t.height-2*e)/t.height}u.params.backdrop&&u.params.backdropEl?s=Gc(u.params.backdropEl):u.params.backdrop&&0===(s=u.$containerEl.children(".sheet-backdrop")).length&&(s=Gc('<div class="sheet-backdrop"></div>'),u.$containerEl.append(s)),Vl(u,{app:t,push:a.hasClass("sheet-modal-push")||u.params.push,$el:a,el:a[0],$backdropEl:s,backdropEl:s&&s[0],type:"sheet",$htmlEl:Gc("html")}),u.params.push&&a.addClass("sheet-modal-push");var v,b,y,w,x,k,C,S,E,T,$,I,N,O,A,M,_,R,P=!1,D=!1;function L(e){P||!u.params.swipeToClose&&!u.params.swipeToStep||u.params.swipeHandler&&0===Gc(e.target).closest(u.params.swipeHandler).length||(P=!0,D=!1,v={x:"touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,y:"touchstart"===e.type?e.targetTouches[0].pageY:e.pageY},w=Pl(),y=void 0,k=a.hasClass("sheet-modal-top"),u.params.swipeHandler||"touchstart"!==e.type||(A=Gc(e.target).closest(".page-content")[0]))}function B(e){if(P){if(b={x:"touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,y:"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY},void 0===y&&(y=!!(y||Math.abs(b.x-v.x)>Math.abs(b.y-v.y))),y)return P=!1,void(D=!1);var n,r=(x=v.y-b.y)<0?"to-bottom":"to-top";if(!D){if(A&&!a.hasClass("modal-in-swipe-step")&&(M=A.scrollTop,_=A.scrollHeight,R=A.offsetHeight,!(_===R||"to-bottom"===r&&0===M||"to-top"===r&&M===_-R)))return a.transform(""),P=!1,void(D=!1);u.push&&i&&(N=t.$el.children(".view, .views")),T=a[0].offsetHeight,S=Ll(a[0],"y"),k?($=u.params.swipeToClose?-T:-C,I=0):($=0,I=u.params.swipeToClose?T:C),D=!0}if(E=S-x,E=Math.min(Math.max(E,$),I),e.preventDefault(),u.push&&i){var s=(E-S)/T;u.params.swipeToStep&&(s=k?E/C:1-(C-E)/C),s=Math.abs(s);var o=1-(s=Math.min(Math.max(s,0),1)),l=1-(1-g(i))*o;N.transition(0).forEach((function(e){e.style.setProperty("transform","translate3d(0,0,0) scale("+l+")","important")})),u.params.swipeToStep&&N.css("border-radius",O*o+"px")}if(a.transition(0).transform("translate3d(0,"+E+"px,0)"),u.params.swipeToStep)n=k?1-E/C:(C-E)/C,n=Math.min(Math.max(n,0),1),a.trigger("sheet:stepprogress",n),u.emit("local::stepProgress sheetStepProgress",u,n)}}function F(){if(P=!1,D){D=!1,a.transform("").transition(""),u.push&&i&&(N.transition("").transform(""),N.css("border-radius",""));var e=x<0?"to-bottom":"to-top",t=Math.abs(x);if(0!==t&&E!==S){var n=(new Date).getTime()-w;if(u.params.swipeToStep){var r=k?"to-bottom":"to-top",s=k?"to-top":"to-bottom",o=Math.abs(E),l=Math.abs(C);if(n<300&&t>10)return e===r&&o<l&&(a.removeClass("modal-in-swipe-step"),a.trigger("sheet:stepprogress",1),u.emit("local::stepProgress sheetStepProgress",u,1),u.emit("local::_swipeStep",!1),a.trigger("sheet:stepopen"),u.emit("local::stepOpen sheetStepOpen",u),u.push&&i&&(u.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",g(i)),N.css("border-radius",""))),e===s&&o>l&&(u.params.swipeToClose?u.close():(a.addClass("modal-in-swipe-step"),a.trigger("sheet:stepprogress",0),u.emit("local::stepProgress sheetStepProgress",u,0),u.emit("local::_swipeStep",!0),a.trigger("sheet:stepclose"),u.emit("local::stepClose sheetStepClose",u),u.push&&i&&(u.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"),N.css("border-radius","0px")))),void(e===s&&o<=l&&(a.addClass("modal-in-swipe-step"),a.trigger("sheet:stepprogress",0),u.emit("local::stepProgress sheetStepProgress",u,0),u.emit("local::_swipeStep",!0),a.trigger("sheet:stepclose"),u.emit("local::stepClose sheetStepClose",u),u.push&&i&&(u.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"),N.css("border-radius","0px"))));if(n>=300){var c=!a.hasClass("modal-in-swipe-step");c?c&&(o>l+(T-l)/2?u.params.swipeToClose&&u.close():o>l/2&&(a.addClass("modal-in-swipe-step"),a.trigger("sheet:stepprogress",0),u.emit("local::stepProgress sheetStepProgress",u,0),u.emit("local::_swipeStep",!0),a.trigger("sheet:stepclose"),u.emit("local::stepClose sheetStepClose",u),u.push&&i&&(u.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"),N.css("border-radius","0px")))):o<l/2?(a.removeClass("modal-in-swipe-step"),a.trigger("sheet:stepprogress",1),u.emit("local::stepProgress sheetStepProgress",u,1),u.emit("local::_swipeStep",!1),a.trigger("sheet:stepopen"),u.emit("local::stepOpen sheetStepOpen",u),u.push&&i&&(u.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",g(i)),N.css("border-radius",""))):o-l>(T-l)/2&&u.params.swipeToClose&&u.close()}}else{if(e!==(k?"to-top":"to-bottom"))return;(n<300&&t>20||n>=300&&t>T/2)&&u.close()}}}}function z(){u.setSwipeStep(!0)}u.setSwipeStep=function(e){void 0===e&&(e=!0);var t=a.find(".sheet-modal-swipe-step").eq(0);t.length&&(C=a.hasClass("sheet-modal-top")?-(t.offset().top-a.offset().top+t[0].offsetHeight):a[0].offsetHeight-(t.offset().top-a.offset().top+t[0].offsetHeight),a[0].style.setProperty("--f7-sheet-swipe-step",C+"px"),e||(a.addClass("modal-in-swipe-step"),u.emit("local::_swipeStep",!0)))};var V=!!d.passiveListener&&{passive:!0};return(u.params.swipeToClose||u.params.swipeToStep)&&(a.on(t.touchEvents.start,L,V),t.on("touchmove",B),t.on("touchend:passive",F),u.once("sheetDestroy",(function(){a.off(t.touchEvents.start,L,V),t.off("touchmove",B),t.off("touchend:passive",F)}))),u.on("open",(function(){u.params.closeOnEscape&&Gc(p).on("keydown",m),a.prevAll(".popup.modal-in").addClass("popup-behind"),u.params.swipeToStep&&(u.setSwipeStep(!1),t.on("resize",z)),u.params.scrollToEl&&function(){var e=Gc(u.params.scrollToEl).eq(0);if(0!==e.length&&0!==(o=e.parents(".page-content")).length){var t,n=parseInt(o.css("padding-top"),10),r=parseInt(o.css("padding-bottom"),10),s=o[0].offsetHeight-n-a.height(),i=o[0].scrollHeight-n-a.height(),l=o.scrollTop(),c=e.offset().top-n+e[0].offsetHeight;if(c>s){var p=l+c-s;p+s>i&&(t=p+s-i+r,s===i&&(t=a.height()),o.css({"padding-bottom":t+"px"})),o.scrollTop(p,300)}}}(),u.push&&(i=parseInt(a.css("--f7-sheet-push-offset"),10),Number.isNaN(i)&&(i=0),i&&(a.addClass("sheet-modal-push"),u.$htmlEl.addClass("with-modal-sheet-push"),u.params.swipeToStep?(N=t.$el.children(".view, .views"),O=parseFloat(a.css("border-"+(k?"bottom":"top")+"-left-radius")),N.css("border-radius","0px")):u.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",g(i))))})),u.on("opened",(function(){(u.params.closeByOutsideClick||u.params.closeByBackdropClick)&&t.on("click",f)})),u.on("close",(function(){u.params.swipeToStep&&(a.removeClass("modal-in-swipe-step"),u.emit("local::_swipeStep",!1),t.off("resize",z)),u.params.closeOnEscape&&Gc(p).off("keydown",m),u.params.scrollToEl&&o&&o.length>0&&o.css({"padding-bottom":""}),(u.params.closeByOutsideClick||u.params.closeByBackdropClick)&&t.off("click",f),a.prevAll(".popup.modal-in").eq(0).removeClass("popup-behind"),u.push&&i&&(u.$htmlEl.removeClass("with-modal-sheet-push"),u.$htmlEl.addClass("with-modal-sheet-push-closing"))})),u.on("closed",(function(){u.push&&i&&(u.$htmlEl.removeClass("with-modal-sheet-push-closing"),u.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"))})),u.stepOpen=function(){a.removeClass("modal-in-swipe-step"),u.emit("local::_swipeStep",!1),u.push&&(i||(i=parseInt(a.css("--f7-sheet-push-offset"),10),Number.isNaN(i)&&(i=0)),i&&u.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",g(i)))},u.stepClose=function(){a.addClass("modal-in-swipe-step"),u.emit("local::_swipeStep",!0),u.push&&u.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale")},u.stepToggle=function(){a.toggleClass("modal-in-swipe-step"),u.emit("local::_swipeStep",a.hasClass("modal-in-swipe-step"))},a[0].f7Modal=u,u||rh(r)}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,ah(t,n),r}(Sd),oh=sh,ih={name:"sheet",params:{sheet:{push:!1,backdrop:void 0,backdropEl:void 0,closeByBackdropClick:!0,closeByOutsideClick:!1,closeOnEscape:!1,swipeToClose:!1,swipeToStep:!1,swipeHandler:null,containerEl:null}},static:{Sheet:oh},create:function(){var e=this;e.sheet=Vl({},Zc({app:e,constructor:oh,defaultSelector:".sheet-modal.modal-in"}),{stepOpen:function(t){var n=e.sheet.get(t);if(n&&n.stepOpen)return n.stepOpen()},stepClose:function(t){var n=e.sheet.get(t);if(n&&n.stepClose)return n.stepClose()},stepToggle:function(t){var n=e.sheet.get(t);if(n&&n.stepToggle)return n.stepToggle()}})},clicks:{".sheet-open":function(e,t){void 0===t&&(t={});Gc(".sheet-modal.modal-in").length>0&&t.sheet&&Gc(t.sheet)[0]!==Gc(".sheet-modal.modal-in")[0]&&this.sheet.close(".sheet-modal.modal-in"),this.sheet.open(t.sheet,t.animate,e)},".sheet-close":function(e,t){void 0===t&&(t={});this.sheet.close(t.sheet,t.animate,e)}}};function lh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uh(e,t){return uh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},uh(e,t)}var ch=function(e){var t,n;function r(t,n){var r,a=Vl({on:{}},t.params.toast,n),s=lh(r=e.call(this,t,a)||this),o=wl();s.app=t,s.params=a;var i,l,u=s.params,c=u.closeButton,p=u.closeTimeout;if(s.params.el)i=Gc(s.params.el);else{var d=s.render();i=Gc(d)}return i&&i.length>0&&i[0].f7Modal?i[0].f7Modal||lh(r):0===i.length?s.destroy()||lh(r):(Vl(s,{$el:i,el:i[0],type:"toast"}),i[0].f7Modal=s,c&&(i.find(".toast-button").on("click",(function(){s.emit("local::closeButtonClick toastCloseButtonClick",s),s.close()})),s.on("beforeDestroy",(function(){i.find(".toast-button").off("click")}))),s.on("open",(function(){Gc(".toast.modal-in").each((function(e){var n=t.toast.get(e);e!==s.el&&n&&n.close()})),p&&(l=_l((function(){s.close()}),p))})),s.on("close",(function(){o.clearTimeout(l)})),s.params.destroyOnClose&&s.once("closed",(function(){setTimeout((function(){s.destroy()}),0)})),s||lh(r))}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,uh(t,n),r.prototype.render=function(){var e=this;if(e.params.render)return e.params.render.call(e,e);var t=e.params,n=t.position,r=t.horizontalPosition,a=t.cssClass,s=t.icon,o=t.text,i=t.closeButton,l=t.closeButtonColor,u=t.closeButtonText;return Od("div",{class:"toast toast-"+n+" "+("top"===n||"bottom"===n?"toast-horizontal-"+r:"")+" "+(a||"")+" "+(s?"toast-with-icon":"")},Od("div",{class:"toast-content"},s&&Od("div",{class:"toast-icon"},s),Od("div",{class:"toast-text"},o),i&&!s&&Od("a",{class:"toast-button button "+(l?"color-"+l:"")},u)))},r}(Sd),ph=ch,dh={name:"toast",static:{Toast:ph},create:function(){var e=this;e.toast=Vl({},Zc({app:e,constructor:ph,defaultSelector:".toast.modal-in"}),{show:function(t){return Vl(t,{destroyOnClose:!0}),new ph(e,t).open()}})},params:{toast:{icon:null,text:null,position:"bottom",horizontalPosition:"left",closeButton:!1,closeButtonColor:null,closeButtonText:"Ok",closeTimeout:null,cssClass:null,render:null,containerEl:null}}},hh={init:function(e){var t={iosPreloaderContent:$l,mdPreloaderContent:Tl,auroraPreloaderContent:Il},n=Gc(e);0===n.length||n.children(".preloader-inner").length>0||n.children(".preloader-inner-line").length>0||n.append(t[this.theme+"PreloaderContent"])},visible:!1,show:function(e){void 0===e&&(e="white");if(!hh.visible){var t={iosPreloaderContent:$l,mdPreloaderContent:Tl,auroraPreloaderContent:Il}[this.theme+"PreloaderContent"]||"";Gc("html").addClass("with-modal-preloader"),this.$el.append('\n      <div class="preloader-backdrop"></div>\n      <div class="preloader-modal">\n        <div class="preloader color-'+e+'">'+t+"</div>\n      </div>\n    "),hh.visible=!0}},showIn:function(e,t){void 0===t&&(t="white");var n={iosPreloaderContent:$l,mdPreloaderContent:Tl,auroraPreloaderContent:Il}[this.theme+"PreloaderContent"]||"";Gc(e||"html").addClass("with-modal-preloader"),Gc(e||this.$el).append('\n      <div class="preloader-backdrop"></div>\n      <div class="preloader-modal">\n        <div class="preloader color-'+t+'">'+n+"</div>\n      </div>\n    ")},hide:function(){hh.visible&&(Gc("html").removeClass("with-modal-preloader"),this.$el.find(".preloader-backdrop, .preloader-modal").remove(),hh.visible=!1)},hideIn:function(e){Gc(e||"html").removeClass("with-modal-preloader"),Gc(e||this.$el).find(".preloader-backdrop, .preloader-modal").remove()}},fh={name:"preloader",create:function(){Kl(this,{preloader:hh})},on:{photoBrowserOpen:function(e){var t=this;e.$el.find(".preloader").each((function(e){t.preloader.init(e)}))},tabMounted:function(e){var t=this;Gc(e).find(".preloader").each((function(e){t.preloader.init(e)}))},pageInit:function(e){var t=this;e.$el.find(".preloader").each((function(e){t.preloader.init(e)}))}},vnode:{preloader:{insert:function(e){var t=e.elm;this.preloader.init(t)}}}},mh={set:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],s=n[1],o=n[2];if("number"==typeof n[0]&&(s=n[0],o=n[1],a=e.$el),null==s)return a;s||(s=0);var i=Gc(a||e.$el);if(0===i.length)return a;var l,u=Math.min(Math.max(s,0),100);if(0===(l=i.hasClass("progressbar")?i.eq(0):i.children(".progressbar")).length||l.hasClass("progressbar-infinite"))return l;var c=l.children("span");return 0===c.length&&(c=Gc("<span></span>"),l.append(c)),c.transition(void 0!==o?o:"").transform("translate3d("+(-100+u)*(e.rtl?-1:1)+"%,0,0)"),l[0]},show:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],s=n[1],o=n[2],i="determined";2===n.length?"string"!=typeof n[0]&&"object"!=typeof n[0]||"string"!=typeof n[1]?"number"==typeof n[0]&&"string"==typeof n[1]&&(s=n[0],o=n[1],a=e.$el):(a=n[0],o=n[1],s=n[2],i="infinite"):1===n.length?"number"==typeof n[0]?(a=e.$el,s=n[0]):"string"==typeof n[0]&&(i="infinite",a=e.$el,o=n[0]):0===n.length&&(i="infinite",a=e.$el);var l,u=Gc(a);if(0!==u.length)return u.hasClass("progressbar")||u.hasClass("progressbar-infinite")?l=u:0===(l=u.children(".progressbar:not(.progressbar-out), .progressbar-infinite:not(.progressbar-out)")).length&&(l=Gc('\n          <span class="progressbar'+("infinite"===i?"-infinite":"")+(o?" color-"+o:"")+' progressbar-in">\n            '+("infinite"===i?"":"<span></span>")+"\n          </span>"),u.append(l)),void 0!==s&&e.progressbar.set(l,s),l[0]},hide:function(e,t){void 0===t&&(t=!0);var n,r=Gc(e||this.$el);if(0!==r.length)return 0===(n=r.hasClass("progressbar")||r.hasClass("progressbar-infinite")?r:r.children(".progressbar, .progressbar-infinite")).length||!n.hasClass("progressbar-in")||n.hasClass("progressbar-out")||n.removeClass("progressbar-in").addClass("progressbar-out").animationEnd((function(){t&&n.remove()})),n}},gh={name:"progressbar",create:function(){Kl(this,{progressbar:mh})},on:{tabMounted:function(e){var t=this;Gc(e).find(".progressbar").each((function(e){var n=Gc(e);t.progressbar.set(n,n.attr("data-progress"))}))},pageInit:function(e){var t=this;e.$el.find(".progressbar").each((function(e){var n=Gc(e);t.progressbar.set(n,n.attr("data-progress"))}))}},vnode:{progressbar:{insert:function(e){var t=e.elm;this.progressbar.set(t,t.getAttribute("data-progress"))},update:function(e){var t=e.elm;this.progressbar.set(t,t.getAttribute("data-progress"))}}}},vh={init:function(){var e,t,n,r,a,s,o,i,l,u,c,p,d,h,f,m,g,v,b,y,w,x=this,k=bl();function C(r,i){t=!1,e=!0,w=!1,n="touchstart"===r.type?r.targetTouches[0].pageY:r.pageY,a=Gc(r.target).closest("li").eq(0),d=a.index(),o=a.parents(".sortable");var l=a.parents(".list-group");l.length&&l.parents(o).length&&(o=l),s=o.children("ul").children("li:not(.disallow-sorting):not(.no-sorting)"),x.panel&&(x.panel.allowOpen=!1),x.swipeout&&(x.swipeout.allow=!1),i&&(a.addClass("sorting"),o.addClass("sortable-sorting"),w=!0)}var S=!!Jl().passiveListener&&{passive:!1,capture:!1};Gc(k).on(x.touchEvents.start,".list.sortable .sortable-handler",C,S),x.on("touchmove:active",(function(d){if(e&&a){var w="touchmove"===d.type?d.targetTouches[0].pageY:d.pageY;if(!t){h=a.parents(".page"),f=a.parents(".page-content");var k=parseInt(f.css("padding-top"),10),C=parseInt(f.css("padding-bottom"),10);y=f[0].scrollTop,g=h.offset().top+k,m=h.height()-k-C,a.addClass("sorting"),o.addClass("sortable-sorting"),v=a[0].offsetTop,l=a[0].offsetTop,u=a.parent().height()-v-a.height(),i=a[0].offsetHeight,b=a.offset().top}t=!0,d.preventDefault(),d.f7PreventSwipePanel=!0,r=w-n;var S=f[0].scrollTop-y,E=Math.min(Math.max(r+S,-l),u);a.transform("translate3d(0,"+E+"px,0)");var T,$=44,I=!0;r+S+$<-l&&(I=!1),r+S-$>u&&(I=!1),p=void 0,c=void 0,I&&(b+r+i+$>g+m&&(T=b+r+i+$-(g+m)),b+r<g+$&&(T=b+r-g-$),T&&(f[0].scrollTop+=T)),s.each((function(e){var t=Gc(e);if(t[0]!==a[0]){var n,r=t[0].offsetTop,s=t.height(),l=v+E,u=t[0].f7Translate;l>=r-s/2&&a.index()<t.index()?(n=-i,t.transform("translate3d(0, "+n+"px,0)"),c=t,p=void 0):l<=r+s/2&&a.index()>t.index()?(n=i,t[0].f7Translate=n,t.transform("translate3d(0, "+n+"px,0)"),c=void 0,p||(p=t)):(n=void 0,t.transform("translate3d(0, 0%,0)")),u!==n&&(t.trigger("sortable:move"),x.emit("sortableMove",t[0],o[0])),t[0].f7Translate=n}}))}})),x.on("touchend:passive",(function(){if(!e||!t)return e&&!t&&(x.panel&&(x.panel.allowOpen=!0),x.swipeout&&(x.swipeout.allow=!0),w&&(a.removeClass("sorting"),o.removeClass("sortable-sorting"))),e=!1,void(t=!1);var n;x.panel&&(x.panel.allowOpen=!0),x.swipeout&&(x.swipeout.allow=!0),s.transform(""),a.removeClass("sorting"),o.removeClass("sortable-sorting"),c?n=c.index():p&&(n=p.index());var r=o.dataset().sortableMoveElements;if(void 0===r&&(r=x.params.sortable.moveElements),r&&(c&&a.insertAfter(c),p&&a.insertBefore(p)),(c||p)&&o.hasClass("virtual-list")){void 0===(d=a[0].f7VirtualListIndex)&&(d=a.attr("data-virtual-list-index")),p?void 0===(n=p[0].f7VirtualListIndex)&&(n=p.attr("data-virtual-list-index")):void 0===(n=c[0].f7VirtualListIndex)&&(n=c.attr("data-virtual-list-index")),n=null!==n?parseInt(n,10):void 0;var i=o[0].f7VirtualList;d&&(d=parseInt(d,10)),n&&(n=parseInt(n,10)),i&&i.moveItem(d,n)}void 0===n||Number.isNaN(n)||n===d||(a.trigger("sortable:sort",{from:d,to:n}),x.emit("sortableSort",a[0],{from:d,to:n,el:a[0]},o[0])),p=void 0,c=void 0,e=!1,t=!1})),Gc(k).on("taphold",".sortable-tap-hold",(function(e,t){C(t,!0)}))},enable:function(e){void 0===e&&(e=".list.sortable");var t=Gc(e);0!==t.length&&(t.addClass("sortable-enabled"),t.trigger("sortable:enable"),this.emit("sortableEnable",t[0]))},disable:function(e){void 0===e&&(e=".list.sortable");var t=Gc(e);0!==t.length&&(t.removeClass("sortable-enabled"),t.trigger("sortable:disable"),this.emit("sortableDisable",t[0]))},toggle:function(e){void 0===e&&(e=".list.sortable");var t=Gc(e);0!==t.length&&(t.hasClass("sortable-enabled")?this.sortable.disable(t):this.sortable.enable(t))}},bh={name:"sortable",params:{sortable:{moveElements:!0}},create:function(){Kl(this,{sortable:vh})},on:{init:function(){this.params.sortable&&this.sortable.init()}},clicks:{".sortable-enable":function(e,t){void 0===t&&(t={});this.sortable.enable(t.sortable)},".sortable-disable":function(e,t){void 0===t&&(t={});this.sortable.disable(t.sortable)},".sortable-toggle":function(e,t){void 0===t&&(t={});this.sortable.toggle(t.sortable)}}},yh={init:function(){var e,t,n,r,a,s,o,i,l,u,c,p,d,h,f,m,g,v,b,y,w,x=this,k=bl(),C={};var S=!!Jl().passiveListener&&{passive:!0};x.on("touchstart",(function(e){if(yh.el){var t=Gc(e.target);Gc(yh.el).is(t[0])||t.parents(".swipeout").is(yh.el)||t.hasClass("modal-in")||(t.attr("class")||"").indexOf("-backdrop")>0||t.hasClass("actions-modal")||t.parents(".actions-modal.modal-in, .dialog.modal-in").length>0||x.swipeout.close(yh.el)}})),Gc(k).on(x.touchEvents.start,"li.swipeout",(function(a){x.swipeout.allow&&(t=!1,e=!0,n=void 0,C.x="touchstart"===a.type?a.targetTouches[0].pageX:a.pageX,C.y="touchstart"===a.type?a.targetTouches[0].pageY:a.pageY,r=(new Date).getTime(),s=Gc(this))}),S),x.on("touchmove:active",(function(r){if(e){var k="touchmove"===r.type?r.targetTouches[0].pageX:r.pageX,S="touchmove"===r.type?r.targetTouches[0].pageY:r.pageY;if(void 0===n&&(n=!!(n||Math.abs(S-C.y)>Math.abs(k-C.x))),n)e=!1;else{if(!t){if(Gc(".list.sortable-opened").length>0)return;o=s.find(".swipeout-content"),i=s.find(".swipeout-actions-right"),l=s.find(".swipeout-actions-left"),u=null,c=null,f=null,m=null,b=null,v=null,l.length>0&&(u=l.outerWidth(),f=l.children("a"),v=l.find(".swipeout-overswipe")),i.length>0&&(c=i.outerWidth(),m=i.children("a"),b=i.find(".swipeout-overswipe")),(d=s.hasClass("swipeout-opened"))&&(h=s.find(".swipeout-actions-left.swipeout-actions-opened").length>0?"left":"right"),s.removeClass("swipeout-transitioning"),x.params.swipeout.noFollow||(s.find(".swipeout-actions-opened").removeClass("swipeout-actions-opened"),s.removeClass("swipeout-opened"))}if(t=!0,r.cancelable&&r.preventDefault(),a=k-C.x,p=a,d&&("right"===h?p-=c:p+=u),p>0&&0===l.length||p<0&&0===i.length){if(!d)return e=!1,t=!1,o.transform(""),m&&m.length>0&&m.transform(""),void(f&&f.length>0&&f.transform(""));p=0}var E,T;if(p<0?g="to-left":p>0?g="to-right":g||(g="to-left"),r.f7PreventSwipePanel=!0,x.params.swipeout.noFollow)return d?("right"===h&&a>0&&x.swipeout.close(s),"left"===h&&a<0&&x.swipeout.close(s)):(a<0&&i.length>0&&x.swipeout.open(s,"right"),a>0&&l.length>0&&x.swipeout.open(s,"left")),e=!1,void(t=!1);if(y=!1,w=!1,i.length>0){var $=p;if(T=$/c,$<-c){var I=$/-c;$=-c-Math.pow(-$-c,.8),p=$,b.length>0&&I>x.params.swipeout.overswipeRatio&&(w=!0)}"to-left"!==g&&(T=0,$=0),m.each((function(e){var t=Gc(e);void 0===e.f7SwipeoutButtonOffset&&(t[0].f7SwipeoutButtonOffset=e.offsetLeft),E=e.f7SwipeoutButtonOffset,b.length>0&&t.hasClass("swipeout-overswipe")&&"to-left"===g&&(t.css({left:(w?-E:0)+"px"}),w?(t.hasClass("swipeout-overswipe-active")||(s.trigger("swipeout:overswipeenter"),x.emit("swipeoutOverswipeEnter",s[0])),t.addClass("swipeout-overswipe-active")):(t.hasClass("swipeout-overswipe-active")&&(s.trigger("swipeout:overswipeexit"),x.emit("swipeoutOverswipeExit",s[0])),t.removeClass("swipeout-overswipe-active"))),t.transform("translate3d("+($-E*(1+Math.max(T,-1)))+"px,0,0)")}))}if(l.length>0){var N=p;if(T=N/u,N>u){var O=N/c;N=u+Math.pow(N-u,.8),p=N,v.length>0&&O>x.params.swipeout.overswipeRatio&&(y=!0)}"to-right"!==g&&(N=0,T=0),f.each((function(e,t){var n=Gc(e);void 0===e.f7SwipeoutButtonOffset&&(n[0].f7SwipeoutButtonOffset=u-e.offsetLeft-e.offsetWidth),E=e.f7SwipeoutButtonOffset,v.length>0&&n.hasClass("swipeout-overswipe")&&"to-right"===g&&(n.css({left:(y?E:0)+"px"}),y?(n.hasClass("swipeout-overswipe-active")||(s.trigger("swipeout:overswipeenter"),x.emit("swipeoutOverswipeEnter",s[0])),n.addClass("swipeout-overswipe-active")):(n.hasClass("swipeout-overswipe-active")&&(s.trigger("swipeout:overswipeexit"),x.emit("swipeoutOverswipeExit",s[0])),n.removeClass("swipeout-overswipe-active"))),f.length>1&&n.css("z-index",f.length-t),n.transform("translate3d("+(N+E*(1-Math.min(T,1)))+"px,0,0)")}))}s.trigger("swipeout",T),x.emit("swipeout",s[0],T),o.transform("translate3d("+p+"px,0,0)")}}})),x.on("touchend:passive",(function(){if(!e||!t)return e=!1,void(t=!1);e=!1,t=!1;var n,h,v,b,k=(new Date).getTime()-r,C="to-left"===g?i:l,S="to-left"===g?c:u;if(n=k<300&&(a<-10&&"to-left"===g||a>10&&"to-right"===g)||k>=300&&Math.abs(p)>S/2?"open":"close",k<300&&(0===Math.abs(p)&&(n="close"),Math.abs(p)===S&&(n="open")),"open"===n){yh.el=s[0],s.trigger("swipeout:open"),x.emit("swipeoutOpen",s[0]),s.addClass("swipeout-opened swipeout-transitioning");var E="to-left"===g?-S:S;if(o.transform("translate3d("+E+"px,0,0)"),C.addClass("swipeout-actions-opened"),h="to-left"===g?m:f)for(v=0;v<h.length;v+=1)Gc(h[v]).transform("translate3d("+E+"px,0,0)");w&&i.find(".swipeout-overswipe").trigger("click","f7Overswipe"),y&&l.find(".swipeout-overswipe").trigger("click","f7Overswipe")}else s.trigger("swipeout:close"),x.emit("swipeoutClose",s[0]),yh.el=void 0,s.addClass("swipeout-transitioning").removeClass("swipeout-opened"),o.transform(""),C.removeClass("swipeout-actions-opened");f&&f.length>0&&f!==h&&f.each((function(e){var t=Gc(e);void 0===(b=e.f7SwipeoutButtonOffset)&&(t[0].f7SwipeoutButtonOffset=u-e.offsetLeft-e.offsetWidth),t.transform("translate3d("+b+"px,0,0)")})),m&&m.length>0&&m!==h&&m.each((function(e){var t=Gc(e);void 0===(b=e.f7SwipeoutButtonOffset)&&(t[0].f7SwipeoutButtonOffset=e.offsetLeft),t.transform("translate3d("+-b+"px,0,0)")})),o.transitionEnd((function(){d&&"open"===n||!d&&"close"===n||(s.trigger("open"===n?"swipeout:opened":"swipeout:closed"),x.emit("open"===n?"swipeoutOpened":"swipeoutClosed",s[0]),s.removeClass("swipeout-transitioning"),d&&"close"===n&&(i.length>0&&m.transform(""),l.length>0&&f.transform("")))}))}))},allow:!0,el:void 0,open:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],s=n[1],o=n[2];"function"==typeof n[1]&&(a=n[0],o=n[1],s=n[2]);var i=Gc(a).eq(0);if(0!==i.length&&i.hasClass("swipeout")&&!i.hasClass("swipeout-opened")){s||(s=i.find(".swipeout-actions-right").length>0?"right":"left");var l=i.find(".swipeout-actions-"+s),u=i.find(".swipeout-content");if(0!==l.length){i.trigger("swipeout:open").addClass("swipeout-opened").removeClass("swipeout-transitioning"),e.emit("swipeoutOpen",i[0]),l.addClass("swipeout-actions-opened");var c=l.children("a"),p=l.outerWidth(),d="right"===s?-p:p;c.length>1&&c.each((function(e,t){var n=Gc(e);"right"===s?n.transform("translate3d("+-e.offsetLeft+"px,0,0)"):n.css("z-index",c.length-t).transform("translate3d("+(p-e.offsetWidth-e.offsetLeft)+"px,0,0)")})),i.addClass("swipeout-transitioning"),u.transitionEnd((function(){i.trigger("swipeout:opened"),e.emit("swipeoutOpened",i[0]),o&&o.call(i[0])})),Rl((function(){c.transform("translate3d("+d+"px,0,0)"),u.transform("translate3d("+d+"px,0,0)")})),yh.el=i[0]}}},close:function(e,t){var n=this,r=Gc(e).eq(0);if(0!==r.length&&r.hasClass("swipeout-opened")){var a,s=r.find(".swipeout-actions-opened").hasClass("swipeout-actions-right")?"right":"left",o=r.find(".swipeout-actions-opened").removeClass("swipeout-actions-opened"),i=o.children("a"),l=o.outerWidth();n.swipeout.allow=!1,r.trigger("swipeout:close"),n.emit("swipeoutClose",r[0]),r.removeClass("swipeout-opened").addClass("swipeout-transitioning"),r.find(".swipeout-content").transform("").transitionEnd(u),a=setTimeout(u,500),i.each((function(e){var t=Gc(e);"right"===s?t.transform("translate3d("+-e.offsetLeft+"px,0,0)"):t.transform("translate3d("+(l-e.offsetWidth-e.offsetLeft)+"px,0,0)"),t.css({left:"0px"}).removeClass("swipeout-overswipe-active")})),yh.el&&yh.el===r[0]&&(yh.el=void 0)}function u(){n.swipeout.allow=!0,r.hasClass("swipeout-opened")||(r.removeClass("swipeout-transitioning"),i.transform(""),r.trigger("swipeout:closed"),n.emit("swipeoutClosed",r[0]),t&&t.call(r[0]),a&&clearTimeout(a))}},delete:function(e,t){var n=this,r=Gc(e).eq(0);0!==r.length&&(yh.el=void 0,r.trigger("swipeout:delete"),n.emit("swipeoutDelete",r[0]),r.css({height:r.outerHeight()+"px"}),r.transitionEnd((function(){if(r.trigger("swipeout:deleted"),n.emit("swipeoutDeleted",r[0]),t&&t.call(r[0]),r.parents(".virtual-list").length>0){var e=r.parents(".virtual-list")[0].f7VirtualList,a=r[0].f7VirtualListIndex;e&&void 0!==a&&e.deleteItem(a)}else n.params.swipeout.removeElements?n.params.swipeout.removeElementsWithTimeout?setTimeout((function(){r.remove()}),n.params.swipeout.removeElementsTimeout):r.remove():r.removeClass("swipeout-deleting swipeout-transitioning")})),Rl((function(){r.addClass("swipeout-deleting swipeout-transitioning").css({height:"0px"}).find(".swipeout-content").transform("translate3d(-100%,0,0)")})))}},wh={name:"swipeout",params:{swipeout:{actionsNoFold:!1,noFollow:!1,removeElements:!0,removeElementsWithTimeout:!1,removeElementsTimeout:0,overswipeRatio:1.2}},create:function(){Kl(this,{swipeout:yh})},clicks:{".swipeout-open":function(e,t){void 0===t&&(t={});this.swipeout.open(t.swipeout,t.side)},".swipeout-close":function(e){var t=e.closest(".swipeout");0!==t.length&&this.swipeout.close(t)},".swipeout-delete":function(e,t){void 0===t&&(t={});var n=this,r=e.closest(".swipeout");if(0!==r.length){var a=t,s=a.confirm,o=a.confirmTitle;t.confirm?n.dialog.confirm(s,o,(function(){n.swipeout.delete(r)})):n.swipeout.delete(r)}}},on:{init:function(){this.params.swipeout&&this.swipeout.init()}}},xh={toggleClicked:function(e){var t=e.closest(".accordion-item").eq(0);t.length||(t=e.parents("li").eq(0));var n=e.parents(".accordion-item-content").eq(0);n.length&&n.parents(t).length||e.parents("li").length>1&&e.parents("li")[0]!==t[0]||this.accordion.toggle(t)},open:function(e){var t=this,n=Gc(e),r=!1;function a(){r=!0}if(n.trigger("accordion:beforeopen",{prevent:a},a),t.emit("accordionBeforeOpen",n[0],a),!r){var s=n.parents(".accordion-list").eq(0),o=n.children(".accordion-item-content");if(o.removeAttr("aria-hidden"),0===o.length&&(o=n.find(".accordion-item-content")),0!==o.length){var i=s.length>0&&n.parent().children(".accordion-item-opened");i.length>0&&t.accordion.close(i),o.transitionEnd((function(){n.hasClass("accordion-item-opened")?(o.transition(0),o.css("height","auto"),Rl((function(){o.transition(""),n.trigger("accordion:opened"),t.emit("accordionOpened",n[0])}))):(o.css("height",""),n.trigger("accordion:closed"),t.emit("accordionClosed",n[0]))})),o.css("height",o[0].scrollHeight+"px"),n.trigger("accordion:open"),n.addClass("accordion-item-opened"),t.emit("accordionOpen",n[0])}}},close:function(e){var t=this,n=Gc(e),r=!1;function a(){r=!0}if(n.trigger("accordion:beforeclose",{prevent:a},a),t.emit("accordionBeforeClose",n[0],a),!r){var s=n.children(".accordion-item-content");0===s.length&&(s=n.find(".accordion-item-content")),n.removeClass("accordion-item-opened"),s.attr("aria-hidden",!0),s.transition(0),s.css("height",s[0].scrollHeight+"px"),s.transitionEnd((function(){n.hasClass("accordion-item-opened")?(s.transition(0),s.css("height","auto"),Rl((function(){s.transition(""),n.trigger("accordion:opened"),t.emit("accordionOpened",n[0])}))):(s.css("height",""),n.trigger("accordion:closed"),t.emit("accordionClosed",n[0]))})),Rl((function(){s.transition(""),s.css("height",""),n.trigger("accordion:close"),t.emit("accordionClose",n[0])}))}},toggle:function(e){var t=Gc(e);0!==t.length&&(t.hasClass("accordion-item-opened")?this.accordion.close(e):this.accordion.open(e))}},kh={name:"accordion",create:function(){Kl(this,{accordion:xh})},clicks:{".accordion-item .item-link, .accordion-item-toggle, .links-list.accordion-list > ul > li > a":function(e){xh.toggleClicked.call(this,e)}}};function Ch(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sh(e,t){return Sh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Sh(e,t)}var Eh=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var a,s=Ch(r=e.call(this,n,[t])||this),o=Zl(),i=bl();"md"===t.theme?a=48:"ios"===t.theme?a=44:"aurora"===t.theme&&(a=38);var l={cols:1,height:a,cache:!0,dynamicHeightBufferSize:1,showFilteredItemsOnly:!1,renderExternal:void 0,setListHeight:!0,searchByItem:void 0,searchAll:void 0,ul:null,createUl:!0,scrollableParentEl:void 0,renderItem:function(e){return('\n          <li>\n            <div class="item-content">\n              <div class="item-inner">\n                <div class="item-title">'+e+"</div>\n              </div>\n            </div>\n          </li>\n        ").trim()},on:{}};if(s.useModulesParams(l),s.params=Vl(l,n),void 0!==s.params.height&&s.params.height||(s.params.height=a),s.$el=Gc(n.el),s.el=s.$el[0],0===s.$el.length)return Ch(r);s.$el[0].f7VirtualList=s,s.items=s.params.items,s.params.showFilteredItemsOnly&&(s.filteredItems=[]),s.params.renderItem&&(s.renderItem=s.params.renderItem),s.$pageContentEl=s.$el.parents(".page-content"),s.pageContentEl=s.$pageContentEl[0],s.$scrollableParentEl=s.params.scrollableParentEl?Gc(s.params.scrollableParentEl).eq(0):s.$pageContentEl,!s.$scrollableParentEl.length&&s.$pageContentEl.length&&(s.$scrollableParentEl=s.$pageContentEl),s.scrollableParentEl=s.$scrollableParentEl[0],void 0!==s.params.updatableScroll?s.updatableScroll=s.params.updatableScroll:(s.updatableScroll=!0,o.ios&&o.osVersion.split(".")[0]<8&&(s.updatableScroll=!1));var u,c=s.params.ul;s.$ul=c?Gc(s.params.ul):s.$el.children("ul"),0===s.$ul.length&&s.params.createUl&&(s.$el.append("<ul></ul>"),s.$ul=s.$el.children("ul")),s.ul=s.$ul[0],u=s.ul||s.params.createUl?s.$ul:s.$el,Vl(s,{$itemsWrapEl:u,itemsWrapEl:u[0],domCache:{},displayDomCache:{},tempDomElement:i.createElement("ul"),lastRepaintY:null,fragment:i.createDocumentFragment(),pageHeight:void 0,rowsPerScreen:void 0,rowsBefore:void 0,rowsAfter:void 0,rowsToRender:void 0,maxBufferHeight:0,listHeight:void 0,dynamicHeight:"function"==typeof s.params.height}),s.useModules();var p,d,h,f,m=s.handleScroll.bind(s),g=s.handleResize.bind(s);return s.attachEvents=function(){p=s.$el.parents(".page").eq(0),d=s.$el.parents(".tab").filter((function(e){return 0===Gc(e).parent(".tabs").parent(".tabs-animated-wrap, .tabs-swipeable-wrap").length})).eq(0),h=s.$el.parents(".panel").eq(0),f=s.$el.parents(".popup").eq(0),s.$scrollableParentEl.on("scroll",m),p.length&&p.on("page:reinit",g),d.length&&d.on("tab:show",g),h.length&&h.on("panel:open",g),f.length&&f.on("popup:open",g),t.on("resize",g)},s.detachEvents=function(){s.$scrollableParentEl.off("scroll",m),p.length&&p.off("page:reinit",g),d.length&&d.off("tab:show",g),h.length&&h.off("panel:open",g),f.length&&f.off("popup:open",g),t.off("resize",g)},s.init(),s||Ch(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Sh(t,n);var a=r.prototype;return a.setListSize=function(){var e=this,t=e.filteredItems||e.items;if(e.pageHeight=e.$scrollableParentEl[0].offsetHeight,e.dynamicHeight){e.listHeight=0,e.heights=[];for(var n=0;n<t.length;n+=1){var r=e.params.height(t[n]);e.listHeight+=r,e.heights.push(r)}}else e.listHeight=Math.ceil(t.length/e.params.cols)*e.params.height,e.rowsPerScreen=Math.ceil(e.pageHeight/e.params.height),e.rowsBefore=e.params.rowsBefore||2*e.rowsPerScreen,e.rowsAfter=e.params.rowsAfter||e.rowsPerScreen,e.rowsToRender=e.rowsPerScreen+e.rowsBefore+e.rowsAfter,e.maxBufferHeight=e.rowsBefore/2*e.params.height;(e.updatableScroll||e.params.setListHeight)&&e.$itemsWrapEl.css({height:e.listHeight+"px"})},a.render=function(e,t){var n=this;e&&(n.lastRepaintY=null);var r=-(n.$el[0].getBoundingClientRect().top-n.$scrollableParentEl[0].getBoundingClientRect().top);if(void 0!==t&&(r=t),null===n.lastRepaintY||Math.abs(r-n.lastRepaintY)>n.maxBufferHeight||!n.updatableScroll&&n.$scrollableParentEl[0].scrollTop+n.pageHeight>=n.$scrollableParentEl[0].scrollHeight){n.lastRepaintY=r;var a,s,o,i=n.filteredItems||n.items,l=0,u=0;if(n.dynamicHeight){var c,p=0;n.maxBufferHeight=n.pageHeight;for(var d=0;d<n.heights.length;d+=1)c=n.heights[d],void 0===a&&(p+c>=r-2*n.pageHeight*n.params.dynamicHeightBufferSize?a=d:l+=c),void 0===s&&((p+c>=r+2*n.pageHeight*n.params.dynamicHeightBufferSize||d===n.heights.length-1)&&(s=d+1),u+=c),p+=c;s=Math.min(s,i.length)}else(a=(parseInt(r/n.params.height,10)-n.rowsBefore)*n.params.cols)<0&&(a=0),s=Math.min(a+n.rowsToRender*n.params.cols,i.length);var h,f=[];for(n.reachEnd=!1,h=a;h<s;h+=1){var m=void 0,g=n.items.indexOf(i[h]);h===a&&(n.currentFromIndex=g),h===s-1&&(n.currentToIndex=g),n.filteredItems?n.items[g]===n.filteredItems[n.filteredItems.length-1]&&(n.reachEnd=!0):g===n.items.length-1&&(n.reachEnd=!0),n.params.renderExternal?f.push(i[h]):n.domCache[g]?(m=n.domCache[g]).f7VirtualListIndex=g:(n.renderItem?n.tempDomElement.innerHTML=n.renderItem(i[h],g).trim():n.tempDomElement.innerHTML=i[h].toString().trim(),m=n.tempDomElement.childNodes[0],n.params.cache&&(n.domCache[g]=m),m.f7VirtualListIndex=g),h===a&&(o=n.dynamicHeight?l:h*n.params.height/n.params.cols),n.params.renderExternal||(m.style.top=o+"px",n.emit("local::itemBeforeInsert vlItemBeforeInsert",n,m,i[h]),n.fragment.appendChild(m))}n.updatableScroll||(n.dynamicHeight?n.itemsWrapEl.style.height=u+"px":n.itemsWrapEl.style.height=h*n.params.height/n.params.cols+"px"),n.params.renderExternal?i&&0===i.length&&(n.reachEnd=!0):(n.emit("local::beforeClear vlBeforeClear",n,n.fragment),n.itemsWrapEl.innerHTML="",n.emit("local::itemsBeforeInsert vlItemsBeforeInsert",n,n.fragment),i&&0===i.length?(n.reachEnd=!0,n.params.emptyTemplate&&(n.itemsWrapEl.innerHTML=n.params.emptyTemplate)):n.itemsWrapEl.appendChild(n.fragment),n.emit("local::itemsAfterInsert vlItemsAfterInsert",n,n.fragment)),void 0!==t&&e&&n.$scrollableParentEl.scrollTop(t,0),n.params.renderExternal&&n.params.renderExternal(n,{fromIndex:a,toIndex:s,listHeight:n.listHeight,topPosition:o,items:f})}},a.filterItems=function(e,t){void 0===t&&(t=!0);var n=this;n.filteredItems=[];for(var r=0;r<e.length;r+=1)n.filteredItems.push(n.items[e[r]]);t&&(n.$scrollableParentEl[0].scrollTop=0),n.update()},a.resetFilter=function(){var e=this;e.params.showFilteredItemsOnly?e.filteredItems=[]:(e.filteredItems=null,delete e.filteredItems),e.update()},a.scrollToItem=function(e){var t=this;if(e>t.items.length)return!1;var n=0;if(t.dynamicHeight)for(var r=0;r<e;r+=1)n+=t.heights[r];else n=e*t.params.height;var a=t.$el[0].offsetTop;return t.render(!0,a+n-parseInt(t.$scrollableParentEl.css("padding-top"),10)),!0},a.handleScroll=function(){this.render()},a.isVisible=function(){var e=this;return!!(e.el.offsetWidth||e.el.offsetHeight||e.el.getClientRects().length)},a.handleResize=function(){var e=this;e.isVisible()&&(e.setListSize(),e.render(!0))},a.appendItems=function(e){for(var t=0;t<e.length;t+=1)this.items.push(e[t]);this.update()},a.appendItem=function(e){this.appendItems([e])},a.replaceAllItems=function(e){var t=this;t.items=e,delete t.filteredItems,t.domCache={},t.update()},a.replaceItem=function(e,t){var n=this;n.items[e]=t,n.params.cache&&delete n.domCache[e],n.update()},a.prependItems=function(e){for(var t=this,n=e.length-1;n>=0;n-=1)t.items.unshift(e[n]);if(t.params.cache){var r={};Object.keys(t.domCache).forEach((function(n){r[parseInt(n,10)+e.length]=t.domCache[n]})),t.domCache=r}t.update()},a.prependItem=function(e){this.prependItems([e])},a.moveItem=function(e,t){var n=this,r=e,a=t;if(r!==a){var s=n.items.splice(r,1)[0];if(a>=n.items.length?(n.items.push(s),a=n.items.length-1):n.items.splice(a,0,s),n.params.cache){var o={};Object.keys(n.domCache).forEach((function(e){var t=parseInt(e,10),s=r<a?r:a,i=r<a?a:r,l=r<a?-1:1;(t<s||t>i)&&(o[t]=n.domCache[t]),t===s&&(o[i]=n.domCache[t]),t>s&&t<=i&&(o[t+l]=n.domCache[t])})),n.domCache=o}n.update()}},a.insertItemBefore=function(e,t){var n=this;if(0!==e)if(e>=n.items.length)n.appendItem(t);else{if(n.items.splice(e,0,t),n.params.cache){var r={};Object.keys(n.domCache).forEach((function(t){var a=parseInt(t,10);a>=e&&(r[a+1]=n.domCache[a])})),n.domCache=r}n.update()}else n.prependItem(t)},a.deleteItems=function(e){for(var t,n=this,r=0,a=function(a){var s=e[a];void 0!==t&&s>t&&(r=-a),s+=r,t=e[a];var o=n.items.splice(s,1)[0];if(n.filteredItems&&n.filteredItems.indexOf(o)>=0&&n.filteredItems.splice(n.filteredItems.indexOf(o),1),n.params.cache){var i={};Object.keys(n.domCache).forEach((function(e){var t=parseInt(e,10);t===s?delete n.domCache[s]:parseInt(e,10)>s?i[t-1]=n.domCache[e]:i[t]=n.domCache[e]})),n.domCache=i}},s=0;s<e.length;s+=1)a(s);n.update()},a.deleteAllItems=function(){var e=this;e.items=[],delete e.filteredItems,e.params.cache&&(e.domCache={}),e.update()},a.deleteItem=function(e){this.deleteItems([e])},a.clearCache=function(){this.domCache={}},a.update=function(e){var t=this;e&&t.params.cache&&(t.domCache={}),t.setListSize(),t.render(!0)},a.init=function(){var e=this;e.attachEvents(),e.setListSize(),e.render()},a.destroy=function(){var e=this;e.detachEvents(),e.$el[0].f7VirtualList=null,delete e.$el[0].f7VirtualList,Ol(e),e=null},r}(au),Th=Eh,$h={name:"virtualList",static:{VirtualList:Th},create:function(){this.virtualList=Yc({defaultSelector:".virtual-list",constructor:Th,app:this,domProp:"f7VirtualList"})}};function Ih(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nh(e,t){return Nh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Nh(e,t)}var Oh=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var a,s,o,i,l=Ih(r=e.call(this,n,[t])||this),u={el:null,listEl:null,indexes:"auto",iosItemHeight:14,mdItemHeight:14,auroraItemHeight:14,scrollList:!0,label:!1,renderItem:function(e,t){return("\n          <li>"+e+"</li>\n        ").trim()},renderSkipPlaceholder:function(){return'<li class="list-index-skip-placeholder"></li>'},on:{}};if(l.useModulesParams(u),l.params=Vl(u,n),!l.params.el)return l||Ih(r);if((a=Gc(l.params.el))[0].f7ListIndex)return a[0].f7ListIndex||Ih(r);if(0===(i=a.find("ul")).length&&(i=Gc("<ul></ul>"),a.append(i)),l.params.listEl&&(s=Gc(l.params.listEl)),"auto"===l.params.indexes&&!s)return l||Ih(r);function c(){var e={index:l};l.calcSize(),e!==l.height&&l.render()}function p(e){var t=Gc(e.target).closest("li");if(t.length){var n=t.index();if(l.skipRate>0){var r=n/(t.siblings("li").length-1);n=Math.round((l.indexes.length-1)*r)}var a=l.indexes[n];l.$el.trigger("listindex:click",{content:a,index:n}),l.emit("local::click listIndexClick",l,a,n),l.$el.trigger("listindex:select",{content:a,index:n}),l.emit("local::select listIndexSelect",l,a,n),l.$listEl&&l.params.scrollList&&l.scrollListToIndex(a,n)}}s?o=s.parents(".page-content").eq(0):0===(o=a.siblings(".page-content").eq(0)).length&&(o=a.parents(".page").eq(0).find(".page-content").eq(0)),a[0].f7ListIndex=l,Vl(l,{app:t,$el:a,el:a&&a[0],$ul:i,ul:i&&i[0],$listEl:s,listEl:s&&s[0],$pageContentEl:o,pageContentEl:o&&o[0],indexes:n.indexes,height:0,skipRate:0}),l.useModules();var d,h,f,m,g,v={},b=null;function y(e){var t=i.children();t.length&&(f=t[0].getBoundingClientRect().top,m=t[t.length-1].getBoundingClientRect().top+t[0].offsetHeight,v.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,v.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,d=!0,h=!1,b=null)}function w(e){if(d){!h&&l.params.label&&(g=Gc('<span class="list-index-label"></span>'),a.append(g)),h=!0;var t="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;e.preventDefault();var n=(t-f)/(m-f);n=Math.min(Math.max(n,0),1);var r=Math.round((l.indexes.length-1)*n),s=l.indexes[r],o=m-f,i=(l.height-o)/2+(1-n)*o;r!==b&&(l.params.label&&g.html(s).transform("translateY(-"+i+"px)"),l.$listEl&&l.params.scrollList&&l.scrollListToIndex(s,r)),b=r,l.$el.trigger("listindex:select"),l.emit("local::select listIndexSelect",l,s,r)}}function x(){d&&(d=!1,h=!1,l.params.label&&(g&&g.remove(),g=void 0))}var k=!!Jl().passiveListener&&{passive:!0};return l.attachEvents=function(){a.parents(".tab").on("tab:show",c),a.parents(".page").on("page:reinit",c),a.parents(".panel").on("panel:open",c),a.parents(".sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast").on("modal:open",c),t.on("resize",c),a.on("click",p),a.on(t.touchEvents.start,y,k),t.on("touchmove:active",w),t.on("touchend:passive",x)},l.detachEvents=function(){a.parents(".tab").off("tab:show",c),a.parents(".page").off("page:reinit",c),a.parents(".panel").off("panel:open",c),a.parents(".sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast").off("modal:open",c),t.off("resize",c),a.off("click",p),a.off(t.touchEvents.start,y,k),t.off("touchmove:active",w),t.off("touchend:passive",x)},l.init(),l||Ih(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Nh(t,n);var a=r.prototype;return a.scrollListToIndex=function(e,t){var n,r=this,a=r.$listEl,s=r.$pageContentEl,o=r.app;if(!a||!s||0===s.length)return r;if(a.find(".list-group-title, .item-divider").each((function(t){if(!n){var r=Gc(t);r.text()===e&&(n=r)}})),!n||0===n.length)return r;var i=n.parent().offset().top,l=parseInt(s.css("padding-top"),10),u=s[0].scrollTop,c=n.offset().top;if(s.parents(".page-with-navbar-large").length){var p=o.navbar.getElByPage(s.parents(".page-with-navbar-large").eq(0)),d=Gc(p).find(".title-large");d.length&&(l-=d[0].offsetHeight||0)}return i<=l?s.scrollTop(i+u-l):s.scrollTop(c+u-l),r},a.renderSkipPlaceholder=function(){return this.params.renderSkipPlaceholder.call(this)},a.renderItem=function(e,t){return this.params.renderItem.call(this,e,t)},a.render=function(){var e,t=this,n=t.$ul,r=t.indexes,a=t.skipRate,s=r.map((function(n,r){if(r%a!=0&&a>0)return e=!0,"";var s=t.renderItem(n,r);return e&&(s=t.renderSkipPlaceholder()+s),e=!1,s})).join("");return n.html(s),t},a.calcSize=function(){var e=this,t=e.app,n=e.params,r=e.el,a=e.indexes,s=r.offsetHeight,o=n[t.theme+"ItemHeight"],i=Math.floor(s/o),l=a.length,u=0;return l>i&&(u=Math.ceil((2*l-1)/i)),e.height=s,e.skipRate=u,e},a.calcIndexes=function(){var e=this;return"auto"===e.params.indexes?(e.indexes=[],e.$listEl.find(".list-group-title, .item-divider").each((function(t){var n=Gc(t).text();e.indexes.indexOf(n)<0&&e.indexes.push(n)}))):e.indexes=e.params.indexes,e},a.update=function(){var e=this;return e.calcIndexes(),e.calcSize(),e.render(),e},a.init=function(){var e=this;e.calcIndexes(),e.calcSize(),e.render(),e.attachEvents()},a.destroy=function(){var e=this;e.$el.trigger("listindex:beforedestroy",e),e.emit("local::beforeDestroy listIndexBeforeDestroy"),e.detachEvents(),e.$el[0]&&(e.$el[0].f7ListIndex=null,delete e.$el[0].f7ListIndex),Ol(e),e=null},r}(au),Ah=Oh,Mh={name:"listIndex",static:{ListIndex:Ah},create:function(){this.listIndex=Yc({defaultSelector:".list-index",constructor:Ah,app:this,domProp:"f7ListIndex"})},on:{tabMounted:function(e){var t=this;Gc(e).find(".list-index-init").each((function(e){var n=Vl(Gc(e).dataset(),{el:e});t.listIndex.create(n)}))},tabBeforeRemove:function(e){Gc(e).find(".list-index-init").each((function(e){e.f7ListIndex&&e.f7ListIndex.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".list-index-init").each((function(e){var n=Vl(Gc(e).dataset(),{el:e});t.listIndex.create(n)}))},pageBeforeRemove:function(e){e.$el.find(".list-index-init").each((function(e){e.f7ListIndex&&e.f7ListIndex.destroy()}))}},vnode:{"list-index-init":{insert:function(e){var t=e.elm,n=Vl(Gc(t).dataset(),{el:t});this.listIndex.create(n)},destroy:function(e){var t=e.elm;t.f7ListIndex&&t.f7ListIndex.destroy()}}}},_h={show:function(){for(var e,t,n,r,a,s=this,o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];1===i.length&&i[0]&&i[0].constructor===Object?(e=i[0].tabEl,t=i[0].tabLinkEl,n=i[0].animate,r=i[0].tabRoute,a=i[0].animatedInit):(e=i[0],t=i[1],n=i[2],r=i[3],"boolean"==typeof i[1]&&(e=i[0],n=i[1],t=i[2],r=i[3],i.length>2&&t.constructor===Object&&(e=i[0],n=i[1],r=i[2],t=i[3]))),void 0===n&&(n=!0);var u,c=Gc(e);if(r&&c[0]&&(c[0].f7TabRoute=r),!a&&(0===c.length||c.hasClass("tab-active")))return{$newTabEl:c,newTabEl:c[0]};t&&(u=Gc(t));var p=c.parent(".tabs");if(0===p.length)return{$newTabEl:c,newTabEl:c[0]};s.swipeout&&(s.swipeout.allowOpen=!0);var d=[];function h(e){d.push(e)}function f(){d.forEach((function(e){e()}))}var m,g=!1;if(p.parent().hasClass("tabs-animated-wrap")){p.parent()[n?"removeClass":"addClass"]("not-animated");var v=parseFloat(p.css("transition-duration").replace(",","."));n&&v&&(p.transitionEnd(f),g=!0);var b=100*(s.rtl?c.index():-c.index());p.transform("translate3d("+b+"%,0,0)")}p.parent().hasClass("tabs-swipeable-wrap")&&s.swiper&&((m=p.parent()[0].swiper)&&m.activeIndex!==c.index()?(g=!0,m.once("slideChangeTransitionEnd",(function(){f()})).slideTo(c.index(),n?void 0:0)):m&&m.animating&&(g=!0,m.once("slideChangeTransitionEnd",(function(){f()}))));var y=p.children(".tab-active");if(y.removeClass("tab-active"),!a&&(!m||m&&!m.animating||m&&r)&&(y.hasClass("view")&&y.children(".page").length&&y.children(".page").each((function(e){Gc(e).trigger("page:tabhide"),s.emit("pageTabHide",e)})),y.trigger("tab:hide"),s.emit("tabHide",y[0])),c.addClass("tab-active"),!a&&(!m||m&&!m.animating||m&&r)&&(c.hasClass("view")&&c.children(".page").length&&c.children(".page").each((function(e){Gc(e).trigger("page:tabshow"),s.emit("pageTabShow",e)})),c.trigger("tab:show"),s.emit("tabShow",c[0])),!u&&((!(u=Gc("string"==typeof e?'.tab-link[href="'+e+'"]':'.tab-link[href="#'+c.attr("id")+'"]'))||u&&0===u.length)&&Gc("[data-tab]").each((function(e){c.is(Gc(e).attr("data-tab"))&&(u=Gc(e))})),r&&(!u||u&&0===u.length)&&0===(u=Gc('[data-route-tab-id="'+r.route.tab.id+'"]')).length&&(u=Gc('.tab-link[href="'+r.url+'"]')),u.length>1&&c.parents(".page").length&&(u=u.filter((function(e){return Gc(e).parents(".page")[0]===c.parents(".page")[0]})),"ios"===s.theme&&0===u.length&&r))){var w=c.parents(".page"),x=Gc(s.navbar.getElByPage(w));0===(u=x.find('[data-route-tab-id="'+r.route.tab.id+'"]')).length&&(u=x.find('.tab-link[href="'+r.url+'"]'))}if(u.length>0){var k;if(y&&y.length>0){var C=y.attr("id");C&&(!(k=Gc('.tab-link[href="#'+C+'"]'))||k&&0===k.length)&&(k=Gc('.tab-link[data-route-tab-id="'+C+'"]')),(!k||k&&0===k.length)&&Gc("[data-tab]").each((function(e){y.is(Gc(e).attr("data-tab"))&&(k=Gc(e))})),(!k||k&&0===k.length)&&(k=u.siblings(".tab-link-active"))}else r&&(k=u.siblings(".tab-link-active"));if(k&&k.length>1&&y&&y.parents(".page").length&&(k=k.filter((function(e){return Gc(e).parents(".page")[0]===y.parents(".page")[0]}))),k&&k.length>0&&k.removeClass("tab-link-active"),u&&u.length>0){u.addClass("tab-link-active");var S=u.parents(".tabbar, .tabbar-labels"),E=s.toolbar&&S.length>0&&(S.hasClass("tabbar-highlight")||"ios"!==s.theme);E&&s.toolbar.setHighlight(S)}}return{$newTabEl:c,newTabEl:c[0],$oldTabEl:y,oldTabEl:y[0],onTabsChanged:h,animated:g}}},Rh={name:"tabs",create:function(){Vl(this,{tab:{show:_h.show.bind(this)}})},on:{"pageInit tabMounted":function(e){var t=Gc(e.el||e).find(".tabs-animated-wrap > .tabs > .tab-active")[0];if(t){this.tab.show({tabEl:t,animatedInit:!0,animate:!1})}}},clicks:{".tab-link":function(e,t){if(void 0===t&&(t={}),e.attr("href")&&0===e.attr("href").indexOf("#")||e.attr("data-tab")){this.tab.show({tabEl:t.tab||e.attr("href"),tabLinkEl:e,animate:t.animate})}}}};var Ph=function(e){var t=e.app;if(!e.swipeInitialized){Vl(e,{swipeable:!0,swipeInitialized:!0});var n,r,a,s,o,i,l,u,c,p,d,h,f,m=e.params,g=e.$el,v=e.$backdropEl,b=e.side,y=e.effect,w={},x=0;t.on("touchstart:passive",k),t.on("touchmove:active",C),t.on("touchend:passive",S),t.on("gesturestart",E),t.on("gestureend",T),e.on("panelDestroy",(function(){t.off("touchstart:passive",k),t.off("touchmove:active",C),t.off("touchend:passive",S),t.off("gesturestart",E),t.off("gestureend",T)}))}function k(u){if(e.swipeable&&!a&&t.panel.allowOpen&&(m.swipe||m.swipeOnlyClose)&&!r&&!(Gc(".modal-in:not(.toast):not(.notification), .photo-browser-in").length>0)){var c=(n=t.panel.get("left"===b?"right":"left")||{}).opened&&n.$el&&!n.$el.hasClass("panel-in-breakpoint");if((e.opened||!c)&&(m.swipeOnlyClose||!c)&&(!u.target||"input"!==u.target.nodeName.toLowerCase()||"range"!==u.target.type)&&!(Gc(u.target).closest(".range-slider, .tabs-swipeable-wrap, .calendar-months, .no-swipe-panel, .card-opened").length>0)&&(w.x="touchstart"===u.type?u.targetTouches[0].pageX:u.pageX,w.y="touchstart"===u.type?u.targetTouches[0].pageY:u.pageY,!m.swipeOnlyClose||e.opened)){if(m.swipeActiveArea&&!e.opened){if("left"===b&&w.x>m.swipeActiveArea)return;if("right"===b&&w.x<t.width-m.swipeActiveArea)return}x=0,f=Gc(e.getViewEl()),s=!1,r=!0,o=void 0,i=!1,l=Pl(),h=void 0}}}function C(n){if(r&&!a&&!i&&!((x+=1)<2))if(n.f7PreventSwipePanel||t.preventSwipePanelBySwipeBack||t.preventSwipePanel)r=!1;else{var l="touchmove"===n.type?n.targetTouches[0].pageX:n.pageX,k="touchmove"===n.type?n.targetTouches[0].pageY:n.pageY;if(void 0===o&&(o=!!(o||Math.abs(k-w.y)>Math.abs(l-w.x))),o)r=!1;else{if(!h){if(h=l>w.x?"to-right":"to-left",m.swipeActiveArea>0&&!e.opened){if("left"===b&&w.x>m.swipeActiveArea)return void(r=!1);if("right"===b&&w.x<t.width-m.swipeActiveArea)return void(r=!1)}if(g.hasClass("panel-in-breakpoint"))return void(r=!1);if("left"===b&&"to-left"===h&&!g.hasClass("panel-in")||"right"===b&&"to-right"===h&&!g.hasClass("panel-in"))return void(r=!1)}var C=e.opened?0:-m.swipeThreshold;"right"===b&&(C=-C),s||(e.opened||(e.insertToRoot(),g.addClass("panel-in-swipe"),v.css("visibility","visible"),g.trigger("panel:swipeopen"),e.emit("local::swipeOpen panelSwipeOpen",e)),d=g[0].offsetWidth,"reveal"===y&&g.hasClass("panel-in-collapsed")&&(d-=parseFloat(f.css("margin-"+b))),g.transition(0)),s=!0,n.cancelable&&n.preventDefault(),u=l-w.x+C,"right"===b?"cover"===y||"push"===y?((c=u+(e.opened?0:d))<0&&(c=0),c>d&&(c=d)):((c=u-(e.opened?d:0))>0&&(c=0),c<-d&&(c=-d)):((c=u+(e.opened?d:0))<0&&(c=0),c>d&&(c=d));var E=Math.abs(c/d);if("reveal"===y)m.swipeNoFollow||(f.transform("translate3d("+c+"px,0,0)").transition(0),v.transform("translate3d("+c+"px,0,0)").transition(0)),g.trigger("panel:swipe",Math.abs(c/d)),e.emit("local::swipe panelSwipe",e,Math.abs(c/d));else{if("left"===b&&(c-=d),!m.swipeNoFollow&&(v.transition(0),p=1-Math.abs(c/d),v.css({opacity:p}),g.transform("translate3d("+c+"px,0,0)").transition(0),"push"===y)){var T="left"===b?c+d:c-d;f.transform("translate3d("+T+"px,0,0)").transition(0),v.transform("translate3d("+T+"px,0,0)").transition(0)}g.trigger("panel:swipe",Math.abs(c/d)),e.emit("local::swipe panelSwipe",e,Math.abs(c/d))}if(m.swipeNoFollow)(e.opened&&0===E||!e.opened&&1===E)&&(i=!0,S(n))}}}function S(t){if(!r||!s)return r=!1,void(s=!1);var n="gesturestart"===t.type||a;r=!1,s=!1;var o,i=(new Date).getTime()-l,p=(0===c||Math.abs(c)===d)&&!m.swipeNoFollow,h=m.swipeThreshold||0;"swap"===(o=n?"reset":e.opened?"cover"===y||"push"===y?0===c?"reset":i<300&&Math.abs(c)>0?"swap":i>=300&&Math.abs(c)<d/2?"reset":"swap":c===-d?"reset":i<300&&Math.abs(c)>=0||i>=300&&Math.abs(c)<=d/2?"left"===b&&c===d?"reset":"swap":"reset":Math.abs(u)<h?"reset":"cover"===y||"push"===y?0===c||i<300&&Math.abs(c)>0||i>=300&&Math.abs(c)<d/2?"swap":"reset":0===c?"reset":i<300&&Math.abs(c)>0||i>=300&&Math.abs(c)>=d/2?"swap":"reset")&&(e.opened?e.close(!p):e.open(!p));var w=!0;if("reset"===o&&!e.opened)if(p)g.removeClass("panel-in-swipe");else{w=!1;var x="reveal"===y?f:g;e.setStateClasses("before-closing"),x.transitionEnd((function(){g.hasClass("panel-in")||(g.removeClass("panel-in-swipe"),e.setStateClasses("after-closing"))}))}"reveal"!==y&&"push"!==y||Rl((function(){f.transition(""),f.transform("")})),w&&g.removeClass("panel-in-swipe"),g.transition("").transform(""),v.transform("").transition("").css({opacity:"",visibility:""})}function E(e){a=!0,S(e)}function T(){a=!1}};var Dh=function(e){var t=e.app,n=Jl();if(!e.resizableInitialized){Vl(e,{resizable:!0,resizableWidth:null,resizableInitialized:!0});var r=Gc("html"),a=e.$el,s=e.$backdropEl,o=e.side,i=e.effect;if(a){var l,u,c,p,d,h,f,m,g={};0===e.$el.find(".panel-resize-handler").length&&e.$el.append('<div class="panel-resize-handler"></div>'),e.$resizeHandlerEl=e.$el.children(".panel-resize-handler"),a.addClass("panel-resizable");var v=!!n.passiveListener&&{passive:!0};e.$el.on(t.touchEvents.start,".panel-resize-handler",y,v),t.on("touchmove:active",w),t.on("touchend:passive",x),t.on("resize",k),e.on("beforeOpen",k),e.once("panelDestroy",(function(){a.removeClass("panel-resizable"),e.$resizeHandlerEl.remove(),e.$el.off(t.touchEvents.start,".panel-resize-handler",y,v),t.off("touchmove:active",w),t.off("touchend:passive",x),t.off("resize",k),e.off("beforeOpen",k)}))}}function b(e){if(!e)return null;if(e.indexOf("%")>=0||e.indexOf("vw")>=0)return parseInt(e,10)/100*t.width;var n=parseInt(e,10);return Number.isNaN(n)?null:n}function y(t){e.resizable&&a.hasClass("panel-resizable")&&(g.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,g.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,u=!1,l=!0,h=b(a.css("min-width")),f=b(a.css("max-width")),m=a.hasClass("panel-in-breakpoint"))}function w(n){if(l){var v="touchmove"===n.type?n.targetTouches[0].pageX:n.pageX;u||(p=a[0].offsetWidth,a.transition(0),a.addClass("panel-resizing"),r.css("cursor","col-resize"),("cover"!==i||m)&&(d=Gc(e.getViewEl()),e.$containerEl&&e.$containerEl.hasClass("page")&&d.add(e.$containerEl.children(".page-content, .tabs, .fab"))),"cover"===i||m||(s.transition(0),d.transition(0))),u=!0,n.preventDefault(),c=v-g.x;var b="left"===o?p+c:p-c;h&&!Number.isNaN(h)&&(b=Math.max(b,h)),f&&!Number.isNaN(f)&&(b=Math.min(b,f)),b=Math.min(Math.max(b,0),t.width),e.resizableWidth=b,a[0].style.width=b+"px","cover"===i||m?m&&d&&d.css("margin-"+o,b+"px"):(d&&d.transform("translate3d("+("left"===o?b:-b)+"px, 0, 0)"),s&&s.transform("translate3d("+("left"===o?b:-b)+"px, 0, 0)")),a.trigger("panel:resize",b),e.emit("local::resize panelResize",e,b)}}function x(){if(Gc("html").css("cursor",""),!l||!u)return l=!1,void(u=!1);l=!1,u=!1,r[0].style.setProperty("--f7-panel-"+o+"-width",e.resizableWidth+"px"),a[0].style.width="","cover"===i||m||(d.transform(""),s.transform("")),a.removeClass("panel-resizing"),Rl((function(){a.transition(""),"cover"!==i&&(s.transition(""),d&&d.transition(""))}))}function k(){e.opened&&e.resizableWidth&&(h=b(a.css("min-width")),f=b(a.css("max-width")),h&&!Number.isNaN(h)&&e.resizableWidth<h&&(e.resizableWidth=Math.max(e.resizableWidth,h)),f&&!Number.isNaN(f)&&e.resizableWidth>f&&(e.resizableWidth=Math.min(e.resizableWidth,f)),e.resizableWidth=Math.min(Math.max(e.resizableWidth,0),t.width),r[0].style.setProperty("--f7-panel-"+o+"-width",e.resizableWidth+"px"))}};function Lh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bh(e,t){return Bh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Bh(e,t)}var Fh=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var a,s=Vl({on:{}},t.params.panel,n),o=Lh(r=e.call(this,s,[t])||this);if(o.params=s,o.$containerEl=o.params.containerEl?Gc(o.params.containerEl).eq(0):t.$el,o.containerEl=o.$containerEl[0],o.containerEl||(o.$containerEl=t.$el,o.containerEl=t.$el[0]),o.params.el?a=Gc(o.params.el).eq(0):o.params.content&&(a=Gc(o.params.content).filter((function(e){return 1===e.nodeType})).eq(0)),0===a.length)return o||Lh(r);if(a[0].f7Panel)return a[0].f7Panel||Lh(r);a[0].f7Panel=o;var i,l=o.params,u=l.side,c=l.effect,p=l.resizable;return void 0===u&&(u=a.hasClass("panel-left")?"left":"right"),void 0===c&&(c=a.hasClass("panel-cover")?"cover":a.hasClass("panel-push")?"push":"reveal"),void 0===p&&(p=a.hasClass("panel-resizable")),o.params.backdrop&&o.params.backdropEl?i=Gc(o.params.backdropEl):o.params.backdrop&&0===(i=o.$containerEl.children(".panel-backdrop")).length&&(i=Gc('<div class="panel-backdrop"></div>'),o.$containerEl.prepend(i)),Vl(o,{app:t,side:u,effect:c,resizable:p,$el:a,el:a[0],opened:!1,$backdropEl:i,backdropEl:i&&i[0]}),o.useModules(),o.init(),o||Lh(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Bh(t,n);var a=r.prototype;return a.getViewEl=function(){var e=this;return e.$containerEl.children(".views").length>0?e.$containerEl.children(".views")[0]:e.$containerEl.children(".view")[0]},a.setStateClasses=function(e){var t=this,n=t.side,r=t.el,a=t.getViewEl(),s=a&&a.contains(r),o=!a||s?t.$containerEl:Gc("html");"open"===e&&o.addClass("with-panel with-panel-"+t.side+"-"+t.effect),"before-closing"===e&&o.addClass("with-panel-closing"),"closing"===e&&(o.addClass("with-panel-closing"),o.removeClass("with-panel with-panel-"+t.side+"-"+t.effect)),"after-closing"===e&&o.removeClass("with-panel-closing"),"closed"===e&&o.removeClass("with-panel-"+n+"-reveal with-panel-"+n+"-cover with-panel-"+n+"-push with-panel")},a.enableVisibleBreakpoint=function(){var e=this;return e.visibleBreakpointDisabled=!1,e.setVisibleBreakpoint(),e},a.disableVisibleBreakpoint=function(){var e=this;return e.visibleBreakpointDisabled=!0,e.setVisibleBreakpoint(),e},a.toggleVisibleBreakpoint=function(){var e=this;return e.visibleBreakpointDisabled=!e.visibleBreakpointDisabled,e.setVisibleBreakpoint(),e},a.setVisibleBreakpoint=function(e){void 0===e&&(e=!0);var t=this,n=t.app;t.visibleBreakpointResizeHandler||(t.visibleBreakpointResizeHandler=function(){t.setVisibleBreakpoint()},n.on("resize",t.visibleBreakpointResizeHandler));var r,a,s=t.side,o=t.$el,i=t.$containerEl,l=t.params,u=t.visibleBreakpointDisabled,c=l.visibleBreakpoint,p=Gc(t.getViewEl()),d=o.hasClass("panel-in-breakpoint");if(i&&i.hasClass("page")&&p.add(i.children(".page-content, .tabs, .fab")),n.width>=c&&null!=c&&!u)d?p.css(((r={})["margin-"+s]=o.width()+"px",r)):(t.setStateClasses("closed"),o.addClass("panel-in-breakpoint").removeClass("panel-in panel-in-collapsed"),t.onOpen(!1),t.onOpened(),p.css(((a={})["margin-"+s]=o.width()+"px",a)),n.allowPanelOpen=!0,e&&(t.emit("local::breakpoint panelBreakpoint",t),t.$el.trigger("panel:breakpoint")));else if(d){var h;o.removeClass("panel-in-breakpoint panel-in"),t.onClose(),t.onClosed(),p.css(((h={})["margin-"+s]="",h)),e&&(t.emit("local::breakpoint panelBreakpoint",t),t.$el.trigger("panel:breakpoint"))}},a.enableCollapsedBreakpoint=function(){var e=this;return e.collapsedBreakpointDisabled=!1,e.setCollapsedBreakpoint(),e},a.disableCollapsedBreakpoint=function(){var e=this;return e.collapsedBreakpointDisabled=!0,e.setCollapsedBreakpoint(),e},a.toggleCollapsedBreakpoint=function(){var e=this;return e.collapsedBreakpointDisabled=!e.collapsedBreakpointDisabled,e.setCollapsedBreakpoint(),e},a.setCollapsedBreakpoint=function(e){void 0===e&&(e=!0);var t=this,n=t.app;t.collapsedBreakpointResizeHandler||(t.collapsedBreakpointResizeHandler=function(){t.setCollapsedBreakpoint()},n.on("resize",t.collapsedBreakpointResizeHandler));var r=t.$el,a=t.params,s=t.collapsedBreakpointDisabled;if(!r.hasClass("panel-in-breakpoint")){var o=a.collapsedBreakpoint,i=r.hasClass("panel-in-collapsed");n.width>=o&&null!=o&&!s?i||(t.setStateClasses("closed"),r.addClass("panel-in-collapsed").removeClass("panel-in"),t.collapsed=!0,n.allowPanelOpen=!0,e&&(t.emit("local::collapsedBreakpoint panelCollapsedBreakpoint",t),t.$el.trigger("panel:collapsedbreakpoint"))):i&&(r.removeClass("panel-in-collapsed panel-in"),t.collapsed=!1,e&&(t.emit("local::collapsedBreakpoint panelCollapsedBreakpoint",t),t.$el.trigger("panel:collapsedbreakpoint")))}},a.enableResizable=function(){var e=this;return e.resizableInitialized?(e.resizable=!0,e.$el.addClass("panel-resizable")):Dh(e),e},a.disableResizable=function(){var e=this;return e.resizable=!1,e.$el.removeClass("panel-resizable"),e},a.enableSwipe=function(){var e=this;return e.swipeInitialized?e.swipeable=!0:Ph(e),e},a.disableSwipe=function(){return this.swipeable=!1,this},a.onOpen=function(e){void 0===e&&(e=!0);var t=this,n=t.app;t.opened=!0,n.panel.allowOpen=!1,t.$el.trigger("panel:beforeopen"),t.emit("local::beforeOpen panelBeforeOpen",t),e&&t.setStateClasses("open"),t.$el.trigger("panel:open"),t.emit("local::open panelOpen",t)},a.onOpened=function(){var e=this;e.app.panel.allowOpen=!0,e.$el.trigger("panel:opened"),e.emit("local::opened panelOpened",e)},a.onClose=function(){var e=this,t=e.app;e.opened=!1,t.panel.allowOpen=!1,e.$el.trigger("panel:beforeclose"),e.emit("local::beforeClose panelBeforeClose",e),e.setStateClasses("closing"),e.$el.trigger("panel:close"),e.emit("local::close panelClose",e)},a.onClosed=function(){var e=this,t=e.app;if(t.panel.allowOpen=!0,e.setStateClasses("after-closing"),e.$el.removeClass("panel-out"),e.$backdropEl){var n=t.panel.get(".panel-in");(!n||n&&!n.$backdropEl)&&e.$backdropEl.removeClass("panel-backdrop-in")}e.$el.trigger("panel:closed"),e.emit("local::closed panelClosed",e)},a.toggle=function(e){void 0===e&&(e=!0);var t=this,n=t.params.visibleBreakpoint;return t.app.width>=n&&null!=n?t.toggleVisibleBreakpoint():(t.opened?t.close(e):t.open(e),t)},a.insertToRoot=function(){var e=this,t=bl(),n=e.$el,r=e.$backdropEl,a=e.$containerEl,s=n.parent(),o=n.parents(t).length>0;if(!s.is(a)||n.prevAll(".views, .view").length){var i=a.children(".panel, .views, .view").eq(0),l=a.children(".panel-backdrop").eq(0);i.length?n.insertBefore(i):l?n.insertBefore(l):a.prepend(n),r&&r.length&&(!r.parent().is(a)&&0===r.nextAll(".panel").length||r.parent().is(a)&&0===r.nextAll(".panel").length)&&r.insertBefore(n),e.once("panelClosed",(function(){o?s.append(n):n.remove()}))}},a.open=function(e){void 0===e&&(e=!0);var t=this,n=t.app;if(!n.panel.allowOpen)return!1;var r=t.effect,a=t.$el,s=t.$backdropEl,o=t.opened,i=t.$containerEl;if(!a||a.hasClass("panel-in"))return t;if(t.insertToRoot(),o||a.hasClass("panel-in-breakpoint")||a.hasClass("panel-in"))return!1;var l=n.panel.get(".panel-in");l&&l!==t&&l.close(e),a[e?"removeClass":"addClass"]("not-animated"),a.addClass("panel-in"),s&&(s.addClass("panel-backdrop-in"),s[e?"removeClass":"addClass"]("not-animated")),"cover"!==t.effect&&"push"!==t.effect||(t._clientLeft=a[0].clientLeft);var u=Gc(t.getViewEl());i&&i.hasClass("page")&&u.add(i.children(".page-content, .tabs"));var c="reveal"===r?u:a;return e?(s&&s.removeClass("not-animated"),function e(){c.transitionEnd((function(n){Gc(n.target).is(c)?a.hasClass("panel-out")?t.onClosed():t.onOpened():e()}))}(),a.removeClass("panel-out not-animated").addClass("panel-in"),t.onOpen()):(s&&s.addClass("not-animated"),a.removeClass("panel-out").addClass("panel-in not-animated"),t.onOpen(),t.onOpened()),!0},a.close=function(e){void 0===e&&(e=!0);var t=this,n=t.effect,r=t.$el,a=t.$backdropEl,s=t.opened,o=t.$containerEl;if(!s||r.hasClass("panel-in-breakpoint")||!r.hasClass("panel-in"))return t;r[e?"removeClass":"addClass"]("not-animated"),a&&a[e?"removeClass":"addClass"]("not-animated");var i=Gc(t.getViewEl());return o&&o.hasClass("page")&&i.add(o.children(".page-content, .tabs")),e?(("reveal"===n?i:r).transitionEnd((function(){r.hasClass("panel-out")?t.onClosed():r.hasClass("panel-in")&&t.onOpened(),t.setStateClasses("after-closing")})),r.removeClass("panel-in").addClass("panel-out"),t.onClose()):(r.addClass("not-animated").removeClass("panel-in").addClass("panel-out"),t.onClose(),t.onClosed()),t},a.init=function(){var e=this;void 0!==e.params.visibleBreakpoint&&e.setVisibleBreakpoint(),void 0!==e.params.collapsedBreakpoint&&e.setCollapsedBreakpoint(),e.params.swipe&&e.enableSwipe(),e.resizable&&e.enableResizable()},a.destroy=function(){var e=this,t=e.app,n=e.$containerEl;if(e.$el){if(e.emit("local::beforeDestroy panelBeforeDestroy",e),e.$el.trigger("panel:beforedestroy"),e.visibleBreakpointResizeHandler&&t.off("resize",e.visibleBreakpointResizeHandler),e.collapsedBreakpointResizeHandler&&t.off("resize",e.collapsedBreakpointResizeHandler),e.$el.hasClass("panel-in-breakpoint")||e.$el.hasClass("panel-in-collapsed")){var r,a=Gc(e.getViewEl());n&&n.hasClass("page")&&a.add(n.children(".page-content, .tabs")),e.$el.removeClass("panel-in-breakpoint panel-in-collapsed panel-in"),a.css(((r={})["margin-"+e.side]="",r)),e.emit("local::breakpoint panelBreakpoint",e),e.$el.trigger("panel:breakpoint")}e.$el.trigger("panel:destroy"),e.emit("local::destroy panelDestroy",e),e.el&&(e.el.f7Panel=null,delete e.el.f7Panel),Ol(e),e=null}},r}(au),zh=Fh,Vh={name:"panel",params:{panel:{opened:void 0,side:void 0,effect:void 0,resizable:void 0,backdrop:!0,backdropEl:void 0,visibleBreakpoint:void 0,collapsedBreakpoint:void 0,swipe:!1,swipeNoFollow:!1,swipeOnlyClose:!1,swipeActiveArea:0,swipeThreshold:0,closeByBackdropClick:!0,containerEl:void 0}},static:{Panel:zh},create:function(){var e=this;Vl(e,{panel:{allowOpen:!0,create:function(t){return new zh(e,t)},get:function(e){if(void 0===e&&(e=".panel"),e instanceof zh)return e;"left"!==e&&"right"!==e||(e=".panel-"+e);var t=Gc(e);return 0===t.length||t.length>1?void 0:t[0].f7Panel},destroy:function(t){void 0===t&&(t=".panel");var n=e.panel.get(t);if(n&&n.destroy)return n.destroy()},open:function(t,n){void 0===t&&(t=".panel"),"left"!==t&&"right"!==t||(t=".panel-"+t);var r=e.panel.get(t);return r&&r.open?r.open(n):r?void 0:(r=e.panel.create({el:t})).open(n)},close:function(t,n){void 0===t&&(t=".panel-in"),"left"!==t&&"right"!==t||(t=".panel-"+t);var r=e.panel.get(t);return r&&r.open?r.close(n):r?void 0:(r=e.panel.create({el:t})).close(n)},toggle:function(t,n){void 0===t&&(t=".panel"),"left"!==t&&"right"!==t||(t=".panel-"+t);var r=e.panel.get(t);return r&&r.toggle?r.toggle(n):r?void 0:(r=e.panel.create({el:t})).toggle(n)}}})},on:{init:function(){var e=this;Gc(".panel-init").each((function(t){var n=Object.assign({el:t},Gc(t).dataset()||{});e.panel.create(n)}))},pageInit:function(e){var t=this;e.$el.find(".panel-init").each((function(e){var n=Object.assign({el:e},Gc(e).dataset()||{});t.panel.create(n)}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".panel-init").each((function(e){var n=t.panel.get(e);n&&n.destroy&&n.destroy()}))}},vnode:{"panel-init":{insert:function(e){var t=e.elm,n=Object.assign({el:t},Gc(t).dataset()||{});this.panel.create(n)},destroy:function(e){var t=e.elm,n=this.panel.get(t);n&&n.destroy&&n.destroy()}}},clicks:{".panel-open":function(e,t){void 0===t&&(t={});this.panel.open(t.panel,t.animate)},".panel-close":function(e,t){void 0===t&&(t={});this.panel.close(t.panel,t.animate)},".panel-toggle":function(e,t){void 0===t&&(t={});this.panel.toggle(t.panel,t.animate)},".panel-backdrop":function(){var e=this,t=Gc(".panel-in:not(.panel-out)");if(t.length){var n=t[0]&&t[0].f7Panel;t.trigger("panel:backdrop-click"),n&&n.emit("backdropClick",n),e.emit("panelBackdropClick",n||t[0]),e.params.panel.closeByBackdropClick&&e.panel.close()}}}},Wh={open:function(e,t){void 0===e&&(e=".card-expandable"),void 0===t&&(t=!0);var n=this,r=Zl(),a=bl(),s=Jl(),o=Gc(e).eq(0);if(o&&o.length&&!(o.hasClass("card-opened")||o.hasClass("card-opening")||o.hasClass("card-closing"))){var i,l=o.parents(".page").eq(0);if(l.length)if(!l.find(".card-opened").length)if(o.trigger("card:beforeopen",{prevent:Y}),n.emit("cardBeforeOpen",o[0],Y),!i){var u,c,p,d=Object.assign({animate:t},n.params.card,o.dataset()),h=o.parents(".page-content");o.attr("data-backdrop-el")&&(u=Gc(o.attr("data-backdrop-el"))),!u&&d.backdrop&&((u=h.find(".card-backdrop")).length||(u=Gc('<div class="card-backdrop"></div>'),h.append(u))),d.hideNavbarOnOpen&&((c=l.children(".navbar")).length||l[0].f7Page&&(c=l[0].f7Page.$navbarEl)),d.hideToolbarOnOpen&&((p=l.children(".toolbar")).length||(p=l.parents(".view").children(".toolbar")),p.length||(p=l.parents(".views").children(".toolbar")));var f,m=o.css("transform");m&&m.match(/[2-9]/)&&(f=!0);var g=o.children(".card-content"),v=Gc(a.createElement("div")).addClass("card-expandable-size");o.append(v);var b,y=o[0].offsetWidth,w=o[0].offsetHeight,x=l[0].offsetWidth,k=l[0].offsetHeight,C=v[0].offsetWidth||x,S=v[0].offsetHeight||k;c&&!d.hideStatusbarOnOpen&&S===k&&(b=parseInt(c.css("--f7-safe-area-top"),10),Number.isNaN(b)&&(b=0)),b&&(S-=b);var E,T,$=C/y,I=S/w,N=o.offset(),O=l.offset();if(b&&(O.top+=b/2),N.left-=O.left,f){var A=m.replace(/matrix\(|\)/g,"").split(",").map((function(e){return e.trim()}));if(A&&A.length>1){var M=parseFloat(A[0]);E=N.left-y*(1-M)/2,T=N.top-O.top-w*(1-M)/2,n.rtl&&(E-=o[0].scrollLeft)}else E=o[0].offsetLeft,T=o[0].offsetTop-(h.length?h[0].scrollTop:0)}else E=N.left,T=N.top-O.top,n.rtl&&(E-=o[0].scrollLeft);T-=(k-S)/2;var _=C-y-(E-=(x-C)/2);if(n.rtl){var R=[_,E];E=R[0],_=R[1]}var P,D,L,B,F,z,V,W,H,j,U,G,q=S-w-T,X=(_-E)/2,K=(q-T)/2;d.hideNavbarOnOpen&&c&&c.length&&(c.closest(".navbar-hidden").length?o[0].f7KeepNavbarOnClose=!0:(delete o[0].f7KeepNavbarOnClose,n.navbar.hide(c,d.animate,d.hideStatusbarOnOpen,!0))),d.hideToolbarOnOpen&&p&&p.length&&(p.closest(".toolbar-hidden").length?o[0].f7KeepToolbarOnClose=!0:(delete o[0].f7KeepToolbarOnClose,n.toolbar.hide(p,d.animate))),u&&u.removeClass("card-backdrop-out").addClass("card-backdrop-in"),o.removeClass("card-transitioning"),d.animate&&o.addClass("card-opening"),o.trigger("card:open"),n.emit("cardOpen",o[0]),g.css({width:C+"px",height:S+"px"}).transform("translate3d("+(n.rtl?E+X:-E-X)+"px, 0px, 0) scale("+1/$+", "+1/I+")"),o.transform("translate3d("+(n.rtl?-X:X)+"px, "+K+"px, 0) scale("+$+", "+I+")"),d.animate?o.transitionEnd((function(){J()})):J(),o[0].detachEventHandlers=function(){n.off("resize",Z),s.touch&&d.swipeToClose&&(n.off("touchstart:passive",Q),n.off("touchmove:active",ee),n.off("touchend:passive",te))},n.on("resize",Z),s.touch&&d.swipeToClose&&(n.on("touchstart:passive",Q),n.on("touchmove:active",ee),n.on("touchend:passive",te))}}function Y(){i=!0}function J(){l.addClass("page-with-card-opened"),r.ios&&h.length&&(h.css("height",h[0].offsetHeight+1+"px"),setTimeout((function(){h.css("height","")}))),o.addClass("card-opened"),o.removeClass("card-opening"),o.trigger("card:opened"),n.emit("cardOpened",o[0],l[0])}function Z(){if(o.removeClass("card-transitioning"),y=o[0].offsetWidth,w=o[0].offsetHeight,x=l[0].offsetWidth,k=l[0].offsetHeight,C=v[0].offsetWidth||x,S=v[0].offsetHeight||k,b=0,c&&!d.hideStatusbarOnOpen&&S===k&&(b=parseInt(c.css("--f7-safe-area-top"),10),Number.isNaN(b)&&(b=0)),b&&(S-=b),$=C/y,I=S/w,o.transform("translate3d(0px, 0px, 0) scale(1)"),N=o.offset(),O=l.offset(),b&&(O.top+=b/2),N.left-=O.left,N.top-=O.top,E=N.left-(x-C)/2,n.rtl&&(E-=o[0].scrollLeft),T=N.top-(k-S)/2,_=C-y-E,q=S-w-T,n.rtl){var e=[_,E];E=e[0],_=e[1]}X=(_-E)/2,K=(q-T)/2,o.transform("translate3d("+(n.rtl?-X:X)+"px, "+K+"px, 0) scale("+$+", "+I+")"),g.css({width:C+"px",height:S+"px"}).transform("translate3d("+(n.rtl?E+X:-E-X)+"px, 0px, 0) scale("+1/$+", "+1/I+")")}function Q(e){Gc(e.target).closest(o).length&&o.hasClass("card-opened")&&(G=o.find(d.scrollableEl),P=G[0]&&G[0]!==g[0]&&!G[0].contains(e.target)?0:G.scrollTop(),D=!0,B=e.targetTouches[0].pageX,F=e.targetTouches[0].pageY,W=void 0,j=!1,U=!1)}function ee(e){if(D){if(z=e.targetTouches[0].pageX,V=e.targetTouches[0].pageY,void 0===W&&(W=!!(W||Math.abs(V-F)>Math.abs(z-B))),U||j||(!W&&e.targetTouches[0].clientX<=50?U=!0:j=!0),!U&&!j||j&&0!==P)return D=!0,void(L=!0);L||o.removeClass("card-transitioning"),L=!0,((H=j?Math.max((V-F)/150,0):Math.max((z-B)/(y/2),0))>0&&j||U)&&(j&&r.ios&&G[0]===g[0]&&(G.css("-webkit-overflow-scrolling","auto"),G.scrollTop(0)),e.preventDefault()),H>1&&(H=Math.pow(H,.3)),H>(j?1.3:1.1)?(D=!1,L=!1,n.card.close(o)):o.transform("translate3d("+(n.rtl?-X:X)+"px, "+K+"px, 0) scale("+$*(1-.2*H)+", "+I*(1-.2*H)+")")}}function te(){D&&L&&(D=!1,L=!1,r.ios&&G.css("-webkit-overflow-scrolling",""),H>=.8?n.card.close(o):o.addClass("card-transitioning").transform("translate3d("+(n.rtl?-X:X)+"px, "+K+"px, 0) scale("+$+", "+I+")"))}},close:function(e,t){void 0===e&&(e=".card-expandable.card-opened"),void 0===t&&(t=!0);var n=this,r=Zl(),a=Gc(e).eq(0);if(a&&a.length&&a.hasClass("card-opened")&&!a.hasClass("card-opening")&&!a.hasClass("card-closing")){var s=a.children(".card-content"),o=a.parents(".page-content"),i=a.parents(".page").eq(0);if(i.length){var l,u,c,p=Object.assign({animate:t},n.params.card,a.dataset()),d=a.find(p.scrollableEl);a.attr("data-backdrop-el")&&(c=Gc(a.attr("data-backdrop-el"))),p.backdrop&&(c=a.parents(".page-content").find(".card-backdrop")),p.hideNavbarOnOpen&&((l=i.children(".navbar")).length||i[0].f7Page&&(l=i[0].f7Page.$navbarEl),l&&l.length&&!a[0].f7KeepNavbarOnClose&&n.navbar.show(l,p.animate,!0)),p.hideToolbarOnOpen&&((u=i.children(".toolbar")).length||(u=i.parents(".view").children(".toolbar")),u.length||(u=i.parents(".views").children(".toolbar")),u&&u.length&&!a[0].f7KeepToolbarOnClose&&n.toolbar.show(u,p.animate)),i.removeClass("page-with-card-opened"),r.ios&&o.length&&(o.css("height",o[0].offsetHeight+1+"px"),setTimeout((function(){o.css("height","")}))),c&&c.length&&c.removeClass("card-backdrop-in").addClass("card-backdrop-out"),a.removeClass("card-opened card-transitioning"),p.animate?a.addClass("card-closing"):a.addClass("card-no-transition"),a.transform(""),a.trigger("card:close"),n.emit("cardClose",a[0],i[0]);var h=a.hasClass("card-expandable-animate-width");h&&s.css({width:"",height:""}),s.transform("").scrollTop(0,t?300:0),d.length&&d[0]!==s[0]&&d.scrollTop(0,t?300:0),t?s.transitionEnd((function(){f()})):f(),a[0].detachEventHandlers&&(a[0].detachEventHandlers(),delete a[0].detachEventHandlers)}}function f(){h||s.css({width:"",height:""}),c&&c.length&&c.removeClass("card-backdrop-in card-backdrop-out"),a.removeClass("card-closing card-no-transition"),a.trigger("card:closed"),a.find(".card-expandable-size").remove(),n.emit("cardClosed",a[0],i[0])}},toggle:function(e,t){void 0===e&&(e=".card-expandable");var n=Gc(e).eq(0);n.length&&(n.hasClass("card-opened")?this.card.close(n,t):this.card.open(n,t))}},Hh={name:"card",params:{card:{hideNavbarOnOpen:!0,hideStatusbarOnOpen:!0,hideToolbarOnOpen:!0,scrollableEl:".card-content",swipeToClose:!0,closeByBackdropClick:!0,backdrop:!0}},create:function(){Kl(this,{card:Wh})},on:{pageBeforeIn:function(e){var t=this;if(t.params.card.hideNavbarOnOpen&&e.navbarEl&&e.$el.find(".card-opened.card-expandable").length&&t.navbar.hide(e.navbarEl,!0,t.params.card.hideStatusbarOnOpen,!0),t.params.card.hideToolbarOnOpen&&e.$el.find(".card-opened.card-expandable").length){var n=e.$el.children(".toolbar");n.length||(n=e.$el.parents(".view").children(".toolbar")),n.length||(n=e.$el.parents(".views").children(".toolbar")),n&&n.length&&t.toolbar.hide(n)}}},clicks:{".card-close":function(e,t){this.card.close(t.card,t.animate)},".card-open":function(e,t){this.card.open(t.card,t.animate)},".card-expandable":function(e,t,n){e.hasClass("card-opened")||e.hasClass("card-opening")||e.hasClass("card-closing")||Gc(n.target).closest(".card-prevent-open, .card-close").length||this.card.open(e)},".card-backdrop-in":function(){var e=!1;this.params.card.closeByBackdropClick&&(e=!0);var t=Gc(".card-opened");t.length&&("true"===t.attr("data-close-by-backdrop-click")?e=!0:"false"===t.attr("data-close-by-backdrop-click")&&(e=!1),e&&this.card.close(t))}}},jh={store:function(e,t){var n=wl(),r=e,a=Gc(e);a.length&&a.is("form")&&a.attr("id")&&(r=a.attr("id")),this.form.data["form-"+r]=t,n.localStorage["f7form-"+r]=JSON.stringify(t)},get:function(e){var t=wl(),n=e,r=Gc(e);return r.length&&r.is("form")&&r.attr("id")&&(n=r.attr("id")),t.localStorage["f7form-"+n]?JSON.parse(t.localStorage["f7form-"+n]):this.form.data["form-"+n]?this.form.data["form-"+n]:void 0},remove:function(e){var t=this,n=wl(),r=e,a=Gc(e);a.length&&a.is("form")&&a.attr("id")&&(r=a.attr("id")),t.form.data["form-"+r]&&(t.form.data["form-"+r]="",delete t.form.data["form-"+r]),n.localStorage["f7form-"+r]&&(n.localStorage["f7form-"+r]="",n.localStorage.removeItem("f7form-"+r))}},Uh={init:function(e){var t=this,n=Gc(e),r=n.attr("id");if(r){var a=t.form.getFormData(r);a&&t.form.fillFromData(n,a),n.on("change submit",(function(){var e=t.form.convertToData(n);e&&(t.form.storeFormData(r,e),n.trigger("form:storedata",e),t.emit("formStoreData",n[0],e))}))}},destroy:function(e){Gc(e).off("change submit")}};function Gh(e){var t=Gc(e).eq(0);if(0!==t.length){var n={},r=["submit","image","button","file"],a=[];return t.find("input, select, textarea").each((function(e){var s=Gc(e);if(!s.hasClass("ignore-store-data")&&!s.hasClass("no-store-data")){var o=s.attr("name"),i=s.attr("type"),l=e.nodeName.toLowerCase();if(!(r.indexOf(i)>=0)&&!(a.indexOf(o)>=0)&&o)if("select"===l&&s.prop("multiple"))a.push(o),n[o]=[],t.find('select[name="'+o+'"] option').each((function(e){e.selected&&n[o].push(e.value)}));else switch(i){case"checkbox":a.push(o),n[o]=[],t.find('input[name="'+o+'"]').each((function(e){e.checked&&n[o].push(e.value)}));break;case"radio":a.push(o),t.find('input[name="'+o+'"]').each((function(e){e.checked&&(n[o]=e.value)}));break;default:n[o]=s.val()}}})),t.trigger("form:todata",n),this.emit("formToData",t[0],n),n}}function qh(e,t){var n=Gc(e).eq(0);if(n.length){var r=t,a=n.attr("id");if(!r&&a&&(r=this.form.getFormData(a)),r){var s=["submit","image","button","file"],o=[];n.find("input, select, textarea").each((function(e){var t=Gc(e);if(!t.hasClass("ignore-store-data")&&!t.hasClass("no-store-data")){var a=t.attr("name"),i=t.attr("type"),l=e.nodeName.toLowerCase();if(void 0!==r[a]&&null!==r[a]&&!(s.indexOf(i)>=0)&&!(o.indexOf(a)>=0)&&a){if("select"===l&&t.prop("multiple"))o.push(a),n.find('select[name="'+a+'"] option').each((function(e){var t=e;r[a].indexOf(e.value)>=0?t.selected=!0:t.selected=!1}));else switch(i){case"checkbox":o.push(a),n.find('input[name="'+a+'"]').each((function(e){var t=e;r[a].indexOf(e.value)>=0?t.checked=!0:t.checked=!1}));break;case"radio":o.push(a),n.find('input[name="'+a+'"]').each((function(e){var t=e;r[a]===e.value?t.checked=!0:t.checked=!1}));break;default:t.val(r[a])}"select"!==l&&"input"!==l&&"textarea"!==l||t.trigger("change","fromdata")}}})),n.trigger("form:fromdata",r),this.emit("formFromData",n[0],r)}}}function Xh(){var e=this,t=wl(),n=bl();Gc(n).on("submit change","form.form-ajax-submit, form.form-ajax-submit-onchange",(function(n,r){var a=Gc(this);if(("change"!==n.type||a.hasClass("form-ajax-submit-onchange"))&&("submit"===n.type&&n.preventDefault(),"change"!==n.type||"fromdata"!==r)){var s,o=(a.attr("method")||"GET").toUpperCase(),i=a.prop("enctype")||a.attr("enctype"),l=a.attr("action");if(l)s="POST"===o?"application/x-www-form-urlencoded"===i?e.form.convertToData(a[0]):new t.FormData(a[0]):Bl(e.form.convertToData(a[0])),e.request({method:o,url:l,contentType:i,data:s,beforeSend:function(t){a.trigger("formajax:beforesend",{data:s,xhr:t}),e.emit("formAjaxBeforeSend",a[0],s,t)},error:function(t){a.trigger("formajax:error",{data:s,xhr:t}),e.emit("formAjaxError",a[0],s,t)},complete:function(t){a.trigger("formajax:complete",{data:s,xhr:t}),e.emit("formAjaxComplete",a[0],s,t)},success:function(t,n,r){a.trigger("formajax:success",{data:s,xhr:r}),e.emit("formAjaxSuccess",a[0],s,r)}})}}))}var Kh={name:"form",create:function(){var e=this;Vl(e,{form:{data:{},storeFormData:jh.store.bind(e),getFormData:jh.get.bind(e),removeFormData:jh.remove.bind(e),convertToData:Gh.bind(e),fillFromData:qh.bind(e),storage:{init:Uh.init.bind(e),destroy:Uh.destroy.bind(e)}}})},on:{init:function(){Xh.call(this)},tabBeforeRemove:function(e){var t=this;Gc(e).find(".form-store-data").each((function(e){t.form.storage.destroy(e)}))},tabMounted:function(e){var t=this;Gc(e).find(".form-store-data").each((function(e){t.form.storage.init(e)}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".form-store-data").each((function(e){t.form.storage.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".form-store-data").each((function(e){t.form.storage.init(e)}))}}},Yh={ignoreTypes:["checkbox","button","submit","range","radio","image"],createTextareaResizableShadow:function(){var e=bl(),t=Gc(e.createElement("textarea"));t.addClass("textarea-resizable-shadow"),t.prop({disabled:!0,readonly:!0}),Yh.textareaResizableShadow=t},textareaResizableShadow:void 0,resizeTextarea:function(e){var t=wl(),n=Gc(e);Yh.textareaResizableShadow||Yh.createTextareaResizableShadow();var r=Yh.textareaResizableShadow;if(n.length&&n.hasClass("resizable")){0===Yh.textareaResizableShadow.parents().length&&this.$el.append(r);var a=t.getComputedStyle(n[0]);"padding-top padding-bottom padding-left padding-right margin-left margin-right margin-top margin-bottom width font-size font-family font-style font-weight line-height font-variant text-transform letter-spacing border box-sizing display".split(" ").forEach((function(e){var t=a[e];"font-size line-height letter-spacing width".split(" ").indexOf(e)>=0&&(t=t.replace(",",".")),r.css(e,t)}));var s=n[0].clientHeight;r.val("");var o=r[0].scrollHeight;r.val(n.val()),r.css("height",0);var i=r[0].scrollHeight;s!==i&&(i>o?n.css("height",i+"px"):i<s&&n.css("height",""),(i>o||i<s)&&(n.trigger("textarea:resize",{initialHeight:o,currentHeight:s,scrollHeight:i}),this.emit("textareaResize",{initialHeight:o,currentHeight:s,scrollHeight:i})))}},validate:function(e){var t=Gc(e);if(!t.length)return!0;var n=t.parents(".item-input"),r=t.parents(".input");function a(){t[0].f7ValidateReadonly&&(t[0].readOnly=!0)}t[0].f7ValidateReadonly&&(t[0].readOnly=!1);var s=t[0].validity,o=t.dataset().errorMessage||t[0].validationMessage||"";if(!s)return a(),!0;if(!s.valid){var i=t.nextAll(".item-input-error-message, .input-error-message");return o&&(0===i.length&&(i=Gc('<div class="'+(r.length?"input-error-message":"item-input-error-message")+'"></div>')).insertAfter(t),i.text(o)),i.length>0&&(n.addClass("item-input-with-error-message"),r.addClass("input-with-error-message")),n.addClass("item-input-invalid"),r.addClass("input-invalid"),t.addClass("input-invalid"),a(),!1}return n.removeClass("item-input-invalid item-input-with-error-message"),r.removeClass("input-invalid input-with-error-message"),t.removeClass("input-invalid"),a(),!0},validateInputs:function(e){var t=this;return Gc(e).find("input, textarea, select").map((function(e){return t.input.validate(e)})).indexOf(!1)<0},focus:function(e){var t=Gc(e),n=t.attr("type");Yh.ignoreTypes.indexOf(n)>=0||(t.parents(".item-input").addClass("item-input-focused"),t.parents(".input").addClass("input-focused"),t.addClass("input-focused"))},blur:function(e){var t=Gc(e);t.parents(".item-input").removeClass("item-input-focused"),t.parents(".input").removeClass("input-focused"),t.removeClass("input-focused")},checkEmptyState:function(e){var t=Gc(e);if(t.is("input, select, textarea, .item-input [contenteditable]")||(t=t.find("input, select, textarea, .item-input [contenteditable]").eq(0)),t.length){var n;n=t[0].hasAttribute("contenteditable")?t.find(".text-editor-placeholder").length?"":t.html():t.val();var r=t.parents(".item-input"),a=t.parents(".input");n&&"string"==typeof n&&""!==n.trim()||Array.isArray(n)&&n.length>0?(r.addClass("item-input-with-value"),a.addClass("input-with-value"),t.addClass("input-with-value"),t.trigger("input:notempty"),this.emit("inputNotEmpty",t[0])):(r.removeClass("item-input-with-value"),a.removeClass("input-with-value"),t.removeClass("input-with-value"),t.trigger("input:empty"),this.emit("inputEmpty",t[0]))}},scrollIntoView:function(e,t,n,r){void 0===t&&(t=0);var a=Gc(e),s=a.parents(".page-content, .panel, .card-expandable .card-content").eq(0);if(!s.length)return!1;var o=s[0].offsetHeight,i=s[0].scrollTop,l=parseInt(s.css("padding-top"),10),u=parseInt(s.css("padding-bottom"),10),c=s.offset().top-i,p=a.offset().top-c,d=p+i-l,h=p+i-o+u+a[0].offsetHeight,f=d+(h-d)/2;return i>d?(s.scrollTop(n?f:d,t),!0):i<h?(s.scrollTop(n?f:h,t),!0):(r&&s.scrollTop(n?f:h,t),!1)},init:function(){var e=this,t=Zl(),n=wl(),r=bl();Yh.createTextareaResizableShadow(),Gc(r).on("click",".input-clear-button",(function(){var t=Gc(this).siblings("input, textarea").eq(0),n=t.val();t.val("").trigger("input change").focus().trigger("input:clear",n),e.emit("inputClear",n)})),Gc(r).on("mousedown",".input-clear-button",(function(e){e.preventDefault()})),Gc(r).on("change input","input, textarea, select, .item-input [contenteditable]",(function(){var t=Gc(this),n=t.attr("type"),r=t[0].nodeName.toLowerCase(),a=t[0].hasAttribute("contenteditable");Yh.ignoreTypes.indexOf(n)>=0||(e.input.checkEmptyState(t),a||(null!==t.attr("data-validate-on-blur")||!t.dataset().validate&&null===t.attr("validate")||e.input.validate(t),"textarea"===r&&t.hasClass("resizable")&&e.input.resizeTextarea(t)))}),!0),Gc(r).on("focus","input, textarea, select, .item-input [contenteditable]",(function(){var a=this;e.params.input.scrollIntoViewOnFocus&&(t.android?Gc(n).once("resize",(function(){r&&r.activeElement===a&&e.input.scrollIntoView(a,e.params.input.scrollIntoViewDuration,e.params.input.scrollIntoViewCentered,e.params.input.scrollIntoViewAlways)})):e.input.scrollIntoView(a,e.params.input.scrollIntoViewDuration,e.params.input.scrollIntoViewCentered,e.params.input.scrollIntoViewAlways)),e.input.focus(a)}),!0),Gc(r).on("blur","input, textarea, select, .item-input [contenteditable]",(function(){var t=Gc(this),n=t[0].nodeName.toLowerCase();e.input.blur(t),(t.dataset().validate||null!==t.attr("validate")||null!==t.attr("data-validate-on-blur"))&&e.input.validate(t),"textarea"===n&&t.hasClass("resizable")&&Yh.textareaResizableShadow&&Yh.textareaResizableShadow.remove()}),!0),Gc(r).on("invalid","input, textarea, select",(function(t){var n=Gc(this);null!==n.attr("data-validate-on-blur")||!n.dataset().validate&&null===n.attr("validate")||(t.preventDefault(),e.input.validate(n))}),!0)}},Jh={name:"input",params:{input:{scrollIntoViewOnFocus:void 0,scrollIntoViewCentered:!1,scrollIntoViewDuration:0,scrollIntoViewAlways:!1}},create:function(){var e=this;void 0===e.params.input.scrollIntoViewOnFocus&&(e.params.input.scrollIntoViewOnFocus=Zl().android),Kl(e,{input:Yh})},on:{init:function(){this.input.init()},tabMounted:function(e){var t=this,n=Gc(e);n.find(".item-input, .input").each((function(e){Gc(e).find("input, select, textarea, [contenteditable]").each((function(e){var n=Gc(e);Yh.ignoreTypes.indexOf(n.attr("type"))>=0||t.input.checkEmptyState(n)}))})),n.find("textarea.resizable").each((function(e){t.input.resizeTextarea(e)}))},pageInit:function(e){var t=this,n=e.$el;n.find(".item-input, .input").each((function(e){Gc(e).find("input, select, textarea, [contenteditable]").each((function(e){var n=Gc(e);Yh.ignoreTypes.indexOf(n.attr("type"))>=0||t.input.checkEmptyState(n)}))})),n.find("textarea.resizable").each((function(e){t.input.resizeTextarea(e)}))},"panelBreakpoint panelCollapsedBreakpoint panelResize panelOpen panelSwipeOpen resize viewMasterDetailBreakpoint":function(e){var t=this;e&&e.$el?e.$el.find("textarea.resizable").each((function(e){t.input.resizeTextarea(e)})):Gc("textarea.resizable").each((function(e){t.input.resizeTextarea(e)}))}}};function Zh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qh(e,t){return Qh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Qh(e,t)}var ef=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var a=Zh(r=e.call(this,n,[t])||this),s=Jl(),o={};a.useModulesParams(o),a.params=Vl(o,n);var i=a.params.el;if(!i)return a||Zh(r);var l=Gc(i);if(0===l.length)return a||Zh(r);if(l[0].f7Toggle)return l[0].f7Toggle||Zh(r);var u,c=l.children('input[type="checkbox"]');Vl(a,{app:t,$el:l,el:l[0],$inputEl:c,inputEl:c[0],disabled:l.hasClass("disabled")||c.hasClass("disabled")||c.attr("disabled")||c[0].disabled}),Object.defineProperty(a,"checked",{enumerable:!0,configurable:!0,set:function(e){a&&void 0!==a.$inputEl&&a.checked!==e&&(c[0].checked=e,a.$inputEl.trigger("change"))},get:function(){return c[0].checked}}),l[0].f7Toggle=a;var p,d,h,f,m,g={};function v(e){u||a.disabled||(g.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,g.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,d=0,u=!0,p=void 0,f=Pl(),m=a.checked,h=l[0].offsetWidth,_l((function(){u&&l.addClass("toggle-active-state")})))}function b(e){if(u&&!a.disabled){var n,r="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,s="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,o=t.rtl?-1:1;if(void 0===p&&(p=!!(p||Math.abs(s-g.y)>Math.abs(r-g.x))),p)u=!1;else e.preventDefault(),(d=r-g.x)*o<0&&Math.abs(d)>h/3&&m&&(n=!0),d*o>0&&Math.abs(d)>h/3&&!m&&(n=!0),n&&(g.x=r,a.checked=!m,m=!m)}}function y(){if(!u||a.disabled)return p&&l.removeClass("toggle-active-state"),void(u=!1);var e,n=t.rtl?-1:1;u=!1,l.removeClass("toggle-active-state"),Pl()-f<300&&(d*n<0&&m&&(e=!0),d*n>0&&!m&&(e=!0),e&&(a.checked=!m))}function w(){a.$el.trigger("toggle:change"),a.emit("local::change toggleChange",a)}return a.attachEvents=function(){var e=!!s.passiveListener&&{passive:!0};l.on(t.touchEvents.start,v,e),t.on("touchmove",b),t.on("touchend:passive",y),a.$inputEl.on("change",w)},a.detachEvents=function(){var e=!!s.passiveListener&&{passive:!0};l.off(t.touchEvents.start,v,e),t.off("touchmove",b),t.off("touchend:passive",y),a.$inputEl.off("change",w)},a.useModules(),a.init(),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Qh(t,n);var a=r.prototype;return a.toggle=function(){this.checked=!this.checked},a.init=function(){this.attachEvents()},a.destroy=function(){var e=this;e.$el.trigger("toggle:beforedestroy"),e.emit("local::beforeDestroy toggleBeforeDestroy",e),delete e.$el[0].f7Toggle,e.detachEvents(),Ol(e),e=null},r}(au),tf=ef,nf={name:"toggle",create:function(){this.toggle=Yc({defaultSelector:".toggle",constructor:tf,app:this,domProp:"f7Toggle"})},static:{Toggle:tf},on:{tabMounted:function(e){var t=this;Gc(e).find(".toggle-init").each((function(e){return t.toggle.create({el:e})}))},tabBeforeRemove:function(e){Gc(e).find(".toggle-init").each((function(e){e.f7Toggle&&e.f7Toggle.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".toggle-init").each((function(e){return t.toggle.create({el:e})}))},pageBeforeRemove:function(e){e.$el.find(".toggle-init").each((function(e){e.f7Toggle&&e.f7Toggle.destroy()}))}},vnode:{"toggle-init":{insert:function(e){var t=e.elm;this.toggle.create({el:t})},destroy:function(e){var t=e.elm;t.f7Toggle&&t.f7Toggle.destroy()}}}};function rf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function af(e,t){return af=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},af(e,t)}var sf=function(e){var t,n;function r(t,n){var r,a=rf(r=e.call(this,n,[t])||this),s=Jl(),o={el:null,inputEl:null,dual:!1,step:1,label:!1,min:0,max:100,value:0,draggableBar:!0,vertical:!1,verticalReversed:!1,formatLabel:null,scale:!1,scaleSteps:5,scaleSubSteps:0,formatScaleLabel:null,limitKnobPosition:"ios"===t.theme};a.useModulesParams(o),a.params=Vl(o,n);var i=a.params.el;if(!i)return a||rf(r);var l=Gc(i);if(0===l.length)return a||rf(r);if(l[0].f7Range)return l[0].f7Range||rf(r);var u,c=l.dataset();"step min max value scaleSteps scaleSubSteps".split(" ").forEach((function(e){void 0===n[e]&&void 0!==c[e]&&(a.params[e]=parseFloat(c[e]))})),"dual label vertical verticalReversed scale".split(" ").forEach((function(e){void 0===n[e]&&void 0!==c[e]&&(a.params[e]=c[e])})),a.params.value||(void 0!==c.value&&(a.params.value=c.value),void 0!==c.valueLeft&&void 0!==c.valueRight&&(a.params.value=[parseFloat(c.valueLeft),parseFloat(c.valueRight)])),a.params.dual||(a.params.inputEl?u=Gc(a.params.inputEl):l.find('input[type="range"]').length&&(u=l.find('input[type="range"]').eq(0)));var p=a.params,d=p.dual,h=p.step,f=p.label,m=p.min,g=p.max,v=p.value,b=p.vertical,y=p.verticalReversed,w=p.scale,x=p.scaleSteps,k=p.scaleSubSteps,C=p.limitKnobPosition;Vl(a,{app:t,$el:l,el:l[0],$inputEl:u,inputEl:u?u[0]:void 0,dual:d,step:h,label:f,min:m,max:g,value:v,previousValue:v,vertical:b,verticalReversed:y,scale:w,scaleSteps:x,scaleSubSteps:k,limitKnobPosition:C}),u&&("step min max".split(" ").forEach((function(e){!n[e]&&u.attr(e)&&(a.params[e]=parseFloat(u.attr(e)),a[e]=parseFloat(u.attr(e)))})),void 0!==u.val()&&(a.params.value=parseFloat(u.val()),a.value=parseFloat(u.val()))),a.dual&&l.addClass("range-slider-dual"),a.label&&l.addClass("range-slider-label"),a.vertical?(l.addClass("range-slider-vertical"),a.verticalReversed&&l.addClass("range-slider-vertical-reversed")):l.addClass("range-slider-horizontal");var S=Gc('<div class="range-bar"></div>'),E=Gc('<div class="range-bar-active"></div>');S.append(E);var T='\n      <div class="range-knob-wrap">\n        <div class="range-knob"></div>\n        '+(a.label?'<div class="range-knob-label"></div>':"")+"\n      </div>\n    ",$=[Gc(T)];a.dual&&$.push(Gc(T)),l.append(S),$.forEach((function(e){l.append(e)}));var I,N,O=[];a.label&&(O.push($[0].find(".range-knob-label")),a.dual&&O.push($[1].find(".range-knob-label"))),a.scale&&a.scaleSteps>=1&&(I=Gc('\n        <div class="range-scale">\n          '+a.renderScale()+"\n        </div>\n      "),l.append(I)),Vl(a,{knobs:$,labels:O,$barEl:S,$barActiveEl:E,$scaleEl:I}),l[0].f7Range=a;var A,M,_,R,P,D,L,B,F,z,V,W={};function H(){L=!0}function j(e){if(!N&&(a.params.draggableBar||0!==Gc(e.target).closest(".range-knob").length)){var t;L=!1,W.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,W.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,"touchstart"===e.type&&(B=e.targetTouches[0].identifier),N=!0,A=void 0,M=l.offset(),_=M.left,R=M.top,a.vertical?(t=(W.y-R)/a.rangeHeight,a.verticalReversed||(t=1-t)):t=a.app.rtl?(_+a.rangeWidth-W.x)/a.rangeWidth:(W.x-_)/a.rangeWidth;var n=t*(a.max-a.min)+a.min;a.dual?Math.abs(a.value[0]-n)<Math.abs(a.value[1]-n)?(D=0,P=a.knobs[0],n=[n,a.value[1]]):(D=1,P=a.knobs[1],n=[a.value[0],n]):(P=a.knobs[0],n=t*(a.max-a.min)+a.min),_l((function(){N&&P.addClass("range-knob-active-state")}),70),a.on("change",H),a.setValue(n,!0)}}function U(e){if(N){var t,n;if("touchmove"===e.type)for(var r=0;r<e.targetTouches.length;r+=1)e.targetTouches[r].identifier===B&&(t=e.targetTouches[r].pageX,n=e.targetTouches[r].pageY);else t=e.pageX,n=e.pageY;if(void 0!==t||void 0!==n)if(void 0!==A||a.vertical||(A=!!(A||Math.abs(n-W.y)>Math.abs(t-W.x))),A)N=!1;else{var s;e.preventDefault(),a.vertical?(s=(n-R)/a.rangeHeight,a.verticalReversed||(s=1-s)):s=a.app.rtl?(_+a.rangeWidth-t)/a.rangeWidth:(t-_)/a.rangeWidth;var o,i,l=s*(a.max-a.min)+a.min;if(a.dual)0===D?(o=l)>(i=a.value[1])&&(i=o):(i=l)<(o=a.value[0])&&(o=i),l=[o,i];a.setValue(l,!0)}}}function G(e){if("touchend"===e.type){for(var t,n=0;n<e.changedTouches.length;n+=1)e.changedTouches[n].identifier===B&&(t=!0);if(!t)return}if(!N)return A&&P.removeClass("range-knob-active-state"),void(N=!1);a.off("change",H),N=!1,P.removeClass("range-knob-active-state"),L&&a.$inputEl&&!a.dual&&a.$inputEl.trigger("change"),L=!1,void 0!==a.previousValue&&(a.dual&&(a.previousValue[0]!==a.value[0]||a.previousValue[1]!==a.value[1])||!a.dual&&a.previousValue!==a.value)&&(a.$el.trigger("range:changed",a.value),a.emit("local::changed rangeChanged",a,a.value))}function q(){a.calcSize(),a.layout()}return a.attachEvents=function(){var e=!!s.passiveListener&&{passive:!0};a.$el.on(t.touchEvents.start,j,e),t.on("touchmove",U),t.on("touchend:passive",G),t.on("tabShow",q),t.on("resize",q),(F=a.$el.parents(".sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast")).on("modal:open",q),(z=a.$el.parents(".panel")).on("panel:open panel:resize",q),(V=a.$el.parents(".page").eq(0)).on("page:reinit",q)},a.detachEvents=function(){var e=!!s.passiveListener&&{passive:!0};a.$el.off(t.touchEvents.start,j,e),t.off("touchmove",U),t.off("touchend:passive",G),t.off("tabShow",q),t.off("resize",q),F&&F.off("modal:open",q),z&&z.off("panel:open panel:resize",q),V&&V.off("page:reinit",q),F=null,z=null,V=null},a.useModules(),a.init(),a||rf(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,af(t,n);var a=r.prototype;return a.calcSize=function(){var e=this;if(e.vertical){var t=e.$el.outerHeight();if(0===t)return;e.rangeHeight=t,e.knobHeight=e.knobs[0].outerHeight()}else{var n=e.$el.outerWidth();if(0===n)return;e.rangeWidth=n,e.knobWidth=e.knobs[0].outerWidth()}},a.layout=function(){var e=this,t=e.app,n=e.knobWidth,r=e.knobHeight,a=e.rangeWidth,s=e.rangeHeight,o=e.min,i=e.max,l=e.knobs,u=e.$barActiveEl,c=e.value,p=e.label,d=e.labels,h=e.vertical,f=e.verticalReversed,m=e.limitKnobPosition,g=h?r:n,v=h?s:a,b=h?f?"top":"bottom":t.rtl?"right":"left";if(e.dual){var y,w=[(c[0]-o)/(i-o),(c[1]-o)/(i-o)];u.css(((y={})[b]=100*w[0]+"%",y[h?"height":"width"]=100*(w[1]-w[0])+"%",y)),l.forEach((function(t,n){var r=v*w[n];if(m){var a=v*w[n]-g/2;a<0&&(r=g/2),a+g>v&&(r=v-g/2)}t.css(b,r+"px"),p&&d[n].text(e.formatLabel(c[n],d[n][0]))}))}else{var x=(c-o)/(i-o);u.css(h?"height":"width",100*x+"%");var k=v*x;if(m){var C=v*x-g/2;C<0&&(k=g/2),C+g>v&&(k=v-g/2)}l[0].css(b,k+"px"),p&&d[0].text(e.formatLabel(c,d[0][0]))}e.dual&&c.indexOf(o)>=0||!e.dual&&c===o?e.$el.addClass("range-slider-min"):e.$el.removeClass("range-slider-min"),e.dual&&c.indexOf(i)>=0||!e.dual&&c===i?e.$el.addClass("range-slider-max"):e.$el.removeClass("range-slider-max")},a.setValue=function(e,t){var n,r,a=this,s=a.step,o=a.min,i=a.max;if(a.dual){r=[a.value[0],a.value[1]];var l=e;if(Array.isArray(l)||(l=[e,e]),e[0]>e[1]&&(l=[l[0],l[0]]),l=l.map((function(e){return Math.max(Math.min(Math.round(e/s)*s,i),o)})),l[0]===a.value[0]&&l[1]===a.value[1])return a;l.forEach((function(e,t){a.value[t]=e})),n=r[0]!==l[0]||r[1]!==l[1],a.layout()}else{r=a.value;var u=Math.max(Math.min(Math.round(e/s)*s,i),o);a.value=u,a.layout(),n=r!==u}return n&&(a.previousValue=r),n?(a.$el.trigger("range:change",a.value),a.$inputEl&&!a.dual&&(a.$inputEl.val(a.value),t?a.$inputEl.trigger("input"):a.$inputEl.trigger("input change")),t||(a.$el.trigger("range:changed",a.value),a.emit("local::changed rangeChanged",a,a.value)),a.emit("local::change rangeChange",a,a.value),a):a},a.getValue=function(){return this.value},a.formatLabel=function(e,t){var n=this;return n.params.formatLabel?n.params.formatLabel.call(n,e,t):e},a.formatScaleLabel=function(e){var t=this;return t.params.formatScaleLabel?t.params.formatScaleLabel.call(t,e):e},a.renderScale=function(){var e=this,t=e.app,n=e.verticalReversed,r=e.vertical?n?"top":"bottom":t.rtl?"right":"left",a="";return Array.from({length:e.scaleSteps+1}).forEach((function(t,n){var s=(e.max-e.min)/e.scaleSteps,o=e.min+s*n,i=(o-e.min)/(e.max-e.min);a+='<div class="range-scale-step" style="'+r+": "+100*i+'%">'+e.formatScaleLabel(o)+"</div>",e.scaleSubSteps&&e.scaleSubSteps>1&&n<e.scaleSteps&&Array.from({length:e.scaleSubSteps-1}).forEach((function(t,n){var i=s/e.scaleSubSteps,l=(o+i*(n+1)-e.min)/(e.max-e.min);a+='<div class="range-scale-step range-scale-substep" style="'+r+": "+100*l+'%"></div>'}))})),a},a.updateScale=function(){var e=this;if(!e.scale||e.scaleSteps<1)return e.$scaleEl&&e.$scaleEl.remove(),void delete e.$scaleEl;e.$scaleEl||(e.$scaleEl=Gc('<div class="range-scale"></div>'),e.$el.append(e.$scaleEl)),e.$scaleEl.html(e.renderScale())},a.init=function(){var e=this;return e.calcSize(),e.layout(),e.attachEvents(),e},a.destroy=function(){var e=this;e.$el.trigger("range:beforedestroy"),e.emit("local::beforeDestroy rangeBeforeDestroy",e),delete e.$el[0].f7Range,e.detachEvents(),Ol(e),e=null},r}(au),of=sf,lf={name:"range",create:function(){var e=this;e.range=Vl(Yc({defaultSelector:".range-slider",constructor:of,app:e,domProp:"f7Range"}),{getValue:function(t){void 0===t&&(t=".range-slider");var n=e.range.get(t);if(n)return n.getValue()},setValue:function(t,n){void 0===t&&(t=".range-slider");var r=e.range.get(t);if(r)return r.setValue(n)}})},static:{Range:of},on:{tabMounted:function(e){var t=this;Gc(e).find(".range-slider-init").each((function(e){return new of(t,{el:e})}))},tabBeforeRemove:function(e){Gc(e).find(".range-slider-init").each((function(e){e.f7Range&&e.f7Range.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".range-slider-init").each((function(e){return new of(t,{el:e})}))},pageBeforeRemove:function(e){e.$el.find(".range-slider-init").each((function(e){e.f7Range&&e.f7Range.destroy()}))}},vnode:{"range-slider-init":{insert:function(e){var t=e.elm;this.range.create({el:t})},destroy:function(e){var t=e.elm;t.f7Range&&t.f7Range.destroy()}}}};function uf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cf(e,t){return cf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},cf(e,t)}var pf=function(e){var t,n;function r(t,n){var r,a=uf(r=e.call(this,n,[t])||this),s={el:null,inputEl:null,valueEl:null,value:0,formatValue:null,step:1,min:0,max:100,watchInput:!0,autorepeat:!1,autorepeatDynamic:!1,wraps:!1,manualInputMode:!1,decimalPoint:4,buttonsEndInputMode:!0};a.useModulesParams(s),a.params=Vl(s,n),a.params.value<a.params.min&&(a.params.value=a.params.min),a.params.value>a.params.max&&(a.params.value=a.params.max);var o=a.params.el;if(!o)return a||uf(r);var i,l,u=Gc(o);if(0===u.length)return a||uf(r);if(u[0].f7Stepper)return u[0].f7Stepper||uf(r);if(a.params.inputEl?i=Gc(a.params.inputEl):u.find(".stepper-input-wrap").find("input, textarea").length&&(i=u.find(".stepper-input-wrap").find("input, textarea").eq(0)),i&&i.length){"step min max".split(" ").forEach((function(e){!n[e]&&i.attr(e)&&(a.params[e]=parseFloat(i.attr(e)))}));var c=parseInt(a.params.decimalPoint,10);Number.isNaN(c)?a.params.decimalPoint=0:a.params.decimalPoint=c;var p=parseFloat(i.val());void 0!==n.value||Number.isNaN(p)||!p&&0!==p||(a.params.value=p)}a.params.valueEl?l=Gc(a.params.valueEl):u.find(".stepper-value").length&&(l=u.find(".stepper-value").eq(0));var d=u.find(".stepper-button-plus"),h=u.find(".stepper-button-minus"),f=a.params,m=f.step,g=f.min,v=f.max,b=f.value,y=f.decimalPoint;Vl(a,{app:t,$el:u,el:u[0],$buttonPlusEl:d,buttonPlusEl:d[0],$buttonMinusEl:h,buttonMinusEl:h[0],$inputEl:i,inputEl:i?i[0]:void 0,$valueEl:l,valueEl:l?l[0]:void 0,step:m,min:g,max:v,value:b,decimalPoint:y,typeModeChanged:!1}),u[0].f7Stepper=a;var w,x,k,C,S,E={},T=null,$=!1,I=!1;function N(e,t,n,r,a,s){clearTimeout(S),S=setTimeout((function(){1===e&&(k=!0,$=!0),clearInterval(C),s(),C=setInterval((function(){s()}),a),e<t&&N(e+1,t,n,r,a/2,s)}),1===e?n:r)}function O(e){w||(I||(Gc(e.target).closest(d).length?T="increment":Gc(e.target).closest(h).length&&(T="decrement"),T&&(E.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,E.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,w=!0,x=void 0,N(1,a.params.autorepeatDynamic?4:1,500,1e3,300,(function(){a[T]()})))))}function A(e){if(w&&!I){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,n="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;void 0!==x||$||(x=!!(x||Math.abs(n-E.y)>Math.abs(t-E.x)));var r=Math.pow(Math.pow(t-E.x,2)+Math.pow(n-E.y,2),.5);(x||r>20)&&(w=!1,clearTimeout(S),clearInterval(C))}}function M(){clearTimeout(S),clearInterval(C),T=null,$=!1,w=!1}function _(){I?a.params.buttonsEndInputMode&&(I=!1,a.endTypeMode(!0)):k?k=!1:a.decrement(!0)}function R(){I?a.params.buttonsEndInputMode&&(I=!1,a.endTypeMode(!0)):k?k=!1:a.increment(!0)}function P(e){!e.target.readOnly&&a.params.manualInputMode&&(I=!0,"number"==typeof e.target.selectionStart&&(e.target.selectionStart=e.target.value.length,e.target.selectionEnd=e.target.value.length))}function D(e){13!==e.keyCode&&13!==e.which||(e.preventDefault(),I=!1,a.endTypeMode())}function L(){I=!1,a.endTypeMode(!0)}function B(e){I?a.typeValue(e.target.value):e.detail&&e.detail.sentByF7Stepper||a.setValue(e.target.value,!0)}return a.attachEvents=function(){h.on("click",_),d.on("click",R),a.params.watchInput&&i&&i.length&&(i.on("input",B),i.on("click",P),i.on("blur",L),i.on("keyup",D)),a.params.autorepeat&&(t.on("touchstart:passive",O),t.on("touchmove:active",A),t.on("touchend:passive",M))},a.detachEvents=function(){h.off("click",_),d.off("click",R),a.params.watchInput&&i&&i.length&&(i.off("input",B),i.off("click",P),i.off("blur",L),i.off("keyup",D))},a.useModules(),a.init(),a||uf(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,cf(t,n);var a=r.prototype;return a.minus=function(){return this.decrement()},a.plus=function(){return this.increment()},a.decrement=function(){var e=this;return e.setValue(e.value-e.step,!1,!0)},a.increment=function(){var e=this;return e.setValue(e.value+e.step,!1,!0)},a.setValue=function(e,t,n){var r=this,a=r.step,s=r.min,o=r.max,i=r.value,l=Math.round(e/a)*a;if(r.params.wraps&&n?(l>o&&(l=s),l<s&&(l=o)):l=Math.max(Math.min(l,o),s),Number.isNaN(l)&&(l=i),r.value=l,!(i!==l)&&!t)return r;r.$el.trigger("stepper:change",r.value);var u=r.formatValue(r.value);return r.$inputEl&&r.$inputEl.length&&(r.$inputEl.val(u),r.$inputEl.trigger("input change",{sentByF7Stepper:!0})),r.$valueEl&&r.$valueEl.length&&r.$valueEl.html(u),r.emit("local::change stepperChange",r,r.value),r},a.endTypeMode=function(e){var t=this,n=t.min,r=t.max,a=parseFloat(t.value);if(Number.isNaN(a)&&(a=0),a=Math.max(Math.min(a,r),n),t.value=a,!t.typeModeChanged)return t.$inputEl&&t.$inputEl.length&&!e&&t.$inputEl.blur(),t;t.typeModeChanged=!1,t.$el.trigger("stepper:change",t.value);var s=t.formatValue(t.value);return t.$inputEl&&t.$inputEl.length&&(t.$inputEl.val(s),t.$inputEl.trigger("input change",{sentByF7Stepper:!0}),e||t.$inputEl.blur()),t.$valueEl&&t.$valueEl.length&&t.$valueEl.html(s),t.emit("local::change stepperChange",t,t.value),t},a.typeValue=function(e){var t=this;t.typeModeChanged=!0;var n=String(e);if(1===n.length&&"-"===n)return t;if(n.lastIndexOf(".")+1!==n.length&&n.lastIndexOf(",")+1!==n.length){var r=parseFloat(n.replace(",","."));if(0===r)return t.value=n.replace(",","."),t.$inputEl.val(t.value),t;if(Number.isNaN(r))return t.value=0,t.$inputEl.val(t.value),t;var a=Math.pow(10,t.params.decimalPoint);return r=Math.round(r*a).toFixed(t.params.decimalPoint+1)/a,t.value=parseFloat(String(r).replace(",",".")),t.$inputEl.val(t.value),t}return n.lastIndexOf(".")!==n.indexOf(".")||n.lastIndexOf(",")!==n.indexOf(",")?(n=n.slice(0,-1),t.value=n,t.$inputEl.val(t.value),t):(t.value=n,t.$inputEl.val(n),t)},a.getValue=function(){return this.value},a.formatValue=function(e){var t=this;return t.params.formatValue?t.params.formatValue.call(t,e):e},a.init=function(){var e=this;if(e.attachEvents(),e.$valueEl&&e.$valueEl.length){var t=e.formatValue(e.value);e.$valueEl.html(t)}return e},a.destroy=function(){var e=this;e.$el.trigger("stepper:beforedestroy"),e.emit("local::beforeDestroy stepperBeforeDestroy",e),delete e.$el[0].f7Stepper,e.detachEvents(),Ol(e),e=null},r}(au),df=pf,hf={name:"stepper",create:function(){var e=this;e.stepper=Vl(Yc({defaultSelector:".stepper",constructor:df,app:e,domProp:"f7Stepper"}),{getValue:function(t){void 0===t&&(t=".stepper");var n=e.stepper.get(t);if(n)return n.getValue()},setValue:function(t,n){void 0===t&&(t=".stepper");var r=e.stepper.get(t);if(r)return r.setValue(n)}})},static:{Stepper:df},on:{tabMounted:function(e){var t=this;Gc(e).find(".stepper-init").each((function(e){var n=Gc(e).dataset();t.stepper.create(Vl({el:e},n||{}))}))},tabBeforeRemove:function(e){Gc(e).find(".stepper-init").each((function(e){e.f7Stepper&&e.f7Stepper.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".stepper-init").each((function(e){var n=Gc(e).dataset();t.stepper.create(Vl({el:e},n||{}))}))},pageBeforeRemove:function(e){e.$el.find(".stepper-init").each((function(e){e.f7Stepper&&e.f7Stepper.destroy()}))}},vnode:{"stepper-init":{insert:function(e){var t=e.elm,n=Gc(t).dataset();this.stepper.create(Vl({el:t},n||{}))},destroy:function(e){var t=e.elm;t.f7Stepper&&t.f7Stepper.destroy()}}}};function ff(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gf(e,t){return gf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},gf(e,t)}var vf=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var a=mf(r=e.call(this,n,[t])||this),s=Vl({on:{}},t.params.smartSelect);void 0===s.searchbarDisableButton&&(s.searchbarDisableButton="aurora"!==t.theme),a.useModulesParams(s),a.params=Vl({},s,n),a.app=t;var o=Gc(a.params.el).eq(0);if(0===o.length)return a||mf(r);if(o[0].f7SmartSelect)return o[0].f7SmartSelect||mf(r);var i,l=o.find("select").eq(0);if(0===l.length)return a||mf(r);a.params.setValueText&&(0===(i=Gc(a.params.valueEl)).length&&(i=o.find(".item-after")),0===i.length&&(i=Gc('<div class="item-after"></div>')).insertAfter(o.find(".item-title")));var u=n.url;u||(o.attr("href")&&"#"!==o.attr("href")?u=o.attr("href"):l.attr("name")&&(u=l.attr("name").toLowerCase()+"-select/")),u||(u=a.params.url);var c=l[0].multiple,p=c?"checkbox":"radio",d=Cl();function h(){a.open()}function f(){var e=a.$selectEl.val();a.$el.trigger("smartselect:change",e),a.emit("local::change smartSelectChange",a,e),a.vl&&a.vl.clearCache(),a.setValueText()}function m(){var e,t,n,r=this,s=r.value,o=[];if("checkbox"===r.type){for(var i=0;i<a.selectEl.options.length;i+=1)(e=a.selectEl.options[i]).value===s&&(e.selected=r.checked),e.selected&&(t=(n=e.dataset?e.dataset.displayAs:Gc(e).data("display-value-as"))&&void 0!==n?n:e.textContent,o.push(t.trim()));a.maxLength&&a.checkMaxLength()}else(e=a.$selectEl.find('option[value="'+s+'"]')[0])||(e=a.$selectEl.find("option").filter((function(e){return e.value===s}))[0]),o=[t=(n=e.dataset?e.dataset.displayAs:Gc(e).data("display-as"))&&void 0!==n?n:e.textContent],a.selectEl.value=s;a.$selectEl.trigger("change"),a.params.setValueText&&a.$valueEl.text(a.formatValueText(o)),a.params.closeOnSelect&&"radio"===a.inputType&&a.close()}return Vl(a,{$el:o,el:o[0],$selectEl:l,selectEl:l[0],$valueEl:i,valueEl:i&&i[0],url:u,multiple:c,inputType:p,id:d,inputName:p+"-"+d,selectName:l.attr("name"),maxLength:l.attr("maxlength")||n.maxLength}),o[0].f7SmartSelect=a,a.attachEvents=function(){o.on("click",h),o.on("change","select",f)},a.detachEvents=function(){o.off("click",h),o.off("change","select",f)},a.attachInputsEvents=function(){a.$containerEl.on("change",'input[type="checkbox"], input[type="radio"]',m)},a.detachInputsEvents=function(){a.$containerEl.off("change",'input[type="checkbox"], input[type="radio"]',m)},a.useModules(),a.init(),a||mf(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,gf(t,n);var a,s,o,i=r.prototype;return i.setValue=function(e){var t,n,r,a=this,s=e,o=[];if(a.multiple){Array.isArray(s)||(s=[s]);for(var i=0;i<a.selectEl.options.length;i+=1)t=a.selectEl.options[i],s.indexOf(t.value)>=0?t.selected=!0:t.selected=!1,t.selected&&(r=(n=t.dataset?t.dataset.displayAs:Gc(t).data("display-value-as"))&&void 0!==n?n:t.textContent,o.push(r.trim()))}else(t=a.$selectEl.find('option[value="'+s+'"]')[0])&&(o=[r=(n=t.dataset?t.dataset.displayAs:Gc(t).data("display-as"))&&void 0!==n?n:t.textContent]),a.selectEl.value=s;return a.params.setValueText&&a.$valueEl.text(a.formatValueText(o)),a.$selectEl.trigger("change"),a},i.unsetValue=function(){var e=this;e.params.setValueText&&e.$valueEl.text(e.formatValueText([])),e.$selectEl.find("option").each((function(e){e.selected=!1,e.checked=!1})),e.$selectEl[0].value=null,e.$containerEl&&e.$containerEl.find('input[name="'+e.inputName+'"][type="checkbox"], input[name="'+e.inputName+'"][type="radio"]').prop("checked",!1),e.$selectEl.trigger("change")},i.getValue=function(){return this.$selectEl.val()},i.checkMaxLength=function(){var e=this,t=e.$containerEl;e.selectEl.selectedOptions.length>=e.maxLength?t.find('input[type="checkbox"]').each((function(e){e.checked?Gc(e).parents("li").removeClass("disabled"):Gc(e).parents("li").addClass("disabled")})):t.find(".disabled").removeClass("disabled")},i.formatValueText=function(e){var t=this;return t.params.formatValueText?t.params.formatValueText.call(t,e,t):e.join(", ")},i.setValueText=function(e){var t=this,n=[];void 0!==e?n=Array.isArray(e)?e:[e]:t.$selectEl.find("option").each((function(e){var t=Gc(e);if(e.selected){var r=e.dataset?e.dataset.displayAs:t.data("display-value-as");r&&void 0!==r?n.push(r):n.push(e.textContent.trim())}})),t.params.setValueText&&t.$valueEl.text(t.formatValueText(n))},i.getItemsData=function(){var e,t=this,n=t.app.theme,r=[];return t.$selectEl.find("option").each((function(a){var s=Gc(a),o=s.dataset(),i=o.optionImage||t.params.optionImage,l=o.optionIcon||t.params.optionIcon,u="ios"===n&&(o.optionIconIos||t.params.optionIconIos),c="md"===n&&(o.optionIconMd||t.params.optionIconMd),p="aurora"===n&&(o.optionIconAurora||t.params.optionIconAurora),d=i||l||u||c||p,h=o.optionColor,f=o.optionClass||"";s[0].disabled&&(f+=" disabled");var m=s.parent("optgroup")[0],g=m&&m.label,v=!1;m&&m!==e&&(v=!0,e=m,r.push({groupLabel:g,isLabel:v})),r.push({value:s[0].value,text:s[0].textContent.trim(),selected:s[0].selected,groupEl:m,groupLabel:g,image:i,icon:l,iconIos:u,iconMd:c,iconAurora:p,color:h,className:f,disabled:s[0].disabled,id:t.id,hasMedia:d,checkbox:"checkbox"===t.inputType,radio:"radio"===t.inputType,inputName:t.inputName,inputType:t.inputType})})),t.items=r,r},i.renderSearchbar=function(){var e=this;return e.params.renderSearchbar?e.params.renderSearchbar.call(e):Od("form",{class:"searchbar"},Od("div",{class:"searchbar-inner"},Od("div",{class:"searchbar-input-wrap"},Od("input",{type:"search",spellcheck:e.params.searchbarSpellcheck||"false",placeholder:e.params.searchbarPlaceholder}),Od("i",{class:"searchbar-icon"}),Od("span",{class:"input-clear-button"})),e.params.searchbarDisableButton&&Od("span",{class:"searchbar-disable-button"},e.params.searchbarDisableText)))},i.renderItem=function(e,t){var n,r,a=this;if(a.params.renderItem)return a.params.renderItem.call(a,e,t);if(e.isLabel)n='<li class="item-divider">'+e.groupLabel+"</li>";else{var s,o=e.selected;if(a.params.virtualList){var i=a.getValue();o=a.multiple?i.indexOf(e.value)>=0:i===e.value,a.multiple&&(s=a.multiple&&!o&&i.length===parseInt(a.maxLength,10))}var l=e.icon,u=e.iconIos,c=e.iconMd,p=e.iconAurora,d=l||u||c||p,h=(void 0===(r=l||u||c||p||"")&&(r=""),r.indexOf(":")>=0?r.split(":")[1]:""),f=function(e){if(void 0===e&&(e=""),e.indexOf(":")>=0){var t=e.split(":")[0];return"f7"===t&&(t="f7-icons"),"material"===t&&(t="material-icons"),t}return e}(l||u||c||p||"");n=Od("li",{class:(e.className||"")+(s?" disabled":"")},Od("label",{class:"item-"+e.inputType+" item-content"},Od("input",{type:e.inputType,name:e.inputName,value:e.value,_checked:o}),Od("i",{class:"icon icon-"+e.inputType}),e.hasMedia&&Od("div",{class:"item-media"},d&&Od("i",{class:"icon "+f},h),e.image&&Od("img",{src:e.image})),Od("div",{class:"item-inner"},Od("div",{class:"item-title"+(e.color?" text-color-"+e.color:"")},e.text))))}return n},i.renderItems=function(){var e=this;if(e.params.renderItems)return e.params.renderItems.call(e,e.items);var t="\n      "+e.items.map((function(t,n){return""+e.renderItem(t,n)})).join("")+"\n    ";return t},i.renderPage=function(){var e=this;if(e.params.renderPage)return e.params.renderPage.call(e,e.items);var t=e.params.pageTitle;if(void 0===t){var n=e.$el.find(".item-title");t=n.length?n.text().trim():""}var r=e.params.cssClass;return Od("div",{class:"page smart-select-page "+r,"data-name":"smart-select-page","data-select-name":e.selectName},Od("div",{class:"navbar "+(e.params.navbarColorTheme?"color-"+e.params.navbarColorTheme:"")},Od("div",{class:"navbar-bg"}),Od("div",{class:"navbar-inner sliding "+(e.params.navbarColorTheme?"color-"+e.params.navbarColorTheme:"")},Od("div",{class:"left"},Od("a",{class:"link back"},Od("i",{class:"icon icon-back"}),Od("span",{class:"if-not-md"},e.params.pageBackLinkText))),t&&Od("div",{class:"title"},t),e.params.searchbar&&Od("div",{class:"subnavbar"},e.renderSearchbar()))),e.params.searchbar&&Od("div",{class:"searchbar-backdrop"}),Od("div",{class:"page-content"},Od("div",{class:"list smart-select-list-"+e.id+" "+(e.params.virtualList?" virtual-list":"")+" "+(e.params.formColorTheme?"color-"+e.params.formColorTheme:"")},Od("ul",null,!e.params.virtualList&&e.renderItems(e.items)))))},i.renderPopup=function(){var e=this;if(e.params.renderPopup)return e.params.renderPopup.call(e,e.items);var t=e.params.pageTitle;if(void 0===t){var n=e.$el.find(".item-title");t=n.length?n.text().trim():""}var r=e.params.cssClass||"";return Od("div",{class:"popup smart-select-popup "+r+" "+(e.params.popupTabletFullscreen?"popup-tablet-fullscreen":""),"data-select-name":e.selectName},Od("div",{class:"view"},Od("div",{class:"page smart-select-page "+(e.params.searchbar?"page-with-subnavbar":""),"data-name":"smart-select-page"},Od("div",{class:"navbar "+(e.params.navbarColorTheme?"color-"+e.params.navbarColorTheme:"")},Od("div",{class:"navbar-bg"}),Od("div",{class:"navbar-inner sliding"},t&&Od("div",{class:"title"},t),Od("div",{class:"right"},Od("a",{class:"link popup-close","data-popup":".smart-select-popup[data-select-name='"+e.selectName+"']"},e.params.popupCloseLinkText)),e.params.searchbar&&Od("div",{class:"subnavbar"},e.renderSearchbar()))),e.params.searchbar&&Od("div",{class:"searchbar-backdrop"}),Od("div",{class:"page-content"},Od("div",{class:"list smart-select-list-"+e.id+" "+(e.params.virtualList?" virtual-list":"")+" "+(e.params.formColorTheme?"color-"+e.params.formColorTheme:"")},Od("ul",null,!e.params.virtualList&&e.renderItems(e.items)))))))},i.renderSheet=function(){var e=this;if(e.params.renderSheet)return e.params.renderSheet.call(e,e.items);var t=e.params.cssClass;return Od("div",{class:"sheet-modal smart-select-sheet "+t,"data-select-name":e.selectName},Od("div",{class:"toolbar toolbar-top "+(e.params.toolbarColorTheme?"color-"+e.params.toolbarColorTheme:"")},Od("div",{class:"toolbar-inner"},Od("div",{class:"left"}),Od("div",{class:"right"},Od("a",{class:"link sheet-close"},e.params.sheetCloseLinkText)))),Od("div",{class:"sheet-modal-inner"},Od("div",{class:"page-content"},Od("div",{class:"list smart-select-list-"+e.id+" "+(e.params.virtualList?" virtual-list":"")+" "+(e.params.formColorTheme?"color-"+e.params.formColorTheme:"")},Od("ul",null,!e.params.virtualList&&e.renderItems(e.items))))))},i.renderPopover=function(){var e=this;if(e.params.renderPopover)return e.params.renderPopover.call(e,e.items);var t=e.params.cssClass;return Od("div",{class:"popover smart-select-popover "+t,"data-select-name":e.selectName},Od("div",{class:"popover-inner"},Od("div",{class:"list smart-select-list-"+e.id+" "+(e.params.virtualList?" virtual-list":"")+" "+(e.params.formColorTheme?"color-"+e.params.formColorTheme:"")},Od("ul",null,!e.params.virtualList&&e.renderItems(e.items)))))},i.scrollToSelectedItem=function(){var e=this,t=e.params,n=e.$containerEl;if(!e.opened)return e;if(t.virtualList){var r;e.vl.items.forEach((function(e,t){void 0===r&&e.selected&&(r=t)})),void 0!==r&&e.vl.scrollToItem(r)}else{var a=n.find("input:checked").parents("li");if(!a.length)return e;var s=n.find(".page-content, .popover-inner");if(!s.length)return e;s.scrollTop(a.offset().top-s.offset().top-parseInt(s.css("padding-top"),10))}return e},i.onOpen=function(e,t){var n=this,r=n.app,a=Gc(t);if(n.$containerEl=a,n.openedIn=e,n.opened=!0,n.params.virtualList&&(n.vl=r.virtualList.create({el:a.find(".virtual-list"),items:n.items,renderItem:n.renderItem.bind(n),height:n.params.virtualListHeight,searchByItem:function(e,t){return!!(t.text&&t.text.toLowerCase().indexOf(e.trim().toLowerCase())>=0)}})),n.params.scrollToSelectedItem&&n.scrollToSelectedItem(),n.params.searchbar){var s=a.find(".searchbar");if("page"===e&&"ios"===r.theme&&(s=Gc(r.navbar.getElByPage(a)).find(".searchbar")),n.params.appendSearchbarNotFound&&("page"===e||"popup"===e)){var o=null;(o="string"==typeof n.params.appendSearchbarNotFound?Gc('<div class="block searchbar-not-found">'+n.params.appendSearchbarNotFound+"</div>"):"boolean"==typeof n.params.appendSearchbarNotFound?Gc('<div class="block searchbar-not-found">Nothing found</div>'):n.params.appendSearchbarNotFound)&&a.find(".page-content").append(o[0])}var i=Vl({el:s,backdropEl:a.find(".searchbar-backdrop"),searchContainer:".smart-select-list-"+n.id,searchIn:".item-title"},"object"==typeof n.params.searchbar?n.params.searchbar:{});n.searchbar=r.searchbar.create(i)}n.maxLength&&n.checkMaxLength(),n.params.closeOnSelect&&n.$containerEl.find('input[type="radio"][name="'+n.inputName+'"]:checked').parents("label").once("click",(function(){n.close()})),n.attachInputsEvents(),n.$el.trigger("smartselect:open"),n.emit("local::open smartSelectOpen",n)},i.onOpened=function(){var e=this;e.$el.trigger("smartselect:opened"),e.emit("local::opened smartSelectOpened",e)},i.onClose=function(){var e=this;e.destroyed||(e.vl&&e.vl.destroy&&(e.vl.destroy(),e.vl=null,delete e.vl),e.searchbar&&e.searchbar.destroy&&(e.searchbar.destroy(),e.searchbar=null,delete e.searchbar),e.detachInputsEvents(),e.$el.trigger("smartselect:close"),e.emit("local::close smartSelectClose",e))},i.onClosed=function(){var e=this;e.destroyed||(e.opened=!1,e.$containerEl=null,delete e.$containerEl,e.$el.trigger("smartselect:closed"),e.emit("local::closed smartSelectClosed",e))},i.openPage=function(){var e=this;if(e.opened)return e;e.getItemsData();var t=e.renderPage(e.items);return e.view.router.navigate({url:e.url,route:{content:t,path:e.url,on:{pageBeforeIn:function(t,n){e.onOpen("page",n.el)},pageAfterIn:function(t,n){e.onOpened("page",n.el)},pageBeforeOut:function(t,n){e.onClose("page",n.el)},pageAfterOut:function(t,n){e.onClosed("page",n.el)}}}}),e},i.openPopup=function(){var e=this;if(e.opened)return e;e.getItemsData();var t={content:e.renderPopup(e.items),push:e.params.popupPush,swipeToClose:e.params.popupSwipeToClose,on:{popupOpen:function(t){e.onOpen("popup",t.el)},popupOpened:function(t){e.onOpened("popup",t.el)},popupClose:function(t){e.onClose("popup",t.el)},popupClosed:function(t){e.onClosed("popup",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,popup:t}}):e.modal=e.app.popup.create(t).open(),e},i.openSheet=function(){var e=this;if(e.opened)return e;e.getItemsData();var t={content:e.renderSheet(e.items),backdrop:e.params.sheetBackdrop,scrollToEl:e.$el,closeByOutsideClick:!0,push:e.params.sheetPush,swipeToClose:e.params.sheetSwipeToClose,on:{sheetOpen:function(t){e.onOpen("sheet",t.el)},sheetOpened:function(t){e.onOpened("sheet",t.el)},sheetClose:function(t){e.onClose("sheet",t.el)},sheetClosed:function(t){e.onClosed("sheet",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,sheet:t}}):e.modal=e.app.sheet.create(t).open(),e},i.openPopover=function(){var e=this;if(e.opened)return e;e.getItemsData();var t={content:e.renderPopover(e.items),targetEl:e.$el,on:{popoverOpen:function(t){e.onOpen("popover",t.el)},popoverOpened:function(t){e.onOpened("popover",t.el)},popoverClose:function(t){e.onClose("popover",t.el)},popoverClosed:function(t){e.onClosed("popover",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,popover:t}}):e.modal=e.app.popover.create(t).open(),e},i.open=function(e){var t=this;if(t.opened)return t;var n=!1;function r(){n=!0}return t.$el&&t.$el.trigger("smartselect:beforeopen",{prevent:r}),t.emit("local::beforeOpen smartSelectBeforeOpen",t,r),n||t["open"+(e||t.params.openIn).split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join("")](),t},i.close=function(){var e=this;return e.opened?(e.params.routableModals&&e.view||"page"===e.openedIn?e.view.router.back():(e.modal.once("modalClosed",(function(){_l((function(){e.destroyed||(e.modal.destroy(),delete e.modal)}))})),e.modal.close()),e):e},i.init=function(){this.attachEvents(),this.setValueText()},i.destroy=function(){var e=this;e.emit("local::beforeDestroy smartSelectBeforeDestroy",e),e.$el.trigger("smartselect:beforedestroy"),e.detachEvents(),delete e.$el[0].f7SmartSelect,Ol(e),e.destroyed=!0},a=r,s=[{key:"view",get:function(){var e,t=this.params,n=this.$el;if(t.view&&(e=t.view),e||(e=n.parents(".view").length&&n.parents(".view")[0].f7View),!e&&"page"===t.openIn)throw Error("Smart Select requires initialized View");return e}}],s&&ff(a.prototype,s),o&&ff(a,o),r}(au),bf=vf,yf={name:"smartSelect",params:{smartSelect:{el:void 0,valueEl:void 0,setValueText:!0,formatValueText:null,openIn:"page",popupPush:!1,popupSwipeToClose:void 0,sheetPush:!1,sheetSwipeToClose:void 0,sheetBackdrop:!1,pageTitle:void 0,pageBackLinkText:"Back",popupCloseLinkText:"Close",popupTabletFullscreen:!1,sheetCloseLinkText:"Done",searchbar:!1,searchbarPlaceholder:"Search",searchbarDisableText:"Cancel",searchbarDisableButton:void 0,searchbarSpellcheck:!1,closeOnSelect:!1,virtualList:!1,virtualListHeight:void 0,scrollToSelectedItem:!1,formColorTheme:void 0,navbarColorTheme:void 0,routableModals:!1,url:"select/",cssClass:"",renderPage:void 0,renderPopup:void 0,renderSheet:void 0,renderPopover:void 0,renderItems:void 0,renderItem:void 0,renderSearchbar:void 0}},static:{SmartSelect:bf},create:function(){var e=this;e.smartSelect=Vl(Yc({defaultSelector:".smart-select",constructor:bf,app:e,domProp:"f7SmartSelect"}),{open:function(t){var n=e.smartSelect.get(t);if(n&&n.open)return n.open()},close:function(t){var n=e.smartSelect.get(t);if(n&&n.close)return n.close()}})},on:{tabMounted:function(e){var t=this;Gc(e).find(".smart-select-init").each((function(e){t.smartSelect.create(Vl({el:e},Gc(e).dataset()))}))},tabBeforeRemove:function(e){Gc(e).find(".smart-select-init").each((function(e){e.f7SmartSelect&&e.f7SmartSelect.destroy&&e.f7SmartSelect.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".smart-select-init").each((function(e){t.smartSelect.create(Vl({el:e},Gc(e).dataset()))}))},pageBeforeRemove:function(e){e.$el.find(".smart-select-init").each((function(e){e.f7SmartSelect&&e.f7SmartSelect.destroy&&e.f7SmartSelect.destroy()}))}},clicks:{".smart-select":function(e,t){e[0].f7SmartSelect||this.smartSelect.create(Vl({el:e},t)).open()}},vnode:{"smart-select-init":{insert:function(e){var t=e.elm;this.smartSelect.create(Vl({el:t},Gc(t).dataset()))},destroy:function(e){var t=e.elm;t.f7SmartSelect&&t.f7SmartSelect.destroy&&t.f7SmartSelect.destroy()}}}};function wf(e,t){var n=t.css("min-"+e);return"auto"===n||"none"===n?n=0:n.indexOf("px")>=0?n=parseFloat(n):n.indexOf("%")>=0&&(n=t.parent()[0]["height"===e?"offsetHeight":"offsetWidth"]*parseFloat(n)/100),n}function xf(e,t){var n=t.css("max-"+e);return"auto"===n||"none"===n?n=null:n.indexOf("px")>=0?n=parseFloat(n):n.indexOf("%")>=0&&(n=t.parent()[0]["height"===e?"offsetHeight":"offsetWidth"]*parseFloat(n)/100),n}var kf={init:function(){var e,t,n,r,a,s,o,i,l,u,c,p,d,h,f,m,g,v=this;var b=bl();Gc(b).on(v.touchEvents.start,".col > .resize-handler, .row > .resize-handler",(function(i){e||t||(a=Gc(i.target).closest(".resize-handler"),n="touchstart"===i.type?i.targetTouches[0].pageX:i.pageX,r="touchstart"===i.type?i.targetTouches[0].pageY:i.pageY,e=!0,s=void 0,o=void 0,g=void 0)})),v.on("touchmove",(function(b){if(e){var y=1===a.parent(".row").length,w=y?"height":"width",x=y?"offsetHeight":"offsetWidth";t||(!(s=a.parent(y?".row":".col")).length||s.hasClass("resizable")&&!s.hasClass("resizable-fixed")||(s=s.prevAll(".resizable:not(.resizable-fixed)").eq(0)),!(o=s.next(y?".row":".col")).length||o.hasClass("resizable")&&!o.hasClass("resizable-fixed")||(o=o.nextAll(".resizable:not(.resizable-fixed)").eq(0)),s.length&&(i=s[0][x],l=wf(w,s),u=xf(w,s),h=s.parent()[0][x],f=s.parent().children(y?".row":'[class*="col-"], .col').length,m=parseFloat(s.css(y?"--f7-grid-row-gap":"--f7-grid-gap"))),o.length&&(c=o[0][x],p=wf(w,o),d=xf(w,o),s.length||(h=o.parent()[0][x],f=o.parent().children(y?".row":'[class*="col-"], .col').length,m=parseFloat(o.css(y?"--f7-grid-row-gap":"--f7-grid-gap"))))),t=!0;var k="touchmove"===b.type?b.targetTouches[0].pageX:b.pageX,C="touchmove"===b.type?b.targetTouches[0].pageY:b.pageY;if(void 0!==g||y||(g=!!(g||Math.abs(C-r)>Math.abs(k-n))),g)return e=!1,void(t=!1);var S=s.hasClass("resizable-absolute")||o.hasClass("resizable-absolute"),E=!y||y&&!S;if(E&&!o.length||!s.length)return e=!1,void(t=!1);b.preventDefault();var T,$,I=y?C-r:k-n;if(s.length&&((T=i+I)<l&&(I=(T=l)-i),u&&T>u&&(I=(T=u)-i)),o.length&&E&&(($=c-I)<p&&(T=i+(I=c-($=p))),d&&$>d&&(T=i+(I=c-($=d)))),S)return s[0].style[w]=T+"px",E&&(o[0].style[w]=$+"px"),s.trigger("grid:resize"),o.trigger("grid:resize"),v.emit("gridResize",s[0]),void v.emit("gridResize",o[0]);var N=(f-1)*m/f,O=y?f-1+" * var(--f7-grid-row-gap) / "+f:"(var(--f7-cols-per-row) - 1) * var(--f7-grid-gap) / var(--f7-cols-per-row)",A=T+N,M=$+N;s[0].style[w]="calc("+A/h*100+"% - "+O+")",o[0].style[w]="calc("+M/h*100+"% - "+O+")",s.trigger("grid:resize"),o.trigger("grid:resize"),v.emit("gridResize",s[0]),v.emit("gridResize",o[0])}})),v.on("touchend",(function(){e&&(t||(e=!1),e=!1,t=!1)}))}},Cf={name:"grid",create:function(){Vl(this,{grid:{init:kf.init.bind(this)}})},on:{init:function(){this.grid.init()}}};function Sf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ef(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tf(e,t){return Tf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Tf(e,t)}var $f=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var a,s,o=Ef(r=e.call(this,n,[t])||this);if(o.params=Vl({},t.params.calendar,n),o.params.containerEl&&0===(a=Gc(o.params.containerEl)).length)return o||Ef(r);o.params.inputEl&&(s=Gc(o.params.inputEl));var i="horizontal"===o.params.direction,l=1;i&&(l=t.rtl?-1:1),Vl(o,{app:t,$containerEl:a,containerEl:a&&a[0],inline:a&&a.length>0,$inputEl:s,inputEl:s&&s[0],initialized:!1,opened:!1,url:o.params.url,isHorizontal:i,inverter:l,animating:!1,allowTouchMove:!0,hasTimePicker:o.params.timePicker&&!o.params.rangePicker&&!o.params.multiple}),o.dayFormatter=function(e){return new Intl.DateTimeFormat(o.params.locale,{day:"numeric"}).format(e).replace(//,"")},o.monthFormatter=function(e){return new Intl.DateTimeFormat(o.params.locale,{month:"long"}).format(e)},o.yearFormatter=function(e){return new Intl.DateTimeFormat(o.params.locale,{year:"numeric"}).format(e)},o.timeSelectorFormatter=function(e){return new Intl.DateTimeFormat(o.params.locale,o.params.timePickerFormat).format(e)};var u=o.timeSelectorFormatter(new Date).toLowerCase();o.is12HoursFormat=u.indexOf("pm")>=0||u.indexOf("am")>=0;var c=o.params,p=c.monthNames,d=c.monthNamesShort,h=c.dayNames,f=c.dayNamesShort,m=o.getIntlNames(),g=m.monthNamesIntl,v=m.monthNamesShortIntl,b=m.dayNamesIntl,y=m.dayNamesShortIntl;function w(){o.open()}function x(e){e.preventDefault()}function k(){o.setValue([]),o.opened&&o.update()}function C(e){var t=Gc(e.target);!o.destroyed&&o.params&&(o.isPopover()||o.opened&&!o.closing&&(t.closest('[class*="backdrop"]').length||(s&&s.length>0?t[0]!==s[0]&&0===t.closest(".sheet-modal, .calendar-modal").length&&o.close():0===Gc(e.target).closest(".sheet-modal, .calendar-modal").length&&o.close())))}return"auto"===p&&(p=g),"auto"===d&&(d=v),"auto"===h&&(h=b),"auto"===f&&(f=y),Vl(o,{monthNames:p,monthNamesShort:d,dayNames:h,dayNamesShort:f}),Vl(o,{attachInputEvents:function(){o.$inputEl.on("click",w),o.$inputEl.on("input:clear",k),o.params.inputReadOnly&&(o.$inputEl.on("focus mousedown",x),o.$inputEl[0]&&(o.$inputEl[0].f7ValidateReadonly=!0))},detachInputEvents:function(){o.$inputEl.off("click",w),o.$inputEl.off("input:clear",k),o.params.inputReadOnly&&(o.$inputEl.off("focus mousedown",x),o.$inputEl[0]&&delete o.$inputEl[0].f7ValidateReadonly)},attachHtmlEvents:function(){t.on("click",C)},detachHtmlEvents:function(){t.off("click",C)}}),o.attachCalendarEvents=function(){var e,n,r,a,s,i,l,u,c,p,d,h,f,m=!0,g=o.$el,v=o.$wrapperEl;function b(t){n||e||(e=!0,r="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,s=r,a="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,i=a,l=(new Date).getTime(),d=0,m=!0,f=void 0,u=o.monthsTranslate)}function y(t){if(e){var l=o.isHorizontal;s="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,i="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,void 0===f&&(f=!!(f||Math.abs(i-a)>Math.abs(s-r))),l&&f||!o.allowTouchMove?e=!1:(t.preventDefault(),o.animating?e=!1:(m=!1,n||(n=!0,c=v[0].offsetWidth,p=v[0].offsetHeight,v.transition(0)),d=(h=l?s-r:i-a)/(l?c:p),u=100*(o.monthsTranslate*o.inverter+d),v.transform("translate3d("+(l?u:0)+"%, "+(l?0:u)+"%, 0)")))}}function w(){if(!e||!n)return e=!1,void(n=!1);e=!1,n=!1,(new Date).getTime()-l<300?Math.abs(h)<10?o.resetMonth():h>=10?t.rtl?o.nextMonth():o.prevMonth():t.rtl?o.prevMonth():o.nextMonth():d<=-.5?t.rtl?o.prevMonth():o.nextMonth():d>=.5?t.rtl?o.nextMonth():o.prevMonth():o.resetMonth(),setTimeout((function(){m=!0}),100)}function x(e){if(m){var t=Gc(e.target).parents(".calendar-day");if(0===t.length&&Gc(e.target).hasClass("calendar-day")&&(t=Gc(e.target)),0!==t.length&&!t.hasClass("calendar-day-disabled")){o.params.rangePicker||(t.hasClass("calendar-day-next")&&o.nextMonth(),t.hasClass("calendar-day-prev")&&o.prevMonth());var n=parseInt(t.attr("data-year"),10),r=parseInt(t.attr("data-month"),10),a=parseInt(t.attr("data-day"),10);if(o.emit("local::dayClick calendarDayClick",o,t[0],n,r,a),!t.hasClass("calendar-day-selected")||o.params.multiple||o.params.rangePicker){var s=new Date(n,r,a,0,0,0);o.hasTimePicker&&(o.value&&o.value[0]?s.setHours(o.value[0].getHours(),o.value[0].getMinutes()):s.setHours((new Date).getHours(),(new Date).getMinutes())),o.addValue(s)}o.params.closeOnSelect&&(o.params.rangePicker&&2===o.value.length||!o.params.rangePicker)&&o.close()}}}function k(){o.nextMonth()}function C(){o.prevMonth()}function S(){o.nextYear()}function E(){o.prevYear()}function T(){g.append(o.renderMonthPicker())}function $(){var e=Gc(this);if(e.hasClass("calendar-month-picker-item-current"))g.find(".calendar-month-picker").remove();else{g.find(".calendar-month-picker-item-current").add(e).toggleClass("calendar-month-picker-item-current");var t=e.index()-(parseInt(o.$el.find(".calendar-month-current").attr("data-locale-month"),10)-o.currentMonth);o.setYearMonth(o.currentYear,t,0),setTimeout((function(){g.find(".calendar-month-picker").remove()}),200)}}function I(){g.append(o.renderYearPicker());var e=g.find(".calendar-year-picker-item-current"),t=g.find(".calendar-year-picker");e&&e.length&&t.scrollTop(e[0].offsetTop-t[0].offsetHeight/2+e[0].offsetHeight/2)}function N(){var e=Gc(this);if(e.hasClass("calendar-year-picker-item-current"))g.find(".calendar-year-picker").remove();else{g.find(".calendar-year-picker-item-current").add(e).toggleClass("calendar-year-picker-item-current");var t=parseInt(e.attr("data-year"),10);o.setYearMonth(t,void 0,0),setTimeout((function(){g.find(".calendar-year-picker").remove()}),200)}}function O(){o.openTimePicker()}function A(){o.closeTimePicker()}var M=!("touchstart"!==t.touchEvents.start||!Jl().passiveListener)&&{passive:!0,capture:!1};g.find(".calendar-prev-month-button").on("click",C),g.find(".calendar-next-month-button").on("click",k),g.find(".calendar-prev-year-button").on("click",E),g.find(".calendar-next-year-button").on("click",S),o.params.monthPicker&&(g.find(".current-month-value").on("click",T),g.on("click",".calendar-month-picker-item",$)),o.params.yearPicker&&(g.find(".current-year-value").on("click",I),g.on("click",".calendar-year-picker-item",N)),o.hasTimePicker&&(g.find(".calendar-time-selector a").on("click",O),g.on("click",".calendar-time-picker-close",A)),v.on("click",x),o.params.touchMove&&(v.on(t.touchEvents.start,b,M),t.on("touchmove:active",y),t.on("touchend:passive",w)),o.detachCalendarEvents=function(){g.find(".calendar-prev-month-button").off("click",C),g.find(".calendar-next-month-button").off("click",k),g.find(".calendar-prev-year-button").off("click",E),g.find(".calendar-next-year-button").off("click",S),o.params.monthPicker&&(g.find(".current-month-value").off("click",T),g.off("click",".calendar-month-picker-item",$)),o.params.yearPicker&&(g.find(".current-year-value").off("click",I),g.off("click",".calendar-year-picker-item",N)),o.hasTimePicker&&(g.find(".calendar-time-selector a").off("click",O),g.off("click",".calendar-time-picker-close",A)),v.off("click",x),o.params.touchMove&&(v.off(t.touchEvents.start,b,M),t.off("touchmove:active",y),t.off("touchend:passive",w))}},o.init(),o||Ef(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Tf(t,n);var a,s,o,i=r.prototype;return i.getIntlNames=function(){for(var e,t,n,r=this.params.locale,a=[],s=[],o=[],i=[],l=new Intl.DateTimeFormat(r,{month:"long"}),u=new Intl.DateTimeFormat(r,{month:"short"}),c=new Intl.DateTimeFormat(r,{weekday:"long"}),p=new Intl.DateTimeFormat(r,{weekday:"short"}),d=0;d<24;d+=1){var h=(new Date).setMonth(d,1),f=this.yearFormatter(h);e&&f!==e&&(t&&(n=!0),t=!0,e=f),e||(e=f),t&&e===f&&!n&&(a.push(l.format(h)),s.push(u.format(h)))}for(var m=(new Date).getDay(),g=0;g<7;g+=1){var v=(new Date).getTime()+24*(g-m)*60*60*1e3;o.push(c.format(v)),i.push(p.format(v))}return{monthNamesIntl:a,monthNamesShortIntl:s,dayNamesIntl:o,dayNamesShortIntl:i}},i.normalizeDate=function(e){var t=new Date(e);return this.hasTimePicker?new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()):new Date(t.getFullYear(),t.getMonth(),t.getDate())},i.normalizeValues=function(e){var t=this,n=[];return e&&Array.isArray(e)&&(n=e.map((function(e){return t.normalizeDate(e)}))),n},i.initInput=function(){var e=this;e.$inputEl&&e.params.inputReadOnly&&e.$inputEl.prop("readOnly",!0)},i.isPopover=function(){var e=this,t=e.app,n=e.modal,r=e.params,a=Zl();if("sheet"===r.openIn)return!1;if(n&&"popover"!==n.type)return!1;if(!e.inline&&e.inputEl){if("popover"===r.openIn)return!0;if(a.ios)return!!a.ipad;if(t.width>=768)return!0;if(a.desktop&&"aurora"===t.theme)return!0}return!1},i.formatDate=function(e){var t=this,n=new Date(e),r=n.getFullYear(),a=n.getMonth(),s=a+1,o=n.getDate(),i=n.getDay(),l=t.monthNames,u=t.monthNamesShort,c=t.dayNames,p=t.dayNamesShort,d=t.params,h=d.dateFormat,f=d.locale;function m(e){return e<10?"0"+e:e}if("string"==typeof h){var g={yyyy:r,yy:String(r).substring(2),mm:m(s),m:s,MM:l[a],M:u[a],dd:m(o),d:o,DD:c[i],D:p[i]};if(t.params.timePicker){var v=n.getHours(),b=n.getMinutes(),y=n.getSeconds(),w=v;v>12&&(w=v-12),0===v&&(w=12);var x=v>=12&&0!==v?"pm":"am";Object.assign(g,{HH:m(v),H:v,hh:m(w),h:w,ss:m(y),s:y,":mm":m(b),":m":b,a:x,A:x.toUpperCase()})}var k=new RegExp(Object.keys(g).map((function(e){return"("+e+")"})).join("|"),"g");return h.replace(k,(function(e){return e in g?g[e]:e}))}return"function"==typeof h?h(n):new Intl.DateTimeFormat(f,h).format(n)},i.formatValue=function(){var e=this,t=e.value;return e.params.formatValue?e.params.formatValue.call(e,t):t.map((function(t){return e.formatDate(t)})).join(e.params.rangePicker?" - ":", ")},i.addValue=function(e){var t=this,n=t.params,r=n.multiple,a=n.rangePicker,s=n.rangePickerMinDays,o=n.rangePickerMaxDays;if(r){var i;t.value||(t.value=[]);for(var l=0;l<t.value.length;l+=1)new Date(e).getTime()===new Date(t.value[l]).getTime()&&(i=l);void 0===i?t.value.push(e):t.value.splice(i,1),t.updateValue()}else a?(t.value||(t.value=[]),2!==t.value.length&&0!==t.value.length||(t.value=[]),0===t.value.length||Math.abs(t.value[0].getTime()-e.getTime())>=60*(s-1)*60*24*1e3&&(0===o||Math.abs(t.value[0].getTime()-e.getTime())<=60*(o-1)*60*24*1e3)?t.value.push(e):t.value=[],t.value.sort((function(e,t){return e-t})),t.updateValue()):(t.value=[e],t.updateValue())},i.setValue=function(e){var t=this,n=t.value;if(Array.isArray(n)&&Array.isArray(e)&&n.length===e.length){var r=!0;if(n.forEach((function(t,n){t!==e[n]&&(r=!1)})),r)return}t.value=e,t.updateValue()},i.getValue=function(){return this.value},i.updateValue=function(e){var t,n,r=this,a=r.$el,s=r.$wrapperEl,o=r.$inputEl,i=r.value,l=r.params;if(a&&a.length>0)if(s.find(".calendar-day-selected").removeClass("calendar-day-selected calendar-day-selected-range calendar-day-selected-left calendar-day-selected-right"),l.rangePicker&&2===i.length){var u=new Date(i[0]).getTime(),c=new Date(i[1]).getTime();for(t=u;t<=c;t+=864e5){n=new Date(t);var p="calendar-day-selected";u!==c&&(t!==u&&t!==c&&(p+=" calendar-day-selected-range"),t===u&&(p+=" calendar-day-selected-left"),t===c&&(p+=" calendar-day-selected-right")),s.find('.calendar-day[data-date="'+n.getFullYear()+"-"+n.getMonth()+"-"+n.getDate()+'"]').addClass(p)}n=new Date(u),s.find('.calendar-day[data-date="'+n.getFullYear()+"-"+n.getMonth()+"-"+n.getDate()+'"]').removeClass("calendar-day-selected-range").addClass("calendar-day-selected calendar-day-selected-left"),n=new Date(c),s.find('.calendar-day[data-date="'+n.getFullYear()+"-"+n.getMonth()+"-"+n.getDate()+'"]').removeClass("calendar-day-selected-range").addClass("calendar-day-selected calendar-day-selected-right")}else for(t=0;t<r.value.length;t+=1)n=new Date(i[t]),s.find('.calendar-day[data-date="'+n.getFullYear()+"-"+n.getMonth()+"-"+n.getDate()+'"]').addClass("calendar-day-selected");if(e||r.emit("local::change calendarChange",r,i),a&&a.length>0&&r.hasTimePicker&&a.find(".calendar-time-selector a").text(i&&i.length?r.timeSelectorFormatter(i[0]):r.params.timePickerPlaceholder),o&&o.length||l.header){var d=r.formatValue(i);l.header&&a&&a.length&&a.find(".calendar-selected-date").text(d),o&&o.length&&!e&&(o.val(d),o.trigger("change"))}},i.updateCurrentMonthYear=function(e){var t,n,r=this,a=r.$months,s=r.$el,o=r.monthNames;void 0===e?(r.currentMonth=parseInt(a.eq(1).attr("data-month"),10),r.currentYear=parseInt(a.eq(1).attr("data-year"),10),t=a.eq(1).attr("data-locale-month"),n=a.eq(1).attr("data-locale-year")):(r.currentMonth=parseInt(a.eq("next"===e?a.length-1:0).attr("data-month"),10),r.currentYear=parseInt(a.eq("next"===e?a.length-1:0).attr("data-year"),10),t=a.eq("next"===e?a.length-1:0).attr("data-locale-month"),n=a.eq("next"===e?a.length-1:0).attr("data-locale-year")),s.find(".current-month-value").text(o[t]),s.find(".current-year-value").text(n)},i.update=function(){var e=this,t=e.currentYear,n=e.currentMonth,r=e.$wrapperEl,a=new Date(t,n),s=e.renderMonth(a,"prev"),o=e.renderMonth(a),i=e.renderMonth(a,"next");r.transition(0).html(""+s+o+i).transform("translate3d(0,0,0)"),e.$months=r.find(".calendar-month"),e.monthsTranslate=0,e.setMonthsTranslate(),e.$months.each((function(t){e.emit("local::monthAdd calendarMonthAdd",t)}))},i.onMonthChangeStart=function(e){var t=this,n=t.$months,r=t.currentYear,a=t.currentMonth;t.updateCurrentMonthYear(e),n.removeClass("calendar-month-current calendar-month-prev calendar-month-next");var s="next"===e?n.length-1:0;n.eq(s).addClass("calendar-month-current"),n.eq("next"===e?s-1:s+1).addClass("next"===e?"calendar-month-prev":"calendar-month-next"),t.emit("local::monthYearChangeStart calendarMonthYearChangeStart",t,r,a)},i.onMonthChangeEnd=function(e,t){var n,r,a,s=this,o=s.currentYear,i=s.currentMonth,l=s.$wrapperEl,u=s.monthsTranslate;s.animating=!1,l.find(".calendar-month:not(.calendar-month-prev):not(.calendar-month-current):not(.calendar-month-next)").remove(),void 0===e&&(e="next",t=!0),t?(l.find(".calendar-month-next, .calendar-month-prev").remove(),r=s.renderMonth(new Date(o,i),"prev"),n=s.renderMonth(new Date(o,i),"next")):a=s.renderMonth(new Date(o,i),e),("next"===e||t)&&l.append(a||n),("prev"===e||t)&&l.prepend(a||r);var c=l.find(".calendar-month");s.$months=c,s.setMonthsTranslate(u),s.emit("local::monthAdd calendarMonthAdd",s,"next"===e?c.eq(c.length-1)[0]:c.eq(0)[0]),s.emit("local::monthYearChangeEnd calendarMonthYearChangeEnd",s,o,i)},i.setMonthsTranslate=function(e){var t=this,n=t.$months,r=t.isHorizontal,a=t.inverter;e=e||t.monthsTranslate||0,void 0===t.monthsTranslate&&(t.monthsTranslate=e),n.removeClass("calendar-month-current calendar-month-prev calendar-month-next");var s=100*-(e+1)*a,o=100*-e*a,i=100*-(e-1)*a;n.eq(0).transform("translate3d("+(r?s:0)+"%, "+(r?0:s)+"%, 0)").addClass("calendar-month-prev"),n.eq(1).transform("translate3d("+(r?o:0)+"%, "+(r?0:o)+"%, 0)").addClass("calendar-month-current"),n.eq(2).transform("translate3d("+(r?i:0)+"%, "+(r?0:i)+"%, 0)").addClass("calendar-month-next")},i.nextMonth=function(e){var t=this,n=t.params,r=t.$wrapperEl,a=t.inverter,s=t.isHorizontal;void 0!==e&&"object"!=typeof e||(e="",n.animate||(e=0));var o=parseInt(t.$months.eq(t.$months.length-1).attr("data-month"),10),i=parseInt(t.$months.eq(t.$months.length-1).attr("data-year"),10),l=new Date(i,o).getTime(),u=!t.animating;if(n.maxDate&&l>new Date(n.maxDate).getTime())t.resetMonth();else{if(t.monthsTranslate-=1,o===t.currentMonth){var c=100*-t.monthsTranslate*a,p=Gc(t.renderMonth(l,"next")).transform("translate3d("+(s?c:0)+"%, "+(s?0:c)+"%, 0)").addClass("calendar-month-next");r.append(p[0]),t.$months=r.find(".calendar-month"),t.emit("local::monthAdd calendarMonthAdd",t.$months.eq(t.$months.length-1)[0])}t.animating=!0,t.onMonthChangeStart("next");var d=100*t.monthsTranslate*a;r.transition(e).transform("translate3d("+(s?d:0)+"%, "+(s?0:d)+"%, 0)"),u&&r.transitionEnd((function(){t.onMonthChangeEnd("next")})),n.animate||t.onMonthChangeEnd("next")}},i.prevMonth=function(e){var t=this,n=t.params,r=t.$wrapperEl,a=t.inverter,s=t.isHorizontal;void 0!==e&&"object"!=typeof e||(e="",n.animate||(e=0));var o=parseInt(t.$months.eq(0).attr("data-month"),10),i=parseInt(t.$months.eq(0).attr("data-year"),10),l=new Date(i,o+1,-1).getTime(),u=!t.animating;if(n.minDate){var c=new Date(n.minDate);if(l<(c=new Date(c.getFullYear(),c.getMonth(),1)).getTime())return void t.resetMonth()}if(t.monthsTranslate+=1,o===t.currentMonth){var p=100*-t.monthsTranslate*a,d=Gc(t.renderMonth(l,"prev")).transform("translate3d("+(s?p:0)+"%, "+(s?0:p)+"%, 0)").addClass("calendar-month-prev");r.prepend(d[0]),t.$months=r.find(".calendar-month"),t.emit("local::monthAdd calendarMonthAdd",t.$months.eq(0)[0])}t.animating=!0,t.onMonthChangeStart("prev");var h=100*t.monthsTranslate*a;r.transition(e).transform("translate3d("+(s?h:0)+"%, "+(s?0:h)+"%, 0)"),u&&r.transitionEnd((function(){t.onMonthChangeEnd("prev")})),n.animate||t.onMonthChangeEnd("prev")},i.resetMonth=function(e){void 0===e&&(e="");var t=this,n=t.$wrapperEl,r=t.inverter,a=t.isHorizontal,s=100*t.monthsTranslate*r;n.transition(e).transform("translate3d("+(a?s:0)+"%, "+(a?0:s)+"%, 0)")},i.setYearMonth=function(e,t,n){var r,a=this,s=a.params,o=a.isHorizontal,i=a.$wrapperEl,l=a.inverter;if(void 0===e&&(e=a.currentYear),void 0===t&&(t=a.currentMonth),void 0!==n&&"object"!=typeof n||(n="",s.animate||(n=0)),r=e<a.currentYear?new Date(e,t+1,-1).getTime():new Date(e,t).getTime(),s.maxDate&&r>new Date(s.maxDate).getTime())return!1;if(s.minDate){var u=new Date(s.minDate);if(r<(u=new Date(u.getFullYear(),u.getMonth(),1)).getTime())return!1}var c=new Date(a.currentYear,a.currentMonth).getTime(),p=r>c?"next":"prev",d=a.renderMonth(new Date(e,t));a.monthsTranslate=a.monthsTranslate||0;var h,f=a.monthsTranslate,m=!a.animating&&0!==n;r>c?(a.monthsTranslate-=1,a.animating||a.$months.eq(a.$months.length-1).remove(),i.append(d),a.$months=i.find(".calendar-month"),h=100*-(f-1)*l,a.$months.eq(a.$months.length-1).transform("translate3d("+(o?h:0)+"%, "+(o?0:h)+"%, 0)").addClass("calendar-month-next")):(a.monthsTranslate+=1,a.animating||a.$months.eq(0).remove(),i.prepend(d),a.$months=i.find(".calendar-month"),h=100*-(f+1)*l,a.$months.eq(0).transform("translate3d("+(o?h:0)+"%, "+(o?0:h)+"%, 0)").addClass("calendar-month-prev")),a.emit("local::monthAdd calendarMonthAdd","next"===p?a.$months.eq(a.$months.length-1)[0]:a.$months.eq(0)[0]),a.animating=!0,a.onMonthChangeStart(p);var g=100*a.monthsTranslate*l;i.transition(n).transform("translate3d("+(o?g:0)+"%, "+(o?0:g)+"%, 0)"),m&&i.transitionEnd((function(){a.onMonthChangeEnd(p,!0)})),s.animate&&0!==n||a.onMonthChangeEnd(p,!0)},i.nextYear=function(){this.setYearMonth(this.currentYear+1)},i.prevYear=function(){this.setYearMonth(this.currentYear-1)},i.dateInRange=function(e,t){var n,r=!1;if(!t)return!1;if(Array.isArray(t))for(n=0;n<t.length;n+=1)t[n].from||t[n].to?t[n].from&&t[n].to?e<=new Date(t[n].to).getTime()&&e>=new Date(t[n].from).getTime()&&(r=!0):t[n].from?e>=new Date(t[n].from).getTime()&&(r=!0):t[n].to&&e<=new Date(t[n].to).getTime()&&(r=!0):t[n].date?e===new Date(t[n].date).getTime()&&(r=!0):e===new Date(t[n]).getTime()&&(r=!0);else t.from||t.to?t.from&&t.to?e<=new Date(t.to).getTime()&&e>=new Date(t.from).getTime()&&(r=!0):t.from?e>=new Date(t.from).getTime()&&(r=!0):t.to&&e<=new Date(t.to).getTime()&&(r=!0):t.date?r=e===new Date(t.date).getTime():"function"==typeof t&&(r=t(new Date(e)));return r},i.daysInMonth=function(e){var t=new Date(e);return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()},i.renderMonths=function(e){var t=this;return t.params.renderMonths?t.params.renderMonths.call(t,e):Od("div",{class:"calendar-months-wrapper"},t.renderMonth(e,"prev"),t.renderMonth(e),t.renderMonth(e,"next"))},i.renderMonth=function(e,t){var n=this,r=n.params,a=n.value;if(r.renderMonth)return r.renderMonth.call(n,e,t);var s=new Date(e),o=s.getFullYear(),i=s.getMonth(),l=n.monthNames.indexOf(n.monthFormatter(s));l<0&&(l=i);var u=n.yearFormatter(s);"next"===t&&(s=11===i?new Date(o+1,0):new Date(o,i+1,1)),"prev"===t&&(s=0===i?new Date(o-1,11):new Date(o,i-1,1)),"next"!==t&&"prev"!==t||(i=s.getMonth(),o=s.getFullYear(),(l=n.monthNames.indexOf(n.monthFormatter(s)))<0&&(l=i),u=n.yearFormatter(s));var c,p,d=[],h=(new Date).setHours(0,0,0,0),f=r.minDate?new Date(r.minDate).getTime():null,m=r.maxDate?new Date(r.maxDate).getTime():null,g=n.daysInMonth(new Date(s.getFullYear(),s.getMonth()).getTime()-864e6),v=n.daysInMonth(s),b=6===r.firstDay?0:1,y="",w=r.firstDay-1+0,x=new Date(s.getFullYear(),s.getMonth()).getDay();if(0===x&&(x=7),a&&a.length)for(var k=0;k<a.length;k+=1)d.push(new Date(a[k]).setHours(0,0,0,0));for(var C=1;C<=6;C+=1){for(var S="",E=function(e){var t=void 0,a=(w+=1)-x,s="";1===C&&1===e&&a>b&&1!==r.firstDay&&(a=(w-=7)-x);var l=e-1+r.firstDay>6?e-1-7+r.firstDay:e-1+r.firstDay;a<0?(a=g+a+1,s+=" calendar-day-prev",t=new Date(i-1<0?o-1:o,i-1<0?11:i-1,a).getTime()):(a+=1)>v?(a-=v,s+=" calendar-day-next",t=new Date(i+1>11?o+1:o,i+1>11?0:i+1,a).getTime()):t=new Date(o,i,a).getTime(),t===h&&(s+=" calendar-day-today"),r.rangePicker&&2===d.length?(t>=d[0]&&t<=d[1]&&(s+=" calendar-day-selected"),d[0]!==d[1]&&(t>d[0]&&t<d[1]&&(s+=" calendar-day-selected-range"),t===d[0]&&(s+=" calendar-day-selected-left"),t===d[1]&&(s+=" calendar-day-selected-right"))):d.indexOf(t)>=0&&(s+=" calendar-day-selected"),r.weekendDays.indexOf(l)>=0&&(s+=" calendar-day-weekend");var u="";if(p=!1,r.events&&n.dateInRange(t,r.events)&&(p=!0),p&&(s+=" calendar-day-has-events",u='\n            <span class="calendar-day-events">\n              <span class="calendar-day-event"></span>\n            </span>\n          ',Array.isArray(r.events))){var y=[];r.events.forEach((function(e){var r=e.color||"";y.indexOf(r)<0&&n.dateInRange(t,e)&&y.push(r)})),u='\n              <span class="calendar-day-events">\n                '+y.map((function(e){return('\n                  <span class="calendar-day-event" style="'+(e?"background-color: "+e:"")+'"></span>\n                ').trim()})).join("")+"\n              </span>\n            "}if(r.rangesClasses)for(var k=0;k<r.rangesClasses.length;k+=1)n.dateInRange(t,r.rangesClasses[k].range)&&(s+=" "+r.rangesClasses[k].cssClass);c=!1,(f&&t<f||m&&t>m)&&(c=!0),r.disabled&&n.dateInRange(t,r.disabled)&&(c=!0),c&&(s+=" calendar-day-disabled");var E=(t=new Date(t)).getFullYear(),T=t.getMonth(),$=n.dayFormatter(t);S+=('\n          <div data-year="'+E+'" data-month="'+T+'" data-day="'+a+'" class="calendar-day'+s+'" data-date="'+E+"-"+T+"-"+a+'">\n            <span class="calendar-day-number">'+$+u+"</span>\n          </div>").trim()},T=1;T<=7;T+=1)E(T);y+='<div class="calendar-row">'+S+"</div>"}return y='<div class="calendar-month" data-year="'+o+'" data-month="'+i+'" data-locale-year="'+u+'" data-locale-month="'+l+'">'+y+"</div>"},i.renderWeekHeader=function(){var e=this;if(e.params.renderWeekHeader)return e.params.renderWeekHeader.call(e);for(var t=e.params,n="",r=0;r<7;r+=1){var a=r+t.firstDay>6?r-7+t.firstDay:r+t.firstDay;n+='<div class="calendar-week-day">'+e.dayNamesShort[a]+"</div>"}return Od("div",{class:"calendar-week-header"},n)},i.renderMonthSelector=function(){var e=this;return e.params.renderMonthSelector?e.params.renderMonthSelector.call(e):Od("div",{class:"calendar-month-selector"},Od("a",{class:"link icon-only calendar-prev-month-button"},Od("i",{class:"icon icon-prev"})),e.params.monthPicker?Od("a",{class:"current-month-value link"}):Od("span",{class:"current-month-value"}),Od("a",{class:"link icon-only calendar-next-month-button"},Od("i",{class:"icon icon-next"})))},i.renderMonthPicker=function(){var e=parseInt(this.$el.find(".calendar-month-current").attr("data-locale-month"),10);return Od("div",{class:"calendar-month-picker"},this.monthNames.map((function(t,n){return Od("div",{class:"calendar-month-picker-item "+(e===n?"calendar-month-picker-item-current":"")},Od("span",null,t))})))},i.renderYearSelector=function(){var e=this;return e.params.renderYearSelector?e.params.renderYearSelector.call(e):Od("div",{class:"calendar-year-selector"},Od("a",{class:"link icon-only calendar-prev-year-button"},Od("i",{class:"icon icon-prev"})),e.params.yearPicker?Od("a",{class:"current-year-value link"}):Od("span",{class:"current-year-value"}),Od("a",{class:"link icon-only calendar-next-year-button"},Od("i",{class:"icon icon-next"})))},i.renderYearPicker=function(){var e=this,t=e.currentYear,n=e.params.yearPickerMin||(new Date).getFullYear()-100;e.params.minDate&&(n=Math.max(n,new Date(e.params.minDate).getFullYear()));var r=e.params.yearPickerMax||(new Date).getFullYear()+100;e.params.maxDate&&(r=Math.min(r,new Date(e.params.maxDate).getFullYear()));for(var a=[],s=n;s<=r;s+=1)a.push(s);return Od("div",{class:"calendar-year-picker"},a.map((function(n){return Od("div",{"data-year":n,class:"calendar-year-picker-item "+(n===t?"calendar-year-picker-item-current":"")},Od("span",null,e.yearFormatter((new Date).setFullYear(n))))})))},i.renderTimeSelector=function(){var e,t=this,n=t.value&&t.value[0];return n&&(e=t.timeSelectorFormatter(n)),Od("div",{class:"calendar-time-selector"},Od("a",{class:"link"},e||t.params.timePickerPlaceholder))},i.renderHeader=function(){var e=this;return e.params.renderHeader?e.params.renderHeader.call(e):Od("div",{class:"calendar-header"},Od("div",{class:"calendar-selected-date"},e.params.headerPlaceholder))},i.renderFooter=function(){var e=this,t=e.app;return e.params.renderFooter?e.params.renderFooter.call(e):Od("div",{class:"calendar-footer"},Od("a",{class:("md"===t.theme?"button":"link")+" calendar-close sheet-close popover-close"},e.params.toolbarCloseText))},i.renderToolbar=function(){var e=this;return e.params.renderToolbar?e.params.renderToolbar.call(e,e):Od("div",{class:"toolbar toolbar-top no-shadow"},Od("div",{class:"toolbar-inner"},e.params.monthSelector?e.renderMonthSelector():"",e.params.yearSelector?e.renderYearSelector():""))},i.renderInline=function(){var e=this,t=e.params,n=t.cssClass,r=t.toolbar,a=t.header,s=t.footer,o=t.rangePicker,i=t.weekHeader,l=e.value,u=e.hasTimePicker,c=l&&l.length?l[0]:(new Date).setHours(0,0,0);return Od("div",{class:"calendar calendar-inline "+(o?"calendar-range":"")+" "+(n||"")},a&&e.renderHeader(),r&&e.renderToolbar(),i&&e.renderWeekHeader(),Od("div",{class:"calendar-months"},e.renderMonths(c)),u&&e.renderTimeSelector(),s&&e.renderFooter())},i.renderCustomModal=function(){var e=this,t=e.params,n=t.cssClass,r=t.toolbar,a=t.header,s=t.footer,o=t.rangePicker,i=t.weekHeader,l=e.value,u=e.hasTimePicker,c=l&&l.length?l[0]:(new Date).setHours(0,0,0);return Od("div",{class:"calendar calendar-modal "+(o?"calendar-range":"")+" "+(n||"")},a&&e.renderHeader(),r&&e.renderToolbar(),i&&e.renderWeekHeader(),Od("div",{class:"calendar-months"},e.renderMonths(c)),u&&e.renderTimeSelector(),s&&e.renderFooter())},i.renderSheet=function(){var e=this,t=e.params,n=t.cssClass,r=t.toolbar,a=t.header,s=t.footer,o=t.rangePicker,i=t.weekHeader,l=e.value,u=e.hasTimePicker,c=l&&l.length?l[0]:(new Date).setHours(0,0,0);return Od("div",{class:"sheet-modal calendar calendar-sheet "+(o?"calendar-range":"")+" "+(n||"")},a&&e.renderHeader(),r&&e.renderToolbar(),i&&e.renderWeekHeader(),Od("div",{class:"sheet-modal-inner calendar-months"},e.renderMonths(c)),u&&e.renderTimeSelector(),s&&e.renderFooter())},i.renderPopover=function(){var e=this,t=e.params,n=t.cssClass,r=t.toolbar,a=t.header,s=t.footer,o=t.rangePicker,i=t.weekHeader,l=e.value,u=e.hasTimePicker,c=l&&l.length?l[0]:(new Date).setHours(0,0,0);return Od("div",{class:"popover calendar-popover"},Od("div",{class:"popover-inner"},Od("div",{class:"calendar "+(o?"calendar-range":"")+" "+(n||"")},a&&e.renderHeader(),r&&e.renderToolbar(),i&&e.renderWeekHeader(),Od("div",{class:"calendar-months"},e.renderMonths(c)),u&&e.renderTimeSelector(),s&&e.renderFooter())))},i.render=function(){var e=this,t=e.params;if(t.render)return t.render.call(e);if(!e.inline){var n=t.openIn;return"auto"===n&&(n=e.isPopover()?"popover":"sheet"),"popover"===n?e.renderPopover():"sheet"===n?e.renderSheet():e.renderCustomModal()}return e.renderInline()},i.openTimePicker=function(){var e=this,t=e.$el,n=e.app,r=e.is12HoursFormat;if(t&&t.length){t.append('<div class="calendar-time-picker"></div>');for(var a,s=[],o=[],i=r?12:23,l=r?1:0;l<=i;l+=1)s.push(l);for(var u=0;u<=59;u+=1)o.push(u);a=e.value&&e.value.length?[e.value[0].getHours(),e.value[0].getMinutes()]:[(new Date).getHours(),(new Date).getMinutes()],r&&(a.push(a[0]<12?"AM":"PM"),a[0]>12&&(a[0]-=12),0===a[0]&&(a[0]=12)),e.timePickerInstance=n.picker.create({containerEl:t.find(".calendar-time-picker"),value:a,toolbar:!0,rotateEffect:!1,toolbarCloseText:e.params.toolbarCloseText,cols:[{values:s},{divider:!0,content:":"},{values:o,displayValues:o.map((function(e){return e<10?"0"+e:e}))}].concat(r?[{values:["AM","PM"]}]:[])}),e.timePickerInstance.$el.find(".toolbar a").removeClass("sheet-close popover-close").addClass("calendar-time-picker-close")}},i.closeTimePicker=function(){var e=this,t=e.is12HoursFormat;if(e.timePickerInstance){var n=e.timePickerInstance.value,r=parseInt(n[0],10),a=parseInt(n[1],10),s=e.timePickerInstance.value[2];t&&("AM"===s&&12===r?r=0:"PM"===s&&12!==r&&(r+=12));var o=e.value&&e.value.length&&e.value[0];o?(o=new Date(o)).setHours(r,a):(o=new Date).setHours(r,a,0,0),e.setValue([o]),e.timePickerInstance.close(),e.timePickerInstance.destroy(),delete e.timePickerInstance}e.$el&&e.$el.length&&e.$el.find(".calendar-time-picker").remove()},i.onOpen=function(){var e=this,t=e.initialized,n=e.$el,r=e.app,a=e.$inputEl,s=e.inline,o=e.value,i=e.params;e.closing=!1,e.opened=!0,e.opening=!0,e.attachCalendarEvents();var l=!o&&i.value;t?o&&e.setValue(o,0):o?e.setValue(o,0):i.value&&e.setValue(e.normalizeValues(i.value),0),e.updateCurrentMonthYear(),e.monthsTranslate=0,e.setMonthsTranslate(),l?e.updateValue():i.header&&o&&e.updateValue(!0),!s&&a&&a.length&&"md"===r.theme&&a.trigger("focus"),e.initialized=!0,e.$months.each((function(t){e.emit("local::monthAdd calendarMonthAdd",t)})),n&&n.trigger("calendar:open"),a&&a.trigger("calendar:open"),e.emit("local::open calendarOpen",e)},i.onOpened=function(){var e=this;e.opening=!1,e.$el&&e.$el.trigger("calendar:opened"),e.$inputEl&&e.$inputEl.trigger("calendar:opened"),e.emit("local::opened calendarOpened",e)},i.onClose=function(){var e=this,t=e.app;if(e.opening=!1,e.closing=!0,e.$inputEl)if("md"===t.theme)e.$inputEl.trigger("blur");else{var n=e.$inputEl.attr("validate"),r=e.$inputEl.attr("required");n&&r&&t.input.validate(e.$inputEl)}e.detachCalendarEvents&&e.detachCalendarEvents(),e.$el&&e.$el.trigger("calendar:close"),e.$inputEl&&e.$inputEl.trigger("calendar:close"),e.emit("local::close calendarClose",e)},i.onClosed=function(){var e=this;e.opened=!1,e.closing=!1,e.inline||_l((function(){e.modal&&e.modal.el&&e.modal.destroy&&(e.params.routableModals||e.modal.destroy()),delete e.modal})),e.timePickerInstance&&(e.timePickerInstance.destroy&&e.timePickerInstance.destroy(),delete e.timePickerInstance),e.$el&&e.$el.trigger("calendar:closed"),e.$inputEl&&e.$inputEl.trigger("calendar:closed"),e.emit("local::closed calendarClosed",e)},i.open=function(){var e=this,t=e.app,n=e.opened,r=e.inline,a=e.$inputEl,s=e.params;if(!n){if(r)return e.$el=Gc(e.render()),e.$el[0].f7Calendar=e,e.$wrapperEl=e.$el.find(".calendar-months-wrapper"),e.$months=e.$wrapperEl.find(".calendar-month"),e.$containerEl.append(e.$el),e.onOpen(),void e.onOpened();var o=s.openIn;"auto"===o&&(o=e.isPopover()?"popover":"sheet");var i,l=e.render(),u={targetEl:a,scrollToEl:s.scrollToInput?a:void 0,content:l,backdrop:!0===s.backdrop||"popover"===o&&!1!==t.params.popover.backdrop&&!1!==s.backdrop,closeByBackdropClick:s.closeByBackdropClick,on:{open:function(){var t=this;e.modal=t,e.$el="popover"===o?t.$el.find(".calendar"):t.$el,e.$wrapperEl=e.$el.find(".calendar-months-wrapper"),e.$months=e.$wrapperEl.find(".calendar-month"),e.$el[0].f7Calendar=e,"customModal"===o&&Gc(e.$el).find(".calendar-close").once("click",(function(){e.close()})),e.onOpen()},opened:function(){e.onOpened()},close:function(){e.onClose()},closed:function(){e.onClosed()}}};if("sheet"===o&&(u.push=s.sheetPush,u.swipeToClose=s.sheetSwipeToClose),s.routableModals&&e.view)e.view.router.navigate({url:e.url,route:(i={path:e.url},i[o]=u,i)});else e.modal=t[o].create(u),e.modal.open()}},i.close=function(){var e=this,t=e.opened,n=e.inline;if(t)return n?(e.onClose(),void e.onClosed()):void(e.params.routableModals&&e.view?e.view.router.back():e.modal.close())},i.init=function(){var e=this;if(e.initInput(),e.inline)return e.open(),void e.emit("local::init calendarInit",e);!e.initialized&&e.params.value&&e.setValue(e.normalizeValues(e.params.value)),e.$inputEl&&e.attachInputEvents(),e.params.closeByOutsideClick&&e.attachHtmlEvents(),e.emit("local::init calendarInit",e)},i.destroy=function(){var e=this;if(!e.destroyed){var t=e.$el;e.emit("local::beforeDestroy calendarBeforeDestroy",e),t&&t.trigger("calendar:beforedestroy"),e.close(),e.$inputEl&&e.detachInputEvents(),e.params.closeByOutsideClick&&e.detachHtmlEvents(),e.timePickerInstance&&(e.timePickerInstance.destroy&&e.timePickerInstance.destroy(),delete e.timePickerInstance),t&&t.length&&delete e.$el[0].f7Calendar,Ol(e),e.destroyed=!0}},a=r,s=[{key:"view",get:function(){var e,t=this.$inputEl,n=this.app,r=this.params;return r.view?e=r.view:t&&(e=t.parents(".view").length&&t.parents(".view")[0].f7View),e||(e=n.views.main),e}}],s&&Sf(a.prototype,s),o&&Sf(a,o),r}(au),If=$f,Nf={name:"calendar",static:{Calendar:If},create:function(){var e=this;e.calendar=Yc({defaultSelector:".calendar",constructor:If,app:e,domProp:"f7Calendar"}),e.calendar.close=function(e){void 0===e&&(e=".calendar");var t=Gc(e);if(0!==t.length){var n=t[0].f7Calendar;!n||n&&!n.opened||n.close()}}},params:{calendar:{dateFormat:void 0,monthNames:"auto",monthNamesShort:"auto",dayNames:"auto",dayNamesShort:"auto",locale:void 0,firstDay:1,weekendDays:[0,6],multiple:!1,rangePicker:!1,rangePickerMinDays:1,rangePickerMaxDays:0,direction:"horizontal",minDate:null,maxDate:null,disabled:null,events:null,rangesClasses:null,touchMove:!0,animate:!0,closeOnSelect:!1,monthSelector:!0,monthPicker:!0,yearSelector:!0,yearPicker:!0,yearPickerMin:void 0,yearPickerMax:void 0,timePicker:!1,timePickerFormat:{hour:"numeric",minute:"numeric"},timePickerPlaceholder:"Select time",weekHeader:!0,value:null,containerEl:null,openIn:"auto",sheetPush:!1,sheetSwipeToClose:void 0,formatValue:null,inputEl:null,inputReadOnly:!0,closeByOutsideClick:!0,scrollToInput:!0,header:!1,headerPlaceholder:"Select date",toolbar:!0,toolbarCloseText:"Done",footer:!1,cssClass:null,routableModals:!1,view:null,url:"date/",backdrop:null,closeByBackdropClick:!0,renderWeekHeader:null,renderMonths:null,renderMonth:null,renderMonthSelector:null,renderYearSelector:null,renderHeader:null,renderFooter:null,renderToolbar:null,renderInline:null,renderPopover:null,renderSheet:null,render:null}}};function Of(e,t){var n=this,r=n.app,a=Gc(e),s=a.index(),o=n.cols[s];if(!o.divider){var i,l,u,c,p;o.$el=a,o.el=a[0],o.$itemsEl=o.$el.find(".picker-items"),o.items=o.$itemsEl.find(".picker-item"),o.replaceValues=function(e,t){o.detachEvents(),o.values=e,o.displayValues=t,o.$itemsEl.html(n.renderColumn(o,!0)),o.items=o.$itemsEl.find(".picker-item"),o.calcSize(),o.setValue(o.values[0],0,!0),o.attachEvents()},o.calcSize=function(){n.params.rotateEffect&&(o.$el.removeClass("picker-column-absolute"),o.width||o.$el.css({width:""}));var e=0,t=o.$el[0].offsetHeight;i=o.items[0].offsetHeight,l=i*o.items.length,u=t/2-l+i/2,c=t/2-i/2,o.width&&(e=o.width,parseInt(e,10)===e&&(e+="px"),o.$el.css({width:e})),n.params.rotateEffect&&(o.width||(o.items.each((function(t){var n=Gc(t).children("span");e=Math.max(e,n[0].offsetWidth)})),o.$el.css({width:e+2+"px"})),o.$el.addClass("picker-column-absolute"))},o.setValue=function(e,t,r){void 0===t&&(t="");var a=o.$itemsEl.find('.picker-item[data-picker-value="'+e+'"]').index();if(void 0!==a&&-1!==a){var s=-a*i+c;o.$itemsEl.transition(t),o.$itemsEl.transform("translate3d(0,"+s+"px,0)"),n.params.updateValuesOnMomentum&&o.activeIndex&&o.activeIndex!==a&&(cancelAnimationFrame(p),o.$itemsEl.transitionEnd((function(){cancelAnimationFrame(p)})),E()),o.updateItems(a,s,t,r)}},o.updateItems=function(e,t,r,a){void 0===t&&(t=Ll(o.$itemsEl[0],"y")),void 0===e&&(e=-Math.round((t-c)/i)),e<0&&(e=0),e>=o.items.length&&(e=o.items.length-1);var s=o.activeIndex;o.activeIndex=e,o.$itemsEl.find(".picker-item-selected").removeClass("picker-item-selected"),o.items.transition(r);var l=o.items.eq(e).addClass("picker-item-selected").transform("");n.params.rotateEffect&&o.items.each((function(e){var r=Gc(e),a=(r.index()*i-(c-t))/i,s=Math.ceil(o.height/i/2)+1,l=-18*a;l>180&&(l=180),l<-180&&(l=-180),Math.abs(a)>s?r.addClass("picker-item-far"):r.removeClass("picker-item-far"),r.transform("translate3d(0, "+(-t+c)+"px, "+(n.needsOriginFix?-110:0)+"px) rotateX("+l+"deg)")})),(a||void 0===a)&&(o.value=l.attr("data-picker-value"),o.displayValue=o.displayValues?o.displayValues[e]:o.value,s!==e&&(o.onChange&&o.onChange(n,o.value,o.displayValue),n.updateValue()))};var d,h,f,m,g,v,b,y,w,x,k,C=!0,S=!!Jl().passiveListener&&{passive:!1,capture:!1};o.attachEvents=function(){o.$el.on(r.touchEvents.start,T,S),r.on("touchmove:active",$),r.on("touchend:passive",I),n.params.mousewheel&&o.$el.on("wheel",N),o.items.on("click",O)},o.detachEvents=function(){o.$el.off(r.touchEvents.start,T,S),r.off("touchmove:active",$),r.off("touchend:passive",I),n.params.mousewheel&&o.$el.off("wheel",N),o.items.off("click",O)},o.init=function(){o.calcSize(),o.$itemsEl.transform("translate3d(0,"+c+"px,0)").transition(0),0===s&&o.$el.addClass("picker-column-first"),s===n.cols.length-1&&o.$el.addClass("picker-column-last"),t&&o.updateItems(0,c,0),o.attachEvents()},o.destroy=function(){o.detachEvents()},o.init()}function E(){p=Al((function(){o.updateItems(void 0,void 0,0),E()}))}function T(e){h||d||(e.preventDefault(),d=!0,f="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,m=f,g=(new Date).getTime(),C=!0,v=Ll(o.$itemsEl[0],"y"),y=v)}function $(e){d&&(e.preventDefault(),C=!1,m="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,h||(cancelAnimationFrame(p),h=!0,v=Ll(o.$itemsEl[0],"y"),y=v,o.$itemsEl.transition(0)),b=void 0,(y=v+(m-f))<u&&(y=u-Math.pow(u-y,.8),b="min"),y>c&&(y=c+Math.pow(y-c,.8),b="max"),o.$itemsEl.transform("translate3d(0,"+y+"px,0)"),o.updateItems(void 0,y,0,n.params.updateValuesOnTouchmove),x=y-w||y,w=y)}function I(){if(!d||!h)return d=!1,void(h=!1);var e;d=!1,h=!1,o.$itemsEl.transition(""),b&&("min"===b?o.$itemsEl.transform("translate3d(0,"+u+"px,0)"):o.$itemsEl.transform("translate3d(0,"+c+"px,0)")),e=(new Date).getTime()-g>300?y:y+x*n.params.momentumRatio,e=Math.max(Math.min(e,c),u);var t=Math.round(Math.abs((e-c)/i));n.params.freeMode||(e=-t*i+c),o.$itemsEl.transform("translate3d(0,"+parseInt(e,10)+"px,0)"),o.updateItems(t,e,"",!0),n.params.updateValuesOnMomentum&&(E(),o.$itemsEl.transitionEnd((function(){cancelAnimationFrame(p)}))),setTimeout((function(){C=!0}),100)}function N(e){var t=e.deltaX,r=e.deltaY;Math.abs(t)>Math.abs(r)||(clearTimeout(k),e.preventDefault(),cancelAnimationFrame(p),v=Ll(o.$itemsEl[0],"y"),o.$itemsEl.transition(0),b=void 0,(y=v-r)<u&&(y=u,b="min"),y>c&&(y=c,b="max"),o.$itemsEl.transform("translate3d(0,"+y+"px,0)"),o.updateItems(void 0,y,0,n.params.updateValuesOnMousewheel),k=setTimeout((function(){o.$itemsEl.transition(""),b&&("min"===b?o.$itemsEl.transform("translate3d(0,"+u+"px,0)"):o.$itemsEl.transform("translate3d(0,"+c+"px,0)")),(new Date).getTime();var e=y;e=Math.max(Math.min(e,c),u);var t=Math.round(Math.abs((e-c)/i));n.params.freeMode||(e=-t*i+c),o.$itemsEl.transform("translate3d(0,"+parseInt(e,10)+"px,0)"),o.updateItems(t,e,"",!0)}),200))}function O(){if(C){cancelAnimationFrame(p);var e=Gc(this).attr("data-picker-value");o.setValue(e)}}}function Af(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _f(e,t){return _f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_f(e,t)}var Rf=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var a,s,o=Mf(r=e.call(this,n,[t])||this),i=Zl(),l=wl();if(o.params=Vl({},t.params.picker,n),o.params.containerEl&&0===(a=Gc(o.params.containerEl)).length)return o||Mf(r);o.params.inputEl&&(s=Gc(o.params.inputEl));var u=o.params.scrollToInput?s:void 0;if(o.params.scrollToEl){var c=Gc(o.params.scrollToEl);c.length>0&&(u=c)}function p(){o.resizeCols()}function d(){o.open()}function h(e){e.preventDefault()}Vl(o,{app:t,$containerEl:a,containerEl:a&&a[0],inline:a&&a.length>0,needsOriginFix:i.ios||l.navigator.userAgent.toLowerCase().indexOf("safari")>=0&&l.navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!i.android,cols:[],$inputEl:s,inputEl:s&&s[0],$scrollToEl:u,initialized:!1,opened:!1,url:o.params.url});var f=null;function m(e){f=e.target}function g(e){if(!o.destroyed&&o.params){var t=Gc(e.target);o.isPopover()||o.opened&&!o.closing&&(t.closest('[class*="backdrop"]').length||(s&&s.length>0?f===e.target&&t[0]!==s[0]&&0===t.closest(".sheet-modal").length&&o.close():0===Gc(e.target).closest(".sheet-modal").length&&o.close()))}}return Vl(o,{attachResizeEvent:function(){t.on("resize",p)},detachResizeEvent:function(){t.off("resize",p)},attachInputEvents:function(){o.$inputEl.on("click",d),o.params.inputReadOnly&&(o.$inputEl.on("focus mousedown",h),o.$inputEl[0]&&(o.$inputEl[0].f7ValidateReadonly=!0))},detachInputEvents:function(){o.$inputEl.off("click",d),o.params.inputReadOnly&&(o.$inputEl.off("focus mousedown",h),o.$inputEl[0]&&delete o.$inputEl[0].f7ValidateReadonly)},attachHtmlEvents:function(){t.on("click",g),t.on("touchstart",m)},detachHtmlEvents:function(){t.off("click",g),t.off("touchstart",m)}}),o.init(),o||Mf(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,_f(t,n);var a,s,o,i=r.prototype;return i.initInput=function(){var e=this;e.$inputEl&&e.params.inputReadOnly&&e.$inputEl.prop("readOnly",!0)},i.resizeCols=function(){var e=this;if(e.opened)for(var t=0;t<e.cols.length;t+=1)e.cols[t].divider||(e.cols[t].calcSize(),e.cols[t].setValue(e.cols[t].value,0,!1))},i.isPopover=function(){var e=this,t=e.app,n=e.modal,r=e.params,a=Zl();if("sheet"===r.openIn)return!1;if(n&&"popover"!==n.type)return!1;if(!e.inline&&e.inputEl){if("popover"===r.openIn)return!0;if(a.ios)return!!a.ipad;if(t.width>=768)return!0;if(a.desktop&&"aurora"===t.theme)return!0}return!1},i.formatValue=function(){var e=this,t=e.value,n=e.displayValue;return e.params.formatValue?e.params.formatValue.call(e,t,n):t.join(" ")},i.setValue=function(e,t){var n=this,r=0;if(0===n.cols.length)return n.value=e,void n.updateValue(e);for(var a=0;a<n.cols.length;a+=1)n.cols[a]&&!n.cols[a].divider&&(n.cols[a].setValue(e[r],t),r+=1)},i.getValue=function(){return this.value},i.updateValue=function(e){var t,n=this,r=e||[],a=[];if(0===n.cols.length)for(var s=n.params.cols.filter((function(e){return!e.divider})),o=0;o<s.length;o+=1)void 0!==(t=s[o]).displayValues&&void 0!==t.values&&-1!==t.values.indexOf(r[o])?a.push(t.displayValues[t.values.indexOf(r[o])]):a.push(r[o]);else for(var i=0;i<n.cols.length;i+=1)n.cols[i].divider||(r.push(n.cols[i].value),a.push(n.cols[i].displayValue));r.indexOf(void 0)>=0||(n.value=r,n.displayValue=a,n.emit("local::change pickerChange",n,n.value,n.displayValue),n.inputEl&&(n.$inputEl.val(n.formatValue()),n.$inputEl.trigger("change")))},i.initColumn=function(e,t){Of.call(this,e,t)},i.destroyColumn=function(e){var t=this,n=Gc(e).index();t.cols[n]&&t.cols[n].destroy&&t.cols[n].destroy()},i.renderToolbar=function(){var e=this;return e.params.renderToolbar?e.params.renderToolbar.call(e,e):Od("div",{class:"toolbar toolbar-top no-shadow"},Od("div",{class:"toolbar-inner"},Od("div",{class:"left"}),Od("div",{class:"right"},Od("a",{class:"link sheet-close popover-close"},e.params.toolbarCloseText))))},i.renderColumn=function(e,t){var n,r,a="picker-column "+(e.textAlign?"picker-column-"+e.textAlign:"")+" "+(e.cssClass||"");return e.divider?n='\n        <div class="'+a+' picker-column-divider">'+e.content+"</div>\n      ":(r=e.values.map((function(t,n){return'\n        <div class="picker-item" data-picker-value="'+t+'">\n          <span>'+(e.displayValues?e.displayValues[n]:t)+"</span>\n        </div>\n      "})).join(""),n='\n        <div class="'+a+'">\n          <div class="picker-items">'+r+"</div>\n        </div>\n      "),t?r.trim():n.trim()},i.renderInline=function(){var e=this,t=e.params,n=t.rotateEffect,r=t.cssClass,a=t.toolbar,s=Od("div",{class:"picker picker-inline "+(n?"picker-3d":"")+" "+(r||"")},a&&e.renderToolbar(),Od("div",{class:"picker-columns"},e.cols.map((function(t){return e.renderColumn(t)})),Od("div",{class:"picker-center-highlight"})));return s},i.renderSheet=function(){var e=this,t=e.params,n=t.rotateEffect,r=t.cssClass,a=t.toolbar,s=Od("div",{class:"sheet-modal picker picker-sheet "+(n?"picker-3d":"")+" "+(r||"")},a&&e.renderToolbar(),Od("div",{class:"sheet-modal-inner picker-columns"},e.cols.map((function(t){return e.renderColumn(t)})),Od("div",{class:"picker-center-highlight"})));return s},i.renderPopover=function(){var e=this,t=e.params,n=t.rotateEffect,r=t.cssClass,a=t.toolbar,s=Od("div",{class:"popover picker-popover"},Od("div",{class:"popover-inner"},Od("div",{class:"picker "+(n?"picker-3d":"")+" "+(r||"")},a&&e.renderToolbar(),Od("div",{class:"picker-columns"},e.cols.map((function(t){return e.renderColumn(t)})),Od("div",{class:"picker-center-highlight"})))));return s},i.render=function(){var e=this;return e.params.render?e.params.render.call(e):e.inline?e.renderInline():e.isPopover()?e.renderPopover():e.renderSheet()},i.onOpen=function(){var e=this,t=e.initialized,n=e.$el,r=e.app,a=e.$inputEl,s=e.inline,o=e.value,i=e.params;e.opened=!0,e.closing=!1,e.opening=!0,e.attachResizeEvent(),n.find(".picker-column").each((function(n){var r=!0;(!t&&i.value||t&&o)&&(r=!1),e.initColumn(n,r)})),t?o&&e.setValue(o,0):o?e.setValue(o,0):i.value&&e.setValue(i.value,0),!s&&a&&a.length&&"md"===r.theme&&a.trigger("focus"),e.initialized=!0,n&&n.trigger("picker:open"),a&&a.trigger("picker:open"),e.emit("local::open pickerOpen",e)},i.onOpened=function(){var e=this;e.opening=!1,e.$el&&e.$el.trigger("picker:opened"),e.$inputEl&&e.$inputEl.trigger("picker:opened"),e.emit("local::opened pickerOpened",e)},i.onClose=function(){var e=this,t=e.app;if(e.opening=!1,e.closing=!0,e.detachResizeEvent(),e.cols.forEach((function(e){e.destroy&&e.destroy()})),e.$inputEl)if("md"===t.theme)e.$inputEl.trigger("blur");else{var n=e.$inputEl.attr("validate"),r=e.$inputEl.attr("required");n&&r&&t.input.validate(e.$inputEl)}e.$el&&e.$el.trigger("picker:close"),e.$inputEl&&e.$inputEl.trigger("picker:close"),e.emit("local::close pickerClose",e)},i.onClosed=function(){var e=this;e.opened=!1,e.closing=!1,e.inline||_l((function(){e.modal&&e.modal.el&&e.modal.destroy&&(e.params.routableModals||e.modal.destroy()),delete e.modal})),e.$el&&e.$el.trigger("picker:closed"),e.$inputEl&&e.$inputEl.trigger("picker:closed"),e.emit("local::closed pickerClosed",e)},i.open=function(){var e=this,t=e.app,n=e.opened,r=e.inline,a=e.$inputEl,s=e.$scrollToEl,o=e.params;if(!n){if(0===e.cols.length&&o.cols.length&&o.cols.forEach((function(t){e.cols.push(t)})),r)return e.$el=Gc(e.render()),e.$el[0].f7Picker=e,e.$containerEl.append(e.$el),e.onOpen(),void e.onOpened();var i,l=e.isPopover(),u=l?"popover":"sheet",c={targetEl:a,scrollToEl:s,content:e.render(),backdrop:void 0!==o.backdrop?o.backdrop:l,on:{open:function(){var t=this;e.modal=t,e.$el=l?t.$el.find(".picker"):t.$el,e.$el[0].f7Picker=e,e.onOpen()},opened:function(){e.onOpened()},close:function(){e.onClose()},closed:function(){e.onClosed()}}};if("sheet"===u&&(c.push=o.sheetPush,c.swipeToClose=o.sheetSwipeToClose),o.routableModals&&e.view)e.view.router.navigate({url:e.url,route:(i={path:e.url},i[u]=c,i)});else e.modal=t[u].create(c),e.modal.open()}},i.close=function(){var e=this,t=e.opened,n=e.inline;if(t)return n?(e.onClose(),void e.onClosed()):void(e.params.routableModals&&e.view?e.view.router.back():e.modal.close())},i.init=function(){var e=this;if(e.initInput(),e.inline)return e.open(),void e.emit("local::init pickerInit",e);!e.initialized&&e.params.value&&e.setValue(e.params.value),e.$inputEl&&e.attachInputEvents(),e.params.closeByOutsideClick&&e.attachHtmlEvents(),e.emit("local::init pickerInit",e)},i.destroy=function(){var e=this;if(!e.destroyed){var t=e.$el;e.emit("local::beforeDestroy pickerBeforeDestroy",e),t&&t.trigger("picker:beforedestroy"),e.close(),e.$inputEl&&e.detachInputEvents(),e.params.closeByOutsideClick&&e.detachHtmlEvents(),t&&t.length&&delete e.$el[0].f7Picker,Ol(e),e.destroyed=!0}},a=r,s=[{key:"view",get:function(){var e,t=this.app,n=this.params,r=this.$inputEl;return n.view?e=n.view:r&&(e=r.parents(".view").length&&r.parents(".view")[0].f7View),e||(e=t.views.main),e}}],s&&Af(a.prototype,s),o&&Af(a,o),r}(au),Pf=Rf,Df={name:"picker",static:{Picker:Pf},create:function(){var e=this;e.picker=Yc({defaultSelector:".picker",constructor:Pf,app:e,domProp:"f7Picker"}),e.picker.close=function(e){void 0===e&&(e=".picker");var t=Gc(e);if(0!==t.length){var n=t[0].f7Picker;!n||n&&!n.opened||n.close()}}},params:{picker:{updateValuesOnMomentum:!1,updateValuesOnTouchmove:!0,updateValuesOnMousewheel:!0,mousewheel:!0,rotateEffect:!1,momentumRatio:7,freeMode:!1,cols:[],containerEl:null,openIn:"auto",sheetPush:!1,sheetSwipeToClose:void 0,backdrop:void 0,formatValue:null,inputEl:null,inputReadOnly:!0,closeByOutsideClick:!0,scrollToInput:!0,scrollToEl:void 0,toolbar:!0,toolbarCloseText:"Done",cssClass:null,routableModals:!1,view:null,url:"select/",renderToolbar:null,render:null}}},Lf={handle:function(e,t){var n,r=Gc(e),a=r[0].scrollTop,s=r[0].scrollHeight,o=r[0].offsetHeight,i=r[0].getAttribute("data-infinite-distance"),l=r.find(".virtual-list"),u=r.hasClass("infinite-scroll-top");if(i||(i=50),"string"==typeof i&&i.indexOf("%")>=0&&(i=parseInt(i,10)/100*o),i>o&&(i=o),u)a<i&&(r.trigger("infinite",t),this.emit("infinite",r[0],t));else if(a+o>=s-i){if(l.length>0&&(n=l.eq(-1)[0].f7VirtualList)&&!n.reachEnd&&!n.params.updatableScroll)return;r.trigger("infinite",t),this.emit("infinite",r[0],t)}},create:function(e){var t=Gc(e),n=this;function r(e){n.infiniteScroll.handle(this,e)}t.each((function(e){e.f7InfiniteScrollHandler=r,e.addEventListener("scroll",e.f7InfiniteScrollHandler)}))},destroy:function(e){Gc(e).each((function(e){e.removeEventListener("scroll",e.f7InfiniteScrollHandler),delete e.f7InfiniteScrollHandler}))}},Bf={name:"infiniteScroll",create:function(){Kl(this,{infiniteScroll:Lf})},on:{tabMounted:function(e){var t=this,n=Gc(e),r=n.find(".infinite-scroll-content");n.is(".infinite-scroll-content")&&r.add(n),r.each((function(e){t.infiniteScroll.create(e)}))},tabBeforeRemove:function(e){var t=Gc(e),n=this,r=t.find(".infinite-scroll-content");t.is(".infinite-scroll-content")&&r.add(t),r.each((function(e){n.infiniteScroll.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".infinite-scroll-content").each((function(e){t.infiniteScroll.create(e)}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".infinite-scroll-content").each((function(e){t.infiniteScroll.destroy(e)}))}}};function Ff(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zf(e,t){return zf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},zf(e,t)}var Vf=function(e){var t,n;function r(t,n){var r,a=Ff(r=e.call(this,{},[t])||this),s=Zl(),o=Jl(),i=Gc(n),l=i.find(".ptr-preloader");a.$el=i,a.el=i[0],a.app=t,a.bottom=a.$el.hasClass("ptr-bottom"),a.useModulesParams({});var u,c,p,d="md"===t.theme,h="ios"===t.theme,f="aurora"===t.theme;a.done=function(){var e=d?l:i;return e.on("transitionend",(function t(n){Gc(n.target).closest(l).length||(i.removeClass("ptr-transitioning ptr-pull-up ptr-pull-down ptr-closing"),i.trigger("ptr:done"),a.emit("local::done ptrDone",i[0]),e.off("transitionend",t))})),i.removeClass("ptr-refreshing").addClass("ptr-transitioning ptr-closing"),a},a.refresh=function(){return i.hasClass("ptr-refreshing")||(i.addClass("ptr-transitioning ptr-refreshing"),i.trigger("ptr:refresh",a.done),a.emit("local::refresh ptrRefresh",i[0],a.done)),a},a.mousewheel="true"===i.attr("data-ptr-mousewheel");var m,g,v,b,y,w,x,k,C,S,E,T,$,I={},N=!1,O=!1,A=!1,M=0,_=!1,R=i.parents(".page");if((R.find(".navbar").length>0||R.parents(".view").children(".navbars").length>0)&&(_=!0),R.hasClass("no-navbar")&&(_=!1),!a.bottom){var P=t.navbar.getElByPage(R[0]);if(P){var D=Gc(P),L=D.hasClass("navbar-large-transparent")||D.hasClass("navbar-large")&&D.hasClass("navbar-transparent"),B=D.hasClass("navbar-transparent")&&!D.hasClass("navbar-large");L?i.addClass("ptr-with-navbar-large-transparent"):B&&i.addClass("ptr-with-navbar-transparent")}}function F(e){void 0===e&&(e=0);var t=l.find(".preloader-inner-line"),n=1/t.length;t.forEach((function(t,r){var a=(e-r*n)/n;t.style.opacity=.27*Math.max(Math.min(a,1),0)}))}function z(){l.find(".preloader-inner-line").css("opacity","")}function V(e){if(c){if("android"!==s.os)return;if("targetTouches"in e&&e.targetTouches.length>1)return}i.hasClass("ptr-refreshing")||Gc(e.target).closest(".sortable-handler, .ptr-ignore, .card-expandable.card-opened").length||(p=!1,k=!1,c=!0,m=void 0,y=void 0,"touchstart"===e.type&&(u=e.targetTouches[0].identifier),I.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,I.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY)}function W(e){if(c){var t,r,o;if("touchmove"===e.type){if(u&&e.touches)for(var f=0;f<e.touches.length;f+=1)e.touches[f].identifier===u&&(o=e.touches[f]);o||(o=e.targetTouches[0]),t=o.pageX,r=o.pageY}else t=e.pageX,r=e.pageY;if(t&&r)if(void 0===m&&(m=!!(m||Math.abs(r-I.y)>Math.abs(t-I.x))),m){if(b=i[0].scrollTop,!p){var T;if(i.removeClass("ptr-transitioning"),h&&F(0),C=i[0].scrollHeight,S=i[0].offsetHeight,a.bottom&&(E=C-S),b>C)return void(c=!1);var $=Gc(e.target).closest(".ptr-watch-scroll");if($.length&&$.each((function(e){e!==n&&e.scrollHeight>e.offsetHeight&&"auto"===Gc(e).css("overflow")&&(!a.bottom&&e.scrollTop>0||a.bottom&&e.scrollTop<e.scrollHeight-e.offsetHeight)&&(T=!0)})),T)return void(c=!1);x&&(w=i.attr("data-ptr-distance")).indexOf("%")>=0&&(w=C*parseInt(w,10)/100),M=i.hasClass("ptr-refreshing")?w:0,O=!(C!==S&&"ios"===s.os&&!d),A=!1}if(p=!0,g=r-I.y,void 0===y&&(a.bottom?b!==E:0!==b)&&(y=!0),a.bottom?g<0&&b>=E||b>E:g>0&&b<=0||b<0)"ios"===s.os&&parseInt(s.osVersion.split(".")[0],10)>7&&(a.bottom||0!==b||y||(O=!0),a.bottom&&b===E&&!y&&(O=!0)),O||!a.bottom||d||(i.css("-webkit-overflow-scrolling","auto"),i.scrollTop(E),A=!0),O||A?(e.cancelable&&e.preventDefault(),v=(a.bottom?-1*Math.pow(Math.abs(g),.85):Math.pow(g,.85))+M,d?l.transform("translate3d(0,"+v+"px,0)").find(".ptr-arrow").transform("rotate("+(Math.abs(g)/66*180+100)+"deg)"):(a.bottom||h?i.children().transform("translate3d(0,"+v+"px,0)"):i.transform("translate3d(0,"+v+"px,0)"),h&&l.transform("translate3d(0,0px,0)"))):h&&!a.bottom&&l.transform("translate3d(0,"+b+"px,0)"),h&&!N&&F(O||A?Math.pow(Math.abs(g),.85)/w:Math.abs(g)/(2*w)),(O||A)&&Math.pow(Math.abs(g),.85)>w||!O&&Math.abs(g)>=2*w?(N=!0,i.addClass("ptr-pull-up").removeClass("ptr-pull-down"),z()):(N=!1,i.removeClass("ptr-pull-up").addClass("ptr-pull-down")),k||(i.trigger("ptr:pullstart"),a.emit("local::pullStart ptrPullStart",i[0]),k=!0),i.trigger("ptr:pullmove",{event:e,scrollTop:b,translate:v,touchesDiff:g}),a.emit("local::pullMove ptrPullMove",i[0],{event:e,scrollTop:b,translate:v,touchesDiff:g});else k=!1,i.removeClass("ptr-pull-up ptr-pull-down"),N=!1}else c=!1}}function H(e){return"touchend"===e.type&&e.changedTouches&&e.changedTouches.length>0&&u&&e.changedTouches[0].identifier!==u?(c=!1,m=!1,p=!1,void(u=null)):c&&p?(v&&(i.addClass("ptr-transitioning"),v=0),d?l.transform("").find(".ptr-arrow").transform(""):(l.transform(""),a.bottom||h?i.children().transform(""):i.transform("")),O||!a.bottom||d||i.css("-webkit-overflow-scrolling",""),N?(i.addClass("ptr-refreshing"),i.trigger("ptr:refresh",a.done),a.emit("local::refresh ptrRefresh",i[0],a.done)):i.removeClass("ptr-pull-down"),c=!1,p=!1,void(k&&(i.trigger("ptr:pullend"),a.emit("local::pullEnd ptrPullEnd",i[0])))):(c=!1,void(p=!1))}_||a.bottom||i.addClass("ptr-no-navbar"),i.attr("data-ptr-distance")?x=!0:d?w=66:h?w=44:f&&(w=38);var j=!0,U=0;function G(){j=!0,$=!1,U=0,v&&(i.addClass("ptr-transitioning"),v=0),d?l.transform("").find(".ptr-arrow").transform(""):(l.transform(""),a.bottom?i.children().transform(""):i.transform("")),N?(i.addClass("ptr-refreshing"),i.trigger("ptr:refresh",a.done),a.emit("local::refresh ptrRefresh",i[0],a.done)):i.removeClass("ptr-pull-down"),k&&(i.trigger("ptr:pullend"),a.emit("local::pullEnd ptrPullEnd",i[0]))}function q(e){if(j){var t=e.deltaX,r=e.deltaY;if(!(Math.abs(t)>Math.abs(r)||i.hasClass("ptr-refreshing")||Gc(e.target).closest(".sortable-handler, .ptr-ignore, .card-expandable.card-opened").length)){if(clearTimeout(T),b=i[0].scrollTop,!$){var s;if(i.removeClass("ptr-transitioning"),h&&F(0),C=i[0].scrollHeight,S=i[0].offsetHeight,a.bottom&&(E=C-S),b>C)return void(j=!1);var o=Gc(e.target).closest(".ptr-watch-scroll");if(o.length&&o.each((function(e){e!==n&&e.scrollHeight>e.offsetHeight&&"auto"===Gc(e).css("overflow")&&(!a.bottom&&e.scrollTop>0||a.bottom&&e.scrollTop<e.scrollHeight-e.offsetHeight)&&(s=!0)})),s)return void(j=!1);x&&(w=i.attr("data-ptr-distance")).indexOf("%")>=0&&(w=C*parseInt(w,10)/100)}if(p=!0,g=U-=r,void 0===y&&(a.bottom?b!==E:0!==b)&&(y=!0),a.bottom?g<0&&b>=E||b>E:g>0&&b<=0||b<0)e.cancelable&&e.preventDefault(),v=g,Math.abs(v)>w&&(v=w+Math.pow(Math.abs(v)-w,.7),a.bottom&&(v=-v)),d?l.transform("translate3d(0,"+v+"px,0)").find(".ptr-arrow").transform("rotate("+(Math.abs(g)/66*180+100)+"deg)"):a.bottom?i.children().transform("translate3d(0,"+v+"px,0)"):(i.transform("translate3d(0,"+v+"px,0)"),h&&l.transform("translate3d(0,"+-v+"px,0)")),h&&!N&&F(Math.abs(v)/w),Math.abs(v)>w?(N=!0,i.addClass("ptr-pull-up").removeClass("ptr-pull-down"),z()):(N=!1,i.removeClass("ptr-pull-up").addClass("ptr-pull-down")),k||(i.trigger("ptr:pullstart"),a.emit("local::pullStart ptrPullStart",i[0]),k=!0),i.trigger("ptr:pullmove",{event:e,scrollTop:b,translate:v,touchesDiff:g}),a.emit("local::pullMove ptrPullMove",i[0],{event:e,scrollTop:b,translate:v,touchesDiff:g});else k=!1,i.removeClass("ptr-pull-up ptr-pull-down"),N=!1;T=setTimeout(G,300)}}}return R.length&&i.length?(i[0].f7PullToRefresh=a,a.attachEvents=function(){var e=!!o.passiveListener&&{passive:!0};i.on(t.touchEvents.start,V,e),t.on("touchmove:active",W),t.on("touchend:passive",H),a.mousewheel&&!a.bottom&&i.on("wheel",q)},a.detachEvents=function(){var e=!!o.passiveListener&&{passive:!0};i.off(t.touchEvents.start,V,e),t.off("touchmove:active",W),t.off("touchend:passive",H),a.mousewheel&&!a.bottom&&i.off("wheel",q)},a.useModules(),a.init(),a||Ff(r)):a||Ff(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,zf(t,n);var a=r.prototype;return a.init=function(){this.attachEvents()},a.destroy=function(){var e=this;e.emit("local::beforeDestroy ptrBeforeDestroy",e),e.$el.trigger("ptr:beforedestroy"),delete e.el.f7PullToRefresh,e.detachEvents(),Ol(e),e=null},r}(au),Wf=Vf,Hf={name:"pullToRefresh",create:function(){var e=this;e.ptr=Vl(Yc({defaultSelector:".ptr-content",constructor:Wf,app:e,domProp:"f7PullToRefresh"}),{done:function(t){var n=e.ptr.get(t);if(n)return n.done()},refresh:function(t){var n=e.ptr.get(t);if(n)return n.refresh()}})},static:{PullToRefresh:Wf},on:{tabMounted:function(e){var t=this,n=Gc(e),r=n.find(".ptr-content");n.is(".ptr-content")&&r.add(n),r.each((function(e){t.ptr.create(e)}))},tabBeforeRemove:function(e){var t=Gc(e),n=this,r=t.find(".ptr-content");t.is(".ptr-content")&&r.add(t),r.each((function(e){n.ptr.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".ptr-content").each((function(e){t.ptr.create(e)}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".ptr-content").each((function(e){t.ptr.destroy(e)}))}}},jf={destroy:function(e){var t=Gc(e).closest(".page");t.length&&t[0].f7LazyDestroy&&t[0].f7LazyDestroy()},create:function(e){var t=this,n=wl(),r=Jl(),a=Gc(e).closest(".page").eq(0),s=a.find(".lazy");if(0!==s.length||a.hasClass("lazy")){var o=t.params.lazy.placeholder;!1!==o&&s.each((function(e){Gc(e).attr("data-src")&&!Gc(e).attr("src")&&Gc(e).attr("src",o)}));var i=[],l=!1;if(t.params.lazy.observer&&r.intersectionObserver){var u=a[0].f7LazyObserver;return u||(u=new n.IntersectionObserver((function(e,n){e.forEach((function(e){if(e.isIntersecting){if(t.params.lazy.sequential&&l)return void(i.indexOf(e.target)<0&&i.push(e.target));l=!0,t.lazy.loadImage(e.target,c),n.unobserve(e.target)}}))}),{root:a[0]})),s.each((function(e){e.f7LazyObserverAdded||(e.f7LazyObserverAdded=!0,u.observe(e))})),void(a[0].f7LazyDestroy||(a[0].f7LazyDestroy=function(){u.disconnect(),delete a[0].f7LazyDestroy,delete a[0].f7LazyObserver}))}a[0].f7LazyDestroy||(a[0].f7LazyDestroy=function(){a[0].f7LazyAttached=!1,delete a[0].f7LazyAttached,a.off("lazy",p),a.off("scroll",p,!0),a.find(".tab").off("tab:mounted tab:show",p),t.off("resize",p)}),a[0].f7LazyAttached||(a[0].f7LazyAttached=!0,a.on("lazy",p),a.on("scroll",p,!0),a.find(".tab").on("tab:mounted tab:show",p),t.on("resize",p)),p()}function c(e){i.indexOf(e)>=0&&i.splice(i.indexOf(e),1),l=!1,t.params.lazy.sequential&&i.length>0&&(l=!0,t.lazy.loadImage(i[0],c))}function p(){t.lazy.load(a,(function(e){t.params.lazy.sequential&&l?i.indexOf(e)<0&&i.push(e):(l=!0,t.lazy.loadImage(e,c))}))}},isInViewport:function(e){var t=this,n=e.getBoundingClientRect(),r=t.params.lazy.threshold||0;return n.top>=0-r&&n.left>=0-r&&n.top<=t.height+r&&n.left<=t.width+r},loadImage:function(e,t){var n=this,r=wl(),a=Gc(e),s=a.attr("data-background"),o=s||a.attr("data-src");function i(){a.removeClass("lazy").addClass("lazy-loaded"),s?a.css("background-image","url("+o+")"):o&&a.attr("src",o),t&&t(e),a.trigger("lazy:loaded"),n.emit("lazyLoaded",a[0])}if(!o)return a.trigger("lazy:load"),n.emit("lazyLoad",a[0]),void i();var l=new r.Image;l.onload=i,l.onerror=function(){a.removeClass("lazy").addClass("lazy-loaded"),s?a.css("background-image","url("+(n.params.lazy.placeholder||"")+")"):a.attr("src",n.params.lazy.placeholder||""),t&&t(e),a.trigger("lazy:error"),n.emit("lazyError",a[0])},l.src=o,a.removeAttr("data-src").removeAttr("data-background"),a.trigger("lazy:load"),n.emit("lazyLoad",a[0])},load:function(e,t){var n=this,r=Gc(e);r.hasClass("page")||(r=r.parents(".page").eq(0)),0!==r.length&&r.find(".lazy").each((function(e){Gc(e).parents(".tab:not(.tab-active)").length>0||n.lazy.isInViewport(e)&&(t?t(e):n.lazy.loadImage(e))}))}},Uf={name:"lazy",params:{lazy:{placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEXCwsK592mkAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",threshold:0,sequential:!0,observer:!0}},create:function(){Kl(this,{lazy:jf})},on:{pageInit:function(e){(e.$el.find(".lazy").length>0||e.$el.hasClass("lazy"))&&this.lazy.create(e.$el)},pageAfterIn:function(e){var t=Jl();this.params.lazy.observer&&t.intersectionObserver||(e.$el.find(".lazy").length>0||e.$el.hasClass("lazy"))&&this.lazy.create(e.$el)},pageBeforeRemove:function(e){(e.$el.find(".lazy").length>0||e.$el.hasClass("lazy"))&&this.lazy.destroy(e.$el)},tabMounted:function(e){var t=Gc(e);(t.find(".lazy").length>0||t.hasClass("lazy"))&&this.lazy.create(t)},tabBeforeRemove:function(e){var t=Jl();if(!this.params.lazy.observer||!t.intersectionObserver){var n=Gc(e);(n.find(".lazy").length>0||n.hasClass("lazy"))&&this.lazy.destroy(n)}}}};function Gf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qf(e,t){return qf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},qf(e,t)}var Xf=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var a=Gf(r=e.call(this,n,[t])||this),s={};a.useModulesParams(s),a.params=Vl(s,n);var o=Gc(a.params.el);if(0===o.length)return Gf(r);if(a.$el=o,a.el=o[0],a.$el[0].f7DataTable){var i=a.$el[0].f7DataTable;return a.destroy(),i||Gf(r)}function l(e){if(!e.detail||!e.detail.sentByF7DataTable){var t=Gc(this),n=t[0].checked,r=t.parents("td,th").index();if(t.parents("thead").length>0)0===r&&o.find("tbody tr")[n?"addClass":"removeClass"]("data-table-row-selected"),o.find("tbody tr td:nth-child("+(r+1)+") input").prop("checked",n).trigger("change",{sentByF7DataTable:!0}),t.prop("indeterminate",!1);else{0===r&&t.parents("tr")[n?"addClass":"removeClass"]("data-table-row-selected");var s=o.find("tbody .checkbox-cell:nth-child("+(r+1)+') input[type="checkbox"]:checked').length,i=o.find("tbody tr").length,l=o.find("thead .checkbox-cell:nth-child("+(r+1)+') input[type="checkbox"]');n?s===i&&l.prop("checked",!0).trigger("change",{sentByF7DataTable:!0}):l.prop("checked",!1),l.prop("indeterminate",s>0&&s<i)}a.checkSelectedHeader()}}function u(){var e,t=Gc(this),n=t.hasClass("sortable-cell-active"),r=t.hasClass("sortable-desc")?"desc":"asc";n?(e="desc"===r?"asc":"desc",t.removeClass("sortable-desc sortable-asc").addClass("sortable-"+e)):(o.find("thead .sortable-cell-active").removeClass("sortable-cell-active"),t.addClass("sortable-cell-active"),e=r),t.trigger("datatable:sort",e),a.emit("local::sort dataTableSort",a,e)}return a.$el[0].f7DataTable=a,Vl(a,{collapsible:o.hasClass("data-table-collapsible"),$headerEl:o.find(".data-table-header"),$headerSelectedEl:o.find(".data-table-header-selected")}),a.attachEvents=function(){a.$el.on("change",'.checkbox-cell input[type="checkbox"]',l),a.$el.find("thead .sortable-cell").on("click",u)},a.detachEvents=function(){a.$el.off("change",'.checkbox-cell input[type="checkbox"]',l),a.$el.find("thead .sortable-cell").off("click",u)},a.useModules(),a.init(),a||Gf(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,qf(t,n);var a=r.prototype;return a.setCollapsibleLabels=function(){var e=this;e.collapsible&&e.$el.find("tbody td:not(.checkbox-cell)").each((function(t){var n=Gc(t),r=n.index(),a=n.attr("data-collapsible-title");a||""===a||n.attr("data-collapsible-title",e.$el.find("thead th").eq(r).text())}))},a.checkSelectedHeader=function(){var e=this;if(e.$headerEl.length>0&&e.$headerSelectedEl.length>0){var t=e.$el.find("tbody .checkbox-cell input:checked").length;e.$el[t>0?"addClass":"removeClass"]("data-table-has-checked"),e.$headerSelectedEl.find(".data-table-selected-count").text(t)}},a.init=function(){var e=this;e.attachEvents(),e.setCollapsibleLabels(),e.checkSelectedHeader()},a.destroy=function(){var e=this;e.$el.trigger("datatable:beforedestroy"),e.emit("local::beforeDestroy dataTableBeforeDestroy",e),e.attachEvents(),e.$el[0]&&(e.$el[0].f7DataTable=null,delete e.$el[0].f7DataTable),Ol(e),e=null},r}(au),Kf=Xf,Yf={name:"dataTable",static:{DataTable:Kf},create:function(){this.dataTable=Yc({defaultSelector:".data-table",constructor:Kf,app:this,domProp:"f7DataTable"})},on:{tabBeforeRemove:function(e){var t=this;Gc(e).find(".data-table-init").each((function(e){t.dataTable.destroy(e)}))},tabMounted:function(e){var t=this;Gc(e).find(".data-table-init").each((function(e){t.dataTable.create({el:e})}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".data-table-init").each((function(e){t.dataTable.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".data-table-init").each((function(e){t.dataTable.create({el:e})}))}},vnode:{"data-table-init":{insert:function(e){var t=e.elm;this.dataTable.create({el:t})},destroy:function(e){var t=e.elm;this.dataTable.destroy(t)}}}};function Jf(){return Jf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jf.apply(this,arguments)}for(var Zf={morphOpen:function(e,t){var n=this,r=Gc(e),a=Gc(t);if(0!==a.length){a.transition(0).addClass("fab-morph-target-visible");var s={width:a[0].offsetWidth,height:a[0].offsetHeight,offset:a.offset(),borderRadius:a.css("border-radius"),zIndex:a.css("z-index")},o={width:r[0].offsetWidth,height:r[0].offsetHeight,offset:r.offset(),translateX:Ll(r[0],"x"),translateY:Ll(r[0],"y")};r[0].f7FabMorphData={$targetEl:a,target:s,fab:o};var i=o.offset.left+o.width/2-(s.offset.left+s.width/2)-o.translateX,l=o.offset.top+o.height/2-(s.offset.top+s.height/2)-o.translateY,u=s.width/o.width,c=s.height/o.height,p=Math.ceil(parseInt(s.borderRadius,10)/Math.max(u,c));p>0&&(p+=2),r[0].f7FabMorphResizeHandler=function(){r.transition(0).transform(""),a.transition(0),s.width=a[0].offsetWidth,s.height=a[0].offsetHeight,s.offset=a.offset(),o.offset=r.offset();var e=o.offset.left+o.width/2-(s.offset.left+s.width/2)-o.translateX,t=o.offset.top+o.height/2-(s.offset.top+s.height/2)-o.translateY,n=s.width/o.width,i=s.height/o.height;r.transform("translate3d("+-e+"px, "+-t+"px, 0) scale("+n+", "+i+")")},a.css("opacity",0).transform("scale("+1/u+", "+1/c+")"),r.addClass("fab-opened").css("z-index",s.zIndex-1).transform("translate3d("+-i+"px, "+-l+"px, 0)"),r.transitionEnd((function(){a.transition(""),Rl((function(){a.css("opacity",1).transform("scale(1,1)"),r.transform("translate3d("+-i+"px, "+-l+"px, 0) scale("+u+", "+c+")").css("border-radius",p+"px").css("box-shadow","none").css("opacity","0")})),n.on("resize",r[0].f7FabMorphResizeHandler),a.parents(".page-content").length>0&&a.parents(".page-content").on("scroll",r[0].f7FabMorphResizeHandler)}))}},morphClose:function(e){var t=Gc(e),n=t[0].f7FabMorphData;if(n){var r=n.$targetEl,a=n.target,s=n.fab;if(0!==r.length){var o=s.offset.left+s.width/2-(a.offset.left+a.width/2)-s.translateX,i=s.offset.top+s.height/2-(a.offset.top+a.height/2)-s.translateY,l=a.width/s.width,u=a.height/s.height;this.off("resize",t[0].f7FabMorphResizeHandler),r.parents(".page-content").length>0&&r.parents(".page-content").off("scroll",t[0].f7FabMorphResizeHandler),r.css("opacity",0).transform("scale("+1/l+", "+1/u+")"),t.transition("").css("box-shadow","").css("border-radius","").css("opacity","1").transform("translate3d("+-o+"px, "+-i+"px, 0)"),t.transitionEnd((function(){t.css("z-index","").removeClass("fab-opened").transform(""),Rl((function(){t.transitionEnd((function(){r.removeClass("fab-morph-target-visible").css("opacity","").transform("").transition("")}))}))}))}}},open:function(e,t){var n=this,r=Gc(e).eq(0),a=r.find(".fab-buttons");if(r.length&&!r.hasClass("fab-opened")&&(a.length||r.hasClass("fab-morph"))){if(n.fab.openedEl){if(n.fab.openedEl===r[0])return;n.fab.close(n.fab.openedEl)}n.fab.openedEl=r[0],r.hasClass("fab-morph")?n.fab.morphOpen(r,t||r.attr("data-morph-to")):r.addClass("fab-opened"),r.siblings(".fab-backdrop").addClass("backdrop-in"),r.trigger("fab:open")}},close:function(e){void 0===e&&(e=".fab-opened");var t=Gc(e).eq(0),n=t.find(".fab-buttons");t.length&&t.hasClass("fab-opened")&&(n.length||t.hasClass("fab-morph"))&&(this.fab.openedEl=null,t.hasClass("fab-morph")?this.fab.morphClose(t):t.removeClass("fab-opened"),t.siblings(".fab-backdrop").removeClass("backdrop-in"),t.trigger("fab:close"))},toggle:function(e){Gc(e).hasClass("fab-opened")?this.fab.close(e):this.fab.open(e)}},Qf={name:"fab",create:function(){Kl(this,{fab:Jf({openedEl:null},Zf)})},clicks:{".fab > a":function(e){this.fab.toggle(e.parents(".fab"))},".fab-open":function(e,t){void 0===t&&(t={});this.fab.open(t.fab)},".fab-close":function(e,t){void 0===t&&(t={});this.fab.close(t.fab)},".fab-backdrop":function(){this.fab.close()}}},em=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"OE",letters:""},{base:"oe",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],tm={},nm=0;nm<em.length;nm+=1)for(var rm=em[nm].letters,am=0;am<rm.length;am+=1)tm[rm[am]]=em[nm].base;var sm=function(e){return e.replace(/[^\u0000-\u007E]/g,(function(e){return tm[e]||e}))};function om(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function im(e,t){return im=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},im(e,t)}var lm=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var a=om(r=e.call(this,n,[t])||this),s={el:void 0,inputEl:void 0,inputEvents:"change input compositionend",disableButton:!0,disableButtonEl:void 0,backdropEl:void 0,searchContainer:void 0,searchItem:"li",searchIn:void 0,searchGroup:".list-group",searchGroupTitle:".item-divider, .list-group-title",ignore:".searchbar-ignore",foundEl:".searchbar-found",notFoundEl:".searchbar-not-found",hideOnEnableEl:".searchbar-hide-on-enable",hideOnSearchEl:".searchbar-hide-on-search",backdrop:void 0,removeDiacritics:!0,customSearch:!1,hideDividers:!0,hideGroups:!0,disableOnBackdropClick:!0,expandable:!1,inline:!1};a.useModulesParams(s),a.params=Vl(s,n);var o,i=Gc(a.params.el);if(0===i.length)return a||om(r);if(i[0].f7Searchbar)return i[0].f7Searchbar||om(r);i[0].f7Searchbar=a;var l,u,c,p,d=i.parents(".navbar");if(i.parents(".page").length>0)o=i.parents(".page");else if(d.length>0&&!(o=Gc(t.navbar.getPageByEl(d[0]))).length){var h=i.parents(".view").find(".page-current");h[0]&&h[0].f7Page&&h[0].f7Page.navbarEl===d[0]&&(o=h)}n.foundEl?l=Gc(n.foundEl):"string"==typeof a.params.foundEl&&o&&(l=o.find(a.params.foundEl)),n.notFoundEl?u=Gc(n.notFoundEl):"string"==typeof a.params.notFoundEl&&o&&(u=o.find(a.params.notFoundEl)),n.hideOnEnableEl?c=Gc(n.hideOnEnableEl):"string"==typeof a.params.hideOnEnableEl&&o&&(c=o.find(a.params.hideOnEnableEl)),n.hideOnSearchEl?p=Gc(n.hideOnSearchEl):"string"==typeof a.params.hideOnSearchEl&&o&&(p=o.find(a.params.hideOnSearchEl));var f,m,g,v,b=a.params.expandable||i.hasClass("searchbar-expandable"),y=a.params.inline||i.hasClass("searchbar-inline");function w(e){e.preventDefault()}function x(e){a.enable(e),a.$el.addClass("searchbar-focused")}function k(){a.$el.removeClass("searchbar-focused"),"aurora"!==t.theme||v&&v.length&&a.params.disableButton||a.query||a.disable()}function C(){var e=a.$inputEl.val().trim();(a.$searchContainer&&a.$searchContainer.length>0&&(a.params.searchIn||a.isVirtualList||a.params.searchIn===a.params.searchItem)||a.params.customSearch)&&a.search(e,!0)}function S(e,t){a.$el.trigger("searchbar:clear",t),a.emit("local::clear searchbarClear",a,t)}function E(e){a.disable(e)}function T(){!a||a&&!a.$el||a.enabled&&(a.$el.removeClass("searchbar-enabled"),a.expandable&&a.$el.parents(".navbar").removeClass("with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition"))}function $(){!a||a&&!a.$el||a.enabled&&(a.$el.addClass("searchbar-enabled"),a.expandable&&a.$el.parents(".navbar").addClass("with-searchbar-expandable-enabled-no-transition"))}return void 0===a.params.backdrop&&(a.params.backdrop=!y&&"aurora"!==t.theme),a.params.backdrop&&0===(f=a.params.backdropEl?Gc(a.params.backdropEl):o&&o.length>0?o.find(".searchbar-backdrop"):i.siblings(".searchbar-backdrop")).length&&(f=Gc('<div class="searchbar-backdrop"></div>'),o&&o.length?i.parents(o).length>0&&d&&0===i.parents(d).length?f.insertBefore(i):f.insertBefore(o.find(".page-content").eq(0)):f.insertBefore(i)),a.params.searchContainer&&(m=Gc(a.params.searchContainer)),g=a.params.inputEl?Gc(a.params.inputEl):i.find('input[type="search"]').eq(0),a.params.disableButton&&(v=a.params.disableButtonEl?Gc(a.params.disableButtonEl):i.find(".searchbar-disable-button")),Vl(a,{app:t,view:t.views.get(i.parents(".view")),$el:i,el:i[0],$backdropEl:f,backdropEl:f&&f[0],$searchContainer:m,searchContainer:m&&m[0],$inputEl:g,inputEl:g[0],$disableButtonEl:v,disableButtonEl:v&&v[0],disableButtonHasMargin:!1,$pageEl:o,pageEl:o&&o[0],$navbarEl:d,navbarEl:d&&d[0],$foundEl:l,foundEl:l&&l[0],$notFoundEl:u,notFoundEl:u&&u[0],$hideOnEnableEl:c,hideOnEnableEl:c&&c[0],$hideOnSearchEl:p,hideOnSearchEl:p&&p[0],previousQuery:"",query:"",isVirtualList:m&&m.hasClass("virtual-list"),virtualList:void 0,enabled:!1,expandable:b,inline:y}),a.attachEvents=function(){i.on("submit",w),a.params.disableButton&&a.$disableButtonEl.on("click",E),a.params.disableOnBackdropClick&&a.$backdropEl&&a.$backdropEl.on("click",E),a.expandable&&"ios"===t.theme&&a.view&&d.length&&a.$pageEl&&(a.$pageEl.on("page:beforeout",T),a.$pageEl.on("page:beforein",$)),a.$inputEl.on("focus",x),a.$inputEl.on("blur",k),a.$inputEl.on(a.params.inputEvents,C),a.$inputEl.on("input:clear",S)},a.detachEvents=function(){i.off("submit",w),a.params.disableButton&&a.$disableButtonEl.off("click",E),a.params.disableOnBackdropClick&&a.$backdropEl&&a.$backdropEl.off("click",E),a.expandable&&"ios"===t.theme&&a.view&&d.length&&a.$pageEl&&(a.$pageEl.off("page:beforeout",T),a.$pageEl.off("page:beforein",$)),a.$inputEl.off("focus",x),a.$inputEl.off("blur",k),a.$inputEl.off(a.params.inputEvents,C),a.$inputEl.off("input:clear",S)},a.useModules(),a.init(),a||om(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,im(t,n);var a=r.prototype;return a.clear=function(e){var t=this;if(!t.query&&e&&Gc(e.target).hasClass("searchbar-clear"))return t.disable(),t;var n=t.value;return t.$inputEl.val("").trigger("change").focus(),t.$el.trigger("searchbar:clear",n),t.emit("local::clear searchbarClear",t,n),t},a.setDisableButtonMargin=function(){var e=this;if(!e.expandable){var t=e.app;e.$disableButtonEl.transition(0).show(),e.$disableButtonEl.css("margin-"+(t.rtl?"left":"right"),-e.disableButtonEl.offsetWidth+"px"),e._clientLeft=e.$disableButtonEl[0].clientLeft,e.$disableButtonEl.transition(""),e.disableButtonHasMargin=!0}},a.enable=function(e){var t=this;if(t.enabled)return t;var n=t.app,r=bl(),a=Zl();function s(){if(t.$backdropEl&&(t.$searchContainer&&t.$searchContainer.length||t.params.customSearch)&&!t.$el.hasClass("searchbar-enabled")&&!t.query&&t.backdropShow(),t.$el.addClass("searchbar-enabled"),(!t.$disableButtonEl||t.$disableButtonEl&&0===t.$disableButtonEl.length)&&t.$el.addClass("searchbar-enabled-no-disable-button"),!t.expandable&&t.$disableButtonEl&&t.$disableButtonEl.length>0&&"md"!==n.theme&&(t.disableButtonHasMargin||t.setDisableButtonMargin(),t.$disableButtonEl.css("margin-"+(n.rtl?"left":"right"),"0px")),t.expandable){var e=t.$el.parents(".navbar");if(e.hasClass("navbar-large")&&t.$pageEl){var r=t.$pageEl.find(".page-content"),a=e.find(".title-large");r.addClass("with-searchbar-expandable-enabled"),e.hasClass("navbar-large")&&e.hasClass("navbar-large-collapsed")&&a.length&&r.length&&(r.transition(0),r[0].scrollTop-=a[0].offsetHeight,setTimeout((function(){r.transition("")}),200))}"md"===n.theme&&e.length?e.addClass("with-searchbar-expandable-enabled"):(e.addClass("with-searchbar-expandable-enabled"),e.hasClass("navbar-large")&&e.addClass("navbar-large-collapsed"))}t.$hideOnEnableEl&&t.$hideOnEnableEl.addClass("hidden-by-searchbar"),t.$el.trigger("searchbar:enable"),t.emit("local::enable searchbarEnable",t)}t.enabled=!0;var o=!1;return!0===e&&r.activeElement!==t.inputEl&&(o=!0),a.ios&&"ios"===n.theme?t.expandable?(o&&t.$inputEl.focus(),s()):(o&&t.$inputEl.focus(),!e||"focus"!==e.type&&!0!==e?s():_l((function(){s()}),400)):(o&&t.$inputEl.focus(),"md"===n.theme&&t.expandable&&t.$el.parents(".page, .view, .navbar-inner, .navbar").scrollLeft(n.rtl?100:0),s()),t},a.disable=function(){var e=this;if(!e.enabled)return e;var t=e.app;if(e.$inputEl.val("").trigger("change"),e.$el.removeClass("searchbar-enabled searchbar-focused searchbar-enabled-no-disable-button"),e.expandable){var n=e.$el.parents(".navbar"),r=e.$pageEl&&e.$pageEl.find(".page-content");if(n.hasClass("navbar-large")&&r.length){var a=n.find(".title-large");if(e.$el.transitionEnd((function(){r.removeClass("with-searchbar-expandable-closing")})),n.hasClass("navbar-large")&&n.hasClass("navbar-large-collapsed")&&a.length){var s=r[0].scrollTop,o=a[0].offsetHeight;s>o&&(r.transition(0),r[0].scrollTop=s+o,setTimeout((function(){r.transition("")}),200))}r.removeClass("with-searchbar-expandable-enabled").addClass("with-searchbar-expandable-closing")}"md"===t.theme&&n.length?(n.removeClass("with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition").addClass("with-searchbar-expandable-closing"),e.$el.transitionEnd((function(){n.removeClass("with-searchbar-expandable-closing")}))):(n.removeClass("with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition").addClass("with-searchbar-expandable-closing"),e.$el.transitionEnd((function(){n.removeClass("with-searchbar-expandable-closing")})),e.$pageEl&&e.$pageEl.find(".page-content").trigger("scroll"))}return!e.expandable&&e.$disableButtonEl&&e.$disableButtonEl.length>0&&"md"!==t.theme&&e.$disableButtonEl.css("margin-"+(t.rtl?"left":"right"),-e.disableButtonEl.offsetWidth+"px"),e.$backdropEl&&(e.$searchContainer&&e.$searchContainer.length||e.params.customSearch)&&e.backdropHide(),e.enabled=!1,e.$inputEl.blur(),e.$hideOnEnableEl&&e.$hideOnEnableEl.removeClass("hidden-by-searchbar"),e.$el.trigger("searchbar:disable"),e.emit("local::disable searchbarDisable",e),e},a.toggle=function(){var e=this;return e.enabled?e.disable():e.enable(!0),e},a.backdropShow=function(){var e=this;return e.$backdropEl&&e.$backdropEl.addClass("searchbar-backdrop-in"),e},a.backdropHide=function(){var e=this;return e.$backdropEl&&e.$backdropEl.removeClass("searchbar-backdrop-in"),e},a.search=function(e,t){var n=this;if(n.previousQuery=n.query||"",e===n.previousQuery)return n;t||(n.enabled||n.enable(),n.$inputEl.val(e),n.$inputEl.trigger("input")),n.query=e,n.value=e;var r=n.$searchContainer,a=n.$el,s=n.$foundEl,o=n.$notFoundEl,i=n.$hideOnSearchEl,l=n.isVirtualList;if(e.length>0&&i?i.addClass("hidden-by-searchbar"):i&&i.removeClass("hidden-by-searchbar"),(r&&r.length&&a.hasClass("searchbar-enabled")||n.params.customSearch&&a.hasClass("searchbar-enabled"))&&(0===e.length?n.backdropShow():n.backdropHide()),n.params.customSearch)return a.trigger("searchbar:search",{query:e,previousQuery:n.previousQuery}),n.emit("local::search searchbarSearch",n,e,n.previousQuery),n;var u,c=[];if(l){if(n.virtualList=r[0].f7VirtualList,""===e.trim())return n.virtualList.resetFilter(),o&&o.hide(),s&&s.show(),a.trigger("searchbar:search",{query:e,previousQuery:n.previousQuery}),n.emit("local::search searchbarSearch",n,e,n.previousQuery),n;if(u=n.params.removeDiacritics?sm(e):e,n.virtualList.params.searchAll)c=n.virtualList.params.searchAll(u,n.virtualList.items)||[];else if(n.virtualList.params.searchByItem)for(var p=0;p<n.virtualList.items.length;p+=1)n.virtualList.params.searchByItem(u,n.virtualList.items[p],p)&&c.push(p)}else{var d;d=n.params.removeDiacritics?sm(e.trim().toLowerCase()).split(" "):e.trim().toLowerCase().split(" "),r.find(n.params.searchItem).removeClass("hidden-by-searchbar").each((function(e){var t=Gc(e),r=[],a=n.params.searchIn?t.find(n.params.searchIn):t;n.params.searchIn===n.params.searchItem&&(a=t),a.each((function(e){var t=Gc(e).text().trim().toLowerCase();n.params.removeDiacritics&&(t=sm(t)),r.push(t)})),r=r.join(" ");for(var s=0,o=0;o<d.length;o+=1)r.indexOf(d[o])>=0&&(s+=1);s===d.length||n.params.ignore&&t.is(n.params.ignore)?c.push(t[0]):t.addClass("hidden-by-searchbar")})),n.params.hideDividers&&r.find(n.params.searchGroupTitle).each((function(e){for(var t=Gc(e),r=t.nextAll(n.params.searchItem),a=!0,s=0;s<r.length;s+=1){var o=r.eq(s);if(o.is(n.params.searchGroupTitle))break;o.hasClass("hidden-by-searchbar")||(a=!1)}var i=n.params.ignore&&t.is(n.params.ignore);a&&!i?t.addClass("hidden-by-searchbar"):t.removeClass("hidden-by-searchbar")})),n.params.hideGroups&&r.find(n.params.searchGroup).each((function(e){var t=Gc(e),r=n.params.ignore&&t.is(n.params.ignore);0!==t.find(n.params.searchItem).filter((function(e){return!Gc(e).hasClass("hidden-by-searchbar")})).length||r?t.removeClass("hidden-by-searchbar"):t.addClass("hidden-by-searchbar")}))}return 0===c.length?(o&&o.show(),s&&s.hide()):(o&&o.hide(),s&&s.show()),l&&n.virtualList&&n.virtualList.filterItems(c),a.trigger("searchbar:search",{query:e,previousQuery:n.previousQuery,foundItems:c}),n.emit("local::search searchbarSearch",n,e,n.previousQuery,c),n},a.init=function(){var e=this;e.expandable&&e.$el&&e.$el.addClass("searchbar-expandable"),e.inline&&e.$el&&e.$el.addClass("searchbar-inline"),e.attachEvents()},a.destroy=function(){var e=this;e.emit("local::beforeDestroy searchbarBeforeDestroy",e),e.$el.trigger("searchbar:beforedestroy"),e.detachEvents(),e.$el[0]&&(e.$el[0].f7Searchbar=null,delete e.$el[0].f7Searchbar),Ol(e)},r}(au),um=lm,cm={name:"searchbar",static:{Searchbar:um},create:function(){this.searchbar=Yc({defaultSelector:".searchbar",constructor:um,app:this,domProp:"f7Searchbar",addMethods:"clear enable disable toggle search".split(" ")})},on:{tabMounted:function(e){var t=this;Gc(e).find(".searchbar-init").each((function(e){var n=Gc(e);t.searchbar.create(Vl(n.dataset(),{el:e}))}))},tabBeforeRemove:function(e){Gc(e).find(".searchbar-init").each((function(e){e.f7Searchbar&&e.f7Searchbar.destroy&&e.f7Searchbar.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".searchbar-init").each((function(e){var n=Gc(e);t.searchbar.create(Vl(n.dataset(),{el:e}))})),"ios"===t.theme&&e.view&&e.view.router.dynamicNavbar&&e.$navbarEl&&e.$navbarEl.length>0&&e.$navbarEl.find(".searchbar-init").each((function(e){var n=Gc(e);t.searchbar.create(Vl(n.dataset(),{el:e}))}))},pageBeforeRemove:function(e){e.$el.find(".searchbar-init").each((function(e){e.f7Searchbar&&e.f7Searchbar.destroy&&e.f7Searchbar.destroy()})),"ios"===this.theme&&e.view&&e.view.router.dynamicNavbar&&e.$navbarEl&&e.$navbarEl.length>0&&e.$navbarEl.find(".searchbar-init").each((function(e){e.f7Searchbar&&e.f7Searchbar.destroy&&e.f7Searchbar.destroy()}))}},clicks:{".searchbar-clear":function(e,t){void 0===t&&(t={});var n=this.searchbar.get(t.searchbar);n&&n.clear()},".searchbar-enable":function(e,t){void 0===t&&(t={});var n=this.searchbar.get(t.searchbar);n&&n.enable(!0)},".searchbar-disable":function(e,t){void 0===t&&(t={});var n=this.searchbar.get(t.searchbar);n&&n.disable()},".searchbar-toggle":function(e,t){void 0===t&&(t={});var n=this.searchbar.get(t.searchbar);n&&n.toggle()}},vnode:{"searchbar-init":{insert:function(e){var t=e.elm,n=Gc(t);this.searchbar.create(Vl(n.dataset(),{el:t}))},destroy:function(e){var t=e.elm;t.f7Searchbar&&t.f7Searchbar.destroy&&t.f7Searchbar.destroy()}}}};function pm(){return pm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pm.apply(this,arguments)}function dm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hm(e,t){return hm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},hm(e,t)}var fm=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var a=dm(r=e.call(this,n,[t])||this),s={autoLayout:!0,messages:[],newMessagesFirst:!1,scrollMessages:!0,scrollMessagesOnEdge:!0,firstMessageRule:void 0,lastMessageRule:void 0,tailMessageRule:void 0,sameNameMessageRule:void 0,sameHeaderMessageRule:void 0,sameFooterMessageRule:void 0,sameAvatarMessageRule:void 0,customClassMessageRule:void 0,renderMessage:void 0};a.useModulesParams(s),a.params=Vl(s,n);var o=Gc(n.el).eq(0);if(0===o.length)return a||dm(r);if(o[0].f7Messages)return o[0].f7Messages||dm(r);o[0].f7Messages=a;var i=o.closest(".page-content").eq(0);return Vl(a,{messages:a.params.messages,$el:o,el:o[0],$pageContentEl:i,pageContentEl:i[0]}),a.useModules(),a.init(),a||dm(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,hm(t,n);var a=r.prototype;return a.getMessageData=function(e){var t=Gc(e),n={name:t.find(".message-name").html(),header:t.find(".message-header").html(),textHeader:t.find(".message-text-header").html(),textFooter:t.find(".message-text-footer").html(),footer:t.find(".message-footer").html(),isTitle:t.hasClass("messages-title"),type:t.hasClass("message-sent")?"sent":"received",text:t.find(".message-text").html(),image:t.find(".message-image").html(),imageSrc:t.find(".message-image img").attr("src"),typing:t.hasClass("message-typing")};n.isTitle&&(n.text=t.html()),n.text&&n.textHeader&&(n.text=n.text.replace('<div class="message-text-header">'+n.textHeader+"</div>","")),n.text&&n.textFooter&&(n.text=n.text.replace('<div class="message-text-footer">'+n.textFooter+"</div>",""));var r=t.find(".message-avatar").css("background-image");return"none"!==r&&""!==r||(r=void 0),r=r&&"string"==typeof r?r.replace("url(","").replace(")","").replace(/"/g,"").replace(/'/g,""):void 0,n.avatar=r,n},a.getMessagesData=function(){var e=this,t=[];return e.$el.find(".message, .messages-title").each((function(n){t.push(e.getMessageData(n))})),t},a.renderMessage=function(e){var t=this,n=Vl({type:"sent",attrs:{}},e);return t.params.renderMessage?t.params.renderMessage.call(t,n):n.isTitle?'<div class="messages-title">'+n.text+"</div>":Od("div",pm({class:"message message-"+n.type+" "+(n.isTyping?"message-typing":"")+" "+(n.cssClass||"")},n.attrs),n.avatar&&Od("div",{class:"message-avatar",style:"background-image:url("+n.avatar+")"}),Od("div",{class:"message-content"},n.name&&Od("div",{class:"message-name"},n.name),n.header&&Od("div",{class:"message-header"},n.header),Od("div",{class:"message-bubble"},n.textHeader&&Od("div",{class:"message-text-header"},n.textHeader),n.image&&Od("div",{class:"message-image"},n.image),n.imageSrc&&!n.image&&Od("div",{class:"message-image"},Od("img",{src:n.imageSrc})),(n.text||n.isTyping)&&Od("div",{class:"message-text"},n.text||"",n.isTyping&&Od("div",{class:"message-typing-indicator"},Od("div",null),Od("div",null),Od("div",null))),n.textFooter&&Od("div",{class:"message-text-footer"},n.textFooter)),n.footer&&Od("div",{class:"message-footer"},n.footer)))},a.renderMessages=function(e,t){void 0===e&&(e=this.messages),void 0===t&&(t=this.params.newMessagesFirst?"prepend":"append");var n=this,r=e.map((function(e){return n.renderMessage(e)})).join("");n.$el[t](r)},a.isFirstMessage=function(){var e,t=this;return!!t.params.firstMessageRule&&(e=t.params).firstMessageRule.apply(e,arguments)},a.isLastMessage=function(){var e,t=this;return!!t.params.lastMessageRule&&(e=t.params).lastMessageRule.apply(e,arguments)},a.isTailMessage=function(){var e,t=this;return!!t.params.tailMessageRule&&(e=t.params).tailMessageRule.apply(e,arguments)},a.isSameNameMessage=function(){var e,t=this;return!!t.params.sameNameMessageRule&&(e=t.params).sameNameMessageRule.apply(e,arguments)},a.isSameHeaderMessage=function(){var e,t=this;return!!t.params.sameHeaderMessageRule&&(e=t.params).sameHeaderMessageRule.apply(e,arguments)},a.isSameFooterMessage=function(){var e,t=this;return!!t.params.sameFooterMessageRule&&(e=t.params).sameFooterMessageRule.apply(e,arguments)},a.isSameAvatarMessage=function(){var e,t=this;return!!t.params.sameAvatarMessageRule&&(e=t.params).sameAvatarMessageRule.apply(e,arguments)},a.isCustomClassMessage=function(){var e,t=this;if(t.params.customClassMessageRule)return(e=t.params).customClassMessageRule.apply(e,arguments)},a.layout=function(){var e=this;e.$el.find(".message, .messages-title").each((function(t,n){var r=Gc(t);e.messages||(e.messages=e.getMessagesData());var a=[],s=e.messages[n],o=e.messages[n-1],i=e.messages[n+1];e.isFirstMessage(s,o,i)&&a.push("message-first"),e.isLastMessage(s,o,i)&&a.push("message-last"),e.isTailMessage(s,o,i)&&a.push("message-tail"),e.isSameNameMessage(s,o,i)&&a.push("message-same-name"),e.isSameHeaderMessage(s,o,i)&&a.push("message-same-header"),e.isSameFooterMessage(s,o,i)&&a.push("message-same-footer"),e.isSameAvatarMessage(s,o,i)&&a.push("message-same-avatar");var l=e.isCustomClassMessage(s,o,i);l&&l.length&&("string"==typeof l&&(l=l.split(" ")),l.forEach((function(e){a.push(e)}))),r.removeClass("message-first message-last message-tail message-same-name message-same-header message-same-footer message-same-avatar"),a.forEach((function(e){r.addClass(e)}))}))},a.clear=function(){this.messages=[],this.$el.html("")},a.removeMessage=function(e,t){void 0===t&&(t=!0);var n,r,a=this;return"number"==typeof e?(n=e,r=a.$el.find(".message, .messages-title").eq(n)):a.messages&&a.messages.indexOf(e)>=0?(n=a.messages.indexOf(e),r=a.$el.children().eq(n)):n=(r=Gc(e)).index(),0===r.length||(r.remove(),a.messages.splice(n,1),a.params.autoLayout&&t&&a.layout()),a},a.removeMessages=function(e,t){void 0===t&&(t=!0);var n=this;if(Array.isArray(e)){var r=[];e.forEach((function(e){r.push(n.$el.find(".message, .messages-title").eq(e))})),r.forEach((function(e){n.removeMessage(e,!1)}))}else Gc(e).each((function(e){n.removeMessage(e,!1)}));return n.params.autoLayout&&t&&n.layout(),n},a.addMessage=function(){for(var e,t,n,r=this,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return"boolean"==typeof s[1]?(e=s[0],t=s[1],n=s[2]):(e=s[0],n=s[1],t=s[2]),void 0===t&&(t=!0),void 0===n&&(n=r.params.newMessagesFirst?"prepend":"append"),r.addMessages([e],t,n)},a.setScrollData=function(){var e=this,t=e.pageContentEl.scrollHeight,n=e.pageContentEl.offsetHeight,r=e.pageContentEl.scrollTop;return e.scrollData={scrollHeightBefore:t,heightBefore:n,scrollBefore:r},{scrollHeightBefore:t,heightBefore:n,scrollBefore:r}},a.addMessages=function(){for(var e,t,n,r=this,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];"boolean"==typeof s[1]?(e=s[0],t=s[1],n=s[2]):(e=s[0],n=s[1],t=s[2]),void 0===t&&(t=!0),void 0===n&&(n=r.params.newMessagesFirst?"prepend":"append");var i=r.setScrollData(),l=i.scrollHeightBefore,u=i.scrollBefore,c="",p=r.messages.filter((function(e){return e.isTyping}))[0];e.forEach((function(e){p?"append"===n?r.messages.splice(r.messages.indexOf(p),0,e):r.messages.splice(r.messages.indexOf(p)+1,0,e):r.messages["append"===n?"push":"unshift"](e),c+=r.renderMessage(e)}));var d=Gc(c);return t&&("append"!==n||r.params.newMessagesFirst||d.addClass("message-appear-from-bottom"),"prepend"===n&&r.params.newMessagesFirst&&d.addClass("message-appear-from-top")),p?"append"===n?d.insertBefore(r.$el.find(".message-typing")):d.insertAfter(r.$el.find(".message-typing")):r.$el[n](d),r.params.autoLayout&&r.layout(),"prepend"!==n||p||(r.pageContentEl.scrollTop=u+(r.pageContentEl.scrollHeight-l)),r.params.scrollMessages&&("append"===n&&!r.params.newMessagesFirst||"prepend"===n&&r.params.newMessagesFirst&&!p)&&r.scrollWithEdgeCheck(t),r},a.showTyping=function(e){void 0===e&&(e={});var t=this,n=t.messages.filter((function(e){return e.isTyping}))[0];return n&&t.removeMessage(t.messages.indexOf(n)),t.addMessage(Vl({type:"received",isTyping:!0},e)),t},a.hideTyping=function(){var e,t,n=this;if(n.messages.forEach((function(t,n){t.isTyping&&(e=n)})),void 0!==e&&n.$el.find(".message").eq(e).hasClass("message-typing")&&(t=!0,n.removeMessage(e)),!t){var r=n.$el.find(".message-typing");r.length&&n.removeMessage(r)}return n},a.scrollWithEdgeCheck=function(e){var t=this,n=t.scrollData,r=n.scrollBefore,a=n.scrollHeightBefore,s=n.heightBefore;if(t.params.scrollMessagesOnEdge){var o=!1;t.params.newMessagesFirst&&0===r&&(o=!0),!t.params.newMessagesFirst&&r-(a-s)>=-10&&(o=!0),o&&t.scroll(e?void 0:0)}else t.scroll(e?void 0:0)},a.scroll=function(e,t){void 0===e&&(e=300);var n,r=this,a=r.pageContentEl.scrollTop;if(void 0!==t)n=t;else if((n=r.params.newMessagesFirst?0:r.pageContentEl.scrollHeight-r.pageContentEl.offsetHeight)===a)return r;return r.$pageContentEl.scrollTop(n,e),r},a.init=function(){var e=this;e.messages&&0!==e.messages.length||(e.messages=e.getMessagesData()),e.params.messages&&e.params.messages.length&&e.renderMessages(),e.params.autoLayout&&e.layout(),e.params.scrollMessages&&e.scroll(0)},a.destroy=function(){var e=this;e.emit("local::beforeDestroy messagesBeforeDestroy",e),e.$el.trigger("messages:beforedestroy"),e.$el[0]&&(e.$el[0].f7Messages=null,delete e.$el[0].f7Messages),Ol(e)},r}(au),mm=fm,gm={name:"messages",static:{Messages:mm},create:function(){this.messages=Yc({defaultSelector:".messages",constructor:mm,app:this,domProp:"f7Messages",addMethods:"renderMessages layout scroll clear removeMessage removeMessages addMessage addMessages".split(" ")})},on:{tabBeforeRemove:function(e){var t=this;Gc(e).find(".messages-init").each((function(e){t.messages.destroy(e)}))},tabMounted:function(e){var t=this;Gc(e).find(".messages-init").each((function(e){t.messages.create({el:e})}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".messages-init").each((function(e){t.messages.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".messages-init").each((function(e){t.messages.create({el:e})}))}},vnode:{"messages-init":{insert:function(e){var t=e.elm;this.messages.create({el:t})},destroy:function(e){var t=e.elm;this.messages.destroy(t)}}}};function vm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bm(e,t){return bm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},bm(e,t)}var ym=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var a=vm(r=e.call(this,n,[t])||this),s={top:!1,topOffset:0,bottomOffset:0,attachments:[],renderAttachments:void 0,renderAttachment:void 0,maxHeight:null,resizePage:!0};a.useModulesParams(s),a.params=Vl(s,n);var o=Gc(a.params.el);if(0===o.length)return a||vm(r);if(o[0].f7Messagebar)return o[0].f7Messagebar||vm(r);o[0].f7Messagebar=a;var i,l=o.parents(".page").eq(0),u=l.find(".page-content").eq(0),c=o.find(".messagebar-area");i=a.params.textareaEl?Gc(a.params.textareaEl):o.find("textarea");var p=o.find(".messagebar-attachments"),d=o.find(".messagebar-sheet");function h(){a.params.resizePage&&a.resizePage()}function f(e){e.preventDefault()}function m(e){var t=Gc(this).index();Gc(e.target).closest(".messagebar-attachment-delete").length?(Gc(this).trigger("messagebar:attachmentdelete",t),a.emit("local::attachmentDelete messagebarAttachmentDelete",a,this,t)):(Gc(this).trigger("messagebar:attachmentclick",t),a.emit("local::attachmentClick messagebarAttachmentClick",a,this,t))}function g(){a.checkEmptyState(),a.$el.trigger("messagebar:change"),a.emit("local::change messagebarChange",a)}function v(){a.sheetHide(),a.$el.addClass("messagebar-focused"),a.$el.trigger("messagebar:focus"),a.emit("local::focus messagebarFocus",a)}function b(){a.$el.removeClass("messagebar-focused"),a.$el.trigger("messagebar:blur"),a.emit("local::blur messagebarBlur",a)}return a.params.top&&o.addClass("messagebar-top"),Vl(a,{$el:o,el:o[0],$areaEl:c,areaEl:c[0],$textareaEl:i,textareaEl:i[0],$attachmentsEl:p,attachmentsEl:p[0],attachmentsVisible:p.hasClass("messagebar-attachments-visible"),$sheetEl:d,sheetEl:d[0],sheetVisible:d.hasClass("messagebar-sheet-visible"),$pageEl:l,pageEl:l[0],$pageContentEl:u,pageContentEl:u,top:o.hasClass("messagebar-top")||a.params.top,attachments:[]}),a.attachEvents=function(){o.on("textarea:resize",h),o.on("submit",f),o.on("click",".messagebar-attachment",m),i.on("change input",g),i.on("focus",v),i.on("blur",b),t.on("resize",h)},a.detachEvents=function(){o.off("textarea:resize",h),o.off("submit",f),o.off("click",".messagebar-attachment",m),i.off("change input",g),i.off("focus",v),i.off("blur",b),t.off("resize",h)},a.useModules(),a.init(),a||vm(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,bm(t,n);var a=r.prototype;return a.focus=function(){return this.$textareaEl.focus(),this},a.blur=function(){return this.$textareaEl.blur(),this},a.clear=function(){return this.$textareaEl.val("").trigger("change"),this},a.getValue=function(){return this.$textareaEl.val().trim()},a.setValue=function(e){return this.$textareaEl.val(e).trigger("change"),this},a.setPlaceholder=function(e){return this.$textareaEl.attr("placeholder",e),this},a.resizePage=function(){var e=this,t=e.params,n=e.$el,r=e.top,a=e.$pageEl,s=e.$pageContentEl,o=e.$areaEl,i=e.$textareaEl,l=e.$sheetEl,u=e.$attachmentsEl,c=n[0].offsetHeight,p=t.maxHeight;if(r);else{var d=parseInt(s.css("padding-bottom"),10),h=c+t.bottomOffset;if(h!==d&&s.length){var f=parseInt(s.css("padding-top"),10),m=s[0].scrollHeight,g=s[0].offsetHeight,v=s[0].scrollTop===m-g;p||(p=a[0].offsetHeight-f-l.outerHeight()-u.outerHeight()-parseInt(o.css("margin-top"),10)-parseInt(o.css("margin-bottom"),10)),i.css("max-height",p+"px"),s.css("padding-bottom",h+"px"),v&&s.scrollTop(s[0].scrollHeight-g),n.trigger("messagebar:resizepage"),e.emit("local::resizePage messagebarResizePage",e)}}},a.checkEmptyState=function(){var e=this.$el,t=this.$textareaEl.val().trim();t&&t.length?e.addClass("messagebar-with-value"):e.removeClass("messagebar-with-value")},a.attachmentsCreate=function(e){void 0===e&&(e="");var t=this,n=Gc('<div class="messagebar-attachments">'+e+"</div>");return n.insertBefore(t.$textareaEl),Vl(t,{$attachmentsEl:n,attachmentsEl:n[0]}),t},a.attachmentsShow=function(e){void 0===e&&(e="");var t=this;return t.$attachmentsEl=t.$el.find(".messagebar-attachments"),0===t.$attachmentsEl.length&&t.attachmentsCreate(e),t.$el.addClass("messagebar-attachments-visible"),t.attachmentsVisible=!0,t.params.resizePage&&t.resizePage(),t},a.attachmentsHide=function(){var e=this;return e.$el.removeClass("messagebar-attachments-visible"),e.attachmentsVisible=!1,e.params.resizePage&&e.resizePage(),e},a.attachmentsToggle=function(){var e=this;return e.attachmentsVisible?e.attachmentsHide():e.attachmentsShow(),e},a.renderAttachment=function(e){var t=this;return t.params.renderAttachment?t.params.renderAttachment.call(t,e):'\n      <div class="messagebar-attachment">\n        <img src="'+e+'">\n        <span class="messagebar-attachment-delete"></span>\n      </div>\n    '},a.renderAttachments=function(){var e,t=this;e=t.params.renderAttachments?t.params.renderAttachments.call(t,t.attachments):""+t.attachments.map((function(e){return t.renderAttachment(e)})).join(""),0===t.$attachmentsEl.length?t.attachmentsCreate(e):t.$attachmentsEl.html(e)},a.sheetCreate=function(e){void 0===e&&(e="");var t=this,n=Gc('<div class="messagebar-sheet">'+e+"</div>");return t.$el.append(n),Vl(t,{$sheetEl:n,sheetEl:n[0]}),t},a.sheetShow=function(e){void 0===e&&(e="");var t=this;return t.$sheetEl=t.$el.find(".messagebar-sheet"),0===t.$sheetEl.length&&t.sheetCreate(e),t.$el.addClass("messagebar-sheet-visible"),t.sheetVisible=!0,t.params.resizePage&&t.resizePage(),t},a.sheetHide=function(){var e=this;return e.$el.removeClass("messagebar-sheet-visible"),e.sheetVisible=!1,e.params.resizePage&&e.resizePage(),e},a.sheetToggle=function(){var e=this;return e.sheetVisible?e.sheetHide():e.sheetShow(),e},a.init=function(){var e=this;return e.attachEvents(),e.checkEmptyState(),e},a.destroy=function(){var e=this;e.emit("local::beforeDestroy messagebarBeforeDestroy",e),e.$el.trigger("messagebar:beforedestroy"),e.detachEvents(),e.$el[0]&&(e.$el[0].f7Messagebar=null,delete e.$el[0].f7Messagebar),Ol(e)},r}(au),wm=ym,xm={name:"messagebar",static:{Messagebar:wm},create:function(){this.messagebar=Yc({defaultSelector:".messagebar",constructor:wm,app:this,domProp:"f7Messagebar",addMethods:"clear getValue setValue setPlaceholder resizePage focus blur attachmentsCreate attachmentsShow attachmentsHide attachmentsToggle renderAttachments sheetCreate sheetShow sheetHide sheetToggle".split(" ")})},on:{tabBeforeRemove:function(e){var t=this;Gc(e).find(".messagebar-init").each((function(e){t.messagebar.destroy(e)}))},tabMounted:function(e){var t=this;Gc(e).find(".messagebar-init").each((function(e){t.messagebar.create(Vl({el:e},Gc(e).dataset()))}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".messagebar-init").each((function(e){t.messagebar.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".messagebar-init").each((function(e){t.messagebar.create(Vl({el:e},Gc(e).dataset()))}))}},vnode:{"messagebar-init":{insert:function(e){var t=e.elm;this.messagebar.create(Vl({el:t},Gc(t).dataset()))},destroy:function(e){var t=e.elm;this.messagebar.destroy(t)}}}},km={addClass:fu,removeClass:mu,hasClass:vu,toggleClass:gu,attr:bu,removeAttr:yu,transform:Tu,transition:$u,on:Iu,off:Nu,trigger:Au,transitionEnd:Mu,outerWidth:Pu,outerHeight:Lu,styles:Vu,offset:Bu,css:Wu,each:Hu,html:Uu,text:Gu,is:qu,index:Xu,eq:Ku,append:Yu,prepend:Zu,next:nc,nextAll:rc,prev:ac,prevAll:sc,parent:ic,parents:lc,closest:uc,find:cc,children:pc,filter:ju,remove:dc};Object.keys(km).forEach((function(e){Object.defineProperty(hu.fn,e,{value:km[e],writable:!0})}));var Cm,Sm,Em,Tm=hu;function $m(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function Im(){return Date.now()}function Nm(e,t){void 0===t&&(t="x");var n,r,a,s=wl(),o=function(e){var t,n=wl();return n.getComputedStyle&&(t=n.getComputedStyle(e,null)),!t&&e.currentStyle&&(t=e.currentStyle),t||(t=e.style),t}(e);return s.WebKitCSSMatrix?((r=o.transform||o.webkitTransform).split(",").length>6&&(r=r.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),a=new s.WebKitCSSMatrix("none"===r?"":r)):n=(a=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(r=s.WebKitCSSMatrix?a.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===t&&(r=s.WebKitCSSMatrix?a.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),r||0}function Om(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function Am(e){return"undefined"!=typeof window&&void 0!==window.HTMLElement?e instanceof HTMLElement:e&&(1===e.nodeType||11===e.nodeType)}function Mm(){for(var e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"],n=1;n<arguments.length;n+=1){var r=n<0||arguments.length<=n?void 0:arguments[n];if(null!=r&&!Am(r))for(var a=Object.keys(Object(r)).filter((function(e){return t.indexOf(e)<0})),s=0,o=a.length;s<o;s+=1){var i=a[s],l=Object.getOwnPropertyDescriptor(r,i);void 0!==l&&l.enumerable&&(Om(e[i])&&Om(r[i])?r[i].__swiper__?e[i]=r[i]:Mm(e[i],r[i]):!Om(e[i])&&Om(r[i])?(e[i]={},r[i].__swiper__?e[i]=r[i]:Mm(e[i],r[i])):e[i]=r[i])}}return e}function _m(e,t){Object.keys(t).forEach((function(n){Om(t[n])&&Object.keys(t[n]).forEach((function(r){"function"==typeof t[n][r]&&(t[n][r]=t[n][r].bind(e))})),e[n]=t[n]}))}function Rm(e){return void 0===e&&(e=""),"."+e.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}function Pm(e,t,n,r){var a=bl();return n&&Object.keys(r).forEach((function(n){if(!t[n]&&!0===t.auto){var s=a.createElement("div");s.className=r[n],e.append(s),t[n]=s}})),t}function Dm(){return Cm||(Cm=function(){var e=wl(),t=bl();return{touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),pointerEvents:!!e.PointerEvent&&"maxTouchPoints"in e.navigator&&e.navigator.maxTouchPoints>=0,observer:"MutationObserver"in e||"WebkitMutationObserver"in e,passiveListener:function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("testPassiveListener",null,n)}catch(e){}return t}(),gestures:"ongesturestart"in e}}()),Cm}function Lm(e){return void 0===e&&(e={}),Sm||(Sm=function(e){var t=(void 0===e?{}:e).userAgent,n=Dm(),r=wl(),a=r.navigator.platform,s=t||r.navigator.userAgent,o={ios:!1,android:!1},i=r.screen.width,l=r.screen.height,u=s.match(/(Android);?[\s\/]+([\d.]+)?/),c=s.match(/(iPad).*OS\s([\d_]+)/),p=s.match(/(iPod)(.*OS\s([\d_]+))?/),d=!c&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h="Win32"===a,f="MacIntel"===a;return!c&&f&&n.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(i+"x"+l)>=0&&((c=s.match(/(Version)\/([\d.]+)/))||(c=[0,1,"13_0_0"]),f=!1),u&&!h&&(o.os="android",o.android=!0),(c||d||p)&&(o.os="ios",o.ios=!0),o}(e)),Sm}function Bm(){return Em||(Em=function(){var e,t=wl();return{isEdge:!!t.navigator.userAgent.match(/Edge/g),isSafari:(e=t.navigator.userAgent.toLowerCase(),e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}()),Em}var Fm={name:"resize",create:function(){var e=this;Mm(e,{resize:{observer:null,createObserver:function(){e&&!e.destroyed&&e.initialized&&(e.resize.observer=new ResizeObserver((function(t){var n=e.width,r=e.height,a=n,s=r;t.forEach((function(t){var n=t.contentBoxSize,r=t.contentRect,o=t.target;o&&o!==e.el||(a=r?r.width:(n[0]||n).inlineSize,s=r?r.height:(n[0]||n).blockSize)})),a===n&&s===r||e.resize.resizeHandler()})),e.resize.observer.observe(e.el))},removeObserver:function(){e.resize.observer&&e.resize.observer.unobserve&&e.el&&(e.resize.observer.unobserve(e.el),e.resize.observer=null)},resizeHandler:function(){e&&!e.destroyed&&e.initialized&&(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){e&&!e.destroyed&&e.initialized&&e.emit("orientationchange")}}})},on:{init:function(e){var t=wl();e.params.resizeObserver&&void 0!==wl().ResizeObserver?e.resize.createObserver():(t.addEventListener("resize",e.resize.resizeHandler),t.addEventListener("orientationchange",e.resize.orientationChangeHandler))},destroy:function(e){var t=wl();e.resize.removeObserver(),t.removeEventListener("resize",e.resize.resizeHandler),t.removeEventListener("orientationchange",e.resize.orientationChangeHandler)}}};function zm(){return zm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zm.apply(this,arguments)}var Vm={attach:function(e,t){void 0===t&&(t={});var n=wl(),r=this,a=new(n.MutationObserver||n.WebkitMutationObserver)((function(e){if(1!==e.length){var t=function(){r.emit("observerUpdate",e[0])};n.requestAnimationFrame?n.requestAnimationFrame(t):n.setTimeout(t,0)}else r.emit("observerUpdate",e[0])}));a.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),r.observer.observers.push(a)},init:function(){var e=this;if(e.support.observer&&e.params.observer){if(e.params.observeParents)for(var t=e.$el.parents(),n=0;n<t.length;n+=1)e.observer.attach(t[n]);e.observer.attach(e.$el[0],{childList:e.params.observeSlideChildren}),e.observer.attach(e.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach((function(e){e.disconnect()})),this.observer.observers=[]}},Wm={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){_m(this,{observer:zm({},Vm,{observers:[]})})},on:{init:function(e){e.observer.init()},destroy:function(e){e.observer.destroy()}}},Hm={on:function(e,t,n){var r=this;if("function"!=typeof t)return r;var a=n?"unshift":"push";return e.split(" ").forEach((function(e){r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][a](t)})),r},once:function(e,t,n){var r=this;if("function"!=typeof t)return r;function a(){r.off(e,a),a.__emitterProxy&&delete a.__emitterProxy;for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];t.apply(r,s)}return a.__emitterProxy=t,r.on(e,a,n)},onAny:function(e,t){var n=this;if("function"!=typeof e)return n;var r=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[r](e),n},offAny:function(e){var t=this;if(!t.eventsAnyListeners)return t;var n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off:function(e,t){var n=this;return n.eventsListeners?(e.split(" ").forEach((function(e){void 0===t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach((function(r,a){(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[e].splice(a,1)}))})),n):n},emit:function(){var e,t,n,r=this;if(!r.eventsListeners)return r;for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];"string"==typeof s[0]||Array.isArray(s[0])?(e=s[0],t=s.slice(1,s.length),n=r):(e=s[0].events,t=s[0].data,n=s[0].context||r),t.unshift(n);var i=Array.isArray(e)?e:e.split(" ");return i.forEach((function(e){r.eventsAnyListeners&&r.eventsAnyListeners.length&&r.eventsAnyListeners.forEach((function(r){r.apply(n,[e].concat(t))})),r.eventsListeners&&r.eventsListeners[e]&&r.eventsListeners[e].forEach((function(e){e.apply(n,t)}))})),r}};var jm={updateSize:function(){var e,t,n=this,r=n.$el;e=void 0!==n.params.width&&null!==n.params.width?n.params.width:r[0].clientWidth,t=void 0!==n.params.height&&null!==n.params.height?n.params.height:r[0].clientHeight,0===e&&n.isHorizontal()||0===t&&n.isVertical()||(e=e-parseInt(r.css("padding-left")||0,10)-parseInt(r.css("padding-right")||0,10),t=t-parseInt(r.css("padding-top")||0,10)-parseInt(r.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Mm(n,{width:e,height:t,size:n.isHorizontal()?e:t}))},updateSlides:function(){var e=this;function t(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}function n(e,n){return parseFloat(e.getPropertyValue(t(n))||0)}var r=e.params,a=e.$wrapperEl,s=e.size,o=e.rtlTranslate,i=e.wrongRTL,l=e.virtual&&r.virtual.enabled,u=l?e.virtual.slides.length:e.slides.length,c=a.children("."+e.params.slideClass),p=l?e.virtual.slides.length:c.length,d=[],h=[],f=[],m=r.slidesOffsetBefore;"function"==typeof m&&(m=r.slidesOffsetBefore.call(e));var g=r.slidesOffsetAfter;"function"==typeof g&&(g=r.slidesOffsetAfter.call(e));var v=e.snapGrid.length,b=e.slidesGrid.length,y=r.spaceBetween,w=-m,x=0,k=0;if(void 0!==s){var C,S;"string"==typeof y&&y.indexOf("%")>=0&&(y=parseFloat(y.replace("%",""))/100*s),e.virtualSize=-y,o?c.css({marginLeft:"",marginBottom:"",marginTop:""}):c.css({marginRight:"",marginBottom:"",marginTop:""}),r.slidesPerColumn>1&&(C=Math.floor(p/r.slidesPerColumn)===p/e.params.slidesPerColumn?p:Math.ceil(p/r.slidesPerColumn)*r.slidesPerColumn,"auto"!==r.slidesPerView&&"row"===r.slidesPerColumnFill&&(C=Math.max(C,r.slidesPerView*r.slidesPerColumn)));for(var E,T,$,I=r.slidesPerColumn,N=C/I,O=Math.floor(p/r.slidesPerColumn),A=0;A<p;A+=1){S=0;var M=c.eq(A);if(r.slidesPerColumn>1){var _=void 0,R=void 0,P=void 0;if("row"===r.slidesPerColumnFill&&r.slidesPerGroup>1){var D=Math.floor(A/(r.slidesPerGroup*r.slidesPerColumn)),L=A-r.slidesPerColumn*r.slidesPerGroup*D,B=0===D?r.slidesPerGroup:Math.min(Math.ceil((p-D*I*r.slidesPerGroup)/I),r.slidesPerGroup);_=(R=L-(P=Math.floor(L/B))*B+D*r.slidesPerGroup)+P*C/I,M.css({"-webkit-box-ordinal-group":_,"-moz-box-ordinal-group":_,"-ms-flex-order":_,"-webkit-order":_,order:_})}else"column"===r.slidesPerColumnFill?(P=A-(R=Math.floor(A/I))*I,(R>O||R===O&&P===I-1)&&(P+=1)>=I&&(P=0,R+=1)):R=A-(P=Math.floor(A/N))*N;M.css(t("margin-top"),0!==P?r.spaceBetween&&r.spaceBetween+"px":"")}if("none"!==M.css("display")){if("auto"===r.slidesPerView){var F=getComputedStyle(M[0]),z=M[0].style.transform,V=M[0].style.webkitTransform;if(z&&(M[0].style.transform="none"),V&&(M[0].style.webkitTransform="none"),r.roundLengths)S=e.isHorizontal()?M.outerWidth(!0):M.outerHeight(!0);else{var W=n(F,"width"),H=n(F,"padding-left"),j=n(F,"padding-right"),U=n(F,"margin-left"),G=n(F,"margin-right"),q=F.getPropertyValue("box-sizing");if(q&&"border-box"===q)S=W+U+G;else{var X=M[0],K=X.clientWidth;S=W+H+j+U+G+(X.offsetWidth-K)}}z&&(M[0].style.transform=z),V&&(M[0].style.webkitTransform=V),r.roundLengths&&(S=Math.floor(S))}else S=(s-(r.slidesPerView-1)*y)/r.slidesPerView,r.roundLengths&&(S=Math.floor(S)),c[A]&&(c[A].style[t("width")]=S+"px");c[A]&&(c[A].swiperSlideSize=S),f.push(S),r.centeredSlides?(w=w+S/2+x/2+y,0===x&&0!==A&&(w=w-s/2-y),0===A&&(w=w-s/2-y),Math.abs(w)<.001&&(w=0),r.roundLengths&&(w=Math.floor(w)),k%r.slidesPerGroup==0&&d.push(w),h.push(w)):(r.roundLengths&&(w=Math.floor(w)),(k-Math.min(e.params.slidesPerGroupSkip,k))%e.params.slidesPerGroup==0&&d.push(w),h.push(w),w=w+S+y),e.virtualSize+=S+y,x=S,k+=1}}if(e.virtualSize=Math.max(e.virtualSize,s)+g,o&&i&&("slide"===r.effect||"coverflow"===r.effect)&&a.css({width:e.virtualSize+r.spaceBetween+"px"}),r.setWrapperSize)a.css(((T={})[t("width")]=e.virtualSize+r.spaceBetween+"px",T));if(r.slidesPerColumn>1)if(e.virtualSize=(S+r.spaceBetween)*C,e.virtualSize=Math.ceil(e.virtualSize/r.slidesPerColumn)-r.spaceBetween,a.css((($={})[t("width")]=e.virtualSize+r.spaceBetween+"px",$)),r.centeredSlides){E=[];for(var Y=0;Y<d.length;Y+=1){var J=d[Y];r.roundLengths&&(J=Math.floor(J)),d[Y]<e.virtualSize+d[0]&&E.push(J)}d=E}if(!r.centeredSlides){E=[];for(var Z=0;Z<d.length;Z+=1){var Q=d[Z];r.roundLengths&&(Q=Math.floor(Q)),d[Z]<=e.virtualSize-s&&E.push(Q)}d=E,Math.floor(e.virtualSize-s)-Math.floor(d[d.length-1])>1&&d.push(e.virtualSize-s)}if(0===d.length&&(d=[0]),0!==r.spaceBetween){var ee,te=e.isHorizontal()&&o?"marginLeft":t("marginRight");c.filter((function(e,t){return!r.cssMode||t!==c.length-1})).css(((ee={})[te]=y+"px",ee))}if(r.centeredSlides&&r.centeredSlidesBounds){var ne=0;f.forEach((function(e){ne+=e+(r.spaceBetween?r.spaceBetween:0)}));var re=(ne-=r.spaceBetween)-s;d=d.map((function(e){return e<0?-m:e>re?re+g:e}))}if(r.centerInsufficientSlides){var ae=0;if(f.forEach((function(e){ae+=e+(r.spaceBetween?r.spaceBetween:0)})),(ae-=r.spaceBetween)<s){var se=(s-ae)/2;d.forEach((function(e,t){d[t]=e-se})),h.forEach((function(e,t){h[t]=e+se}))}}Mm(e,{slides:c,snapGrid:d,slidesGrid:h,slidesSizesGrid:f}),p!==u&&e.emit("slidesLengthChange"),d.length!==v&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),h.length!==b&&e.emit("slidesGridLengthChange"),(r.watchSlidesProgress||r.watchSlidesVisibility)&&e.updateSlidesOffset()}},updateAutoHeight:function(e){var t,n=this,r=[],a=n.virtual&&n.params.virtual.enabled,s=0;"number"==typeof e?n.setTransition(e):!0===e&&n.setTransition(n.params.speed);var o=function(e){return a?n.slides.filter((function(t){return parseInt(t.getAttribute("data-swiper-slide-index"),10)===e}))[0]:n.slides.eq(e)[0]};if("auto"!==n.params.slidesPerView&&n.params.slidesPerView>1)if(n.params.centeredSlides)n.visibleSlides.each((function(e){r.push(e)}));else for(t=0;t<Math.ceil(n.params.slidesPerView);t+=1){var i=n.activeIndex+t;if(i>n.slides.length&&!a)break;r.push(o(i))}else r.push(o(n.activeIndex));for(t=0;t<r.length;t+=1)if(void 0!==r[t]){var l=r[t].offsetHeight;s=l>s?l:s}s&&n.$wrapperEl.css("height",s+"px")},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this,n=t.params,r=t.slides,a=t.rtlTranslate;if(0!==r.length){void 0===r[0].swiperSlideOffset&&t.updateSlidesOffset();var s=-e;a&&(s=e),r.removeClass(n.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(var o=0;o<r.length;o+=1){var i=r[o],l=(s+(n.centeredSlides?t.minTranslate():0)-i.swiperSlideOffset)/(i.swiperSlideSize+n.spaceBetween);if(n.watchSlidesVisibility||n.centeredSlides&&n.autoHeight){var u=-(s-i.swiperSlideOffset),c=u+t.slidesSizesGrid[o];(u>=0&&u<t.size-1||c>1&&c<=t.size||u<=0&&c>=t.size)&&(t.visibleSlides.push(i),t.visibleSlidesIndexes.push(o),r.eq(o).addClass(n.slideVisibleClass))}i.progress=a?-l:l}t.visibleSlides=Tm(t.visibleSlides)}},updateProgress:function(e){var t=this;if(void 0===e){var n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}var r=t.params,a=t.maxTranslate()-t.minTranslate(),s=t.progress,o=t.isBeginning,i=t.isEnd,l=o,u=i;0===a?(s=0,o=!0,i=!0):(o=(s=(e-t.minTranslate())/a)<=0,i=s>=1),Mm(t,{progress:s,isBeginning:o,isEnd:i}),(r.watchSlidesProgress||r.watchSlidesVisibility||r.centeredSlides&&r.autoHeight)&&t.updateSlidesProgress(e),o&&!l&&t.emit("reachBeginning toEdge"),i&&!u&&t.emit("reachEnd toEdge"),(l&&!o||u&&!i)&&t.emit("fromEdge"),t.emit("progress",s)},updateSlidesClasses:function(){var e,t=this,n=t.slides,r=t.params,a=t.$wrapperEl,s=t.activeIndex,o=t.realIndex,i=t.virtual&&r.virtual.enabled;n.removeClass(r.slideActiveClass+" "+r.slideNextClass+" "+r.slidePrevClass+" "+r.slideDuplicateActiveClass+" "+r.slideDuplicateNextClass+" "+r.slideDuplicatePrevClass),(e=i?t.$wrapperEl.find("."+r.slideClass+'[data-swiper-slide-index="'+s+'"]'):n.eq(s)).addClass(r.slideActiveClass),r.loop&&(e.hasClass(r.slideDuplicateClass)?a.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+o+'"]').addClass(r.slideDuplicateActiveClass):a.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+o+'"]').addClass(r.slideDuplicateActiveClass));var l=e.nextAll("."+r.slideClass).eq(0).addClass(r.slideNextClass);r.loop&&0===l.length&&(l=n.eq(0)).addClass(r.slideNextClass);var u=e.prevAll("."+r.slideClass).eq(0).addClass(r.slidePrevClass);r.loop&&0===u.length&&(u=n.eq(-1)).addClass(r.slidePrevClass),r.loop&&(l.hasClass(r.slideDuplicateClass)?a.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicateNextClass):a.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicateNextClass),u.hasClass(r.slideDuplicateClass)?a.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+u.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicatePrevClass):a.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+u.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicatePrevClass)),t.emitSlidesClasses()},updateActiveIndex:function(e){var t,n=this,r=n.rtlTranslate?n.translate:-n.translate,a=n.slidesGrid,s=n.snapGrid,o=n.params,i=n.activeIndex,l=n.realIndex,u=n.snapIndex,c=e;if(void 0===c){for(var p=0;p<a.length;p+=1)void 0!==a[p+1]?r>=a[p]&&r<a[p+1]-(a[p+1]-a[p])/2?c=p:r>=a[p]&&r<a[p+1]&&(c=p+1):r>=a[p]&&(c=p);o.normalizeSlideIndex&&(c<0||void 0===c)&&(c=0)}if(s.indexOf(r)>=0)t=s.indexOf(r);else{var d=Math.min(o.slidesPerGroupSkip,c);t=d+Math.floor((c-d)/o.slidesPerGroup)}if(t>=s.length&&(t=s.length-1),c!==i){var h=parseInt(n.slides.eq(c).attr("data-swiper-slide-index")||c,10);Mm(n,{snapIndex:t,realIndex:h,previousIndex:i,activeIndex:c}),n.emit("activeIndexChange"),n.emit("snapIndexChange"),l!==h&&n.emit("realIndexChange"),(n.initialized||n.params.runCallbacksOnInit)&&n.emit("slideChange")}else t!==u&&(n.snapIndex=t,n.emit("snapIndexChange"))},updateClickedSlide:function(e){var t,n=this,r=n.params,a=Tm(e.target).closest("."+r.slideClass)[0],s=!1;if(a)for(var o=0;o<n.slides.length;o+=1)if(n.slides[o]===a){s=!0,t=o;break}if(!a||!s)return n.clickedSlide=void 0,void(n.clickedIndex=void 0);n.clickedSlide=a,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(Tm(a).attr("data-swiper-slide-index"),10):n.clickedIndex=t,r.slideToClickedSlide&&void 0!==n.clickedIndex&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}};var Um={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t=this,n=t.params,r=t.rtlTranslate,a=t.translate,s=t.$wrapperEl;if(n.virtualTranslate)return r?-a:a;if(n.cssMode)return a;var o=Nm(s[0],e);return r&&(o=-o),o||0},setTranslate:function(e,t){var n=this,r=n.rtlTranslate,a=n.params,s=n.$wrapperEl,o=n.wrapperEl,i=n.progress,l=0,u=0;n.isHorizontal()?l=r?-e:e:u=e,a.roundLengths&&(l=Math.floor(l),u=Math.floor(u)),a.cssMode?o[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-l:-u:a.virtualTranslate||s.transform("translate3d("+l+"px, "+u+"px, 0px)"),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?l:u;var c=n.maxTranslate()-n.minTranslate();(0===c?0:(e-n.minTranslate())/c)!==i&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,n,r,a){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),void 0===r&&(r=!0);var s=this,o=s.params,i=s.wrapperEl;if(s.animating&&o.preventInteractionOnTransition)return!1;var l,u=s.minTranslate(),c=s.maxTranslate();if(l=r&&e>u?u:r&&e<c?c:e,s.updateProgress(l),o.cssMode){var p,d=s.isHorizontal();if(0===t)i[d?"scrollLeft":"scrollTop"]=-l;else if(i.scrollTo)i.scrollTo(((p={})[d?"left":"top"]=-l,p.behavior="smooth",p));else i[d?"scrollLeft":"scrollTop"]=-l;return!0}return 0===t?(s.setTransition(0),s.setTranslate(l),n&&(s.emit("beforeTransitionStart",t,a),s.emit("transitionEnd"))):(s.setTransition(t),s.setTranslate(l),n&&(s.emit("beforeTransitionStart",t,a),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,n&&s.emit("transitionEnd"))}),s.$wrapperEl[0].addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd))),!0}};var Gm={setTransition:function(e,t){var n=this;n.params.cssMode||n.$wrapperEl.transition(e),n.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var n=this,r=n.activeIndex,a=n.params,s=n.previousIndex;if(!a.cssMode){a.autoHeight&&n.updateAutoHeight();var o=t;if(o||(o=r>s?"next":r<s?"prev":"reset"),n.emit("transitionStart"),e&&r!==s){if("reset"===o)return void n.emit("slideResetTransitionStart");n.emit("slideChangeTransitionStart"),"next"===o?n.emit("slideNextTransitionStart"):n.emit("slidePrevTransitionStart")}}},transitionEnd:function(e,t){void 0===e&&(e=!0);var n=this,r=n.activeIndex,a=n.previousIndex,s=n.params;if(n.animating=!1,!s.cssMode){n.setTransition(0);var o=t;if(o||(o=r>a?"next":r<a?"prev":"reset"),n.emit("transitionEnd"),e&&r!==a){if("reset"===o)return void n.emit("slideResetTransitionEnd");n.emit("slideChangeTransitionEnd"),"next"===o?n.emit("slideNextTransitionEnd"):n.emit("slidePrevTransitionEnd")}}}};var qm={slideTo:function(e,t,n,r,a){if(void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),"number"!=typeof e&&"string"!=typeof e)throw new Error("The 'index' argument cannot have type other than 'number' or 'string'. ["+typeof e+"] given.");if("string"==typeof e){var s=parseInt(e,10);if(!isFinite(s))throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. ["+e+"] given.");e=s}var o=this,i=e;i<0&&(i=0);var l=o.params,u=o.snapGrid,c=o.slidesGrid,p=o.previousIndex,d=o.activeIndex,h=o.rtlTranslate,f=o.wrapperEl,m=o.enabled;if(o.animating&&l.preventInteractionOnTransition||!m&&!r&&!a)return!1;var g=Math.min(o.params.slidesPerGroupSkip,i),v=g+Math.floor((i-g)/o.params.slidesPerGroup);v>=u.length&&(v=u.length-1),(d||l.initialSlide||0)===(p||0)&&n&&o.emit("beforeSlideChangeStart");var b,y=-u[v];if(o.updateProgress(y),l.normalizeSlideIndex)for(var w=0;w<c.length;w+=1){var x=-Math.floor(100*y),k=Math.floor(100*c[w]),C=Math.floor(100*c[w+1]);void 0!==c[w+1]?x>=k&&x<C-(C-k)/2?i=w:x>=k&&x<C&&(i=w+1):x>=k&&(i=w)}if(o.initialized&&i!==d){if(!o.allowSlideNext&&y<o.translate&&y<o.minTranslate())return!1;if(!o.allowSlidePrev&&y>o.translate&&y>o.maxTranslate()&&(d||0)!==i)return!1}if(b=i>d?"next":i<d?"prev":"reset",h&&-y===o.translate||!h&&y===o.translate)return o.updateActiveIndex(i),l.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),"slide"!==l.effect&&o.setTranslate(y),"reset"!==b&&(o.transitionStart(n,b),o.transitionEnd(n,b)),!1;if(l.cssMode){var S,E=o.isHorizontal(),T=-y;if(h&&(T=f.scrollWidth-f.offsetWidth-T),0===t)f[E?"scrollLeft":"scrollTop"]=T;else if(f.scrollTo)f.scrollTo(((S={})[E?"left":"top"]=T,S.behavior="smooth",S));else f[E?"scrollLeft":"scrollTop"]=T;return!0}return 0===t?(o.setTransition(0),o.setTranslate(y),o.updateActiveIndex(i),o.updateSlidesClasses(),o.emit("beforeTransitionStart",t,r),o.transitionStart(n,b),o.transitionEnd(n,b)):(o.setTransition(t),o.setTranslate(y),o.updateActiveIndex(i),o.updateSlidesClasses(),o.emit("beforeTransitionStart",t,r),o.transitionStart(n,b),o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(e){o&&!o.destroyed&&e.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(n,b))}),o.$wrapperEl[0].addEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd))),!0},slideToLoop:function(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0);var a=this,s=e;return a.params.loop&&(s+=a.loopedSlides),a.slideTo(s,t,n,r)},slideNext:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var r=this,a=r.params,s=r.animating;if(!r.enabled)return r;var o=r.activeIndex<a.slidesPerGroupSkip?1:a.slidesPerGroup;if(a.loop){if(s&&a.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}return r.slideTo(r.activeIndex+o,e,t,n)},slidePrev:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var r=this,a=r.params,s=r.animating,o=r.snapGrid,i=r.slidesGrid,l=r.rtlTranslate;if(!r.enabled)return r;if(a.loop){if(s&&a.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}function u(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var c,p=u(l?r.translate:-r.translate),d=o.map((function(e){return u(e)})),h=o[d.indexOf(p)-1];return void 0===h&&a.cssMode&&o.forEach((function(e){!h&&p>=e&&(h=e)})),void 0!==h&&(c=i.indexOf(h))<0&&(c=r.activeIndex-1),r.slideTo(c,e,t,n)},slideReset:function(e,t,n){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,n)},slideToClosest:function(e,t,n,r){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===r&&(r=.5);var a=this,s=a.activeIndex,o=Math.min(a.params.slidesPerGroupSkip,s),i=o+Math.floor((s-o)/a.params.slidesPerGroup),l=a.rtlTranslate?a.translate:-a.translate;if(l>=a.snapGrid[i]){var u=a.snapGrid[i];l-u>(a.snapGrid[i+1]-u)*r&&(s+=a.params.slidesPerGroup)}else{var c=a.snapGrid[i-1];l-c<=(a.snapGrid[i]-c)*r&&(s-=a.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,a.slidesGrid.length-1),a.slideTo(s,e,t,n)},slideToClickedSlide:function(){var e,t=this,n=t.params,r=t.$wrapperEl,a="auto"===n.slidesPerView?t.slidesPerViewDynamic():n.slidesPerView,s=t.clickedIndex;if(n.loop){if(t.animating)return;e=parseInt(Tm(t.clickedSlide).attr("data-swiper-slide-index"),10),n.centeredSlides?s<t.loopedSlides-a/2||s>t.slides.length-t.loopedSlides+a/2?(t.loopFix(),s=r.children("."+n.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+n.slideDuplicateClass+")").eq(0).index(),$m((function(){t.slideTo(s)}))):t.slideTo(s):s>t.slides.length-a?(t.loopFix(),s=r.children("."+n.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+n.slideDuplicateClass+")").eq(0).index(),$m((function(){t.slideTo(s)}))):t.slideTo(s)}else t.slideTo(s)}};var Xm={loopCreate:function(){var e=this,t=bl(),n=e.params,r=e.$wrapperEl;r.children("."+n.slideClass+"."+n.slideDuplicateClass).remove();var a=r.children("."+n.slideClass);if(n.loopFillGroupWithBlank){var s=n.slidesPerGroup-a.length%n.slidesPerGroup;if(s!==n.slidesPerGroup){for(var o=0;o<s;o+=1){var i=Tm(t.createElement("div")).addClass(n.slideClass+" "+n.slideBlankClass);r.append(i)}a=r.children("."+n.slideClass)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=a.length),e.loopedSlides=Math.ceil(parseFloat(n.loopedSlides||n.slidesPerView,10)),e.loopedSlides+=n.loopAdditionalSlides,e.loopedSlides>a.length&&(e.loopedSlides=a.length);var l=[],u=[];a.each((function(t,n){var r=Tm(t);n<e.loopedSlides&&u.push(t),n<a.length&&n>=a.length-e.loopedSlides&&l.push(t),r.attr("data-swiper-slide-index",n)}));for(var c=0;c<u.length;c+=1)r.append(Tm(u[c].cloneNode(!0)).addClass(n.slideDuplicateClass));for(var p=l.length-1;p>=0;p-=1)r.prepend(Tm(l[p].cloneNode(!0)).addClass(n.slideDuplicateClass))},loopFix:function(){var e=this;e.emit("beforeLoopFix");var t,n=e.activeIndex,r=e.slides,a=e.loopedSlides,s=e.allowSlidePrev,o=e.allowSlideNext,i=e.snapGrid,l=e.rtlTranslate;e.allowSlidePrev=!0,e.allowSlideNext=!0;var u=-i[n]-e.getTranslate();if(n<a)t=r.length-3*a+n,t+=a,e.slideTo(t,0,!1,!0)&&0!==u&&e.setTranslate((l?-e.translate:e.translate)-u);else if(n>=r.length-a){t=-r.length+n+a,t+=a,e.slideTo(t,0,!1,!0)&&0!==u&&e.setTranslate((l?-e.translate:e.translate)-u)}e.allowSlidePrev=s,e.allowSlideNext=o,e.emit("loopFix")},loopDestroy:function(){var e=this,t=e.$wrapperEl,n=e.params,r=e.slides;t.children("."+n.slideClass+"."+n.slideDuplicateClass+",."+n.slideClass+"."+n.slideBlankClass).remove(),r.removeAttr("data-swiper-slide-index")}};var Km={setGrabCursor:function(e){var t=this;if(!(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)){var n=t.el;n.style.cursor="move",n.style.cursor=e?"-webkit-grabbing":"-webkit-grab",n.style.cursor=e?"-moz-grabbin":"-moz-grab",n.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){var e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.el.style.cursor="")}};var Ym={appendSlide:function(e){var t=this,n=t.$wrapperEl,r=t.params;if(r.loop&&t.loopDestroy(),"object"==typeof e&&"length"in e)for(var a=0;a<e.length;a+=1)e[a]&&n.append(e[a]);else n.append(e);r.loop&&t.loopCreate(),r.observer&&t.support.observer||t.update()},prependSlide:function(e){var t=this,n=t.params,r=t.$wrapperEl,a=t.activeIndex;n.loop&&t.loopDestroy();var s=a+1;if("object"==typeof e&&"length"in e){for(var o=0;o<e.length;o+=1)e[o]&&r.prepend(e[o]);s=a+e.length}else r.prepend(e);n.loop&&t.loopCreate(),n.observer&&t.support.observer||t.update(),t.slideTo(s,0,!1)},addSlide:function(e,t){var n=this,r=n.$wrapperEl,a=n.params,s=n.activeIndex;a.loop&&(s-=n.loopedSlides,n.loopDestroy(),n.slides=r.children("."+a.slideClass));var o=n.slides.length;if(e<=0)n.prependSlide(t);else if(e>=o)n.appendSlide(t);else{for(var i=s>e?s+1:s,l=[],u=o-1;u>=e;u-=1){var c=n.slides.eq(u);c.remove(),l.unshift(c)}if("object"==typeof t&&"length"in t){for(var p=0;p<t.length;p+=1)t[p]&&r.append(t[p]);i=s>e?s+t.length:s}else r.append(t);for(var d=0;d<l.length;d+=1)r.append(l[d]);a.loop&&n.loopCreate(),a.observer&&n.support.observer||n.update(),a.loop?n.slideTo(i+n.loopedSlides,0,!1):n.slideTo(i,0,!1)}},removeSlide:function(e){var t=this,n=t.params,r=t.$wrapperEl,a=t.activeIndex;n.loop&&(a-=t.loopedSlides,t.loopDestroy(),t.slides=r.children("."+n.slideClass));var s,o=a;if("object"==typeof e&&"length"in e){for(var i=0;i<e.length;i+=1)s=e[i],t.slides[s]&&t.slides.eq(s).remove(),s<o&&(o-=1);o=Math.max(o,0)}else s=e,t.slides[s]&&t.slides.eq(s).remove(),s<o&&(o-=1),o=Math.max(o,0);n.loop&&t.loopCreate(),n.observer&&t.support.observer||t.update(),n.loop?t.slideTo(o+t.loopedSlides,0,!1):t.slideTo(o,0,!1)},removeAllSlides:function(){for(var e=[],t=0;t<this.slides.length;t+=1)e.push(t);this.removeSlide(e)}};function Jm(e){var t=this,n=bl(),r=wl(),a=t.touchEventsData,s=t.params,o=t.touches;if(t.enabled&&(!t.animating||!s.preventInteractionOnTransition)){var i=e;i.originalEvent&&(i=i.originalEvent);var l=Tm(i.target);if(("wrapper"!==s.touchEventsTarget||l.closest(t.wrapperEl).length)&&(a.isTouchEvent="touchstart"===i.type,(a.isTouchEvent||!("which"in i)||3!==i.which)&&!(!a.isTouchEvent&&"button"in i&&i.button>0||a.isTouched&&a.isMoved))){!!s.noSwipingClass&&""!==s.noSwipingClass&&i.target&&i.target.shadowRoot&&e.path&&e.path[0]&&(l=Tm(e.path[0]));var u=s.noSwipingSelector?s.noSwipingSelector:"."+s.noSwipingClass,c=!(!i.target||!i.target.shadowRoot);if(s.noSwiping&&(c?function(e,t){return void 0===t&&(t=this),function t(n){return n&&n!==bl()&&n!==wl()?(n.assignedSlot&&(n=n.assignedSlot),n.closest(e)||t(n.getRootNode().host)):null}(t)}(u,i.target):l.closest(u)[0]))t.allowClick=!0;else if(!s.swipeHandler||l.closest(s.swipeHandler)[0]){o.currentX="touchstart"===i.type?i.targetTouches[0].pageX:i.pageX,o.currentY="touchstart"===i.type?i.targetTouches[0].pageY:i.pageY;var p=o.currentX,d=o.currentY,h=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,f=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(h&&(p<=f||p>=r.innerWidth-f)){if("prevent"!==h)return;e.preventDefault()}if(Mm(a,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=p,o.startY=d,a.touchStartTime=Im(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,s.threshold>0&&(a.allowThresholdMove=!1),"touchstart"!==i.type){var m=!0;l.is(a.focusableElements)&&(m=!1),n.activeElement&&Tm(n.activeElement).is(a.focusableElements)&&n.activeElement!==l[0]&&n.activeElement.blur();var g=m&&t.allowTouchMove&&s.touchStartPreventDefault;!s.touchStartForcePreventDefault&&!g||l[0].isContentEditable||i.preventDefault()}t.emit("touchStart",i)}}}}function Zm(e){var t=bl(),n=this,r=n.touchEventsData,a=n.params,s=n.touches,o=n.rtlTranslate;if(n.enabled){var i=e;if(i.originalEvent&&(i=i.originalEvent),r.isTouched){if(!r.isTouchEvent||"touchmove"===i.type){var l="touchmove"===i.type&&i.targetTouches&&(i.targetTouches[0]||i.changedTouches[0]),u="touchmove"===i.type?l.pageX:i.pageX,c="touchmove"===i.type?l.pageY:i.pageY;if(i.preventedByNestedSwiper)return s.startX=u,void(s.startY=c);if(!n.allowTouchMove)return n.allowClick=!1,void(r.isTouched&&(Mm(s,{startX:u,startY:c,currentX:u,currentY:c}),r.touchStartTime=Im()));if(r.isTouchEvent&&a.touchReleaseOnEdges&&!a.loop)if(n.isVertical()){if(c<s.startY&&n.translate<=n.maxTranslate()||c>s.startY&&n.translate>=n.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(u<s.startX&&n.translate<=n.maxTranslate()||u>s.startX&&n.translate>=n.minTranslate())return;if(r.isTouchEvent&&t.activeElement&&i.target===t.activeElement&&Tm(i.target).is(r.focusableElements))return r.isMoved=!0,void(n.allowClick=!1);if(r.allowTouchCallbacks&&n.emit("touchMove",i),!(i.targetTouches&&i.targetTouches.length>1)){s.currentX=u,s.currentY=c;var p=s.currentX-s.startX,d=s.currentY-s.startY;if(!(n.params.threshold&&Math.sqrt(Math.pow(p,2)+Math.pow(d,2))<n.params.threshold)){var h;if(void 0===r.isScrolling)n.isHorizontal()&&s.currentY===s.startY||n.isVertical()&&s.currentX===s.startX?r.isScrolling=!1:p*p+d*d>=25&&(h=180*Math.atan2(Math.abs(d),Math.abs(p))/Math.PI,r.isScrolling=n.isHorizontal()?h>a.touchAngle:90-h>a.touchAngle);if(r.isScrolling&&n.emit("touchMoveOpposite",i),void 0===r.startMoving&&(s.currentX===s.startX&&s.currentY===s.startY||(r.startMoving=!0)),r.isScrolling)r.isTouched=!1;else if(r.startMoving){n.allowClick=!1,!a.cssMode&&i.cancelable&&i.preventDefault(),a.touchMoveStopPropagation&&!a.nested&&i.stopPropagation(),r.isMoved||(a.loop&&n.loopFix(),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating&&n.$wrapperEl.trigger("webkitTransitionEnd transitionend"),r.allowMomentumBounce=!1,!a.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",i)),n.emit("sliderMove",i),r.isMoved=!0;var f=n.isHorizontal()?p:d;s.diff=f,f*=a.touchRatio,o&&(f=-f),n.swipeDirection=f>0?"prev":"next",r.currentTranslate=f+r.startTranslate;var m=!0,g=a.resistanceRatio;if(a.touchReleaseOnEdges&&(g=0),f>0&&r.currentTranslate>n.minTranslate()?(m=!1,a.resistance&&(r.currentTranslate=n.minTranslate()-1+Math.pow(-n.minTranslate()+r.startTranslate+f,g))):f<0&&r.currentTranslate<n.maxTranslate()&&(m=!1,a.resistance&&(r.currentTranslate=n.maxTranslate()+1-Math.pow(n.maxTranslate()-r.startTranslate-f,g))),m&&(i.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),n.allowSlidePrev||n.allowSlideNext||(r.currentTranslate=r.startTranslate),a.threshold>0){if(!(Math.abs(f)>a.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,r.currentTranslate=r.startTranslate,void(s.diff=n.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY)}a.followFinger&&!a.cssMode&&((a.freeMode||a.watchSlidesProgress||a.watchSlidesVisibility)&&(n.updateActiveIndex(),n.updateSlidesClasses()),a.freeMode&&(0===r.velocities.length&&r.velocities.push({position:s[n.isHorizontal()?"startX":"startY"],time:r.touchStartTime}),r.velocities.push({position:s[n.isHorizontal()?"currentX":"currentY"],time:Im()})),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}}}}}else r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",i)}}function Qm(e){var t=this,n=t.touchEventsData,r=t.params,a=t.touches,s=t.rtlTranslate,o=t.$wrapperEl,i=t.slidesGrid,l=t.snapGrid;if(t.enabled){var u=e;if(u.originalEvent&&(u=u.originalEvent),n.allowTouchCallbacks&&t.emit("touchEnd",u),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&r.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);r.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var c,p=Im(),d=p-n.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(u),t.emit("tap click",u),d<300&&p-n.lastClickTime<300&&t.emit("doubleTap doubleClick",u)),n.lastClickTime=Im(),$m((function(){t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===a.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,c=r.followFinger?s?t.translate:-t.translate:-n.currentTranslate,!r.cssMode)if(r.freeMode){if(c<-t.minTranslate())return void t.slideTo(t.activeIndex);if(c>-t.maxTranslate())return void(t.slides.length<l.length?t.slideTo(l.length-1):t.slideTo(t.slides.length-1));if(r.freeModeMomentum){if(n.velocities.length>1){var h=n.velocities.pop(),f=n.velocities.pop(),m=h.position-f.position,g=h.time-f.time;t.velocity=m/g,t.velocity/=2,Math.abs(t.velocity)<r.freeModeMinimumVelocity&&(t.velocity=0),(g>150||Im()-h.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=r.freeModeMomentumVelocityRatio,n.velocities.length=0;var v=1e3*r.freeModeMomentumRatio,b=t.velocity*v,y=t.translate+b;s&&(y=-y);var w,x,k=!1,C=20*Math.abs(t.velocity)*r.freeModeMomentumBounceRatio;if(y<t.maxTranslate())r.freeModeMomentumBounce?(y+t.maxTranslate()<-C&&(y=t.maxTranslate()-C),w=t.maxTranslate(),k=!0,n.allowMomentumBounce=!0):y=t.maxTranslate(),r.loop&&r.centeredSlides&&(x=!0);else if(y>t.minTranslate())r.freeModeMomentumBounce?(y-t.minTranslate()>C&&(y=t.minTranslate()+C),w=t.minTranslate(),k=!0,n.allowMomentumBounce=!0):y=t.minTranslate(),r.loop&&r.centeredSlides&&(x=!0);else if(r.freeModeSticky){for(var S,E=0;E<l.length;E+=1)if(l[E]>-y){S=E;break}y=-(y=Math.abs(l[S]-y)<Math.abs(l[S-1]-y)||"next"===t.swipeDirection?l[S]:l[S-1])}if(x&&t.once("transitionEnd",(function(){t.loopFix()})),0!==t.velocity){if(v=s?Math.abs((-y-t.translate)/t.velocity):Math.abs((y-t.translate)/t.velocity),r.freeModeSticky){var T=Math.abs((s?-y:y)-t.translate),$=t.slidesSizesGrid[t.activeIndex];v=T<$?r.speed:T<2*$?1.5*r.speed:2.5*r.speed}}else if(r.freeModeSticky)return void t.slideToClosest();r.freeModeMomentumBounce&&k?(t.updateProgress(w),t.setTransition(v),t.setTranslate(y),t.transitionStart(!0,t.swipeDirection),t.animating=!0,o.transitionEnd((function(){t&&!t.destroyed&&n.allowMomentumBounce&&(t.emit("momentumBounce"),t.setTransition(r.speed),setTimeout((function(){t.setTranslate(w),o.transitionEnd((function(){t&&!t.destroyed&&t.transitionEnd()}))}),0))}))):t.velocity?(t.updateProgress(y),t.setTransition(v),t.setTranslate(y),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,o.transitionEnd((function(){t&&!t.destroyed&&t.transitionEnd()})))):(t.emit("_freeModeNoMomentumRelease"),t.updateProgress(y)),t.updateActiveIndex(),t.updateSlidesClasses()}else{if(r.freeModeSticky)return void t.slideToClosest();r.freeMode&&t.emit("_freeModeNoMomentumRelease")}(!r.freeModeMomentum||d>=r.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}else{for(var I=0,N=t.slidesSizesGrid[0],O=0;O<i.length;O+=O<r.slidesPerGroupSkip?1:r.slidesPerGroup){var A=O<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;void 0!==i[O+A]?c>=i[O]&&c<i[O+A]&&(I=O,N=i[O+A]-i[O]):c>=i[O]&&(I=O,N=i[i.length-1]-i[i.length-2])}var M=(c-i[I])/N,_=I<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(d>r.longSwipesMs){if(!r.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(M>=r.longSwipesRatio?t.slideTo(I+_):t.slideTo(I)),"prev"===t.swipeDirection&&(M>1-r.longSwipesRatio?t.slideTo(I+_):t.slideTo(I))}else{if(!r.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(u.target===t.navigation.nextEl||u.target===t.navigation.prevEl)?u.target===t.navigation.nextEl?t.slideTo(I+_):t.slideTo(I):("next"===t.swipeDirection&&t.slideTo(I+_),"prev"===t.swipeDirection&&t.slideTo(I))}}}}function eg(){var e=this,t=e.params,n=e.el;if(!n||0!==n.offsetWidth){t.breakpoints&&e.setBreakpoint();var r=e.allowSlideNext,a=e.allowSlidePrev,s=e.snapGrid;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=a,e.allowSlideNext=r,e.params.watchOverflow&&s!==e.snapGrid&&e.checkOverflow()}}function tg(e){var t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function ng(){var e=this,t=e.wrapperEl,n=e.rtlTranslate;if(e.enabled){e.previousTranslate=e.translate,e.isHorizontal()?e.translate=n?t.scrollWidth-t.offsetWidth-t.scrollLeft:-t.scrollLeft:e.translate=-t.scrollTop,-0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();var r=e.maxTranslate()-e.minTranslate();(0===r?0:(e.translate-e.minTranslate())/r)!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}}var rg=!1;function ag(){}var sg={attachEvents:function(){var e=this,t=bl(),n=e.params,r=e.touchEvents,a=e.el,s=e.wrapperEl,o=e.device,i=e.support;e.onTouchStart=Jm.bind(e),e.onTouchMove=Zm.bind(e),e.onTouchEnd=Qm.bind(e),n.cssMode&&(e.onScroll=ng.bind(e)),e.onClick=tg.bind(e);var l=!!n.nested;if(!i.touch&&i.pointerEvents)a.addEventListener(r.start,e.onTouchStart,!1),t.addEventListener(r.move,e.onTouchMove,l),t.addEventListener(r.end,e.onTouchEnd,!1);else{if(i.touch){var u=!("touchstart"!==r.start||!i.passiveListener||!n.passiveListeners)&&{passive:!0,capture:!1};a.addEventListener(r.start,e.onTouchStart,u),a.addEventListener(r.move,e.onTouchMove,i.passiveListener?{passive:!1,capture:l}:l),a.addEventListener(r.end,e.onTouchEnd,u),r.cancel&&a.addEventListener(r.cancel,e.onTouchEnd,u),rg||(t.addEventListener("touchstart",ag),rg=!0)}(n.simulateTouch&&!o.ios&&!o.android||n.simulateTouch&&!i.touch&&o.ios)&&(a.addEventListener("mousedown",e.onTouchStart,!1),t.addEventListener("mousemove",e.onTouchMove,l),t.addEventListener("mouseup",e.onTouchEnd,!1))}(n.preventClicks||n.preventClicksPropagation)&&a.addEventListener("click",e.onClick,!0),n.cssMode&&s.addEventListener("scroll",e.onScroll),n.updateOnWindowResize?e.on(o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",eg,!0):e.on("observerUpdate",eg,!0)},detachEvents:function(){var e=this,t=bl(),n=e.params,r=e.touchEvents,a=e.el,s=e.wrapperEl,o=e.device,i=e.support,l=!!n.nested;if(!i.touch&&i.pointerEvents)a.removeEventListener(r.start,e.onTouchStart,!1),t.removeEventListener(r.move,e.onTouchMove,l),t.removeEventListener(r.end,e.onTouchEnd,!1);else{if(i.touch){var u=!("onTouchStart"!==r.start||!i.passiveListener||!n.passiveListeners)&&{passive:!0,capture:!1};a.removeEventListener(r.start,e.onTouchStart,u),a.removeEventListener(r.move,e.onTouchMove,l),a.removeEventListener(r.end,e.onTouchEnd,u),r.cancel&&a.removeEventListener(r.cancel,e.onTouchEnd,u)}(n.simulateTouch&&!o.ios&&!o.android||n.simulateTouch&&!i.touch&&o.ios)&&(a.removeEventListener("mousedown",e.onTouchStart,!1),t.removeEventListener("mousemove",e.onTouchMove,l),t.removeEventListener("mouseup",e.onTouchEnd,!1))}(n.preventClicks||n.preventClicksPropagation)&&a.removeEventListener("click",e.onClick,!0),n.cssMode&&s.removeEventListener("scroll",e.onScroll),e.off(o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",eg)}};var og={setBreakpoint:function(){var e=this,t=e.activeIndex,n=e.initialized,r=e.loopedSlides,a=void 0===r?0:r,s=e.params,o=e.$el,i=s.breakpoints;if(i&&(!i||0!==Object.keys(i).length)){var l=e.getBreakpoint(i,e.params.breakpointsBase,e.el);if(l&&e.currentBreakpoint!==l){var u=l in i?i[l]:void 0;u&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerGroupSkip","slidesPerColumn"].forEach((function(e){var t=u[e];void 0!==t&&(u[e]="slidesPerView"!==e||"AUTO"!==t&&"auto"!==t?"slidesPerView"===e?parseFloat(t):parseInt(t,10):"auto")}));var c=u||e.originalParams,p=s.slidesPerColumn>1,d=c.slidesPerColumn>1,h=s.enabled;p&&!d?(o.removeClass(s.containerModifierClass+"multirow "+s.containerModifierClass+"multirow-column"),e.emitContainerClasses()):!p&&d&&(o.addClass(s.containerModifierClass+"multirow"),(c.slidesPerColumnFill&&"column"===c.slidesPerColumnFill||!c.slidesPerColumnFill&&"column"===s.slidesPerColumnFill)&&o.addClass(s.containerModifierClass+"multirow-column"),e.emitContainerClasses());var f=c.direction&&c.direction!==s.direction,m=s.loop&&(c.slidesPerView!==s.slidesPerView||f);f&&n&&e.changeDirection(),Mm(e.params,c);var g=e.params.enabled;Mm(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),h&&!g?e.disable():!h&&g&&e.enable(),e.currentBreakpoint=l,e.emit("_beforeBreakpoint",c),m&&n&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-a+e.loopedSlides,0,!1)),e.emit("breakpoint",c)}}},getBreakpoint:function(e,t,n){if(void 0===t&&(t="window"),e&&("container"!==t||n)){var r=!1,a=wl(),s="window"===t?a.innerHeight:n.clientHeight,o=Object.keys(e).map((function(e){if("string"==typeof e&&0===e.indexOf("@")){var t=parseFloat(e.substr(1));return{value:s*t,point:e}}return{value:e,point:e}}));o.sort((function(e,t){return parseInt(e.value,10)-parseInt(t.value,10)}));for(var i=0;i<o.length;i+=1){var l=o[i],u=l.point,c=l.value;"window"===t?a.matchMedia("(min-width: "+c+"px)").matches&&(r=u):c<=n.clientWidth&&(r=u)}return r||"max"}}};var ig={addClasses:function(){var e,t,n,r=this,a=r.classNames,s=r.params,o=r.rtl,i=r.$el,l=r.device,u=r.support,c=(e=["initialized",s.direction,{"pointer-events":u.pointerEvents&&!u.touch},{"free-mode":s.freeMode},{autoheight:s.autoHeight},{rtl:o},{multirow:s.slidesPerColumn>1},{"multirow-column":s.slidesPerColumn>1&&"column"===s.slidesPerColumnFill},{android:l.android},{ios:l.ios},{"css-mode":s.cssMode}],t=s.containerModifierClass,n=[],e.forEach((function(e){"object"==typeof e?Object.keys(e).forEach((function(r){e[r]&&n.push(t+r)})):"string"==typeof e&&n.push(t+e)})),n);a.push.apply(a,c),i.addClass([].concat(a).join(" ")),r.emitContainerClasses()},removeClasses:function(){var e=this,t=e.$el,n=e.classNames;t.removeClass(n.join(" ")),e.emitContainerClasses()}};var lg={loadImage:function(e,t,n,r,a,s){var o,i=wl();function l(){s&&s()}Tm(e).parent("picture")[0]||e.complete&&a?l():t?((o=new i.Image).onload=l,o.onerror=l,r&&(o.sizes=r),n&&(o.srcset=n),t&&(o.src=t)):l()},preloadImages:function(){var e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var n=0;n<e.imagesToLoad.length;n+=1){var r=e.imagesToLoad[n];e.loadImage(r,r.currentSrc||r.getAttribute("src"),r.srcset||r.getAttribute("srcset"),r.sizes||r.getAttribute("sizes"),!0,t)}}};var ug={checkOverflow:function(){var e=this,t=e.params,n=e.isLocked,r=e.slides.length>0&&t.slidesOffsetBefore+t.spaceBetween*(e.slides.length-1)+e.slides[0].offsetWidth*e.slides.length;t.slidesOffsetBefore&&t.slidesOffsetAfter&&r?e.isLocked=r<=e.size:e.isLocked=1===e.snapGrid.length,e.allowSlideNext=!e.isLocked,e.allowSlidePrev=!e.isLocked,n!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock"),n&&n!==e.isLocked&&(e.isEnd=!1,e.navigation&&e.navigation.update())}},cg={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!1,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,slidesPerGroupSkip:0,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function pg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var dg={modular:{useParams:function(e){var t=this;t.modules&&Object.keys(t.modules).forEach((function(n){var r=t.modules[n];r.params&&Mm(e,r.params)}))},useModules:function(e){void 0===e&&(e={});var t=this;t.modules&&Object.keys(t.modules).forEach((function(n){var r=t.modules[n],a=e[n]||{};r.on&&t.on&&Object.keys(r.on).forEach((function(e){t.on(e,r.on[e])})),r.create&&r.create.bind(t)(a)}))}},eventsEmitter:Hm,update:jm,translate:Um,transition:Gm,slide:qm,loop:Xm,grabCursor:Km,manipulation:Ym,events:sg,breakpoints:og,checkOverflow:ug,classes:ig,images:lg},hg={},fg=function(){function e(){for(var t,n,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];if(1===a.length&&a[0].constructor&&"Object"===Object.prototype.toString.call(a[0]).slice(8,-1)?n=a[0]:(t=a[0],n=a[1]),n||(n={}),n=Mm({},n),t&&!n.el&&(n.el=t),n.el&&Tm(n.el).length>1){var o=[];return Tm(n.el).each((function(t){var r=Mm({},n,{el:t});o.push(new e(r))})),o}var i=this;i.__swiper__=!0,i.support=Dm(),i.device=Lm({userAgent:n.userAgent}),i.browser=Bm(),i.eventsListeners={},i.eventsAnyListeners=[],void 0===i.modules&&(i.modules={}),Object.keys(i.modules).forEach((function(e){var t=i.modules[e];if(t.params){var r=Object.keys(t.params)[0],a=t.params[r];if("object"!=typeof a||null===a)return;if(["navigation","pagination","scrollbar"].indexOf(r)>=0&&!0===n[r]&&(n[r]={auto:!0}),!(r in n)||!("enabled"in a))return;!0===n[r]&&(n[r]={enabled:!0}),"object"!=typeof n[r]||"enabled"in n[r]||(n[r].enabled=!0),n[r]||(n[r]={enabled:!1})}}));var l=Mm({},cg);return i.useParams(l),i.params=Mm({},l,hg,n),i.originalParams=Mm({},i.params),i.passedParams=Mm({},n),i.params&&i.params.on&&Object.keys(i.params.on).forEach((function(e){i.on(e,i.params.on[e])})),i.params&&i.params.onAny&&i.onAny(i.params.onAny),i.$=Tm,Mm(i,{enabled:i.params.enabled,el:t,classNames:[],slides:Tm(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===i.params.direction},isVertical:function(){return"vertical"===i.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:i.params.allowSlideNext,allowSlidePrev:i.params.allowSlidePrev,touchEvents:function(){var e=["touchstart","touchmove","touchend","touchcancel"],t=["mousedown","mousemove","mouseup"];return i.support.pointerEvents&&(t=["pointerdown","pointermove","pointerup"]),i.touchEventsTouch={start:e[0],move:e[1],end:e[2],cancel:e[3]},i.touchEventsDesktop={start:t[0],move:t[1],end:t[2]},i.support.touch||!i.params.simulateTouch?i.touchEventsTouch:i.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:i.params.focusableElements,lastClickTime:Im(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:i.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),i.useModules(),i.emit("_swiper"),i.params.init&&i.init(),i}var t,n,r,a=e.prototype;return a.enable=function(){var e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))},a.disable=function(){var e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))},a.setProgress=function(e,t){var n=this;e=Math.min(Math.max(e,0),1);var r=n.minTranslate(),a=(n.maxTranslate()-r)*e+r;n.translateTo(a,void 0===t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()},a.emitContainerClasses=function(){var e=this;if(e.params._emitClasses&&e.el){var t=e.el.className.split(" ").filter((function(t){return 0===t.indexOf("swiper-container")||0===t.indexOf(e.params.containerModifierClass)}));e.emit("_containerClasses",t.join(" "))}},a.getSlideClasses=function(e){var t=this;return e.className.split(" ").filter((function(e){return 0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)})).join(" ")},a.emitSlidesClasses=function(){var e=this;if(e.params._emitClasses&&e.el){var t=[];e.slides.each((function(n){var r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)})),e.emit("_slideClasses",t)}},a.slidesPerViewDynamic=function(){var e=this,t=e.params,n=e.slides,r=e.slidesGrid,a=e.size,s=e.activeIndex,o=1;if(t.centeredSlides){for(var i,l=n[s].swiperSlideSize,u=s+1;u<n.length;u+=1)n[u]&&!i&&(o+=1,(l+=n[u].swiperSlideSize)>a&&(i=!0));for(var c=s-1;c>=0;c-=1)n[c]&&!i&&(o+=1,(l+=n[c].swiperSlideSize)>a&&(i=!0))}else for(var p=s+1;p<n.length;p+=1)r[p]-r[s]<a&&(o+=1);return o},a.update=function(){var e=this;if(e&&!e.destroyed){var t=e.snapGrid,n=e.params;n.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode?(r(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||r(),n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}function r(){var t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}},a.changeDirection=function(e,t){void 0===t&&(t=!0);var n=this,r=n.params.direction;return e||(e="horizontal"===r?"vertical":"horizontal"),e===r||"horizontal"!==e&&"vertical"!==e||(n.$el.removeClass(""+n.params.containerModifierClass+r).addClass(""+n.params.containerModifierClass+e),n.emitContainerClasses(),n.params.direction=e,n.slides.each((function(t){"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n},a.mount=function(e){var t=this;if(t.mounted)return!0;var n=Tm(e||t.params.el);if(!(e=n[0]))return!1;e.swiper=t;var r=function(){return"."+(t.params.wrapperClass||"").trim().split(" ").join(".")},a=function(){if(e&&e.shadowRoot&&e.shadowRoot.querySelector){var t=Tm(e.shadowRoot.querySelector(r()));return t.children=function(e){return n.children(e)},t}return n.children(r())}();if(0===a.length&&t.params.createElements){var s=bl().createElement("div");a=Tm(s),s.className=t.params.wrapperClass,n.append(s),n.children("."+t.params.slideClass).each((function(e){a.append(e)}))}return Mm(t,{$el:n,el:e,$wrapperEl:a,wrapperEl:a[0],mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction")),wrongRTL:"-webkit-box"===a.css("display")}),!0},a.init=function(e){var t=this;return t.initialized||!1===t.mount(e)||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.params.loop&&t.loopCreate(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.preloadImages&&t.preloadImages(),t.params.loop?t.slideTo(t.params.initialSlide+t.loopedSlides,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.attachEvents(),t.initialized=!0,t.emit("init"),t.emit("afterInit")),t},a.destroy=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var n,r=this,a=r.params,s=r.$el,o=r.$wrapperEl,i=r.slides;return void 0===r.params||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),a.loop&&r.loopDestroy(),t&&(r.removeClasses(),s.removeAttr("style"),o.removeAttr("style"),i&&i.length&&i.removeClass([a.slideVisibleClass,a.slideActiveClass,a.slideNextClass,a.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),r.emit("destroy"),Object.keys(r.eventsListeners).forEach((function(e){r.off(e)})),!1!==e&&(r.$el[0].swiper=null,n=r,Object.keys(n).forEach((function(e){try{n[e]=null}catch(e){}try{delete n[e]}catch(e){}}))),r.destroyed=!0),null},e.extendDefaults=function(e){Mm(hg,e)},e.installModule=function(t){e.prototype.modules||(e.prototype.modules={});var n=t.name||Object.keys(e.prototype.modules).length+"_"+Im();e.prototype.modules[n]=t},e.use=function(t){return Array.isArray(t)?(t.forEach((function(t){return e.installModule(t)})),e):(e.installModule(t),e)},t=e,r=[{key:"extendedDefaults",get:function(){return hg}},{key:"defaults",get:function(){return cg}}],(n=null)&&pg(t.prototype,n),r&&pg(t,r),e}();Object.keys(dg).forEach((function(e){Object.keys(dg[e]).forEach((function(t){fg.prototype[t]=dg[e][t]}))})),fg.use([Fm,Wm]);var mg=fg;function gg(){return gg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gg.apply(this,arguments)}var vg={update:function(e){var t=this,n=t.params,r=n.slidesPerView,a=n.slidesPerGroup,s=n.centeredSlides,o=t.params.virtual,i=o.addSlidesBefore,l=o.addSlidesAfter,u=t.virtual,c=u.from,p=u.to,d=u.slides,h=u.slidesGrid,f=u.renderSlide,m=u.offset;t.updateActiveIndex();var g,v,b,y=t.activeIndex||0;g=t.rtlTranslate?"right":t.isHorizontal()?"left":"top",s?(v=Math.floor(r/2)+a+l,b=Math.floor(r/2)+a+i):(v=r+(a-1)+l,b=a+i);var w=Math.max((y||0)-b,0),x=Math.min((y||0)+v,d.length-1),k=(t.slidesGrid[w]||0)-(t.slidesGrid[0]||0);function C(){t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load()}if(Mm(t.virtual,{from:w,to:x,offset:k,slidesGrid:t.slidesGrid}),c===w&&p===x&&!e)return t.slidesGrid!==h&&k!==m&&t.slides.css(g,k+"px"),void t.updateProgress();if(t.params.virtual.renderExternal)return t.params.virtual.renderExternal.call(t,{offset:k,from:w,to:x,slides:function(){for(var e=[],t=w;t<=x;t+=1)e.push(d[t]);return e}()}),void(t.params.virtual.renderExternalUpdate&&C());var S=[],E=[];if(e)t.$wrapperEl.find("."+t.params.slideClass).remove();else for(var T=c;T<=p;T+=1)(T<w||T>x)&&t.$wrapperEl.find("."+t.params.slideClass+'[data-swiper-slide-index="'+T+'"]').remove();for(var $=0;$<d.length;$+=1)$>=w&&$<=x&&(void 0===p||e?E.push($):($>p&&E.push($),$<c&&S.push($)));E.forEach((function(e){t.$wrapperEl.append(f(d[e],e))})),S.sort((function(e,t){return t-e})).forEach((function(e){t.$wrapperEl.prepend(f(d[e],e))})),t.$wrapperEl.children(".swiper-slide").css(g,k+"px"),C()},renderSlide:function(e,t){var n=this,r=n.params.virtual;if(r.cache&&n.virtual.cache[t])return n.virtual.cache[t];var a=r.renderSlide?Tm(r.renderSlide.call(n,e,t)):Tm('<div class="'+n.params.slideClass+'" data-swiper-slide-index="'+t+'">'+e+"</div>");return a.attr("data-swiper-slide-index")||a.attr("data-swiper-slide-index",t),r.cache&&(n.virtual.cache[t]=a),a},appendSlide:function(e){var t=this;if("object"==typeof e&&"length"in e)for(var n=0;n<e.length;n+=1)e[n]&&t.virtual.slides.push(e[n]);else t.virtual.slides.push(e);t.virtual.update(!0)},prependSlide:function(e){var t=this,n=t.activeIndex,r=n+1,a=1;if(Array.isArray(e)){for(var s=0;s<e.length;s+=1)e[s]&&t.virtual.slides.unshift(e[s]);r=n+e.length,a=e.length}else t.virtual.slides.unshift(e);if(t.params.virtual.cache){var o=t.virtual.cache,i={};Object.keys(o).forEach((function(e){var t=o[e],n=t.attr("data-swiper-slide-index");n&&t.attr("data-swiper-slide-index",parseInt(n,10)+1),i[parseInt(e,10)+a]=t})),t.virtual.cache=i}t.virtual.update(!0),t.slideTo(r,0)},removeSlide:function(e){var t=this;if(null!=e){var n=t.activeIndex;if(Array.isArray(e))for(var r=e.length-1;r>=0;r-=1)t.virtual.slides.splice(e[r],1),t.params.virtual.cache&&delete t.virtual.cache[e[r]],e[r]<n&&(n-=1),n=Math.max(n,0);else t.virtual.slides.splice(e,1),t.params.virtual.cache&&delete t.virtual.cache[e],e<n&&(n-=1),n=Math.max(n,0);t.virtual.update(!0),t.slideTo(n,0)}},removeAllSlides:function(){var e=this;e.virtual.slides=[],e.params.virtual.cache&&(e.virtual.cache={}),e.virtual.update(!0),e.slideTo(0,0)}},bg={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}},create:function(){_m(this,{virtual:gg({},vg,{slides:this.params.virtual.slides,cache:{}})})},on:{beforeInit:function(e){if(e.params.virtual.enabled){e.classNames.push(e.params.containerModifierClass+"virtual");var t={watchSlidesProgress:!0};Mm(e.params,t),Mm(e.originalParams,t),e.params.initialSlide||e.virtual.update()}},setTranslate:function(e){e.params.virtual.enabled&&e.virtual.update()}}};function yg(){return yg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yg.apply(this,arguments)}var wg={handle:function(e){var t=this;if(t.enabled){var n=wl(),r=bl(),a=t.rtlTranslate,s=e;s.originalEvent&&(s=s.originalEvent);var o=s.keyCode||s.charCode,i=t.params.keyboard.pageUpDown,l=i&&33===o,u=i&&34===o,c=37===o,p=39===o,d=38===o,h=40===o;if(!t.allowSlideNext&&(t.isHorizontal()&&p||t.isVertical()&&h||u))return!1;if(!t.allowSlidePrev&&(t.isHorizontal()&&c||t.isVertical()&&d||l))return!1;if(!(s.shiftKey||s.altKey||s.ctrlKey||s.metaKey||r.activeElement&&r.activeElement.nodeName&&("input"===r.activeElement.nodeName.toLowerCase()||"textarea"===r.activeElement.nodeName.toLowerCase()))){if(t.params.keyboard.onlyInViewport&&(l||u||c||p||d||h)){var f=!1;if(t.$el.parents("."+t.params.slideClass).length>0&&0===t.$el.parents("."+t.params.slideActiveClass).length)return;var m=t.$el,g=m[0].clientWidth,v=m[0].clientHeight,b=n.innerWidth,y=n.innerHeight,w=t.$el.offset();a&&(w.left-=t.$el[0].scrollLeft);for(var x=[[w.left,w.top],[w.left+g,w.top],[w.left,w.top+v],[w.left+g,w.top+v]],k=0;k<x.length;k+=1){var C=x[k];if(C[0]>=0&&C[0]<=b&&C[1]>=0&&C[1]<=y){if(0===C[0]&&0===C[1])continue;f=!0}}if(!f)return}t.isHorizontal()?((l||u||c||p)&&(s.preventDefault?s.preventDefault():s.returnValue=!1),((u||p)&&!a||(l||c)&&a)&&t.slideNext(),((l||c)&&!a||(u||p)&&a)&&t.slidePrev()):((l||u||d||h)&&(s.preventDefault?s.preventDefault():s.returnValue=!1),(u||h)&&t.slideNext(),(l||d)&&t.slidePrev()),t.emit("keyPress",o)}}},enable:function(){var e=this,t=bl();e.keyboard.enabled||(Tm(t).on("keydown",e.keyboard.handle),e.keyboard.enabled=!0)},disable:function(){var e=this,t=bl();e.keyboard.enabled&&(Tm(t).off("keydown",e.keyboard.handle),e.keyboard.enabled=!1)}},xg={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}},create:function(){_m(this,{keyboard:yg({enabled:!1},wg)})},on:{init:function(e){e.params.keyboard.enabled&&e.keyboard.enable()},destroy:function(e){e.keyboard.enabled&&e.keyboard.disable()}}};var kg={lastScrollTime:Im(),lastEventBeforeSnap:void 0,recentWheelEvents:[],event:function(){return wl().navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":function(){var e=bl(),t="onwheel",n=t in e;if(!n){var r=e.createElement("div");r.setAttribute(t,"return;"),n="function"==typeof r.onwheel}return!n&&e.implementation&&e.implementation.hasFeature&&!0!==e.implementation.hasFeature("","")&&(n=e.implementation.hasFeature("Events.wheel","3.0")),n}()?"wheel":"mousewheel"},normalize:function(e){var t=0,n=0,r=0,a=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=10*t,a=10*n,"deltaY"in e&&(a=e.deltaY),"deltaX"in e&&(r=e.deltaX),e.shiftKey&&!r&&(r=a,a=0),(r||a)&&e.deltaMode&&(1===e.deltaMode?(r*=40,a*=40):(r*=800,a*=800)),r&&!t&&(t=r<1?-1:1),a&&!n&&(n=a<1?-1:1),{spinX:t,spinY:n,pixelX:r,pixelY:a}},handleMouseEnter:function(){this.enabled&&(this.mouseEntered=!0)},handleMouseLeave:function(){this.enabled&&(this.mouseEntered=!1)},handle:function(e){var t=e,n=this;if(n.enabled){var r=n.params.mousewheel;n.params.cssMode&&t.preventDefault();var a=n.$el;if("container"!==n.params.mousewheel.eventsTarget&&(a=Tm(n.params.mousewheel.eventsTarget)),!n.mouseEntered&&!a[0].contains(t.target)&&!r.releaseOnEdges)return!0;t.originalEvent&&(t=t.originalEvent);var s=0,o=n.rtlTranslate?-1:1,i=kg.normalize(t);if(r.forceToAxis)if(n.isHorizontal()){if(!(Math.abs(i.pixelX)>Math.abs(i.pixelY)))return!0;s=-i.pixelX*o}else{if(!(Math.abs(i.pixelY)>Math.abs(i.pixelX)))return!0;s=-i.pixelY}else s=Math.abs(i.pixelX)>Math.abs(i.pixelY)?-i.pixelX*o:-i.pixelY;if(0===s)return!0;r.invert&&(s=-s);var l=n.getTranslate()+s*r.sensitivity;if(l>=n.minTranslate()&&(l=n.minTranslate()),l<=n.maxTranslate()&&(l=n.maxTranslate()),(!!n.params.loop||!(l===n.minTranslate()||l===n.maxTranslate()))&&n.params.nested&&t.stopPropagation(),n.params.freeMode){var u={time:Im(),delta:Math.abs(s),direction:Math.sign(s)},c=n.mousewheel.lastEventBeforeSnap,p=c&&u.time<c.time+500&&u.delta<=c.delta&&u.direction===c.direction;if(!p){n.mousewheel.lastEventBeforeSnap=void 0,n.params.loop&&n.loopFix();var d=n.getTranslate()+s*r.sensitivity,h=n.isBeginning,f=n.isEnd;if(d>=n.minTranslate()&&(d=n.minTranslate()),d<=n.maxTranslate()&&(d=n.maxTranslate()),n.setTransition(0),n.setTranslate(d),n.updateProgress(),n.updateActiveIndex(),n.updateSlidesClasses(),(!h&&n.isBeginning||!f&&n.isEnd)&&n.updateSlidesClasses(),n.params.freeModeSticky){clearTimeout(n.mousewheel.timeout),n.mousewheel.timeout=void 0;var m=n.mousewheel.recentWheelEvents;m.length>=15&&m.shift();var g=m.length?m[m.length-1]:void 0,v=m[0];if(m.push(u),g&&(u.delta>g.delta||u.direction!==g.direction))m.splice(0);else if(m.length>=15&&u.time-v.time<500&&v.delta-u.delta>=1&&u.delta<=6){var b=s>0?.8:.2;n.mousewheel.lastEventBeforeSnap=u,m.splice(0),n.mousewheel.timeout=$m((function(){n.slideToClosest(n.params.speed,!0,void 0,b)}),0)}n.mousewheel.timeout||(n.mousewheel.timeout=$m((function(){n.mousewheel.lastEventBeforeSnap=u,m.splice(0),n.slideToClosest(n.params.speed,!0,void 0,.5)}),500))}if(p||n.emit("scroll",t),n.params.autoplay&&n.params.autoplayDisableOnInteraction&&n.autoplay.stop(),d===n.minTranslate()||d===n.maxTranslate())return!0}}else{var y={time:Im(),delta:Math.abs(s),direction:Math.sign(s),raw:e},w=n.mousewheel.recentWheelEvents;w.length>=2&&w.shift();var x=w.length?w[w.length-1]:void 0;if(w.push(y),x?(y.direction!==x.direction||y.delta>x.delta||y.time>x.time+150)&&n.mousewheel.animateSlider(y):n.mousewheel.animateSlider(y),n.mousewheel.releaseScroll(y))return!0}return t.preventDefault?t.preventDefault():t.returnValue=!1,!1}},animateSlider:function(e){var t=this,n=wl();return!(this.params.mousewheel.thresholdDelta&&e.delta<this.params.mousewheel.thresholdDelta)&&(!(this.params.mousewheel.thresholdTime&&Im()-t.mousewheel.lastScrollTime<this.params.mousewheel.thresholdTime)&&(e.delta>=6&&Im()-t.mousewheel.lastScrollTime<60||(e.direction<0?t.isEnd&&!t.params.loop||t.animating||(t.slideNext(),t.emit("scroll",e.raw)):t.isBeginning&&!t.params.loop||t.animating||(t.slidePrev(),t.emit("scroll",e.raw)),t.mousewheel.lastScrollTime=(new n.Date).getTime(),!1)))},releaseScroll:function(e){var t=this,n=t.params.mousewheel;if(e.direction<0){if(t.isEnd&&!t.params.loop&&n.releaseOnEdges)return!0}else if(t.isBeginning&&!t.params.loop&&n.releaseOnEdges)return!0;return!1},enable:function(){var e=this,t=kg.event();if(e.params.cssMode)return e.wrapperEl.removeEventListener(t,e.mousewheel.handle),!0;if(!t)return!1;if(e.mousewheel.enabled)return!1;var n=e.$el;return"container"!==e.params.mousewheel.eventsTarget&&(n=Tm(e.params.mousewheel.eventsTarget)),n.on("mouseenter",e.mousewheel.handleMouseEnter),n.on("mouseleave",e.mousewheel.handleMouseLeave),n.on(t,e.mousewheel.handle),e.mousewheel.enabled=!0,!0},disable:function(){var e=this,t=kg.event();if(e.params.cssMode)return e.wrapperEl.addEventListener(t,e.mousewheel.handle),!0;if(!t)return!1;if(!e.mousewheel.enabled)return!1;var n=e.$el;return"container"!==e.params.mousewheel.eventsTarget&&(n=Tm(e.params.mousewheel.eventsTarget)),n.off(t,e.mousewheel.handle),e.mousewheel.enabled=!1,!0}},Cg={name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null}},create:function(){_m(this,{mousewheel:{enabled:!1,lastScrollTime:Im(),lastEventBeforeSnap:void 0,recentWheelEvents:[],enable:kg.enable,disable:kg.disable,handle:kg.handle,handleMouseEnter:kg.handleMouseEnter,handleMouseLeave:kg.handleMouseLeave,animateSlider:kg.animateSlider,releaseScroll:kg.releaseScroll}})},on:{init:function(e){!e.params.mousewheel.enabled&&e.params.cssMode&&e.mousewheel.disable(),e.params.mousewheel.enabled&&e.mousewheel.enable()},destroy:function(e){e.params.cssMode&&e.mousewheel.enable(),e.mousewheel.enabled&&e.mousewheel.disable()}}};function Sg(){return Sg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sg.apply(this,arguments)}var Eg={toggleEl:function(e,t){e[t?"addClass":"removeClass"](this.params.navigation.disabledClass),e[0]&&"BUTTON"===e[0].tagName&&(e[0].disabled=t)},update:function(){var e=this,t=e.params.navigation,n=e.navigation.toggleEl;if(!e.params.loop){var r=e.navigation,a=r.$nextEl,s=r.$prevEl;s&&s.length>0&&(e.isBeginning?n(s,!0):n(s,!1),e.params.watchOverflow&&e.enabled&&s[e.isLocked?"addClass":"removeClass"](t.lockClass)),a&&a.length>0&&(e.isEnd?n(a,!0):n(a,!1),e.params.watchOverflow&&e.enabled&&a[e.isLocked?"addClass":"removeClass"](t.lockClass))}},onPrevClick:function(e){var t=this;e.preventDefault(),t.isBeginning&&!t.params.loop||t.slidePrev()},onNextClick:function(e){var t=this;e.preventDefault(),t.isEnd&&!t.params.loop||t.slideNext()},init:function(){var e,t,n=this,r=n.params.navigation;(n.params.navigation=Pm(n.$el,n.params.navigation,n.params.createElements,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),r.nextEl||r.prevEl)&&(r.nextEl&&(e=Tm(r.nextEl),n.params.uniqueNavElements&&"string"==typeof r.nextEl&&e.length>1&&1===n.$el.find(r.nextEl).length&&(e=n.$el.find(r.nextEl))),r.prevEl&&(t=Tm(r.prevEl),n.params.uniqueNavElements&&"string"==typeof r.prevEl&&t.length>1&&1===n.$el.find(r.prevEl).length&&(t=n.$el.find(r.prevEl))),e&&e.length>0&&e.on("click",n.navigation.onNextClick),t&&t.length>0&&t.on("click",n.navigation.onPrevClick),Mm(n.navigation,{$nextEl:e,nextEl:e&&e[0],$prevEl:t,prevEl:t&&t[0]}),n.enabled||(e&&e.addClass(r.lockClass),t&&t.addClass(r.lockClass)))},destroy:function(){var e=this,t=e.navigation,n=t.$nextEl,r=t.$prevEl;n&&n.length&&(n.off("click",e.navigation.onNextClick),n.removeClass(e.params.navigation.disabledClass)),r&&r.length&&(r.off("click",e.navigation.onPrevClick),r.removeClass(e.params.navigation.disabledClass))}},Tg={name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){_m(this,{navigation:Sg({},Eg)})},on:{init:function(e){e.navigation.init(),e.navigation.update()},toEdge:function(e){e.navigation.update()},fromEdge:function(e){e.navigation.update()},destroy:function(e){e.navigation.destroy()},"enable disable":function(e){var t=e.navigation,n=t.$nextEl,r=t.$prevEl;n&&n[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass),r&&r[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass)},click:function(e,t){var n=e.navigation,r=n.$nextEl,a=n.$prevEl,s=t.target;if(e.params.navigation.hideOnClick&&!Tm(s).is(a)&&!Tm(s).is(r)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===s||e.pagination.el.contains(s)))return;var o;r?o=r.hasClass(e.params.navigation.hiddenClass):a&&(o=a.hasClass(e.params.navigation.hiddenClass)),!0===o?e.emit("navigationShow"):e.emit("navigationHide"),r&&r.toggleClass(e.params.navigation.hiddenClass),a&&a.toggleClass(e.params.navigation.hiddenClass)}}}};function $g(){return $g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$g.apply(this,arguments)}var Ig={update:function(){var e=this,t=e.rtl,n=e.params.pagination;if(n.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var r,a=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,s=e.pagination.$el,o=e.params.loop?Math.ceil((a-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?((r=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup))>a-1-2*e.loopedSlides&&(r-=a-2*e.loopedSlides),r>o-1&&(r-=o),r<0&&"bullets"!==e.params.paginationType&&(r=o+r)):r=void 0!==e.snapIndex?e.snapIndex:e.activeIndex||0,"bullets"===n.type&&e.pagination.bullets&&e.pagination.bullets.length>0){var i,l,u,c=e.pagination.bullets;if(n.dynamicBullets&&(e.pagination.bulletSize=c.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),s.css(e.isHorizontal()?"width":"height",e.pagination.bulletSize*(n.dynamicMainBullets+4)+"px"),n.dynamicMainBullets>1&&void 0!==e.previousIndex&&(e.pagination.dynamicBulletIndex+=r-e.previousIndex,e.pagination.dynamicBulletIndex>n.dynamicMainBullets-1?e.pagination.dynamicBulletIndex=n.dynamicMainBullets-1:e.pagination.dynamicBulletIndex<0&&(e.pagination.dynamicBulletIndex=0)),i=r-e.pagination.dynamicBulletIndex,u=((l=i+(Math.min(c.length,n.dynamicMainBullets)-1))+i)/2),c.removeClass(n.bulletActiveClass+" "+n.bulletActiveClass+"-next "+n.bulletActiveClass+"-next-next "+n.bulletActiveClass+"-prev "+n.bulletActiveClass+"-prev-prev "+n.bulletActiveClass+"-main"),s.length>1)c.each((function(e){var t=Tm(e),a=t.index();a===r&&t.addClass(n.bulletActiveClass),n.dynamicBullets&&(a>=i&&a<=l&&t.addClass(n.bulletActiveClass+"-main"),a===i&&t.prev().addClass(n.bulletActiveClass+"-prev").prev().addClass(n.bulletActiveClass+"-prev-prev"),a===l&&t.next().addClass(n.bulletActiveClass+"-next").next().addClass(n.bulletActiveClass+"-next-next"))}));else{var p=c.eq(r),d=p.index();if(p.addClass(n.bulletActiveClass),n.dynamicBullets){for(var h=c.eq(i),f=c.eq(l),m=i;m<=l;m+=1)c.eq(m).addClass(n.bulletActiveClass+"-main");if(e.params.loop)if(d>=c.length-n.dynamicMainBullets){for(var g=n.dynamicMainBullets;g>=0;g-=1)c.eq(c.length-g).addClass(n.bulletActiveClass+"-main");c.eq(c.length-n.dynamicMainBullets-1).addClass(n.bulletActiveClass+"-prev")}else h.prev().addClass(n.bulletActiveClass+"-prev").prev().addClass(n.bulletActiveClass+"-prev-prev"),f.next().addClass(n.bulletActiveClass+"-next").next().addClass(n.bulletActiveClass+"-next-next");else h.prev().addClass(n.bulletActiveClass+"-prev").prev().addClass(n.bulletActiveClass+"-prev-prev"),f.next().addClass(n.bulletActiveClass+"-next").next().addClass(n.bulletActiveClass+"-next-next")}}if(n.dynamicBullets){var v=Math.min(c.length,n.dynamicMainBullets+4),b=(e.pagination.bulletSize*v-e.pagination.bulletSize)/2-u*e.pagination.bulletSize,y=t?"right":"left";c.css(e.isHorizontal()?y:"top",b+"px")}}if("fraction"===n.type&&(s.find(Rm(n.currentClass)).text(n.formatFractionCurrent(r+1)),s.find(Rm(n.totalClass)).text(n.formatFractionTotal(o))),"progressbar"===n.type){var w;w=n.progressbarOpposite?e.isHorizontal()?"vertical":"horizontal":e.isHorizontal()?"horizontal":"vertical";var x=(r+1)/o,k=1,C=1;"horizontal"===w?k=x:C=x,s.find(Rm(n.progressbarFillClass)).transform("translate3d(0,0,0) scaleX("+k+") scaleY("+C+")").transition(e.params.speed)}"custom"===n.type&&n.renderCustom?(s.html(n.renderCustom(e,r+1,o)),e.emit("paginationRender",s[0])):e.emit("paginationUpdate",s[0]),e.params.watchOverflow&&e.enabled&&s[e.isLocked?"addClass":"removeClass"](n.lockClass)}},render:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var n=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,r=e.pagination.$el,a="";if("bullets"===t.type){var s=e.params.loop?Math.ceil((n-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&!e.params.loop&&s>n&&(s=n);for(var o=0;o<s;o+=1)t.renderBullet?a+=t.renderBullet.call(e,o,t.bulletClass):a+="<"+t.bulletElement+' class="'+t.bulletClass+'"></'+t.bulletElement+">";r.html(a),e.pagination.bullets=r.find(Rm(t.bulletClass))}"fraction"===t.type&&(a=t.renderFraction?t.renderFraction.call(e,t.currentClass,t.totalClass):'<span class="'+t.currentClass+'"></span> / <span class="'+t.totalClass+'"></span>',r.html(a)),"progressbar"===t.type&&(a=t.renderProgressbar?t.renderProgressbar.call(e,t.progressbarFillClass):'<span class="'+t.progressbarFillClass+'"></span>',r.html(a)),"custom"!==t.type&&e.emit("paginationRender",e.pagination.$el[0])}},init:function(){var e=this;e.params.pagination=Pm(e.$el,e.params.pagination,e.params.createElements,{el:"swiper-pagination"});var t=e.params.pagination;if(t.el){var n=Tm(t.el);0!==n.length&&(e.params.uniqueNavElements&&"string"==typeof t.el&&n.length>1&&(n=e.$el.find(t.el)),"bullets"===t.type&&t.clickable&&n.addClass(t.clickableClass),n.addClass(t.modifierClass+t.type),"bullets"===t.type&&t.dynamicBullets&&(n.addClass(""+t.modifierClass+t.type+"-dynamic"),e.pagination.dynamicBulletIndex=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&n.addClass(t.progressbarOppositeClass),t.clickable&&n.on("click",Rm(t.bulletClass),(function(t){t.preventDefault();var n=Tm(this).index()*e.params.slidesPerGroup;e.params.loop&&(n+=e.loopedSlides),e.slideTo(n)})),Mm(e.pagination,{$el:n,el:n[0]}),e.enabled||n.addClass(t.lockClass))}},destroy:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var n=e.pagination.$el;n.removeClass(t.hiddenClass),n.removeClass(t.modifierClass+t.type),e.pagination.bullets&&e.pagination.bullets.removeClass(t.bulletActiveClass),t.clickable&&n.off("click",Rm(t.bulletClass))}}},Ng={name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){_m(this,{pagination:$g({dynamicBulletIndex:0},Ig)})},on:{init:function(e){e.pagination.init(),e.pagination.render(),e.pagination.update()},activeIndexChange:function(e){(e.params.loop||void 0===e.snapIndex)&&e.pagination.update()},snapIndexChange:function(e){e.params.loop||e.pagination.update()},slidesLengthChange:function(e){e.params.loop&&(e.pagination.render(),e.pagination.update())},snapGridLengthChange:function(e){e.params.loop||(e.pagination.render(),e.pagination.update())},destroy:function(e){e.pagination.destroy()},"enable disable":function(e){var t=e.pagination.$el;t&&t[e.enabled?"removeClass":"addClass"](e.params.pagination.lockClass)},click:function(e,t){var n=t.target;if(e.params.pagination.el&&e.params.pagination.hideOnClick&&e.pagination.$el.length>0&&!Tm(n).hasClass(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&n===e.navigation.nextEl||e.navigation.prevEl&&n===e.navigation.prevEl))return;!0===e.pagination.$el.hasClass(e.params.pagination.hiddenClass)?e.emit("paginationShow"):e.emit("paginationHide"),e.pagination.$el.toggleClass(e.params.pagination.hiddenClass)}}}};function Og(){return Og=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Og.apply(this,arguments)}var Ag={setTranslate:function(){var e=this;if(e.params.scrollbar.el&&e.scrollbar.el){var t=e.scrollbar,n=e.rtlTranslate,r=e.progress,a=t.dragSize,s=t.trackSize,o=t.$dragEl,i=t.$el,l=e.params.scrollbar,u=a,c=(s-a)*r;n?(c=-c)>0?(u=a-c,c=0):-c+a>s&&(u=s+c):c<0?(u=a+c,c=0):c+a>s&&(u=s-c),e.isHorizontal()?(o.transform("translate3d("+c+"px, 0, 0)"),o[0].style.width=u+"px"):(o.transform("translate3d(0px, "+c+"px, 0)"),o[0].style.height=u+"px"),l.hide&&(clearTimeout(e.scrollbar.timeout),i[0].style.opacity=1,e.scrollbar.timeout=setTimeout((function(){i[0].style.opacity=0,i.transition(400)}),1e3))}},setTransition:function(e){var t=this;t.params.scrollbar.el&&t.scrollbar.el&&t.scrollbar.$dragEl.transition(e)},updateSize:function(){var e=this;if(e.params.scrollbar.el&&e.scrollbar.el){var t=e.scrollbar,n=t.$dragEl,r=t.$el;n[0].style.width="",n[0].style.height="";var a,s=e.isHorizontal()?r[0].offsetWidth:r[0].offsetHeight,o=e.size/e.virtualSize,i=o*(s/e.size);a="auto"===e.params.scrollbar.dragSize?s*o:parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?n[0].style.width=a+"px":n[0].style.height=a+"px",r[0].style.display=o>=1?"none":"",e.params.scrollbar.hide&&(r[0].style.opacity=0),Mm(t,{trackSize:s,divider:o,moveDivider:i,dragSize:a}),e.params.watchOverflow&&e.enabled&&t.$el[e.isLocked?"addClass":"removeClass"](e.params.scrollbar.lockClass)}},getPointerPosition:function(e){return this.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientX:e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientY:e.clientY},setDragPosition:function(e){var t,n=this,r=n.scrollbar,a=n.rtlTranslate,s=r.$el,o=r.dragSize,i=r.trackSize,l=r.dragStartPos;t=(r.getPointerPosition(e)-s.offset()[n.isHorizontal()?"left":"top"]-(null!==l?l:o/2))/(i-o),t=Math.max(Math.min(t,1),0),a&&(t=1-t);var u=n.minTranslate()+(n.maxTranslate()-n.minTranslate())*t;n.updateProgress(u),n.setTranslate(u),n.updateActiveIndex(),n.updateSlidesClasses()},onDragStart:function(e){var t=this,n=t.params.scrollbar,r=t.scrollbar,a=t.$wrapperEl,s=r.$el,o=r.$dragEl;t.scrollbar.isTouched=!0,t.scrollbar.dragStartPos=e.target===o[0]||e.target===o?r.getPointerPosition(e)-e.target.getBoundingClientRect()[t.isHorizontal()?"left":"top"]:null,e.preventDefault(),e.stopPropagation(),a.transition(100),o.transition(100),r.setDragPosition(e),clearTimeout(t.scrollbar.dragTimeout),s.transition(0),n.hide&&s.css("opacity",1),t.params.cssMode&&t.$wrapperEl.css("scroll-snap-type","none"),t.emit("scrollbarDragStart",e)},onDragMove:function(e){var t=this,n=t.scrollbar,r=t.$wrapperEl,a=n.$el,s=n.$dragEl;t.scrollbar.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,n.setDragPosition(e),r.transition(0),a.transition(0),s.transition(0),t.emit("scrollbarDragMove",e))},onDragEnd:function(e){var t=this,n=t.params.scrollbar,r=t.scrollbar,a=t.$wrapperEl,s=r.$el;t.scrollbar.isTouched&&(t.scrollbar.isTouched=!1,t.params.cssMode&&(t.$wrapperEl.css("scroll-snap-type",""),a.transition("")),n.hide&&(clearTimeout(t.scrollbar.dragTimeout),t.scrollbar.dragTimeout=$m((function(){s.css("opacity",0),s.transition(400)}),1e3)),t.emit("scrollbarDragEnd",e),n.snapOnRelease&&t.slideToClosest())},enableDraggable:function(){var e=this;if(e.params.scrollbar.el){var t=bl(),n=e.scrollbar,r=e.touchEventsTouch,a=e.touchEventsDesktop,s=e.params,o=e.support,i=n.$el[0],l=!(!o.passiveListener||!s.passiveListeners)&&{passive:!1,capture:!1},u=!(!o.passiveListener||!s.passiveListeners)&&{passive:!0,capture:!1};i&&(o.touch?(i.addEventListener(r.start,e.scrollbar.onDragStart,l),i.addEventListener(r.move,e.scrollbar.onDragMove,l),i.addEventListener(r.end,e.scrollbar.onDragEnd,u)):(i.addEventListener(a.start,e.scrollbar.onDragStart,l),t.addEventListener(a.move,e.scrollbar.onDragMove,l),t.addEventListener(a.end,e.scrollbar.onDragEnd,u)))}},disableDraggable:function(){var e=this;if(e.params.scrollbar.el){var t=bl(),n=e.scrollbar,r=e.touchEventsTouch,a=e.touchEventsDesktop,s=e.params,o=e.support,i=n.$el[0],l=!(!o.passiveListener||!s.passiveListeners)&&{passive:!1,capture:!1},u=!(!o.passiveListener||!s.passiveListeners)&&{passive:!0,capture:!1};i&&(o.touch?(i.removeEventListener(r.start,e.scrollbar.onDragStart,l),i.removeEventListener(r.move,e.scrollbar.onDragMove,l),i.removeEventListener(r.end,e.scrollbar.onDragEnd,u)):(i.removeEventListener(a.start,e.scrollbar.onDragStart,l),t.removeEventListener(a.move,e.scrollbar.onDragMove,l),t.removeEventListener(a.end,e.scrollbar.onDragEnd,u)))}},init:function(){var e=this,t=e.scrollbar,n=e.$el;e.params.scrollbar=Pm(n,e.params.scrollbar,e.params.createElements,{el:"swiper-scrollbar"});var r=e.params.scrollbar;if(r.el){var a=Tm(r.el);e.params.uniqueNavElements&&"string"==typeof r.el&&a.length>1&&1===n.find(r.el).length&&(a=n.find(r.el));var s=a.find("."+e.params.scrollbar.dragClass);0===s.length&&(s=Tm('<div class="'+e.params.scrollbar.dragClass+'"></div>'),a.append(s)),Mm(t,{$el:a,el:a[0],$dragEl:s,dragEl:s[0]}),r.draggable&&t.enableDraggable(),a&&a[e.enabled?"removeClass":"addClass"](e.params.scrollbar.lockClass)}},destroy:function(){this.scrollbar.disableDraggable()}},Mg={name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create:function(){_m(this,{scrollbar:Og({isTouched:!1,timeout:null,dragTimeout:null},Ag)})},on:{init:function(e){e.scrollbar.init(),e.scrollbar.updateSize(),e.scrollbar.setTranslate()},update:function(e){e.scrollbar.updateSize()},resize:function(e){e.scrollbar.updateSize()},observerUpdate:function(e){e.scrollbar.updateSize()},setTranslate:function(e){e.scrollbar.setTranslate()},setTransition:function(e,t){e.scrollbar.setTransition(t)},"enable disable":function(e){var t=e.scrollbar.$el;t&&t[e.enabled?"removeClass":"addClass"](e.params.scrollbar.lockClass)},destroy:function(e){e.scrollbar.destroy()}}};function _g(){return _g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_g.apply(this,arguments)}var Rg={setTransform:function(e,t){var n=this.rtl,r=Tm(e),a=n?-1:1,s=r.attr("data-swiper-parallax")||"0",o=r.attr("data-swiper-parallax-x"),i=r.attr("data-swiper-parallax-y"),l=r.attr("data-swiper-parallax-scale"),u=r.attr("data-swiper-parallax-opacity");if(o||i?(o=o||"0",i=i||"0"):this.isHorizontal()?(o=s,i="0"):(i=s,o="0"),o=o.indexOf("%")>=0?parseInt(o,10)*t*a+"%":o*t*a+"px",i=i.indexOf("%")>=0?parseInt(i,10)*t+"%":i*t+"px",null!=u){var c=u-(u-1)*(1-Math.abs(t));r[0].style.opacity=c}if(null==l)r.transform("translate3d("+o+", "+i+", 0px)");else{var p=l-(l-1)*(1-Math.abs(t));r.transform("translate3d("+o+", "+i+", 0px) scale("+p+")")}},setTranslate:function(){var e=this,t=e.$el,n=e.slides,r=e.progress,a=e.snapGrid;t.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t){e.parallax.setTransform(t,r)})),n.each((function(t,n){var s=t.progress;e.params.slidesPerGroup>1&&"auto"!==e.params.slidesPerView&&(s+=Math.ceil(n/2)-r*(a.length-1)),s=Math.min(Math.max(s,-1),1),Tm(t).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t){e.parallax.setTransform(t,s)}))}))},setTransition:function(e){void 0===e&&(e=this.params.speed);this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t){var n=Tm(t),r=parseInt(n.attr("data-swiper-parallax-duration"),10)||e;0===e&&(r=0),n.transition(r)}))}},Pg={name:"parallax",params:{parallax:{enabled:!1}},create:function(){_m(this,{parallax:_g({},Rg)})},on:{beforeInit:function(e){e.params.parallax.enabled&&(e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)},init:function(e){e.params.parallax.enabled&&e.parallax.setTranslate()},setTranslate:function(e){e.params.parallax.enabled&&e.parallax.setTranslate()},setTransition:function(e,t){e.params.parallax.enabled&&e.parallax.setTransition(t)}}};function Dg(){return Dg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dg.apply(this,arguments)}var Lg={getDistanceBetweenTouches:function(e){if(e.targetTouches.length<2)return 1;var t=e.targetTouches[0].pageX,n=e.targetTouches[0].pageY,r=e.targetTouches[1].pageX,a=e.targetTouches[1].pageY;return Math.sqrt(Math.pow(r-t,2)+Math.pow(a-n,2))},onGestureStart:function(e){var t=this,n=t.support,r=t.params.zoom,a=t.zoom,s=a.gesture;if(a.fakeGestureTouched=!1,a.fakeGestureMoved=!1,!n.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;a.fakeGestureTouched=!0,s.scaleStart=Lg.getDistanceBetweenTouches(e)}s.$slideEl&&s.$slideEl.length||(s.$slideEl=Tm(e.target).closest("."+t.params.slideClass),0===s.$slideEl.length&&(s.$slideEl=t.slides.eq(t.activeIndex)),s.$imageEl=s.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),s.$imageWrapEl=s.$imageEl.parent("."+r.containerClass),s.maxRatio=s.$imageWrapEl.attr("data-swiper-zoom")||r.maxRatio,0!==s.$imageWrapEl.length)?(s.$imageEl&&s.$imageEl.transition(0),t.zoom.isScaling=!0):s.$imageEl=void 0},onGestureChange:function(e){var t=this,n=t.support,r=t.params.zoom,a=t.zoom,s=a.gesture;if(!n.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;a.fakeGestureMoved=!0,s.scaleMove=Lg.getDistanceBetweenTouches(e)}s.$imageEl&&0!==s.$imageEl.length?(n.gestures?a.scale=e.scale*a.currentScale:a.scale=s.scaleMove/s.scaleStart*a.currentScale,a.scale>s.maxRatio&&(a.scale=s.maxRatio-1+Math.pow(a.scale-s.maxRatio+1,.5)),a.scale<r.minRatio&&(a.scale=r.minRatio+1-Math.pow(r.minRatio-a.scale+1,.5)),s.$imageEl.transform("translate3d(0,0,0) scale("+a.scale+")")):"gesturechange"===e.type&&a.onGestureStart(e)},onGestureEnd:function(e){var t=this,n=t.device,r=t.support,a=t.params.zoom,s=t.zoom,o=s.gesture;if(!r.gestures){if(!s.fakeGestureTouched||!s.fakeGestureMoved)return;if("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2&&!n.android)return;s.fakeGestureTouched=!1,s.fakeGestureMoved=!1}o.$imageEl&&0!==o.$imageEl.length&&(s.scale=Math.max(Math.min(s.scale,o.maxRatio),a.minRatio),o.$imageEl.transition(t.params.speed).transform("translate3d(0,0,0) scale("+s.scale+")"),s.currentScale=s.scale,s.isScaling=!1,1===s.scale&&(o.$slideEl=void 0))},onTouchStart:function(e){var t=this.device,n=this.zoom,r=n.gesture,a=n.image;r.$imageEl&&0!==r.$imageEl.length&&(a.isTouched||(t.android&&e.cancelable&&e.preventDefault(),a.isTouched=!0,a.touchesStart.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,a.touchesStart.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY))},onTouchMove:function(e){var t=this,n=t.zoom,r=n.gesture,a=n.image,s=n.velocity;if(r.$imageEl&&0!==r.$imageEl.length&&(t.allowClick=!1,a.isTouched&&r.$slideEl)){a.isMoved||(a.width=r.$imageEl[0].offsetWidth,a.height=r.$imageEl[0].offsetHeight,a.startX=Nm(r.$imageWrapEl[0],"x")||0,a.startY=Nm(r.$imageWrapEl[0],"y")||0,r.slideWidth=r.$slideEl[0].offsetWidth,r.slideHeight=r.$slideEl[0].offsetHeight,r.$imageWrapEl.transition(0));var o=a.width*n.scale,i=a.height*n.scale;if(!(o<r.slideWidth&&i<r.slideHeight)){if(a.minX=Math.min(r.slideWidth/2-o/2,0),a.maxX=-a.minX,a.minY=Math.min(r.slideHeight/2-i/2,0),a.maxY=-a.minY,a.touchesCurrent.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,a.touchesCurrent.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!a.isMoved&&!n.isScaling){if(t.isHorizontal()&&(Math.floor(a.minX)===Math.floor(a.startX)&&a.touchesCurrent.x<a.touchesStart.x||Math.floor(a.maxX)===Math.floor(a.startX)&&a.touchesCurrent.x>a.touchesStart.x))return void(a.isTouched=!1);if(!t.isHorizontal()&&(Math.floor(a.minY)===Math.floor(a.startY)&&a.touchesCurrent.y<a.touchesStart.y||Math.floor(a.maxY)===Math.floor(a.startY)&&a.touchesCurrent.y>a.touchesStart.y))return void(a.isTouched=!1)}e.cancelable&&e.preventDefault(),e.stopPropagation(),a.isMoved=!0,a.currentX=a.touchesCurrent.x-a.touchesStart.x+a.startX,a.currentY=a.touchesCurrent.y-a.touchesStart.y+a.startY,a.currentX<a.minX&&(a.currentX=a.minX+1-Math.pow(a.minX-a.currentX+1,.8)),a.currentX>a.maxX&&(a.currentX=a.maxX-1+Math.pow(a.currentX-a.maxX+1,.8)),a.currentY<a.minY&&(a.currentY=a.minY+1-Math.pow(a.minY-a.currentY+1,.8)),a.currentY>a.maxY&&(a.currentY=a.maxY-1+Math.pow(a.currentY-a.maxY+1,.8)),s.prevPositionX||(s.prevPositionX=a.touchesCurrent.x),s.prevPositionY||(s.prevPositionY=a.touchesCurrent.y),s.prevTime||(s.prevTime=Date.now()),s.x=(a.touchesCurrent.x-s.prevPositionX)/(Date.now()-s.prevTime)/2,s.y=(a.touchesCurrent.y-s.prevPositionY)/(Date.now()-s.prevTime)/2,Math.abs(a.touchesCurrent.x-s.prevPositionX)<2&&(s.x=0),Math.abs(a.touchesCurrent.y-s.prevPositionY)<2&&(s.y=0),s.prevPositionX=a.touchesCurrent.x,s.prevPositionY=a.touchesCurrent.y,s.prevTime=Date.now(),r.$imageWrapEl.transform("translate3d("+a.currentX+"px, "+a.currentY+"px,0)")}}},onTouchEnd:function(){var e=this.zoom,t=e.gesture,n=e.image,r=e.velocity;if(t.$imageEl&&0!==t.$imageEl.length){if(!n.isTouched||!n.isMoved)return n.isTouched=!1,void(n.isMoved=!1);n.isTouched=!1,n.isMoved=!1;var a=300,s=300,o=r.x*a,i=n.currentX+o,l=r.y*s,u=n.currentY+l;0!==r.x&&(a=Math.abs((i-n.currentX)/r.x)),0!==r.y&&(s=Math.abs((u-n.currentY)/r.y));var c=Math.max(a,s);n.currentX=i,n.currentY=u;var p=n.width*e.scale,d=n.height*e.scale;n.minX=Math.min(t.slideWidth/2-p/2,0),n.maxX=-n.minX,n.minY=Math.min(t.slideHeight/2-d/2,0),n.maxY=-n.minY,n.currentX=Math.max(Math.min(n.currentX,n.maxX),n.minX),n.currentY=Math.max(Math.min(n.currentY,n.maxY),n.minY),t.$imageWrapEl.transition(c).transform("translate3d("+n.currentX+"px, "+n.currentY+"px,0)")}},onTransitionEnd:function(){var e=this,t=e.zoom,n=t.gesture;n.$slideEl&&e.previousIndex!==e.activeIndex&&(n.$imageEl&&n.$imageEl.transform("translate3d(0,0,0) scale(1)"),n.$imageWrapEl&&n.$imageWrapEl.transform("translate3d(0,0,0)"),t.scale=1,t.currentScale=1,n.$slideEl=void 0,n.$imageEl=void 0,n.$imageWrapEl=void 0)},toggle:function(e){var t=this.zoom;t.scale&&1!==t.scale?t.out():t.in(e)},in:function(e){var t,n,r,a,s,o,i,l,u,c,p,d,h,f,m,g,v=this,b=wl(),y=v.zoom,w=v.params.zoom,x=y.gesture,k=y.image;(x.$slideEl||(e&&e.target&&(x.$slideEl=Tm(e.target).closest("."+v.params.slideClass)),x.$slideEl||(v.params.virtual&&v.params.virtual.enabled&&v.virtual?x.$slideEl=v.$wrapperEl.children("."+v.params.slideActiveClass):x.$slideEl=v.slides.eq(v.activeIndex)),x.$imageEl=x.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),x.$imageWrapEl=x.$imageEl.parent("."+w.containerClass)),x.$imageEl&&0!==x.$imageEl.length&&x.$imageWrapEl&&0!==x.$imageWrapEl.length)&&(x.$slideEl.addClass(""+w.zoomedSlideClass),void 0===k.touchesStart.x&&e?(t="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,n="touchend"===e.type?e.changedTouches[0].pageY:e.pageY):(t=k.touchesStart.x,n=k.touchesStart.y),y.scale=x.$imageWrapEl.attr("data-swiper-zoom")||w.maxRatio,y.currentScale=x.$imageWrapEl.attr("data-swiper-zoom")||w.maxRatio,e?(m=x.$slideEl[0].offsetWidth,g=x.$slideEl[0].offsetHeight,r=x.$slideEl.offset().left+b.scrollX+m/2-t,a=x.$slideEl.offset().top+b.scrollY+g/2-n,i=x.$imageEl[0].offsetWidth,l=x.$imageEl[0].offsetHeight,u=i*y.scale,c=l*y.scale,h=-(p=Math.min(m/2-u/2,0)),f=-(d=Math.min(g/2-c/2,0)),(s=r*y.scale)<p&&(s=p),s>h&&(s=h),(o=a*y.scale)<d&&(o=d),o>f&&(o=f)):(s=0,o=0),x.$imageWrapEl.transition(300).transform("translate3d("+s+"px, "+o+"px,0)"),x.$imageEl.transition(300).transform("translate3d(0,0,0) scale("+y.scale+")"))},out:function(){var e=this,t=e.zoom,n=e.params.zoom,r=t.gesture;r.$slideEl||(e.params.virtual&&e.params.virtual.enabled&&e.virtual?r.$slideEl=e.$wrapperEl.children("."+e.params.slideActiveClass):r.$slideEl=e.slides.eq(e.activeIndex),r.$imageEl=r.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),r.$imageWrapEl=r.$imageEl.parent("."+n.containerClass)),r.$imageEl&&0!==r.$imageEl.length&&r.$imageWrapEl&&0!==r.$imageWrapEl.length&&(t.scale=1,t.currentScale=1,r.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),r.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),r.$slideEl.removeClass(""+n.zoomedSlideClass),r.$slideEl=void 0)},toggleGestures:function(e){var t=this,n=t.zoom,r=n.slideSelector,a=n.passiveListener;t.$wrapperEl[e]("gesturestart",r,n.onGestureStart,a),t.$wrapperEl[e]("gesturechange",r,n.onGestureChange,a),t.$wrapperEl[e]("gestureend",r,n.onGestureEnd,a)},enableGestures:function(){this.zoom.gesturesEnabled||(this.zoom.gesturesEnabled=!0,this.zoom.toggleGestures("on"))},disableGestures:function(){this.zoom.gesturesEnabled&&(this.zoom.gesturesEnabled=!1,this.zoom.toggleGestures("off"))},enable:function(){var e=this,t=e.support,n=e.zoom;if(!n.enabled){n.enabled=!0;var r=!("touchstart"!==e.touchEvents.start||!t.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1},a=!t.passiveListener||{passive:!1,capture:!0},s="."+e.params.slideClass;e.zoom.passiveListener=r,e.zoom.slideSelector=s,t.gestures?(e.$wrapperEl.on(e.touchEvents.start,e.zoom.enableGestures,r),e.$wrapperEl.on(e.touchEvents.end,e.zoom.disableGestures,r)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.on(e.touchEvents.start,s,n.onGestureStart,r),e.$wrapperEl.on(e.touchEvents.move,s,n.onGestureChange,a),e.$wrapperEl.on(e.touchEvents.end,s,n.onGestureEnd,r),e.touchEvents.cancel&&e.$wrapperEl.on(e.touchEvents.cancel,s,n.onGestureEnd,r)),e.$wrapperEl.on(e.touchEvents.move,"."+e.params.zoom.containerClass,n.onTouchMove,a)}},disable:function(){var e=this,t=e.zoom;if(t.enabled){var n=e.support;e.zoom.enabled=!1;var r=!("touchstart"!==e.touchEvents.start||!n.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1},a=!n.passiveListener||{passive:!1,capture:!0},s="."+e.params.slideClass;n.gestures?(e.$wrapperEl.off(e.touchEvents.start,e.zoom.enableGestures,r),e.$wrapperEl.off(e.touchEvents.end,e.zoom.disableGestures,r)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.off(e.touchEvents.start,s,t.onGestureStart,r),e.$wrapperEl.off(e.touchEvents.move,s,t.onGestureChange,a),e.$wrapperEl.off(e.touchEvents.end,s,t.onGestureEnd,r),e.touchEvents.cancel&&e.$wrapperEl.off(e.touchEvents.cancel,s,t.onGestureEnd,r)),e.$wrapperEl.off(e.touchEvents.move,"."+e.params.zoom.containerClass,t.onTouchMove,a)}}},Bg={name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var e=this;_m(e,{zoom:Dg({enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}},Lg)});var t=1;Object.defineProperty(e.zoom,"scale",{get:function(){return t},set:function(n){if(t!==n){var r=e.zoom.gesture.$imageEl?e.zoom.gesture.$imageEl[0]:void 0,a=e.zoom.gesture.$slideEl?e.zoom.gesture.$slideEl[0]:void 0;e.emit("zoomChange",n,r,a)}t=n}})},on:{init:function(e){e.params.zoom.enabled&&e.zoom.enable()},destroy:function(e){e.zoom.disable()},touchStart:function(e,t){e.zoom.enabled&&e.zoom.onTouchStart(t)},touchEnd:function(e,t){e.zoom.enabled&&e.zoom.onTouchEnd(t)},doubleTap:function(e,t){!e.animating&&e.params.zoom.enabled&&e.zoom.enabled&&e.params.zoom.toggle&&e.zoom.toggle(t)},transitionEnd:function(e){e.zoom.enabled&&e.params.zoom.enabled&&e.zoom.onTransitionEnd()},slideChange:function(e){e.zoom.enabled&&e.params.zoom.enabled&&e.params.cssMode&&e.zoom.onTransitionEnd()}}};function Fg(){return Fg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fg.apply(this,arguments)}var zg={loadInSlide:function(e,t){void 0===t&&(t=!0);var n=this,r=n.params.lazy;if(void 0!==e&&0!==n.slides.length){var a=n.virtual&&n.params.virtual.enabled?n.$wrapperEl.children("."+n.params.slideClass+'[data-swiper-slide-index="'+e+'"]'):n.slides.eq(e),s=a.find("."+r.elementClass+":not(."+r.loadedClass+"):not(."+r.loadingClass+")");!a.hasClass(r.elementClass)||a.hasClass(r.loadedClass)||a.hasClass(r.loadingClass)||s.push(a[0]),0!==s.length&&s.each((function(e){var s=Tm(e);s.addClass(r.loadingClass);var o=s.attr("data-background"),i=s.attr("data-src"),l=s.attr("data-srcset"),u=s.attr("data-sizes"),c=s.parent("picture");n.loadImage(s[0],i||o,l,u,!1,(function(){if(null!=n&&n&&(!n||n.params)&&!n.destroyed){if(o?(s.css("background-image",'url("'+o+'")'),s.removeAttr("data-background")):(l&&(s.attr("srcset",l),s.removeAttr("data-srcset")),u&&(s.attr("sizes",u),s.removeAttr("data-sizes")),c.length&&c.children("source").each((function(e){var t=Tm(e);t.attr("data-srcset")&&(t.attr("srcset",t.attr("data-srcset")),t.removeAttr("data-srcset"))})),i&&(s.attr("src",i),s.removeAttr("data-src"))),s.addClass(r.loadedClass).removeClass(r.loadingClass),a.find("."+r.preloaderClass).remove(),n.params.loop&&t){var e=a.attr("data-swiper-slide-index");if(a.hasClass(n.params.slideDuplicateClass)){var p=n.$wrapperEl.children('[data-swiper-slide-index="'+e+'"]:not(.'+n.params.slideDuplicateClass+")");n.lazy.loadInSlide(p.index(),!1)}else{var d=n.$wrapperEl.children("."+n.params.slideDuplicateClass+'[data-swiper-slide-index="'+e+'"]');n.lazy.loadInSlide(d.index(),!1)}}n.emit("lazyImageReady",a[0],s[0]),n.params.autoHeight&&n.updateAutoHeight()}})),n.emit("lazyImageLoad",a[0],s[0])}))}},load:function(){var e=this,t=e.$wrapperEl,n=e.params,r=e.slides,a=e.activeIndex,s=e.virtual&&n.virtual.enabled,o=n.lazy,i=n.slidesPerView;function l(e){if(s){if(t.children("."+n.slideClass+'[data-swiper-slide-index="'+e+'"]').length)return!0}else if(r[e])return!0;return!1}function u(e){return s?Tm(e).attr("data-swiper-slide-index"):Tm(e).index()}if("auto"===i&&(i=0),e.lazy.initialImageLoaded||(e.lazy.initialImageLoaded=!0),e.params.watchSlidesVisibility)t.children("."+n.slideVisibleClass).each((function(t){var n=s?Tm(t).attr("data-swiper-slide-index"):Tm(t).index();e.lazy.loadInSlide(n)}));else if(i>1)for(var c=a;c<a+i;c+=1)l(c)&&e.lazy.loadInSlide(c);else e.lazy.loadInSlide(a);if(o.loadPrevNext)if(i>1||o.loadPrevNextAmount&&o.loadPrevNextAmount>1){for(var p=o.loadPrevNextAmount,d=i,h=Math.min(a+d+Math.max(p,d),r.length),f=Math.max(a-Math.max(d,p),0),m=a+i;m<h;m+=1)l(m)&&e.lazy.loadInSlide(m);for(var g=f;g<a;g+=1)l(g)&&e.lazy.loadInSlide(g)}else{var v=t.children("."+n.slideNextClass);v.length>0&&e.lazy.loadInSlide(u(v));var b=t.children("."+n.slidePrevClass);b.length>0&&e.lazy.loadInSlide(u(b))}},checkInViewOnLoad:function(){var e=wl(),t=this;if(t&&!t.destroyed){var n=t.params.lazy.scrollingElement?Tm(t.params.lazy.scrollingElement):Tm(e),r=n[0]===e,a=r?e.innerWidth:n[0].offsetWidth,s=r?e.innerHeight:n[0].offsetHeight,o=t.$el.offset(),i=!1;t.rtlTranslate&&(o.left-=t.$el[0].scrollLeft);for(var l=[[o.left,o.top],[o.left+t.width,o.top],[o.left,o.top+t.height],[o.left+t.width,o.top+t.height]],u=0;u<l.length;u+=1){var c=l[u];if(c[0]>=0&&c[0]<=a&&c[1]>=0&&c[1]<=s){if(0===c[0]&&0===c[1])continue;i=!0}}var p=!("touchstart"!==t.touchEvents.start||!t.support.passiveListener||!t.params.passiveListeners)&&{passive:!0,capture:!1};i?(t.lazy.load(),n.off("scroll",t.lazy.checkInViewOnLoad,p)):t.lazy.scrollHandlerAttached||(t.lazy.scrollHandlerAttached=!0,n.on("scroll",t.lazy.checkInViewOnLoad,p))}}},Vg={name:"lazy",params:{lazy:{checkInView:!1,enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,scrollingElement:"",elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){_m(this,{lazy:Fg({initialImageLoaded:!1},zg)})},on:{beforeInit:function(e){e.params.lazy.enabled&&e.params.preloadImages&&(e.params.preloadImages=!1)},init:function(e){e.params.lazy.enabled&&!e.params.loop&&0===e.params.initialSlide&&(e.params.lazy.checkInView?e.lazy.checkInViewOnLoad():e.lazy.load())},scroll:function(e){e.params.freeMode&&!e.params.freeModeSticky&&e.lazy.load()},"scrollbarDragMove resize _freeModeNoMomentumRelease":function(e){e.params.lazy.enabled&&e.lazy.load()},transitionStart:function(e){e.params.lazy.enabled&&(e.params.lazy.loadOnTransitionStart||!e.params.lazy.loadOnTransitionStart&&!e.lazy.initialImageLoaded)&&e.lazy.load()},transitionEnd:function(e){e.params.lazy.enabled&&!e.params.lazy.loadOnTransitionStart&&e.lazy.load()},slideChange:function(e){var t=e.params,n=t.lazy,r=t.cssMode,a=t.watchSlidesVisibility,s=t.watchSlidesProgress,o=t.touchReleaseOnEdges,i=t.resistanceRatio;n.enabled&&(r||(a||s)&&(o||0===i))&&e.lazy.load()}}};function Wg(){return Wg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wg.apply(this,arguments)}var Hg={LinearSpline:function(e,t){var n,r,a,s,o,i=function(e,t){for(r=-1,n=e.length;n-r>1;)e[a=n+r>>1]<=t?r=a:n=a;return n};return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(o=i(this.x,e),s=o-1,(e-this.x[s])*(this.y[o]-this.y[s])/(this.x[o]-this.x[s])+this.y[s]):0},this},getInterpolateFunction:function(e){var t=this;t.controller.spline||(t.controller.spline=t.params.loop?new Hg.LinearSpline(t.slidesGrid,e.slidesGrid):new Hg.LinearSpline(t.snapGrid,e.snapGrid))},setTranslate:function(e,t){var n,r,a=this,s=a.controller.control,o=a.constructor;function i(e){var t=a.rtlTranslate?-a.translate:a.translate;"slide"===a.params.controller.by&&(a.controller.getInterpolateFunction(e),r=-a.controller.spline.interpolate(-t)),r&&"container"!==a.params.controller.by||(n=(e.maxTranslate()-e.minTranslate())/(a.maxTranslate()-a.minTranslate()),r=(t-a.minTranslate())*n+e.minTranslate()),a.params.controller.inverse&&(r=e.maxTranslate()-r),e.updateProgress(r),e.setTranslate(r,a),e.updateActiveIndex(),e.updateSlidesClasses()}if(Array.isArray(s))for(var l=0;l<s.length;l+=1)s[l]!==t&&s[l]instanceof o&&i(s[l]);else s instanceof o&&t!==s&&i(s)},setTransition:function(e,t){var n,r=this,a=r.constructor,s=r.controller.control;function o(t){t.setTransition(e,r),0!==e&&(t.transitionStart(),t.params.autoHeight&&$m((function(){t.updateAutoHeight()})),t.$wrapperEl.transitionEnd((function(){s&&(t.params.loop&&"slide"===r.params.controller.by&&t.loopFix(),t.transitionEnd())})))}if(Array.isArray(s))for(n=0;n<s.length;n+=1)s[n]!==t&&s[n]instanceof a&&o(s[n]);else s instanceof a&&t!==s&&o(s)}},jg={name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){_m(this,{controller:Wg({control:this.params.controller.control},Hg)})},on:{update:function(e){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},resize:function(e){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},observerUpdate:function(e){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},setTranslate:function(e,t,n){e.controller.control&&e.controller.setTranslate(t,n)},setTransition:function(e,t,n){e.controller.control&&e.controller.setTransition(t,n)}}};function Ug(){return Ug=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ug.apply(this,arguments)}var Gg={getRandomNumber:function(e){void 0===e&&(e=16);return"x".repeat(e).replace(/x/g,(function(){return Math.round(16*Math.random()).toString(16)}))},makeElFocusable:function(e){return e.attr("tabIndex","0"),e},makeElNotFocusable:function(e){return e.attr("tabIndex","-1"),e},addElRole:function(e,t){return e.attr("role",t),e},addElRoleDescription:function(e,t){return e.attr("aria-roledescription",t),e},addElControls:function(e,t){return e.attr("aria-controls",t),e},addElLabel:function(e,t){return e.attr("aria-label",t),e},addElId:function(e,t){return e.attr("id",t),e},addElLive:function(e,t){return e.attr("aria-live",t),e},disableEl:function(e){return e.attr("aria-disabled",!0),e},enableEl:function(e){return e.attr("aria-disabled",!1),e},onEnterOrSpaceKey:function(e){if(13===e.keyCode||32===e.keyCode){var t=this,n=t.params.a11y,r=Tm(e.target);t.navigation&&t.navigation.$nextEl&&r.is(t.navigation.$nextEl)&&(t.isEnd&&!t.params.loop||t.slideNext(),t.isEnd?t.a11y.notify(n.lastSlideMessage):t.a11y.notify(n.nextSlideMessage)),t.navigation&&t.navigation.$prevEl&&r.is(t.navigation.$prevEl)&&(t.isBeginning&&!t.params.loop||t.slidePrev(),t.isBeginning?t.a11y.notify(n.firstSlideMessage):t.a11y.notify(n.prevSlideMessage)),t.pagination&&r.is(Rm(t.params.pagination.bulletClass))&&r[0].click()}},notify:function(e){var t=this.a11y.liveRegion;0!==t.length&&(t.html(""),t.html(e))},updateNavigation:function(){var e=this;if(!e.params.loop&&e.navigation){var t=e.navigation,n=t.$nextEl,r=t.$prevEl;r&&r.length>0&&(e.isBeginning?(e.a11y.disableEl(r),e.a11y.makeElNotFocusable(r)):(e.a11y.enableEl(r),e.a11y.makeElFocusable(r))),n&&n.length>0&&(e.isEnd?(e.a11y.disableEl(n),e.a11y.makeElNotFocusable(n)):(e.a11y.enableEl(n),e.a11y.makeElFocusable(n)))}},updatePagination:function(){var e=this,t=e.params.a11y;e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.bullets.each((function(n){var r=Tm(n);e.a11y.makeElFocusable(r),e.params.pagination.renderBullet||(e.a11y.addElRole(r,"button"),e.a11y.addElLabel(r,t.paginationBulletMessage.replace(/\{\{index\}\}/,r.index()+1)))}))},init:function(){var e=this,t=e.params.a11y;e.$el.append(e.a11y.liveRegion);var n=e.$el;t.containerRoleDescriptionMessage&&e.a11y.addElRoleDescription(n,t.containerRoleDescriptionMessage),t.containerMessage&&e.a11y.addElLabel(n,t.containerMessage);var r=e.$wrapperEl,a=r.attr("id")||"swiper-wrapper-"+e.a11y.getRandomNumber(16),s=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";e.a11y.addElId(r,a),e.a11y.addElLive(r,s),t.itemRoleDescriptionMessage&&e.a11y.addElRoleDescription(Tm(e.slides),t.itemRoleDescriptionMessage),e.a11y.addElRole(Tm(e.slides),t.slideRole);var o,i,l=e.params.loop?e.slides.filter((function(t){return!t.classList.contains(e.params.slideDuplicateClass)})).length:e.slides.length;e.slides.each((function(n,r){var a=Tm(n),s=e.params.loop?parseInt(a.attr("data-swiper-slide-index"),10):r,o=t.slideLabelMessage.replace(/\{\{index\}\}/,s+1).replace(/\{\{slidesLength\}\}/,l);e.a11y.addElLabel(a,o)})),e.navigation&&e.navigation.$nextEl&&(o=e.navigation.$nextEl),e.navigation&&e.navigation.$prevEl&&(i=e.navigation.$prevEl),o&&o.length&&(e.a11y.makeElFocusable(o),"BUTTON"!==o[0].tagName&&(e.a11y.addElRole(o,"button"),o.on("keydown",e.a11y.onEnterOrSpaceKey)),e.a11y.addElLabel(o,t.nextSlideMessage),e.a11y.addElControls(o,a)),i&&i.length&&(e.a11y.makeElFocusable(i),"BUTTON"!==i[0].tagName&&(e.a11y.addElRole(i,"button"),i.on("keydown",e.a11y.onEnterOrSpaceKey)),e.a11y.addElLabel(i,t.prevSlideMessage),e.a11y.addElControls(i,a)),e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.$el.on("keydown",Rm(e.params.pagination.bulletClass),e.a11y.onEnterOrSpaceKey)},destroy:function(){var e,t,n=this;n.a11y.liveRegion&&n.a11y.liveRegion.length>0&&n.a11y.liveRegion.remove(),n.navigation&&n.navigation.$nextEl&&(e=n.navigation.$nextEl),n.navigation&&n.navigation.$prevEl&&(t=n.navigation.$prevEl),e&&e.off("keydown",n.a11y.onEnterOrSpaceKey),t&&t.off("keydown",n.a11y.onEnterOrSpaceKey),n.pagination&&n.params.pagination.clickable&&n.pagination.bullets&&n.pagination.bullets.length&&n.pagination.$el.off("keydown",Rm(n.params.pagination.bulletClass),n.a11y.onEnterOrSpaceKey)}},qg={name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group"}},create:function(){_m(this,{a11y:Ug({},Gg,{liveRegion:Tm('<span class="'+this.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')})})},on:{afterInit:function(e){e.params.a11y.enabled&&(e.a11y.init(),e.a11y.updateNavigation())},toEdge:function(e){e.params.a11y.enabled&&e.a11y.updateNavigation()},fromEdge:function(e){e.params.a11y.enabled&&e.a11y.updateNavigation()},paginationUpdate:function(e){e.params.a11y.enabled&&e.a11y.updatePagination()},destroy:function(e){e.params.a11y.enabled&&e.a11y.destroy()}}};function Xg(){return Xg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xg.apply(this,arguments)}var Kg={init:function(){var e=this,t=wl();if(e.params.history){if(!t.history||!t.history.pushState)return e.params.history.enabled=!1,void(e.params.hashNavigation.enabled=!0);var n=e.history;n.initialized=!0,n.paths=Kg.getPathValues(e.params.url),(n.paths.key||n.paths.value)&&(n.scrollToSlide(0,n.paths.value,e.params.runCallbacksOnInit),e.params.history.replaceState||t.addEventListener("popstate",e.history.setHistoryPopState))}},destroy:function(){var e=wl();this.params.history.replaceState||e.removeEventListener("popstate",this.history.setHistoryPopState)},setHistoryPopState:function(){var e=this;e.history.paths=Kg.getPathValues(e.params.url),e.history.scrollToSlide(e.params.speed,e.history.paths.value,!1)},getPathValues:function(e){var t=wl(),n=(e?new URL(e):t.location).pathname.slice(1).split("/").filter((function(e){return""!==e})),r=n.length;return{key:n[r-2],value:n[r-1]}},setHistory:function(e,t){var n=this,r=wl();if(n.history.initialized&&n.params.history.enabled){var a;a=n.params.url?new URL(n.params.url):r.location;var s=n.slides.eq(t),o=Kg.slugify(s.attr("data-history"));if(n.params.history.root.length>0){var i=n.params.history.root;"/"===i[i.length-1]&&(i=i.slice(0,i.length-1)),o=i+"/"+e+"/"+o}else a.pathname.includes(e)||(o=e+"/"+o);var l=r.history.state;l&&l.value===o||(n.params.history.replaceState?r.history.replaceState({value:o},null,o):r.history.pushState({value:o},null,o))}},slugify:function(e){return e.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(e,t,n){var r=this;if(t)for(var a=0,s=r.slides.length;a<s;a+=1){var o=r.slides.eq(a);if(Kg.slugify(o.attr("data-history"))===t&&!o.hasClass(r.params.slideDuplicateClass)){var i=o.index();r.slideTo(i,e,n)}}else r.slideTo(0,e,n)}},Yg={name:"history",params:{history:{enabled:!1,root:"",replaceState:!1,key:"slides"}},create:function(){_m(this,{history:Xg({},Kg)})},on:{init:function(e){e.params.history.enabled&&e.history.init()},destroy:function(e){e.params.history.enabled&&e.history.destroy()},"transitionEnd _freeModeNoMomentumRelease":function(e){e.history.initialized&&e.history.setHistory(e.params.history.key,e.activeIndex)},slideChange:function(e){e.history.initialized&&e.params.cssMode&&e.history.setHistory(e.params.history.key,e.activeIndex)}}};function Jg(){return Jg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jg.apply(this,arguments)}var Zg={onHashChange:function(){var e=this,t=bl();e.emit("hashChange");var n=t.location.hash.replace("#","");if(n!==e.slides.eq(e.activeIndex).attr("data-hash")){var r=e.$wrapperEl.children("."+e.params.slideClass+'[data-hash="'+n+'"]').index();if(void 0===r)return;e.slideTo(r)}},setHash:function(){var e=this,t=wl(),n=bl();if(e.hashNavigation.initialized&&e.params.hashNavigation.enabled)if(e.params.hashNavigation.replaceState&&t.history&&t.history.replaceState)t.history.replaceState(null,null,"#"+e.slides.eq(e.activeIndex).attr("data-hash")||0),e.emit("hashSet");else{var r=e.slides.eq(e.activeIndex),a=r.attr("data-hash")||r.attr("data-history");n.location.hash=a||"",e.emit("hashSet")}},init:function(){var e=this,t=bl(),n=wl();if(!(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)){e.hashNavigation.initialized=!0;var r=t.location.hash.replace("#","");if(r)for(var a=0,s=e.slides.length;a<s;a+=1){var o=e.slides.eq(a);if((o.attr("data-hash")||o.attr("data-history"))===r&&!o.hasClass(e.params.slideDuplicateClass)){var i=o.index();e.slideTo(i,0,e.params.runCallbacksOnInit,!0)}}e.params.hashNavigation.watchState&&Tm(n).on("hashchange",e.hashNavigation.onHashChange)}},destroy:function(){var e=wl();this.params.hashNavigation.watchState&&Tm(e).off("hashchange",this.hashNavigation.onHashChange)}},Qg={name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){_m(this,{hashNavigation:Jg({initialized:!1},Zg)})},on:{init:function(e){e.params.hashNavigation.enabled&&e.hashNavigation.init()},destroy:function(e){e.params.hashNavigation.enabled&&e.hashNavigation.destroy()},"transitionEnd _freeModeNoMomentumRelease":function(e){e.hashNavigation.initialized&&e.hashNavigation.setHash()},slideChange:function(e){e.hashNavigation.initialized&&e.params.cssMode&&e.hashNavigation.setHash()}}};function ev(){return ev=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ev.apply(this,arguments)}var tv={run:function(){var e=this,t=e.slides.eq(e.activeIndex),n=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(n=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),clearTimeout(e.autoplay.timeout),e.autoplay.timeout=$m((function(){var t;e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),t=e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(t=e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(t=e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),t=e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(t=e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(t=e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")),(e.params.cssMode&&e.autoplay.running||!1===t)&&e.autoplay.run()}),n)},start:function(){var e=this;return void 0===e.autoplay.timeout&&(!e.autoplay.running&&(e.autoplay.running=!0,e.emit("autoplayStart"),e.autoplay.run(),!0))},stop:function(){var e=this;return!!e.autoplay.running&&(void 0!==e.autoplay.timeout&&(e.autoplay.timeout&&(clearTimeout(e.autoplay.timeout),e.autoplay.timeout=void 0),e.autoplay.running=!1,e.emit("autoplayStop"),!0))},pause:function(e){var t=this;t.autoplay.running&&(t.autoplay.paused||(t.autoplay.timeout&&clearTimeout(t.autoplay.timeout),t.autoplay.paused=!0,0!==e&&t.params.autoplay.waitForTransition?["transitionend","webkitTransitionEnd"].forEach((function(e){t.$wrapperEl[0].addEventListener(e,t.autoplay.onTransitionEnd)})):(t.autoplay.paused=!1,t.autoplay.run())))},onVisibilityChange:function(){var e=this,t=bl();"hidden"===t.visibilityState&&e.autoplay.running&&e.autoplay.pause(),"visible"===t.visibilityState&&e.autoplay.paused&&(e.autoplay.run(),e.autoplay.paused=!1)},onTransitionEnd:function(e){var t=this;t&&!t.destroyed&&t.$wrapperEl&&e.target===t.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach((function(e){t.$wrapperEl[0].removeEventListener(e,t.autoplay.onTransitionEnd)})),t.autoplay.paused=!1,t.autoplay.running?t.autoplay.run():t.autoplay.stop())},onMouseEnter:function(){var e=this;e.params.autoplay.disableOnInteraction?e.autoplay.stop():e.autoplay.pause(),["transitionend","webkitTransitionEnd"].forEach((function(t){e.$wrapperEl[0].removeEventListener(t,e.autoplay.onTransitionEnd)}))},onMouseLeave:function(){var e=this;e.params.autoplay.disableOnInteraction||(e.autoplay.paused=!1,e.autoplay.run())},attachMouseEvents:function(){var e=this;e.params.autoplay.pauseOnMouseEnter&&(e.$el.on("mouseenter",e.autoplay.onMouseEnter),e.$el.on("mouseleave",e.autoplay.onMouseLeave))},detachMouseEvents:function(){var e=this;e.$el.off("mouseenter",e.autoplay.onMouseEnter),e.$el.off("mouseleave",e.autoplay.onMouseLeave)}},nv={name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}},create:function(){_m(this,{autoplay:ev({},tv,{running:!1,paused:!1})})},on:{init:function(e){e.params.autoplay.enabled&&(e.autoplay.start(),bl().addEventListener("visibilitychange",e.autoplay.onVisibilityChange),e.autoplay.attachMouseEvents())},beforeTransitionStart:function(e,t,n){e.autoplay.running&&(n||!e.params.autoplay.disableOnInteraction?e.autoplay.pause(t):e.autoplay.stop())},sliderFirstMove:function(e){e.autoplay.running&&(e.params.autoplay.disableOnInteraction?e.autoplay.stop():e.autoplay.pause())},touchEnd:function(e){e.params.cssMode&&e.autoplay.paused&&!e.params.autoplay.disableOnInteraction&&e.autoplay.run()},destroy:function(e){e.autoplay.detachMouseEvents(),e.autoplay.running&&e.autoplay.stop(),bl().removeEventListener("visibilitychange",e.autoplay.onVisibilityChange)}}};function rv(){return rv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rv.apply(this,arguments)}var av={setTranslate:function(){for(var e=this,t=e.slides,n=0;n<t.length;n+=1){var r=e.slides.eq(n),a=-r[0].swiperSlideOffset;e.params.virtualTranslate||(a-=e.translate);var s=0;e.isHorizontal()||(s=a,a=0);var o=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(r[0].progress),0):1+Math.min(Math.max(r[0].progress,-1),0);r.css({opacity:o}).transform("translate3d("+a+"px, "+s+"px, 0px)")}},setTransition:function(e){var t=this,n=t.slides,r=t.$wrapperEl;if(n.transition(e),t.params.virtualTranslate&&0!==e){var a=!1;n.transitionEnd((function(){if(!a&&t&&!t.destroyed){a=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],n=0;n<e.length;n+=1)r.trigger(e[n])}}))}}},sv={name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){_m(this,{fadeEffect:rv({},av)})},on:{beforeInit:function(e){if("fade"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"fade");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};Mm(e.params,t),Mm(e.originalParams,t)}},setTranslate:function(e){"fade"===e.params.effect&&e.fadeEffect.setTranslate()},setTransition:function(e,t){"fade"===e.params.effect&&e.fadeEffect.setTransition(t)}}};function ov(){return ov=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ov.apply(this,arguments)}var iv={setTranslate:function(){var e,t=this,n=t.$el,r=t.$wrapperEl,a=t.slides,s=t.width,o=t.height,i=t.rtlTranslate,l=t.size,u=t.browser,c=t.params.cubeEffect,p=t.isHorizontal(),d=t.virtual&&t.params.virtual.enabled,h=0;c.shadow&&(p?(0===(e=r.find(".swiper-cube-shadow")).length&&(e=Tm('<div class="swiper-cube-shadow"></div>'),r.append(e)),e.css({height:s+"px"})):0===(e=n.find(".swiper-cube-shadow")).length&&(e=Tm('<div class="swiper-cube-shadow"></div>'),n.append(e)));for(var f=0;f<a.length;f+=1){var m=a.eq(f),g=f;d&&(g=parseInt(m.attr("data-swiper-slide-index"),10));var v=90*g,b=Math.floor(v/360);i&&(v=-v,b=Math.floor(-v/360));var y=Math.max(Math.min(m[0].progress,1),-1),w=0,x=0,k=0;g%4==0?(w=4*-b*l,k=0):(g-1)%4==0?(w=0,k=4*-b*l):(g-2)%4==0?(w=l+4*b*l,k=l):(g-3)%4==0&&(w=-l,k=3*l+4*l*b),i&&(w=-w),p||(x=w,w=0);var C="rotateX("+(p?0:-v)+"deg) rotateY("+(p?v:0)+"deg) translate3d("+w+"px, "+x+"px, "+k+"px)";if(y<=1&&y>-1&&(h=90*g+90*y,i&&(h=90*-g-90*y)),m.transform(C),c.slideShadows){var S=p?m.find(".swiper-slide-shadow-left"):m.find(".swiper-slide-shadow-top"),E=p?m.find(".swiper-slide-shadow-right"):m.find(".swiper-slide-shadow-bottom");0===S.length&&(S=Tm('<div class="swiper-slide-shadow-'+(p?"left":"top")+'"></div>'),m.append(S)),0===E.length&&(E=Tm('<div class="swiper-slide-shadow-'+(p?"right":"bottom")+'"></div>'),m.append(E)),S.length&&(S[0].style.opacity=Math.max(-y,0)),E.length&&(E[0].style.opacity=Math.max(y,0))}}if(r.css({"-webkit-transform-origin":"50% 50% -"+l/2+"px","-moz-transform-origin":"50% 50% -"+l/2+"px","-ms-transform-origin":"50% 50% -"+l/2+"px","transform-origin":"50% 50% -"+l/2+"px"}),c.shadow)if(p)e.transform("translate3d(0px, "+(s/2+c.shadowOffset)+"px, "+-s/2+"px) rotateX(90deg) rotateZ(0deg) scale("+c.shadowScale+")");else{var T=Math.abs(h)-90*Math.floor(Math.abs(h)/90),$=1.5-(Math.sin(2*T*Math.PI/360)/2+Math.cos(2*T*Math.PI/360)/2),I=c.shadowScale,N=c.shadowScale/$,O=c.shadowOffset;e.transform("scale3d("+I+", 1, "+N+") translate3d(0px, "+(o/2+O)+"px, "+-o/2/N+"px) rotateX(-90deg)")}var A=u.isSafari||u.isWebView?-l/2:0;r.transform("translate3d(0px,0,"+A+"px) rotateX("+(t.isHorizontal()?0:h)+"deg) rotateY("+(t.isHorizontal()?-h:0)+"deg)")},setTransition:function(e){var t=this,n=t.$el;t.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),t.params.cubeEffect.shadow&&!t.isHorizontal()&&n.find(".swiper-cube-shadow").transition(e)}},lv={name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){_m(this,{cubeEffect:ov({},iv)})},on:{beforeInit:function(e){if("cube"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"cube"),e.classNames.push(e.params.containerModifierClass+"3d");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0};Mm(e.params,t),Mm(e.originalParams,t)}},setTranslate:function(e){"cube"===e.params.effect&&e.cubeEffect.setTranslate()},setTransition:function(e,t){"cube"===e.params.effect&&e.cubeEffect.setTransition(t)}}};function uv(){return uv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uv.apply(this,arguments)}var cv={setTranslate:function(){for(var e=this,t=e.slides,n=e.rtlTranslate,r=0;r<t.length;r+=1){var a=t.eq(r),s=a[0].progress;e.params.flipEffect.limitRotation&&(s=Math.max(Math.min(a[0].progress,1),-1));var o=-180*s,i=0,l=-a[0].swiperSlideOffset,u=0;if(e.isHorizontal()?n&&(o=-o):(u=l,l=0,i=-o,o=0),a[0].style.zIndex=-Math.abs(Math.round(s))+t.length,e.params.flipEffect.slideShadows){var c=e.isHorizontal()?a.find(".swiper-slide-shadow-left"):a.find(".swiper-slide-shadow-top"),p=e.isHorizontal()?a.find(".swiper-slide-shadow-right"):a.find(".swiper-slide-shadow-bottom");0===c.length&&(c=Tm('<div class="swiper-slide-shadow-'+(e.isHorizontal()?"left":"top")+'"></div>'),a.append(c)),0===p.length&&(p=Tm('<div class="swiper-slide-shadow-'+(e.isHorizontal()?"right":"bottom")+'"></div>'),a.append(p)),c.length&&(c[0].style.opacity=Math.max(-s,0)),p.length&&(p[0].style.opacity=Math.max(s,0))}a.transform("translate3d("+l+"px, "+u+"px, 0px) rotateX("+i+"deg) rotateY("+o+"deg)")}},setTransition:function(e){var t=this,n=t.slides,r=t.activeIndex,a=t.$wrapperEl;if(n.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),t.params.virtualTranslate&&0!==e){var s=!1;n.eq(r).transitionEnd((function(){if(!s&&t&&!t.destroyed){s=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],n=0;n<e.length;n+=1)a.trigger(e[n])}}))}}},pv={name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){_m(this,{flipEffect:uv({},cv)})},on:{beforeInit:function(e){if("flip"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"flip"),e.classNames.push(e.params.containerModifierClass+"3d");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};Mm(e.params,t),Mm(e.originalParams,t)}},setTranslate:function(e){"flip"===e.params.effect&&e.flipEffect.setTranslate()},setTransition:function(e,t){"flip"===e.params.effect&&e.flipEffect.setTransition(t)}}};function dv(){return dv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dv.apply(this,arguments)}var hv={setTranslate:function(){for(var e=this,t=e.width,n=e.height,r=e.slides,a=e.slidesSizesGrid,s=e.params.coverflowEffect,o=e.isHorizontal(),i=e.translate,l=o?t/2-i:n/2-i,u=o?s.rotate:-s.rotate,c=s.depth,p=0,d=r.length;p<d;p+=1){var h=r.eq(p),f=a[p],m=(l-h[0].swiperSlideOffset-f/2)/f*s.modifier,g=o?u*m:0,v=o?0:u*m,b=-c*Math.abs(m),y=s.stretch;"string"==typeof y&&-1!==y.indexOf("%")&&(y=parseFloat(s.stretch)/100*f);var w=o?0:y*m,x=o?y*m:0,k=1-(1-s.scale)*Math.abs(m);Math.abs(x)<.001&&(x=0),Math.abs(w)<.001&&(w=0),Math.abs(b)<.001&&(b=0),Math.abs(g)<.001&&(g=0),Math.abs(v)<.001&&(v=0),Math.abs(k)<.001&&(k=0);var C="translate3d("+x+"px,"+w+"px,"+b+"px)  rotateX("+v+"deg) rotateY("+g+"deg) scale("+k+")";if(h.transform(C),h[0].style.zIndex=1-Math.abs(Math.round(m)),s.slideShadows){var S=o?h.find(".swiper-slide-shadow-left"):h.find(".swiper-slide-shadow-top"),E=o?h.find(".swiper-slide-shadow-right"):h.find(".swiper-slide-shadow-bottom");0===S.length&&(S=Tm('<div class="swiper-slide-shadow-'+(o?"left":"top")+'"></div>'),h.append(S)),0===E.length&&(E=Tm('<div class="swiper-slide-shadow-'+(o?"right":"bottom")+'"></div>'),h.append(E)),S.length&&(S[0].style.opacity=m>0?m:0),E.length&&(E[0].style.opacity=-m>0?-m:0)}}},setTransition:function(e){this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}},fv={name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}},create:function(){_m(this,{coverflowEffect:dv({},hv)})},on:{beforeInit:function(e){"coverflow"===e.params.effect&&(e.classNames.push(e.params.containerModifierClass+"coverflow"),e.classNames.push(e.params.containerModifierClass+"3d"),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)},setTranslate:function(e){"coverflow"===e.params.effect&&e.coverflowEffect.setTranslate()},setTransition:function(e,t){"coverflow"===e.params.effect&&e.coverflowEffect.setTransition(t)}}};function mv(){return mv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mv.apply(this,arguments)}var gv={init:function(){var e=this,t=e.params.thumbs;if(e.thumbs.initialized)return!1;e.thumbs.initialized=!0;var n=e.constructor;return t.swiper instanceof n?(e.thumbs.swiper=t.swiper,Mm(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Mm(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1})):Om(t.swiper)&&(e.thumbs.swiper=new n(Mm({},t.swiper,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!1})),e.thumbs.swiperCreated=!0),e.thumbs.swiper.$el.addClass(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",e.thumbs.onThumbClick),!0},onThumbClick:function(){var e=this,t=e.thumbs.swiper;if(t){var n=t.clickedIndex,r=t.clickedSlide;if(!(r&&Tm(r).hasClass(e.params.thumbs.slideThumbActiveClass)||null==n)){var a;if(a=t.params.loop?parseInt(Tm(t.clickedSlide).attr("data-swiper-slide-index"),10):n,e.params.loop){var s=e.activeIndex;e.slides.eq(s).hasClass(e.params.slideDuplicateClass)&&(e.loopFix(),e._clientLeft=e.$wrapperEl[0].clientLeft,s=e.activeIndex);var o=e.slides.eq(s).prevAll('[data-swiper-slide-index="'+a+'"]').eq(0).index(),i=e.slides.eq(s).nextAll('[data-swiper-slide-index="'+a+'"]').eq(0).index();a=void 0===o?i:void 0===i?o:i-s<s-o?i:o}e.slideTo(a)}}},update:function(e){var t=this,n=t.thumbs.swiper;if(n){var r="auto"===n.params.slidesPerView?n.slidesPerViewDynamic():n.params.slidesPerView,a=t.params.thumbs.autoScrollOffset,s=a&&!n.params.loop;if(t.realIndex!==n.realIndex||s){var o,i,l=n.activeIndex;if(n.params.loop){n.slides.eq(l).hasClass(n.params.slideDuplicateClass)&&(n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft,l=n.activeIndex);var u=n.slides.eq(l).prevAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index(),c=n.slides.eq(l).nextAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index();o=void 0===u?c:void 0===c?u:c-l==l-u?n.params.slidesPerGroup>1?c:l:c-l<l-u?c:u,i=t.activeIndex>t.previousIndex?"next":"prev"}else i=(o=t.realIndex)>t.previousIndex?"next":"prev";s&&(o+="next"===i?a:-1*a),n.visibleSlidesIndexes&&n.visibleSlidesIndexes.indexOf(o)<0&&(n.params.centeredSlides?o=o>l?o-Math.floor(r/2)+1:o+Math.floor(r/2)-1:o>l&&n.params.slidesPerGroup,n.slideTo(o,e?0:void 0))}var p=1,d=t.params.thumbs.slideThumbActiveClass;if(t.params.slidesPerView>1&&!t.params.centeredSlides&&(p=t.params.slidesPerView),t.params.thumbs.multipleActiveThumbs||(p=1),p=Math.floor(p),n.slides.removeClass(d),n.params.loop||n.params.virtual&&n.params.virtual.enabled)for(var h=0;h<p;h+=1)n.$wrapperEl.children('[data-swiper-slide-index="'+(t.realIndex+h)+'"]').addClass(d);else for(var f=0;f<p;f+=1)n.slides.eq(t.realIndex+f).addClass(d)}}},vv={name:"thumbs",params:{thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-container-thumbs"}},create:function(){_m(this,{thumbs:mv({swiper:null,initialized:!1},gv)})},on:{beforeInit:function(e){var t=e.params.thumbs;t&&t.swiper&&(e.thumbs.init(),e.thumbs.update(!0))},slideChange:function(e){e.thumbs.swiper&&e.thumbs.update()},update:function(e){e.thumbs.swiper&&e.thumbs.update()},resize:function(e){e.thumbs.swiper&&e.thumbs.update()},observerUpdate:function(e){e.thumbs.swiper&&e.thumbs.update()},setTransition:function(e,t){var n=e.thumbs.swiper;n&&n.setTransition(t)},beforeDestroy:function(e){var t=e.thumbs.swiper;t&&e.thumbs.swiperCreated&&t&&t.destroy()}}},bv=[bg,xg,Cg,Tg,Ng,Mg,Pg,Bg,Vg,jg,qg,Yg,Qg,nv,sv,lv,pv,fv,vv];function yv(e){var t=this,n=Gc(e);if(0!==n.length&&!n[0].swiper){var r,a,s,o={};n.hasClass("tabs-swipeable-wrap")&&(n.addClass("swiper-container").children(".tabs").addClass("swiper-wrapper").children(".tab").addClass("swiper-slide"),r=n.children(".tabs").children(".tab-active").index(),a=!0,s=n.find(".tabs-routable").length>0),n.attr("data-swiper")?o=JSON.parse(n.attr("data-swiper")):n[0].f7SwiperParams?o=n[0].f7SwiperParams:(o=n.dataset(),Object.keys(o).forEach((function(e){var t=o[e];if("string"==typeof t&&0===t.indexOf("{")&&t.indexOf("}")>0)try{o[e]=JSON.parse(t)}catch(e){}}))),void 0===o.initialSlide&&void 0!==r&&(o.initialSlide=r);var i=t.swiper.create(n[0],o),l=n.parents(".tab").filter((function(e){return 0===Gc(e).parent(".tabs").parent(".tabs-animated-wrap, .tabs-swipeable-wrap").length})).eq(0);n.parents(".popup, .login-screen, .sheet-modal, .popover").on("modal:open",u),n.parents(".panel").on("panel:open",u),l&&l.length&&l.on("tab:show",u),i.on("beforeDestroy",(function(){n.parents(".popup, .login-screen, .sheet-modal, .popover").off("modal:open",u),n.parents(".panel").off("panel:open",u),l&&l.length&&l.off("tab:show",u)})),a&&i.on("slideChange",(function(){if(s){var e=t.views.get(n.parents(".view"));e||(e=t.views.main);var r=e.router,a=r.findTabRouteUrl(i.slides.eq(i.activeIndex)[0]);a&&setTimeout((function(){r.navigate(a)}),0)}else t.tab.show({tabEl:i.slides.eq(i.activeIndex)})}))}function u(){i.update()}}mg.use(bv);var wv={name:"swiper",static:{Swiper:mg},create:function(){this.swiper=Yc({defaultSelector:".swiper-container",constructor:mg,domProp:"swiper"})},on:{pageBeforeRemove:function(e){var t=this;e.$el.find(".swiper-init, .tabs-swipeable-wrap").each((function(e){t.swiper.destroy(e)}))},pageMounted:function(e){var t=this;e.$el.find(".tabs-swipeable-wrap").each((function(e){yv.call(t,e)}))},pageInit:function(e){var t=this;e.$el.find(".swiper-init, .tabs-swipeable-wrap").each((function(e){yv.call(t,e)}))},pageReinit:function(e){var t=this;e.$el.find(".swiper-init, .tabs-swipeable-wrap").each((function(e){var n=t.swiper.get(e);n&&n.update&&n.update()}))},tabMounted:function(e){var t=this;Gc(e).find(".swiper-init, .tabs-swipeable-wrap").each((function(e){yv.call(t,e)}))},tabShow:function(e){var t=this;Gc(e).find(".swiper-init, .tabs-swipeable-wrap").each((function(e){var n=t.swiper.get(e);n&&n.update&&n.update()}))},tabBeforeRemove:function(e){var t=this;Gc(e).find(".swiper-init, .tabs-swipeable-wrap").each((function(e){t.swiper.destroy(e)}))}},vnode:{"swiper-init":{insert:function(e){var t=e.elm;yv.call(this,t)},destroy:function(e){var t=e.elm;this.swiper.destroy(t)}},"tabs-swipeable-wrap":{insert:function(e){var t=e.elm;yv.call(this,t)},destroy:function(e){var t=e.elm;this.swiper.destroy(t)}}}};function xv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kv(e,t){return kv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},kv(e,t)}var Cv=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var a=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r=e.call(this,n,[t])||this);a.app=t;var s=Vl({on:{}},t.params.photoBrowser);return a.useModulesParams(s),a.params=Vl(s,n),Vl(a,{exposed:!1,opened:!1,activeIndex:a.params.swiper.initialSlide,url:a.params.url,swipeToClose:{allow:!0,isTouched:!1,diff:void 0,start:void 0,current:void 0,started:!1,activeSlide:void 0,timeStart:void 0}}),a.useModules(),a.init(),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,kv(t,n);var a,s,o,i=r.prototype;return i.onSlideChange=function(e){var t=this;t.activeIndex=e.activeIndex;var n=e.activeIndex+1,r=t.params.virtualSlides?t.params.photos.length:e.slides.length;e.params.loop&&(r-=2,(n-=e.loopedSlides)<1&&(n=r+n),n>r&&(n-=r));var a,s=t.params.virtualSlides?e.$wrapperEl.find('.swiper-slide[data-swiper-slide-index="'+e.activeIndex+'"]'):e.slides.eq(e.activeIndex),o=t.params.virtualSlides?e.$wrapperEl.find('.swiper-slide[data-swiper-slide-index="'+e.previousIndex+'"]'):e.slides.eq(e.previousIndex),i=t.$el.find(".photo-browser-current"),l=t.$el.find(".photo-browser-total");if("page"===t.params.type&&t.params.navbar&&0===i.length&&"ios"===t.app.theme&&(a=t.app.navbar.getElByPage(t.$el))&&(i=Gc(a).find(".photo-browser-current"),l=Gc(a).find(".photo-browser-total")),i.length&&l.length&&(i.text(n),l.text(r),a||(a=i.parents(".navbar")[0]),a&&t.app.navbar.size(a)),t.captions.length>0){var u=e.params.loop?s.attr("data-swiper-slide-index"):t.activeIndex;t.$captionsContainerEl.find(".photo-browser-caption-active").removeClass("photo-browser-caption-active"),t.$captionsContainerEl.find('[data-caption-index="'+u+'"]').addClass("photo-browser-caption-active")}var c=o.find("video");c.length>0&&"pause"in c[0]&&c[0].pause()},i.onTouchStart=function(){var e=this.swipeToClose;e.allow&&(e.isTouched=!0)},i.onTouchMove=function(e){var t=this,n=t.swipeToClose;n.isTouched&&(n.started||(n.started=!0,n.start="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,t.params.virtualSlides?n.activeSlide=t.swiper.$wrapperEl.children(".swiper-slide-active"):n.activeSlide=t.swiper.slides.eq(t.swiper.activeIndex),n.timeStart=Pl()),e.preventDefault(),n.current="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,n.diff=n.start-n.current,t.$el.transition(0).transform("translate3d(0,"+-n.diff+"px,0)"))},i.onTouchEnd=function(){var e=this,t=e.swipeToClose;if(t.isTouched=!1,t.started){t.started=!1,t.allow=!1;var n=Math.abs(t.diff),r=(new Date).getTime()-t.timeStart;r<300&&n>20||r>=300&&n>100?_l((function(){e.$el&&(t.diff<0?e.$el.addClass("swipe-close-to-bottom"):e.$el.addClass("swipe-close-to-top")),e.emit("local::swipeToClose",e),e.$el.transform("").transition(""),e.close(),t.allow=!0})):(0!==n?e.$el.addClass("photo-browser-transitioning").transitionEnd((function(){t.allow=!0,e.$el.removeClass("photo-browser-transitioning")})):t.allow=!0,_l((function(){e.$el.transform("").transition("")})))}else t.started=!1},i.renderNavbar=function(){var e=this;if(e.params.renderNavbar)return e.params.renderNavbar.call(e);var t=e.params.iconsColor;e.params.iconsColor||"dark"!==e.params.theme||(t="white");var n="ios"!==e.app.theme&&"aurora"!==e.app.theme||!e.params.pageBackLinkText?"":e.params.pageBackLinkText,r=void 0===e.params.navbarShowCount?e.params.photos.length>1:e.params.navbarShowCount,a="page"!==e.params.type;return Od("div",{class:"navbar navbar-photo-browser "+("dark"===e.params.theme?"navbar-photo-browser-dark":"")},Od("div",{class:"navbar-bg"}),Od("div",{class:"navbar-inner navbar-inner-centered-title sliding"},!a&&Od("div",{class:"left"},Od("a",{class:"link "+(n?"":"icon-only")+" back"},Od("i",{class:"icon icon-back "+(t?"color-"+t:"")}),n&&Od("span",null,n))),r&&Od("div",{class:"title"},Od("span",{class:"photo-browser-current"}),Od("span",{class:"photo-browser-of"},e.params.navbarOfText),Od("span",{class:"photo-browser-total"})),a&&Od("div",{class:"right"},Od("a",{class:"link popup-close","data-popup":".photo-browser-popup"},Od("span",null,e.params.popupCloseLinkText)))))},i.renderToolbar=function(){var e=this;if(e.params.renderToolbar)return e.params.renderToolbar.call(e);var t=e.params.iconsColor;return e.params.iconsColor||"dark"!==e.params.theme||(t="white"),Od("div",{class:"toolbar toolbar-bottom tabbar"},Od("div",{class:"toolbar-inner"},Od("a",{class:"link photo-browser-prev"},Od("i",{class:"icon icon-back "+(t?"color-"+t:"")})),Od("a",{class:"link photo-browser-next"},Od("i",{class:"icon icon-forward "+(t?"color-"+t:"")}))))},i.renderCaption=function(e,t){var n=this;return n.params.renderCaption?n.params.renderCaption.call(n,e,t):Od("div",{class:"photo-browser-caption","data-caption-index":t},e)},i.renderObject=function(e,t){var n=this;return n.params.renderObject?n.params.renderObject.call(n,e,t):Od("div",{class:"photo-browser-slide photo-browser-object-slide swiper-slide","data-swiper-slide-index":t},e.html?e.html:e)},i.renderLazyPhoto=function(e,t){var n=this;return n.params.renderLazyPhoto?n.params.renderLazyPhoto.call(n,e,t):Od("div",{class:"photo-browser-slide photo-browser-slide-lazy swiper-slide","data-swiper-slide-index":t},Od("div",{class:"swiper-lazy-preloader"}),Od("span",{class:"swiper-zoom-container"},Od("img",{"data-src":e.url?e.url:e,class:"swiper-lazy"})))},i.renderPhoto=function(e,t){var n=this;return n.params.renderPhoto?n.params.renderPhoto.call(n,e,t):Od("div",{class:"photo-browser-slide swiper-slide","data-swiper-slide-index":t},Od("span",{class:"swiper-zoom-container"},Od("img",{src:e.url?e.url:e})))},i.render=function(){var e=this;return e.params.render?e.params.render.call(e,e.params):Od("div",{class:"photo-browser photo-browser-"+e.params.theme},Od("div",{class:"view"},Od("div",{class:"page photo-browser-page photo-browser-page-"+e.params.theme+" no-toolbar "+(e.params.navbar?"":"no-navbar"),"data-name":"photo-browser-page"},e.params.navbar&&e.renderNavbar(),e.params.toolbar&&e.renderToolbar(),Od("div",{class:"photo-browser-captions photo-browser-captions-"+(e.params.captionsTheme||e.params.theme)},e.params.photos.map((function(t,n){return t.caption?e.renderCaption(t.caption,n):""}))),Od("div",{class:"photo-browser-swiper-container swiper-container"},Od("div",{class:"photo-browser-swiper-wrapper swiper-wrapper"},!e.params.virtualSlides&&e.params.photos.map((function(t,n){return t.html||("string"==typeof t||t instanceof String)&&t.indexOf("<")>=0&&t.indexOf(">")>=0?e.renderObject(t,n):!0===e.params.swiper.lazy||e.params.swiper.lazy&&e.params.swiper.lazy.enabled?e.renderLazyPhoto(t,n):e.renderPhoto(t,n)})))))))},i.renderStandalone=function(){var e=this;return e.params.renderStandalone?e.params.renderStandalone.call(e):'<div class="popup photo-browser-popup photo-browser-standalone popup-tablet-fullscreen">'+e.render()+"</div>"},i.renderPage=function(){var e=this;return e.params.renderPage?e.params.renderPage.call(e):e.render()},i.renderPopup=function(){var e=this;return e.params.renderPopup?e.params.renderPopup.call(e):'<div class="popup photo-browser-popup">'+e.render()+"</div>"},i.onOpen=function(e,t){var n,r=this,a=r.app,s=Gc(t);s[0].f7PhotoBrowser=r,r.$el=s,r.el=s[0],r.openedIn=e,r.opened=!0,r.$swiperContainerEl=r.$el.find(".photo-browser-swiper-container"),r.$swiperWrapperEl=r.$el.find(".photo-browser-swiper-wrapper"),r.slides=r.$el.find(".photo-browser-slide"),r.$captionsContainerEl=r.$el.find(".photo-browser-captions"),r.captions=r.$el.find(".photo-browser-caption");var o=Vl({},r.params.swiper,{initialSlide:r.activeIndex,on:{click:function(e){clearTimeout(n),r.params.exposition&&(n=setTimeout((function(){r.expositionToggle()}),350)),r.emit("local::tap",e),r.emit("local::click",e)},doubleClick:function(e){clearTimeout(n),r.emit("local::doubleTap",e),r.emit("local::doubleClick",e)},slideChange:function(){var e=this;r.onSlideChange(e);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];r.emit.apply(r,["local::slideChange"].concat(n))},transitionStart:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.emit.apply(r,["local::transitionStart"].concat(t))},transitionEnd:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.emit.apply(r,["local::transitionEnd"].concat(t))},slideChangeTransitionStart:function(){var e=this;r.onSlideChange(e);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];r.emit.apply(r,["local::slideChangeTransitionStart"].concat(n))},slideChangeTransitionEnd:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.emit.apply(r,["local::slideChangeTransitionEnd"].concat(t))},lazyImageLoad:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.emit.apply(r,["local::lazyImageLoad"].concat(t))},lazyImageReady:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0];Gc(a).removeClass("photo-browser-slide-lazy"),r.emit.apply(r,["local::lazyImageReady"].concat(t))}}});r.params.swipeToClose&&"page"!==r.params.type&&Vl(o.on,{touchStart:function(e,t){r.onTouchStart(t),r.emit("local::touchStart",t)},touchMoveOpposite:function(e,t){r.onTouchMove(t),r.emit("local::touchMoveOpposite",t)},touchEnd:function(e,t){r.onTouchEnd(t),r.emit("local::touchEnd",t)}}),r.params.virtualSlides&&Vl(o,{virtual:{slides:r.params.photos,renderSlide:function(e,t){return e.html||("string"==typeof e||e instanceof String)&&e.indexOf("<")>=0&&e.indexOf(">")>=0?r.renderObject(e,t):!0===r.params.swiper.lazy||r.params.swiper.lazy&&r.params.swiper.lazy.enabled?r.renderLazyPhoto(e,t):r.renderPhoto(e,t)}}});var i=wl();r.swiper=a.swiper?a.swiper.create(r.$swiperContainerEl,o):new i.Swiper(r.$swiperContainerEl,o),0===r.activeIndex&&r.onSlideChange(r.swiper),r.$el&&r.$el.trigger("photobrowser:open"),r.emit("local::open photoBrowserOpen",r)},i.onOpened=function(){var e=this;e.$el&&"standalone"===e.params.type&&e.$el.css("animation","none"),e.$el&&e.$el.trigger("photobrowser:opened"),e.emit("local::opened photoBrowserOpened",e)},i.onClose=function(){var e=this;e.destroyed||(e.swiper&&e.swiper.destroy&&(e.swiper.destroy(!0,!1),e.swiper=null,delete e.swiper),e.$el&&e.$el.trigger("photobrowser:close"),e.emit("local::close photoBrowserClose",e))},i.onClosed=function(){var e=this;e.destroyed||(e.opened=!1,e.$el=null,e.el=null,delete e.$el,delete e.el,e.$el&&e.$el.trigger("photobrowser:closed"),e.emit("local::closed photoBrowserClosed",e))},i.openPage=function(){var e=this;if(e.opened)return e;var t=e.renderPage();return e.view.router.navigate({url:e.url,route:{content:t,path:e.url,on:{pageBeforeIn:function(t,n){e.view.$el.addClass("with-photo-browser-page with-photo-browser-page-"+e.params.theme),e.onOpen("page",n.el)},pageAfterIn:function(t,n){e.onOpened("page",n.el)},pageBeforeOut:function(t,n){e.view.$el.removeClass("with-photo-browser-page with-photo-browser-page-exposed with-photo-browser-page-"+e.params.theme),e.onClose("page",n.el)},pageAfterOut:function(t,n){e.onClosed("page",n.el)}}}}),e},i.openStandalone=function(){var e=this;if(e.opened)return e;var t={backdrop:!1,content:e.renderStandalone(),on:{popupOpen:function(t){e.onOpen("popup",t.el)},popupOpened:function(t){e.onOpened("popup",t.el)},popupClose:function(t){e.onClose("popup",t.el)},popupClosed:function(t){e.onClosed("popup",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,popup:t}}):e.modal=e.app.popup.create(t).open(),e},i.openPopup=function(){var e=this;if(e.opened)return e;var t={content:e.renderPopup(),push:e.params.popupPush,on:{popupOpen:function(t){e.onOpen("popup",t.el)},popupOpened:function(t){e.onOpened("popup",t.el)},popupClose:function(t){e.onClose("popup",t.el)},popupClosed:function(t){e.onClosed("popup",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,popup:t}}):e.modal=e.app.popup.create(t).open(),e},i.expositionEnable=function(){var e=this;return"page"===e.params.type&&e.view.$el.addClass("with-photo-browser-page-exposed"),e.$el&&e.$el.addClass("photo-browser-exposed"),e.params.expositionHideCaptions&&e.$captionsContainerEl.addClass("photo-browser-captions-exposed"),e.exposed=!0,e},i.expositionDisable=function(){var e=this;return"page"===e.params.type&&e.view.$el.removeClass("with-photo-browser-page-exposed"),e.$el&&e.$el.removeClass("photo-browser-exposed"),e.params.expositionHideCaptions&&e.$captionsContainerEl.removeClass("photo-browser-captions-exposed"),e.exposed=!1,e},i.expositionToggle=function(){var e=this;return"page"===e.params.type&&e.view.$el.toggleClass("with-photo-browser-page-exposed"),e.$el&&e.$el.toggleClass("photo-browser-exposed"),e.params.expositionHideCaptions&&e.$captionsContainerEl.toggleClass("photo-browser-captions-exposed"),e.exposed=!e.exposed,e},i.open=function(e){var t=this,n=t.params.type;return t.opened?(t.swiper&&void 0!==e&&t.swiper.slideTo(parseInt(e,10)),t):(void 0!==e&&(t.activeIndex=e),"standalone"===n&&t.openStandalone(),"page"===n&&t.openPage(),"popup"===n&&t.openPopup(),t)},i.close=function(){var e=this;return e.opened?(e.params.routableModals&&e.view||"page"===e.openedIn?e.view.router.back():(e.modal.once("modalClosed",(function(){_l((function(){e.destroyed||(e.modal.destroy(),delete e.modal)}))})),e.modal.close()),e):e},i.init=function(){},i.destroy=function(){var e=this;e.emit("local::beforeDestroy photoBrowserBeforeDestroy",e),e.$el&&(e.$el.trigger("photobrowser:beforedestroy"),e.$el[0].f7PhotoBrowser=null,delete e.$el[0].f7PhotoBrowser),Ol(e),e.destroyed=!0,e=null},a=r,s=[{key:"view",get:function(){var e=this.params,t=this.app;return e.view||t.views.main}}],s&&xv(a.prototype,s),o&&xv(a,o),r}(au),Sv=Cv,Ev={name:"photoBrowser",params:{photoBrowser:{photos:[],exposition:!0,expositionHideCaptions:!1,type:"standalone",navbar:!0,toolbar:!0,theme:"light",captionsTheme:void 0,iconsColor:void 0,popupPush:!1,swipeToClose:!0,pageBackLinkText:"Back",popupCloseLinkText:"Close",navbarOfText:"of",navbarShowCount:void 0,view:void 0,url:"photos/",routableModals:!1,virtualSlides:!0,renderNavbar:void 0,renderToolbar:void 0,renderCaption:void 0,renderObject:void 0,renderLazyPhoto:void 0,renderPhoto:void 0,renderPage:void 0,renderPopup:void 0,renderStandalone:void 0,swiper:{initialSlide:0,spaceBetween:20,speed:300,loop:!1,preloadImages:!0,navigation:{nextEl:".photo-browser-next",prevEl:".photo-browser-prev"},zoom:{enabled:!0,maxRatio:3,minRatio:1},lazy:{enabled:!0}}}},create:function(){this.photoBrowser=Yc({defaultSelector:".photo-browser-popup, .photo-browser-page",constructor:Sv,app:this,domProp:"f7PhotoBrowser"})},static:{PhotoBrowser:Sv}};function Tv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $v(e,t){return $v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$v(e,t)}var Iv=function(e){var t,n;function r(t,n){var r,a=Vl({on:{}},t.params.notification,n),s=Tv(r=e.call(this,t,a)||this);s.app=t,s.params=a;var o,i,l,u,c,p,d,h=s.params,f=h.icon,m=h.title,g=h.titleRightText,v=h.subtitle,b=h.text,y=h.closeButton,w=h.closeTimeout,x=h.cssClass,k=h.closeOnClick;if(s.params.el)o=Gc(s.params.el);else{var C=s.render({icon:f,title:m,titleRightText:g,subtitle:v,text:b,closeButton:y,cssClass:x});o=Gc(C)}if(o&&o.length>0&&o[0].f7Modal)return o[0].f7Modal||Tv(r);if(0===o.length)return s.destroy()||Tv(r);Vl(s,{$el:o,el:o[0],type:"notification"}),o[0].f7Modal=s,y&&o.find(".notification-close-button").on("click",(function(){s.close()})),o.on("click",(function(e){y&&Gc(e.target).closest(".notification-close-button").length||(s.emit("local::click notificationClick",s),k&&s.close())})),s.on("beforeDestroy",(function(){o.off("click")}));var S,E={};function T(e){i||(i=!0,l=!1,u=void 0,p=Pl(),E.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,E.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY)}function $(e){if(i){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,n="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if(void 0===u&&(u=!!(u||Math.abs(n-E.y)<Math.abs(t-E.x))),u)i=!1;else{e.preventDefault(),l||(s.$el.removeClass("notification-transitioning"),s.$el.transition(0),d=s.$el[0].offsetHeight/2),l=!0;var r=c=n-E.y;c>0&&(r=Math.pow(c,.8)),s.$el.transform("translate3d(0, "+r+"px, 0)")}}}function I(){if(!i||!l)return i=!1,void(l=!1);if(i=!1,l=!1,0!==c){var e=Pl()-p;s.$el.transition(""),s.$el.addClass("notification-transitioning"),s.$el.transform(""),(c<-10&&e<300||-c>=d/1)&&s.close()}}function N(){S=_l((function(){i&&l?N():s.close()}),w)}return s.on("open",(function(){s.params.swipeToClose&&(s.$el.on(t.touchEvents.start,T,{passive:!0}),t.on("touchmove:active",$),t.on("touchend:passive",I)),Gc(".notification.modal-in").each((function(e){var n=t.notification.get(e);e!==s.el&&n&&n.close()})),w&&N()})),s.on("close beforeDestroy",(function(){s.params.swipeToClose&&(s.$el.off(t.touchEvents.start,T,{passive:!0}),t.off("touchmove:active",$),t.off("touchend:passive",I)),clearTimeout(S)})),s||Tv(r)}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,$v(t,n),r.prototype.render=function(){var e=this;if(e.params.render)return e.params.render.call(e,e);var t=e.params,n=t.icon,r=t.title,a=t.titleRightText,s=t.subtitle,o=t.text,i=t.closeButton,l=t.cssClass;return Od("div",{class:"notification "+(l||"")},Od("div",{class:"notification-header"},n&&Od("div",{class:"notification-icon"},n),r&&Od("div",{class:"notification-title"},r),a&&Od("div",{class:"notification-title-right-text"},a),i&&Od("span",{class:"notification-close-button"})),Od("div",{class:"notification-content"},s&&Od("div",{class:"notification-subtitle"},s),o&&Od("div",{class:"notification-text"},o)))},r}(Sd),Nv=Iv,Ov={name:"notification",static:{Notification:Nv},create:function(){this.notification=Vl({},Zc({app:this,constructor:Nv,defaultSelector:".notification.modal-in"}))},params:{notification:{icon:null,title:null,titleRightText:null,subtitle:null,text:null,closeButton:!1,closeTimeout:null,closeOnClick:!1,swipeToClose:!0,cssClass:null,render:null,containerEl:null}}};function Av(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _v(e,t){return _v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_v(e,t)}var Rv=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var a=Mv(r=e.call(this,n,[t])||this);a.app=t;var s,o,i=Zl(),l=Vl({on:{}},t.params.autocomplete);void 0===l.searchbarDisableButton&&(l.searchbarDisableButton="aurora"!==t.theme),a.useModulesParams(l),a.params=Vl(l,n),a.params.openerEl&&(s=Gc(a.params.openerEl)).length&&(s[0].f7Autocomplete=a),a.params.inputEl&&(o=Gc(a.params.inputEl)).length&&(o[0].f7Autocomplete=a);var u=Cl(),c=n.url;!c&&s&&s.length&&(s.attr("href")?c=s.attr("href"):s.find("a").length>0&&(c=s.find("a").attr("href"))),c&&"#"!==c&&""!==c||(c=a.params.url);var p=a.params.multiple?"checkbox":"radio";Vl(a,{$openerEl:s,openerEl:s&&s[0],$inputEl:o,inputEl:o&&o[0],id:u,url:c,value:a.params.value||[],inputType:p,inputName:p+"-"+u,$modalEl:void 0,$dropdownEl:void 0});var d="";function h(){var e=a.$inputEl.val().trim();a.params.source&&a.params.source.call(a,e,(function(t){var n,r,s,i="",l=a.params.limit?Math.min(a.params.limit,t.length):t.length;a.items=t,a.params.highlightMatches&&(e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n=new RegExp("("+e+")","i"));for(var u=0;u<l;u+=1){var c="object"==typeof t[u]?t[u][a.params.valueProperty]:t[u],p="object"==typeof t[u]?t[u][a.params.textProperty]:t[u];0===u&&(r=c,s=a.items[u]),i+=a.renderItem({value:c,text:a.params.highlightMatches?p.replace(n,"<b>$1</b>"):p},u)}if(""===i&&""===e&&a.params.dropdownPlaceholderText&&(i+=a.renderItem({placeholder:!0,text:a.params.dropdownPlaceholderText})),a.$dropdownEl.find("ul").html(i),a.params.typeahead){if(!r||!s)return;if(0!==r.toLowerCase().indexOf(e.toLowerCase()))return;if(d.toLowerCase()===e.toLowerCase())return void(a.value=[]);if(0===d.toLowerCase().indexOf(e.toLowerCase()))return d=e,void(a.value=[]);o.val(r),o[0].setSelectionRange(e.length,r.length);var h="object"==typeof a.value[0]?a.value[0][a.params.valueProperty]:a.value[0];h&&r.toLowerCase()===h.toLowerCase()||(a.value=[s],a.emit("local::change autocompleteChange",[s]))}d=e}))}function f(){var e,t,n,r=this,s=r.value;if(Gc(r).parents(".autocomplete-values").length>0){if("checkbox"===a.inputType&&!r.checked){for(var o=0;o<a.value.length;o+=1)(n="string"==typeof a.value[o]?a.value[o]:a.value[o][a.params.valueProperty])!==s&&1*n!=1*s||a.value.splice(o,1);a.updateValues(),a.emit("local::change autocompleteChange",a.value)}}else{for(var i=0;i<a.items.length;i+=1)(t="object"==typeof a.items[i]?a.items[i][a.params.valueProperty]:a.items[i])!==s&&1*t!=1*s||(e=a.items[i]);if("radio"===a.inputType)a.value=[e];else if(r.checked)a.value.push(e);else for(var l=0;l<a.value.length;l+=1)(n="object"==typeof a.value[l]?a.value[l][a.params.valueProperty]:a.value[l])!==s&&1*n!=1*s||a.value.splice(l,1);a.updateValues(),("radio"===a.inputType&&r.checked||"checkbox"===a.inputType)&&a.emit("local::change autocompleteChange",a.value)}}function m(e){var t=Gc(e.target);t.is(a.$inputEl[0])||a.$dropdownEl&&t.closest(a.$dropdownEl[0]).length||a.close()}function g(){a.open()}function v(){a.open()}function b(){a.$dropdownEl.find("label.active-state").length>0||setTimeout((function(){a.close()}),0)}function y(){a.positionDropdown()}function w(e){if(a.opened){if(27===e.keyCode)return e.preventDefault(),void a.$inputEl.blur();if(13===e.keyCode){var t=a.$dropdownEl.find(".autocomplete-dropdown-selected label");return t.length?(e.preventDefault(),t.trigger("click"),void a.$inputEl.blur()):void(a.params.typeahead&&(e.preventDefault(),a.$inputEl.blur()))}if(40===e.keyCode||38===e.keyCode){e.preventDefault();var n,r=a.$dropdownEl.find(".autocomplete-dropdown-selected");r.length&&(n=r[40===e.keyCode?"next":"prev"]("li")).length||(n=a.$dropdownEl.find("li").eq(40===e.keyCode?0:a.$dropdownEl.find("li").length-1)),n.hasClass("autocomplete-dropdown-placeholder")||(r.removeClass("autocomplete-dropdown-selected"),n.addClass("autocomplete-dropdown-selected"))}}}function x(){for(var e,t=Gc(this),n=0;n<a.items.length;n+=1){var r="object"==typeof a.items[n]?a.items[n][a.params.valueProperty]:a.items[n],s=t.attr("data-value");r!==s&&1*r!=1*s||(e=a.items[n])}a.params.updateInputValueOnSelect&&(a.$inputEl.val("object"==typeof e?e[a.params.valueProperty]:e),a.$inputEl.trigger("input change")),a.value=[e],a.emit("local::change autocompleteChange",[e]),a.close()}return a.attachEvents=function(){"dropdown"!==a.params.openIn&&a.$openerEl&&a.$openerEl.on("click",g),"dropdown"===a.params.openIn&&a.$inputEl&&(a.$inputEl.on("focus",v),a.$inputEl.on(a.params.inputEvents,h),i.android?Gc("html").on("click",m):a.$inputEl.on("blur",b),a.$inputEl.on("keydown",w))},a.detachEvents=function(){"dropdown"!==a.params.openIn&&a.$openerEl&&a.$openerEl.off("click",g),"dropdown"===a.params.openIn&&a.$inputEl&&(a.$inputEl.off("focus",v),a.$inputEl.off(a.params.inputEvents,h),i.android?Gc("html").off("click",m):a.$inputEl.off("blur",b),a.$inputEl.off("keydown",w))},a.attachDropdownEvents=function(){a.$dropdownEl.on("click","label",x),t.on("resize",y)},a.detachDropdownEvents=function(){a.$dropdownEl.off("click","label",x),t.off("resize",y)},a.attachPageEvents=function(){a.$el.on("change",'input[type="radio"], input[type="checkbox"]',f),a.params.closeOnSelect&&!a.params.multiple&&a.$el.once("click",".list label",(function(){_l((function(){a.close()}))}))},a.detachPageEvents=function(){a.$el.off("change",'input[type="radio"], input[type="checkbox"]',f)},a.useModules(),a.init(),a||Mv(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,_v(t,n);var a,s,o,i=r.prototype;return i.positionDropdown=function(){var e,t=this,n=t.$inputEl,r=t.app,a=t.$dropdownEl,s=n.parents(".page-content");if(0!==s.length){var o,i=n.offset(),l=n[0].offsetWidth,u=n[0].offsetHeight,c=n.parents(".list");c.parents().each((function(e){if(!o){var t=Gc(e);t.parent(s).length&&(o=t)}}));var p,d=c.offset(),h=parseInt(s.css("padding-bottom"),10),f=c.length>0?d.left-s.offset().left:0,m=i.left-(c.length>0?d.left:0)-(r.rtl,0),g=i.top-(s.offset().top-s[0].scrollTop),v=s[0].scrollHeight-h-(g+s[0].scrollTop)-n[0].offsetHeight,b=r.rtl?"padding-right":"padding-left";c.length&&!t.params.expandInput&&(p=(r.rtl?c[0].offsetWidth-m-l:m)-("md"===r.theme?16:15)),a.css({left:(c.length>0?f:m)+"px",top:g+s[0].scrollTop+u+"px",width:(c.length>0?c[0].offsetWidth:l)+"px"}),a.children(".autocomplete-dropdown-inner").css(((e={maxHeight:v+"px"})[b]=c.length>0&&!t.params.expandInput?p+"px":"",e))}},i.focus=function(){this.$el.find("input[type=search]").focus()},i.source=function(e){var t=this;if(t.params.source){var n=t.$el;t.params.source.call(t,e,(function(r){var a="",s=t.params.limit?Math.min(t.params.limit,r.length):r.length;t.items=r;for(var o=0;o<s;o+=1){for(var i=!1,l="object"==typeof r[o]?r[o][t.params.valueProperty]:r[o],u=0;u<t.value.length;u+=1){var c="object"==typeof t.value[u]?t.value[u][t.params.valueProperty]:t.value[u];c!==l&&1*c!=1*l||(i=!0)}a+=t.renderItem({value:l,text:"object"==typeof r[o]?r[o][t.params.textProperty]:r[o],inputType:t.inputType,id:t.id,inputName:t.inputName,selected:i},o)}n.find(".autocomplete-found ul").html(a),0===r.length?0!==e.length?(n.find(".autocomplete-not-found").show(),n.find(".autocomplete-found, .autocomplete-values").hide()):(n.find(".autocomplete-values").show(),n.find(".autocomplete-found, .autocomplete-not-found").hide()):(n.find(".autocomplete-found").show(),n.find(".autocomplete-not-found, .autocomplete-values").hide())}))}},i.updateValues=function(){for(var e=this,t="",n=0;n<e.value.length;n+=1)t+=e.renderItem({value:"object"==typeof e.value[n]?e.value[n][e.params.valueProperty]:e.value[n],text:"object"==typeof e.value[n]?e.value[n][e.params.textProperty]:e.value[n],inputType:e.inputType,id:e.id,inputName:e.inputName+"-checked}",selected:!0},n);e.$el.find(".autocomplete-values ul").html(t)},i.preloaderHide=function(){var e=this;"dropdown"===e.params.openIn&&e.$dropdownEl?e.$dropdownEl.find(".autocomplete-preloader").removeClass("autocomplete-preloader-visible"):Gc(".autocomplete-preloader").removeClass("autocomplete-preloader-visible")},i.preloaderShow=function(){var e=this;"dropdown"===e.params.openIn&&e.$dropdownEl?e.$dropdownEl.find(".autocomplete-preloader").addClass("autocomplete-preloader-visible"):Gc(".autocomplete-preloader").addClass("autocomplete-preloader-visible")},i.renderPreloader=function(){var e=this,t={iosPreloaderContent:$l,mdPreloaderContent:Tl,auroraPreloaderContent:Il};return Od("div",{class:"autocomplete-preloader preloader "+(e.params.preloaderColor?"color-"+e.params.preloaderColor:"")},t[e.app.theme+"PreloaderContent"]||"")},i.renderSearchbar=function(){var e=this;return e.params.renderSearchbar?e.params.renderSearchbar.call(e):Od("form",{class:"searchbar"},Od("div",{class:"searchbar-inner"},Od("div",{class:"searchbar-input-wrap"},Od("input",{type:"search",spellcheck:e.params.searchbarSpellcheck||"false",placeholder:e.params.searchbarPlaceholder}),Od("i",{class:"searchbar-icon"}),Od("span",{class:"input-clear-button"})),e.params.searchbarDisableButton&&Od("span",{class:"searchbar-disable-button"},e.params.searchbarDisableText)))},i.renderItem=function(e,t){var n=this;if(n.params.renderItem)return n.params.renderItem.call(n,e,t);var r=e.value&&"string"==typeof e.value?e.value.replace(/"/g,"&quot;"):e.value;return"dropdown"!==n.params.openIn?Od("li",null,Od("label",{class:"item-"+e.inputType+" item-content"},Od("input",{type:e.inputType,name:e.inputName,value:r,_checked:e.selected}),Od("i",{class:"icon icon-"+e.inputType}),Od("div",{class:"item-inner"},Od("div",{class:"item-title"},e.text)))):e.placeholder?Od("li",{class:"autocomplete-dropdown-placeholder"},Od("label",{class:"item-content"},Od("div",{class:"item-inner"},Od("div",{class:"item-title"},e.text)))):Od("li",null,Od("label",{class:"item-radio item-content","data-value":r},Od("div",{class:"item-inner"},Od("div",{class:"item-title"},e.text))))},i.renderNavbar=function(){var e=this;if(e.params.renderNavbar)return e.params.renderNavbar.call(e);var t=e.params.pageTitle;void 0===t&&e.$openerEl&&e.$openerEl.length&&(t=e.$openerEl.find(".item-title").text().trim());var n="popup"===e.params.openIn,r=n?e.params.preloader&&Od("div",{class:"left"},e.renderPreloader()):Od("div",{class:"left sliding"},Od("a",{class:"link back"},Od("i",{class:"icon icon-back"}),Od("span",{class:"if-not-md"},e.params.pageBackLinkText))),a=n?Od("div",{class:"right"},Od("a",{class:"link popup-close","data-popup":".autocomplete-popup"},e.params.popupCloseLinkText)):e.params.preloader&&Od("div",{class:"right"},e.renderPreloader());return Od("div",{class:"navbar "+(e.params.navbarColorTheme?"color-"+e.params.navbarColorTheme:"")},Od("div",{class:"navbar-bg"}),Od("div",{class:"navbar-inner "+(e.params.navbarColorTheme?"color-"+e.params.navbarColorTheme:"")},r,t&&Od("div",{class:"title sliding"},t),a,Od("div",{class:"subnavbar sliding"},e.renderSearchbar())))},i.renderDropdown=function(){var e=this;return e.params.renderDropdown?e.params.renderDropdown.call(e,e.items):Od("div",{class:"autocomplete-dropdown"},Od("div",{class:"autocomplete-dropdown-inner"},Od("div",{class:"list "+(e.params.expandInput?"":"no-safe-areas")},Od("ul",null))),e.params.preloader&&e.renderPreloader())},i.renderPage=function(e){var t=this;return t.params.renderPage?t.params.renderPage.call(t,t.items):Od("div",{class:"page page-with-subnavbar autocomplete-page","data-name":"autocomplete-page"},t.renderNavbar(e),Od("div",{class:"searchbar-backdrop"}),Od("div",{class:"page-content"},Od("div",{class:"list autocomplete-list autocomplete-found autocomplete-list-"+t.id+" "+(t.params.formColorTheme?"color-"+t.params.formColorTheme:"")},Od("ul",null)),Od("div",{class:"list autocomplete-not-found"},Od("ul",null,Od("li",{class:"item-content"},Od("div",{class:"item-inner"},Od("div",{class:"item-title"},t.params.notFoundText))))),Od("div",{class:"list autocomplete-values"},Od("ul",null))))},i.renderPopup=function(){var e=this;return e.params.renderPopup?e.params.renderPopup.call(e,e.items):Od("div",{class:"popup autocomplete-popup"},Od("div",{class:"view"},e.renderPage(!0),";"))},i.onOpen=function(e,t){var n=this,r=n.app,a=Gc(t);if(n.$el=a,n.el=a[0],n.openedIn=e,n.opened=!0,"dropdown"===n.params.openIn)n.attachDropdownEvents(),n.$dropdownEl.addClass("autocomplete-dropdown-in"),n.$inputEl.trigger("input");else{var s=a.find(".searchbar");"page"===n.params.openIn&&"ios"===r.theme&&0===s.length&&(s=Gc(r.navbar.getElByPage(a)).find(".searchbar")),n.searchbar=r.searchbar.create({el:s,backdropEl:a.find(".searchbar-backdrop"),customSearch:!0,on:{search:function(e,t){0===t.length&&n.searchbar.enabled?n.searchbar.backdropShow():n.searchbar.backdropHide(),n.source(t)}}}),n.attachPageEvents(),n.updateValues(),n.params.requestSourceOnOpen&&n.source("")}n.emit("local::open autocompleteOpen",n)},i.autoFocus=function(){var e=this;return e.searchbar&&e.searchbar.$inputEl&&e.searchbar.$inputEl.focus(),e},i.onOpened=function(){var e=this;"dropdown"!==e.params.openIn&&e.params.autoFocus&&e.autoFocus(),e.emit("local::opened autocompleteOpened",e)},i.onClose=function(){var e=this;e.destroyed||(e.searchbar&&e.searchbar.destroy&&(e.searchbar.destroy(),e.searchbar=null,delete e.searchbar),"dropdown"===e.params.openIn?(e.detachDropdownEvents(),e.$dropdownEl.removeClass("autocomplete-dropdown-in").remove(),e.$inputEl.parents(".item-content-dropdown-expanded").removeClass("item-content-dropdown-expanded")):e.detachPageEvents(),e.emit("local::close autocompleteClose",e))},i.onClosed=function(){var e=this;e.destroyed||(e.opened=!1,e.$el=null,e.el=null,delete e.$el,delete e.el,e.emit("local::closed autocompleteClosed",e))},i.openPage=function(){var e=this;if(e.opened)return e;var t=e.renderPage();return e.view.router.navigate({url:e.url,route:{content:t,path:e.url,on:{pageBeforeIn:function(t,n){e.onOpen("page",n.el)},pageAfterIn:function(t,n){e.onOpened("page",n.el)},pageBeforeOut:function(t,n){e.onClose("page",n.el)},pageAfterOut:function(t,n){e.onClosed("page",n.el)}},options:{animate:e.params.animate}}}),e},i.openPopup=function(){var e=this;if(e.opened)return e;var t={content:e.renderPopup(),animate:e.params.animate,push:e.params.popupPush,swipeToClose:e.params.popupSwipeToClose,on:{popupOpen:function(t){e.onOpen("popup",t.el)},popupOpened:function(t){e.onOpened("popup",t.el)},popupClose:function(t){e.onClose("popup",t.el)},popupClosed:function(t){e.onClosed("popup",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,popup:t}}):e.modal=e.app.popup.create(t).open(e.params.animate),e},i.openDropdown=function(){var e=this;e.$dropdownEl||(e.$dropdownEl=Gc(e.renderDropdown())),e.$inputEl.parents(".list").length&&e.$inputEl.parents(".item-content").length>0&&e.params.expandInput&&e.$inputEl.parents(".item-content").addClass("item-content-dropdown-expanded");var t=e.$inputEl.parents(".page-content");e.params.dropdownContainerEl?Gc(e.params.dropdownContainerEl).append(e.$dropdownEl):0===t.length?e.$dropdownEl.insertAfter(e.$inputEl):(e.positionDropdown(),t.append(e.$dropdownEl)),e.onOpen("dropdown",e.$dropdownEl),e.onOpened("dropdown",e.$dropdownEl)},i.open=function(){var e=this;return e.opened||e["open"+e.params.openIn.split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join("")](),e},i.close=function(){var e=this;return e.opened?("dropdown"===e.params.openIn?(e.onClose(),e.onClosed()):e.params.routableModals&&e.view||"page"===e.openedIn?e.view.router.back({animate:e.params.animate}):(e.modal.once("modalClosed",(function(){_l((function(){e.destroyed||(e.modal.destroy(),delete e.modal)}))})),e.modal.close()),e):e},i.init=function(){this.attachEvents()},i.destroy=function(){var e=this;e.emit("local::beforeDestroy autocompleteBeforeDestroy",e),e.detachEvents(),e.$inputEl&&e.$inputEl[0]&&delete e.$inputEl[0].f7Autocomplete,e.$openerEl&&e.$openerEl[0]&&delete e.$openerEl[0].f7Autocomplete,Ol(e),e.destroyed=!0},a=r,s=[{key:"view",get:function(){var e,t=this,n=t.$openerEl,r=t.$inputEl,a=t.app;if(t.params.view)e=t.params.view;else if(n||r){var s=n||r;e=s.closest(".view").length&&s.closest(".view")[0].f7View}return e||(e=a.views.main),e}}],s&&Av(a.prototype,s),o&&Av(a,o),r}(au),Pv=Rv,Dv={name:"autocomplete",params:{autocomplete:{openerEl:void 0,inputEl:void 0,view:void 0,dropdownContainerEl:void 0,dropdownPlaceholderText:void 0,typeahead:!1,highlightMatches:!0,expandInput:!1,updateInputValueOnSelect:!0,inputEvents:"input",value:void 0,multiple:!1,source:void 0,limit:void 0,valueProperty:"id",textProperty:"text",openIn:"page",pageBackLinkText:"Back",popupCloseLinkText:"Close",pageTitle:void 0,searchbarPlaceholder:"Search...",searchbarDisableText:"Cancel",searchbarDisableButton:void 0,searchbarSpellcheck:!1,popupPush:!1,popupSwipeToClose:void 0,animate:!0,autoFocus:!1,closeOnSelect:!1,notFoundText:"Nothing found",requestSourceOnOpen:!1,preloaderColor:void 0,preloader:!1,formColorTheme:void 0,navbarColorTheme:void 0,routableModals:!1,url:"select/",renderDropdown:void 0,renderPage:void 0,renderPopup:void 0,renderItem:void 0,renderSearchbar:void 0,renderNavbar:void 0}},static:{Autocomplete:Pv},create:function(){var e=this;e.autocomplete=Vl(Yc({defaultSelector:void 0,constructor:Pv,app:e,domProp:"f7Autocomplete"}),{open:function(t){var n=e.autocomplete.get(t);if(n&&n.open)return n.open()},close:function(t){var n=e.autocomplete.get(t);if(n&&n.close)return n.close()}})}};function Lv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bv(e,t){return Bv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Bv(e,t)}var Fv=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var a=Lv(r=e.call(this,n,[t])||this),s=Jl(),o=Vl({},t.params.tooltip),i=bl();a.useModulesParams(o),a.params=Vl(o,n),void 0===n.offset&&s.touch&&"hover"===a.params.trigger&&(a.params.offset=10);var l=a.params,u=l.targetEl,c=l.containerEl;if(!u&&!a.params.delegated)return a||Lv(r);var p=Gc(u);if(0===p.length&&!a.params.delegated)return a||Lv(r);if(p[0]&&p[0].f7Tooltip&&!a.params.delegated)return p[0].f7Tooltip||Lv(r);var d=Gc(c||t.$el).eq(0);0===d.length&&(d=t.$el);var h=Gc(a.render()).eq(0);Vl(a,{app:t,$targetEl:p,targetEl:p&&p[0],$containerEl:d,containerEl:d&&d[0],$el:h,el:h&&h[0],text:a.params.text||"",visible:!1,opened:!1}),p[0]&&(p[0].f7Tooltip=a);var f,m={};function g(){a.opened?a.hide():a.show(this)}function v(e){a.opened&&(Gc(e.target).closest(p).length||Gc(e.target).closest(a.$el).length)||a.hide()}function b(e){f||(f=!0,m.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,m.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,a.show(this))}function y(e){if(f){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,n="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;Math.pow(Math.pow(t-m.x,2)+Math.pow(n-m.y,2),.5)>50&&(f=!1,a.hide())}}function w(){f&&(f=!1,a.hide())}function x(){a.show(this)}function k(){a.hide()}function C(){h.hasClass("tooltip-in")||h.removeClass("tooltip-out").remove()}return a.attachEvents=function(){if(h.on("transitionend",C),"click"===a.params.trigger)return a.params.delegated?Gc(i).on("click",a.params.targetEl,g):a.$targetEl.on("click",g),void Gc("html").on("click",v);if("manual"!==a.params.trigger)if(s.touch){var e=!!s.passiveListener&&{passive:!0};a.params.delegated?Gc(i).on(t.touchEvents.start,a.params.targetEl,b,e):a.$targetEl.on(t.touchEvents.start,b,e),t.on("touchmove",y),t.on("touchend:passive",w)}else a.params.delegated?(Gc(i).on(s.pointerEvents?"pointerenter":"mouseenter",a.params.targetEl,x,!0),Gc(i).on(s.pointerEvents?"pointerleave":"mouseleave",a.params.targetEl,k,!0)):(a.$targetEl.on(s.pointerEvents?"pointerenter":"mouseenter",x),a.$targetEl.on(s.pointerEvents?"pointerleave":"mouseleave",k))},a.detachEvents=function(){if(h.off("transitionend",C),"click"===a.params.trigger)return a.params.delegated?Gc(i).on("click",a.params.targetEl,g):a.$targetEl.off("click",g),void Gc("html").off("click",v);if("manual"!==a.params.trigger)if(s.touch){var e=!!s.passiveListener&&{passive:!0};a.params.delegated?Gc(i).off(t.touchEvents.start,a.params.targetEl,b,e):a.$targetEl.off(t.touchEvents.start,b,e),t.off("touchmove",y),t.off("touchend:passive",w)}else a.params.delegated?(Gc(i).off(s.pointerEvents?"pointerenter":"mouseenter",a.params.targetEl,x,!0),Gc(i).off(s.pointerEvents?"pointerleave":"mouseleave",a.params.targetEl,k,!0)):(a.$targetEl.off(s.pointerEvents?"pointerenter":"mouseenter",x),a.$targetEl.off(s.pointerEvents?"pointerleave":"mouseleave",k))},a.useModules(),a.init(),a||Lv(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Bv(t,n);var a=r.prototype;return a.setTargetEl=function(e){var t=this;return t.detachEvents(),t.$targetEl=Gc(e),t.targetEl=t.$targetEl[0],t.attachEvents(),t},a.position=function(e){var t=this,n=t.$el,r=t.app,a=t.$containerEl,s=!!t.params.containerEl,o=t.params.offset||0;n.css({left:"",top:""});var i,l,u,c,p=Gc(e||t.targetEl),d=[n.width(),n.height()],h=d[0],f=d[1];n.css({left:"",top:""});var m=s&&a.length?a[0].getBoundingClientRect():r;if(p&&p.length>0){if(i=p.outerWidth(),l=p.outerHeight(),void 0===i&&void 0===l){var g=p[0].getBoundingClientRect();i=g.width,l=g.height}var v=p.offset();u=v.left-m.left,c=v.top-m.top;var b=p.parents(".page");b.length>0&&(c-=b[0].scrollTop)}var y=[0,0,0],w=y[0],x=y[1],k="top";f+o<c?x=c-f-o:f<m.height-c-l?(k="bottom",x=c+l+o):(k="middle",(x=l/2+c-f/2)<=0?x=8:x+f>=m.height&&(x=m.height-f-8)),"top"===k||"bottom"===k?((w=i/2+u-h/2)<8&&(w=8),w+h>m.width&&(w=m.width-h-8),w<0&&(w=0)):"middle"===k&&((w=u-h)<8||w+h>m.width)&&(w<8&&(w=u+i),w+h>m.width&&(w=m.width-h-8)),n.css({top:x+"px",left:w+"px"})},a.show=function(e){var t=this,n=t.$el,r=t.$targetEl,a=t.$containerEl;a[0]&&n[0]&&!a[0].contains(n[0])&&a.append(n),t.position(e);var s=Gc(e);return t.visible=!0,t.opened=!0,r.trigger("tooltip:show"),n.trigger("tooltip:show"),s.length&&s[0]!==r[0]&&s.trigger("tooltip:show"),t.emit("local::show tooltipShow",t),n.removeClass("tooltip-out").addClass("tooltip-in"),t},a.hide=function(){var e=this,t=e.$el,n=e.$targetEl;return e.visible=!1,e.opened=!1,n.trigger("tooltip:hide"),t.trigger("tooltip:hide"),e.emit("local::hide tooltipHide",e),t.addClass("tooltip-out").removeClass("tooltip-in"),e},a.render=function(){var e=this;if(e.params.render)return e.params.render.call(e,e);var t=e.params;return('\n      <div class="tooltip '+(t.cssClass||"")+'">\n        <div class="tooltip-content">'+(t.text||"")+"</div>\n      </div>\n    ").trim()},a.setText=function(e){var t=this;return void 0===e||(t.params.text=e,t.text=e,t.$el&&t.$el.children(".tooltip-content").html(e),t.opened&&t.position()),t},a.init=function(){this.attachEvents()},a.destroy=function(){var e=this;e.$targetEl&&!e.destroyed&&(e.$targetEl.trigger("tooltip:beforedestroy"),e.emit("local::beforeDestroy tooltipBeforeDestroy",e),e.$el.remove(),e.$targetEl[0]&&delete e.$targetEl[0].f7Tooltip,e.detachEvents(),Ol(e),e.destroyed=!0)},r}(au),zv=Fv,Vv={name:"tooltip",static:{Tooltip:zv},create:function(){var e=this;e.tooltip=Yc({defaultSelector:".tooltip",constructor:zv,app:e,domProp:"f7Tooltip"}),e.tooltip.show=function(e){var t=Gc(e);if(0!==t.length){var n=t[0].f7Tooltip;if(n)return n.show(t[0]),n}},e.tooltip.hide=function(e){var t=Gc(e);if(0!==t.length){var n=t[0].f7Tooltip;if(n)return n.hide(),n}},e.tooltip.setText=function(e,t){var n=Gc(e);if(0!==n.length){var r=n[0].f7Tooltip;if(r)return r.setText(t),r}}},params:{tooltip:{targetEl:null,delegated:!1,text:null,cssClass:null,render:null,offset:0,trigger:"hover",containerEl:void 0}},on:{tabMounted:function(e){var t=this;Gc(e).find(".tooltip-init").each((function(e){var n=Gc(e).attr("data-tooltip");n&&t.tooltip.create({targetEl:e,text:n})}))},tabBeforeRemove:function(e){Gc(e).find(".tooltip-init").each((function(e){e.f7Tooltip&&e.f7Tooltip.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".tooltip-init").each((function(e){var n=Gc(e).attr("data-tooltip");n&&t.tooltip.create({targetEl:e,text:n})})),"ios"===t.theme&&e.view&&e.view.router.dynamicNavbar&&e.$navbarEl&&e.$navbarEl.length>0&&e.$navbarEl.find(".tooltip-init").each((function(e){var n=Gc(e).attr("data-tooltip");n&&t.tooltip.create({targetEl:e,text:n})}))},pageBeforeRemove:function(e){e.$el.find(".tooltip-init").each((function(e){e.f7Tooltip&&e.f7Tooltip.destroy()})),"ios"===this.theme&&e.view&&e.view.router.dynamicNavbar&&e.$navbarEl&&e.$navbarEl.length>0&&e.$navbarEl.find(".tooltip-init").each((function(e){e.f7Tooltip&&e.f7Tooltip.destroy()}))}},vnode:{"tooltip-init":{insert:function(e){var t=e.elm,n=Gc(t).attr("data-tooltip");n&&this.tooltip.create({targetEl:t,text:n})},update:function(e){var t=e.elm;t.f7Tooltip&&e&&e.data&&e.data.attrs&&e.data.attrs["data-tooltip"]&&t.f7Tooltip.setText(e.data.attrs["data-tooltip"])},destroy:function(e){var t=e.elm;t.f7Tooltip&&t.f7Tooltip.destroy()}}}},Wv={open:function(e){void 0===e&&(e=".menu-item-dropdown");if(e){var t=Gc(e).closest(".menu-item-dropdown");if(t.length){var n=t.closest(".menu").eq(0);if(n.length){var r=n.css("z-index"),a=n[0].style.zIndex;n.css("z-index",parseInt(r||0,10)+1),n[0].f7MenuZIndex=a}t.eq(0).addClass("menu-item-dropdown-opened").trigger("menu:opened"),this.emit("menuOpened",t.eq(0)[0])}}},close:function(e){void 0===e&&(e=".menu-item-dropdown-opened");if(e){var t=Gc(e).closest(".menu-item-dropdown-opened");if(t.length){var n=t.closest(".menu").eq(0);if(n.length){var r=n[0].f7MenuZIndex;n.css("z-index",r),delete n[0].f7MenuZIndex}t.eq(0).removeClass("menu-item-dropdown-opened").trigger("menu:closed"),this.emit("menuClosed",t.eq(0)[0])}}}},Hv={name:"menu",create:function(){Kl(this,{menu:Wv})},on:{click:function(e){var t=this,n=Gc(".menu-item-dropdown-opened");n.length&&n.each((function(n){Gc(e.target).closest(".menu-item-dropdown-opened").length||t.menu.close(n)}))}},clicks:{".menu-item-dropdown":function(e,t,n){if(e.hasClass("menu-item-dropdown-opened")){if(Gc(n.target).closest(".menu-dropdown").length)return;this.menu.close(e)}else this.menu.open(e)},".menu-close":function(){this.menu.close()}}},jv={render:function(e){var t=e.params,n=t.sliderLabel,r=t.sliderValue,a=t.sliderValueEditable,s=t.alphaLabelText;return Od("div",{class:"color-picker-module color-picker-module-alpha-slider"},Od("div",{class:"color-picker-slider-wrap"},n&&Od("div",{class:"color-picker-slider-label"},s),Od("div",{class:"range-slider color-picker-slider color-picker-slider-alpha"}),r&&Od("div",{class:"color-picker-slider-value"},a?Od("input",{type:"number",step:"0.01",min:"0",max:"1",class:"color-picker-value-alpha"}):Od("span",{class:"color-picker-value-alpha"}))))},init:function(e){function t(t){var n=e.value.alpha,r=parseFloat(t.target.value);Number.isNaN(r)?t.target.value=n:(r=Math.max(0,Math.min(1,r)),e.setValue({alpha:r}))}e.alphaRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-alpha"),min:0,max:1,step:.01,value:1,on:{change:function(t,n){var r=Math.floor(100*n)/100;e.setValue({alpha:r})}}}),e.$el.on("change",".color-picker-module-alpha-slider input",t),e.destroyAlphaSliderEvents=function(){e.$el.off("change",".color-picker-module-alpha-slider input",t)}},update:function(e){var t=e.value,n=e.params,r=n.sliderValue,a=n.sliderValueEditable,s=t.alpha;e.alphaRangeSlider.value=s,e.alphaRangeSlider.layout(),r&&a?e.$el.find("input.color-picker-value-alpha").val(s):e.$el.find("span.color-picker-value-alpha").text(s)},destroy:function(e){e.alphaRangeSlider&&e.alphaRangeSlider.destroy&&e.alphaRangeSlider.destroy(),delete e.alphaRangeSlider,e.destroyAlphaSliderEvents&&e.destroyAlphaSliderEvents(),delete e.destroyAlphaSliderEvents}},Uv={render:function(){return Od("div",{class:"color-picker-module color-picker-module-current-color"},Od("div",{class:"color-picker-current-color"}))},update:function(e){e.$el.find(".color-picker-module-current-color .color-picker-current-color").css("background-color",e.value.hex)}},Gv={render:function(e){var t=e.params,n=t.hexLabel,r=t.hexLabelText,a=t.hexValueEditable;return Od("div",{class:"color-picker-module color-picker-module-hex"},Od("div",{class:"color-picker-hex-wrap"},n&&Od("div",{class:"color-picker-hex-label"},r),Od("div",{class:"color-picker-hex-value"},a?Od("input",{type:"text",class:"color-picker-value-hex"}):Od("span",{class:"color-picker-value-hex"}))))},init:function(e){function t(t){var n=e.value.hex,r=t.target.value.replace(/#/g,"");if(Number.isNaN(r)||!r||3!==r.length&&6!==r.length)t.target.value=n;else{var a=parseInt(r,16);a>parseInt("ffffff",16)&&(r="fff"),a<0&&(r="000"),e.setValue({hex:r})}}e.$el.on("change",".color-picker-module-hex input",t),e.destroyHexEvents=function(){e.$el.off("change",".color-picker-module-hex input",t)}},update:function(e){var t=e.value,n=e.params.hexValueEditable,r=t.hex;n?e.$el.find("input.color-picker-value-hex").val(r):e.$el.find("span.color-picker-value-hex").text(r)},destroy:function(e){e.destroyHexEvents&&e.destroyHexEvents(),delete e.destroyHexEvents}},qv={render:function(e){var t=e.params,n=t.sliderLabel,r=t.sliderValue,a=t.sliderValueEditable,s=t.hueLabelText,o=t.saturationLabelText,i=t.brightnessLabelText;return Od("div",{class:"color-picker-module color-picker-module-hsb-sliders"},Od("div",{class:"color-picker-slider-wrap"},n&&Od("div",{class:"color-picker-slider-label"},s),Od("div",{class:"range-slider color-picker-slider color-picker-slider-hue"}),r&&Od("div",{class:"color-picker-slider-value"},a?Od("input",{type:"number",step:"0.1",min:"0",max:"360",class:"color-picker-value-hue","data-color-index":"0"}):Od("span",{class:"color-picker-value-hue"}))),Od("div",{class:"color-picker-slider-wrap"},n&&Od("div",{class:"color-picker-slider-label"},o),Od("div",{class:"range-slider color-picker-slider color-picker-slider-saturation"}),r&&Od("div",{class:"color-picker-slider-value"},a?Od("input",{type:"number",step:"0.1",min:"0",max:"100",class:"color-picker-value-saturation","data-color-index":"1"}):Od("span",{class:"color-picker-value-saturation"}))),Od("div",{class:"color-picker-slider-wrap"},n&&Od("div",{class:"color-picker-slider-label"},i),Od("div",{class:"range-slider color-picker-slider color-picker-slider-brightness"}),r&&Od("div",{class:"color-picker-slider-value"},a?Od("input",{type:"number",step:"0.1",min:"0",max:"100",class:"color-picker-value-brightness","data-color-index":"2"}):Od("span",{class:"color-picker-value-brightness"}))))},init:function(e){function t(t){var n=[].concat(e.value.hsb),r=parseInt(Gc(t.target).attr("data-color-index"),10),a=parseFloat(t.target.value);Number.isNaN(a)?t.target.value=n[r]:(a=0===r?Math.max(0,Math.min(360,a)):Math.max(0,Math.min(100,a))/100,n[r]=a,e.setValue({hsb:n}))}e.hueRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-hue"),min:0,max:360,step:.1,value:0,on:{change:function(t,n){e.setValue({hue:n})}}}),e.saturationRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-saturation"),min:0,max:1,step:.001,value:0,on:{change:function(t,n){var r=Math.floor(1e3*n)/1e3;e.setValue({hsb:[e.value.hsb[0],r,e.value.hsb[2]]})}}}),e.brightnessRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-brightness"),min:0,max:1,step:.001,value:0,on:{change:function(t,n){var r=Math.floor(1e3*n)/1e3;e.setValue({hsb:[e.value.hsb[0],e.value.hsb[1],r]})}}}),e.$el.on("change",".color-picker-module-hsb-sliders input",t),e.destroyHsbSlidersEvents=function(){e.$el.off("change",".color-picker-module-hsb-sliders input",t)}},update:function(e){var t=e.app,n=e.value,r=e.params,a=r.sliderValue,s=r.sliderValueEditable,o=n.hsb,i=n.hue;e.hueRangeSlider.value=i,e.saturationRangeSlider.value=o[1],e.brightnessRangeSlider.value=o[2],e.hueRangeSlider.layout(),e.saturationRangeSlider.layout(),e.brightnessRangeSlider.layout();var l=Gl(o[0],o[1],1),u=Gl(o[0],0,1),c=Gl(o[0],1,1),p=o[2];e.hueRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","hsl("+i+", 100%, 50%)"),e.saturationRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","hsl("+l[0]+", "+100*l[1]+"%, "+100*l[2]+"%)"),e.brightnessRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","rgb("+255*p+", "+255*p+", "+255*p+")"),e.saturationRangeSlider.$el.find(".range-bar").css("background-image","linear-gradient("+(t.rtl?"to left":"to right")+", hsl("+u[0]+", "+100*u[1]+"%, "+100*u[2]+"%), hsl("+c[0]+", "+100*c[1]+"%, "+100*c[2]+"%))"),a&&s?(e.$el.find("input.color-picker-value-hue").val(""+i),e.$el.find("input.color-picker-value-saturation").val(""+1e3*o[1]/10),e.$el.find("input.color-picker-value-brightness").val(""+1e3*o[2]/10)):a&&(e.$el.find("span.color-picker-value-hue").text(""+i),e.$el.find("span.color-picker-value-saturation").text(""+1e3*o[1]/10),e.$el.find("span.color-picker-value-brightness").text(""+1e3*o[2]/10))},destroy:function(e){e.hueRangeSlider&&e.hueRangeSlider.destroy&&e.hueRangeSlider.destroy(),e.saturationRangeSlider&&e.saturationRangeSlider.destroy&&e.saturationRangeSlider.destroy(),e.brightnessRangeSlider&&e.brightnessRangeSlider.destroy&&e.brightnessRangeSlider.destroy(),delete e.hueRangeSlider,delete e.saturationRangeSlider,delete e.brightnessRangeSlider,e.destroyHsbSlidersEvents&&e.destroyHsbSlidersEvents(),delete e.destroyHsbSlidersEvents}},Xv={render:function(e){var t=e.params,n=t.sliderLabel,r=t.sliderValue,a=t.sliderValueEditable,s=t.hueLabelText;return Od("div",{class:"color-picker-module color-picker-module-hue-slider"},Od("div",{class:"color-picker-slider-wrap"},n&&Od("div",{class:"color-picker-slider-label"},s),Od("div",{class:"range-slider color-picker-slider color-picker-slider-hue"}),r&&Od("div",{class:"color-picker-slider-value"},a?Od("input",{type:"number",step:"0.1",min:"0",max:"360",class:"color-picker-value-hue"}):Od("span",{class:"color-picker-value-hue"}))))},init:function(e){e.hueRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-hue"),min:0,max:360,step:.1,value:0,on:{change:function(t,n){e.setValue({hue:n})}}})},update:function(e){var t=e.value,n=e.params,r=n.sliderValue,a=n.sliderValueEditable,s=t.hue;e.hueRangeSlider.value=s,e.hueRangeSlider.layout(),e.hueRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","hsl("+s+", 100%, 50%)"),r&&a?e.$el.find("input.color-picker-value-hue").val(""+s):r&&e.$el.find("span.color-picker-value-hue").text(""+s)},destroy:function(e){e.hueRangeSlider&&e.hueRangeSlider.destroy&&e.hueRangeSlider.destroy(),delete e.hueRangeSlider}},Kv={render:function(e){var t=e.params,n=t.sliderLabel,r=t.sliderValue,a=t.sliderValueEditable,s=t.brightnessLabelText;return Od("div",{class:"color-picker-module color-picker-module-brightness-slider"},Od("div",{class:"color-picker-slider-wrap"},n&&Od("div",{class:"color-picker-slider-label"},s),Od("div",{class:"range-slider color-picker-slider color-picker-slider-brightness"}),r&&Od("div",{class:"color-picker-slider-value"},a?Od("input",{type:"number",step:"0.1",min:"0",max:"100",class:"color-picker-value-brightness"}):Od("span",{class:"color-picker-value-brightness"}))))},init:function(e){e.brightnessRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-brightness"),min:0,max:1,step:.001,value:0,on:{change:function(t,n){var r=Math.floor(1e3*n)/1e3;e.setValue({hsb:[e.value.hsb[0],e.value.hsb[1],r]})}}})},update:function(e){var t=e.value,n=e.app,r=e.params,a=r.sliderValue,s=r.sliderValueEditable,o=t.hsb;e.brightnessRangeSlider.value=o[2],e.brightnessRangeSlider.layout();var i=Gl(o[0],o[1],o[2]),l=Gl(o[0],o[1],0),u=Gl(o[0],o[1],1);e.brightnessRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","hsl("+i[0]+", "+100*i[1]+"%, "+100*i[2]+"%)"),e.brightnessRangeSlider.$el.find(".range-bar").css("background-image","linear-gradient("+(n.rtl?"to left":"to right")+", hsl("+l[0]+", "+100*l[1]+"%, "+100*l[2]+"%), hsl("+u[0]+", "+100*u[1]+"%, "+100*u[2]+"%))"),a&&s?e.$el.find("input.color-picker-value-brightness").val(""+1e3*o[2]/10):a&&e.$el.find("span.color-picker-value-brightness").text(""+1e3*o[2]/10)},destroy:function(e){e.brightnessRangeSlider&&e.brightnessRangeSlider.destroy&&e.brightnessRangeSlider.destroy(),delete e.brightnessRangeSlider}},Yv={render:function(e){return Od("div",{class:"color-picker-module color-picker-module-palette"},Od("div",{class:"color-picker-palette"},e.params.palette.map((function(e){if(Array.isArray(e)){var t='<div class="color-picker-palette-row">';return t+=e.map((function(e){return'\n                <div class="color-picker-palette-value" data-palette-color="'+e+'" style="background-color: '+e+'"></div>\n              '})).join(""),t+="</div>"}return Od("div",{class:"color-picker-palette-value","data-palette-color":e,style:"background-color: "+e})}))))},init:function(e){function t(t){var n=Gc(t.target).attr("data-palette-color");e.setValue({hex:n})}e.$el.on("click",".color-picker-module-palette .color-picker-palette-value",t),e.destroyPaletteEvents=function(){e.$el.off("click",".color-picker-module-hex input",t)}},destroy:function(e){e.destroyPaletteEvents&&e.destroyPaletteEvents(),delete e.destroyPaletteEvents}},Jv={render:function(){return Od("div",{class:"color-picker-module color-picker-module-initial-current-colors"},Od("div",{class:"color-picker-initial-current-colors"},Od("div",{class:"color-picker-initial-color"}),Od("div",{class:"color-picker-current-color"})))},init:function(e){function t(){if(e.initialValue){var t=e.initialValue,n=t.hex,r=t.alpha;e.setValue({hex:n,alpha:r})}}e.$el.on("click",".color-picker-initial-color",t),e.destroyInitialCurrentEvents=function(){e.$el.off("click",".color-picker-initial-color",t)}},update:function(e){e.$el.find(".color-picker-module-initial-current-colors .color-picker-initial-color").css("background-color",e.initialValue.hex),e.$el.find(".color-picker-module-initial-current-colors .color-picker-current-color").css("background-color",e.value.hex)},destroy:function(e){e.destroyInitialCurrentEvents&&e.destroyInitialCurrentEvents(),delete e.destroyInitialCurrentEvents}},Zv={render:function(e){var t=e.params,n=t.barLabel,r=t.barValue,a=t.barValueEditable,s=t.redLabelText,o=t.greenLabelText,i=t.blueLabelText;return Od("div",{class:"color-picker-module color-picker-module-rgb-bars"},Od("div",{class:"color-picker-bar-wrap"},n&&Od("div",{class:"color-picker-bar-label"},s),Od("div",{class:"range-slider color-picker-bar color-picker-bar-red"}),r&&Od("div",{class:"color-picker-bar-value"},a?Od("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-bar-red","data-color-index":"0"}):Od("span",{class:"color-picker-value-bar-red"}))),Od("div",{class:"color-picker-bar-wrap"},n&&Od("div",{class:"color-picker-bar-label"},o),Od("div",{class:"range-slider color-picker-bar color-picker-bar-green"}),r&&Od("div",{class:"color-picker-bar-value"},a?Od("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-bar-green","data-color-index":"1"}):Od("span",{class:"color-picker-value-bar-green"}))),Od("div",{class:"color-picker-bar-wrap"},n&&Od("div",{class:"color-picker-bar-label"},i),Od("div",{class:"range-slider color-picker-bar color-picker-bar-blue"}),r&&Od("div",{class:"color-picker-bar-value"},a?Od("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-bar-blue","data-color-index":"2"}):Od("span",{class:"color-picker-value-bar-blue"}))))},init:function(e){function t(t){var n=[].concat(e.value.rgb),r=parseInt(Gc(t.target).attr("data-color-index"),10),a=parseInt(t.target.value,10);Number.isNaN(a)?t.target.value=n[r]:(a=Math.max(0,Math.min(255,a)),n[r]=a,e.setValue({rgb:n}))}e.redBar=e.app.range.create({el:e.$el.find(".color-picker-bar-red"),min:0,max:255,step:1,value:0,vertical:!0,on:{change:function(t,n){e.setValue({rgb:[n,e.value.rgb[1],e.value.rgb[2]]})}}}),e.greenBar=e.app.range.create({el:e.$el.find(".color-picker-bar-green"),min:0,max:255,step:1,value:0,vertical:!0,on:{change:function(t,n){e.setValue({rgb:[e.value.rgb[0],n,e.value.rgb[2]]})}}}),e.blueBar=e.app.range.create({el:e.$el.find(".color-picker-bar-blue"),min:0,max:255,step:1,value:0,vertical:!0,on:{change:function(t,n){e.setValue({rgb:[e.value.rgb[0],e.value.rgb[1],n]})}}}),e.$el.on("change",".color-picker-module-rgb-bars input",t),e.destroyRgbBarsEvents=function(){e.$el.off("change",".color-picker-module-rgb-bars input",t)}},update:function(e){var t=e.value,n=e.redBar,r=e.greenBar,a=e.blueBar,s=e.params,o=s.barValue,i=s.barValueEditable,l=t.rgb;n.value=l[0],r.value=l[1],a.value=l[2],n.layout(),r.layout(),a.layout(),n.$el.find(".range-bar").css("background-image","linear-gradient(to top, rgb(0, "+l[1]+", "+l[2]+"), rgb(255, "+l[1]+", "+l[2]+"))"),r.$el.find(".range-bar").css("background-image","linear-gradient(to top, rgb("+l[0]+", 0, "+l[2]+"), rgb("+l[0]+", 255, "+l[2]+"))"),a.$el.find(".range-bar").css("background-image","linear-gradient(to top, rgb("+l[0]+", "+l[1]+", 0), rgb("+l[0]+", "+l[1]+", 255))"),o&&i?(e.$el.find("input.color-picker-value-bar-red").val(l[0]),e.$el.find("input.color-picker-value-bar-green").val(l[1]),e.$el.find("input.color-picker-value-bar-blue").val(l[2])):o&&(e.$el.find("span.color-picker-value-bar-red").text(l[0]),e.$el.find("span.color-picker-value-bar-green").text(l[1]),e.$el.find("span.color-picker-value-bar-blue").text(l[2]))},destroy:function(e){e.redBar&&e.redBar.destroy&&e.redBar.destroy(),e.greenBar&&e.greenBar.destroy&&e.greenBar.destroy(),e.blueBar&&e.blueBar.destroy&&e.blueBar.destroy(),delete e.redBar,delete e.greenBar,delete e.blueBar,e.destroyRgbBarsEvents&&e.destroyRgbBarsEvents(),delete e.destroyRgbBarsEvents}},Qv={render:function(e){var t=e.params,n=t.sliderLabel,r=t.sliderValue,a=t.sliderValueEditable,s=t.redLabelText,o=t.greenLabelText,i=t.blueLabelText;return Od("div",{class:"color-picker-module color-picker-module-rgb-sliders"},Od("div",{class:"color-picker-slider-wrap"},n&&Od("div",{class:"color-picker-slider-label"},s),Od("div",{class:"range-slider color-picker-slider color-picker-slider-red"}),r&&Od("div",{class:"color-picker-slider-value"},a?Od("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-red","data-color-index":"0"}):Od("span",{class:"color-picker-value-red"}))),Od("div",{class:"color-picker-slider-wrap"},n&&Od("div",{class:"color-picker-slider-label"},o),Od("div",{class:"range-slider color-picker-slider color-picker-slider-green"}),r&&Od("div",{class:"color-picker-slider-value"},a?Od("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-green","data-color-index":"1"}):Od("span",{class:"color-picker-value-green"}))),Od("div",{class:"color-picker-slider-wrap"},n&&Od("div",{class:"color-picker-slider-label"},i),Od("div",{class:"range-slider color-picker-slider color-picker-slider-blue"}),r&&Od("div",{class:"color-picker-slider-value"},a?Od("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-blue","data-color-index":"2"}):Od("span",{class:"color-picker-value-blue"}))))},init:function(e){function t(t){var n=[].concat(e.value.rgb),r=parseInt(Gc(t.target).attr("data-color-index"),10),a=parseInt(t.target.value,10);Number.isNaN(a)?t.target.value=n[r]:(a=Math.max(0,Math.min(255,a)),n[r]=a,e.setValue({rgb:n}))}e.redRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-red"),min:0,max:255,step:1,value:0,on:{change:function(t,n){e.setValue({rgb:[n,e.value.rgb[1],e.value.rgb[2]]})}}}),e.greenRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-green"),min:0,max:255,step:1,value:0,on:{change:function(t,n){e.setValue({rgb:[e.value.rgb[0],n,e.value.rgb[2]]})}}}),e.blueRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-blue"),min:0,max:255,step:1,value:0,on:{change:function(t,n){e.setValue({rgb:[e.value.rgb[0],e.value.rgb[1],n]})}}}),e.$el.on("change",".color-picker-module-rgb-sliders input",t),e.destroyRgbSlidersEvents=function(){e.$el.off("change",".color-picker-module-rgb-sliders input",t)}},update:function(e){var t=e.app,n=e.value,r=e.redRangeSlider,a=e.greenRangeSlider,s=e.blueRangeSlider,o=e.params,i=o.sliderValue,l=o.sliderValueEditable,u=n.rgb;r.value=u[0],a.value=u[1],s.value=u[2],r.layout(),a.layout(),s.layout(),r.$el[0].style.setProperty("--f7-range-knob-color","rgb("+u[0]+", "+u[1]+", "+u[2]+")"),a.$el[0].style.setProperty("--f7-range-knob-color","rgb("+u[0]+", "+u[1]+", "+u[2]+")"),s.$el[0].style.setProperty("--f7-range-knob-color","rgb("+u[0]+", "+u[1]+", "+u[2]+")");var c=t.rtl?"to left":"to right";r.$el.find(".range-bar").css("background-image","linear-gradient("+c+", rgb(0, "+u[1]+", "+u[2]+"), rgb(255, "+u[1]+", "+u[2]+"))"),a.$el.find(".range-bar").css("background-image","linear-gradient("+c+", rgb("+u[0]+", 0, "+u[2]+"), rgb("+u[0]+", 255, "+u[2]+"))"),s.$el.find(".range-bar").css("background-image","linear-gradient("+c+", rgb("+u[0]+", "+u[1]+", 0), rgb("+u[0]+", "+u[1]+", 255))"),i&&l?(e.$el.find("input.color-picker-value-red").val(u[0]),e.$el.find("input.color-picker-value-green").val(u[1]),e.$el.find("input.color-picker-value-blue").val(u[2])):i&&(e.$el.find("span.color-picker-value-red").text(u[0]),e.$el.find("span.color-picker-value-green").text(u[1]),e.$el.find("span.color-picker-value-blue").text(u[2]))},destroy:function(e){e.redRangeSlider&&e.redRangeSlider.destroy&&e.redRangeSlider.destroy(),e.greenRangeSlider&&e.greenRangeSlider.destroy&&e.greenRangeSlider.destroy(),e.blueRangeSlider&&e.blueRangeSlider.destroy&&e.blueRangeSlider.destroy(),delete e.redRangeSlider,delete e.greenRangeSlider,delete e.blueRangeSlider,e.destroyRgbSlidersEvents&&e.destroyRgbSlidersEvents(),delete e.destroyRgbSlidersEvents}},eb={render:function(){return Od("div",{class:"color-picker-module color-picker-module-sb-spectrum"},Od("div",{class:"color-picker-sb-spectrum",style:"background-color: hsl(0, 100%, 50%)"},Od("div",{class:"color-picker-sb-spectrum-handle"})))},init:function(e){var t,n,r,a,s,o,i,l,u=e.app,c=e.$el;function p(t,n){var r=(t-o.left)/o.width,a=(n-o.top)/o.height;r=Math.max(0,Math.min(1,r)),a=1-Math.max(0,Math.min(1,a)),e.setValue({hsb:[e.value.hue,r,a]})}function d(e){if(!t){n="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,a=n,r="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,s=r;var u=Gc(e.target);(l=u.closest(".color-picker-sb-spectrum-handle").length>0)||(i=u.closest(".color-picker-sb-spectrum").length>0),i&&(o=c.find(".color-picker-sb-spectrum")[0].getBoundingClientRect(),p(n,r)),(l||i)&&c.find(".color-picker-sb-spectrum-handle").addClass("color-picker-sb-spectrum-handle-pressed")}}function h(e){(i||l)&&(a="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,s="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,e.preventDefault(),t||(t=!0,l&&(o=c.find(".color-picker-sb-spectrum")[0].getBoundingClientRect())),(i||l)&&p(a,s))}function f(){t=!1,(i||l)&&c.find(".color-picker-sb-spectrum-handle").removeClass("color-picker-sb-spectrum-handle-pressed"),i=!1,l=!1}function m(){e.modules["sb-spectrum"].update(e)}var g=!("touchstart"!==u.touchEvents.start||!Jl().passiveListener)&&{passive:!0,capture:!1};e.$el.on(u.touchEvents.start,d,g),u.on("touchmove:active",h),u.on("touchend:passive",f),u.on("resize",m),e.destroySpectrumEvents=function(){e.$el.off(u.touchEvents.start,d,g),u.off("touchmove:active",h),u.off("touchend:passive",f),u.off("resize",m)}},update:function(e){var t=e.value,n=t.hsl,r=t.hsb,a=e.$el.find(".color-picker-sb-spectrum")[0].offsetWidth,s=e.$el.find(".color-picker-sb-spectrum")[0].offsetHeight;e.$el.find(".color-picker-sb-spectrum").css("background-color","hsl("+n[0]+", 100%, 50%)"),e.$el.find(".color-picker-sb-spectrum-handle").css("background-color","hsl("+n[0]+", "+100*n[1]+"%, "+100*n[2]+"%)").transform("translate("+a*r[1]+"px, "+s*(1-r[2])+"px)")},destroy:function(e){e.destroySpectrumEvents&&e.destroySpectrumEvents(),delete e.destroySpectrumEvents}},tb={render:function(){return Od("div",{class:"color-picker-module color-picker-module-hs-spectrum"},Od("div",{class:"color-picker-hs-spectrum"},Od("div",{class:"color-picker-hs-spectrum-handle"})))},init:function(e){var t,n,r,a,s,o,i,l,u=e.app,c=e.$el;function p(t,n){var r=(t-o.left)/o.width*360,a=(n-o.top)/o.height;r=Math.max(0,Math.min(360,r)),a=1-Math.max(0,Math.min(1,a)),e.setValue({hsb:[r,a,e.value.hsb[2]]})}function d(e){if(!t){n="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,a=n,r="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,s=r;var u=Gc(e.target);(l=u.closest(".color-picker-hs-spectrum-handle").length>0)||(i=u.closest(".color-picker-hs-spectrum").length>0),i&&(o=c.find(".color-picker-hs-spectrum")[0].getBoundingClientRect(),p(n,r)),(l||i)&&c.find(".color-picker-hs-spectrum-handle").addClass("color-picker-hs-spectrum-handle-pressed")}}function h(e){(i||l)&&(a="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,s="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,e.preventDefault(),t||(t=!0,l&&(o=c.find(".color-picker-hs-spectrum")[0].getBoundingClientRect())),(i||l)&&p(a,s))}function f(){t=!1,(i||l)&&c.find(".color-picker-hs-spectrum-handle").removeClass("color-picker-hs-spectrum-handle-pressed"),i=!1,l=!1}function m(){e.modules["hs-spectrum"].update(e)}var g=!("touchstart"!==u.touchEvents.start||!Jl().passiveListener)&&{passive:!0,capture:!1};e.$el.on(u.touchEvents.start,d,g),u.on("touchmove:active",h),u.on("touchend:passive",f),u.on("resize",m),e.destroySpectrumEvents=function(){e.$el.off(u.touchEvents.start,d,g),u.off("touchmove:active",h),u.off("touchend:passive",f),u.off("resize",m)}},update:function(e){var t=e.value.hsb,n=e.$el.find(".color-picker-hs-spectrum")[0].offsetWidth,r=e.$el.find(".color-picker-hs-spectrum")[0].offsetHeight,a=Gl(t[0],t[1],1);e.$el.find(".color-picker-hs-spectrum-handle").css("background-color","hsl("+a[0]+", "+100*a[1]+"%, "+100*a[2]+"%)").transform("translate("+n*(t[0]/360)+"px, "+r*(1-t[1])+"px)")},destroy:function(e){e.destroySpectrumEvents&&e.destroySpectrumEvents(),delete e.destroySpectrumEvents}};var nb={render:function(){return Od("div",{class:"color-picker-module color-picker-module-wheel"},Od("div",{class:"color-picker-wheel"},Od("svg",{viewBox:"0 0 300 300",width:"300",height:"300"},function(){for(var e="",t=256;t>0;t-=1){var n=t*Math.PI/128,r=1.40625*t;e+='<circle cx="'+(150-125*Math.sin(n))+'" cy="'+(150-125*Math.cos(n))+'" r="25" fill="hsl('+r+', 100%, 50%)"></circle>'}return e}()),Od("div",{class:"color-picker-wheel-handle"}),Od("div",{class:"color-picker-sb-spectrum",style:"background-color: hsl(0, 100%, 50%)"},Od("div",{class:"color-picker-sb-spectrum-handle"}))))},init:function(e){var t,n,r,a,s,o,i,l,u,c,p,d=e.app,h=e.$el;function f(t,n){var r=o.left+o.width/2,a=o.top+o.height/2,s=180*Math.atan2(n-a,t-r)/Math.PI+90;s<0&&(s+=360),s=360-s,e.setValue({hue:s})}function m(t,n){var r=(t-u.left)/u.width,a=(n-u.top)/u.height;r=Math.max(0,Math.min(1,r)),a=1-Math.max(0,Math.min(1,a)),e.setValue({hsb:[e.value.hue,r,a]})}function g(e){if(!t){n="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,a=n,r="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,s=r;var d=Gc(e.target);l=d.closest(".color-picker-wheel-handle").length>0,i=d.closest("circle").length>0,(p=d.closest(".color-picker-sb-spectrum-handle").length>0)||(c=d.closest(".color-picker-sb-spectrum").length>0),i&&(o=h.find(".color-picker-wheel")[0].getBoundingClientRect(),f(n,r)),c&&(u=h.find(".color-picker-sb-spectrum")[0].getBoundingClientRect(),m(n,r)),(p||c)&&h.find(".color-picker-sb-spectrum-handle").addClass("color-picker-sb-spectrum-handle-pressed")}}function v(e){(i||l||c||p)&&(a="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,s="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,e.preventDefault(),t||(t=!0,l&&(o=h.find(".color-picker-wheel")[0].getBoundingClientRect()),p&&(u=h.find(".color-picker-sb-spectrum")[0].getBoundingClientRect())),(i||l)&&f(a,s),(c||p)&&m(a,s))}function b(){t=!1,(c||p)&&h.find(".color-picker-sb-spectrum-handle").removeClass("color-picker-sb-spectrum-handle-pressed"),i=!1,l=!1,c=!1,p=!1}function y(){e.modules.wheel.update(e)}var w=!("touchstart"!==d.touchEvents.start||!Jl().passiveListener)&&{passive:!0,capture:!1};e.$el.on(d.touchEvents.start,g,w),d.on("touchmove:active",v),d.on("touchend:passive",b),d.on("resize",y),e.destroyWheelEvents=function(){e.$el.off(d.touchEvents.start,g,w),d.off("touchmove:active",v),d.off("touchend:passive",b),d.off("resize",y)}},update:function(e){var t=e.value,n=t.hsl,r=t.hsb,a=e.$el.find(".color-picker-sb-spectrum")[0].offsetWidth,s=e.$el.find(".color-picker-sb-spectrum")[0].offsetHeight,o=e.$el.find(".color-picker-wheel")[0].offsetWidth,i=o/2,l=t.hue*Math.PI/180,u=o/6/2,c=i-Math.sin(l)*(i-u)-u,p=i-Math.cos(l)*(i-u)-u;e.$el.find(".color-picker-wheel-handle").css("background-color","hsl("+n[0]+", 100%, 50%)").transform("translate("+c+"px, "+p+"px)"),e.$el.find(".color-picker-sb-spectrum").css("background-color","hsl("+n[0]+", 100%, 50%)"),e.$el.find(".color-picker-sb-spectrum-handle").css("background-color","hsl("+n[0]+", "+100*n[1]+"%, "+100*n[2]+"%)").transform("translate("+a*r[1]+"px, "+s*(1-r[2])+"px)")},destroy:function(e){e.destroyWheelEvents&&e.destroyWheelEvents(),delete e.destroyWheelEvents}};function rb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ab(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sb(e,t){return sb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},sb(e,t)}var ob=function(e){var t,n;function r(t,n){var r;void 0===n&&(n={});var a,s,o,i=ab(r=e.call(this,n,[t])||this);if(i.params=Vl({},t.params.colorPicker,n),i.params.containerEl&&0===(a=Gc(i.params.containerEl)).length)return i||ab(r);function l(){i.open()}function u(e){e.preventDefault()}function c(){i.open()}function p(e){if(!i.destroyed&&i.params&&"page"!==i.params.openIn){var t=Gc(e.target);i.opened&&!i.closing&&(t.closest('[class*="backdrop"]').length||t.closest(".color-picker-popup, .color-picker-popover").length||(s&&s.length>0?t[0]!==s[0]&&0===t.closest(".sheet-modal").length&&i.close():0===Gc(e.target).closest(".sheet-modal").length&&i.close()))}}return i.params.inputEl&&(s=Gc(i.params.inputEl)),i.params.targetEl&&(o=Gc(i.params.targetEl)),Vl(i,{app:t,$containerEl:a,containerEl:a&&a[0],inline:a&&a.length>0,$inputEl:s,inputEl:s&&s[0],$targetEl:o,targetEl:o&&o[0],initialized:!1,opened:!1,url:i.params.url,modules:{"alpha-slider":jv,"current-color":Uv,hex:Gv,"hsb-sliders":qv,"hue-slider":Xv,"brightness-slider":Kv,palette:Yv,"initial-current-colors":Jv,"rgb-bars":Zv,"rgb-sliders":Qv,"sb-spectrum":eb,"hs-spectrum":tb,wheel:nb}}),Vl(i,{attachInputEvents:function(){i.$inputEl.on("click",l),i.params.inputReadOnly&&(i.$inputEl.on("focus mousedown",u),i.$inputEl[0]&&(i.$inputEl[0].f7ValidateReadonly=!0))},detachInputEvents:function(){i.$inputEl.off("click",l),i.params.inputReadOnly&&(i.$inputEl.off("focus mousedown",u),i.$inputEl[0]&&delete i.$inputEl[0].f7ValidateReadonly)},attachTargetEvents:function(){i.$targetEl.on("click",c)},detachTargetEvents:function(){i.$targetEl.off("click",c)},attachHtmlEvents:function(){t.on("click",p)},detachHtmlEvents:function(){t.off("click",p)}}),i.init(),i||ab(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,sb(t,n);var a,s,o,i=r.prototype;return i.attachEvents=function(){var e=this;e.centerModules=e.centerModules.bind(e),e.params.centerModules&&e.app.on("resize",e.centerModules)},i.detachEvents=function(){var e=this;e.params.centerModules&&e.app.off("resize",e.centerModules)},i.centerModules=function(){var e=this;if(e.opened&&e.$el&&!e.inline){var t=e.$el.find(".page-content");if(t.length){var n=t[0];n.scrollHeight<=n.offsetHeight?t.addClass("justify-content-center"):t.removeClass("justify-content-center")}}},i.initInput=function(){var e=this;e.$inputEl&&e.params.inputReadOnly&&e.$inputEl.prop("readOnly",!0)},i.getModalType=function(){var e=this,t=e.app,n=e.modal,r=e.params,a=r.openIn,s=r.openInPhone,o=Zl();return n&&n.type?n.type:"auto"!==a?a:e.inline?null:o.ios?o.ipad?"popover":s:t.width>=768||o.desktop&&"aurora"===t.theme?"popover":s},i.formatValue=function(){var e=this,t=e.value;return e.params.formatValue?e.params.formatValue.call(e,t):t.hex},i.normalizeHsValues=function(e){return[Math.floor(10*e[0])/10,Math.floor(1e3*e[1])/1e3,Math.floor(1e3*e[2])/1e3]},i.setValue=function(e,t){void 0===e&&(e={}),void 0===t&&(t=!0);var n=this;if(void 0!==e){var r,a=n.value||{},s=a.hex,o=a.rgb,i=a.hsl,l=a.hsb,u=a.alpha,c=void 0===u?1:u,p=a.hue,d=a.rgba,h=a.hsla,f=n.value||!n.value&&!n.params.value;if(Object.keys(e).forEach((function(t){if(n.value&&void 0!==n.value[t]){var a=e[t];Array.isArray(a)?a.forEach((function(e,a){e!==n.value[t][a]&&(r=!0)})):a!==n.value[t]&&(r=!0)}else r=!0})),r){if(e.rgb||e.rgba){var m=e.rgb||e.rgba,g=m[0],v=m[1],b=m[2],y=m[3],w=void 0===y?c:y;o=[g,v,b],s=Hl.apply(void 0,o),i=jl.apply(void 0,o),l=ql.apply(void 0,i),i=n.normalizeHsValues(i),p=(l=n.normalizeHsValues(l))[0],c=w,d=[o[0],o[1],o[2],w],h=[i[0],i[1],i[2],w]}if(e.hsl||e.hsla){var x=e.hsl||e.hsla,k=x[0],C=x[1],S=x[2],E=x[3],T=void 0===E?c:E;i=[k,C,S],o=Ul.apply(void 0,i),s=Hl.apply(void 0,o),l=ql.apply(void 0,i),i=n.normalizeHsValues(i),p=(l=n.normalizeHsValues(l))[0],c=T,d=[o[0],o[1],o[2],T],h=[i[0],i[1],i[2],T]}if(e.hsb){var $=e.hsb,I=$[0],N=$[1],O=$[2],A=$[3],M=void 0===A?c:A;l=[I,N,O],i=Gl.apply(void 0,l),o=Ul.apply(void 0,i),s=Hl.apply(void 0,o),i=n.normalizeHsValues(i),p=(l=n.normalizeHsValues(l))[0],c=M,d=[o[0],o[1],o[2],M],h=[i[0],i[1],i[2],M]}if(e.hex&&(o=Wl(e.hex),s=Hl.apply(void 0,o),i=jl.apply(void 0,o),l=ql.apply(void 0,i),i=n.normalizeHsValues(i),p=(l=n.normalizeHsValues(l))[0],d=[o[0],o[1],o[2],c],h=[i[0],i[1],i[2],c]),void 0!==e.alpha&&(c=e.alpha,void 0!==o&&(d=[o[0],o[1],o[2],c]),void 0!==i&&(h=[i[0],i[1],i[2],c])),void 0!==e.hue){var _=i,R=(_[0],_[1]),P=_[2];i=[e.hue,R,P],l=ql.apply(void 0,i),o=Ul.apply(void 0,i),s=Hl.apply(void 0,o),i=n.normalizeHsValues(i),p=(l=n.normalizeHsValues(l))[0],d=[o[0],o[1],o[2],c],h=[i[0],i[1],i[2],c]}n.value={hex:s,alpha:c,hue:p,rgb:o,hsl:i,hsb:l,rgba:d,hsla:h},n.initialValue||(n.initialValue=Vl({},n.value)),n.updateValue(f),n.opened&&t&&n.updateModules()}}},i.getValue=function(){return this.value},i.updateValue=function(e){void 0===e&&(e=!0);var t=this,n=t.$inputEl,r=t.value,a=t.$targetEl;if(a&&t.params.targetElSetBackgroundColor){var s=r.rgba;a.css("background-color","rgba("+s.join(", ")+")")}if(e&&t.emit("local::change colorPickerChange",t,r),n&&n.length){var o=t.formatValue(r);n&&n.length&&(n.val(o),e&&n.trigger("change"))}},i.updateModules=function(){var e=this,t=e.modules;e.params.modules.forEach((function(n){"string"==typeof n&&t[n]&&t[n].update?t[n].update(e):n&&n.update&&n.update(e)}))},i.update=function(){this.updateModules()},i.renderPicker=function(){var e=this,t=e.params,n=e.modules,r="";return t.modules.forEach((function(t){"string"==typeof t&&n[t]&&n[t].render?r+=n[t].render(e):t&&t.render&&(r+=t.render(e))})),r},i.renderNavbar=function(){var e=this;if(e.params.renderNavbar)return e.params.renderNavbar.call(e,e);var t=e.params,n=t.openIn,r=t.navbarTitleText,a=t.navbarBackLinkText,s=t.navbarCloseText;return Od("div",{class:"navbar"},Od("div",{class:"navbar-bg"}),Od("div",{class:"navbar-inner sliding"},"page"===n&&Od("div",{class:"left"},Od("a",{class:"link back"},Od("i",{class:"icon icon-back"}),Od("span",{class:"if-not-md"},a))),Od("div",{class:"title"},r),"page"!==n&&Od("div",{class:"right"},Od("a",{class:"link popup-close","data-popup":".color-picker-popup"},s))))},i.renderToolbar=function(){var e=this;return e.params.renderToolbar?e.params.renderToolbar.call(e,e):Od("div",{class:"toolbar toolbar-top no-shadow"},Od("div",{class:"toolbar-inner"},Od("div",{class:"left"}),Od("div",{class:"right"},Od("a",{class:"link sheet-close popover-close","data-sheet":".color-picker-sheet-modal","data-popover":".color-picker-popover"},e.params.toolbarCloseText))))},i.renderInline=function(){var e=this.params,t=e.cssClass,n=e.groupedModules;return Od("div",{class:"color-picker color-picker-inline "+(n?"color-picker-grouped-modules":"")+" "+(t||"")},this.renderPicker())},i.renderSheet=function(){var e=this,t=e.params,n=t.cssClass,r=t.toolbarSheet,a=t.groupedModules;return Od("div",{class:"sheet-modal color-picker color-picker-sheet-modal "+(a?"color-picker-grouped-modules":"")+" "+(n||"")},r&&e.renderToolbar(),Od("div",{class:"sheet-modal-inner"},Od("div",{class:"page-content"},e.renderPicker())))},i.renderPopover=function(){var e=this,t=e.params,n=t.cssClass,r=t.toolbarPopover,a=t.groupedModules;return Od("div",{class:"popover color-picker-popover "+(n||"")},Od("div",{class:"popover-inner"},Od("div",{class:"color-picker "+(a?"color-picker-grouped-modules":"")},r&&e.renderToolbar(),Od("div",{class:"page-content"},e.renderPicker()))))},i.renderPopup=function(){var e=this,t=e.params,n=t.cssClass,r=t.navbarPopup,a=t.groupedModules;return Od("div",{class:"popup color-picker-popup "+(n||"")},Od("div",{class:"page"},r&&e.renderNavbar(),Od("div",{class:"color-picker "+(a?"color-picker-grouped-modules":"")},Od("div",{class:"page-content"},e.renderPicker()))))},i.renderPage=function(){var e=this,t=e.params,n=t.cssClass,r=t.groupedModules;return Od("div",{class:"page color-picker-page "+(n||""),"data-name":"color-picker-page"},e.renderNavbar(),Od("div",{class:"color-picker "+(r?"color-picker-grouped-modules":"")},Od("div",{class:"page-content"},e.renderPicker())))},i.render=function(){var e=this,t=e.params;if(t.render)return t.render.call(e);if(e.inline)return e.renderInline();if("page"===t.openIn)return e.renderPage();var n=e.getModalType();return"popover"===n?e.renderPopover():"sheet"===n?e.renderSheet():"popup"===n?e.renderPopup():void 0},i.onOpen=function(){var e=this,t=e.initialized,n=e.$el,r=e.app,a=e.$inputEl,s=e.inline,o=e.value,i=e.params,l=e.modules;e.closing=!1,e.opened=!0,e.opening=!0,e.attachEvents(),i.modules.forEach((function(t){"string"==typeof t&&l[t]&&l[t].init?l[t].init(e):t&&t.init&&t.init(e)}));var u=!o&&i.value;t?o&&(e.initialValue=Vl({},o),e.setValue(o,!1)):o?e.setValue(o):i.value?e.setValue(i.value,!1):i.value||e.setValue({hex:"#ff0000"},!1),u&&e.updateValue(),e.updateModules(),i.centerModules&&e.centerModules(),!s&&a&&a.length&&"md"===r.theme&&a.trigger("focus"),e.initialized=!0,n&&n.trigger("colorpicker:open"),a&&a.trigger("colorpicker:open"),e.emit("local::open colorPickerOpen",e)},i.onOpened=function(){var e=this;e.opening=!1,e.$el&&e.$el.trigger("colorpicker:opened"),e.$inputEl&&e.$inputEl.trigger("colorpicker:opened"),e.emit("local::opened colorPickerOpened",e)},i.onClose=function(){var e=this,t=e.app,n=e.params,r=e.modules;if(e.opening=!1,e.closing=!0,e.detachEvents(),e.$inputEl)if("md"===t.theme)e.$inputEl.trigger("blur");else{var a=e.$inputEl.attr("validate"),s=e.$inputEl.attr("required");a&&s&&t.input.validate(e.$inputEl)}n.modules.forEach((function(t){"string"==typeof t&&r[t]&&r[t].destroy?r[t].destroy(e):t&&t.destroy&&t.destroy(e)})),e.$el&&e.$el.trigger("colorpicker:close"),e.$inputEl&&e.$inputEl.trigger("colorpicker:close"),e.emit("local::close colorPickerClose",e)},i.onClosed=function(){var e=this;e.opened=!1,e.closing=!1,e.inline||_l((function(){e.modal&&e.modal.el&&e.modal.destroy&&(e.params.routableModals||e.modal.destroy()),delete e.modal})),e.$el&&e.$el.trigger("colorpicker:closed"),e.$inputEl&&e.$inputEl.trigger("colorpicker:closed"),e.emit("local::closed colorPickerClosed",e)},i.open=function(){var e=this,t=e.app,n=e.opened,r=e.inline,a=e.$inputEl,s=e.$targetEl,o=e.params;if(!n){if(r)return e.$el=Gc(e.render()),e.$el[0].f7ColorPicker=e,e.$containerEl.append(e.$el),e.onOpen(),void e.onOpened();var i=e.render();if("page"===o.openIn)e.view.router.navigate({url:e.url,route:{content:i,path:e.url,on:{pageBeforeIn:function(t,n){e.$el=n.$el.find(".color-picker"),e.$el[0].f7ColorPicker=e,e.onOpen()},pageAfterIn:function(){e.onOpened()},pageBeforeOut:function(){e.onClose()},pageAfterOut:function(){e.onClosed(),e.$el&&e.$el[0]&&(e.$el[0].f7ColorPicker=null,delete e.$el[0].f7ColorPicker)}}}});else{var l=e.getModalType(),u=o.backdrop;null==u&&("popover"===l&&!1!==t.params.popover.backdrop&&(u=!0),"popup"===l&&(u=!0));var c,p={targetEl:s||a,scrollToEl:o.scrollToInput?s||a:void 0,content:i,backdrop:u,closeByBackdropClick:o.closeByBackdropClick,on:{open:function(){var t=this;e.modal=t,e.$el="popover"===l||"popup"===l?t.$el.find(".color-picker"):t.$el,e.$el[0].f7ColorPicker=e,e.onOpen()},opened:function(){e.onOpened()},close:function(){e.onClose()},closed:function(){e.onClosed(),e.$el&&e.$el[0]&&(e.$el[0].f7ColorPicker=null,delete e.$el[0].f7ColorPicker)}}};if("popup"===l&&(p.push=o.popupPush,p.swipeToClose=o.popupSwipeToClose),"sheet"===l&&(p.push=o.sheetPush,p.swipeToClose=o.sheetSwipeToClose),o.routableModals&&e.view)e.view.router.navigate({url:e.url,route:(c={path:e.url},c[l]=p,c)});else e.modal=t[l].create(p),e.modal.open()}}},i.close=function(){var e=this,t=e.opened,n=e.inline;if(t)return n?(e.onClose(),void e.onClosed()):void(e.params.routableModals&&e.view||"page"===e.params.openIn?e.view.router.back():e.modal.close())},i.init=function(){var e=this;if(e.initInput(),e.inline)return e.open(),void e.emit("local::init colorPickerInit",e);!e.initialized&&e.params.value&&e.setValue(e.params.value),e.$inputEl&&e.attachInputEvents(),e.$targetEl&&e.attachTargetEvents(),e.params.closeByOutsideClick&&e.attachHtmlEvents(),e.emit("local::init colorPickerInit",e)},i.destroy=function(){var e=this;if(!e.destroyed){var t=e.$el;e.emit("local::beforeDestroy colorPickerBeforeDestroy",e),t&&t.trigger("colorpicker:beforedestroy"),e.close(),e.detachEvents(),e.$inputEl&&e.detachInputEvents(),e.$targetEl&&e.detachTargetEvents(),e.params.closeByOutsideClick&&e.detachHtmlEvents(),t&&t.length&&delete e.$el[0].f7ColorPicker,Ol(e),e.destroyed=!0}},a=r,s=[{key:"view",get:function(){var e,t=this.$inputEl,n=this.$targetEl,r=this.app,a=this.params;return a.view?e=a.view:(t&&(e=t.parents(".view").length&&t.parents(".view")[0].f7View),!e&&n&&(e=n.parents(".view").length&&n.parents(".view")[0].f7View)),e||(e=r.views.main),e}}],s&&rb(a.prototype,s),o&&rb(a,o),r}(au),ib=ob,lb={name:"colorPicker",static:{ColorPicker:ib},create:function(){var e=this;e.colorPicker=Yc({defaultSelector:".color-picker",constructor:ib,app:e,domProp:"f7ColorPicker"}),e.colorPicker.close=function(e){void 0===e&&(e=".color-picker");var t=Gc(e);if(0!==t.length){var n=t[0].f7ColorPicker;!n||n&&!n.opened||n.close()}}},params:{colorPicker:{value:null,modules:["wheel"],palette:[["#FFEBEE","#FFCDD2","#EF9A9A","#E57373","#EF5350","#F44336","#E53935","#D32F2F","#C62828","#B71C1C"],["#F3E5F5","#E1BEE7","#CE93D8","#BA68C8","#AB47BC","#9C27B0","#8E24AA","#7B1FA2","#6A1B9A","#4A148C"],["#E8EAF6","#C5CAE9","#9FA8DA","#7986CB","#5C6BC0","#3F51B5","#3949AB","#303F9F","#283593","#1A237E"],["#E1F5FE","#B3E5FC","#81D4FA","#4FC3F7","#29B6F6","#03A9F4","#039BE5","#0288D1","#0277BD","#01579B"],["#E0F2F1","#B2DFDB","#80CBC4","#4DB6AC","#26A69A","#009688","#00897B","#00796B","#00695C","#004D40"],["#F1F8E9","#DCEDC8","#C5E1A5","#AED581","#9CCC65","#8BC34A","#7CB342","#689F38","#558B2F","#33691E"],["#FFFDE7","#FFF9C4","#FFF59D","#FFF176","#FFEE58","#FFEB3B","#FDD835","#FBC02D","#F9A825","#F57F17"],["#FFF3E0","#FFE0B2","#FFCC80","#FFB74D","#FFA726","#FF9800","#FB8C00","#F57C00","#EF6C00","#E65100"]],groupedModules:!1,centerModules:!0,sliderLabel:!1,sliderValue:!1,sliderValueEdiable:!1,barLabel:!1,barValue:!1,barValueEdiable:!1,hexLabel:!1,hexValueEditable:!1,redLabelText:"R",greenLabelText:"G",blueLabelText:"B",hueLabelText:"H",saturationLabelText:"S",brightnessLabelText:"B",hexLabelText:"HEX",alphaLabelText:"A",containerEl:null,openIn:"popover",openInPhone:"popup",popupPush:!1,popupSwipeToClose:void 0,sheetPush:!1,sheetSwipeToClose:void 0,formatValue:null,targetEl:null,targetElSetBackgroundColor:!1,inputEl:null,inputReadOnly:!0,closeByOutsideClick:!0,scrollToInput:!0,toolbarSheet:!0,toolbarPopover:!1,toolbarCloseText:"Done",navbarPopup:!0,navbarCloseText:"Done",navbarTitleText:"Color",navbarBackLinkText:"Back",cssClass:null,routableModals:!1,view:null,url:"color/",backdrop:null,closeByBackdropClick:!0,renderToolbar:null,renderNavbar:null,renderInline:null,renderPopover:null,renderSheet:null,renderPopup:null,render:null}}},ub={open:function(e){var t=this,n=Gc(e).eq(0);if(n.length&&(n.addClass("treeview-item-opened"),n.trigger("treeview:open"),t.emit("treeviewOpen",n[0]),n.hasClass("treeview-load-children")&&!n[0].f7TreeviewChildrenLoaded)){var r={iosPreloaderContent:$l,mdPreloaderContent:Tl,auroraPreloaderContent:Il};n.trigger("treeview:loadchildren",a),t.emit("treeviewLoadChildren",n[0],a),n.find(".treeview-toggle").addClass("treeview-toggle-hidden"),n.find(".treeview-item-root").prepend('<div class="preloader treeview-preloader">'+r[t.theme+"PreloaderContent"]+"</div>")}function a(e){e?(n.removeClass("treeview-item-opened"),n.trigger("treeview:close"),t.emit("treeviewClose",n[0])):n[0].f7TreeviewChildrenLoaded=!0,n.find(".treeview-toggle").removeClass("treeview-toggle-hidden"),n.find(".treeview-preloader").remove()}},close:function(e){var t=Gc(e).eq(0);t.length&&(t.removeClass("treeview-item-opened"),t.trigger("treeview:close"),this.emit("treeviewClose",t[0]))},toggle:function(e){var t=Gc(e).eq(0);if(t.length){var n=t.hasClass("treeview-item-opened");this.treeview[n?"close":"open"](t)}}},cb={name:"treeview",create:function(){Kl(this,{treeview:ub})},clicks:{".treeview-toggle":function(e,t,n){if(!e.parents(".treeview-item-toggle").length){var r=e.parents(".treeview-item").eq(0);r.length&&(n.preventF7Router=!0,this.treeview.toggle(r[0]))}},".treeview-item-toggle":function(e,t,n){var r=e.closest(".treeview-item").eq(0);r.length&&(n.preventF7Router=!0,this.treeview.toggle(r[0]))}}};function pb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function db(e,t){return db=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},db(e,t)}var hb={bold:["bold","format_bold","bold"],italic:["italic","format_italic","italic"],underline:["underline","format_underlined","underline"],strikeThrough:["strikethrough","strikethrough_s","strikeThrough"],orderedList:["list_number","format_list_numbered","insertOrderedList"],unorderedList:["list_bullet","format_list_bulleted","insertUnorderedList"],link:["link","link","createLink"],image:["photo","image","insertImage"],paragraph:["paragraph",'<i class="icon"></i>',"formatBlock.P"],h1:['<i class="icon">H<sub>1</sub></i>','<i class="icon">H<sub>1</sub></i>',"formatBlock.H1"],h2:['<i class="icon">H<sub>2</sub></i>','<i class="icon">H<sub>2</sub></i>',"formatBlock.H2"],h3:['<i class="icon">H<sub>3</sub></i>','<i class="icon">H<sub>3</sub></i>',"formatBlock.H3"],alignLeft:["text_alignleft","format_align_left","justifyLeft"],alignCenter:["text_aligncenter","format_align_center","justifyCenter"],alignRight:["text_alignright","format_align_right","justifyRight"],alignJustify:["text_justify","format_align_justify","justifyFull"],subscript:["textformat_subscript",'<i class="icon">A<sub>1</sub></i>',"subscript"],superscript:["textformat_superscript",'<i class="icon">A<sup>1</sup></i>',"superscript"],indent:["increase_indent","format_indent_increase","indent"],outdent:["decrease_indent","format_indent_decrease","outdent"]},fb=function(e){var t,n;function r(t,n){var r,a=pb(r=e.call(this,n,[t])||this),s=bl(),o=Zl(),i=Vl({},t.params.textEditor);a.useModulesParams(i),a.params=Vl(i,n);var l=a.params.el;if(!l)return a||pb(r);var u=Gc(l);if(0===u.length)return a||pb(r);if(u[0].f7TextEditor)return u[0].f7TextEditor||pb(r);var c=u.children(".text-editor-content");if(c.length||(u.append('<div class="text-editor-content" contenteditable></div>'),c=u.children(".text-editor-content")),Vl(a,{app:t,$el:u,el:u[0],$contentEl:c,contentEl:c[0]}),"value"in n&&(a.value=a.params.value),"keyboard-toolbar"===a.params.mode&&(o.cordova||o.capacitor||o.android||(a.params.mode="popover")),"string"==typeof a.params.buttons)try{a.params.buttons=JSON.parse(a.params.buttons)}catch(e){throw new Error('Framework7: TextEditor: wrong "buttons" parameter format')}return u[0].f7TextEditor=a,a.onButtonClick=a.onButtonClick.bind(a),a.onFocus=a.onFocus.bind(a),a.onBlur=a.onBlur.bind(a),a.onInput=a.onInput.bind(a),a.onPaste=a.onPaste.bind(a),a.onSelectionChange=a.onSelectionChange.bind(a),a.closeKeyboardToolbar=a.closeKeyboardToolbar.bind(a),a.attachEvents=function(){"toolbar"===a.params.mode&&a.$el.find(".text-editor-toolbar").on("click","button",a.onButtonClick),"keyboard-toolbar"===a.params.mode&&(a.$keyboardToolbarEl.on("click","button",a.onButtonClick),a.$el.parents(".page").on("page:beforeout",a.closeKeyboardToolbar)),"popover"===a.params.mode&&a.popover&&a.popover.$el.on("click","button",a.onButtonClick),a.$contentEl.on("paste",a.onPaste),a.$contentEl.on("focus",a.onFocus),a.$contentEl.on("blur",a.onBlur),a.$contentEl.on("input",a.onInput,!0),Gc(s).on("selectionchange",a.onSelectionChange)},a.detachEvents=function(){"toolbar"===a.params.mode&&a.$el.find(".text-editor-toolbar").off("click","button",a.onButtonClick),"keyboard-toolbar"===a.params.mode&&(a.$keyboardToolbarEl.off("click","button",a.onButtonClick),a.$el.parents(".page").off("page:beforeout",a.closeKeyboardToolbar)),"popover"===a.params.mode&&a.popover&&a.popover.$el.off("click","button",a.onButtonClick),a.$contentEl.off("paste",a.onPaste),a.$contentEl.off("focus",a.onFocus),a.$contentEl.off("blur",a.onBlur),a.$contentEl.off("input",a.onInput,!0),Gc(s).off("selectionchange",a.onSelectionChange)},a.useModules(),a.init(),a||pb(r)}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,db(t,n);var a=r.prototype;return a.setValue=function(e){var t=this;return t.value===e||(t.value=e,t.$contentEl.html(e),t.$el.trigger("texteditor:change",t.value),t.emit("local::change textEditorChange",t,t.value)),t},a.getValue=function(){return this.value},a.clearValue=function(){var e=this;return e.setValue(""),e.params.placeholder&&!e.$contentEl.html()&&e.insertPlaceholder(),e},a.createLink=function(){var e,t=this,n=wl(),r=bl(),a=n.getSelection(),s=[];if(a&&a.anchorNode&&Gc(a.anchorNode).parents(t.$el).length){for(var o=a.anchorNode;o;)s.push(o),o.nextSibling&&o!==a.focusNode||(o=null),o&&(o=o.nextSibling);for(var i=[],l=Gc(s),u=0;u<l.length;u+=1){var c=l[u].children;if(c)for(var p=0;p<c.length;p+=1)Gc(c[p]).is("a")&&i.push(c[p])}e=l.closest("a").add(Gc(i))}if(e&&e.length)return e.each((function(e){var t=n.getSelection(),a=r.createRange();a.selectNodeContents(e),t.removeAllRanges(),t.addRange(a),r.execCommand("unlink",!1),t.removeAllRanges()})),t;var d=t.getSelectionRange();return d?(t.app.dialog.prompt(t.params.linkUrlText,"",(function(e){e&&e.trim().length&&(t.setSelectionRange(d),r.execCommand("createLink",!1,e.trim()),t.$el.trigger("texteditor:insertlink",{url:e.trim()}),t.emit("local:insertLink textEditorInsertLink",t,e.trim()))})).$el.find("input").focus(),t):t},a.insertImage=function(){var e=this,t=bl(),n=e.getSelectionRange();return n?(e.app.dialog.prompt(e.params.imageUrlText,"",(function(r){r&&r.trim().length&&(e.setSelectionRange(n),t.execCommand("insertImage",!1,r.trim()),e.$el.trigger("texteditor:insertimage",{url:r.trim()}),e.emit("local:insertImage textEditorInsertImage",e,r.trim()))})).$el.find("input").focus(),e):e},a.removePlaceholder=function(){this.$contentEl.find(".text-editor-placeholder").remove()},a.insertPlaceholder=function(){this.$contentEl.append('<div class="text-editor-placeholder">'+this.params.placeholder+"</div>")},a.onSelectionChange=function(){var e=this,t=wl(),n=bl();if("toolbar"!==e.params.mode){var r=t.getSelection(),a=Gc(r.anchorNode).parents(e.contentEl).length||r.anchorNode===e.contentEl;if("keyboard-toolbar"!==e.params.mode){if("popover"===e.params.mode){var s=Gc(r.anchorNode).parents(e.popover.el).length||r.anchorNode===e.popover.el;if(!a&&!s)return void e.closePopover();if(!r.isCollapsed&&r.rangeCount){var o=r.getRangeAt(0).getBoundingClientRect(),i=e.app.$el[0]||n.body;e.openPopover(o.x+(t.scrollX||0)-i.offsetLeft,o.y+(t.scrollY||0)-i.offsetTop,o.width,o.height)}else r.isCollapsed&&e.closePopover()}}else a?e.openKeyboardToolbar():e.closeKeyboardToolbar()}},a.onPaste=function(e){var t=bl();if(this.params.clearFormattingOnPaste&&e.clipboardData&&e.clipboardData.getData){var n=e.clipboardData.getData("text/plain");e.preventDefault(),t.execCommand("insertText",!1,n)}},a.onInput=function(){var e=this,t=e.$contentEl.html();e.value=t,e.$el.trigger("texteditor:input"),e.emit("local:input textEditorInput",e,e.value),e.$el.trigger("texteditor:change",e.value),e.emit("local::change textEditorChange",e,e.value)},a.onFocus=function(){var e=this;e.removePlaceholder(),e.$contentEl.focus(),e.$el.trigger("texteditor:focus"),e.emit("local::focus textEditorFocus",e)},a.onBlur=function(){var e=this,t=wl(),n=bl();if(e.params.placeholder&&""===e.$contentEl.html()&&e.insertPlaceholder(),"popover"===e.params.mode){var r=t.getSelection(),a=Gc(r.anchorNode).parents(e.contentEl).length||r.anchorNode===e.contentEl;n.activeElement&&e.popover&&Gc(n.activeElement).closest(e.popover.$el).length||a||e.closePopover()}if("keyboard-toolbar"===e.params.mode){var s=t.getSelection();Gc(s.anchorNode).parents(e.contentEl).length||s.anchorNode===e.contentEl||e.closeKeyboardToolbar()}e.$el.trigger("texteditor:blur"),e.emit("local::blur textEditorBlur",e)},a.onButtonClick=function(e){var t=this,n=wl(),r=bl(),a=n.getSelection();if(Gc(a.anchorNode).parents(t.contentEl).length||a.anchorNode===t.contentEl){var s=Gc(e.target).closest("button");s.parents("form").length&&e.preventDefault();var o=s.attr("data-button"),i=t.params.customButtons&&t.params.customButtons[o];if(o&&(hb[o]||i))if(s.trigger("texteditor:buttonclick",o),t.emit("local::buttonClick textEditorButtonClick",t,o),i)i.onClick&&i.onClick(t,s[0]);else{var l=hb[o][2];if("createLink"!==l)if("insertImage"!==l)if(0!==l.indexOf("formatBlock"))r.execCommand(l,!1);else{var u=l.split(".")[1],c=Gc(a.anchorNode);c.parents(u.toLowerCase()).length||c.is(u)?r.execCommand("formatBlock",!1,"div"):r.execCommand("formatBlock",!1,u)}else t.insertImage();else t.createLink()}}},a.getSelectionRange=function(){var e=wl(),t=bl();if(e.getSelection){var n=e.getSelection();if(n.getRangeAt&&n.rangeCount)return n.getRangeAt(0)}else if(t.selection&&t.selection.createRange)return t.selection.createRange();return null},a.setSelectionRange=function(e){var t=wl(),n=bl();if(e)if(t.getSelection){var r=t.getSelection();r.removeAllRanges(),r.addRange(e)}else n.selection&&e.select&&e.select()},a.renderButtons=function(){var e=this,t="";function n(t){var n="md"===e.app.theme?"material-icons":"f7-icons";if(e.params.customButtons&&e.params.customButtons[t])return'<button type="button" class="text-editor-button" data-button="'+t+'">'+(e.params.customButtons[t].content||"")+"</button>";if(!hb[t])return"";var r=hb[t]["md"===e.app.theme?1:0];return('<button type="button" class="text-editor-button" data-button="'+t+'">'+(r.indexOf("<")>=0?r:'<i class="'+n+'">'+r+"</i>")+"</button>").trim()}return e.params.buttons.forEach((function(r,a){Array.isArray(r)?(r.forEach((function(e){t+=n(e)})),a<e.params.buttons.length-1&&e.params.dividers&&(t+='<div class="text-editor-button-divider"></div>')):t+=n(r)})),t},a.createToolbar=function(){this.$el.prepend('<div class="text-editor-toolbar">'+this.renderButtons()+"</div>")},a.createKeyboardToolbar=function(){this.$keyboardToolbarEl=Gc('<div class="toolbar toolbar-bottom text-editor-keyboard-toolbar"><div class="toolbar-inner">'+this.renderButtons()+"</div></div>")},a.createPopover=function(){var e=this;e.popover=e.app.popover.create({content:'\n        <div class="popover theme-dark text-editor-popover">\n          <div class="popover-inner">'+e.renderButtons()+"</div>\n        </div>\n      ",closeByOutsideClick:!1,backdrop:!1})},a.openKeyboardToolbar=function(){var e=this;e.$keyboardToolbarEl.parent(e.app.$el).length||(e.$el.trigger("texteditor:keyboardopen"),e.emit("local::keyboardOpen textEditorKeyboardOpen",e),e.app.$el.append(e.$keyboardToolbarEl))},a.closeKeyboardToolbar=function(){var e=this;e.$keyboardToolbarEl.remove(),e.$el.trigger("texteditor:keyboardclose"),e.emit("local::keyboardClose textEditorKeyboardClose",e)},a.openPopover=function(e,t,n,r){var a=this;a.popover&&(Object.assign(a.popover.params,{targetX:e,targetY:t,targetWidth:n,targetHeight:r}),clearTimeout(a.popoverTimeout),a.popoverTimeout=setTimeout((function(){a.popover&&(a.popover.opened?a.popover.resize():(a.$el.trigger("texteditor:popoveropen"),a.emit("local::popoverOpen textEditorPopoverOpen",a),a.popover.open()))}),400))},a.closePopover=function(){var e=this;clearTimeout(e.popoverTimeout),e.popover&&e.popover.opened&&(e.popoverTimeout=setTimeout((function(){e.popover&&(e.$el.trigger("texteditor:popoverclose"),e.emit("local::popoverClose textEditorPopoverClose",e),e.popover.close())}),400))},a.init=function(){var e=this;return e.value?e.$contentEl.html(e.value):e.value=e.$contentEl.html(),e.params.placeholder&&""===e.value&&e.insertPlaceholder(),"toolbar"===e.params.mode?e.createToolbar():"popover"===e.params.mode?e.createPopover():"keyboard-toolbar"===e.params.mode&&e.createKeyboardToolbar(),e.attachEvents(),e.$el.trigger("texteditor:init"),e.emit("local::init textEditorInit",e),e},a.destroy=function(){var e=this;e.$el.trigger("texteditor:beforedestroy"),e.emit("local::beforeDestroy textEditorBeforeDestroy",e),e.detachEvents(),"keyboard-toolbar"===e.params.mode&&e.$keyboardToolbarEl&&e.$keyboardToolbarEl.remove(),e.popover&&(e.popover.close(!1),e.popover.destroy()),delete e.$el[0].f7TextEditor,Ol(e),e=null},r}(au),mb=fb,gb={name:"textEditor",params:{textEditor:{el:null,mode:"toolbar",value:void 0,customButtons:null,buttons:[["bold","italic","underline","strikeThrough"],["orderedList","unorderedList"],["link","image"],["paragraph","h1","h2","h3"],["alignLeft","alignCenter","alignRight","alignJustify"],["subscript","superscript"],["indent","outdent"]],dividers:!0,imageUrlText:"Insert image URL",linkUrlText:"Insert link URL",placeholder:null,clearFormattingOnPaste:!0}},create:function(){this.textEditor=Vl(Yc({defaultSelector:".text-editor",constructor:mb,app:this,domProp:"f7TextEditor"}))},static:{TextEditor:mb},on:{tabMounted:function(e){var t=this;Gc(e).find(".text-editor-init").each((function(e){var n=Gc(e).dataset();t.textEditor.create(Vl({el:e},n||{}))}))},tabBeforeRemove:function(e){Gc(e).find(".text-editor-init").each((function(e){e.f7TextEditor&&e.f7TextEditor.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".text-editor-init").each((function(e){var n=Gc(e).dataset();t.textEditor.create(Vl({el:e},n||{}))}))},pageBeforeRemove:function(e){e.$el.find(".text-editor-init").each((function(e){e.f7TextEditor&&e.f7TextEditor.destroy()}))}},vnode:{"text-editor-init":{insert:function(e){var t=e.elm,n=Gc(t).dataset();this.textEditor.create(Vl({el:t},n||{}))},destroy:function(e){var t=e.elm;t.f7TextEditor&&t.f7TextEditor.destroy()}}}};sp.use([op,ip,lp,up,xp,kp,Zp,Gp,Qp,td,ad,id,ld,cd,dd,hd,bd,Nd,{name:"appbar"},Dd,Vd,Gd,Jd,nh,ih,dh,fh,gh,bh,wh,kh,{name:"contactsList"},$h,Mh,{name:"timeline"},Rh,Vh,Hh,{name:"chip"},Kh,Jh,{name:"checkbox"},{name:"radio"},nf,lf,hf,yf,Cf,Nf,Df,Bf,Hf,Uf,Yf,Qf,cm,gm,xm,wv,Ev,Ov,Dv,Vv,{name:"skeleton"},Hv,lb,cb,gb,{name:"elevation"},{name:"typography"}]);var vb=sp;sp.use([op,ip,lp,up,xp,kp,Zp,Gp,Qp,td,ad,id,ld,cd,dd,hd,bd,Nd]);var bb=sp;function yb(e){var t={};return Object.keys(e).forEach((function(n){void 0!==e[n]&&(t[n]=e[n])})),t}function wb(e){return"string"==typeof e&&""!==e}function xb(e){return"object"==typeof e&&null!==e&&e.constructor&&e.constructor===Object}function kb(){return Date.now()}function Cb(){for(var e,t,n=!0,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];"boolean"==typeof a[0]?(n=a[0],e=a[1],a.splice(0,2),t=a):(e=a[0],a.splice(0,1),t=a);for(var o=0;o<t.length;o+=1){var i=a[o];if(null!=i)for(var l=Object.keys(Object(i)),u=0,c=l.length;u<c;u+=1){var p=l[u],d=Object.getOwnPropertyDescriptor(i,p);void 0!==d&&d.enumerable&&(n?xb(e[p])&&xb(i[p])?Cb(e[p],i[p]):!xb(e[p])&&xb(i[p])?(e[p]={},Cb(e[p],i[p])):e[p]=i[p]:e[p]=i[p])}}return e}function Sb(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){"object"==typeof t&&t.constructor===Object?Object.keys(t).forEach((function(n){t[n]&&e.push(n)})):t&&e.push(t)}));var a=[];return e.forEach((function(e){a.indexOf(e)<0&&a.push(e)})),a.join(" ")}var Eb,Tb,$b=0,Ib=0;function Nb(){return $b+=1,kb()+"_"+$b}function Ob(){return Ib+=1,kb()+"_"+Ib}var Ab={},Mb={views:[],tabs:[],modals:null},_b=function(){Eb&&(Ab.ios="ios"===Eb.theme,Ab.md="md"===Eb.theme,Ab.aurora="aurora"===Eb.theme)},Rb=function(){$b=0,Ib=0,delete Ab.ios,delete Ab.md,delete Ab.aurora,Mb.views=[],Mb.tabs=[],Mb.modals=null},Pb=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=!0);var r=Cb({},t,{el:e,init:n});if(void 0!==t.store&&(r.store=t.store),r.routes||(r.routes=[]),r.userAgent&&("auto"===r.theme||!r.theme)){var a=bb.getDevice({userAgent:r.userAgent},!0);Ab.ios=!!a.ios,Ab.aurora=a.desktop&&a.electron,Ab.md=!Ab.ios&&!Ab.aurora}if(!Eb||"undefined"==typeof window){"undefined"==typeof window&&Rb();var s=new bb(r);Eb=s,_b(),s.initialized?(Eb=s,Tb.emit("ready",Eb)):s.on("init",(function(){Eb=s,Tb.emit("ready",Eb)}))}},Db=function(e){e&&(Eb&&Eb.initialized?e(Eb):Tb.once("ready",e))},Lb=function(e){for(var t=[],n=0;n<e.children.length;n+=1)t.push(e.children[n]);return t},Bb={proto:{pageComponentLoader:function(e){var t,n=e.routerEl,r=e.component,a=e.options,s=e.resolve,o=e.reject,i=this.id,l=n;if(Mb.views.forEach((function(e){(e.el&&e.el===n||e.routerId&&e.routerId===i)&&(t=e)})),t){var u,c={component:r,id:Ob(),props:Cb({f7route:a.route,f7router:this},a.route.params,a.props||{})},p=Lb(l);Tb.on("viewRouterDidUpdate",(function e(n){if(n===t&&!u){var r=Lb(l);if(!function(e,t){return e.length===t.length&&new Set([].concat(e,t)).size===e.length}(p,r)){Tb.off("viewRouterDidUpdate",e);var a=l.children[l.children.length-1];c.el=a,s(a),u=!0}}})),t.pages.push(c),t.setPages(t.pages)}else o()},removePage:function(e){if(e){var t,n=this;if((t="length"in e&&e[0]?e[0].f7Page:e.f7Page)&&t.route&&t.route.route&&t.route.route.keepAlive)n.app.$(e).remove();else{var r,a,s;if(Mb.views.forEach((function(e){e.el&&e.el===n.el&&(r=e)})),"length"in e){if(0===e.length)return;a=e[0]}else a=e;if(a)r.pages.forEach((function(e,t){e.el===a&&(s=!0,r.pages.splice(t,1),r.setPages(r.pages))})),s||a.parentNode.removeChild(a)}}},tabComponentLoader:function(e){var t,n=void 0===e?{}:e,r=n.tabEl,a=n.component,s=n.options,o=n.resolve,i=n.reject;if(r||i(),Mb.tabs.forEach((function(e){e.el&&e.el===r&&(t=e)})),t){var l,u={id:Ob(),component:a,props:Cb({f7route:s.route,f7router:this},s.route.route&&s.route.route.tab&&s.route.route.tab.options&&s.route.route.tab.options.props||{},s.route.params,s.props||{})};Tb.on("tabRouterDidUpdate",(function e(n){if(n===t&&!l){Tb.off("tabRouterDidUpdate",e);var a=r.children[0];o(a),l=!0}})),t.setTabContent(u)}else i()},removeTabContent:function(e){var t;e&&(Mb.tabs.forEach((function(n){n.el&&n.el===e&&(t=n)})),t?t.setTabContent(null):e.innerHTML="")},modalComponentLoader:function(e){var t=void 0===e?{}:e,n=t.component,r=t.options,a=t.resolve,s=t.reject,o=Mb.modals;if(o){var i,l={component:n,id:Ob(),props:Cb({f7route:r.route,f7router:this},r.route.params,r.props||{})};Tb.on("modalsRouterDidUpdate",(function e(){if(!i){Tb.off("modalsRouterDidUpdate",e);var t=o.el.children[o.el.children.length-1];l.el=t,a(t),i=!0}})),o.modals.push(l),o.setModals(o.modals)}else s()},removeModal:function(e){var t,n=Mb.modals;n&&(n.modals.forEach((function(n){n.el===e&&(t=n)})),n.modals.splice(n.modals.indexOf(t),1),n.setModals(n.modals))}}},Fb={name:"vuePlugin",installed:!1,install:function(e){if(void 0===e&&(e={}),!Fb.installed){Fb.installed=!0,Tb=new bb.Events;var t=e,n=t.theme,r=t.userAgent;if("md"===n&&(Ab.md=!0),"ios"===n&&(Ab.ios=!0),"aurora"===n&&(Ab.aurora=!0),("undefined"!=typeof window||!!r)&&(!n||"auto"===n)){var a=bb.getDevice({userAgent:r},!0);Ab.ios=!!a.ios,Ab.aurora=a.desktop&&a.electron,Ab.md=!Ab.ios&&!Ab.aurora}Db((function(){_b()})),bb.Router.use(Bb)}}},zb=Fb;function Vb(e){var t,n=e.color,r=e.colorTheme,a=e.textColor,s=e.bgColor,o=e.borderColor,i=e.rippleColor;return(t={"theme-dark":e.themeDark})["color-"+n]=n,t["color-theme-"+r]=r,t["text-color-"+a]=a,t["bg-color-"+s]=s,t["border-color-"+o]=o,t["ripple-color-"+i]=i,t}var Wb={color:String,colorTheme:String,textColor:String,bgColor:String,borderColor:String,rippleColor:String,themeDark:Boolean},Hb={icon:String,iconMaterial:String,iconF7:String,iconIos:String,iconMd:String,iconAurora:String,iconColor:String,iconSize:[String,Number],iconBadge:[String,Number],iconBadgeColor:String},jb={back:Boolean,external:Boolean,force:Boolean,animate:{type:Boolean,default:void 0},ignoreCache:Boolean,reloadCurrent:Boolean,reloadAll:Boolean,reloadPrevious:Boolean,reloadDetail:{type:Boolean,default:void 0},routeTabId:String,view:String,routeProps:Object,preventRouter:Boolean,transition:String,openIn:String};function Ub(e){var t,n,r=e.force,a=e.reloadCurrent,s=e.reloadPrevious,o=e.reloadAll,i=e.reloadDetail,l=e.animate,u=e.ignoreCache,c=e.routeTabId,p=e.view,d=e.transition,h=e.openIn;return"animate"in e&&void 0!==l&&(t=l.toString()),"reloadDetail"in e&&void 0!==i&&(n=i.toString()),{"data-force":r||void 0,"data-reload-current":a||void 0,"data-reload-all":o||void 0,"data-reload-previous":s||void 0,"data-reload-detail":n,"data-animate":t,"data-ignore-cache":u||void 0,"data-route-tab-id":c||void 0,"data-view":wb(p)?p:void 0,"data-transition":wb(d)?d:void 0,"data-open-in":wb(h)?h:void 0}}function Gb(e){var t=e.back,n=e.linkBack;return{back:t||n,external:e.external,"prevent-router":e.preventRouter}}var qb={searchbarEnable:[Boolean,String],searchbarDisable:[Boolean,String],searchbarClear:[Boolean,String],searchbarToggle:[Boolean,String],panelOpen:[Boolean,String],panelClose:[Boolean,String],panelToggle:[Boolean,String],popupOpen:[Boolean,String],popupClose:[Boolean,String],actionsOpen:[Boolean,String],actionsClose:[Boolean,String],popoverOpen:[Boolean,String],popoverClose:[Boolean,String],loginScreenOpen:[Boolean,String],loginScreenClose:[Boolean,String],sheetOpen:[Boolean,String],sheetClose:[Boolean,String],sortableEnable:[Boolean,String],sortableDisable:[Boolean,String],sortableToggle:[Boolean,String],cardOpen:[Boolean,String],cardPreventOpen:[Boolean,String],cardClose:[Boolean,String],menuClose:{type:[Boolean,String],default:void 0}};function Xb(e){var t=e.searchbarEnable,n=e.searchbarDisable,r=e.searchbarClear,a=e.searchbarToggle,s=e.panelOpen,o=e.panelClose,i=e.panelToggle,l=e.popupOpen,u=e.popupClose,c=e.actionsOpen,p=e.actionsClose,d=e.popoverOpen,h=e.popoverClose,f=e.loginScreenOpen,m=e.loginScreenClose,g=e.sheetOpen,v=e.sheetClose,b=e.sortableEnable,y=e.sortableDisable,w=e.sortableToggle,x=e.cardOpen,k=e.cardClose;return{"data-searchbar":wb(t)&&t||wb(n)&&n||wb(r)&&r||wb(a)&&a||void 0,"data-panel":wb(s)&&s||wb(o)&&o||wb(i)&&i||void 0,"data-popup":wb(l)&&l||wb(u)&&u||void 0,"data-actions":wb(c)&&c||wb(p)&&p||void 0,"data-popover":wb(d)&&d||wb(h)&&h||void 0,"data-sheet":wb(g)&&g||wb(v)&&v||void 0,"data-login-screen":wb(f)&&f||wb(m)&&m||void 0,"data-sortable":wb(b)&&b||wb(y)&&y||wb(w)&&w||void 0,"data-card":wb(x)&&x||wb(k)&&k||void 0}}function Kb(e){var t=e.searchbarEnable,n=e.searchbarDisable,r=e.searchbarClear,a=e.searchbarToggle,s=e.panelOpen,o=e.panelClose,i=e.panelToggle,l=e.popupOpen,u=e.popupClose,c=e.actionsClose,p=e.actionsOpen,d=e.popoverOpen,h=e.popoverClose,f=e.loginScreenOpen,m=e.loginScreenClose,g=e.sheetOpen,v=e.sheetClose,b=e.sortableEnable,y=e.sortableDisable,w=e.sortableToggle,x=e.cardOpen,k=e.cardPreventOpen,C=e.cardClose,S=e.menuClose;return{"searchbar-enable":t||""===t,"searchbar-disable":n||""===n,"searchbar-clear":r||""===r,"searchbar-toggle":a||""===a,"panel-close":o||""===o,"panel-open":s||""===s,"panel-toggle":i||""===i,"popup-close":u||""===u,"popup-open":l||""===l,"actions-close":c||""===c,"actions-open":p||""===p,"popover-close":h||""===h,"popover-open":d||""===d,"sheet-close":v||""===v,"sheet-open":g||""===g,"login-screen-close":m||""===m,"login-screen-open":f||""===f,"sortable-enable":b||""===b,"sortable-disable":y||""===y,"sortable-toggle":w||""===w,"card-close":C||""===C,"card-open":x||""===x,"card-prevent-open":k||""===k,"menu-close":S||""===S}}function Yb(){return Yb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yb.apply(this,arguments)}var Jb={name:"f7-accordion-content",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default")],2)},props:Yb({},Wb),setup:function(e){return{classes:qa((function(){return Sb("accordion-item-content",Vb(e))}))}}};function Zb(){return Zb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zb.apply(this,arguments)}var Qb={name:"f7-accordion-item",render:function(e,t){return Zr(),aa("div",{ref:"elRef",class:e.classes},[Sa(e.$slots,"default")],2)},props:Zb({opened:Boolean},Wb),emits:["accordion:beforeopen","accordion:open","accordion:opened","accordion:beforeclose","accordion:close","accordion:closed"],setup:function(e,t){var n=t.emit,r=xt(null),a=function(e,t){r.value===e&&n("accordion:beforeopen",t)},s=function(e){r.value===e&&n("accordion:open")},o=function(e){r.value===e&&n("accordion:opened")},i=function(e,t){r.value===e&&n("accordion:beforeclose",t)},l=function(e){r.value===e&&n("accordion:close")},u=function(e){r.value===e&&n("accordion:closed")};Jn((function(){Db((function(){Eb.on("accordionBeforeOpen",a),Eb.on("accordionOpen",s),Eb.on("accordionOpened",o),Eb.on("accordionBeforeClose",i),Eb.on("accordionClose",l),Eb.on("accordionClosed",u)}))})),er((function(){return Eb.off("accordionBeforeOpen",a),Eb.off("accordionOpen",s),Eb.off("accordionOpened",o),Eb.off("accordionBeforeClose",i),Eb.off("accordionClose",l),void Eb.off("accordionClosed",u)}));var c=qa((function(){return Sb("accordion-item",{"accordion-item-opened":e.opened},Vb(e))}));return{elRef:r,classes:c}}};function ey(){return ey=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ey.apply(this,arguments)}var ty={name:"f7-accordion-toggle",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default")],2)},props:ey({},Wb),setup:function(e){return{classes:qa((function(){return Sb("accordion-item-toggle",Vb(e))}))}}};function ny(){return ny=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ny.apply(this,arguments)}var ry={name:"f7-accordion",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default")],2)},props:ny({accordionOpposite:Boolean},Wb),setup:function(e){return{classes:qa((function(){return Sb("accordion-list",e.accordionOpposite&&"accordion-opposite",Vb(e))}))}}};function ay(){return ay=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ay.apply(this,arguments)}var sy={key:0,class:"actions-button-media"},oy={class:"actions-button-text"};var iy={name:"f7-actions-button",render:function(e,t){return Zr(),aa("div",{ref:"elRef",class:e.classes,onClick:t[1]||(t[1]=function(){return e.onClick&&e.onClick.apply(e,arguments)})},[e.hasMedia?(Zr(),aa("div",sy,[Sa(e.$slots,"media")])):va("",!0),pa("div",oy,[Sa(e.$slots,"default")])],2)},props:ay({bold:Boolean,close:{type:Boolean,default:!0}},Wb),emits:["click"],setup:function(e,t){var n=t.slots,r=t.emit,a=xt(null),s=qa((function(){return n&&!!n.media}));return{classes:qa((function(){return Sb({"actions-button":!0,"actions-button-bold":e.bold},Vb(e))})),elRef:a,hasMedia:s,onClick:function(t){a.value&&e.close&&Eb&&Eb.actions.close(Eb.$(a.value).parents(".actions-modal")),r("click",t)}}}};function ly(){return ly=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ly.apply(this,arguments)}var uy={name:"f7-actions-group",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default")],2)},props:ly({},Wb),setup:function(e){return{classes:qa((function(){return Sb("actions-group",Vb(e))}))}}};function cy(){return cy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cy.apply(this,arguments)}var py={name:"f7-actions-label",render:function(e,t){return Zr(),aa("div",{class:e.classes,onClick:t[1]||(t[1]=function(){return e.onClick&&e.onClick.apply(e,arguments)})},[Sa(e.$slots,"default")],2)},props:cy({bold:Boolean},Wb),emits:["click"],setup:function(e,t){var n=t.emit;return{classes:qa((function(){return Sb("actions-label",{"actions-button-bold":e.bold},Vb(e))})),onClick:function(e){n("click",e)}}}},dy=function(e){var t=void 0===e?{}:e,n=t.isOpened,r=t.isClosing;return{"modal-in":n&&!r,"modal-out":r}};function hy(){return hy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hy.apply(this,arguments)}var fy={name:"f7-actions",render:function(e,t){return Zr(),aa("div",{ref:"elRef",class:e.classes},[Sa(e.$slots,"default")],2)},props:hy({tabletFullscreen:Boolean,opened:Boolean,animate:{type:Boolean,default:void 0},grid:Boolean,target:{type:[String,Object],default:void 0},convertToPopover:{type:Boolean,default:void 0},forceToPopover:{type:Boolean,default:void 0},backdrop:{type:Boolean,default:void 0},backdropEl:{type:[String,Object],default:void 0},closeByBackdropClick:{type:Boolean,default:void 0},closeByOutsideClick:{type:Boolean,default:void 0},closeOnEscape:{type:Boolean,default:void 0},containerEl:{type:[String,Object],default:void 0}},Wb),emits:["actions:open","actions:opened","actions:close","actions:closed","update:opened"],setup:function(e,t){var n=t.emit,r=null,a=e.opened,s=!1,o=xt(null),i=function(e){a=!0,s=!1,n("actions:open",e),n("update:opened",!0)},l=function(e){n("actions:opened",e)},u=function(e){a=!1,s=!0,n("actions:close",e)},c=function(e){s=!1,n("actions:closed",e),n("update:opened",!1)};Sn((function(){return e.opened}),(function(e){r&&(e?r.open():r.close())})),Jn((function(){if(o.value){var t=e.target,n=e.convertToPopover,a=e.forceToPopover,s=e.closeByBackdropClick,p=e.closeByOutsideClick,d=e.closeOnEscape,h=e.backdrop,f=e.backdropEl,m=e.grid,g=e.containerEl,v={el:o.value,grid:m,on:{open:i,opened:l,close:u,closed:c}};void 0!==t&&(v.target=t),void 0!==n&&(v.convertToPopover=n),void 0!==a&&(v.forceToPopover=a),void 0!==s&&(v.closeByBackdropClick=s),void 0!==p&&(v.closeByOutsideClick=p),void 0!==d&&(v.closeOnEscape=d),void 0!==h&&(v.backdrop=h),void 0!==f&&(v.backdropEl=f),void 0!==g&&(v.containerEl=g),Db((function(){r=Eb.popup.create(v),e.opened&&r.open(!1)}))}})),er((function(){r&&r.destroy(),r=null}));var p=qa((function(){return Sb("actions-modal",{"actions-grid":e.grid},dy({isOpened:a,isClosing:s}),Vb(e))}));return{elRef:o,classes:p}}};function my(){return my=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},my.apply(this,arguments)}var gy={name:"f7-routable-modals",setup:function(){var e=xt(null),t=xt([]),n=xt(null);Jn((function(){n.value={modals:t,el:e.value,setModals:function(e){e.forEach((function(e){e.component=ft(e.component)})),t.value=[].concat(e)}},Mb.modals=n.value})),Qn((function(){n.value&&Eb&&Tb.emit("modalsRouterDidUpdate",n.value)})),er((function(){n.value&&(Mb.modals=null,n.value=null)}));return function(){return Xa("div",{ref:e,class:"framework7-modals"},[].concat(t.value.map((function(e){return Xa(function(e){return ft(e.component)}(e),my({key:e.id},function(e){var t=e.component,n=e.props,r=[],a={};return t&&t.props&&(r=Object.keys(t.props)),r.forEach((function(e){e in n&&(a[e]=n[e])})),a}(e)))}))))}}};function vy(){return vy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vy.apply(this,arguments)}var by={name:"f7-app",render:function(e,t){var n=Vr("routable-modals");return Zr(),aa("div",{id:"framework7-root",ref:"elRef",class:e.classes},[Sa(e.$slots,"default"),pa(n)],2)},components:{RoutableModals:gy},inheritAttrs:!1,props:vy({id:{type:String,default:void 0},name:{type:String,default:void 0},version:{type:String,default:void 0},theme:{type:String,default:void 0},language:{type:String,default:void 0},routes:{type:Array,default:function(){return[]}},store:Object,autoDarkTheme:{type:Boolean,default:void 0},lazyModulesPath:{type:String,default:void 0},initOnDeviceReady:{type:Boolean,default:void 0},iosTranslucentBars:{type:Boolean,default:void 0},iosTranslucentModals:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},accordion:{type:Object,default:function(){}},actions:{type:Object,default:function(){}},areaChart:{type:Object,default:function(){}},autocomplete:{type:Object,default:function(){}},calendar:{type:Object,default:function(){}},card:{type:Object,default:function(){}},colorPicker:{type:Object,default:function(){}},dialog:{type:Object,default:function(){}},form:{type:Object,default:function(){}},gauge:{type:Object,default:function(){}},grid:{type:Object,default:function(){}},infiniteScroll:{type:Object,default:function(){}},input:{type:Object,default:function(){}},lazy:{type:Object,default:function(){}},listIndex:{type:Object,default:function(){}},loginScreen:{type:Object,default:function(){}},messagebar:{type:Object,default:function(){}},messages:{type:Object,default:function(){}},navbar:{type:Object,default:function(){}},notification:{type:Object,default:function(){}},panel:{type:Object,default:function(){}},photoBrowser:{type:Object,default:function(){}},picker:{type:Object,default:function(){}},pieChart:{type:Object,default:function(){}},popover:{type:Object,default:function(){}},popup:{type:Object,default:function(){}},range:{type:Object,default:function(){}},searchbar:{type:Object,default:function(){}},sheet:{type:Object,default:function(){}},smartSelect:{type:Object,default:function(){}},sortable:{type:Object,default:function(){}},statusbar:{type:Object,default:function(){}},stepper:{type:Object,default:function(){}},swipeout:{type:Object,default:function(){}},textEditor:{type:Object,default:function(){}},toast:{type:Object,default:function(){}},toolbar:{type:Object,default:function(){}},tooltip:{type:Object,default:function(){}},view:{type:Object,default:function(){}},virtualList:{type:Object,default:function(){}},clicks:{type:Object,default:function(){}},serviceWorker:{type:Object,default:function(){}},touch:{type:Object,default:function(){}}},Wb),setup:function(e){var t=xt(null),n=ft(e.routes);return Eb&&"undefined"!=typeof window||Pb(t.value,yb(vy({},e,{routes:n})),!1),Jn((function(){var r=t.value&&t.value.parentNode;"undefined"!=typeof document&&r&&r!==document.body&&r.parentNode===document.body&&(r.style.height="100%"),Eb?Eb.init(t.value):Pb(t.value,yb(vy({},e,{routes:n})),!0)})),{classes:qa((function(){return Sb("framework7-root",Vb(e))})),elRef:t}}};function yy(){return yy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yy.apply(this,arguments)}var wy={name:"f7-appbar",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"before-inner"),e.inner?(Zr(),aa("div",{key:0,class:e.innerClasses},[Sa(e.$slots,"default")],2)):Sa(e.$slots,"default",{key:1}),Sa(e.$slots,"after-inner")],2)},props:yy({noShadow:Boolean,noHairline:Boolean,inner:{type:Boolean,default:!0},innerClass:String,innerClassName:String},Wb),setup:function(e){return{classes:qa((function(){return Sb("appbar",{"no-shadow":e.noShadow,"no-hairline":e.noHairline},Vb(e))})),innerClasses:qa((function(){return Sb("appbar-inner",e.innerClass,e.innerClassName)}))}}},xy={key:0,class:"area-chart-axis"},ky={key:0},Cy={key:1,class:"area-chart-legend"};var Sy={name:"f7-area-chart",render:function(e,t){return Zr(),aa("div",{ref:"elRef",class:e.classes},[(Zr(),aa("svg",{ref:"svgElRef",xmlns:"http://www.w3.org/2000/svg",width:e.width,height:e.height,viewBox:"0 0 "+e.width+" "+e.height,preserveAspectRatio:"none"},[(Zr(!0),aa(Gr,null,Ca(e.chartData,(function(t,n){return Zr(),aa(Hr(e.ChartTag),{key:e.ChartTag+"-"+n,fill:e.lineChart?void 0:t.color,stroke:e.lineChart?t.color:void 0,"fill-rule":"evenodd",points:e.lineChart?void 0:t.points,d:e.lineChart?t.points:void 0},null,8,["fill","stroke","points","d"])})),128)),(Zr(!0),aa(Gr,null,Ca(e.verticalLines,(function(t,n){return Zr(),aa("line",{key:"line-"+n,"data-index":n,fill:"#000",x1:t,y1:0,x2:t,y2:e.height,class:e.classNames({"area-chart-current-line":e.currentIndex===n})},null,10,["data-index","x1","x2","y2"])})),128))],8,["width","height","viewBox"])),e.axis?(Zr(),aa("div",xy,[(Zr(!0),aa(Gr,null,Ca(e.axisLabels,(function(t,n){return Zr(),aa("span",{key:n},[e.visibleLegends.includes(t)?(Zr(),aa("span",ky,m(e.formatAxisLabelMethod(t)),1)):va("",!0)])})),128))])):va("",!0),e.legend?(Zr(),aa("div",Cy,[(Zr(!0),aa(Gr,null,Ca(e.datasets,(function(t,n){return Zr(),aa(Hr(e.LegendItemTag),{key:n,class:e.classNames("area-chart-legend-item",{"area-chart-legend-item-hidden":e.hiddenDatasets.includes(n),"area-chart-legend-button":e.toggleDatasets}),type:e.toggleDatasets?"button":void 0,onClick:function(t){return e.toggleDataset(n)}},{default:fn((function(){return[pa("span",{style:{backgroundColor:t.color}},null,4),ma(" "+m(e.formatLegendLabelMethod(t.label)),1)]})),_:2},1032,["class","type","onClick"])})),128))])):va("",!0),Sa(e.$slots,"default")],2)},props:{lineChart:Boolean,datasets:{type:Array,default:function(){return[]}},axis:Boolean,axisLabels:{type:Array,default:function(){return[]}},tooltip:Boolean,legend:Boolean,toggleDatasets:Boolean,width:{type:Number,default:640},height:{type:Number,default:320},maxAxisLabels:{type:Number,default:8},formatAxisLabel:Function,formatLegendLabel:Function,formatTooltip:Function,formatTooltipAxisLabel:Function,formatTooltipTotal:Function,formatTooltipDataset:Function},emits:["select"],setup:function(e,t){var n=t.emit,r=null,a=xt(null),s=xt([]),o=xt(null),i=xt(null),l=xt(null),u=qa((function(){if(!e.maxAxisLabels||e.axisLabels.length<=e.maxAxisLabels)return e.axisLabels;var t=Math.ceil(e.axisLabels.length/e.maxAxisLabels),n=e.axisLabels.filter((function(e,n){return n%t==0}));return n})),c=qa((function(){var t=[];return e.datasets.filter((function(e,t){return!s.value.includes(t)})).forEach((function(e){e.values.forEach((function(e,n){t[n]||(t[n]=0),t[n]+=e}))})),t})),p=qa((function(){var t=e.datasets,n=e.lineChart,r=e.width,a=e.height,o=[];if(!t.length)return o;var i=t[0].values.map((function(){return 0})),l=0;return n?t.forEach((function(e){var t=e.values,n=Math.max.apply(Math,t);n>l&&(l=n)})):l=Math.max.apply(Math,c.value),t.filter((function(e,t){return!s.value.includes(t)})).forEach((function(e){var t=e.label,s=e.values,u=e.color,c=s.map((function(e,t){i[t]+=e;var o=n?e:i[t],u=t/(s.length-1)*r,c=a-o/l*a;return n?(0===t?"M":"L")+u+","+c:u+" "+c}));n||c.push(r+" "+a+" 0 "+a),o.push({label:t,points:c.join(" "),color:u})})),o.reverse()})),d=qa((function(){var t=[];if(!e.datasets.length)return t;var n=e.datasets[0].values;return n.forEach((function(r,a){var s=a/(n.length-1)*e.width;t.push(s)})),t})),h=function(t){return e.formatAxisLabel?e.formatAxisLabel(t):t},f=function(){var e=i.value.querySelectorAll("line");l.value=[];for(var t=0;t<e.length;t+=1)l.value.push(e[t].getBoundingClientRect().left)},m=function(){var t=a.value;if(null===t)return"";var n=0,r=e.datasets.filter((function(e,t){return!s.value.includes(t)})).map((function(e){return{color:e.color,label:e.label,value:e.values[t]}}));if(r.forEach((function(e){n+=e.value})),e.formatTooltip)return e.formatTooltip({index:t,total:n,datasets:r});var o=e.formatTooltipAxisLabel?e.formatTooltipAxisLabel(e.axisLabels[t]):h(e.axisLabels[t]);o||(o="");var i=e.formatTooltipTotal?e.formatTooltipTotal(n):n,l=r.length>0?'\n      <ul class="area-chart-tooltip-list">\n        '+r.map((function(t){var n=t.label,r=t.color,a=t.value;return'\n              <li><span style="background-color: '+r+';"></span>'+(e.formatTooltipDataset?e.formatTooltipDataset(n,a,r):n+": "+a)+"</li>\n            "})).join("")+"\n      </ul>":"";return'\n      <div class="area-chart-tooltip-label">'+o+'</div>\n      <div class="area-chart-tooltip-total">'+i+"</div>\n      "+l+"\n    "},g=function(){f()},v=function(e){l.value||f();var t=e.pageX;void 0===t&&(t=0);var n=l.value.map((function(e){return Math.abs(t-e)})),r=Math.min.apply(Math,n),s=n.indexOf(r);a.value=s},b=function(){a.value=null};Sn((function(){return a.value}),(function(){n("select",a.value),function(){var t=e.tooltip,n=e.datasets,l=a.value;if(t){var u=n.filter((function(e,t){return!s.value.includes(t)})).length>0;u?null===l||r?r&&r.hide&&r.show&&(null!==l?(r.setText(m()),r.setTargetEl(i.value.querySelector('line[data-index="'+l+'"]')),r.show()):r.hide()):(r=Eb.tooltip.create({trigger:"manual",containerEl:o.value,targetEl:i.value.querySelector('line[data-index="'+l+'"]'),text:m(),cssClass:"area-chart-tooltip"}))&&r.show&&r.show():r&&r.hide&&r.hide()}}()})),Jn((function(){i.value&&(i.value.addEventListener("mouseenter",g),i.value.addEventListener("mousemove",v),i.value.addEventListener("mouseleave",b))})),er((function(){r&&r.destroy&&r.destroy(),r=null,i.value&&(i.value.removeEventListener("mouseenter",g),i.value.removeEventListener("mousemove",v),i.value.removeEventListener("mouseleave",b))}));var y=qa((function(){return Sb("area-chart")})),w=qa((function(){return e.toggleDatasets?"button":"span"})),x=qa((function(){return e.lineChart?"path":"polygon"}));return{currentIndex:a,hiddenDatasets:s,visibleLegends:u,chartData:p,verticalLines:d,elRef:o,svgElRef:i,classes:y,toggleDataset:function(t){e.toggleDatasets&&(s.value.includes(t)?s.value.splice(s.value.indexOf(t),1):s.value.push(t),s.value=[].concat(s.value))},formatAxisLabelMethod:h,formatLegendLabelMethod:function(t){return e.formatLegendLabel?e.formatLegendLabel(t):t},LegendItemTag:w,ChartTag:x,classNames:Sb}}},Ey=function(e,t){var n=null,r=t.tooltip,a=t.tooltipTrigger;Jn((function(){e.value&&r&&Db((function(){n=Eb.tooltip.create({targetEl:e.value,text:r,trigger:a})}))})),er((function(){n&&n.destroy&&(n.destroy(),n=null)})),Sn((function(){return t.tooltip}),(function(t){if(!t&&n)return n.destroy(),void(n=null);t&&!n&&Eb?n=Eb.tooltip.create({targetEl:e.value,text:t,trigger:a}):t&&n&&n.setText(t)}))};function Ty(){return Ty=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ty.apply(this,arguments)}var $y={name:"f7-badge",render:function(e,t){return Zr(),aa("span",{ref:"elRef",class:e.classes},[Sa(e.$slots,"default")],2)},props:Ty({tooltip:String,tooltipTrigger:String},Wb),setup:function(e){var t=xt(null);return Ey(t,e),{elRef:t,classes:qa((function(){return Sb("badge",Vb(e))}))}}};function Iy(){return Iy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Iy.apply(this,arguments)}var Ny={name:"f7-block-footer",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default")],2)},props:Iy({},Wb),setup:function(e){return{classes:qa((function(){return Sb("block-footer",Vb(e))}))}}};function Oy(){return Oy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oy.apply(this,arguments)}var Ay={name:"f7-block-header",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default")],2)},props:Oy({},Wb),setup:function(e){return{classes:qa((function(){return Sb("block-header",Vb(e))}))}}};function My(){return My=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},My.apply(this,arguments)}var _y={name:"f7-block-title",render:function(e,t){return Zr(),aa("div",{class:e.classes,medium:e.medium},[Sa(e.$slots,"default")],10,["medium"])},props:My({large:Boolean,medium:Boolean},Wb),setup:function(e){return{classes:qa((function(){return Sb("block-title",{"block-title-large":e.large,"block-title-medium":e.medium},Vb(e))}))}}},Ry=function(e,t){var n=function(n){e.value===n&&t("tab:show",n)},r=function(n){e.value===n&&t("tab:hide",n)};Jn((function(){e.value&&Db((function(){Eb.on("tabShow",n),Eb.on("tabHide",r)}))})),er((function(){Eb&&(Eb.off("tabShow",n),Eb.off("tabHide",r))}))};function Py(){return Py=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Py.apply(this,arguments)}var Dy={name:"f7-block",render:function(e,t){return Zr(),aa("div",{ref:"elRef",class:e.classes},[Sa(e.$slots,"default")],2)},props:Py({inset:Boolean,xsmallInset:Boolean,smallInset:Boolean,mediumInset:Boolean,largeInset:Boolean,xlargeInset:Boolean,strong:Boolean,tabs:Boolean,tab:Boolean,tabActive:Boolean,accordionList:Boolean,accordionOpposite:Boolean,noHairlines:Boolean,noHairlinesMd:Boolean,noHairlinesIos:Boolean,noHairlinesAurora:Boolean},Wb),emits:["tab:hide","tab:show"],setup:function(e,t){var n=t.emit,r=xt(null);return Ry(r,n),{elRef:r,classes:qa((function(){return Sb("block",{inset:e.inset,"xsmall-inset":e.xsmallInset,"small-inset":e.smallInset,"medium-inset":e.mediumInset,"large-inset":e.largeInset,"xlarge-inset":e.xlargeInset,"block-strong":e.strong,"accordion-list":e.accordionList,"accordion-opposite":e.accordionOpposite,tabs:e.tabs,tab:e.tab,"tab-active":e.tabActive,"no-hairlines":e.noHairlines,"no-hairlines-md":e.noHairlinesMd,"no-hairlines-ios":e.noHairlinesIos,"no-hairlines-aurora":e.noHairlinesAurora},Vb(e))}))}}},Ly=function(e){void 0===e&&(e={});var t=e,n=t.icon,r=t.iconMaterial,a=t.iconF7,s=t.iconMd,o=t.iconIos,i=t.iconAurora,l=t.iconColor,u=t.iconSize,c=t.iconBadge,p=t.badgeColor,d=t.iconBadgeColor;return n||r||a||s||o||i?{props:{material:r,f7:a,icon:n,md:s,ios:o,aurora:i,color:l,size:u},badge:c||0===c?{props:{color:p||d},content:c}:null}:null},By=function(e,t){var n=(void 0===t?{}:t).routeProps;Jn((function(){e.value&&n&&(e.value.f7RouteProps=n)})),Qn((function(){e.value&&n?e.value.f7RouteProps=n:e.value&&e.value.f7RouteProps&&delete e.value.f7RouteProps}))},Fy=function(){var e=xt(Eb?Ab:null);return Eb||Db((function(){e.value=Ab})),e};function zy(){return zy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zy.apply(this,arguments)}var Vy={key:0,class:"preloader-inner"},Wy=pa("svg",{viewBox:"0 0 36 36"},[pa("circle",{cx:"18",cy:"18",r:"16"})],-1),Hy={key:1,class:"preloader-inner"},jy=ga('<span class="preloader-inner-line"></span><span class="preloader-inner-line"></span><span class="preloader-inner-line"></span><span class="preloader-inner-line"></span><span class="preloader-inner-line"></span><span class="preloader-inner-line"></span><span class="preloader-inner-line"></span><span class="preloader-inner-line"></span>',8),Uy={key:2,class:"preloader-inner"},Gy=pa("span",{class:"preloader-inner-circle"},null,-1),qy={key:3,class:"preloader-inner"};var Xy={name:"f7-preloader",render:function(e,t){return Zr(),aa("div",{class:e.classes,style:e.style},[e.theme&&e.theme.md?(Zr(),aa("span",Vy,[Wy])):e.theme&&e.theme.ios?(Zr(),aa("span",Hy,[jy])):e.theme&&e.theme.aurora?(Zr(),aa("span",Uy,[Gy])):e.theme?va("",!0):(Zr(),aa("span",qy))],6)},props:zy({size:[Number,String]},Wb),setup:function(e){var t=Fy();return{classes:qa((function(){return Sb("preloader",Vb(e))})),style:qa((function(){var t={},n=e.size;return n&&"string"==typeof n&&n.indexOf("px")>=0&&(n=n.replace("px","")),n&&(t.width=n+"px",t.height=n+"px",t["--f7-preloader-size"]=n+"px"),t})),theme:t}}};function Ky(){return Ky=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ky.apply(this,arguments)}var Yy={name:"f7-icon",render:function(e,t){return Zr(),aa("i",{ref:"elRef",style:{fontSize:e.sizeComputed,width:e.sizeComputed,height:e.sizeComputed},class:e.classesComputed},[ma(m(e.iconText)+" ",1),Sa(e.$slots,"default")],6)},props:Ky({material:String,f7:String,icon:String,ios:String,aurora:String,md:String,tooltip:String,tooltipTrigger:String,size:[String,Number]},Wb),setup:function(e){var t=xt(null),n=Fy();Ey(t,e);var r=qa((function(){var t,r=e.ios,a=e.md,s=e.aurora,o=e.f7,i=e.material,l=e.icon,u={icon:!0};if(n.value&&n.value.ios?t=r:n.value&&n.value.md?t=a:n.value&&n.value.aurora&&(t=s),t){var c=t.split(":"),p=c[0],d=c[1];"material"!==p&&"f7"!==p||(u["material-icons"]="material"===p,u["f7-icons"]="f7"===p),"icon"===p&&(u[d]=!0)}else u={icon:!0,"material-icons":i,"f7-icons":o},l&&(u[l]=!0);return Sb(u,Vb(e))})),a=qa((function(){var t=e.size;return"number"!=typeof e.size&&parseFloat(e.size)!==1*e.size||(t=e.size+"px"),t}));return{elRef:t,sizeComputed:a,classesComputed:r,iconText:qa((function(){var t=e.ios,r=e.md,a=e.aurora,s=e.f7,o=e.material||s;return r&&n.value&&n.value.md&&(r.indexOf("material:")>=0||r.indexOf("f7:")>=0)?o=r.split(":")[1]:t&&n.value&&n.value.ios&&(t.indexOf("material:")>=0||t.indexOf("f7:")>=0)?o=t.split(":")[1]:a&&n.value&&n.value.aurora&&(a.indexOf("material:")>=0||a.indexOf("f7:")>=0)&&(o=a.split(":")[1]),o}))}}};var Jy={name:"f7-use-icon",render:function(e,t){var n=Vr("f7-badge"),r=Vr("f7-icon");return Zr(),aa(r,e.icon.props,{default:fn((function(){return[e.icon.badge?(Zr(),aa(n,xa({key:0},e.icon.badge.props),{default:fn((function(){return[ma(m(e.icon.badge.content),1)]})),_:1},16)):va("",!0)]})),_:1},16)},components:{f7Icon:Yy,f7Badge:$y},props:{icon:Object}};function Zy(){return Zy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zy.apply(this,arguments)}var Qy={key:1},ew={key:1};var tw={name:"f7-button",render:function(e,t){var n=Vr("f7-preloader"),r=Vr("f7-use-icon");return Zr(),aa(Hr(e.tag),xa({ref:"elRef",class:e.classesComputed},e.attrs),{default:fn((function(){return[e.preloader?(Zr(),aa(Gr,{key:0},[pa(n,{size:e.preloaderSize,color:e.preloaderColor},null,8,["size","color"]),pa("span",null,[e.icon?(Zr(),aa(r,{key:0,icon:e.icon},null,8,["icon"])):va("",!0),e.text?(Zr(),aa("span",Qy,m(e.text),1)):va("",!0),Sa(e.$slots,"default")])],64)):(Zr(),aa(Gr,{key:1},[e.icon?(Zr(),aa(r,{key:0,icon:e.icon},null,8,["icon"])):va("",!0),e.text?(Zr(),aa("span",ew,m(e.text),1)):va("",!0),Sa(e.$slots,"default")],64))]})),_:3},16,["class"])},components:{f7Preloader:Xy,f7UseIcon:Jy},props:Zy({text:String,tabLink:[Boolean,String],tabLinkActive:Boolean,type:String,href:{type:[String,Boolean],default:"#"},target:String,round:Boolean,roundMd:Boolean,roundIos:Boolean,roundAurora:Boolean,fill:Boolean,fillMd:Boolean,fillIos:Boolean,fillAurora:Boolean,large:Boolean,largeMd:Boolean,largeIos:Boolean,largeAurora:Boolean,small:Boolean,smallMd:Boolean,smallIos:Boolean,smallAurora:Boolean,raised:Boolean,raisedMd:Boolean,raisedIos:Boolean,raisedAurora:Boolean,outline:Boolean,outlineMd:Boolean,outlineIos:Boolean,outlineAurora:Boolean,active:Boolean,disabled:Boolean,tooltip:String,tooltipTrigger:String,preloader:Boolean,preloaderSize:[Number,String],preloaderColor:String,loading:Boolean},Hb,Wb,qb,jb),setup:function(e){var t=xt(null);Ey(t,e),By(t,e);var n=qa((function(){return Ly(e)})),r=qa((function(){return"submit"===e.type||"reset"===e.type||"button"===e.type?"button":"a"})),a=qa((function(){var t=e.href,n=e.tabLink,a=e.target,s=e.type,o=t;return!0===t&&(o="#"),!1!==t&&"button"!==r.value||(o=void 0),Cb({href:o,target:a,type:s,"data-tab":wb(n)&&n||void 0},Ub(e),Xb(e))})),s=qa((function(){var t=e.tabLink,n=e.tabLinkActive,r=e.round,a=e.roundMd,s=e.roundIos,o=e.roundAurora,i=e.fill,l=e.fillMd,u=e.fillIos,c=e.fillAurora,p=e.large,d=e.largeMd,h=e.largeIos,f=e.largeAurora,m=e.small,g=e.smallMd,v=e.smallIos,b=e.smallAurora,y=e.raised,w=e.raisedMd,x=e.raisedIos,k=e.raisedAurora,C=e.outline,S=e.outlineMd,E=e.outlineIos,T=e.outlineAurora,$=e.active,I=e.disabled;return Sb("button",{"tab-link":t||""===t,"tab-link-active":n,"button-round":r,"button-round-ios":s,"button-round-aurora":o,"button-round-md":a,"button-fill":i,"button-fill-ios":u,"button-fill-aurora":c,"button-fill-md":l,"button-large":p,"button-large-ios":h,"button-large-aurora":f,"button-large-md":d,"button-small":m,"button-small-ios":v,"button-small-aurora":b,"button-small-md":g,"button-raised":y,"button-raised-ios":x,"button-raised-aurora":k,"button-raised-md":w,"button-active":$,"button-outline":C,"button-outline-ios":E,"button-outline-aurora":T,"button-outline-md":S,"button-preloader":e.preloader,"button-loading":e.loading,disabled:I},Vb(e),Gb(e),Kb(e))}));return{tag:r,elRef:t,attrs:a,classesComputed:s,icon:n}}};function rw(){return rw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rw.apply(this,arguments)}var aw={name:"f7-card-content",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default")],2)},props:rw({padding:{type:Boolean,default:!0}},Wb),setup:function(e){return{classes:qa((function(){return Sb("card-content",{"card-content-padding":e.padding},Vb(e))}))}}};function sw(){return sw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sw.apply(this,arguments)}var ow={name:"f7-card-footer",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default")],2)},props:sw({},Wb),setup:function(e){return{classes:qa((function(){return Sb("card-footer",Vb(e))}))}}};function iw(){return iw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iw.apply(this,arguments)}var lw={name:"f7-card-header",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default")],2)},props:iw({},Wb),setup:function(e){return{classes:qa((function(){return Sb("card-header",Vb(e))}))}}};function uw(){return uw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uw.apply(this,arguments)}var cw={name:"f7-card",render:function(e,t){var n=Vr("f7-card-header"),r=Vr("f7-card-content"),a=Vr("f7-card-footer");return Zr(),aa("div",{ref:"elRef",class:e.classes,"data-animate":void 0===e.animate?e.animate:e.animate.toString(),"data-hide-navbar-on-open":void 0===e.hideNavbarOnOpen?e.hideNavbarOnOpen:e.hideNavbarOnOpen.toString(),"data-hide-toolbar-on-open":void 0===e.hideToolbarOnOpen?e.hideToolbarOnOpen:e.hideToolbarOnOpen.toString(),"data-hide-statusbar-on-open":void 0===e.hideStatusbarOnOpen?e.hideStatusbarOnOpen:e.hideStatusbarOnOpen.toString(),"data-scrollable-el":e.scrollableEl,"data-swipe-to-close":void 0===e.swipeToClose?e.swipeToClose:e.swipeToClose.toString(),"data-close-by-backdrop-click":void 0===e.closeByBackdropClick?e.closeByBackdropClick:e.closeByBackdropClick.toString(),"data-backdrop":void 0===e.backdrop?e.backdrop:e.backdrop.toString(),"data-backdrop-el":e.backdropEl},[e.hasHeader?(Zr(),aa(n,{key:0},{default:fn((function(){return[ma(m(e.title)+" ",1),Sa(e.$slots,"header")]})),_:3})):va("",!0),e.hasContent?(Zr(),aa(r,{key:1,padding:e.padding},{default:fn((function(){return[ma(m(e.content)+" ",1),Sa(e.$slots,"content")]})),_:3},8,["padding"])):va("",!0),e.hasFooter?(Zr(),aa(a,{key:2},{default:fn((function(){return[ma(m(e.footer)+" ",1),Sa(e.$slots,"footer")]})),_:3})):va("",!0),Sa(e.$slots,"default")],10,["data-animate","data-hide-navbar-on-open","data-hide-toolbar-on-open","data-hide-statusbar-on-open","data-scrollable-el","data-swipe-to-close","data-close-by-backdrop-click","data-backdrop","data-backdrop-el"])},components:{f7CardHeader:lw,f7CardContent:aw,f7CardFooter:ow},props:uw({title:[String,Number],content:[String,Number],footer:[String,Number],outline:Boolean,expandable:Boolean,expandableAnimateWidth:Boolean,expandableOpened:Boolean,animate:{type:Boolean,default:void 0},hideNavbarOnOpen:{type:Boolean,default:void 0},hideToolbarOnOpen:{type:Boolean,default:void 0},hideStatusbarOnOpen:{type:Boolean,default:void 0},scrollableEl:{type:String,default:void 0},swipeToClose:{type:Boolean,default:void 0},closeByBackdropClick:{type:Boolean,default:void 0},backdrop:{type:Boolean,default:void 0},backdropEl:{type:String,default:void 0},noShadow:Boolean,noBorder:Boolean,padding:{type:Boolean,default:!0}},Wb),emits:["card:beforeopen","card:open","card:opened","card:close","card:closed","update:expandableOpened"],setup:function(e,t){var n=t.emit,r=t.slots,a=xt(null),s=function(e,t){a.value===e&&n("card:beforeopen",e,t)},o=function(e){a.value===e&&(n("card:open",e),n("update:expandableOpened",!0))},i=function(e,t){a.value===e&&n("card:opened",e,t)},l=function(e){a.value===e&&n("card:close",e)},u=function(e,t){a.value===e&&(n("card:closed",e,t),n("update:expandableOpened",!1))};Jn((function(){e.expandable&&a.value&&Db((function(){e.expandable&&e.expandableOpened&&Eb.card.open(a.value,!1),Eb.on("cardBeforeOpen",s),Eb.on("cardOpen",o),Eb.on("cardOpened",i),Eb.on("cardClose",l),Eb.on("cardClosed",u)}))})),er((function(){Eb.off("cardBeforeOpen",s),Eb.off("cardOpen",o),Eb.off("cardOpened",i),Eb.off("cardClose",l),Eb.off("cardClosed",u)})),Sn((function(){return e.expandableOpened}),(function(e){e?a.value&&Eb.card.open(a.value):a.value&&Eb.card.close(a.value)}));var c=qa((function(){return e.title||r.header})),p=qa((function(){return e.content||r.content})),d=qa((function(){return e.footer||r.footer})),h=qa((function(){return Sb("card",{"card-outline":e.outline,"card-expandable":e.expandable,"card-expandable-animate-width":e.expandableAnimateWidth,"no-shadow":e.noShadow,"no-border":e.noBorder},Vb(e))}));return{elRef:a,classes:h,hasHeader:c,hasContent:p,hasFooter:d}}};function pw(){return pw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pw.apply(this,arguments)}var dw=pa("i",{class:"icon-checkbox"},null,-1);var hw={name:"f7-checkbox",render:function(e,t){return Zr(),aa("label",{class:e.classes},[pa("input",{ref:"inputElRef",type:"checkbox",name:e.name,value:e.value,disabled:e.disabled,readonly:e.readonly,checked:e.checked,onChange:t[1]||(t[1]=function(){return e.onChange&&e.onChange.apply(e,arguments)})},null,40,["name","value","disabled","readonly","checked"]),dw,Sa(e.$slots,"default")],2)},props:pw({checked:Boolean,indeterminate:Boolean,name:[Number,String],value:{type:[Number,String,Boolean],default:void 0},disabled:Boolean,readonly:Boolean},Wb),emits:["update:checked","change"],setup:function(e,t){var n=t.emit,r=xt(null);Jn((function(){r.value&&(r.value.indeterminate=!!e.indeterminate)})),Sn((function(){return e.indeterminate}),(function(e){r.value&&(r.value.indeterminate=!!e)}));var a=qa((function(){return Sb({checkbox:!0,disabled:e.disabled},Vb(e))}));return{inputElRef:r,classes:a,onChange:function(e){n("update:checked",e.target.checked),n("change",e)}}}};function fw(){return fw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fw.apply(this,arguments)}var mw={key:1,class:"chip-label"};var gw={name:"f7-chip",render:function(e,t){var n=Vr("f7-use-icon");return Zr(),aa("div",{ref:"elRef",class:e.classes},[e.hasMedia?(Zr(),aa("div",{key:0,class:e.mediaClasses},[e.icon?(Zr(),aa(n,{key:0,icon:e.icon},null,8,["icon"])):va("",!0),ma(" "+m(e.media)+" ",1),Sa(e.$slots,"media")],2)):va("",!0),e.hasLabel?(Zr(),aa("div",mw,[ma(m(e.text)+" ",1),Sa(e.$slots,"text"),Sa(e.$slots,"default")])):va("",!0),e.deleteable?(Zr(),aa("a",{key:2,class:"chip-delete",onClick:t[1]||(t[1]=function(){return e.onDeleteClick&&e.onDeleteClick.apply(e,arguments)})})):va("",!0)],2)},components:{f7UseIcon:Jy},props:fw({media:String,text:[String,Number],deleteable:Boolean,mediaBgColor:String,mediaTextColor:String,outline:Boolean,tooltip:String,tooltipTrigger:String},Hb,Wb),emits:["delete"],setup:function(e,t){var n=t.slots,r=t.emit,a=xt(null);Ey(a,e);var s=qa((function(){return Ly(e)})),o=qa((function(){return Sb("chip-media",e.mediaTextColor&&"text-color-"+e.mediaTextColor,e.mediaBgColor&&"bg-color-"+e.mediaBgColor)})),i=qa((function(){return Sb("chip",{"chip-outline":e.outline},Vb(e))})),l=qa((function(){return e.text||n&&(n.text||n.default)})),u=qa((function(){return e.media||s.value||n&&n.media}));return{classes:i,icon:s,mediaClasses:o,elRef:a,hasLabel:l,hasMedia:u,onDeleteClick:function(e){r("delete",e)}}}};function vw(){return vw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vw.apply(this,arguments)}var bw={key:0,class:"resize-handler"};var yw={name:"f7-col",render:function(e,t){return Zr(),aa(Hr(e.tag),{ref:"elRef",class:e.classes},{default:fn((function(){return[Sa(e.$slots,"default"),e.resizable&&e.resizableHandler?(Zr(),aa("span",bw)):va("",!0)]})),_:3},8,["class"])},props:vw({tag:{type:String,default:"div"},width:{type:[Number,String],default:"auto"},xsmall:{type:[Number,String]},small:{type:[Number,String]},medium:{type:[Number,String]},large:{type:[Number,String]},xlarge:{type:[Number,String]},resizable:Boolean,resizableFixed:Boolean,resizableAbsolute:Boolean,resizableHandler:{type:Boolean,default:!0}},Wb),emits:["grid:resize"],setup:function(e,t){var n=t.emit,r=xt(null),a=function(e){e===r.value&&n("grid:resize")};return Jn((function(){Db((function(){Eb.on("gridResize",a)}))})),er((function(){Eb.off("gridResize",a)})),{classes:qa((function(){var t;return Sb(((t={col:"auto"===e.width})["col-"+e.width]="auto"!==e.width,t["xsmall-"+e.xsmall]=e.xsmall,t["small-"+e.small]=e.small,t["medium-"+e.medium]=e.medium,t["large-"+e.large]=e.large,t["xlarge-"+e.xlarge]=e.xlarge,t.resizable=e.resizable,t["resizable-fixed"]=e.resizableFixed,t["resizable-absolute"]=e.resizableAbsolute,t),Vb(e))})),elRef:r}}};function ww(){return ww=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ww.apply(this,arguments)}var xw={name:"f7-fab-backdrop",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default")],2)},props:ww({},Wb),setup:function(e){return{classes:qa((function(){return Sb("fab-backdrop",Vb(e))}))}}};function kw(){return kw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kw.apply(this,arguments)}var Cw={key:0,class:"fab-label"};var Sw={name:"f7-fab-button",render:function(e,t){return Zr(),aa("a",{ref:"elRef",class:e.classes,target:e.target,onClick:t[1]||(t[1]=function(){return e.onClick&&e.onClick.apply(e,arguments)})},[Sa(e.$slots,"default"),e.label?(Zr(),aa("span",Cw,m(e.label),1)):va("",!0)],10,["target"])},props:kw({fabClose:Boolean,label:String,target:String,tooltip:String,tooltipTrigger:String},Wb),emits:["click"],setup:function(e,t){var n=t.emit,r=xt(null);return Ey(r,e),{classes:qa((function(){return Sb({"fab-close":e.fabClose,"fab-label-button":e.label},Vb(e))})),onClick:function(e){n("click",e)},elRef:r}}};function Ew(){return Ew=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ew.apply(this,arguments)}var Tw={name:"f7-fab-buttons",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default")],2)},props:Ew({position:{type:String,default:"top"}},Wb),setup:function(e){return{classes:qa((function(){return Sb("fab-buttons","fab-buttons-"+e.position,Vb(e))}))}}};function $w(){return $w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$w.apply(this,arguments)}var Iw={name:"f7-fab",props:$w({morphTo:String,href:[Boolean,String],target:String,text:String,position:{type:String,default:"right-bottom"},tooltip:String,tooltipTrigger:String},Wb),emits:["click"],setup:function(e,t){var n=t.emit,r=t.slots,a=xt(null),s=function(e){n("click",e)};Ey(a,e);var o=qa((function(){var t=e.href;return!0===t&&(t="#"),!1===t&&(t=void 0),t}));return function(){var t,n,i=[],l=[],u=r.link,c=r.default,p=r.root,d=r.text;return c&&c().forEach((function(e){if(void 0!==e){var t=e.type&&e.type.name?e.type.name:e.type;"FabButtons"===t||"f7-fab-buttons"===t?l.push(e):i.push(e)}})),(e.text||d)&&(t=Xa("div",{class:"fab-text"},[e.text,d&&d()])),(i.length||u||t)&&(n=Xa("a",{target:e.target,href:o.value,onClick:s},[i,t,u&&u()])),Xa("div",{class:Sb("fab","fab-"+e.position,{"fab-morph":e.morphTo,"fab-extended":void 0!==t},Vb(e)),"data-morph-to":e.morphTo,ref:a},[n,l,p&&p()])}}},Nw={class:"gauge"};var Ow={name:"f7-gauge",render:function(e,t){return Zr(),aa("div",Nw,[(Zr(),aa("svg",{class:"gauge-svg",width:e.size+"px",height:(e.semiCircle?e.size/2:e.size)+"px",viewBox:"0 0 "+e.size+" "+(e.semiCircle?e.size/2:e.size)},[e.semiCircle?(Zr(),aa("path",{key:0,class:"gauge-back-semi",d:"M"+(e.size-e.borderWidth/2)+","+e.size/2+" a1,1 0 0,0 -"+(e.size-e.borderWidth)+",0",stroke:e.borderBgColor,"stroke-width":e.borderWidth,fill:e.bgColor||"none"},null,8,["d","stroke","stroke-width","fill"])):va("",!0),e.semiCircle?(Zr(),aa("path",{key:1,class:"gauge-front-semi",d:"M"+(e.size-e.borderWidth/2)+","+e.size/2+" a1,1 0 0,0 -"+(e.size-e.borderWidth)+",0",stroke:e.borderColor,"stroke-width":e.borderWidth,"stroke-dasharray":e.length/2,"stroke-dashoffset":e.length/2*(1+e.progress),fill:e.borderBgColor?"none":e.bgColor||"none"},null,8,["d","stroke","stroke-width","stroke-dasharray","stroke-dashoffset","fill"])):va("",!0),!e.semiCircle&&e.borderBgColor?(Zr(),aa("circle",{key:2,class:"gauge-back-circle",stroke:e.borderBgColor,"stroke-width":e.borderWidth,fill:e.bgColor||"none",cx:e.size/2,cy:e.size/2,r:e.radius},null,8,["stroke","stroke-width","fill","cx","cy","r"])):va("",!0),e.semiCircle?va("",!0):(Zr(),aa("circle",{key:3,class:"gauge-front-circle",transform:"rotate(-90 "+e.size/2+" "+e.size/2+")",stroke:e.borderColor,"stroke-width":e.borderWidth,"stroke-dasharray":e.length,"stroke-dashoffset":e.length*(1-e.progress),fill:e.borderBgColor?"none":e.bgColor||"none",cx:e.size/2,cy:e.size/2,r:e.radius},null,8,["transform","stroke","stroke-width","stroke-dasharray","stroke-dashoffset","fill","cx","cy","r"])),e.valueText?(Zr(),aa("text",{key:4,class:"gauge-value-text",x:"50%",y:e.semiCircle?"100%":"50%","font-weight":e.valueFontWeight,"font-size":e.valueFontSize,fill:e.valueTextColor,dy:e.semiCircle?e.labelText?-e.labelFontSize-15:-5:0,"text-anchor":"middle","dominant-baseline":e.semiCircle?null:"middle"},m(e.valueText),9,["y","font-weight","font-size","fill","dy","dominant-baseline"])):va("",!0),e.labelText?(Zr(),aa("text",{key:5,class:"gauge-label-text",x:"50%",y:e.semiCircle?"100%":"50%","font-weight":e.labelFontWeight,"font-size":e.labelFontSize,fill:e.labelTextColor,dy:e.semiCircle?-5:e.valueText?e.valueFontSize/2+10:0,"text-anchor":"middle","dominant-baseline":e.semiCircle?null:"middle"},m(e.labelText),9,["y","font-weight","font-size","fill","dy","dominant-baseline"])):va("",!0)],8,["width","height","viewBox"]))])},props:{type:{type:String,default:"circle"},value:{type:[Number,String],default:0},size:{type:[Number,String],default:200},bgColor:{type:String,default:"transparent"},borderBgColor:{type:String,default:"#eeeeee"},borderColor:{type:String,default:"#000000"},borderWidth:{type:[Number,String],default:10},valueText:[Number,String],valueTextColor:{type:String,default:"#000000"},valueFontSize:{type:[Number,String],default:31},valueFontWeight:{type:[Number,String],default:500},labelText:String,labelTextColor:{type:String,default:"#888888"},labelFontSize:{type:[Number,String],default:14},labelFontWeight:{type:[Number,String],default:400}},setup:function(e){var t=qa((function(){return"semicircle"===e.type})),n=qa((function(){return e.size/2-e.borderWidth/2})),r=qa((function(){return 2*Math.PI*n.value})),a=qa((function(){return Math.max(Math.min(e.value,1),0)}));return{semiCircle:t,radius:n,length:r,progress:a}}};function Aw(){return Aw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Aw.apply(this,arguments)}var Mw=pa("span",{class:"toggle-icon"},null,-1);var _w={name:"f7-toggle",render:function(e,t){return Zr(),aa("label",{ref:"elRef",class:e.classes},[pa("input",{type:"checkbox",name:e.name,disabled:e.disabled,readonly:e.readonly,checked:e.checked,value:e.value,onChange:t[1]||(t[1]=function(){return e.onChange&&e.onChange.apply(e,arguments)})},null,40,["name","disabled","readonly","checked","value"]),Mw],2)},props:Aw({init:{type:Boolean,default:!0},checked:Boolean,disabled:Boolean,readonly:Boolean,name:String,value:[String,Number,Array],tooltip:String,tooltipTrigger:String},Wb),emits:["change","toggle:change","update:checked"],setup:function(e,t){var n=t.emit,r=null,a=xt(null);Ey(a,e);return Sn((function(){return e.checked}),(function(e){r&&(r.checked=e)})),Jn((function(){Db((function(){e.init&&a.value&&(r=Eb.toggle.create({el:a.value,on:{change:function(e){n("toggle:change",e.checked),n("update:checked",e.checked)}}}))}))})),er((function(){r&&r.destroy&&r.$el&&r.destroy(),r=null})),{classes:qa((function(){return Sb("toggle",{disabled:e.disabled},Vb(e))})),elRef:a,f7Toggle:r,onChange:function(e){n("change",e)}}}};function Rw(){return Rw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rw.apply(this,arguments)}var Pw={name:"f7-range",render:function(e,t){return Zr(),aa("div",{ref:"elRef",class:e.classes},[e.input?(Zr(),aa("input",{key:0,id:"inputId",type:"range",name:e.name},null,8,["name"])):va("",!0),Sa(e.$slots,"default")],2)},props:Rw({init:{type:Boolean,default:!0},value:{type:[Number,Array,String],default:0},min:{type:[Number,String],default:0},max:{type:[Number,String],default:100},step:{type:[Number,String],default:1},label:{type:Boolean,default:!1},dual:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},verticalReversed:{type:Boolean,default:!1},draggableBar:{type:Boolean,default:!0},formatLabel:Function,scale:{type:Boolean,default:!1},scaleSteps:{type:Number,default:5},scaleSubSteps:{type:Number,default:0},formatScaleLabel:Function,limitKnobPosition:{type:Boolean,default:void 0},name:String,input:Boolean,inputId:String,disabled:Boolean},Wb),emits:["range:change","range:changed","rangeChange","rangeChanged","update:value"],setup:function(e,t){var n=t.emit,r=null,a=xt(null);Sn((function(){return e.value}),(function(e){if(r){var t=r.value;Array.isArray(e)&&Array.isArray(t)&&t[0]===e[0]&&t[1]===e[1]||r.setValue(e)}})),Jn((function(){Db((function(){e.init&&a.value&&(r=Eb.range.create(yb(Rw({el:a.value},e,{on:{change:function(e,t){n("range:change",t),n("rangeChange",t)},changed:function(e,t){n("range:changed",t),n("rangeChanged",t),n("update:value",t)}}}))))}))})),er((function(){r&&r.destroy&&r.destroy(),r=null}));var s=qa((function(){return Sb("range-slider",{"range-slider-horizontal":!e.vertical,"range-slider-vertical":e.vertical,"range-slider-vertical-reversed":e.vertical&&e.verticalReversed,disabled:e.disabled},Vb(e))}));return{elRef:a,classes:s}}};function Dw(){return Dw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dw.apply(this,arguments)}var Lw={class:"text-editor-content",contenteditable:""};var Bw={name:"f7-text-editor",render:function(e,t){return Zr(),aa("div",{ref:"elRef",class:e.classes},[Sa(e.$slots,"root-start"),pa("div",Lw,[Sa(e.$slots,"default")]),Sa(e.$slots,"root-end"),Sa(e.$slots,"root")],2)},props:Dw({mode:{type:String,default:void 0},value:{type:String,default:void 0},buttons:Array,customButtons:Object,dividers:{type:Boolean,default:void 0},imageUrlText:{type:String,default:void 0},linkUrlText:{type:String,default:void 0},placeholder:{type:String,default:void 0},clearFormattingOnPaste:{type:Boolean,default:void 0},resizable:{type:Boolean,default:!1}},Wb),emits:["texteditor:change","texteditor:input","texteditor:focus","texteditor:blur","texteditor:buttonclick","texteditor:keyboardopen","texteditor:keyboardclose","texteditor:popoveropen","texteditor:popoverclose","texteditor:insertlink","texteditor:insertimage","texteditorChange","texteditorInput","texteditorFocus","texteditorBlur"],setup:function(e,t){var n=t.emit,r=null,a=xt(null),s=function(e,t){n("texteditor:change",t),n("texteditorChange",t)},o=function(e,t){n("texteditor:input",t),n("texteditorInput",t)},i=function(){n("texteditor:focus"),n("texteditorFocus")},l=function(){n("texteditor:blur"),n("texteditorBlur")},u=function(e,t){n("texteditor:buttonclick",t)},c=function(){n("texteditor:keyboardopen")},p=function(){n("texteditor:keyboardclose")},d=function(){n("texteditor:popoveropen")},h=function(){n("texteditor:popoverclose")},f=function(e,t){n("texteditor:insertlink",t)},m=function(e,t){n("texteditor:insertimage",t)};Sn((function(){return e.value}),(function(e){r&&r.setValue(e)})),Jn((function(){var t=yb({el:a.value,mode:e.mode,value:e.value,buttons:e.buttons,customButtons:e.customButtons,dividers:e.dividers,imageUrlText:e.imageUrlText,linkUrlText:e.linkUrlText,placeholder:e.placeholder,clearFormattingOnPaste:e.clearFormattingOnPaste,on:{change:s,input:o,focus:i,blur:l,buttonClick:u,keyboardOpen:c,keyboardClose:p,popoverOpen:d,popoverClose:h,insertLink:f,insertImage:m}});Db((function(){r=Eb.textEditor.create(t)}))})),er((function(){r&&r.destroy&&r.destroy(),r=null}));var g=qa((function(){return Sb("text-editor",e.resizable&&"text-editor-resizable",Vb(e))}));return{elRef:a,classes:g}}};function Fw(){return Fw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fw.apply(this,arguments)}var zw={name:"f7-input",props:Fw({type:String,name:String,value:{type:[String,Number,Array,Date,Object],default:void 0},inputmode:String,placeholder:String,inputId:[String,Number],size:[String,Number],accept:[String,Number],autocomplete:[String],autocorrect:[String],autocapitalize:[String],spellcheck:[String],autofocus:Boolean,autosave:String,checked:Boolean,disabled:Boolean,max:[String,Number],min:[String,Number],step:[String,Number],maxlength:[String,Number],minlength:[String,Number],multiple:Boolean,readonly:Boolean,required:Boolean,inputStyle:[String,Object],pattern:String,validate:[Boolean,String],validateOnBlur:Boolean,onValidate:Function,tabindex:[String,Number],resizable:Boolean,clearButton:Boolean,noFormStoreData:Boolean,noStoreData:Boolean,ignoreStoreData:Boolean,errorMessage:String,errorMessageForce:Boolean,info:String,outline:Boolean,wrap:{type:Boolean,default:!0},dropdown:{type:[String,Boolean],default:"auto"},calendarParams:Object,colorPickerParams:Object,textEditorParams:Object},Wb),emits:["input","focus","blur","change","textarea:resize","input:notempty","input:empty","input:clear","texteditor:change","calendar:change","colorpicker:change","update:value"],setup:function(e,t){var n=t.emit,r=t.slots,a=null,s=null,o=xt(!1),i=xt(!1),l=xt(null),u=xt(null),c=!1,p=xt(function(){if(u.value)return u.value.value}()),d=qa((function(){return("datepicker"!==e.type||!Array.isArray(e.value)||0!==e.value.length)&&(void 0===e.value?p.value||0===p.value:e.value||0===e.value)})),h=function(){if(Eb&&u.value){var t=u.value.validity;t&&(t.valid?(e.onValidate&&e.onValidate(!0),!1!==o.value&&(o.value=!1)):(e.onValidate&&e.onValidate(!1),!0!==o.value&&(o.value=!0)))}},f=function(e){n("textarea:resize",e)},m=function(e){n("input:notempty",e)},g=function(e){n("input:empty",e)},v=function(e){n("input:clear",e)},b=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];n.apply(void 0,["input"].concat(r)),u.value&&(p.value=u.value.value),e.validateOnBlur||""===e.validateOnBlur||!e.validate&&""!==e.validate||!u.value||h(),u.value&&"texteditor"!==e.type&&"colorpicker"!==e.type&&"datepicker"!==e.type&&n("update:value",u.value.value)},y=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.apply(void 0,["focus"].concat(t)),i.value=!0},w=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];n.apply(void 0,["blur"].concat(r)),(e.validate||""===e.validate||e.validateOnBlur||""===e.validateOnBlur)&&u.value&&h(),i.value=!1},x=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];n.apply(void 0,["change"].concat(r)),"texteditor"===e.type&&(n("texteditor:change",r[1]),n("update:value",r[1]))};Jn((function(){var t=e.type,r=e.resizable,o=e.clearButton,i=e.value,l=e.calendarParams,c=e.colorPickerParams,p=e.validate,d=e.validateOnBlur;Db((function(){"range"!==t&&"toggle"!==t&&u.value&&(u.value.addEventListener("input:notempty",m,!1),"textarea"===t&&r&&u.value.addEventListener("textarea:resize",f,!1),o&&(u.value.addEventListener("input:empty",g,!1),u.value.addEventListener("input:clear",v,!1)),"datepicker"===t&&(a=Eb.calendar.create(Fw({inputEl:u.value,value:i,on:{change:function(e,t){n("calendar:change",t),n("update:value",t)}}},l||{}))),"colorpicker"===t&&(s=Eb.colorPicker.create(Fw({inputEl:u.value,value:i,on:{change:function(e,t){n("colorpicker:change",t),n("update:value",t)}}},c||{}))),Eb.input.checkEmptyState(u.value),d||""===d||!p&&""!==p||null==i||""===i||setTimeout((function(){h()}),0),r&&Eb.input.resizeTextarea(u.value))}))})),er((function(){"range"!==e.type&&"toggle"!==e.type&&u.value&&(u.value.removeEventListener("input:notempty",m,!1),"textarea"===e.type&&e.resizable&&u.value.removeEventListener("textarea:resize",f,!1),e.clearButton&&(u.value.removeEventListener("input:empty",g,!1),u.value.removeEventListener("input:clear",v,!1)),a&&a.destroy&&(a.destroy(),a=null),s&&s.destroy&&(s.destroy(),s=null))})),Qn((function(){if(Eb&&c){if(!u.value)return;c=!1,Eb.input.checkEmptyState(u.value),e.validate&&!e.validateOnBlur&&h(),e.resizable&&Eb.input.resizeTextarea(u.value)}})),Sn((function(){return e.colorPickerParams}),(function(e){Eb&&s&&Cb(s.params,e||{})})),Sn((function(){return e.calendarParams}),(function(e){Eb&&a&&Cb(a.params,e||{})})),Sn((function(){return e.value}),(function(t){"range"!==e.type&&"toggle"!==e.type&&Eb&&(c=!0,a&&a.setValue(t),s&&s.setValue(t))}));var k=function(t,n){var r="file"!==e.type&&"datepicker"!==e.type&&"colorpicker"!==e.type,a="input"===t,s=e.type;"datepicker"!==s&&"colorpicker"!==s||(s="text");var l,c=Sb({resizable:"textarea"===s&&e.resizable,"no-store-data":e.noFormStoreData||e.noStoreData||e.ignoreStoreData,"input-invalid":e.errorMessage&&e.errorMessageForce||o.value,"input-with-value":d.value,"input-focused":i.value});r&&(l=void 0!==e.value?e.value:p.value);var h={};"datepicker"!==e.type&&"colorpicker"!==e.type&&"value"in e&&(h.value=l);var f=yb({name:e.name,type:a?s:void 0,placeholder:e.placeholder,inputmode:e.inputmode,id:e.inputId,size:e.size,accept:e.accept,autocomplete:e.autocomplete,autoCorrect:e.autocorrect,autocapitalize:e.autocapitalize,spellcheck:e.spellcheck,autofocus:e.autofocus,autoSave:e.autosave,checked:e.checked,disabled:e.disabled,max:e.max,maxlength:e.maxlength,min:e.min,minlength:e.minlength,step:e.step,multiple:e.multiple,readonly:e.readonly,required:e.required,pattern:e.pattern,validate:"string"==typeof e.validate&&e.validate.length?e.validate:void 0,tabindex:e.tabindex});return Xa(t,Fw({ref:u,style:e.inputStyle},f,{"data-validate":!0===e.validate||""===e.validate||!0===e.validateOnBlur||""===e.validateOnBlur||void 0,"data-validate-on-blur":!0===e.validateOnBlur||""===e.validateOnBlur||void 0,"data-error-message":e.errorMessageForce?void 0:e.errorMessage,class:c,onFocus:y,onBlur:w,onInput:b,onChange:x},h),[n])},C=qa((function(){return Sb("input",{"input-outline":e.outline,"input-dropdown":"auto"===e.dropdown?"select"===e.type:e.dropdown,"input-invalid":e.errorMessage&&e.errorMessageForce||o.value},Vb(e))}));return function(){var t;return t="select"===e.type||"textarea"===e.type||"file"===e.type?"select"===e.type?k("select",r.default&&r.default()):"file"===e.type?k("input"):k("textarea"):r.default||!e.type?r.default():"toggle"===e.type?Xa(_w,{checked:e.checked,readonly:e.readonly,name:e.name,value:e.value,disabled:e.disabled,id:e.inputId,onChange:x}):"range"===e.type?Xa(Pw,{value:e.value,disabled:e.disabled,min:e.min,max:e.max,step:e.step,name:e.name,id:e.inputId,input:!0,onRangeChange:x}):"texteditor"===e.type?Xa(Bw,Fw({value:e.value,resizable:e.resizable,placeholder:e.placeholder,onTextEditorFocus:y,onTextEditorBlur:w,onTextEditorInput:b,onTextEditorChange:x},e.textEditorParams||{})):k("input"),e.wrap?Xa("div",{class:C.value,ref:l},[t,(e.errorMessage||r["error-message"])&&e.errorMessageForce&&Xa("div",{class:"input-error-message"},[e.errorMessage,r["error-message"]&&r["error-message"]()]),e.clearButton&&Xa("span",{class:"input-clear-button"}),(e.info||r.info)&&Xa("div",{class:"input-info"},[e.info,r.info&&r.info()])]):t}}},Vw=function(e,t,n){var r;Jn((function(){Db((function(){if(e.smartSelect){var a=Cb({el:n()},e.smartSelectParams||{});r=Eb.smartSelect.create(a),t(r)}}))})),er((function(){r&&r.destroy&&r.destroy(),t(r=null)}))};function Ww(){return Ww=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ww.apply(this,arguments)}var Hw={name:"f7-link",render:function(e,t){var n=Vr("f7-use-icon"),r=Vr("f7-badge");return Zr(),aa("a",xa({ref:"elRef",class:e.classes},e.attrs),[e.icon?(Zr(),aa(n,{key:0,icon:e.icon},null,8,["icon"])):va("",!0),e.text?(Zr(),aa("span",{key:1,class:e.isTabbarLabel?"tabbar-label":""},[ma(m(e.text)+" ",1),e.badge?(Zr(),aa(r,{key:0,color:e.badgeColor},{default:fn((function(){return[ma(m(e.badge),1)]})),_:1},8,["color"])):va("",!0)],2)):va("",!0),Sa(e.$slots,"default")],16)},components:{f7Badge:$y,f7UseIcon:Jy},props:Ww({noLinkClass:Boolean,text:String,tabLink:[Boolean,String],tabLinkActive:Boolean,tabbarLabel:Boolean,iconOnly:Boolean,badge:[String,Number],badgeColor:[String],href:{type:[String,Boolean],default:"#"},target:String,tooltip:String,tooltipTrigger:String,smartSelect:Boolean,smartSelectParams:Object},Hb,Wb,qb,jb),setup:function(e,t){var n=t.slots,r=xt(null),a=null;Ey(r,e),By(r,e),Vw(e,(function(e){a=e}),(function(){return r.value}));var s=kn("TabbarContext",{value:{}}),o=qa((function(){return e.tabbarLabel||s.value.tabbarHasLabels})),i=qa((function(){var t=e.href,n=e.tabLink,r=t;return!0===t&&(r="#"),!1===t&&(r=void 0),Ww({href:r,target:e.target,"data-tab":wb(n)&&n||void 0},Ub(e),Xb(e))})),l=qa((function(){var t,r=e.iconOnly,a=e.text,s=e.noLinkClass,i=e.tabLink,l=e.tabLinkActive,u=e.smartSelect,c=n&&n.default;return t=!(!r&&(a||c)),Sb({link:!(s||o.value),"icon-only":t,"tab-link":i||""===i,"tab-link-active":l,"smart-select":u},Vb(e),Gb(e),Kb(e))})),u=qa((function(){return Ly(e)}));return{elRef:r,icon:u,isTabbarLabel:o,attrs:i,classes:l,f7SmartSelect:a}}};function jw(){return jw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jw.apply(this,arguments)}var Uw={name:"f7-list-button",render:function(e,t){return Zr(),aa("li",null,[pa("a",xa({ref:"linkElRef",class:e.linkClasses},e.linkAttrs,{onClick:t[1]||(t[1]=function(){return e.onClick&&e.onClick.apply(e,arguments)})}),[ma(m(e.title)+" "+m(e.text)+" ",1),Sa(e.$slots,"default")],16)])},props:jw({title:[String,Number],text:[String,Number],tabLink:[Boolean,String],tabLinkActive:Boolean,link:[Boolean,String],href:[Boolean,String],target:String,tooltip:String,tooltipTrigger:String},Wb,qb,jb),emits:["click"],setup:function(e,t){var n=t.emit,r=xt(null);return Ey(r,e),By(r,e),{linkAttrs:qa((function(){return jw({href:"boolean"==typeof e.link&&"boolean"==typeof e.href?"#":e.link||e.href,target:e.target,"data-tab":wb(e.tabLink)&&e.tabLink},Ub(e),Xb(e))})),linkClasses:qa((function(){return Sb(jw({"list-button":!0,"tab-link":e.tabLink||""===e.tabLink,"tab-link-active":e.tabLinkActive},Vb(e),Gb(e),Kb(e)))})),onClick:function(e){n("click",e)},linkElRef:r}}};function Gw(){return Gw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gw.apply(this,arguments)}var qw={name:"f7-list-group",render:function(e,t){return Zr(),aa("div",{class:e.classes,"data-sortable-move-elements":void 0!==e.sortableMoveElements?e.sortableMoveElements.toString():void 0},[pa("ul",null,[Sa(e.$slots,"default")])],10,["data-sortable-move-elements"])},props:Gw({mediaList:Boolean,simpleList:Boolean,sortable:Boolean,sortableOpposite:Boolean,sortableTapHold:Boolean,sortableMoveElements:{type:Boolean,default:void 0}},Wb),setup:function(e){var t=kn("ListContext",{value:{listIsMedia:e.mediaList,listIsSimple:e.simpleList,listIsSortable:e.sortable,listIsSortableOpposite:e.sortableOpposite}});return xn("ListContext",qa((function(){return{listIsMedia:e.mediaList||t.value.listIsMedia,listIsSimple:e.simpleList||t.value.listIsSimple,listIsSortable:e.sortable||t.value.listIsSortable,listIsSortableOpposite:e.sortableOpposite||t.value.listIsSortableOpposite}}))),{classes:qa((function(){return Sb("list-group",{"media-list":e.mediaList,sortable:e.sortable,"sortable-tap-hold":e.sortableTapHold,"sortable-opposite":e.sortableOpposite},Vb(e))}))}}};function Xw(){return Xw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xw.apply(this,arguments)}var Kw={name:"f7-list-index",render:function(e,t){return Zr(),aa("div",{ref:"elRef",class:e.classes},[Sa(e.$slots,"default")],2)},props:Xw({init:{type:Boolean,default:!0},listEl:[String,Object],indexes:{type:[String,Array],default:"auto"},scrollList:{type:Boolean,default:!0},label:{type:Boolean,default:!1},iosItemHeight:{type:Number,default:14},mdItemHeight:{type:Number,default:14},auroraItemHeight:{type:Number,default:14}},Wb),emits:["listindex:select"],setup:function(e,t){var n=t.emit,r=null,a=xt(null),s=function(){r&&r.update()};Sn((function(){return e.indexes}),(function(e){r&&(r.params.indexes=e,s())})),Jn((function(){e.init&&Db((function(){r=Eb.listIndex.create({el:a.value,listEl:e.listEl,indexes:e.indexes,iosItemHeight:e.iosItemHeight,mdItemHeight:e.mdItemHeight,auroraItemHeight:e.auroraItemHeight,scrollList:e.scrollList,label:e.label,on:{select:function(e,t,r){n("listindex:select",t,r)}}})}))})),er((function(){r&&r.destroy&&r.destroy(),r=null}));var o=qa((function(){return Sb("list-index",Vb(e))}));return{elRef:a,classes:o,update:s,scrollListToIndex:function(e){r&&r.scrollListToIndex(e)}}}};function Yw(){return Yw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yw.apply(this,arguments)}var Jw={name:"f7-list-input",props:Yw({sortable:{type:Boolean,default:void 0},media:String,dropdown:{type:[String,Boolean],default:"auto"},wrap:{type:Boolean,default:!0},input:{type:Boolean,default:!0},type:{type:String,default:"text"},name:String,value:{type:[String,Number,Array,Date,Object],default:void 0},inputmode:String,readonly:Boolean,required:Boolean,disabled:Boolean,placeholder:String,inputId:[String,Number],size:[String,Number],accept:[String,Number],autocomplete:[String],autocorrect:[String],autocapitalize:[String],spellcheck:[String],autofocus:Boolean,autosave:String,max:[String,Number],min:[String,Number],step:[String,Number],maxlength:[String,Number],minlength:[String,Number],multiple:Boolean,inputStyle:[String,Object],pattern:String,validate:[Boolean,String],validateOnBlur:Boolean,onValidate:Function,tabindex:[String,Number],resizable:Boolean,clearButton:Boolean,noFormStoreData:Boolean,noStoreData:Boolean,ignoreStoreData:Boolean,errorMessage:String,errorMessageForce:Boolean,info:String,outline:Boolean,label:[String,Number],inlineLabel:Boolean,floatingLabel:Boolean,calendarParams:Object,colorPickerParams:Object,textEditorParams:Object},Wb),emits:["textarea:resize","input:notempty","input:empty","input:clear","texteditor:change","calendar:change","colorpicker:change","change","focus","blur","input","update:value"],setup:function(e,t){var n=t.emit,r=t.slots,a=xt(!1),s=xt(!1),o=kn("ListContext",{value:{listIsMedia:!1,listIsSortable:!1,listIsSortableOpposite:!1,listIsSimple:!1}}),i=null,l=null,u=xt(null),c=xt(null),p=xt(null),d=!1,h=xt(function(){if(c.value)return c.value.value}()),f=qa((function(){return("datepicker"!==e.type||!Array.isArray(e.value)||0!==e.value.length)&&(void 0===e.value?h.value||0===h.value:e.value||0===e.value)})),m=function(){if(Eb&&c.value){var t=c.value.validity;t&&(t.valid?(e.onValidate&&e.onValidate(!0),!1!==a.value&&(a.value=!1)):(e.onValidate&&e.onValidate(!1),!0!==a.value&&(a.value=!0)))}},g=function(e){n("textarea:resize",e)},v=function(e){n("input:notempty",e)},b=function(e){n("input:empty",e)},y=function(e){n("input:clear",e)},w=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];n.apply(void 0,["input"].concat(r)),c.value&&(h.value=c.value.value),e.validateOnBlur||""===e.validateOnBlur||!e.validate&&""!==e.validate||!c.value||m(c.value),c.value&&"texteditor"!==e.type&&"colorpicker"!==e.type&&"datepicker"!==e.type&&n("update:value",c.value.value)},x=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.apply(void 0,["focus"].concat(t)),s.value=!0},k=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];n.apply(void 0,["blur"].concat(r)),(e.validate||""===e.validate||e.validateOnBlur||""===e.validateOnBlur)&&c.value&&m(c.value),s.value=!1},C=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];n.apply(void 0,["change"].concat(r)),"texteditor"===e.type&&(n("texteditor:change",r[0]),n("update:value",r[0]))};Jn((function(){(u.value||p.value)&&Db((function(){c.value&&(c.value.addEventListener("input:notempty",v,!1),c.value.addEventListener("textarea:resize",g,!1),c.value.addEventListener("input:empty",b,!1),c.value.addEventListener("input:clear",y,!1),"datepicker"===e.type&&(i=Eb.calendar.create(Yw({inputEl:c.value,value:e.value,on:{change:function(e,t){n("update:value",t),n("calendar:change",t)}}},e.calendarParams||{}))),"colorpicker"===e.type&&(l=Eb.colorPicker.create(Yw({inputEl:c.value,value:e.value,on:{change:function(e,t){n("update:value",t),n("colorpicker:change",t)}}},e.colorPickerParams||{}))),e.validateOnBlur||""===e.validateOnBlur||!e.validate&&""!==e.validate||void 0===e.value||null===e.value||""===e.value||setTimeout((function(){m()}),0),"textarea"===e.type&&e.resizable&&Eb.input.resizeTextarea(c.value))}))})),er((function(){c.value&&(c.value.removeEventListener("input:notempty",v,!1),c.value.removeEventListener("textarea:resize",g,!1),c.value.removeEventListener("input:empty",b,!1),c.value.removeEventListener("input:clear",y,!1)),i&&i.destroy&&(i.destroy(),i=null),l&&l.destroy&&(l.destroy(),l=null)})),Qn((function(){if(Eb&&d){if(!c.value)return;d=!1,e.validate&&!e.validateOnBlur&&m(),"textarea"===e.type&&e.resizable&&Eb.input.resizeTextarea(c.value)}})),Sn((function(){return e.colorPickerParams}),(function(e){Eb&&l&&Cb(l.params,e||{})})),Sn((function(){return e.calendarParams}),(function(e){Eb&&i&&Cb(i.params,e||{})})),Sn((function(){return e.value}),(function(e){Eb&&(d=!0,i&&i.setValue(e),l&&l.setValue(e))}));var S=qa((function(){return!0===e.sortable||!1===e.sortable?e.sortable:o.value.listIsSortable||!1})),E=function(t,n){var r="file"!==e.type&&"datepicker"!==e.type&&"colorpicker"!==e.type,o="input"===t,i=e.type;"datepicker"!==i&&"colorpicker"!==i||(i="text");var l,u=Sb({resizable:"textarea"===i&&e.resizable,"no-store-data":e.noFormStoreData||e.noStoreData||e.ignoreStoreData,"input-invalid":e.errorMessage&&e.errorMessageForce||a.value,"input-with-value":f.value,"input-focused":s.value});r&&(l=void 0!==e.value?e.value:h.value);var p={};"datepicker"!==e.type&&"colorpicker"!==e.type&&"value"in e&&(p.value=l);var d=yb({name:e.name,type:o?i:void 0,placeholder:e.placeholder,inputmode:e.inputmode,id:e.inputId,size:e.size,accept:e.accept,autocomplete:e.autocomplete,autocorrect:e.autocorrect,autocapitalize:e.autocapitalize,spellcheck:e.spellcheck,autofocus:e.autofocus,autosave:e.autosave,disabled:e.disabled,max:e.max,maxlength:e.maxlength,min:e.min,minlength:e.minlength,step:e.step,multiple:e.multiple,readonly:e.readonly,required:e.required,pattern:e.pattern,validate:"string"==typeof e.validate&&e.validate.length?e.validate:void 0,tabindex:e.tabindex});return Xa(t,Yw({ref:c,style:e.inputStyle},d,{"data-validate":!0===e.validate||""===e.validate||!0===e.validateOnBlur||""===e.validateOnBlur||void 0,"data-validate-on-blur":!0===e.validateOnBlur||""===e.validateOnBlur||void 0,"data-error-message":e.errorMessageForce?void 0:e.errorMessage,class:u,onFocus:x,onBlur:k,onInput:w,onChange:C},p),[n])};return function(){var t;e.input&&(t="select"===e.type||"textarea"===e.type||"file"===e.type?"select"===e.type?E("select",r.default&&r.default()):"file"===e.type?E("input"):E("textarea"):"texteditor"===e.type?Xa(Bw,Yw({value:e.value,resizable:e.resizable,placeholder:e.placeholder,onTexteditorFocus:x,onTexteditorBlur:k,onTexteditorInput:w,onTexteditorChange:C},e.textEditorParams||{})):E("input"));var n=!!e.errorMessage||r["error-message"],o=Xa("div",{ref:p,class:Sb("item-content item-input",!e.wrap&&{disabled:e.disabled},!e.wrap&&Vb(e),{"inline-label":e.inlineLabel,"item-input-outline":e.outline,"item-input-focused":s.value,"item-input-with-info":!!e.info||r.info,"item-input-with-value":f.value,"item-input-with-error-message":n&&e.errorMessageForce||a.value,"item-input-invalid":n&&e.errorMessageForce||a.value})},[r["content-start"]&&r["content-start"](),(e.media||r.media)&&Xa("div",{class:"item-media"},[e.media&&Xa("img",{src:e.media}),r.media&&r.media()]),Xa("div",{class:"item-inner"},[r["inner-start"]&&r["inner-start"](),(e.label||r.label)&&Xa("div",{class:Sb("item-title item-label",{"item-floating-label":e.floatingLabel})},[e.label,r.label&&r.label()]),Xa("div",{class:Sb("item-input-wrap",{"input-dropdown":"auto"===e.dropdown?"select"===e.type:e.dropdown})},[t,r.input&&r.input(),n&&e.errorMessageForce&&Xa("div",{class:"item-input-error-message"},[e.errorMessage,r["error-message"]&&r["error-message"]()]),e.clearButton&&Xa("span",{class:"input-clear-button"}),(e.info||r.info)&&Xa("div",{class:"item-input-info"},[e.info,r.info&&r.info()])]),r.inner&&r.inner(),r["inner-end"]&&r["inner-end"]()]),r.content&&r.content(),r["content-end"]&&r["content-end"]()]);return e.wrap?Xa("li",{ref:u,class:Sb({disabled:e.disabled},Vb(e))},[r["root-start"]&&r["root-start"](),o,S.value&&Xa("div",{class:"sortable-handler"}),r.root&&r.root(),r["root-end"]&&r["root-end"]()]):o}}};function Zw(){return Zw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zw.apply(this,arguments)}var Qw={name:"f7-list-item-cell",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default")],2)},props:Zw({},Wb),setup:function(e){return{classes:qa((function(){return Sb("item-cell",Vb(e))}))}}};function ex(){return ex=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ex.apply(this,arguments)}var tx={name:"f7-list-item-row",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default")],2)},props:ex({},Wb),setup:function(e){return{classes:qa((function(){return Sb("item-row",Vb(e))}))}}};function nx(){return nx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nx.apply(this,arguments)}var rx={name:"f7-list-item",props:nx({title:[String,Number],text:[String,Number],media:String,subtitle:[String,Number],header:[String,Number],footer:[String,Number],tooltip:String,tooltipTrigger:String,link:[Boolean,String],target:String,tabLink:[Boolean,String],tabLinkActive:Boolean,selected:Boolean,after:[String,Number],badge:[String,Number],badgeColor:String,mediaItem:Boolean,mediaList:Boolean,divider:Boolean,groupTitle:Boolean,swipeout:Boolean,swipeoutOpened:Boolean,sortable:{type:Boolean,default:void 0},sortableOpposite:{type:Boolean,default:void 0},accordionItem:Boolean,accordionItemOpened:Boolean,smartSelect:Boolean,smartSelectParams:Object,noChevron:Boolean,chevronCenter:Boolean,checkbox:Boolean,radio:Boolean,radioIcon:String,checked:Boolean,indeterminate:Boolean,name:String,value:{type:[String,Number,Array],default:void 0},readonly:Boolean,required:Boolean,disabled:Boolean,virtualListIndex:Number},Wb,qb,jb),emits:["click","swipeout","swipeout:overswipeenter","swipeout:overswipeexit","swipeout:deleted","swipeout:delete","swipeout:close","swipeout:closed","swipeout:open","swipeout:opened","accordion:beforeclose","accordion:close","accordion:closed","accordion:beforeopen","accordion:open","accordion:opened","change","update:checked"],setup:function(e,t){var n=t.slots,r=t.emit,a=kn("ListContext",{value:{listIsMedia:!1,listIsSortable:!1,listIsSortableOpposite:!1,listIsSimple:!1}}),s=qa((function(){return a.value.listIsMedia||!1})),o=qa((function(){return a.value.listIsSortable||!1})),i=qa((function(){return a.value.listIsSortableOpposite||!1})),l=qa((function(){return a.value.listIsSimple||!1})),u=xt(null),c=xt(null),p=xt(null),d=function(e){"input"!==e.target.tagName.toLowerCase()&&r("click",e)},h=function(e){u.value===e&&r("swipeout:overswipeenter")},f=function(e){u.value===e&&r("swipeout:overswipeexit")},m=function(e){u.value===e&&r("swipeout:deleted")},g=function(e){u.value===e&&r("swipeout:delete")},v=function(e){u.value===e&&r("swipeout:close")},b=function(e){u.value===e&&r("swipeout:closed")},y=function(e){u.value===e&&r("swipeout:open")},w=function(e){u.value===e&&r("swipeout:opened")},x=function(e,t){u.value===e&&r("swipeout",t)},k=function(e,t){u.value===e&&r("accordion:beforeclose",t)},C=function(e){u.value===e&&r("accordion:close")},S=function(e){u.value===e&&r("accordion:closed")},E=function(e,t){u.value===e&&r("accordion:beforeopen",t)},T=function(e){u.value===e&&r("accordion:open")},$=function(e){u.value===e&&r("accordion:opened")},I=function(e){r("change",e),r("update:checked",e.target.checked)};Ey(u,e),By(c,e),Vw(e,(function(){}),(function(){return u.value.querySelector("a.smart-select")})),Sn((function(){return e.swipeoutOpened}),(function(t){e.swipeout&&u.value&&Eb&&(t?Eb.swipeout.open(u.value):Eb.swipeout.close(u.value))})),Jn((function(){Db((function(){e.swipeout&&(Eb.on("swipeoutOpen",y),Eb.on("swipeoutOpened",w),Eb.on("swipeoutClose",v),Eb.on("swipeoutClosed",b),Eb.on("swipeoutDelete",g),Eb.on("swipeoutDeleted",m),Eb.on("swipeoutOverswipeEnter",h),Eb.on("swipeoutOverswipeExit",f),Eb.on("swipeout",x)),e.accordionItem&&(Eb.on("accordionBeforeOpen",E),Eb.on("accordionOpen",T),Eb.on("accordionOpened",$),Eb.on("accordionBeforeClose",k),Eb.on("accordionClose",C),Eb.on("accordionClosed",S)),e.swipeout&&e.swipeoutOpened&&Eb.swipeout.open(u.value)})),e.checkbox&&p.value&&(p.value.indeterminate=!!e.indeterminate)})),er((function(){Eb&&(Eb.off("swipeoutOpen",y),Eb.off("swipeoutOpened",w),Eb.off("swipeoutClose",v),Eb.off("swipeoutClosed",b),Eb.off("swipeoutDelete",g),Eb.off("swipeoutDeleted",m),Eb.off("swipeoutOverswipeEnter",h),Eb.off("swipeoutOverswipeExit",f),Eb.off("swipeout",x),Eb.off("accordionBeforeOpen",E),Eb.off("accordionOpen",T),Eb.off("accordionOpened",$),Eb.off("accordionBeforeClose",k),Eb.off("accordionClose",C),Eb.off("accordionClosed",S))})),Sn((function(){return e.indeterminate}),(function(e){p.value&&(p.value.indeterminate=!!e)}));var N=qa((function(){return e.mediaItem||e.mediaList||s.value})),O=qa((function(){return!0===e.sortable||!1===e.sortable?e.sortable:o.value})),A=qa((function(){return O.value&&(e.sortableOpposite||i.value)})),M=qa((function(){return nx({href:!0===e.link?"":e.link||e.href,target:e.target,"data-tab":wb(e.tabLink)&&e.tabLink||void 0},Ub(e),Xb(e))})),_=qa((function(){return Sb({"item-link":!0,"smart-select":e.smartSelect,"tab-link":e.tabLink||""===e.tabLink,"tab-link-active":e.tabLinkActive,"item-selected":e.selected},Gb(e),Kb(e))})),R=qa((function(){return Sb("item-content",{"item-checkbox":e.checkbox,"item-radio":e.radio,"item-radio-icon-start":e.radio&&"start"===e.radioIcon,"item-radio-icon-end":e.radio&&"end"===e.radioIcon},Vb(e))})),P=qa((function(){return Sb({"item-divider":e.divider,"list-group-title":e.groupTitle,"media-item":N.value,swipeout:e.swipeout,"accordion-item":e.accordionItem,"accordion-item-opened":e.accordionItemOpened,disabled:e.disabled&&!(e.radio||e.checkbox),"no-chevron":e.noChevron,"chevron-center":e.chevronCenter,"disallow-sorting":!1===e.sortable},Vb(e))}));return function(){var t,r;if(l.value||(r=function(e){var t,n,r,a,s,o,i,l,u,c,p,d,h,f,m=void 0===e?{}:e,g=m.props,v=m.slots,b=m.inputElRef,y=m.onChange,w=m.onClick,x=m.isMediaComputed,k=m.isSortableComputed,C=m.isSortableOppositeComputed,S=m.itemContentClasses,E=g.radio,T=g.checkbox,$=g.value,I=g.name,N=g.readonly,O=g.disabled,A=g.checked,M=g.required,_=g.media,R=g.header,P=g.footer,D=g.title,L=g.subtitle,B=g.text,F=g.after,z=g.badge,V=g.badgeColor,W=g.swipeout,H=g.sortable,j=g.accordionItem;return(E||T)&&(c=Xa("input",{ref:b,value:$,name:I,checked:A,readonly:N,disabled:O,required:M,type:E?"radio":"checkbox",onChange:y}),p=Xa("i",{class:"icon icon-"+(E?"radio":"checkbox")})),(_||v.media)&&(_&&(f=Xa("img",{src:_})),u=Xa("div",{class:"item-media"},[f,v.media&&v.media()])),(R||v.header)&&(d=Xa("div",{class:"item-header"},[R,v.header&&v.header()])),(P||v.footer)&&(h=Xa("div",{class:"item-footer"},[P,v.footer&&v.footer()])),(D||v.title||!x.value&&d||!x.value&&h)&&(t=Xa("div",{class:"item-title"},[!x.value&&d,D,v.title&&v.title(),!x.value&&h])),(L||v.subtitle)&&(i=Xa("div",{class:"item-subtitle"},[L,v.subtitle&&v.subtitle()])),(B||v.text)&&(l=Xa("div",{class:"item-text"},[B,v.text&&v.text()])),(F||z||v.after)&&(F&&(r=Xa("span",[F])),z&&(a=Xa($y,{color:V},(function(){return z}))),n=Xa("div",{class:"item-after"},[v["after-start"]&&v["after-start"](),r,a,v.after&&v.after(),v["after-end"]&&v["after-end"]()])),x.value?(o=Xa("div",{class:"item-title-row"},[v["before-title"]&&v["before-title"](),t,v["after-title"]&&v["after-title"](),n]),s=Xa("div",{class:"item-inner"},[v["inner-start"]&&v["inner-start"],d,o,i,l,W||j?null:v.default&&v.default(),v.inner&&v.inner(),h,v["inner-end"]&&v["inner-end"]])):s=Xa("div",{class:"item-inner"},[v["inner-start"]&&v["inner-start"](),v["before-title"]&&v["before-title"](),t,v["after-title"]&&v["after-title"](),n,W||j?null:v.default&&v.default(),v.inner&&v.inner(),v["inner-end"]&&v["inner-end"]()]),Xa(T||E?"label":"div",{class:S.value,onClick:w},[k.value&&!1!==H&&C.value&&Xa("div",{class:"sortable-handler"}),v["content-start"]&&v["content-start"](),c,p,u,s,v.content&&v.content(),v["content-end"]&&v["content-end"]()])}({props:e,slots:n,inputElRef:p,onChange:I,onClick:e.link||e.href||e.accordionItem||e.smartSelect?void 0:d,isMediaComputed:N,isSortableComputed:O,isSortableOppositeComputed:A,itemContentClasses:R}),(e.link||e.href||e.accordionItem||e.smartSelect)&&(t=Xa("a",nx({ref:c,class:_.value},M.value,{onClick:d}),[r]))),e.divider||e.groupTitle)return Xa("li",{ref:u,class:P.value,"data-virtual-list-index":e.virtualListIndex,onClick:d},[e.title,n.default&&n.default()]);if(l.value)return Xa("li",{ref:u,class:P.value,onClick:d,"data-virtual-list-index":e.virtualListIndex},[e.title,n.default&&n.default()]);var a=e.link||e.href||e.smartSelect||e.accordionItem?t:r;return Xa("li",{ref:u,class:P.value,"data-virtual-list-index":e.virtualListIndex},[n["root-start"]&&n["root-start"](),e.swipeout?Xa("div",{class:"swipeout-content"},[a]):a,O.value&&!1!==e.sortable&&!A.value&&Xa("div",{class:"sortable-handler"}),(e.swipeout||e.accordionItem)&&n.default(),n.root&&n.root(),n["root-end"]&&n["root-end"]()])}}};function ax(){return ax=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ax.apply(this,arguments)}var sx={name:"f7-list",props:ax({inset:Boolean,xsmallInset:Boolean,smallInset:Boolean,mediumInset:Boolean,largeInset:Boolean,xlargeInset:Boolean,mediaList:Boolean,sortable:Boolean,sortableTapHold:Boolean,sortableEnabled:Boolean,sortableMoveElements:{type:Boolean,default:void 0},sortableOpposite:Boolean,accordionList:Boolean,accordionOpposite:Boolean,contactsList:Boolean,simpleList:Boolean,linksList:Boolean,menuList:Boolean,noHairlines:Boolean,noHairlinesBetween:Boolean,noHairlinesMd:Boolean,noHairlinesBetweenMd:Boolean,noHairlinesIos:Boolean,noHairlinesBetweenIos:Boolean,noHairlinesAurora:Boolean,noHairlinesBetweenAurora:Boolean,noChevron:Boolean,chevronCenter:Boolean,tab:Boolean,tabActive:Boolean,form:Boolean,formStoreData:Boolean,inlineLabels:Boolean,virtualList:Boolean,virtualListParams:Object},Wb),emits:["submit","sortable:enable","sortable:disable","sortable:sort","sortable:move","virtual:itembeforeinsert","virtual:beforeclear","virtual:itemsbeforeinsert","virtual:itemsafterinsert","tab:hide","tab:show"],setup:function(e,t){var n=t.emit,r=t.slots,a=null,s=xt(null),o=function(e){n("submit",e)},i=function(e){s.value===e&&n("sortable:enable")},l=function(e){s.value===e&&n("sortable:disable")},u=function(e,t,r){s.value===r&&n("sortable:sort",t)},c=function(e,t){s.value===t&&n("sortable:move",e,t)};Ry(s,n),Jn((function(){Db((function(){if(Eb.on("sortableEnable",i),Eb.on("sortableDisable",l),Eb.on("sortableSort",u),Eb.on("sortableMove",c),e.virtualList){var t=e.virtualListParams||{};(t.renderItem||t.renderExternal)&&(t.items&&(t.items=ft(t.items)),a=Eb.virtualList.create(Cb({el:s.value,on:{itemBeforeInsert:function(e,t){n("virtual:itembeforeinsert",this,e,t)},beforeClear:function(e){n("virtual:beforeclear",this,e)},itemsBeforeInsert:function(e){n("virtual:itemsbeforeinsert",this,e)},itemsAfterInsert:function(e){n("virtual:itemsafterinsert",this,e)}}},t)))}}))})),er((function(){Eb&&(Eb.off("sortableEnable",i),Eb.off("sortableDisable",l),Eb.off("sortableSort",u),Eb.off("sortableMove",c),e.virtualList&&a&&(a.destroy&&a.destroy(),a=null))}));var p=qa((function(){return Sb("list",{inset:e.inset,"xsmall-inset":e.xsmallInset,"small-inset":e.smallInset,"medium-inset":e.mediumInset,"large-inset":e.largeInset,"xlarge-inset":e.xlargeInset,"media-list":e.mediaList,"simple-list":e.simpleList,"links-list":e.linksList,"menu-list":e.menuList,sortable:e.sortable,"sortable-tap-hold":e.sortableTapHold,"sortable-enabled":e.sortableEnabled,"sortable-opposite":e.sortableOpposite,"accordion-list":e.accordionList,"accordion-opposite":e.accordionOpposite,"contacts-list":e.contactsList,"virtual-list":e.virtualList,tab:e.tab,"tab-active":e.tabActive,"no-hairlines":e.noHairlines,"no-hairlines-md":e.noHairlinesMd,"no-hairlines-ios":e.noHairlinesIos,"no-hairlines-aurora":e.noHairlinesAurora,"no-hairlines-between":e.noHairlinesBetween,"no-hairlines-between-md":e.noHairlinesBetweenMd,"no-hairlines-between-ios":e.noHairlinesBetweenIos,"no-hairlines-between-aurora":e.noHairlinesBetweenAurora,"form-store-data":e.formStoreData,"inline-labels":e.inlineLabels,"no-chevron":e.noChevron,"chevron-center":e.chevronCenter},Vb(e))})),d=qa((function(){return e.form?"form":"div"}));return xn("ListContext",qa((function(){return{listIsMedia:e.mediaList,listIsSimple:e.simpleList,listIsSortable:e.sortable,listIsSortableOpposite:e.sortableOpposite}}))),function(){var t=r.list,n=r.default,a=[],i=[],l=t||[],u=!1;return n&&n().forEach((function(e){if(void 0!==e){var t=e.type&&e.type.name?e.type.name:e.type;t&&"symbol"==typeof t?(u=!0,l.push(e)):!t||t&&!("li"===t||t.indexOf("f7-list-item")>=0||t.indexOf("f7-list-button")>=0||t.indexOf("f7-list-input")>=0)?u?i.push(e):a.push(e):t&&(u=!0,l.push(e))}})),Xa(d.value,{ref:s,class:p.value,"data-sortable-move-elements":void 0!==e.sortableMoveElements?e.sortableMoveElements.toString():void 0,onSubmit:o},[r["before-list"]&&r["before-list"](),a,l.length>0&&Xa("ul",l),r["after-list"]&&r["after-list"](),i])}}};function ox(){return ox=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ox.apply(this,arguments)}var ix={name:"f7-login-screen-title",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default")],2)},props:ox({},Wb),setup:function(e){return{classes:qa((function(){return Sb("login-screen-title",Vb(e))}))}}};function lx(){return lx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lx.apply(this,arguments)}var ux={name:"f7-login-screen",render:function(e,t){return Zr(),aa("div",{ref:"elRef",class:e.classes},[Sa(e.$slots,"default")],2)},props:lx({opened:Boolean,animate:{type:Boolean,default:void 0},containerEl:{type:[String,Object],default:void 0}},Wb),emits:["loginscreen:open","loginscreen:opened","loginscreen:close","loginscreen:closed","update:opened"],setup:function(e,t){var n=t.emit,r=xt(null),a=e.opened,s=!1,o=xt(null),i=function(e){a=!0,s=!1,n("loginscreen:open",e),n("update:opened",!0)},l=function(e){n("loginscreen:opened",e)},u=function(e){a=!1,s=!0,n("loginscreen:close",e)},c=function(e){s=!1,n("loginscreen:closed",e),n("update:opened",!1)};Sn((function(){return e.opened}),(function(e){r.value&&(e?r.value.open():r.value.close())})),Jn((function(){o.value&&Db((function(){var t={el:o.value,on:{open:i,opened:l,close:u,closed:c}};void 0!==e.animate&&(t.animate=e.animate),void 0!==e.containerEl&&(t.containerEl=e.containerEl),r.value=Eb.loginScreen.create(t),e.opened&&r.value.open(!1)}))})),er((function(){r.value&&r.value.destroy(),r.value=null}));var p=qa((function(){return Sb("login-screen",dy({isOpened:a,isClosing:s}),Vb(e))}));return{elRef:o,classes:p}}};function cx(){return cx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cx.apply(this,arguments)}var px={name:"f7-menu-dropdown-item",render:function(e,t){return Zr(),aa("div",xa({ref:"elRef",class:e.classes},e.attrs,{onClick:t[1]||(t[1]=function(){return e.onClick&&e.onClick.apply(e,arguments)})}),[ma(m(e.text)+" ",1),Sa(e.$slots,"default")],16)},props:cx({text:String,link:Boolean,href:String,target:String,divider:Boolean},Wb,jb,qb),emits:["click"],setup:function(e,t){var n=t.emit,r=xt(null);By(r,e);var a=qa((function(){return e.link||e.href||""===e.href})),s=qa((function(){return a.value?"a":"div"}));return{classes:qa((function(){return Sb({"menu-dropdown-link":a.value&&!e.divider,"menu-dropdown-item":!a.value&&!e.divider,"menu-dropdown-divider":e.divider},Vb(e),Gb(e),Kb(e),{"menu-close":void 0===e.menuClose})})),attrs:qa((function(){var t=e.href;return void 0===t&&e.link&&(t="#"),cx({href:t,target:e.target},Ub(e),Xb(e))})),tag:s,onClick:function(e){n("click",e)},elRef:r}}};function dx(){return dx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dx.apply(this,arguments)}var hx={name:"f7-menu-dropdown",render:function(e,t){return Zr(),aa("div",{class:e.classes},[pa("div",{class:"menu-dropdown-content",style:{height:e.contentHeight}},[Sa(e.$slots,"default")],4)],2)},props:dx({contentHeight:String,position:String,left:Boolean,center:Boolean,right:Boolean},Wb),setup:function(e){return{classes:qa((function(){var t=e.position||"left";return e.left&&(t="left"),e.center&&(t="center"),e.right&&(t="right"),Sb("menu-dropdown","menu-dropdown-"+t,Vb(e))}))}}};function fx(){return fx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fx.apply(this,arguments)}var mx={key:0,class:"menu-item-content"};var gx={name:"f7-menu-item",render:function(e,t){var n=Vr("f7-use-icon");return Zr(),aa(Hr(e.tag),xa({ref:"elRef",class:e.classes},e.attrs,{onClick:e.onClick}),{default:fn((function(){return[e.text||e.$slots.text||e.icon?(Zr(),aa("div",mx,[ma(m(e.text)+" ",1),e.icon?(Zr(),aa(n,{key:0,icon:e.icon},null,8,["icon"])):va("",!0),Sa(e.$slots,"text")])):va("",!0),Sa(e.$slots,"default")]})),_:3},16,["class","onClick"])},components:{f7UseIcon:Jy},props:fx({text:String,iconOnly:Boolean,href:String,link:Boolean,target:String,dropdown:Boolean,tooltip:String,tooltipTrigger:String},Wb,jb,qb,Hb),emits:["click","menu:opened","menu:closed"],setup:function(e,t){var n=t.slots,r=t.emit,a=xt(null);Ey(a,e);var s=function(e){a.value===e&&r("menu:opened",e)},o=function(e){a.value===e&&r("menu:closed",e)};By(a,e);Jn((function(){Db((function(){Eb.on("menuOpened",s),Eb.on("menuClosed",o)}))})),er((function(){return Eb.off("menuOpened",s),void Eb.off("menuClosed",s)}));var i=qa((function(){return Ly(e)}));return{tag:qa((function(){return e.link||e.href||""===e.href?"a":"div"})),classes:qa((function(){var t;return t=!(!e.iconOnly&&(e.text||n.text)),Sb({"menu-item":!0,"menu-item-dropdown":e.dropdown||""===e.dropdown,"icon-only":t},Vb(e),Gb(e),Kb(e))})),attrs:qa((function(){var t=e.href;return void 0===t&&e.link&&(t="#"),fx({href:t,target:e.target},Ub(e),Xb(e))})),icon:i,onClick:function(e){r("click",e)},elRef:a}}};function vx(){return vx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vx.apply(this,arguments)}var bx={class:"menu-inner"};var yx={name:"f7-menu",render:function(e,t){return Zr(),aa("div",{class:e.classes},[pa("div",bx,[Sa(e.$slots,"default")])],2)},props:vx({},Wb),setup:function(e){return{classes:qa((function(){return Sb("menu",Vb(e))}))}}};function wx(){return wx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wx.apply(this,arguments)}var xx={class:"message-content"},kx={key:0,class:"message-image"},Cx={key:1,class:"message-text-header"},Sx={key:0,class:"message-typing-indicator"},Ex=pa("div",null,null,-1),Tx=pa("div",null,null,-1),$x=pa("div",null,null,-1),Ix={key:3,class:"message-text-footer"};var Nx={name:"f7-message",render:function(e,t){return Zr(),aa("div",{class:e.classes,onClick:t[7]||(t[7]=function(){return e.onClick&&e.onClick.apply(e,arguments)})},[Sa(e.$slots,"start"),e.hasAvatar?(Zr(),aa("div",{key:0,class:"message-avatar",style:{backgroundImage:e.avatar&&"url("+e.avatar+")"},onClick:t[1]||(t[1]=function(){return e.onAvatarClick&&e.onAvatarClick.apply(e,arguments)})},[Sa(e.$slots,"avatar")],4)):va("",!0),pa("div",xx,[Sa(e.$slots,"content-start"),e.hasName?(Zr(),aa("div",{key:0,class:"message-name",onClick:t[2]||(t[2]=function(){return e.onNameClick&&e.onNameClick.apply(e,arguments)})},[ma(m(e.name)+" ",1),Sa(e.$slots,"name")])):va("",!0),e.hasHeader?(Zr(),aa("div",{key:1,class:"message-header",onClick:t[3]||(t[3]=function(){return e.onHeaderClick&&e.onHeaderClick.apply(e,arguments)})},[ma(m(e.header)+" ",1),Sa(e.$slots,"header")])):va("",!0),pa("div",{class:"message-bubble",onClick:t[5]||(t[5]=function(){return e.onBubbleClick&&e.onBubbleClick.apply(e,arguments)})},[Sa(e.$slots,"bubble-start"),e.hasImage?(Zr(),aa("div",kx,[Sa(e.$slots,"image",{},(function(){return[pa("img",{src:e.image},null,8,["src"])]}))])):va("",!0),e.hasTextHeader?(Zr(),aa("div",Cx,[ma(m(e.textHeader)+" ",1),Sa(e.$slots,"text-header")])):va("",!0),e.hasText?(Zr(),aa("div",{key:2,class:"message-text",onClick:t[4]||(t[4]=function(){return e.onTextClick&&e.onTextClick.apply(e,arguments)})},[ma(m(e.text)+" ",1),Sa(e.$slots,"text"),e.typing?(Zr(),aa("div",Sx,[Ex,Tx,$x])):va("",!0)])):va("",!0),e.hasTextFooter?(Zr(),aa("div",Ix,[ma(m(e.textFooter)+" ",1),Sa(e.$slots,"text-footer")])):va("",!0),Sa(e.$slots,"bubble-end"),Sa(e.$slots,"default")]),e.hasFooter?(Zr(),aa("div",{key:2,class:"message-footer",onClick:t[6]||(t[6]=function(){return e.onFooterClick&&e.onFooterClick.apply(e,arguments)})},[ma(m(e.footer)+" ",1),Sa(e.$slots,"footer")])):va("",!0),Sa(e.$slots,"content-end")]),Sa(e.$slots,"end")],2)},props:wx({text:String,name:String,avatar:String,type:{type:String,default:"sent"},image:String,header:String,footer:String,textHeader:String,textFooter:String,first:Boolean,last:Boolean,tail:Boolean,sameName:Boolean,sameHeader:Boolean,sameFooter:Boolean,sameAvatar:Boolean,typing:Boolean},Wb),emits:["click","click:name","click:text","click:avatar","click:header","click:footer","click:bubble"],setup:function(e,t){var n=t.emit,r=t.slots;return{classes:qa((function(){return Sb("message",{"message-sent":"sent"===e.type,"message-received":"received"===e.type,"message-typing":e.typing,"message-first":e.first,"message-last":e.last,"message-tail":e.tail,"message-same-name":e.sameName,"message-same-header":e.sameHeader,"message-same-footer":e.sameFooter,"message-same-avatar":e.sameAvatar},Vb(e))})),onClick:function(e){n("click",e)},onNameClick:function(e){n("click:name",e)},onTextClick:function(e){n("click:text",e)},onAvatarClick:function(e){n("click:avatar",e)},onHeaderClick:function(e){n("click:header",e)},onFooterClick:function(e){n("click:footer",e)},onBubbleClick:function(e){n("click:bubble",e)},hasAvatar:qa((function(){return r.avatar||e.avatar})),hasName:qa((function(){return r.name||e.name})),hasHeader:qa((function(){return r.header||e.header})),hasImage:qa((function(){return r.image||e.image})),hasTextHeader:qa((function(){return r["text-header"]||e.textHeader})),hasText:qa((function(){return r.text||e.text||e.typing})),hasTextFooter:qa((function(){return r["text-footer"]||e.textFooter})),hasFooter:qa((function(){return r.footer||e.footer}))}}};function Ox(){return Ox=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ox.apply(this,arguments)}var Ax={name:"f7-messagebar-attachment",render:function(e,t){return Zr(),aa("div",{class:e.classes,onClick:t[2]||(t[2]=function(){return e.onClick&&e.onClick.apply(e,arguments)})},[e.image?(Zr(),aa("img",{key:0,src:e.image},null,8,["src"])):va("",!0),e.deletable?(Zr(),aa("span",{key:1,class:"messagebar-attachment-delete",onClick:t[1]||(t[1]=function(){return e.onDeleteClick&&e.onDeleteClick.apply(e,arguments)})})):va("",!0),Sa(e.$slots,"default")],2)},props:Ox({image:String,deletable:{type:Boolean,default:!0}},Wb),emits:["attachment:click","attachment:delete"],setup:function(e,t){var n=t.emit;return{classes:qa((function(){return Sb("messagebar-attachment",Vb(e))})),onClick:function(e){n("attachment:click",e)},onDeleteClick:function(e){n("attachment:delete",e)}}}};function Mx(){return Mx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mx.apply(this,arguments)}var _x={name:"f7-messagebar-attachments",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default")],2)},props:Mx({},Wb),setup:function(e){return{classes:qa((function(){return Sb("messagebar-attachments",Vb(e))}))}}};function Rx(){return Rx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rx.apply(this,arguments)}var Px=pa("i",{class:"icon icon-checkbox"},null,-1);var Dx={name:"f7-messagebar-sheet-image",render:function(e,t){return Zr(),aa("label",{class:e.classes,style:e.styles},[pa("input",{type:"checkbox",checked:e.checked,onChange:t[1]||(t[1]=function(){return e.onChange&&e.onChange.apply(e,arguments)})},null,40,["checked"]),Px,Sa(e.$slots,"default")],6)},props:Rx({image:String,checked:Boolean},Wb),emits:["checked","unchecked","change","update:checked"],setup:function(e,t){var n=t.emit;return{classes:qa((function(){return Sb("messagebar-sheet-image","checkbox",Vb(e))})),styles:qa((function(){return{backgroundImage:e.image&&"url("+e.image+")"}})),onChange:function(e){e.target.checked?n("checked",e):n("unchecked",e),n("update:checked",e.target.checked),n("change",e)}}}};function Lx(){return Lx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lx.apply(this,arguments)}var Bx={name:"f7-messagebar-sheet-item",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default")],2)},props:Lx({},Wb),setup:function(e){return{classes:qa((function(){return Sb("messagebar-sheet-item",Vb(e))}))}}};function Fx(){return Fx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fx.apply(this,arguments)}var zx={name:"f7-messagebar-sheet",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default")],2)},props:Fx({},Wb),setup:function(e){return{classes:qa((function(){return Sb("messagebar-sheet",Vb(e))}))}}};function Vx(){return Vx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vx.apply(this,arguments)}var Wx={name:"f7-messagebar",props:Vx({sheetVisible:Boolean,attachmentsVisible:Boolean,top:Boolean,resizable:{type:Boolean,default:!0},bottomOffset:{type:Number,default:0},topOffset:{type:Number,default:0},maxHeight:Number,resizePage:{type:Boolean,default:!0},sendLink:String,value:[String,Number,Array],disabled:Boolean,readonly:Boolean,textareaId:[Number,String],name:String,placeholder:{type:String,default:"Message"},init:{type:Boolean,default:!0}},Wb),emits:["change","input","focus","blur","submit","send","click","messagebar:attachmentdelete","messagebar:attachmentclick","messagebar:resizepage","update:value"],setup:function(e,t){var n=t.emit,r=t.slots,a=xt(null),s=xt(null),o=null,i=!1,l=!1,u=function(e){n("change",e)},c=function(e){n("input",e),n("update:value",e.target.value)},p=function(e){n("focus",e)},d=function(e){n("blur",e)},h=function(e){var t=s.value.$el,r=o?function(){o.clear()}:function(){};n("submit",t,r),n("send",t,r),n("click",e)},f=function(e,t,r){n("messagebar:attachmentdelete",e,t,r)},m=function(e,t,r){n("messagebar:attachmentclick",e,t,r)},g=function(e){n("messagebar:resizepage",e)};Sn((function(){return e.sheetVisible}),(function(){e.resizable&&o&&(i=!0)})),Sn((function(){return e.attachmentsVisible}),(function(){e.resizable&&o&&(l=!0)})),Jn((function(){if(e.init&&a.value){var t=yb({el:a.value,top:e.top,resizePage:e.resizePage,bottomOffset:e.bottomOffset,topOffset:e.topOffset,maxHeight:e.maxHeight,on:{attachmentDelete:f,attachmentClick:m,resizePage:g}});Db((function(){o=Eb.messagebar.create(t)}))}})),Qn((function(){o&&(i&&(i=!1,o.sheetVisible=e.sheetVisible,o.resizePage()),l&&(l=!1,o.attachmentsVisible=e.attachmentsVisible,o.resizePage()))})),er((function(){o&&o.destroy&&o.destroy(),o=null}));var v=qa((function(){return Sb("toolbar","messagebar",{"messagebar-attachments-visible":e.attachmentsVisible,"messagebar-sheet-visible":e.sheetVisible},Vb(e))}));return function(){var t={};"value"in e&&(t.value=e.value);var n,o,i=r.default,l=r["before-inner"],f=r["after-inner"],m=r["send-link"],g=r["inner-start"],b=r["inner-end"],y=r["before-area"],w=r["after-area"],x=[];return i&&i().forEach((function(e){if(void 0!==e){var t=e.type&&e.type.name?e.type.name:e.type;t&&(t.indexOf("messagebar-attachments")>=0||"F7MessagebarAttachments"===t||"f7-messagebar-attachments"===t)?n=e:t&&(t.indexOf("messagebar-sheet")>=0||"F7MessagebarSheet"===t||"f7-messagebar-sheet"===t)?o=e:x.push(e)}})),Xa("div",{class:v.value,ref:a},[l&&l(),Xa("div",{class:"toolbar-inner"},[g&&g(),Xa("div",{class:"messagebar-area"},[y&&y(),n,Xa(zw,Vx({id:e.textareaId,ref:s,type:"textarea",wrap:!1,placeholder:e.placeholder,disabled:e.disabled,name:e.name,readonly:e.readonly,resizable:e.resizable,onInput:c,onChange:u,onFocus:p,onBlur:d},t)),w&&w()]),(e.sendLink&&e.sendLink.length>0||m)&&Xa(Hw,{onClick:h},[m?m():e.sendLink]),b&&b(),x]),f&&f(),o])}}};function Hx(){return Hx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hx.apply(this,arguments)}var jx={name:"f7-messages-title",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default")],2)},props:Hx({},Wb),setup:function(e){return{classes:qa((function(){return Sb("messages-title",Vb(e))}))}}};function Ux(){return Ux=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ux.apply(this,arguments)}var Gx={name:"f7-messages",render:function(e,t){return Zr(),aa("div",{ref:"elRef",class:e.classes},[Sa(e.$slots,"default")],2)},props:Ux({autoLayout:{type:Boolean,default:!1},messages:{type:Array,default:function(){return[]}},newMessagesFirst:{type:Boolean,default:!1},scrollMessages:{type:Boolean,default:!0},scrollMessagesOnEdge:{type:Boolean,default:!0},typing:{type:Boolean,default:!1},firstMessageRule:Function,lastMessageRule:Function,tailMessageRule:Function,sameNameMessageRule:Function,sameHeaderMessageRule:Function,sameFooterMessageRule:Function,sameAvatarMessageRule:Function,customClassMessageRule:Function,renderMessage:Function,init:{type:Boolean,default:!0}},Wb),setup:function(e,t){var n=t.slots,r=null,a=null,s=xt(null);Jn((function(){e.init&&Db((function(){(r=Eb.messages.create(yb({el:s.value,autoLayout:e.autoLayout,messages:e.messages,newMessagesFirst:e.newMessagesFirst,scrollMessages:e.scrollMessages,scrollMessagesOnEdge:e.scrollMessagesOnEdge,firstMessageRule:e.firstMessageRule,lastMessageRule:e.lastMessageRule,tailMessageRule:e.tailMessageRule,sameNameMessageRule:e.sameNameMessageRule,sameHeaderMessageRule:e.sameHeaderMessageRule,sameFooterMessageRule:e.sameFooterMessageRule,sameAvatarMessageRule:e.sameAvatarMessageRule,customClassMessageRule:e.customClassMessageRule,renderMessage:e.renderMessage})))&&e.typing&&r.showTyping()}))})),Zn((function(){if(e.init&&s.value){var t=s.value.children;if(t){a=t.length;for(var o=0;o<t.length;o+=1)t[o].classList.add("message-appeared");var i=function(e,t){void 0===t&&(t="default");var n=[];return e[t]&&function e(t){Array.isArray(t)&&t.forEach((function(t){t.type===Gr&&t.children?e(t.children):t.type&&t.type!==Xr&&n.push(t)}))}(e[t]()),n}(n);r&&e.scrollMessages&&a!==i&&r.setScrollData()}}})),Qn((function(){if(e.init&&s.value){var t=s.value.children;if(t){for(var n=t.length,o=0;o<t.length;o+=1)t[o].classList.contains("message-appeared")||t[o].classList.add("message-appear-from-bottom");r&&r.layout&&e.autoLayout&&r.layout(),n!==a&&r&&r.scroll&&r.scrollData&&e.scrollMessages&&r.scrollWithEdgeCheck(!0)}}})),er((function(){r&&r.destroy&&r.destroy(),r=null})),Sn((function(){return e.typing}),(function(e){r&&(e?r.showTyping():r.hideTyping())}));var o=qa((function(){return Sb("messages",Vb(e))}));return{elRef:s,classes:o}}};function qx(){return qx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qx.apply(this,arguments)}var Xx={name:"f7-nav-left",render:function(e,t){var n=Vr("f7-link");return Zr(),aa("div",{class:e.classes},[e.backLink?(Zr(),aa(n,{key:0,href:e.backLinkUrl||"#",back:"",icon:"icon-back",force:e.backLinkForce||void 0,class:e.text?void 0:"icon-only",text:e.text,onClick:e.onBackClick},null,8,["href","force","class","text","onClick"])):va("",!0),Sa(e.$slots,"default")],2)},components:{f7Link:Hw},props:qx({backLink:[Boolean,String],backLinkUrl:String,backLinkForce:Boolean,backLinkShowText:{type:Boolean,default:void 0},sliding:Boolean},Wb),emits:["back:click","click:back"],setup:function(e,t){var n=t.emit,r=Fy(),a=qa((function(){var t=e.backLinkShowText;if(void 0===t&&(t=!r.value.md),e.backLink)return!0!==e.backLink&&t?e.backLink:void 0}));return{classes:qa((function(){return Sb("left",{sliding:e.sliding},Vb(e))})),onBackClick:function(e){n("back:click",e),n("click:back",e)},text:a}}};function Kx(){return Kx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kx.apply(this,arguments)}var Yx={name:"f7-nav-right",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default")],2)},props:Kx({sliding:Boolean},Wb),setup:function(e){return{classes:qa((function(){return Sb("right",{sliding:e.sliding},Vb(e))}))}}};function Jx(){return Jx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jx.apply(this,arguments)}var Zx={class:"title-large-text"};var Qx={name:"f7-nav-title-large",render:function(e,t){return Zr(),aa("div",{class:e.classes},[pa("div",Zx,[Sa(e.$slots,"default")])],2)},props:Jx({},Wb),setup:function(e){return{classes:qa((function(){return Sb("title-large",Vb(e))}))}}};function ek(){return ek=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ek.apply(this,arguments)}var tk={key:0,class:"subtitle"};var nk={name:"f7-nav-title",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default"),ma(" "+m(e.title)+" ",1),e.subtitle?(Zr(),aa("span",tk,m(e.subtitle),1)):va("",!0)],2)},props:ek({title:String,subtitle:String,sliding:Boolean},Wb),setup:function(e){return{classes:qa((function(){return Sb("title",{sliding:e.sliding},Vb(e))}))}}};function rk(){return rk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rk.apply(this,arguments)}var ak=pa("div",{class:"navbar-bg"},null,-1),sk={key:3,className:"title-large"},ok={className:"title-large-text"};var ik={name:"f7-navbar",render:function(e,t){var n=Vr("f7-nav-left"),r=Vr("f7-nav-title"),a=Vr("f7-nav-right");return Zr(),aa("div",{ref:"elRef",class:e.classes},[ak,Sa(e.$slots,"before-inner"),pa("div",{class:e.innerClasses},[e.hasLeft?(Zr(),aa(n,{key:0,"back-link":e.backLink,"back-link-url":e.backLinkUrl,"back-link-force":e.backLinkForce,"back-link-show-text":e.backLinkShowText,"onBack:click":e.onBackClick},{default:fn((function(){return[Sa(e.$slots,"nav-left"),Sa(e.$slots,"left")]})),_:3},8,["back-link","back-link-url","back-link-force","back-link-show-text","onBack:click"])):va("",!0),e.hasTitle?(Zr(),aa(r,{key:1,title:e.title,subtitle:e.subtitle},{default:fn((function(){return[Sa(e.$slots,"title")]})),_:3},8,["title","subtitle"])):va("",!0),e.hasRight?(Zr(),aa(a,{key:2},{default:fn((function(){return[Sa(e.$slots,"nav-right"),Sa(e.$slots,"right")]})),_:3})):va("",!0),e.hasLargeTitle?(Zr(),aa("div",sk,[pa("div",ok,[ma(m(e.largeTitle)+" ",1),Sa(e.$slots,"title-large")])])):va("",!0),Sa(e.$slots,"default")],2),Sa(e.$slots,"after-inner")],2)},components:{f7NavLeft:Xx,f7NavTitle:nk,f7NavRight:Yx},props:rk({backLink:[Boolean,String],backLinkUrl:String,backLinkForce:Boolean,backLinkShowText:{type:Boolean,default:void 0},sliding:{type:Boolean,default:!0},title:String,subtitle:String,hidden:Boolean,noShadow:Boolean,noHairline:Boolean,innerClass:String,innerClassName:String,large:Boolean,largeTransparent:Boolean,transparent:Boolean,titleLarge:String},Wb),emits:["navbar:hide","navbar:show","navbar:expand","navbar:collapse","navbar:transparentshow","navbar:transparenthide","click:back","back:click"],setup:function(e,t){var n=t.emit,r=t.slots,a="",s=!1,o=null,i=!1,l=!1,u=!1,c=xt(null),p=Fy(),d=function(e){c.value===e&&n("navbar:hide")},h=function(e){c.value===e&&n("navbar:show")},f=function(e){c.value===e&&(s=!1,n("navbar:expand"))},m=function(e){c.value===e&&(s=!0,n("navbar:collapse"))},g=function(e){c.value===e&&(u=!0,n("navbar:transparentshow"))},v=function(e){c.value===e&&(u=!1,n("navbar:transparenthide"))},b=function(e,t){c.value===e&&(a=t?"navbar-"+t:"")},y=function(e,t){c.value===e&&(o=t.role,i=t.detailRoot)},w=function(e){c.value===e&&(l=!0)},x=function(e){c.value===e&&(l=!1)};Jn((function(){c.value&&Db((function(){Eb.navbar.size(c.value),Eb.on("navbarShow",h),Eb.on("navbarHide",d),Eb.on("navbarCollapse",m),Eb.on("navbarExpand",f),Eb.on("navbarPosition",b),Eb.on("navbarRole",y),Eb.on("navbarMasterStack",w),Eb.on("navbarMasterUnstack",x),Eb.on("navbarTransparentShow",g),Eb.on("navbarTransparentHide",v)}))})),er((function(){Eb&&(Eb.off("navbarShow",h),Eb.off("navbarHide",d),Eb.off("navbarCollapse",m),Eb.off("navbarExpand",f),Eb.off("navbarPosition",b),Eb.off("navbarRole",y),Eb.off("navbarMasterStack",w),Eb.off("navbarMasterUnstack",x),Eb.off("navbarTransparentShow",g),Eb.off("navbarTransparentHide",v))}));var k=qa((function(){return p.value&&p.value.ios&&Eb&&!Eb.params.navbar.iosCenterTitle})),C=qa((function(){return p.value&&p.value.md&&Eb&&Eb.params.navbar.mdCenterTitle||p.value&&p.value.aurora&&Eb&&Eb.params.navbar.auroraCenterTitle})),S=qa((function(){return e.large||e.largeTransparent})),E=qa((function(){return e.transparent||S.value&&e.largeTransparent})),T=qa((function(){return E.value&&u})),$=qa((function(){return Sb("navbar",a,{"navbar-hidden":e.hidden,"navbar-large":S.value,"navbar-large-collapsed":S.value&&s,"navbar-transparent":E.value,"navbar-transparent-visible":T.value,"navbar-master":"master"===o,"navbar-master-detail":"detail"===o,"navbar-master-detail-root":!0===i,"navbar-master-stacked":!0===l,"no-shadow":e.noShadow,"no-hairline":e.noHairline},Vb(e))})),I=qa((function(){var t=e.titleLarge;return!t&&e.large&&e.title&&(t=e.title),t})),N=qa((function(){return e.backLink||r["nav-left"]||r.left})),O=qa((function(){return e.title||e.subtitle||r.title})),A=qa((function(){return r["nav-right"]||r.right})),M=qa((function(){return I.value||r["title-large"]})),_=qa((function(){return Sb("navbar-inner",e.innerClass,e.innerClassName,{sliding:e.sliding,"navbar-inner-left-title":k.value,"navbar-inner-centered-title":C.value})}));return{elRef:c,classes:$,innerClasses:_,hide:function(e){Eb&&Eb.navbar.hide(c.value,e)},show:function(e){Eb&&Eb.navbar.show(c.value,e)},size:function(){Eb&&Eb.navbar.size(c.value)},largeTitle:I,hasLeft:N,hasTitle:O,hasRight:A,hasLargeTitle:M,onBackClick:function(e){n("back:click",e),n("click:back",e)}}}};function lk(){return lk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lk.apply(this,arguments)}var uk={key:0,class:"ptr-preloader"},ck=pa("div",{class:"ptr-arrow"},null,-1),pk={key:3,class:"ptr-preloader"},dk=pa("div",{class:"ptr-arrow"},null,-1);var hk={name:"f7-page-content",render:function(e,t){var n=Vr("f7-preloader");return Zr(),aa("div",{ref:"elRef",class:e.classes,"data-ptr-distance":e.ptrDistance||void 0,"data-ptr-mousewheel":e.ptrMousewheel||void 0,"data-infinite-distance":e.infiniteDistance||void 0},[e.ptr&&e.ptrPreloader&&!e.ptrBottom?(Zr(),aa("div",uk,[pa(n),ck])):va("",!0),e.infinite&&e.infinitePreloader&&e.infiniteTop?(Zr(),aa(n,{key:1,class:"infinite-scroll-preloader"})):va("",!0),Sa(e.$slots,"default"),e.infinite&&e.infinitePreloader&&!e.infiniteTop?(Zr(),aa(n,{key:2,class:"infinite-scroll-preloader"})):va("",!0),e.ptr&&e.ptrPreloader&&e.ptrBottom?(Zr(),aa("div",pk,[pa(n),dk])):va("",!0)],10,["data-ptr-distance","data-ptr-mousewheel","data-infinite-distance"])},components:{f7Preloader:Xy},props:lk({tab:Boolean,tabActive:Boolean,ptr:Boolean,ptrDistance:Number,ptrPreloader:{type:Boolean,default:!0},ptrBottom:Boolean,ptrMousewheel:Boolean,infinite:Boolean,infiniteTop:Boolean,infiniteDistance:Number,infinitePreloader:{type:Boolean,default:!0},hideBarsOnScroll:Boolean,hideNavbarOnScroll:Boolean,hideToolbarOnScroll:Boolean,messagesContent:Boolean,loginScreen:Boolean},Wb),emits:["ptr:pullstart","ptr:pullmove","ptr:pullend","ptr:refresh","ptr:done","infinite","ptrPullStart","ptrPullMove","ptrPullEnd","ptrRefresh","ptrDone","tab:hide","tab:show"],setup:function(e,t){var n=t.emit,r=xt(null),a=function(e){r.value===e&&(n("ptr:pullstart"),n("ptrPullStart"))},s=function(e){r.value===e&&(n("ptr:pullmove"),n("ptrPullMove"))},o=function(e){r.value===e&&(n("ptr:pullend"),n("ptrPullEnd"))},i=function(e,t){r.value===e&&(n("ptr:refresh",t),n("ptrRefresh",t))},l=function(e){r.value===e&&(n("ptr:done"),n("ptrDone"))},u=function(e){r.value===e&&n("infinite")};Ry(r,n),Jn((function(){Db((function(){e.ptr&&(Eb.on("ptrPullStart",a),Eb.on("ptrPullMove",s),Eb.on("ptrPullEnd",o),Eb.on("ptrRefresh",i),Eb.on("ptrDone",l)),e.infinite&&Eb.on("infinite",u)}))})),er((function(){Eb&&(Eb.off("ptrPullStart",a),Eb.off("ptrPullMove",s),Eb.off("ptrPullEnd",o),Eb.off("ptrRefresh",i),Eb.off("ptrDone",l),Eb.off("infinite",u))}));var c=qa((function(){return Sb("page-content",{tab:e.tab,"tab-active":e.tabActive,"ptr-content":e.ptr,"ptr-bottom":e.ptrBottom,"infinite-scroll-content":e.infinite,"infinite-scroll-top":e.infiniteTop,"hide-bars-on-scroll":e.hideBarsOnScroll,"hide-navbar-on-scroll":e.hideNavbarOnScroll,"hide-toolbar-on-scroll":e.hideToolbarOnScroll,"messages-content":e.messagesContent,"login-screen-content":e.loginScreen},Vb(e))}));return{elRef:r,classes:c}}};function fk(){return fk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fk.apply(this,arguments)}var mk={name:"f7-page",props:fk({name:String,stacked:Boolean,withSubnavbar:{type:Boolean,default:void 0},subnavbar:{type:Boolean,default:void 0},withNavbarLarge:{type:Boolean,default:void 0},navbarLarge:{type:Boolean,default:void 0},noNavbar:Boolean,noToolbar:Boolean,tabs:Boolean,pageContent:{type:Boolean,default:!0},noSwipeback:Boolean,ptr:Boolean,ptrDistance:Number,ptrPreloader:{type:Boolean,default:!0},ptrBottom:Boolean,ptrMousewheel:Boolean,infinite:Boolean,infiniteTop:Boolean,infiniteDistance:Number,infinitePreloader:{type:Boolean,default:!0},hideBarsOnScroll:Boolean,hideNavbarOnScroll:Boolean,hideToolbarOnScroll:Boolean,messagesContent:Boolean,loginScreen:Boolean},Wb),emits:["page:mounted","page:init","page:reinit","page:beforein","page:beforeout","page:afterout","page:afterin","page:beforeremove","page:beforeunmount","page:tabshow","page:tabhide","ptr:pullstart","ptr:pullmove","ptr:pullend","ptr:refresh","ptr:done","infinite"],setup:function(e,t){var n=t.emit,r=t.slots,a=!1,s=!1,o=!1,i=!1,l="",u=!1,c=null,p=!1,d=!1,h=xt(null),f=function(e){h.value===e.el&&n("page:mounted",e)},m=function(t){h.value===t.el&&(void 0===e.withSubnavbar&&void 0===e.subnavbar&&(t.$navbarEl&&t.$navbarEl.length&&t.$navbarEl.find(".subnavbar").length||t.$el.children(".navbar").find(".subnavbar").length)&&(a=!0),void 0===e.withNavbarLarge&&void 0===e.navbarLarge&&t.$navbarEl&&t.$navbarEl.hasClass("navbar-large")&&(s=!0),n("page:init",t))},g=function(e){h.value===e.el&&n("page:reinit",e)},v=function(e){h.value===e.el&&(e.swipeBack||("next"===e.from&&(l="page-next"),"previous"===e.from&&(l="page-previous")),n("page:beforein",e))},b=function(e){h.value===e.el&&n("page:beforeout",e)},y=function(e){h.value===e.el&&("next"===e.to&&(l="page-next"),"previous"===e.to&&(l="page-previous"),n("page:afterout",e))},w=function(e){h.value===e.el&&(l="page-current",n("page:afterin",e))},x=function(e){h.value===e.el&&n("page:beforeremove",e)},k=function(e){h.value===e.el&&n("page:beforeunmount",e)},C=function(e){h.value===e&&(u=!1)},S=function(e){h.value===e&&(u=!0)},E=function(e,t){h.value===e&&(l="page-"+t)},T=function(e,t){h.value===e&&(c=t.role,p=t.detailRoot)},$=function(e){h.value===e&&(d=!0)},I=function(e){h.value===e&&(d=!1)},N=function(e){h.value===e&&(o=!0)},O=function(e){h.value===e&&(o=!1)},A=function(e,t){h.value===t&&(i=!0)},M=function(e,t){h.value===t&&(i=!1)},_=function(e){h.value===e&&n("page:tabshow")},R=function(e){h.value===e&&n("page:tabhide")},P=function(){n("ptr:pullstart")},D=function(){n("ptr:pullmove")},L=function(){n("ptr:pullend")},B=function(e){n("ptr:refresh",e)},F=function(){n("ptr:done")},z=function(){n("infinite")};Jn((function(){Db((function(){Eb.on("pageMounted",f),Eb.on("pageInit",m),Eb.on("pageReinit",g),Eb.on("pageBeforeIn",v),Eb.on("pageBeforeOut",b),Eb.on("pageAfterOut",y),Eb.on("pageAfterIn",w),Eb.on("pageBeforeRemove",x),Eb.on("pageBeforeUnmount",k),Eb.on("pageStack",C),Eb.on("pageUnstack",S),Eb.on("pagePosition",E),Eb.on("pageRole",T),Eb.on("pageMasterStack",$),Eb.on("pageMasterUnstack",I),Eb.on("pageNavbarLargeCollapsed",N),Eb.on("pageNavbarLargeExpanded",O),Eb.on("cardOpened",A),Eb.on("cardClose",M),Eb.on("pageTabShow",_),Eb.on("pageTabHide",R)}))})),er((function(){Eb&&(Eb.off("pageMounted",f),Eb.off("pageInit",m),Eb.off("pageReinit",g),Eb.off("pageBeforeIn",v),Eb.off("pageBeforeOut",b),Eb.off("pageAfterOut",y),Eb.off("pageAfterIn",w),Eb.off("pageBeforeRemove",x),Eb.off("pageBeforeUnmount",k),Eb.off("pageStack",C),Eb.off("pageUnstack",S),Eb.off("pagePosition",E),Eb.off("pageRole",T),Eb.off("pageMasterStack",$),Eb.off("pageMasterUnstack",I),Eb.off("pageNavbarLargeCollapsed",N),Eb.off("pageNavbarLargeExpanded",O),Eb.off("cardOpened",A),Eb.off("cardClose",M),Eb.off("pageTabShow",_),Eb.off("pageTabHide",R))}));var V=qa((function(){return Sb("page",l,{stacked:e.stacked&&!u,tabs:e.tabs,"page-with-subnavbar":e.subnavbar||e.withSubnavbar,"page-with-navbar-large":e.navbarLarge||e.withNavbarLarge,"no-navbar":e.noNavbar,"no-toolbar":e.noToolbar,"no-swipeback":e.noSwipeback,"page-master":"master"===c,"page-master-detail":"detail"===c,"page-master-detail-root":!0===p,"page-master-stacked":!0===d,"page-with-navbar-large-collapsed":!0===o,"page-with-card-opened":!0===i,"login-screen-page":e.loginScreen},Vb(e))})),W="navbar toolbar tabbar subnavbar searchbar messagebar fab list-index panel".split(" ").map((function(e){return"f7-"+e}));return function(){var t=[],n=[],o=r.static,i=r.fixed,l=r.default,u=!1,c=!1,p=e.messagesContent,d=l&&l();d&&d.forEach((function(r){if(void 0!==r){var a=r.type&&r.type.name?r.type.name:r.type,s=!1;a?("f7-subnavbar"===a&&(u=!0),"f7-navbar"===a&&r.props&&(r.props.large||""===r.props.large)&&(c=!0),void 0===p&&"f7-messages"===a&&(p=!0),W.indexOf(a)>=0&&(s=!0),e.pageContent&&(s?t.push(r):n.push(r))):(e.pageContent||""===e.pageContent)&&n.push(r)}}));var f=V.value;return(u||a)&&void 0===e.subnavbar&&void 0===e.withSubnavbar&&f.indexOf("page-with-subnavbar")<0&&(f+=" page-with-subnavbar"),(c||s)&&void 0===e.navbarLarge&&void 0===e.withNavbarLarge&&f.indexOf("page-with-navbar-large")<0&&(f+=" page-with-navbar-large"),e.pageContent?Xa("div",{class:f,ref:h,"data-name":e.name},[t,i&&i(),Xa(hk,{ptr:e.ptr,ptrDistance:e.ptrDistance,ptrPreloader:e.ptrPreloader,ptrBottom:e.ptrBottom,ptrMousewheel:e.ptrMousewheel,infinite:e.infinite,infiniteTop:e.infiniteTop,infiniteDistance:e.infiniteDistance,infinitePreloader:e.infinitePreloader,hideBarsOnScroll:e.hideBarsOnScroll,hideNavbarOnScroll:e.hideNavbarOnScroll,hideToolbarOnScroll:e.hideToolbarOnScroll,messagesContent:e.messagesContent||p,loginScreen:e.loginScreen,onPtrPullStart:P,onPtrPullMove:D,onPtrPullEnd:L,onPtrRefresh:B,onPtrDone:F,onInfinite:z},(function(){return[o&&o(),n]}))]):Xa("div",{class:f,ref:h,"data-name":e.name},[i&&i(),o&&o(),l&&d])}}};function gk(){return gk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gk.apply(this,arguments)}var vk={key:0,class:"panel-resize-handler"};var bk={name:"f7-panel",render:function(e,t){return Zr(),aa("div",{ref:"elRef",class:e.classes},[Sa(e.$slots,"default"),e.resizable?(Zr(),aa("div",vk)):va("",!0)],2)},props:gk({side:String,effect:String,cover:Boolean,reveal:Boolean,push:Boolean,left:Boolean,right:Boolean,opened:Boolean,resizable:Boolean,backdrop:{type:Boolean,default:!0},backdropEl:{type:String,default:void 0},containerEl:{type:String,default:void 0},visibleBreakpoint:{type:Number,default:void 0},collapsedBreakpoint:{type:Number,default:void 0},swipe:Boolean,swipeNoFollow:Boolean,swipeOnlyClose:Boolean,swipeActiveArea:{type:Number,default:0},swipeThreshold:{type:Number,default:0}},Wb),emits:["panel:open","panel:opened","panel:close","panel:closed","click","panel:backdropclick","panel:swipe","panel:swipeopen","panel:breakpoint","panel:collapsedbreakpoint","panel:resize","update:opened"],setup:function(e,t){var n=t.emit,r=null,a=xt(null),s=!1,o=!1,i=!1,l=!1,u=function(e){s=!0,o=!1,n("panel:open",e),n("update:opened",!0)},c=function(e){n("panel:opened",e)},p=function(e){s=!1,o=!0,n("panel:close",e)},d=function(e){o=!1,n("panel:closed",e),n("update:opened",!1)},h=function(e){n("click",e),n("panel:backdropclick",e)},f=function(e){n("panel:swipe",e)},m=function(e){n("panel:swipeopen",e)},g=function(e){l=!0,i=!1,n("panel:breakpoint",e)},v=function(e){l=!1,i=!0,n("panel:collapsedbreakpoint",e)},b=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.apply(void 0,["panel:resize"].concat(t))};Sn((function(){return e.resizable}),(function(e){r&&(e?r.enableResizable():r.disableResizable())})),Sn((function(){return e.opened}),(function(e){r&&(e?r.open():r.close())})),Jn((function(){Db((function(){var t=Eb.$;if(t){0===t(".panel-backdrop").length&&t('<div class="panel-backdrop"></div>').insertBefore(a.value);var n=yb({el:a.value,resizable:e.resizable,backdrop:e.backdrop,backdropEl:e.backdropEl,containerEl:e.containerEl,visibleBreakpoint:e.visibleBreakpoint,collapsedBreakpoint:e.collapsedBreakpoint,swipe:e.swipe,swipeNoFollow:e.swipeNoFollow,swipeOnlyClose:e.swipeOnlyClose,swipeActiveArea:e.swipeActiveArea,swipeThreshold:e.swipeThreshold,on:{open:u,opened:c,close:p,closed:d,backdropClick:h,swipe:f,swipeOpen:m,collapsedBreakpoint:v,breakpoint:g,resize:b}});r=Eb.panel.create(n),e.opened&&r.open(!1)}}))})),er((function(){r&&r.destroy&&r.destroy(),r=null}));var y=qa((function(){var t,n=e.side||(e.left?"left":"right"),r=e.effect||(e.reveal?"reveal":e.push?"push":"cover");return Sb("panel",((t={"panel-in":s&&!o&&!l,"panel-in-breakpoint":l,"panel-in-collapsed":i,"panel-resizable":e.resizable})["panel-"+n]=n,t["panel-"+r]=r,t),Vb(e))}));return{elRef:a,classes:y}}};function yk(){return yk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yk.apply(this,arguments)}var wk={name:"f7-photo-browser",props:{init:{type:Boolean,default:!0},params:Object,photos:Array,exposition:{type:Boolean,default:!0},expositionHideCaptions:{type:Boolean,default:!1},type:{type:String},navbar:{type:Boolean,default:!0},toolbar:{type:Boolean,default:!0},theme:{type:String},captionsTheme:{type:String},iconsColor:{type:String},swipeToClose:{type:Boolean,default:!0},pageBackLinkText:{type:String,default:void 0},popupCloseLinkText:{type:String,default:void 0},navbarOfText:{type:String,default:void 0},navbarShowCount:{type:Boolean,default:void 0},swiper:{type:Object},url:{type:String},routableModals:{type:Boolean,default:!1},virtualSlides:{type:Boolean,default:!0},view:[String,Object],renderNavbar:Function,renderToolbar:Function,renderCaption:Function,renderObject:Function,renderLazyPhoto:Function,renderPhoto:Function,renderPage:Function,renderPopup:Function,renderStandalone:Function},emits:["photobrowser:open","photobrowser:close","photobrowser:opened","photobrowser:closed","photobrowser:swipetoclose"],setup:function(e,t){var n=t.emit,r=null;return Sn((function(){return e.photos}),(function(e){var t=r;t&&(t.params.photos=e,t.opened&&t.swiper&&t.swiper.update())})),Jn((function(){e.init&&Db((function(){var t;void 0!==e.params?t=e.params:delete(t=yk({},e)).params,Object.keys(t).forEach((function(e){void 0!==t[e]&&""!==t[e]||delete t[e]})),t=Cb({},t,{on:{open:function(){n("photobrowser:open")},close:function(){n("photobrowser:close")},opened:function(){n("photobrowser:opened")},closed:function(){n("photobrowser:closed")},swipeToClose:function(){n("photobrowser:swipetoclose")}}}),r=Eb.photoBrowser.create(t)}))})),er((function(){r&&r.destroy&&r.destroy(),r=null})),{open:function(e){return r.open(e)},close:function(){return r.close()},expositionToggle:function(){return r.expositionToggle()},expositionEnable:function(){return r.expositionEnable()},expositionDisable:function(){return r.expositionDisable()}}},render:function(){return null}};var xk={name:"f7-pie-chart",render:function(e,t){return Zr(),aa("div",{ref:"elRef",class:e.classes},[(Zr(),aa("svg",{xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,viewBox:"-"+e.size/3+" -"+e.size/3+" "+2*e.size/3+" "+2*e.size/3,style:{transform:"rotate(-90deg)"}},[(Zr(!0),aa(Gr,null,Ca(e.paths,(function(n,r){return Zr(),aa("path",{key:n.label||r,d:n.points,fill:n.color,"data-index":r,class:e.classNames({"pie-chart-hidden":null!==e.currentIndex&&e.currentIndex!==r}),onClick:function(t){return e.setCurrentIndex(r)},onMouseenter:function(t){return e.setCurrentIndex(r)},onMouseleave:t[1]||(t[1]=function(t){return e.setCurrentIndex(null)})},null,42,["d","fill","data-index","onClick","onMouseenter"])})),128))],12,["width","height","viewBox"])),Sa(e.$slots,"default")],2)},props:{size:{type:Number,default:320},tooltip:Boolean,datasets:{type:Array,default:function(){return[]}},formatTooltip:Function},emits:["select"],setup:function(e,t){var n=t.emit,r=xt(null),a=null,s=xt(null),o=qa((function(){var t=0;return e.datasets.map((function(e){return e.value||0})).forEach((function(e){t+=e})),t})),i=qa((function(){var t=[],n=0;function r(t){return[Math.cos(2*Math.PI*t)*(e.size/3),Math.sin(2*Math.PI*t)*(e.size/3)]}return e.datasets.forEach((function(a){var s=a.value,i=a.label,l=a.color,u=s/o.value,c=r(n),p=c[0],d=c[1],h=r(n+=u),f=h[0],m=h[1],g=u>.5?1:0,v=["M "+p+" "+d,"A "+e.size/3+" "+e.size/3+" 0 "+g+" 1 "+f+" "+m,"L 0 0"].join(" ");t.push({points:v,label:i,color:l})})),t})),l=function(){if(null===s.value)return"";var t=e.datasets[s.value],n=t.value,r=t.label,a=t.color,i=n/o.value*100,l=function(e){return parseInt(e,10)===e?e:Math.round(100*e)/100};return e.formatTooltip?e.formatTooltip({index:s.value,value:n,label:r,color:a,percentage:i}):'\n      <div class="pie-chart-tooltip-label">\n        <span class="pie-chart-tooltip-color" style="background-color: '+a+';"></span> '+((r?r+": ":"")+l(n)+" ("+l(i)+"%)")+"\n      </div>\n    "};Sn((function(){return s.value}),(function(){n("select",s.value,e.datasets[s.value]),function(){var t=s.value;(null!==t||a)&&e.tooltip&&r.value&&Eb&&(null===t||a?a&&(null!==t?(a.setText(l()),a.setTargetEl(r.value.querySelector('path[data-index="'+t+'"]')),a.show()):a.hide()):(a=Eb.tooltip.create({trigger:"manual",containerEl:r.value,targetEl:r.value.querySelector('path[data-index="'+t+'"]'),text:l(),cssClass:"pie-chart-tooltip"})).show())}()})),er((function(){a&&a.destroy&&a.destroy(),a=null}));var u=qa((function(){return Sb("pie-chart")}));return{elRef:r,currentIndex:s,classes:u,paths:i,classNames:Sb,setCurrentIndex:function(e){s.value=e}}}};function kk(){return kk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kk.apply(this,arguments)}var Ck=pa("div",{class:"popover-angle"},null,-1),Sk={class:"popover-inner"};var Ek={name:"f7-popover",render:function(e,t){return Zr(),aa("div",{ref:"elRef",class:e.classes},[Ck,pa("div",Sk,[Sa(e.$slots,"default")])],2)},props:kk({opened:Boolean,animate:{type:Boolean,default:void 0},targetEl:{type:[String,Object],default:void 0},backdrop:{type:Boolean,default:void 0},backdropEl:{type:[String,Object],default:void 0},closeByBackdropClick:{type:Boolean,default:void 0},closeByOutsideClick:{type:Boolean,default:void 0},closeOnEscape:{type:Boolean,default:void 0},containerEl:{type:[String,Object],default:void 0}},Wb),emits:["popover:open","popover:opened","popover:close","popover:closed","update:opened"],setup:function(e,t){var n=t.emit,r=xt(null),a=e.opened,s=!1,o=xt(null),i=function(e){a=!0,s=!1,n("popover:open",e),n("update:opened",!0)},l=function(e){n("popover:opened",e)},u=function(e){a=!1,s=!0,n("popover:close",e)},c=function(e){s=!1,n("popover:closed",e),n("update:opened",!1)};Sn((function(){return e.opened}),(function(e){r.value&&(e?r.value.open():r.value.close())})),Jn((function(){if(o.value){var t={el:o.value,on:{open:i,opened:l,close:u,closed:c}},n=e.targetEl,a=e.closeByBackdropClick,s=e.closeByOutsideClick,p=e.closeOnEscape,d=e.backdrop,h=e.backdropEl,f=e.containerEl;void 0!==n&&(t.targetEl=n),void 0!==a&&(t.closeByBackdropClick=a),void 0!==s&&(t.closeByOutsideClick=s),void 0!==p&&(t.closeOnEscape=p),void 0!==d&&(t.backdrop=d),void 0!==h&&(t.backdropEl=h),void 0!==f&&(t.containerEl=f),Db((function(){r.value=Eb.popover.create(t),e.opened&&r.value.open(n,!1)}))}})),er((function(){r.value&&r.value.destroy(),r.value=null}));var p=qa((function(){return Sb("popover",dy({isOpened:a,isClosing:s}),Vb(e))}));return{elRef:o,classes:p}}};function Tk(){return Tk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tk.apply(this,arguments)}var $k={name:"f7-popup",render:function(e,t){return Zr(),aa("div",{ref:"elRef",class:e.classes},[Sa(e.$slots,"default")],2)},props:Tk({tabletFullscreen:Boolean,opened:Boolean,animate:{type:Boolean,default:void 0},backdrop:{type:Boolean,default:void 0},backdropEl:{type:[String,Object],default:void 0},closeByBackdropClick:{type:Boolean,default:void 0},closeOnEscape:{type:Boolean,default:void 0},swipeToClose:{type:[Boolean,String],default:!1},swipeHandler:{type:[String,Object],default:void 0},push:Boolean,containerEl:{type:[String,Object],default:void 0}},Wb),emits:["popup:swipestart","popup:swipemove","popup:swipeend","popup:swipeclose","popup:open","popup:opened","popup:close","popup:closed","update:opened"],setup:function(e,t){var n=t.emit,r=xt(null),a=e.opened,s=!1,o=xt(null),i=function(e){n("popup:swipestart",e)},l=function(e){n("popup:swipemove",e)},u=function(e){n("popup:swipeend",e)},c=function(e){n("popup:swipeclose",e)},p=function(e){a=!0,s=!1,n("popup:open",e),n("update:opened",!0)},d=function(e){n("popup:opened",e)},h=function(e){a=!1,s=!0,n("popup:close",e)},f=function(e){s=!1,n("popup:closed",e),n("update:opened",!1)};Sn((function(){return e.opened}),(function(e){r.value&&(e?r.value.open():r.value.close())})),Jn((function(){if(o.value){var t={el:o.value,on:{swipeStart:i,swipeMove:l,swipeEnd:u,swipeClose:c,open:p,opened:d,close:h,closed:f}},n=e.closeByBackdropClick,a=e.closeOnEscape,s=e.animate,m=e.backdrop,g=e.backdropEl,v=e.swipeToClose,b=e.swipeHandler,y=e.containerEl;void 0!==n&&(t.closeByBackdropClick=n),void 0!==a&&(t.closeOnEscape=a),void 0!==s&&(t.animate=s),void 0!==m&&(t.backdrop=m),void 0!==g&&(t.backdropEl=g),void 0!==v&&(t.swipeToClose=v),void 0!==b&&(t.swipeHandler=b),void 0!==y&&(t.containerEl=y),Db((function(){r.value=Eb.popup.create(t),e.opened&&r.value.open(!1)}))}})),er((function(){r.value&&r.value.destroy(),r.value=null}));var m=qa((function(){return Sb("popup",{"popup-tablet-fullscreen":e.tabletFullscreen,"popup-push":e.push},dy({isOpened:a,isClosing:s}),Vb(e))}));return{elRef:o,classes:m}}};function Ik(){return Ik=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ik.apply(this,arguments)}var Nk={name:"f7-progressbar",render:function(e,t){return Zr(),aa("span",{ref:"elRef",class:e.classes,"data-progress":e.progress},[pa("span",{style:e.transformStyle},null,4)],10,["data-progress"])},props:Ik({progress:Number,infinite:Boolean},Wb),setup:function(e){var t=xt(null),n=qa((function(){return{transform:e.progress?"translate3d("+(-100+e.progress)+"%, 0, 0)":"",WebkitTransform:e.progress?"translate3d("+(-100+e.progress)+"%, 0, 0)":""}}));return{classes:qa((function(){return Sb("progressbar",{"progressbar-infinite":e.infinite},Vb(e))})),set:function(e,n){Eb&&Eb.progressbar.set(t.value,e,n)},transformStyle:n,elRef:t}}};function Ok(){return Ok=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ok.apply(this,arguments)}var Ak=pa("i",{class:"icon-radio"},null,-1);var Mk={name:"f7-radio",render:function(e,t){return Zr(),aa("label",{class:e.classes},[pa("input",{ref:"inputElRef",type:"radio",name:e.name,value:e.value,disabled:e.disabled,readonly:e.readonly,checked:e.checked,onChange:t[1]||(t[1]=function(){return e.onChange&&e.onChange.apply(e,arguments)})},null,40,["name","value","disabled","readonly","checked"]),Ak,Sa(e.$slots,"default")],2)},props:Ok({checked:Boolean,name:[Number,String],value:{type:[Number,String,Boolean],default:void 0},disabled:Boolean,readonly:Boolean},Wb),emits:["update:checked","change"],setup:function(e,t){var n=t.emit;return{inputElRef:xt(null),classes:qa((function(){return Sb({radio:!0,disabled:e.disabled},Vb(e))})),onChange:function(e){n("update:checked",e.target.checked),n("change",e)}}}};function _k(){return _k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_k.apply(this,arguments)}var Rk={key:0,class:"resize-handler"};var Pk={name:"f7-row",render:function(e,t){return Zr(),aa(Hr(e.tag),{ref:"elRef",class:e.classes},{default:fn((function(){return[Sa(e.$slots,"default"),e.resizable&&e.resizableHandler?(Zr(),aa("span",Rk)):va("",!0)]})),_:3},8,["class"])},props:_k({noGap:Boolean,tag:{type:String,default:"div"},resizable:Boolean,resizableFixed:Boolean,resizableAbsolute:Boolean,resizableHandler:{type:Boolean,default:!0}},Wb),emits:["grid:resize"],setup:function(e,t){var n=t.emit,r=xt(null),a=function(e){e===r.value&&n("grid:resize")};return Jn((function(){Db((function(){Eb.on("gridResize",a)}))})),er((function(){Eb.off("gridResize",a)})),{classes:qa((function(){return Sb("row",{"no-gap":e.noGap,resizable:e.resizable,"resizable-fixed":e.resizableFixed,"resizable-absolute":e.resizableAbsolute},Vb(e))})),elRef:r}}};function Dk(){return Dk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dk.apply(this,arguments)}var Lk={class:"searchbar-inner"},Bk={class:"searchbar-input-wrap"},Fk=pa("i",{class:"searchbar-icon"},null,-1);var zk={name:"f7-searchbar",render:function(e,t){return Zr(),aa(Hr(e.tag),{ref:"elRef",class:e.classes,onSubmit:e.onSubmit},{default:fn((function(){return[Sa(e.$slots,"before-inner"),pa("div",Lk,[Sa(e.$slots,"inner-start"),pa("div",Bk,[Sa(e.$slots,"input-wrap-start"),pa("input",{value:e.value,placeholder:e.placeholder,spellcheck:e.spellcheck,type:"search",onInput:t[1]||(t[1]=function(){return e.onInput&&e.onInput.apply(e,arguments)}),onChange:t[2]||(t[2]=function(){return e.onChange&&e.onChange.apply(e,arguments)}),onFocus:t[3]||(t[3]=function(){return e.onFocus&&e.onFocus.apply(e,arguments)}),onBlur:t[4]||(t[4]=function(){return e.onBlur&&e.onBlur.apply(e,arguments)})},null,40,["value","placeholder","spellcheck"]),Fk,e.clearButton?(Zr(),aa("span",{key:0,class:"input-clear-button",onClick:t[5]||(t[5]=function(){return e.onClearButtonClick&&e.onClearButtonClick.apply(e,arguments)})})):va("",!0),Sa(e.$slots,"input-wrap-end")]),e.disableButton?(Zr(),aa("span",{key:0,class:"searchbar-disable-button",onClick:t[6]||(t[6]=function(){return e.onDisableButtonClick&&e.onDisableButtonClick.apply(e,arguments)})},m(e.disableButtonText),1)):va("",!0),Sa(e.$slots,"inner-end"),Sa(e.$slots,"default")]),Sa(e.$slots,"after-inner")]})),_:3},8,["class","onSubmit"])},props:Dk({noShadow:Boolean,noHairline:Boolean,form:{type:Boolean,default:!0},placeholder:{type:String,default:"Search"},spellcheck:{type:Boolean,default:void 0},disableButton:{type:Boolean,default:!0},disableButtonText:{type:String,default:"Cancel"},clearButton:{type:Boolean,default:!0},value:[String,Number,Array],inputEvents:{type:String,default:"change input compositionend"},expandable:Boolean,inline:Boolean,searchContainer:[String,Object],searchIn:{type:String,default:".item-title"},searchItem:{type:String,default:"li"},searchGroup:{type:String,default:".list-group"},searchGroupTitle:{type:String,default:".item-divider, .list-group-title"},foundEl:{type:[String,Object],default:".searchbar-found"},notFoundEl:{type:[String,Object],default:".searchbar-not-found"},backdrop:{type:Boolean,default:void 0},backdropEl:[String,Object],hideOnEnableEl:{type:[String,Object],default:".searchbar-hide-on-enable"},hideOnSearchEl:{type:[String,Object],default:".searchbar-hide-on-search"},ignore:{type:String,default:".searchbar-ignore"},customSearch:{type:Boolean,default:!1},removeDiacritics:{type:Boolean,default:!1},hideDividers:{type:Boolean,default:!0},hideGroups:{type:Boolean,default:!0},init:{type:Boolean,default:!0}},Wb),emits:["change","input","focus","blur","submit","click:clear","click:disable","searchbar:search","searchbar:clear","searchbar:enable","searchbar:disable","update:value"],setup:function(e,t){var n=t.emit,r=null,a=xt(null);Jn((function(){e.init&&Db((function(){var t=yb({el:a.value,inputEvents:e.inputEvents,searchContainer:e.searchContainer,searchIn:e.searchIn,searchItem:e.searchItem,searchGroup:e.searchGroup,searchGroupTitle:e.searchGroupTitle,hideOnEnableEl:e.hideOnEnableEl,hideOnSearchEl:e.hideOnSearchEl,foundEl:e.foundEl,notFoundEl:e.notFoundEl,backdrop:e.backdrop,backdropEl:e.backdropEl,disableButton:e.disableButton,ignore:e.ignore,customSearch:e.customSearch,removeDiacritics:e.removeDiacritics,hideDividers:e.hideDividers,hideGroups:e.hideGroups,expandable:e.expandable,inline:e.inline,on:{search:function(e,t,r){n("searchbar:search",e,t,r)},clear:function(e,t){n("searchbar:clear",e,t)},enable:function(e){n("searchbar:enable",e)},disable:function(e){n("searchbar:disable",e)}}});Object.keys(t).forEach((function(e){""===t[e]&&delete t[e]})),r=Eb.searchbar.create(t)}))})),er((function(){r&&r.destroy&&r.destroy(),r=null}));var s=qa((function(){return Sb("searchbar",{"searchbar-inline":e.inline,"no-shadow":e.noShadow,"no-hairline":e.noHairline,"searchbar-expandable":e.expandable},Vb(e))})),o=qa((function(){return e.form?"form":"div"}));return{elRef:a,tag:o,classes:s,search:function(e){if(r)return r.search(e)},enable:function(){if(r)return r.enable()},disable:function(){if(r)return r.disable()},toggle:function(){if(r)return r.toggle()},clear:function(){if(r)return r.clear()},onChange:function(e){n("change",e)},onInput:function(e){n("input",e),n("update:value",e.target.value)},onFocus:function(e){n("focus",e)},onBlur:function(e){n("blur",e)},onSubmit:function(e){n("submit",e)},onClearButtonClick:function(e){n("click:clear",e)},onDisableButtonClick:function(e){n("click:disable",e)}}}};function Vk(){return Vk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vk.apply(this,arguments)}var Wk={key:0,class:"segmented-highlight"};var Hk={name:"f7-segmented",render:function(e,t){return Zr(),aa(Hr(e.tag),{class:e.classes},{default:fn((function(){return[Sa(e.$slots,"default"),e.strong||e.strongIos||e.strongMd||e.strongAurora?(Zr(),aa("span",Wk)):va("",!0)]})),_:3},8,["class"])},props:Vk({raised:Boolean,raisedIos:Boolean,raisedMd:Boolean,raisedAurora:Boolean,round:Boolean,roundIos:Boolean,roundMd:Boolean,roundAurora:Boolean,strong:Boolean,strongIos:Boolean,strongMd:Boolean,strongAurora:Boolean,tag:{type:String,default:"div"}},Wb),setup:function(e){return{classes:qa((function(){return Sb({segmented:!0,"segmented-raised":e.raised,"segmented-raised-ios":e.raisedIos,"segmented-raised-aurora":e.raisedAurora,"segmented-raised-md":e.raisedMd,"segmented-round":e.round,"segmented-round-ios":e.roundIos,"segmented-round-aurora":e.roundAurora,"segmented-round-md":e.roundMd,"segmented-strong":e.strong,"segmented-strong-ios":e.strongIos,"segmented-strong-md":e.strongMd,"segmented-strong-aurora":e.strongAurora},Vb(e))}))}}};function jk(){return jk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jk.apply(this,arguments)}var Uk={name:"f7-sheet",props:jk({opened:Boolean,animate:{type:Boolean,default:void 0},top:Boolean,bottom:Boolean,position:String,backdrop:{type:Boolean,default:void 0},backdropEl:{type:[String,Object],default:void 0},closeByBackdropClick:{type:Boolean,default:void 0},closeByOutsideClick:{type:Boolean,default:void 0},closeOnEscape:{type:Boolean,default:void 0},push:Boolean,swipeToClose:{type:Boolean,default:void 0},swipeToStep:{type:Boolean,default:void 0},swipeHandler:{type:[String,Object],default:void 0},containerEl:{type:[String,Object],default:void 0}},Wb),emits:["sheet:stepprogress","sheet:stepopen","sheet:stepclose","sheet:open","sheet:opened","sheet:close","sheet:closed","update:opened"],setup:function(e,t){var n=t.emit,r=t.slots,a=null,s=e.opened,o=!1,i=xt(null),l=function(e,t){n("sheet:stepprogress",e,t)},u=function(e){n("sheet:stepopen",e)},c=function(e){n("sheet:stepclose",e)},p=function(e){s=!0,o=!1,n("sheet:open",e),n("update:opened",!0)},d=function(e){n("sheet:opened",e)},h=function(e){s=!1,o=!0,n("sheet:close",e)},f=function(e){o=!1,n("sheet:closed",e),n("update:opened",!1)};Jn((function(){if(i.value){var t={el:i.value,on:{open:p,opened:d,close:h,closed:f,stepOpen:u,stepClose:c,stepProgress:l}},n=e.animate,r=e.backdrop,s=e.backdropEl,o=e.closeByBackdropClick,m=e.closeByOutsideClick,g=e.closeOnEscape,v=e.swipeToClose,b=e.swipeToStep,y=e.swipeHandler,w=e.containerEl;void 0!==n&&(t.animate=n),void 0!==r&&(t.backdrop=r),void 0!==s&&(t.backdropEl=s),void 0!==o&&(t.closeByBackdropClick=o),void 0!==m&&(t.closeByOutsideClick=m),void 0!==g&&(t.closeOnEscape=g),void 0!==v&&(t.swipeToClose=v),void 0!==b&&(t.swipeToStep=b),void 0!==y&&(t.swipeHandler=y),void 0!==w&&(t.containerEl=w),Db((function(){a=Eb.sheet.create(t),e.opened&&a.open(!1)}))}})),er((function(){a&&a.destroy(),a=null})),Sn((function(){return e.opened}),(function(e){a&&(e?a.open():a.close())})),["closeByBackdropClick","closeByOutsideClick","closeOnEscape","swipeToClose"].forEach((function(t){Sn((function(){return e[t]}),(function(e){a&&(a.params[t]=e)}))}));var m=qa((function(){var t="bottom";return e.position?t=e.position:e.top?t="top":e.bottom&&(t="bottom"),Sb("sheet-modal","sheet-modal-"+t,{"sheet-modal-push":e.push},dy({isOpened:s,isClosing:o}),Vb(e))})),g="navbar toolbar tabbar subnavbar searchbar messagebar fab list-index panel".split(" ").map((function(e){return"f7-"+e}));return function(){var e=[],t=[];return r.default&&r.default().forEach((function(n){if(void 0!==n){var r=n.type&&n.type.name?n.type.name:n.type;g.indexOf(r)>=0?e.push(n):t.push(n)}})),Xa("div",{class:m.value,ref:i},[e,r.fixed&&r.fixed(),Xa("div",{class:"sheet-modal-inner"},[t,r.static&&r.static()])])}}};var Gk=function(e,t,n,r){const a=.5*Math.min(n,r),s=a/t;return e.replace(/([0-9,\.]{1,})/g,(e=>{e=e.split(",").map((e=>parseFloat(e)));const o=e[0]*s+n/2-t*s/2,i=e[1]*s+r/2-t*s/2;return a>=100?`${Math.round(o)},${Math.round(i)}`:`${o},${i}`}))},qk={name:"skeleton-image",props:{tag:{type:String,default:"span"},width:{type:Number,default:1200},height:{type:Number,default:600},color:String,iconColor:String,showIcon:{type:Boolean,default:!0},effect:String,borderRadius:String},render(){const{tag:e,color:t,iconColor:n,showIcon:r,width:a,height:s,effect:o,borderRadius:i}=this;return Xa(e,{class:{"skeleton-image":!0,[`skeleton-effect-${o}`]:o}},[Xa("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:s,viewBox:`0 0 ${a} ${s}`,style:{borderRadius:i},preserveAspectRatio:"none"},[Xa("polygon",{style:{fill:t},fillRule:"evenodd",points:`0 0 ${a} 0 ${a} ${s} 0 ${s}`}),r&&Xa("path",{style:{fill:n},d:Gk("M7.7148,49.5742 L48.2852,49.5742 C53.1836,49.5742 55.6446,47.1367 55.6446,42.3086 L55.6446,13.6914 C55.6446,8.8633 53.1836,6.4258 48.2852,6.4258 L7.7148,6.4258 C2.8398,6.4258 0.3554,8.8398 0.3554,13.6914 L0.3554,42.3086 C0.3554,47.1602 2.8398,49.5742 7.7148,49.5742 Z M39.2851,27.9414 C38.2304,27.0039 37.0351,26.5118 35.7695,26.5118 C34.457,26.5118 33.3085,26.9571 32.2304,27.918 L21.6366,37.3867 L17.3007,33.4492 C16.3163,32.582 15.2617,32.1133 14.1366,32.1133 C13.1054,32.1133 12.0976,32.5586 11.1366,33.4258 L4.1288,39.7305 L4.1288,13.8789 C4.1288,11.4414 5.4413,10.1992 7.7851,10.1992 L48.2147,10.1992 C50.535,10.1992 51.8708,11.4414 51.8708,13.8789 L51.8708,39.7539 L39.2851,27.9414 Z M17.8163,28.1992 C20.8398,28.1992 23.3241,25.7149 23.3241,22.668 C23.3241,19.6445 20.8398,17.1367 17.8163,17.1367 C14.7695,17.1367 12.2851,19.6445 12.2851,22.668 C12.2851,25.7149 14.7695,28.1992 17.8163,28.1992 Z",56,a,s)})]),this.$slots.default&&this.$slots.default()])}},Xk={name:"skeleton-avatar",props:{tag:{type:String,default:"span"},size:{type:Number,default:48},borderRadius:{type:[String,Number],default:"50%"},color:String,iconColor:String,showIcon:{type:Boolean,default:!0},effect:String},render(){const{tag:e,color:t,iconColor:n,showIcon:r,size:a,borderRadius:s,effect:o}=this;return Xa(e,{class:{"skeleton-avatar":!0,[`skeleton-effect-${o}`]:o}},[Xa("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:`0 0 ${a} ${a}`,preserveAspectRatio:"none"},[Xa("rect",{style:{fill:t},fillRule:"evenodd",width:a,height:a,rx:s}),r&&Xa("path",{style:{fill:n},d:Gk("M28.22461,27.1590817 C34.9209931,27.1590817 40.6829044,21.1791004 40.6829044,13.3926332 C40.6829044,5.69958662 34.8898972,0 28.22461,0 C21.5594557,0 15.7663156,5.82423601 15.7663156,13.4549579 C15.7663156,21.1791004 21.5594557,27.1590817 28.22461,27.1590817 Z M8.66515427,56 L47.7841986,56 C52.6739629,56 54.4181241,54.5984253 54.4181241,51.8576005 C54.4181241,43.8219674 44.358068,32.7341519 28.22461,32.7341519 C12.0600561,32.7341519 2,43.8219674 2,51.8576005 C2,54.5984253 3.74402832,56 8.66515427,56 Z",56,a,a)})]),this.$slots.default&&this.$slots.default()])}},Kk=Xk,Yk={name:"skeleton-block",props:{tag:{type:String,default:"div"},width:[String,Number],height:[String,Number],borderRadius:String,effect:String},render(){return Xa(this.tag,{class:{"skeleton-block":!0,[`skeleton-effect-${this.effect}`]:this.effect},style:{width:this.width,height:this.height,borderRadius:this.borderRadius}},this.$slots.default&&this.$slots.default())}},Jk=qk,Zk={name:"skeleton-text",props:{tag:{type:String,default:"span"},effect:String},render(){return Xa(this.tag,{class:{"skeleton-text":!0,[`skeleton-effect-${this.effect}`]:this.effect}},this.$slots.default&&this.$slots.default())}};function Qk(){return Qk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qk.apply(this,arguments)}var eC={key:0,class:"stepper-input-wrap"},tC={key:1,class:"stepper-value"};var nC={name:"f7-stepper",render:function(e,t){return Zr(),aa("div",{ref:"elRef",class:e.classes},[pa("div",{class:"stepper-button-minus",onClick:t[1]||(t[1]=function(){return e.onMinusClick&&e.onMinusClick.apply(e,arguments)})}),e.input&&!e.buttonsOnly?(Zr(),aa("div",eC,[pa("input",{id:e.inputId,name:e.name,type:e.inputType,min:"number"===e.inputType?e.min:void 0,max:"number"===e.inputType?e.max:void 0,step:"number"===e.inputType?e.step:void 0,value:e.value,readonly:e.inputReadonly,onInput:t[2]||(t[2]=function(){return e.onInput&&e.onInput.apply(e,arguments)}),onChange:t[3]||(t[3]=function(){return e.onChange&&e.onChange.apply(e,arguments)})},null,40,["id","name","type","min","max","step","value","readonly"])])):va("",!0),e.input||e.buttonsOnly?va("",!0):(Zr(),aa("div",tC,m(e.value),1)),pa("div",{class:"stepper-button-plus",onClick:t[4]||(t[4]=function(){return e.onPlusClick&&e.onPlusClick.apply(e,arguments)})})],2)},props:Qk({init:{type:Boolean,default:!0},value:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},formatValue:Function,name:String,inputId:String,input:{type:Boolean,default:!0},inputType:{type:String,default:"text"},inputReadonly:{type:Boolean,default:!1},autorepeat:{type:Boolean,default:!1},autorepeatDynamic:{type:Boolean,default:!1},wraps:{type:Boolean,default:!1},manualInputMode:{type:Boolean,default:!1},decimalPoint:{type:Number,default:4},buttonsEndInputMode:{type:Boolean,default:!0},disabled:Boolean,buttonsOnly:Boolean,round:Boolean,roundMd:Boolean,roundIos:Boolean,roundAurora:Boolean,fill:Boolean,fillMd:Boolean,fillIos:Boolean,fillAurora:Boolean,large:Boolean,largeMd:Boolean,largeIos:Boolean,largeAurora:Boolean,small:Boolean,smallMd:Boolean,smallIos:Boolean,smallAurora:Boolean,raised:Boolean,raisedMd:Boolean,raisedIos:Boolean,raisedAurora:Boolean},Wb),emits:["input","change","stepper:minusclick","stepper:plusclick","stepper:change","update:value"],setup:function(e,t){var n=t.emit,r=null,a=xt(null);Sn((function(){return e.value}),(function(e){r&&r.setValue(e)})),Jn((function(){Db((function(){e.init&&a.value&&(r=Eb.stepper.create(yb({el:a.value,min:e.min,max:e.max,value:e.value,step:e.step,formatValue:e.formatValue,autorepeat:e.autorepeat,autorepeatDynamic:e.autorepeatDynamic,wraps:e.wraps,manualInputMode:e.manualInputMode,decimalPoint:e.decimalPoint,buttonsEndInputMode:e.buttonsEndInputMode,on:{change:function(e,t){n("stepper:change",t),n("update:value",t)}}})))}))})),er((function(){r&&r.destroy&&r.destroy(),r=null}));var s=qa((function(){return Sb("stepper",{disabled:e.disabled,"stepper-round":e.round,"stepper-round-ios":e.roundIos,"stepper-round-md":e.roundMd,"stepper-round-aurora":e.roundAurora,"stepper-fill":e.fill,"stepper-fill-ios":e.fillIos,"stepper-fill-md":e.fillMd,"stepper-fill-aurora":e.fillAurora,"stepper-large":e.large,"stepper-large-ios":e.largeIos,"stepper-large-md":e.largeMd,"stepper-large-aurora":e.largeAurora,"stepper-small":e.small,"stepper-small-ios":e.smallIos,"stepper-small-md":e.smallMd,"stepper-small-aurora":e.smallAurora,"stepper-raised":e.raised,"stepper-raised-ios":e.raisedIos,"stepper-raised-md":e.raisedMd,"stepper-raised-aurora":e.raisedAurora},Vb(e))}));return{elRef:a,classes:s,increment:function(){r&&r.increment()},decrement:function(){r&&r.decrement()},setValue:function(e){r&&r.setValue&&r.setValue(e)},getValue:function(){if(r&&r.getValue)return r.getValue()},onInput:function(e){n("input",e,r)},onChange:function(e){n("change",e,r)},onMinusClick:function(e){n("stepper:minusclick",e,r)},onPlusClick:function(e){n("stepper:plusclick",e,r)}}}};function rC(){return rC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rC.apply(this,arguments)}var aC={key:0,class:"subnavbar-inner"},sC={key:0,class:"subnavbar-title"};var oC={name:"f7-subnavbar",render:function(e,t){return Zr(),aa("div",{class:e.classes},[e.inner?(Zr(),aa("div",aC,[e.title?(Zr(),aa("div",sC,m(e.title),1)):va("",!0),Sa(e.$slots,"default")])):Sa(e.$slots,"default",{key:1})],2)},props:rC({sliding:Boolean,title:String,inner:{type:Boolean,default:!0}},Wb),setup:function(e){return{classes:qa((function(){return Sb("subnavbar",{sliding:e.sliding},Vb(e))}))}}};function iC(){return iC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iC.apply(this,arguments)}var lC={name:"f7-swipeout-actions",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default")],2)},props:iC({left:Boolean,right:Boolean,side:String},Wb),setup:function(e){var t=qa((function(){var t=e.side;return t||(e.left&&(t="left"),e.right&&(t="right")),t}));return{classes:qa((function(){return Sb("swipeout-actions-"+t.value,Vb(e))}))}}};function uC(){return uC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uC.apply(this,arguments)}var cC={name:"f7-swipeout-button",render:function(e,t){return Zr(),aa("a",{href:e.href||"#","data-confirm":e.confirmText||void 0,"data-confirm-title":e.confirmTitle||void 0,class:e.classes,onClick:t[1]||(t[1]=function(){return e.onClick&&e.onClick.apply(e,arguments)})},[ma(m(e.text)+" ",1),Sa(e.$slots,"default")],10,["href","data-confirm","data-confirm-title"])},props:uC({text:String,confirmTitle:String,confirmText:String,overswipe:Boolean,close:Boolean,delete:Boolean,href:String},Wb),emits:["click"],setup:function(e,t){var n=t.emit;return{classes:qa((function(){return Sb({"swipeout-overswipe":e.overswipe,"swipeout-delete":e.delete,"swipeout-close":e.close},Vb(e))})),onClick:function(e){n("click",e)}}}};function pC(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function dC(e={},t={}){Object.keys(t).forEach((n=>{void 0===e[n]?e[n]=t[n]:pC(t[n])&&pC(e[n])&&Object.keys(t[n]).length>0&&dC(e[n],t[n])}))}const hC={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function fC(){const e="undefined"!=typeof document?document:{};return dC(e,hC),e}const mC={document:hC,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:e=>"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0),cancelAnimationFrame(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function gC(){const e="undefined"!=typeof window?window:{};return dC(e,mC),e}class vC extends Array{constructor(e){"number"==typeof e?super(e):(super(...e||[]),function(e){const t=e.__proto__;Object.defineProperty(e,"__proto__",{get:()=>t,set(e){t.__proto__=e}})}(this))}}function bC(e=[]){const t=[];return e.forEach((e=>{Array.isArray(e)?t.push(...bC(e)):t.push(e)})),t}function yC(e,t){return Array.prototype.filter.call(e,t)}function wC(e,t){const n=gC(),r=fC();let a=[];if(!t&&e instanceof vC)return e;if(!e)return new vC(a);if("string"==typeof e){const n=e.trim();if(n.indexOf("<")>=0&&n.indexOf(">")>=0){let e="div";0===n.indexOf("<li")&&(e="ul"),0===n.indexOf("<tr")&&(e="tbody"),0!==n.indexOf("<td")&&0!==n.indexOf("<th")||(e="tr"),0===n.indexOf("<tbody")&&(e="table"),0===n.indexOf("<option")&&(e="select");const t=r.createElement(e);t.innerHTML=n;for(let e=0;e<t.childNodes.length;e+=1)a.push(t.childNodes[e])}else a=function(e,t){if("string"!=typeof e)return[e];const n=[],r=t.querySelectorAll(e);for(let e=0;e<r.length;e+=1)n.push(r[e]);return n}(e.trim(),t||r)}else if(e.nodeType||e===n||e===r)a.push(e);else if(Array.isArray(e)){if(e instanceof vC)return e;a=e}return new vC(function(e){const t=[];for(let n=0;n<e.length;n+=1)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(a))}wC.fn=vC.prototype;const xC="resize scroll".split(" ");function kC(e){return function(...t){if(void 0===t[0]){for(let t=0;t<this.length;t+=1)xC.indexOf(e)<0&&(e in this[t]?this[t][e]():wC(this[t]).trigger(e));return this}return this.on(e,...t)}}kC("click"),kC("blur"),kC("focus"),kC("focusin"),kC("focusout"),kC("keyup"),kC("keydown"),kC("keypress"),kC("submit"),kC("change"),kC("mousedown"),kC("mousemove"),kC("mouseup"),kC("mouseenter"),kC("mouseleave"),kC("mouseout"),kC("mouseover"),kC("touchstart"),kC("touchend"),kC("touchmove"),kC("resize"),kC("scroll");const CC={addClass:function(...e){const t=bC(e.map((e=>e.split(" "))));return this.forEach((e=>{e.classList.add(...t)})),this},removeClass:function(...e){const t=bC(e.map((e=>e.split(" "))));return this.forEach((e=>{e.classList.remove(...t)})),this},hasClass:function(...e){const t=bC(e.map((e=>e.split(" "))));return yC(this,(e=>t.filter((t=>e.classList.contains(t))).length>0)).length>0},toggleClass:function(...e){const t=bC(e.map((e=>e.split(" "))));this.forEach((e=>{t.forEach((t=>{e.classList.toggle(t)}))}))},attr:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(let n=0;n<this.length;n+=1)if(2===arguments.length)this[n].setAttribute(e,t);else for(const t in e)this[n][t]=e[t],this[n].setAttribute(t,e[t]);return this},removeAttr:function(e){for(let t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},transform:function(e){for(let t=0;t<this.length;t+=1)this[t].style.transform=e;return this},transition:function(e){for(let t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!=typeof e?`${e}ms`:e;return this},on:function(...e){let[t,n,r,a]=e;function s(e){const t=e.target;if(!t)return;const a=e.target.dom7EventData||[];if(a.indexOf(e)<0&&a.unshift(e),wC(t).is(n))r.apply(t,a);else{const e=wC(t).parents();for(let t=0;t<e.length;t+=1)wC(e[t]).is(n)&&r.apply(e[t],a)}}function o(e){const t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),r.apply(this,t)}"function"==typeof e[1]&&([t,r,a]=e,n=void 0),a||(a=!1);const i=t.split(" ");let l;for(let e=0;e<this.length;e+=1){const t=this[e];if(n)for(l=0;l<i.length;l+=1){const e=i[l];t.dom7LiveListeners||(t.dom7LiveListeners={}),t.dom7LiveListeners[e]||(t.dom7LiveListeners[e]=[]),t.dom7LiveListeners[e].push({listener:r,proxyListener:s}),t.addEventListener(e,s,a)}else for(l=0;l<i.length;l+=1){const e=i[l];t.dom7Listeners||(t.dom7Listeners={}),t.dom7Listeners[e]||(t.dom7Listeners[e]=[]),t.dom7Listeners[e].push({listener:r,proxyListener:o}),t.addEventListener(e,o,a)}}return this},off:function(...e){let[t,n,r,a]=e;"function"==typeof e[1]&&([t,r,a]=e,n=void 0),a||(a=!1);const s=t.split(" ");for(let e=0;e<s.length;e+=1){const t=s[e];for(let e=0;e<this.length;e+=1){const s=this[e];let o;if(!n&&s.dom7Listeners?o=s.dom7Listeners[t]:n&&s.dom7LiveListeners&&(o=s.dom7LiveListeners[t]),o&&o.length)for(let e=o.length-1;e>=0;e-=1){const n=o[e];r&&n.listener===r||r&&n.listener&&n.listener.dom7proxy&&n.listener.dom7proxy===r?(s.removeEventListener(t,n.proxyListener,a),o.splice(e,1)):r||(s.removeEventListener(t,n.proxyListener,a),o.splice(e,1))}}}return this},trigger:function(...e){const t=gC(),n=e[0].split(" "),r=e[1];for(let a=0;a<n.length;a+=1){const s=n[a];for(let n=0;n<this.length;n+=1){const a=this[n];if(t.CustomEvent){const n=new t.CustomEvent(s,{detail:r,bubbles:!0,cancelable:!0});a.dom7EventData=e.filter(((e,t)=>t>0)),a.dispatchEvent(n),a.dom7EventData=[],delete a.dom7EventData}}}return this},transitionEnd:function(e){const t=this;return e&&t.on("transitionend",(function n(r){r.target===this&&(e.call(this,r),t.off("transitionend",n))})),this},outerWidth:function(e){if(this.length>0){if(e){const e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){const e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){const e=gC();return this[0]?e.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){const e=gC(),t=fC(),n=this[0],r=n.getBoundingClientRect(),a=t.body,s=n.clientTop||a.clientTop||0,o=n.clientLeft||a.clientLeft||0,i=n===e?e.scrollY:n.scrollTop,l=n===e?e.scrollX:n.scrollLeft;return{top:r.top+i-s,left:r.left+l-o}}return null},css:function(e,t){const n=gC();let r;if(1===arguments.length){if("string"!=typeof e){for(r=0;r<this.length;r+=1)for(const t in e)this[r].style[t]=e[t];return this}if(this[0])return n.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(r=0;r<this.length;r+=1)this[r].style[e]=t;return this}return this},each:function(e){return e?(this.forEach(((t,n)=>{e.apply(t,[t,n])})),this):this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:null;for(let t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(let t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){const t=gC(),n=fC(),r=this[0];let a,s;if(!r||void 0===e)return!1;if("string"==typeof e){if(r.matches)return r.matches(e);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(r.msMatchesSelector)return r.msMatchesSelector(e);for(a=wC(e),s=0;s<a.length;s+=1)if(a[s]===r)return!0;return!1}if(e===n)return r===n;if(e===t)return r===t;if(e.nodeType||e instanceof vC){for(a=e.nodeType?[e]:e,s=0;s<a.length;s+=1)if(a[s]===r)return!0;return!1}return!1},index:function(){let e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;const t=this.length;if(e>t-1)return wC([]);if(e<0){const n=t+e;return wC(n<0?[]:[this[n]])}return wC([this[e]])},append:function(...e){let t;const n=fC();for(let r=0;r<e.length;r+=1){t=e[r];for(let e=0;e<this.length;e+=1)if("string"==typeof t){const r=n.createElement("div");for(r.innerHTML=t;r.firstChild;)this[e].appendChild(r.firstChild)}else if(t instanceof vC)for(let n=0;n<t.length;n+=1)this[e].appendChild(t[n]);else this[e].appendChild(t)}return this},prepend:function(e){const t=fC();let n,r;for(n=0;n<this.length;n+=1)if("string"==typeof e){const a=t.createElement("div");for(a.innerHTML=e,r=a.childNodes.length-1;r>=0;r-=1)this[n].insertBefore(a.childNodes[r],this[n].childNodes[0])}else if(e instanceof vC)for(r=0;r<e.length;r+=1)this[n].insertBefore(e[r],this[n].childNodes[0]);else this[n].insertBefore(e,this[n].childNodes[0]);return this},next:function(e){return this.length>0?e?this[0].nextElementSibling&&wC(this[0].nextElementSibling).is(e)?wC([this[0].nextElementSibling]):wC([]):this[0].nextElementSibling?wC([this[0].nextElementSibling]):wC([]):wC([])},nextAll:function(e){const t=[];let n=this[0];if(!n)return wC([]);for(;n.nextElementSibling;){const r=n.nextElementSibling;e?wC(r).is(e)&&t.push(r):t.push(r),n=r}return wC(t)},prev:function(e){if(this.length>0){const t=this[0];return e?t.previousElementSibling&&wC(t.previousElementSibling).is(e)?wC([t.previousElementSibling]):wC([]):t.previousElementSibling?wC([t.previousElementSibling]):wC([])}return wC([])},prevAll:function(e){const t=[];let n=this[0];if(!n)return wC([]);for(;n.previousElementSibling;){const r=n.previousElementSibling;e?wC(r).is(e)&&t.push(r):t.push(r),n=r}return wC(t)},parent:function(e){const t=[];for(let n=0;n<this.length;n+=1)null!==this[n].parentNode&&(e?wC(this[n].parentNode).is(e)&&t.push(this[n].parentNode):t.push(this[n].parentNode));return wC(t)},parents:function(e){const t=[];for(let n=0;n<this.length;n+=1){let r=this[n].parentNode;for(;r;)e?wC(r).is(e)&&t.push(r):t.push(r),r=r.parentNode}return wC(t)},closest:function(e){let t=this;return void 0===e?wC([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){const t=[];for(let n=0;n<this.length;n+=1){const r=this[n].querySelectorAll(e);for(let e=0;e<r.length;e+=1)t.push(r[e])}return wC(t)},children:function(e){const t=[];for(let n=0;n<this.length;n+=1){const r=this[n].children;for(let n=0;n<r.length;n+=1)e&&!wC(r[n]).is(e)||t.push(r[n])}return wC(t)},filter:function(e){return wC(yC(this,e))},remove:function(){for(let e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}};Object.keys(CC).forEach((e=>{Object.defineProperty(wC.fn,e,{value:CC[e],writable:!0})}));var SC=wC;function EC(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function TC(){return Date.now()}function $C(e,t){void 0===t&&(t="x");const n=gC();let r,a,s;const o=function(e){const t=gC();let n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}(e);return n.WebKitCSSMatrix?(a=o.transform||o.webkitTransform,a.split(",").length>6&&(a=a.split(", ").map((e=>e.replace(",","."))).join(", ")),s=new n.WebKitCSSMatrix("none"===a?"":a)):(s=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=s.toString().split(",")),"x"===t&&(a=n.WebKitCSSMatrix?s.m41:16===r.length?parseFloat(r[12]):parseFloat(r[4])),"y"===t&&(a=n.WebKitCSSMatrix?s.m42:16===r.length?parseFloat(r[13]):parseFloat(r[5])),a||0}function IC(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function NC(e){return"undefined"!=typeof window&&void 0!==window.HTMLElement?e instanceof HTMLElement:e&&(1===e.nodeType||11===e.nodeType)}function OC(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){const r=n<0||arguments.length<=n?void 0:arguments[n];if(null!=r&&!NC(r)){const n=Object.keys(Object(r)).filter((e=>t.indexOf(e)<0));for(let t=0,a=n.length;t<a;t+=1){const a=n[t],s=Object.getOwnPropertyDescriptor(r,a);void 0!==s&&s.enumerable&&(IC(e[a])&&IC(r[a])?r[a].__swiper__?e[a]=r[a]:OC(e[a],r[a]):!IC(e[a])&&IC(r[a])?(e[a]={},r[a].__swiper__?e[a]=r[a]:OC(e[a],r[a])):e[a]=r[a])}}}return e}function AC(e,t,n){e.style.setProperty(t,n)}function MC(e){let{swiper:t,targetPosition:n,side:r}=e;const a=gC(),s=-t.translate;let o,i=null;const l=t.params.speed;t.wrapperEl.style.scrollSnapType="none",a.cancelAnimationFrame(t.cssModeFrameID);const u=n>s?"next":"prev",c=(e,t)=>"next"===u&&e>=t||"prev"===u&&e<=t,p=()=>{o=(new Date).getTime(),null===i&&(i=o);const e=Math.max(Math.min((o-i)/l,1),0),u=.5-Math.cos(e*Math.PI)/2;let d=s+u*(n-s);if(c(d,n)&&(d=n),t.wrapperEl.scrollTo({[r]:d}),c(d,n))return t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout((()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[r]:d})})),void a.cancelAnimationFrame(t.cssModeFrameID);t.cssModeFrameID=a.requestAnimationFrame(p)};p()}let _C,RC,PC;function DC(){return _C||(_C=function(){const e=gC(),t=fC();return{smoothScroll:t.documentElement&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),passiveListener:function(){let t=!1;try{const n=Object.defineProperty({},"passive",{get(){t=!0}});e.addEventListener("testPassiveListener",null,n)}catch(e){}return t}(),gestures:"ongesturestart"in e}}()),_C}function LC(e){return void 0===e&&(e={}),RC||(RC=function(e){let{userAgent:t}=void 0===e?{}:e;const n=DC(),r=gC(),a=r.navigator.platform,s=t||r.navigator.userAgent,o={ios:!1,android:!1},i=r.screen.width,l=r.screen.height,u=s.match(/(Android);?[\s\/]+([\d.]+)?/);let c=s.match(/(iPad).*OS\s([\d_]+)/);const p=s.match(/(iPod)(.*OS\s([\d_]+))?/),d=!c&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h="Win32"===a;let f="MacIntel"===a;return!c&&f&&n.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${i}x${l}`)>=0&&(c=s.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),f=!1),u&&!h&&(o.os="android",o.android=!0),(c||d||p)&&(o.os="ios",o.ios=!0),o}(e)),RC}function BC(){return PC||(PC=function(){const e=gC();return{isSafari:function(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}()),PC}var FC={on(e,t,n){const r=this;if("function"!=typeof t)return r;const a=n?"unshift":"push";return e.split(" ").forEach((e=>{r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][a](t)})),r},once(e,t,n){const r=this;if("function"!=typeof t)return r;function a(){r.off(e,a),a.__emitterProxy&&delete a.__emitterProxy;for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];t.apply(r,s)}return a.__emitterProxy=t,r.on(e,a,n)},onAny(e,t){const n=this;if("function"!=typeof e)return n;const r=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[r](e),n},offAny(e){const t=this;if(!t.eventsAnyListeners)return t;const n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){const n=this;return n.eventsListeners?(e.split(" ").forEach((e=>{void 0===t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach(((r,a)=>{(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[e].splice(a,1)}))})),n):n},emit(){const e=this;if(!e.eventsListeners)return e;let t,n,r;for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];"string"==typeof s[0]||Array.isArray(s[0])?(t=s[0],n=s.slice(1,s.length),r=e):(t=s[0].events,n=s[0].data,r=s[0].context||e),n.unshift(r);return(Array.isArray(t)?t:t.split(" ")).forEach((t=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach((e=>{e.apply(r,[t,...n])})),e.eventsListeners&&e.eventsListeners[t]&&e.eventsListeners[t].forEach((e=>{e.apply(r,n)}))})),e}};var zC={updateSize:function(){const e=this;let t,n;const r=e.$el;t=void 0!==e.params.width&&null!==e.params.width?e.params.width:r[0].clientWidth,n=void 0!==e.params.height&&null!==e.params.height?e.params.height:r[0].clientHeight,0===t&&e.isHorizontal()||0===n&&e.isVertical()||(t=t-parseInt(r.css("padding-left")||0,10)-parseInt(r.css("padding-right")||0,10),n=n-parseInt(r.css("padding-top")||0,10)-parseInt(r.css("padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))},updateSlides:function(){const e=this;function t(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}function n(e,n){return parseFloat(e.getPropertyValue(t(n))||0)}const r=e.params,{$wrapperEl:a,size:s,rtlTranslate:o,wrongRTL:i}=e,l=e.virtual&&r.virtual.enabled,u=l?e.virtual.slides.length:e.slides.length,c=a.children(`.${e.params.slideClass}`),p=l?e.virtual.slides.length:c.length;let d=[];const h=[],f=[];let m=r.slidesOffsetBefore;"function"==typeof m&&(m=r.slidesOffsetBefore.call(e));let g=r.slidesOffsetAfter;"function"==typeof g&&(g=r.slidesOffsetAfter.call(e));const v=e.snapGrid.length,b=e.slidesGrid.length;let y=r.spaceBetween,w=-m,x=0,k=0;if(void 0===s)return;"string"==typeof y&&y.indexOf("%")>=0&&(y=parseFloat(y.replace("%",""))/100*s),e.virtualSize=-y,o?c.css({marginLeft:"",marginBottom:"",marginTop:""}):c.css({marginRight:"",marginBottom:"",marginTop:""}),r.centeredSlides&&r.cssMode&&(AC(e.wrapperEl,"--swiper-centered-offset-before",""),AC(e.wrapperEl,"--swiper-centered-offset-after",""));const C=r.grid&&r.grid.rows>1&&e.grid;let S;C&&e.grid.initSlides(p);const E="auto"===r.slidesPerView&&r.breakpoints&&Object.keys(r.breakpoints).filter((e=>void 0!==r.breakpoints[e].slidesPerView)).length>0;for(let a=0;a<p;a+=1){S=0;const o=c.eq(a);if(C&&e.grid.updateSlide(a,o,p,t),"none"!==o.css("display")){if("auto"===r.slidesPerView){E&&(c[a].style[t("width")]="");const s=getComputedStyle(o[0]),i=o[0].style.transform,l=o[0].style.webkitTransform;if(i&&(o[0].style.transform="none"),l&&(o[0].style.webkitTransform="none"),r.roundLengths)S=e.isHorizontal()?o.outerWidth(!0):o.outerHeight(!0);else{const e=n(s,"width"),t=n(s,"padding-left"),r=n(s,"padding-right"),a=n(s,"margin-left"),i=n(s,"margin-right"),l=s.getPropertyValue("box-sizing");if(l&&"border-box"===l)S=e+a+i;else{const{clientWidth:n,offsetWidth:s}=o[0];S=e+t+r+a+i+(s-n)}}i&&(o[0].style.transform=i),l&&(o[0].style.webkitTransform=l),r.roundLengths&&(S=Math.floor(S))}else S=(s-(r.slidesPerView-1)*y)/r.slidesPerView,r.roundLengths&&(S=Math.floor(S)),c[a]&&(c[a].style[t("width")]=`${S}px`);c[a]&&(c[a].swiperSlideSize=S),f.push(S),r.centeredSlides?(w=w+S/2+x/2+y,0===x&&0!==a&&(w=w-s/2-y),0===a&&(w=w-s/2-y),Math.abs(w)<.001&&(w=0),r.roundLengths&&(w=Math.floor(w)),k%r.slidesPerGroup==0&&d.push(w),h.push(w)):(r.roundLengths&&(w=Math.floor(w)),(k-Math.min(e.params.slidesPerGroupSkip,k))%e.params.slidesPerGroup==0&&d.push(w),h.push(w),w=w+S+y),e.virtualSize+=S+y,x=S,k+=1}}if(e.virtualSize=Math.max(e.virtualSize,s)+g,o&&i&&("slide"===r.effect||"coverflow"===r.effect)&&a.css({width:`${e.virtualSize+r.spaceBetween}px`}),r.setWrapperSize&&a.css({[t("width")]:`${e.virtualSize+r.spaceBetween}px`}),C&&e.grid.updateWrapperSize(S,d,t),!r.centeredSlides){const t=[];for(let n=0;n<d.length;n+=1){let a=d[n];r.roundLengths&&(a=Math.floor(a)),d[n]<=e.virtualSize-s&&t.push(a)}d=t,Math.floor(e.virtualSize-s)-Math.floor(d[d.length-1])>1&&d.push(e.virtualSize-s)}if(0===d.length&&(d=[0]),0!==r.spaceBetween){const n=e.isHorizontal()&&o?"marginLeft":t("marginRight");c.filter(((e,t)=>!r.cssMode||t!==c.length-1)).css({[n]:`${y}px`})}if(r.centeredSlides&&r.centeredSlidesBounds){let e=0;f.forEach((t=>{e+=t+(r.spaceBetween?r.spaceBetween:0)})),e-=r.spaceBetween;const t=e-s;d=d.map((e=>e<0?-m:e>t?t+g:e))}if(r.centerInsufficientSlides){let e=0;if(f.forEach((t=>{e+=t+(r.spaceBetween?r.spaceBetween:0)})),e-=r.spaceBetween,e<s){const t=(s-e)/2;d.forEach(((e,n)=>{d[n]=e-t})),h.forEach(((e,n)=>{h[n]=e+t}))}}if(Object.assign(e,{slides:c,snapGrid:d,slidesGrid:h,slidesSizesGrid:f}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){AC(e.wrapperEl,"--swiper-centered-offset-before",-d[0]+"px"),AC(e.wrapperEl,"--swiper-centered-offset-after",e.size/2-f[f.length-1]/2+"px");const t=-e.snapGrid[0],n=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map((e=>e+t)),e.slidesGrid=e.slidesGrid.map((e=>e+n))}if(p!==u&&e.emit("slidesLengthChange"),d.length!==v&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),h.length!==b&&e.emit("slidesGridLengthChange"),r.watchSlidesProgress&&e.updateSlidesOffset(),!(l||r.cssMode||"slide"!==r.effect&&"fade"!==r.effect)){const t=`${r.containerModifierClass}backface-hidden`,n=e.$el.hasClass(t);p<=r.maxBackfaceHiddenSlides?n||e.$el.addClass(t):n&&e.$el.removeClass(t)}},updateAutoHeight:function(e){const t=this,n=[],r=t.virtual&&t.params.virtual.enabled;let a,s=0;"number"==typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);const o=e=>r?t.slides.filter((t=>parseInt(t.getAttribute("data-swiper-slide-index"),10)===e))[0]:t.slides.eq(e)[0];if("auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)t.visibleSlides.each((e=>{n.push(e)}));else for(a=0;a<Math.ceil(t.params.slidesPerView);a+=1){const e=t.activeIndex+a;if(e>t.slides.length&&!r)break;n.push(o(e))}else n.push(o(t.activeIndex));for(a=0;a<n.length;a+=1)if(void 0!==n[a]){const e=n[a].offsetHeight;s=e>s?e:s}(s||0===s)&&t.$wrapperEl.css("height",`${s}px`)},updateSlidesOffset:function(){const e=this,t=e.slides;for(let n=0;n<t.length;n+=1)t[n].swiperSlideOffset=e.isHorizontal()?t[n].offsetLeft:t[n].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);const t=this,n=t.params,{slides:r,rtlTranslate:a,snapGrid:s}=t;if(0===r.length)return;void 0===r[0].swiperSlideOffset&&t.updateSlidesOffset();let o=-e;a&&(o=e),r.removeClass(n.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(let e=0;e<r.length;e+=1){const i=r[e];let l=i.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(l-=r[0].swiperSlideOffset);const u=(o+(n.centeredSlides?t.minTranslate():0)-l)/(i.swiperSlideSize+n.spaceBetween),c=(o-s[0]+(n.centeredSlides?t.minTranslate():0)-l)/(i.swiperSlideSize+n.spaceBetween),p=-(o-l),d=p+t.slidesSizesGrid[e];(p>=0&&p<t.size-1||d>1&&d<=t.size||p<=0&&d>=t.size)&&(t.visibleSlides.push(i),t.visibleSlidesIndexes.push(e),r.eq(e).addClass(n.slideVisibleClass)),i.progress=a?-u:u,i.originalProgress=a?-c:c}t.visibleSlides=SC(t.visibleSlides)},updateProgress:function(e){const t=this;if(void 0===e){const n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}const n=t.params,r=t.maxTranslate()-t.minTranslate();let{progress:a,isBeginning:s,isEnd:o}=t;const i=s,l=o;0===r?(a=0,s=!0,o=!0):(a=(e-t.minTranslate())/r,s=a<=0,o=a>=1),Object.assign(t,{progress:a,isBeginning:s,isEnd:o}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),s&&!i&&t.emit("reachBeginning toEdge"),o&&!l&&t.emit("reachEnd toEdge"),(i&&!s||l&&!o)&&t.emit("fromEdge"),t.emit("progress",a)},updateSlidesClasses:function(){const e=this,{slides:t,params:n,$wrapperEl:r,activeIndex:a,realIndex:s}=e,o=e.virtual&&n.virtual.enabled;let i;t.removeClass(`${n.slideActiveClass} ${n.slideNextClass} ${n.slidePrevClass} ${n.slideDuplicateActiveClass} ${n.slideDuplicateNextClass} ${n.slideDuplicatePrevClass}`),i=o?e.$wrapperEl.find(`.${n.slideClass}[data-swiper-slide-index="${a}"]`):t.eq(a),i.addClass(n.slideActiveClass),n.loop&&(i.hasClass(n.slideDuplicateClass)?r.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${s}"]`).addClass(n.slideDuplicateActiveClass):r.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${s}"]`).addClass(n.slideDuplicateActiveClass));let l=i.nextAll(`.${n.slideClass}`).eq(0).addClass(n.slideNextClass);n.loop&&0===l.length&&(l=t.eq(0),l.addClass(n.slideNextClass));let u=i.prevAll(`.${n.slideClass}`).eq(0).addClass(n.slidePrevClass);n.loop&&0===u.length&&(u=t.eq(-1),u.addClass(n.slidePrevClass)),n.loop&&(l.hasClass(n.slideDuplicateClass)?r.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicateNextClass):r.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicateNextClass),u.hasClass(n.slideDuplicateClass)?r.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${u.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicatePrevClass):r.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${u.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicatePrevClass)),e.emitSlidesClasses()},updateActiveIndex:function(e){const t=this,n=t.rtlTranslate?t.translate:-t.translate,{slidesGrid:r,snapGrid:a,params:s,activeIndex:o,realIndex:i,snapIndex:l}=t;let u,c=e;if(void 0===c){for(let e=0;e<r.length;e+=1)void 0!==r[e+1]?n>=r[e]&&n<r[e+1]-(r[e+1]-r[e])/2?c=e:n>=r[e]&&n<r[e+1]&&(c=e+1):n>=r[e]&&(c=e);s.normalizeSlideIndex&&(c<0||void 0===c)&&(c=0)}if(a.indexOf(n)>=0)u=a.indexOf(n);else{const e=Math.min(s.slidesPerGroupSkip,c);u=e+Math.floor((c-e)/s.slidesPerGroup)}if(u>=a.length&&(u=a.length-1),c===o)return void(u!==l&&(t.snapIndex=u,t.emit("snapIndexChange")));const p=parseInt(t.slides.eq(c).attr("data-swiper-slide-index")||c,10);Object.assign(t,{snapIndex:u,realIndex:p,previousIndex:o,activeIndex:c}),t.emit("activeIndexChange"),t.emit("snapIndexChange"),i!==p&&t.emit("realIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&t.emit("slideChange")},updateClickedSlide:function(e){const t=this,n=t.params,r=SC(e).closest(`.${n.slideClass}`)[0];let a,s=!1;if(r)for(let e=0;e<t.slides.length;e+=1)if(t.slides[e]===r){s=!0,a=e;break}if(!r||!s)return t.clickedSlide=void 0,void(t.clickedIndex=void 0);t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(SC(r).attr("data-swiper-slide-index"),10):t.clickedIndex=a,n.slideToClickedSlide&&void 0!==t.clickedIndex&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}};var VC={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");const{params:t,rtlTranslate:n,translate:r,$wrapperEl:a}=this;if(t.virtualTranslate)return n?-r:r;if(t.cssMode)return r;let s=$C(a[0],e);return n&&(s=-s),s||0},setTranslate:function(e,t){const n=this,{rtlTranslate:r,params:a,$wrapperEl:s,wrapperEl:o,progress:i}=n;let l,u=0,c=0;n.isHorizontal()?u=r?-e:e:c=e,a.roundLengths&&(u=Math.floor(u),c=Math.floor(c)),a.cssMode?o[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-u:-c:a.virtualTranslate||s.transform(`translate3d(${u}px, ${c}px, 0px)`),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?u:c;const p=n.maxTranslate()-n.minTranslate();l=0===p?0:(e-n.minTranslate())/p,l!==i&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,n,r,a){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),void 0===r&&(r=!0);const s=this,{params:o,wrapperEl:i}=s;if(s.animating&&o.preventInteractionOnTransition)return!1;const l=s.minTranslate(),u=s.maxTranslate();let c;if(c=r&&e>l?l:r&&e<u?u:e,s.updateProgress(c),o.cssMode){const e=s.isHorizontal();if(0===t)i[e?"scrollLeft":"scrollTop"]=-c;else{if(!s.support.smoothScroll)return MC({swiper:s,targetPosition:-c,side:e?"left":"top"}),!0;i.scrollTo({[e?"left":"top"]:-c,behavior:"smooth"})}return!0}return 0===t?(s.setTransition(0),s.setTranslate(c),n&&(s.emit("beforeTransitionStart",t,a),s.emit("transitionEnd"))):(s.setTransition(t),s.setTranslate(c),n&&(s.emit("beforeTransitionStart",t,a),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,n&&s.emit("transitionEnd"))}),s.$wrapperEl[0].addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd))),!0}};function WC(e){let{swiper:t,runCallbacks:n,direction:r,step:a}=e;const{activeIndex:s,previousIndex:o}=t;let i=r;if(i||(i=s>o?"next":s<o?"prev":"reset"),t.emit(`transition${a}`),n&&s!==o){if("reset"===i)return void t.emit(`slideResetTransition${a}`);t.emit(`slideChangeTransition${a}`),"next"===i?t.emit(`slideNextTransition${a}`):t.emit(`slidePrevTransition${a}`)}}var HC={setTransition:function(e,t){const n=this;n.params.cssMode||n.$wrapperEl.transition(e),n.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);const n=this,{params:r}=n;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),WC({swiper:n,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e,t){void 0===e&&(e=!0);const n=this,{params:r}=n;n.animating=!1,r.cssMode||(n.setTransition(0),WC({swiper:n,runCallbacks:e,direction:t,step:"End"}))}};var jC={slideTo:function(e,t,n,r,a){if(void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),"number"!=typeof e&&"string"!=typeof e)throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof e}] given.`);if("string"==typeof e){const t=parseInt(e,10);if(!isFinite(t))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=t}const s=this;let o=e;o<0&&(o=0);const{params:i,snapGrid:l,slidesGrid:u,previousIndex:c,activeIndex:p,rtlTranslate:d,wrapperEl:h,enabled:f}=s;if(s.animating&&i.preventInteractionOnTransition||!f&&!r&&!a)return!1;const m=Math.min(s.params.slidesPerGroupSkip,o);let g=m+Math.floor((o-m)/s.params.slidesPerGroup);g>=l.length&&(g=l.length-1),(p||i.initialSlide||0)===(c||0)&&n&&s.emit("beforeSlideChangeStart");const v=-l[g];if(s.updateProgress(v),i.normalizeSlideIndex)for(let e=0;e<u.length;e+=1){const t=-Math.floor(100*v),n=Math.floor(100*u[e]),r=Math.floor(100*u[e+1]);void 0!==u[e+1]?t>=n&&t<r-(r-n)/2?o=e:t>=n&&t<r&&(o=e+1):t>=n&&(o=e)}if(s.initialized&&o!==p){if(!s.allowSlideNext&&v<s.translate&&v<s.minTranslate())return!1;if(!s.allowSlidePrev&&v>s.translate&&v>s.maxTranslate()&&(p||0)!==o)return!1}let b;if(b=o>p?"next":o<p?"prev":"reset",d&&-v===s.translate||!d&&v===s.translate)return s.updateActiveIndex(o),i.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),"slide"!==i.effect&&s.setTranslate(v),"reset"!==b&&(s.transitionStart(n,b),s.transitionEnd(n,b)),!1;if(i.cssMode){const e=s.isHorizontal(),n=d?v:-v;if(0===t){const t=s.virtual&&s.params.virtual.enabled;t&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),h[e?"scrollLeft":"scrollTop"]=n,t&&requestAnimationFrame((()=>{s.wrapperEl.style.scrollSnapType="",s._swiperImmediateVirtual=!1}))}else{if(!s.support.smoothScroll)return MC({swiper:s,targetPosition:n,side:e?"left":"top"}),!0;h.scrollTo({[e?"left":"top"]:n,behavior:"smooth"})}return!0}return s.setTransition(t),s.setTranslate(v),s.updateActiveIndex(o),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,r),s.transitionStart(n,b),0===t?s.transitionEnd(n,b):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(n,b))}),s.$wrapperEl[0].addEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0);const a=this;let s=e;return a.params.loop&&(s+=a.loopedSlides),a.slideTo(s,t,n,r)},slideNext:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);const r=this,{animating:a,enabled:s,params:o}=r;if(!s)return r;let i=o.slidesPerGroup;"auto"===o.slidesPerView&&1===o.slidesPerGroup&&o.slidesPerGroupAuto&&(i=Math.max(r.slidesPerViewDynamic("current",!0),1));const l=r.activeIndex<o.slidesPerGroupSkip?1:i;if(o.loop){if(a&&o.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}return o.rewind&&r.isEnd?r.slideTo(0,e,t,n):r.slideTo(r.activeIndex+l,e,t,n)},slidePrev:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);const r=this,{params:a,animating:s,snapGrid:o,slidesGrid:i,rtlTranslate:l,enabled:u}=r;if(!u)return r;if(a.loop){if(s&&a.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}function c(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const p=c(l?r.translate:-r.translate),d=o.map((e=>c(e)));let h=o[d.indexOf(p)-1];if(void 0===h&&a.cssMode){let e;o.forEach(((t,n)=>{p>=t&&(e=n)})),void 0!==e&&(h=o[e>0?e-1:e])}let f=0;if(void 0!==h&&(f=i.indexOf(h),f<0&&(f=r.activeIndex-1),"auto"===a.slidesPerView&&1===a.slidesPerGroup&&a.slidesPerGroupAuto&&(f=f-r.slidesPerViewDynamic("previous",!0)+1,f=Math.max(f,0))),a.rewind&&r.isBeginning){const a=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(a,e,t,n)}return r.slideTo(f,e,t,n)},slideReset:function(e,t,n){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,n)},slideToClosest:function(e,t,n,r){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===r&&(r=.5);const a=this;let s=a.activeIndex;const o=Math.min(a.params.slidesPerGroupSkip,s),i=o+Math.floor((s-o)/a.params.slidesPerGroup),l=a.rtlTranslate?a.translate:-a.translate;if(l>=a.snapGrid[i]){const e=a.snapGrid[i];l-e>(a.snapGrid[i+1]-e)*r&&(s+=a.params.slidesPerGroup)}else{const e=a.snapGrid[i-1];l-e<=(a.snapGrid[i]-e)*r&&(s-=a.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,a.slidesGrid.length-1),a.slideTo(s,e,t,n)},slideToClickedSlide:function(){const e=this,{params:t,$wrapperEl:n}=e,r="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let a,s=e.clickedIndex;if(t.loop){if(e.animating)return;a=parseInt(SC(e.clickedSlide).attr("data-swiper-slide-index"),10),t.centeredSlides?s<e.loopedSlides-r/2||s>e.slides.length-e.loopedSlides+r/2?(e.loopFix(),s=n.children(`.${t.slideClass}[data-swiper-slide-index="${a}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),EC((()=>{e.slideTo(s)}))):e.slideTo(s):s>e.slides.length-r?(e.loopFix(),s=n.children(`.${t.slideClass}[data-swiper-slide-index="${a}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),EC((()=>{e.slideTo(s)}))):e.slideTo(s)}else e.slideTo(s)}};var UC={loopCreate:function(){const e=this,t=fC(),{params:n,$wrapperEl:r}=e,a=r.children().length>0?SC(r.children()[0].parentNode):r;a.children(`.${n.slideClass}.${n.slideDuplicateClass}`).remove();let s=a.children(`.${n.slideClass}`);if(n.loopFillGroupWithBlank){const e=n.slidesPerGroup-s.length%n.slidesPerGroup;if(e!==n.slidesPerGroup){for(let r=0;r<e;r+=1){const e=SC(t.createElement("div")).addClass(`${n.slideClass} ${n.slideBlankClass}`);a.append(e)}s=a.children(`.${n.slideClass}`)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=s.length),e.loopedSlides=Math.ceil(parseFloat(n.loopedSlides||n.slidesPerView,10)),e.loopedSlides+=n.loopAdditionalSlides,e.loopedSlides>s.length&&(e.loopedSlides=s.length);const o=[],i=[];s.each(((t,n)=>{const r=SC(t);n<e.loopedSlides&&i.push(t),n<s.length&&n>=s.length-e.loopedSlides&&o.push(t),r.attr("data-swiper-slide-index",n)}));for(let e=0;e<i.length;e+=1)a.append(SC(i[e].cloneNode(!0)).addClass(n.slideDuplicateClass));for(let e=o.length-1;e>=0;e-=1)a.prepend(SC(o[e].cloneNode(!0)).addClass(n.slideDuplicateClass))},loopFix:function(){const e=this;e.emit("beforeLoopFix");const{activeIndex:t,slides:n,loopedSlides:r,allowSlidePrev:a,allowSlideNext:s,snapGrid:o,rtlTranslate:i}=e;let l;e.allowSlidePrev=!0,e.allowSlideNext=!0;const u=-o[t]-e.getTranslate();if(t<r){l=n.length-3*r+t,l+=r;e.slideTo(l,0,!1,!0)&&0!==u&&e.setTranslate((i?-e.translate:e.translate)-u)}else if(t>=n.length-r){l=-n.length+t+r,l+=r;e.slideTo(l,0,!1,!0)&&0!==u&&e.setTranslate((i?-e.translate:e.translate)-u)}e.allowSlidePrev=a,e.allowSlideNext=s,e.emit("loopFix")},loopDestroy:function(){const{$wrapperEl:e,params:t,slides:n}=this;e.children(`.${t.slideClass}.${t.slideDuplicateClass},.${t.slideClass}.${t.slideBlankClass}`).remove(),n.removeAttr("data-swiper-slide-index")}};var GC={setGrabCursor:function(e){const t=this;if(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const n="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;n.style.cursor="move",n.style.cursor=e?"-webkit-grabbing":"-webkit-grab",n.style.cursor=e?"-moz-grabbin":"-moz-grab",n.style.cursor=e?"grabbing":"grab"},unsetGrabCursor:function(){const e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="")}};function qC(e){const t=this,n=fC(),r=gC(),a=t.touchEventsData,{params:s,touches:o,enabled:i}=t;if(!i)return;if(t.animating&&s.preventInteractionOnTransition)return;!t.animating&&s.cssMode&&s.loop&&t.loopFix();let l=e;l.originalEvent&&(l=l.originalEvent);let u=SC(l.target);if("wrapper"===s.touchEventsTarget&&!u.closest(t.wrapperEl).length)return;if(a.isTouchEvent="touchstart"===l.type,!a.isTouchEvent&&"which"in l&&3===l.which)return;if(!a.isTouchEvent&&"button"in l&&l.button>0)return;if(a.isTouched&&a.isMoved)return;!!s.noSwipingClass&&""!==s.noSwipingClass&&l.target&&l.target.shadowRoot&&e.path&&e.path[0]&&(u=SC(e.path[0]));const c=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,p=!(!l.target||!l.target.shadowRoot);if(s.noSwiping&&(p?function(e,t){return void 0===t&&(t=this),function t(n){return n&&n!==fC()&&n!==gC()?(n.assignedSlot&&(n=n.assignedSlot),n.closest(e)||t(n.getRootNode().host)):null}(t)}(c,l.target):u.closest(c)[0]))return void(t.allowClick=!0);if(s.swipeHandler&&!u.closest(s.swipeHandler)[0])return;o.currentX="touchstart"===l.type?l.targetTouches[0].pageX:l.pageX,o.currentY="touchstart"===l.type?l.targetTouches[0].pageY:l.pageY;const d=o.currentX,h=o.currentY,f=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,m=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(f&&(d<=m||d>=r.innerWidth-m)){if("prevent"!==f)return;e.preventDefault()}if(Object.assign(a,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=d,o.startY=h,a.touchStartTime=TC(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,s.threshold>0&&(a.allowThresholdMove=!1),"touchstart"!==l.type){let e=!0;u.is(a.focusableElements)&&(e=!1,"SELECT"===u[0].nodeName&&(a.isTouched=!1)),n.activeElement&&SC(n.activeElement).is(a.focusableElements)&&n.activeElement!==u[0]&&n.activeElement.blur();const r=e&&t.allowTouchMove&&s.touchStartPreventDefault;!s.touchStartForcePreventDefault&&!r||u[0].isContentEditable||l.preventDefault()}t.params.freeMode&&t.params.freeMode.enabled&&t.freeMode&&t.animating&&!s.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",l)}function XC(e){const t=fC(),n=this,r=n.touchEventsData,{params:a,touches:s,rtlTranslate:o,enabled:i}=n;if(!i)return;let l=e;if(l.originalEvent&&(l=l.originalEvent),!r.isTouched)return void(r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",l));if(r.isTouchEvent&&"touchmove"!==l.type)return;const u="touchmove"===l.type&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),c="touchmove"===l.type?u.pageX:l.pageX,p="touchmove"===l.type?u.pageY:l.pageY;if(l.preventedByNestedSwiper)return s.startX=c,void(s.startY=p);if(!n.allowTouchMove)return SC(l.target).is(r.focusableElements)||(n.allowClick=!1),void(r.isTouched&&(Object.assign(s,{startX:c,startY:p,currentX:c,currentY:p}),r.touchStartTime=TC()));if(r.isTouchEvent&&a.touchReleaseOnEdges&&!a.loop)if(n.isVertical()){if(p<s.startY&&n.translate<=n.maxTranslate()||p>s.startY&&n.translate>=n.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(c<s.startX&&n.translate<=n.maxTranslate()||c>s.startX&&n.translate>=n.minTranslate())return;if(r.isTouchEvent&&t.activeElement&&l.target===t.activeElement&&SC(l.target).is(r.focusableElements))return r.isMoved=!0,void(n.allowClick=!1);if(r.allowTouchCallbacks&&n.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;s.currentX=c,s.currentY=p;const d=s.currentX-s.startX,h=s.currentY-s.startY;if(n.params.threshold&&Math.sqrt(d**2+h**2)<n.params.threshold)return;if(void 0===r.isScrolling){let e;n.isHorizontal()&&s.currentY===s.startY||n.isVertical()&&s.currentX===s.startX?r.isScrolling=!1:d*d+h*h>=25&&(e=180*Math.atan2(Math.abs(h),Math.abs(d))/Math.PI,r.isScrolling=n.isHorizontal()?e>a.touchAngle:90-e>a.touchAngle)}if(r.isScrolling&&n.emit("touchMoveOpposite",l),void 0===r.startMoving&&(s.currentX===s.startX&&s.currentY===s.startY||(r.startMoving=!0)),r.isScrolling)return void(r.isTouched=!1);if(!r.startMoving)return;n.allowClick=!1,!a.cssMode&&l.cancelable&&l.preventDefault(),a.touchMoveStopPropagation&&!a.nested&&l.stopPropagation(),r.isMoved||(a.loop&&!a.cssMode&&n.loopFix(),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating&&n.$wrapperEl.trigger("webkitTransitionEnd transitionend"),r.allowMomentumBounce=!1,!a.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",l)),n.emit("sliderMove",l),r.isMoved=!0;let f=n.isHorizontal()?d:h;s.diff=f,f*=a.touchRatio,o&&(f=-f),n.swipeDirection=f>0?"prev":"next",r.currentTranslate=f+r.startTranslate;let m=!0,g=a.resistanceRatio;if(a.touchReleaseOnEdges&&(g=0),f>0&&r.currentTranslate>n.minTranslate()?(m=!1,a.resistance&&(r.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+r.startTranslate+f)**g)):f<0&&r.currentTranslate<n.maxTranslate()&&(m=!1,a.resistance&&(r.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-r.startTranslate-f)**g)),m&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),n.allowSlidePrev||n.allowSlideNext||(r.currentTranslate=r.startTranslate),a.threshold>0){if(!(Math.abs(f)>a.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,r.currentTranslate=r.startTranslate,void(s.diff=n.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY)}a.followFinger&&!a.cssMode&&((a.freeMode&&a.freeMode.enabled&&n.freeMode||a.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),n.params.freeMode&&a.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}function KC(e){const t=this,n=t.touchEventsData,{params:r,touches:a,rtlTranslate:s,slidesGrid:o,enabled:i}=t;if(!i)return;let l=e;if(l.originalEvent&&(l=l.originalEvent),n.allowTouchCallbacks&&t.emit("touchEnd",l),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&r.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);r.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const u=TC(),c=u-n.touchStartTime;if(t.allowClick){const e=l.path||l.composedPath&&l.composedPath();t.updateClickedSlide(e&&e[0]||l.target),t.emit("tap click",l),c<300&&u-n.lastClickTime<300&&t.emit("doubleTap doubleClick",l)}if(n.lastClickTime=TC(),EC((()=>{t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===a.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);let p;if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,p=r.followFinger?s?t.translate:-t.translate:-n.currentTranslate,r.cssMode)return;if(t.params.freeMode&&r.freeMode.enabled)return void t.freeMode.onTouchEnd({currentPos:p});let d=0,h=t.slidesSizesGrid[0];for(let e=0;e<o.length;e+=e<r.slidesPerGroupSkip?1:r.slidesPerGroup){const t=e<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;void 0!==o[e+t]?p>=o[e]&&p<o[e+t]&&(d=e,h=o[e+t]-o[e]):p>=o[e]&&(d=e,h=o[o.length-1]-o[o.length-2])}let f=null,m=null;r.rewind&&(t.isBeginning?m=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(f=0));const g=(p-o[d])/h,v=d<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(c>r.longSwipesMs){if(!r.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(g>=r.longSwipesRatio?t.slideTo(r.rewind&&t.isEnd?f:d+v):t.slideTo(d)),"prev"===t.swipeDirection&&(g>1-r.longSwipesRatio?t.slideTo(d+v):null!==m&&g<0&&Math.abs(g)>r.longSwipesRatio?t.slideTo(m):t.slideTo(d))}else{if(!r.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(l.target===t.navigation.nextEl||l.target===t.navigation.prevEl)?l.target===t.navigation.nextEl?t.slideTo(d+v):t.slideTo(d):("next"===t.swipeDirection&&t.slideTo(null!==f?f:d+v),"prev"===t.swipeDirection&&t.slideTo(null!==m?m:d))}}function YC(){const e=this,{params:t,el:n}=e;if(n&&0===n.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:a,snapGrid:s}=e;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=a,e.allowSlideNext=r,e.params.watchOverflow&&s!==e.snapGrid&&e.checkOverflow()}function JC(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function ZC(){const e=this,{wrapperEl:t,rtlTranslate:n,enabled:r}=e;if(!r)return;let a;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,-0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const s=e.maxTranslate()-e.minTranslate();a=0===s?0:(e.translate-e.minTranslate())/s,a!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}let QC=!1;function eS(){}const tS=(e,t)=>{const n=fC(),{params:r,touchEvents:a,el:s,wrapperEl:o,device:i,support:l}=e,u=!!r.nested,c="on"===t?"addEventListener":"removeEventListener",p=t;if(l.touch){const t=!("touchstart"!==a.start||!l.passiveListener||!r.passiveListeners)&&{passive:!0,capture:!1};s[c](a.start,e.onTouchStart,t),s[c](a.move,e.onTouchMove,l.passiveListener?{passive:!1,capture:u}:u),s[c](a.end,e.onTouchEnd,t),a.cancel&&s[c](a.cancel,e.onTouchEnd,t)}else s[c](a.start,e.onTouchStart,!1),n[c](a.move,e.onTouchMove,u),n[c](a.end,e.onTouchEnd,!1);(r.preventClicks||r.preventClicksPropagation)&&s[c]("click",e.onClick,!0),r.cssMode&&o[c]("scroll",e.onScroll),r.updateOnWindowResize?e[p](i.ios||i.android?"resize orientationchange observerUpdate":"resize observerUpdate",YC,!0):e[p]("observerUpdate",YC,!0)};var nS={attachEvents:function(){const e=this,t=fC(),{params:n,support:r}=e;e.onTouchStart=qC.bind(e),e.onTouchMove=XC.bind(e),e.onTouchEnd=KC.bind(e),n.cssMode&&(e.onScroll=ZC.bind(e)),e.onClick=JC.bind(e),r.touch&&!QC&&(t.addEventListener("touchstart",eS),QC=!0),tS(e,"on")},detachEvents:function(){tS(this,"off")}};const rS=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;var aS={setBreakpoint:function(){const e=this,{activeIndex:t,initialized:n,loopedSlides:r=0,params:a,$el:s}=e,o=a.breakpoints;if(!o||o&&0===Object.keys(o).length)return;const i=e.getBreakpoint(o,e.params.breakpointsBase,e.el);if(!i||e.currentBreakpoint===i)return;const l=(i in o?o[i]:void 0)||e.originalParams,u=rS(e,a),c=rS(e,l),p=a.enabled;u&&!c?(s.removeClass(`${a.containerModifierClass}grid ${a.containerModifierClass}grid-column`),e.emitContainerClasses()):!u&&c&&(s.addClass(`${a.containerModifierClass}grid`),(l.grid.fill&&"column"===l.grid.fill||!l.grid.fill&&"column"===a.grid.fill)&&s.addClass(`${a.containerModifierClass}grid-column`),e.emitContainerClasses());const d=l.direction&&l.direction!==a.direction,h=a.loop&&(l.slidesPerView!==a.slidesPerView||d);d&&n&&e.changeDirection(),OC(e.params,l);const f=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),p&&!f?e.disable():!p&&f&&e.enable(),e.currentBreakpoint=i,e.emit("_beforeBreakpoint",l),h&&n&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-r+e.loopedSlides,0,!1)),e.emit("breakpoint",l)},getBreakpoint:function(e,t,n){if(void 0===t&&(t="window"),!e||"container"===t&&!n)return;let r=!1;const a=gC(),s="window"===t?a.innerHeight:n.clientHeight,o=Object.keys(e).map((e=>{if("string"==typeof e&&0===e.indexOf("@")){const t=parseFloat(e.substr(1));return{value:s*t,point:e}}return{value:e,point:e}}));o.sort(((e,t)=>parseInt(e.value,10)-parseInt(t.value,10)));for(let e=0;e<o.length;e+=1){const{point:s,value:i}=o[e];"window"===t?a.matchMedia(`(min-width: ${i}px)`).matches&&(r=s):i<=n.clientWidth&&(r=s)}return r||"max"}};var sS={addClasses:function(){const e=this,{classNames:t,params:n,rtl:r,$el:a,device:s,support:o}=e,i=function(e,t){const n=[];return e.forEach((e=>{"object"==typeof e?Object.keys(e).forEach((r=>{e[r]&&n.push(t+r)})):"string"==typeof e&&n.push(t+e)})),n}(["initialized",n.direction,{"pointer-events":!o.touch},{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&"column"===n.grid.fill},{android:s.android},{ios:s.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides}],n.containerModifierClass);t.push(...i),a.addClass([...t].join(" ")),e.emitContainerClasses()},removeClasses:function(){const{$el:e,classNames:t}=this;e.removeClass(t.join(" ")),this.emitContainerClasses()}};var oS={loadImage:function(e,t,n,r,a,s){const o=gC();let i;function l(){s&&s()}SC(e).parent("picture")[0]||e.complete&&a?l():t?(i=new o.Image,i.onload=l,i.onerror=l,r&&(i.sizes=r),n&&(i.srcset=n),t&&(i.src=t)):l()},preloadImages:function(){const e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(let n=0;n<e.imagesToLoad.length;n+=1){const r=e.imagesToLoad[n];e.loadImage(r,r.currentSrc||r.getAttribute("src"),r.srcset||r.getAttribute("srcset"),r.sizes||r.getAttribute("sizes"),!0,t)}}};var iS={checkOverflow:function(){const e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:r}=n;if(r){const t=e.slides.length-1,n=e.slidesGrid[t]+e.slidesSizesGrid[t]+2*r;e.isLocked=e.size>n}else e.isLocked=1===e.snapGrid.length;!0===n.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===n.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},lS={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function uS(e,t){return function(n){void 0===n&&(n={});const r=Object.keys(n)[0],a=n[r];"object"==typeof a&&null!==a?(["navigation","pagination","scrollbar"].indexOf(r)>=0&&!0===e[r]&&(e[r]={auto:!0}),r in e&&"enabled"in a?(!0===e[r]&&(e[r]={enabled:!0}),"object"!=typeof e[r]||"enabled"in e[r]||(e[r].enabled=!0),e[r]||(e[r]={enabled:!1}),OC(t,n)):OC(t,n)):OC(t,n)}}const cS={eventsEmitter:FC,update:zC,translate:VC,transition:HC,slide:jC,loop:UC,grabCursor:GC,events:nS,breakpoints:aS,checkOverflow:iS,classes:sS,images:oS},pS={};class dS{constructor(){let e,t;for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];if(1===r.length&&r[0].constructor&&"Object"===Object.prototype.toString.call(r[0]).slice(8,-1)?t=r[0]:[e,t]=r,t||(t={}),t=OC({},t),e&&!t.el&&(t.el=e),t.el&&SC(t.el).length>1){const e=[];return SC(t.el).each((n=>{const r=OC({},t,{el:n});e.push(new dS(r))})),e}const s=this;s.__swiper__=!0,s.support=DC(),s.device=LC({userAgent:t.userAgent}),s.browser=BC(),s.eventsListeners={},s.eventsAnyListeners=[],s.modules=[...s.__modules__],t.modules&&Array.isArray(t.modules)&&s.modules.push(...t.modules);const o={};s.modules.forEach((e=>{e({swiper:s,extendParams:uS(t,o),on:s.on.bind(s),once:s.once.bind(s),off:s.off.bind(s),emit:s.emit.bind(s)})}));const i=OC({},lS,o);return s.params=OC({},i,pS,t),s.originalParams=OC({},s.params),s.passedParams=OC({},t),s.params&&s.params.on&&Object.keys(s.params.on).forEach((e=>{s.on(e,s.params.on[e])})),s.params&&s.params.onAny&&s.onAny(s.params.onAny),s.$=SC,Object.assign(s,{enabled:s.params.enabled,el:e,classNames:[],slides:SC(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===s.params.direction,isVertical:()=>"vertical"===s.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev,touchEvents:function(){const e=["touchstart","touchmove","touchend","touchcancel"],t=["pointerdown","pointermove","pointerup"];return s.touchEventsTouch={start:e[0],move:e[1],end:e[2],cancel:e[3]},s.touchEventsDesktop={start:t[0],move:t[1],end:t[2]},s.support.touch||!s.params.simulateTouch?s.touchEventsTouch:s.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:s.params.focusableElements,lastClickTime:TC(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:s.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),s.emit("_swiper"),s.params.init&&s.init(),s}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const r=n.minTranslate(),a=(n.maxTranslate()-r)*e+r;n.translateTo(a,void 0===t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter((t=>0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass)));e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return e.className.split(" ").filter((e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass))).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.each((n=>{const r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)})),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){void 0===e&&(e="current"),void 0===t&&(t=!1);const{params:n,slides:r,slidesGrid:a,slidesSizesGrid:s,size:o,activeIndex:i}=this;let l=1;if(n.centeredSlides){let e,t=r[i].swiperSlideSize;for(let n=i+1;n<r.length;n+=1)r[n]&&!e&&(t+=r[n].swiperSlideSize,l+=1,t>o&&(e=!0));for(let n=i-1;n>=0;n-=1)r[n]&&!e&&(t+=r[n].swiperSlideSize,l+=1,t>o&&(e=!0))}else if("current"===e)for(let e=i+1;e<r.length;e+=1){(t?a[e]+s[e]-a[i]<o:a[e]-a[i]<o)&&(l+=1)}else for(let e=i-1;e>=0;e-=1){a[i]-a[e]<o&&(l+=1)}return l}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;function r(){const t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}let a;n.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode&&e.params.freeMode.enabled?(r(),e.params.autoHeight&&e.updateAutoHeight()):(a=("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),a||r()),n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){void 0===t&&(t=!0);const n=this,r=n.params.direction;return e||(e="horizontal"===r?"vertical":"horizontal"),e===r||"horizontal"!==e&&"vertical"!==e||(n.$el.removeClass(`${n.params.containerModifierClass}${r}`).addClass(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.each((t=>{"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n}mount(e){const t=this;if(t.mounted)return!0;const n=SC(e||t.params.el);if(!(e=n[0]))return!1;e.swiper=t;const r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=(()=>{if(e&&e.shadowRoot&&e.shadowRoot.querySelector){const t=SC(e.shadowRoot.querySelector(r()));return t.children=e=>n.children(e),t}return n.children(r())})();if(0===a.length&&t.params.createElements){const e=fC().createElement("div");a=SC(e),e.className=t.params.wrapperClass,n.append(e),n.children(`.${t.params.slideClass}`).each((e=>{a.append(e)}))}return Object.assign(t,{$el:n,el:e,$wrapperEl:a,wrapperEl:a[0],mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction")),wrongRTL:"-webkit-box"===a.css("display")}),!0}init(e){const t=this;if(t.initialized)return t;return!1===t.mount(e)||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.params.loop&&t.loopCreate(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.preloadImages&&t.preloadImages(),t.params.loop?t.slideTo(t.params.initialSlide+t.loopedSlides,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.attachEvents(),t.initialized=!0,t.emit("init"),t.emit("afterInit")),t}destroy(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);const n=this,{params:r,$el:a,$wrapperEl:s,slides:o}=n;return void 0===n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),r.loop&&n.loopDestroy(),t&&(n.removeClasses(),a.removeAttr("style"),s.removeAttr("style"),o&&o.length&&o.removeClass([r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((e=>{n.off(e)})),!1!==e&&(n.$el[0].swiper=null,function(e){const t=e;Object.keys(t).forEach((e=>{try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}}))}(n)),n.destroyed=!0),null}static extendDefaults(e){OC(pS,e)}static get extendedDefaults(){return pS}static get defaults(){return lS}static installModule(e){dS.prototype.__modules__||(dS.prototype.__modules__=[]);const t=dS.prototype.__modules__;"function"==typeof e&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach((e=>dS.installModule(e))),dS):(dS.installModule(e),dS)}}Object.keys(cS).forEach((e=>{Object.keys(cS[e]).forEach((t=>{dS.prototype[t]=cS[e][t]}))})),dS.use([function(e){let{swiper:t,on:n,emit:r}=e;const a=gC();let s=null,o=null;const i=()=>{t&&!t.destroyed&&t.initialized&&(r("beforeResize"),r("resize"))},l=()=>{t&&!t.destroyed&&t.initialized&&r("orientationchange")};n("init",(()=>{t.params.resizeObserver&&void 0!==a.ResizeObserver?t&&!t.destroyed&&t.initialized&&(s=new ResizeObserver((e=>{o=a.requestAnimationFrame((()=>{const{width:n,height:r}=t;let a=n,s=r;e.forEach((e=>{let{contentBoxSize:n,contentRect:r,target:o}=e;o&&o!==t.el||(a=r?r.width:(n[0]||n).inlineSize,s=r?r.height:(n[0]||n).blockSize)})),a===n&&s===r||i()}))})),s.observe(t.el)):(a.addEventListener("resize",i),a.addEventListener("orientationchange",l))})),n("destroy",(()=>{o&&a.cancelAnimationFrame(o),s&&s.unobserve&&t.el&&(s.unobserve(t.el),s=null),a.removeEventListener("resize",i),a.removeEventListener("orientationchange",l)}))},function(e){let{swiper:t,extendParams:n,on:r,emit:a}=e;const s=[],o=gC(),i=function(e,t){void 0===t&&(t={});const n=new(o.MutationObserver||o.WebkitMutationObserver)((e=>{if(1===e.length)return void a("observerUpdate",e[0]);const t=function(){a("observerUpdate",e[0])};o.requestAnimationFrame?o.requestAnimationFrame(t):o.setTimeout(t,0)}));n.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),s.push(n)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",(()=>{if(t.params.observer){if(t.params.observeParents){const e=t.$el.parents();for(let t=0;t<e.length;t+=1)i(e[t])}i(t.$el[0],{childList:t.params.observeSlideChildren}),i(t.$wrapperEl[0],{attributes:!1})}})),r("destroy",(()=>{s.forEach((e=>{e.disconnect()})),s.splice(0,s.length)}))}]);var hS=dS;function fS(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function mS(e,t){const n=["__proto__","constructor","prototype"];Object.keys(t).filter((e=>n.indexOf(e)<0)).forEach((n=>{void 0===e[n]?e[n]=t[n]:fS(t[n])&&fS(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:mS(e[n],t[n]):e[n]=t[n]}))}function gS(e){return void 0===e&&(e={}),e.navigation&&void 0===e.navigation.nextEl&&void 0===e.navigation.prevEl}function vS(e){return void 0===e&&(e={}),e.pagination&&void 0===e.pagination.el}function bS(e){return void 0===e&&(e={}),e.scrollbar&&void 0===e.scrollbar.el}function yS(e){void 0===e&&(e="");const t=e.split(" ").map((e=>e.trim())).filter((e=>!!e)),n=[];return t.forEach((e=>{n.indexOf(e)<0&&n.push(e)})),n.join(" ")}const wS=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function xS(e){void 0===e&&(e={});const t={on:{}},n={};mS(t,hS.defaults),mS(t,hS.extendedDefaults),t._emitClasses=!0,t.init=!1;const r={},a=wS.map((e=>e.replace(/_/,""))),s=Object.assign({},e);return Object.keys(s).forEach((s=>{void 0!==e[s]&&(a.indexOf(s)>=0?fS(e[s])?(t[s]={},n[s]={},mS(t[s],e[s]),mS(n[s],e[s])):(t[s]=e[s],n[s]=e[s]):0===s.search(/on[A-Z]/)&&"function"==typeof e[s]?t.on[`${s[2].toLowerCase()}${s.substr(3)}`]=e[s]:r[s]=e[s])})),["navigation","pagination","scrollbar"].forEach((e=>{!0===t[e]&&(t[e]={}),!1===t[e]&&delete t[e]})),{params:t,passedParams:n,rest:r}}function kS(e,t){let n=t.slidesPerView;if(t.breakpoints){const e=hS.prototype.getBreakpoint(t.breakpoints),r=e in t.breakpoints?t.breakpoints[e]:void 0;r&&r.slidesPerView&&(n=r.slidesPerView)}let r=Math.ceil(parseFloat(t.loopedSlides||n,10));return r+=t.loopAdditionalSlides,r>e.length&&(r=e.length),r}function CS(e,t,n){void 0===e&&(e={});const r=[],a={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},s=(e,t)=>{Array.isArray(e)&&e.forEach((e=>{const n="symbol"==typeof e.type;"default"===t&&(t="container-end"),n&&e.children?s(e.children,"default"):!e.type||"SwiperSlide"!==e.type.name&&"AsyncComponentWrapper"!==e.type.name?a[t]&&a[t].push(e):r.push(e)}))};return Object.keys(e).forEach((t=>{if("function"!=typeof e[t])return;const n=e[t]();s(n,t)})),n.value=t.value,t.value=r,{slides:r,slots:a}}function SS(e){let{swiper:t,slides:n,passedParams:r,changedParams:a,nextEl:s,prevEl:o,paginationEl:i,scrollbarEl:l}=e;const u=a.filter((e=>"children"!==e&&"direction"!==e)),{params:c,pagination:p,navigation:d,scrollbar:h,virtual:f,thumbs:m}=t;let g,v,b,y,w;a.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&c.thumbs&&!c.thumbs.swiper&&(g=!0),a.includes("controller")&&r.controller&&r.controller.control&&c.controller&&!c.controller.control&&(v=!0),a.includes("pagination")&&r.pagination&&(r.pagination.el||i)&&(c.pagination||!1===c.pagination)&&p&&!p.el&&(b=!0),a.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||l)&&(c.scrollbar||!1===c.scrollbar)&&h&&!h.el&&(y=!0),a.includes("navigation")&&r.navigation&&(r.navigation.prevEl||o)&&(r.navigation.nextEl||s)&&(c.navigation||!1===c.navigation)&&d&&!d.prevEl&&!d.nextEl&&(w=!0);if(u.forEach((e=>{if(fS(c[e])&&fS(r[e]))mS(c[e],r[e]);else{const a=r[e];!0!==a&&!1!==a||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?c[e]=r[e]:!1===a&&t[n=e]&&(t[n].destroy(),"navigation"===n?(c[n].prevEl=void 0,c[n].nextEl=void 0,t[n].prevEl=void 0,t[n].nextEl=void 0):(c[n].el=void 0,t[n].el=void 0))}var n})),a.includes("children")&&f&&c.virtual.enabled?(f.slides=n,f.update(!0)):a.includes("children")&&t.lazy&&t.params.lazy.enabled&&t.lazy.load(),g){m.init()&&m.update(!0)}v&&(t.controller.control=c.controller.control),b&&(i&&(c.pagination.el=i),p.init(),p.render(),p.update()),y&&(l&&(c.scrollbar.el=l),h.init(),h.updateSize(),h.setTranslate()),w&&(s&&(c.navigation.nextEl=s),o&&(c.navigation.prevEl=o),d.init(),d.update()),a.includes("allowSlideNext")&&(t.allowSlideNext=r.allowSlideNext),a.includes("allowSlidePrev")&&(t.allowSlidePrev=r.allowSlidePrev),a.includes("direction")&&t.changeDirection(r.direction,!1),t.update()}const ES={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},spaceBetween:{type:Number,default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},preloadImages:{type:Boolean,default:void 0},updateOnImagesReady:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopAdditionalSlides:{type:Number,default:void 0},loopedSlides:{type:Number,default:void 0},loopFillGroupWithBlank:{type:Boolean,default:void 0},loopPreventsSlide:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideBlankClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideDuplicateActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideDuplicateClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slideDuplicateNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},slideDuplicatePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},lazy:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","imagesReady","init","keyPress","lazyImageLoad","lazyImageReady","lock","loopFix","momentumBounce","navigationHide","navigationShow","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","zoomChange"],setup(e,t){let{slots:n,emit:r}=t;const{tag:a,wrapperTag:s}=e,o=xt("swiper"),i=xt(null),l=xt(!1),u=xt(!1),c=xt(null),p=xt(null),d=xt(null),h={value:[]},f={value:[]},m=xt(null),g=xt(null),v=xt(null),b=xt(null),{params:y,passedParams:w}=xS(e);CS(n,h,f),d.value=w,f.value=h.value;if(y.onAny=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];r(e,...n)},Object.assign(y.on,{_beforeBreakpoint:()=>{CS(n,h,f),l.value=!0},_containerClasses(e,t){o.value=t}}),p.value=function(e){return new hS(e)}(y),p.value.loopCreate=()=>{},p.value.loopDestroy=()=>{},y.loop&&(p.value.loopedSlides=kS(h.value,y)),p.value.virtual&&p.value.params.virtual.enabled){p.value.virtual.slides=h.value;const e={cache:!1,slides:h.value,renderExternal:e=>{i.value=e},renderExternalUpdate:!1};mS(p.value.params.virtual,e),mS(p.value.originalParams.virtual,e)}function x(e){return y.virtual?function(e,t,n){if(!n)return null;const r=e.value.isHorizontal()?{[e.value.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`};return t.filter(((e,t)=>t>=n.from&&t<=n.to)).map((t=>(t.props||(t.props={}),t.props.style||(t.props.style={}),t.props.swiperRef=e,t.props.style=r,Xa(t.type,{...t.props},t.children))))}(p,e,i.value):!y.loop||p.value&&p.value.destroyed?(e.forEach((e=>{e.props||(e.props={}),e.props.swiperRef=p})),e):function(e,t,n){const r=t.map(((t,n)=>(t.props||(t.props={}),t.props.swiperRef=e,t.props["data-swiper-slide-index"]=n,t)));function a(e,t,r){return e.props||(e.props={}),Xa(e.type,{...e.props,key:`${e.key}-duplicate-${t}-${r}`,class:`${e.props.className||""} ${n.slideDuplicateClass} ${e.props.class||""}`},e.children)}if(n.loopFillGroupWithBlank){const e=n.slidesPerGroup-r.length%n.slidesPerGroup;if(e!==n.slidesPerGroup)for(let t=0;t<e;t+=1){const e=Xa("div",{class:`${n.slideClass} ${n.slideBlankClass}`});r.push(e)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=r.length);const s=kS(r,n),o=[],i=[];return r.forEach(((e,t)=>{t<s&&i.push(a(e,t,"prepend")),t<r.length&&t>=r.length-s&&o.push(a(e,t,"append"))})),e.value&&(e.value.loopedSlides=s),[...o,...r,...i]}(p,e,y)}return Qn((()=>{!u.value&&p.value&&(p.value.emitSlidesClasses(),u.value=!0);const{passedParams:t}=xS(e),n=function(e,t,n,r){const a=[];if(!t)return a;const s=e=>{a.indexOf(e)<0&&a.push(e)},o=r.map((e=>e.props&&e.props.key)),i=n.map((e=>e.props&&e.props.key));return o.join("")!==i.join("")&&a.push("children"),r.length!==n.length&&a.push("children"),wS.filter((e=>"_"===e[0])).map((e=>e.replace(/_/,""))).forEach((n=>{if(n in e&&n in t)if(fS(e[n])&&fS(t[n])){const r=Object.keys(e[n]),a=Object.keys(t[n]);r.length!==a.length?s(n):(r.forEach((r=>{e[n][r]!==t[n][r]&&s(n)})),a.forEach((r=>{e[n][r]!==t[n][r]&&s(n)})))}else e[n]!==t[n]&&s(n)})),a}(t,d.value,h.value,f.value);d.value=t,(n.length||l.value)&&p.value&&!p.value.destroyed&&SS({swiper:p.value,slides:h.value,passedParams:t,changedParams:n,nextEl:m.value,prevEl:g.value,scrollbarEl:b.value,paginationEl:v.value}),l.value=!1})),xn("swiper",p),Sn(i,(()=>{Ht((()=>{!function(e){!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())}(p.value)}))})),Jn((()=>{c.value&&(!function(e,t){let{el:n,nextEl:r,prevEl:a,paginationEl:s,scrollbarEl:o,swiper:i}=e;gS(t)&&r&&a&&(i.params.navigation.nextEl=r,i.originalParams.navigation.nextEl=r,i.params.navigation.prevEl=a,i.originalParams.navigation.prevEl=a),vS(t)&&s&&(i.params.pagination.el=s,i.originalParams.pagination.el=s),bS(t)&&o&&(i.params.scrollbar.el=o,i.originalParams.scrollbar.el=o),i.init(n)}({el:c.value,nextEl:m.value,prevEl:g.value,paginationEl:v.value,scrollbarEl:b.value,swiper:p.value},y),r("swiper",p.value))})),er((()=>{p.value&&!p.value.destroyed&&p.value.destroy(!0,!1)})),()=>{const{slides:t,slots:r}=CS(n,h,f);return Xa(a,{ref:c,class:yS(o.value)},[r["container-start"],gS(e)&&[Xa("div",{ref:g,class:"swiper-button-prev"}),Xa("div",{ref:m,class:"swiper-button-next"})],bS(e)&&Xa("div",{ref:b,class:"swiper-scrollbar"}),vS(e)&&Xa("div",{ref:v,class:"swiper-pagination"}),Xa(s,{class:"swiper-wrapper"},[r["wrapper-start"],x(t),r["wrapper-end"]]),r["container-end"]])}}},TS={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},zoom:{type:Boolean,default:void 0},virtualIndex:{type:[String,Number],default:void 0}},setup(e,t){let{slots:n}=t,r=!1;const{swiperRef:a}=e,s=xt(null),o=xt("swiper-slide");function i(e,t,n){t===s.value&&(o.value=n)}Jn((()=>{a.value&&(a.value.on("_slideClass",i),r=!0)})),Zn((()=>{!r&&a&&a.value&&(a.value.on("_slideClass",i),r=!0)})),Qn((()=>{s.value&&a&&a.value&&a.value.destroyed&&"swiper-slide"!==o.value&&(o.value="swiper-slide")})),er((()=>{a&&a.value&&a.value.off("_slideClass",i)}));const l=qa((()=>({isActive:o.value.indexOf("swiper-slide-active")>=0||o.value.indexOf("swiper-slide-duplicate-active")>=0,isVisible:o.value.indexOf("swiper-slide-visible")>=0,isDuplicate:o.value.indexOf("swiper-slide-duplicate")>=0,isPrev:o.value.indexOf("swiper-slide-prev")>=0||o.value.indexOf("swiper-slide-duplicate-prev")>=0,isNext:o.value.indexOf("swiper-slide-next")>=0||o.value.indexOf("swiper-slide-duplicate-next")>=0})));return xn("swiperSlide",l),()=>Xa(e.tag,{class:yS(`${o.value}`),ref:s,"data-swiper-slide-index":e.virtualIndex},e.zoom?Xa("div",{class:"swiper-zoom-container","data-swiper-zoom":"number"==typeof e.zoom?e.zoom:void 0},n.default&&n.default(l.value)):n.default&&n.default(l.value))}};var $S=TS,IS=ES;function NS(){return NS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NS.apply(this,arguments)}var OS={name:"f7-tab",render:function(e,t){var n;return Zr(),aa("div",{ref:"elRef",class:e.classes},[e.tabContent?(Zr(),aa(Hr(e.getComponent(e.tabContent)),xa((n={key:0},n.key=e.tabContent.id,n),e.getProps(e.tabContent)),null,16)):Sa(e.$slots,"default",{key:1})],2)},props:NS({tabActive:Boolean},Wb),emits:["tab:show","tab:hide"],setup:function(e,t){var n=t.emit,r=xt(null),a=xt(null),s=kn("f7route",null),o=kn("f7route",null),i=null;if(!a.value&&s&&s.route&&s.route.tab&&s.route.tab.id===e.id){var l=s.route.tab,u=l.component,c=l.asyncComponent,p=l.options;if(u||c){var d=s.route.options&&s.route.options.props;i={id:Ob(),component:u||c,isAsync:!!c,props:NS({},d||{},p&&p.props||{},{f7router:o,f7route:s},s.params)}}}var h=xt(i||null),f=function(e){h.value=e};Eb&&!a.value&&(a.value={setTabContent:f},Mb.tabs.push(a.value)),Jn((function(){r.value&&i&&(r.value.f7RouterTabLoaded=!0),Db((function(){a.value?a.value.el=r.value:(a.value={el:r.value,setTabContent:f},Mb.tabs.push(a.value))}))})),er((function(){a.value&&(Mb.tabs.splice(Mb.tabs.indexOf(a.value),1),a.value=null)})),Qn((function(){a.value&&Eb&&Tb.emit("tabRouterDidUpdate",a.value)})),Ry(r,n);var m=qa((function(){return Sb("tab",{"tab-active":e.tabActive},Vb(e))}));return{elRef:r,classes:m,tabContent:h,getComponent:function(e){return ft(e.component)},getProps:function(e){var t=e.component,n=e.props,r=[],a={};return t&&t.props&&(r=Object.keys(t.props)),r.forEach((function(e){e in n&&(a[e]=n[e])})),a}}}};function AS(){return AS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AS.apply(this,arguments)}var MS={name:"f7-tabs",render:function(e,t){return e.animated||e.swipeable?(Zr(),aa("div",{key:0,ref:"elRef",class:e.classNames(e.wrapClasses,e.classes)},[pa("div",{class:e.tabsClasses},[Sa(e.$slots,"default")],2)],2)):(Zr(),aa("div",{key:1,ref:"elRef",class:e.classNames(e.tabsClasses,e.classes)},[Sa(e.$slots,"default")],2))},props:AS({animated:Boolean,swipeable:Boolean,routable:Boolean,swiperParams:{type:Object,default:void 0}},Wb),setup:function(e){var t=xt(null);Jn((function(){e.swipeable&&e.swiperParams&&t.value&&(t.value.f7SwiperParams=e.swiperParams)}));var n=qa((function(){return Sb(Vb(e))})),r=qa((function(){return Sb({"tabs-animated-wrap":e.animated,"tabs-swipeable-wrap":e.swipeable})})),a=qa((function(){return Sb({tabs:!0,"tabs-routable":e.routable})}));return{elRef:t,classes:n,wrapClasses:r,tabsClasses:a,classNames:Sb}}};function _S(){return _S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_S.apply(this,arguments)}var RS={key:0,className:"toolbar-inner"};var PS={name:"f7-toolbar",render:function(e,t){return Zr(),aa("div",{ref:"elRef",class:e.classes},[Sa(e.$slots,"before-inner"),e.inner?(Zr(),aa("div",RS,[Sa(e.$slots,"default")])):Sa(e.$slots,"default",{key:1}),Sa(e.$slots,"after-inner")],2)},props:_S({tabbar:Boolean,labels:Boolean,scrollable:Boolean,hidden:Boolean,noShadow:Boolean,noHairline:Boolean,noBorder:Boolean,position:{type:String,default:void 0},topMd:{type:Boolean,default:void 0},topIos:{type:Boolean,default:void 0},topAurora:{type:Boolean,default:void 0},top:{type:Boolean,default:void 0},bottomMd:{type:Boolean,default:void 0},bottomIos:{type:Boolean,default:void 0},bottomAurora:{type:Boolean,default:void 0},bottom:{type:Boolean,default:void 0},inner:{type:Boolean,default:!0}},Wb),emits:["toolbar:hide","toolbar:show"],setup:function(e,t){var n=t.emit,r=xt(null),a=Fy(),s=function(e){r.value===e&&n("toolbar:hide")},o=function(e){r.value===e&&n("toolbar:show")};return Jn((function(){e.tabbar&&Eb&&r.value&&Eb.toolbar.setHighlight(r.value),Eb.on("toolbarShow",o),Eb.on("toolbarHide",s)})),er((function(){Eb.off("toolbarShow",o),Eb.off("toolbarHide",s)})),xn("TabbarContext",qa((function(){return{tabbarHasLabels:e.labels}}))),{classes:qa((function(){var t=e.tabbar,n=e.bottomMd,r=e.bottomIos,s=e.bottomAurora,o=e.bottom,i=e.position,l=e.topMd,u=e.topIos,c=e.topAurora,p=e.top,d=e.labels,h=e.scrollable,f=e.hidden,m=e.noShadow,g=e.noHairline,v=e.noBorder;return Sb("toolbar",{tabbar:t,"toolbar-bottom":a.value&&a.value.md&&n||a.value&&a.value.ios&&r||a.value&&a.value.aurora&&s||o||"bottom"===i,"toolbar-top":a.value&&a.value.md&&l||a.value&&a.value.ios&&u||a.value&&a.value.aurora&&c||p||"top"===i,"tabbar-labels":d,"tabbar-scrollable":h,"toolbar-hidden":f,"no-shadow":m,"no-hairline":g||v},Vb(e))})),elRef:r,hide:function(e){Eb&&Eb.toolbar.hide(r.value,e)},show:function(e){Eb&&Eb.toolbar.show(r.value,e)}}}};function DS(){return DS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DS.apply(this,arguments)}var LS={key:0,className:"treeview-toggle"},BS={className:"treeview-item-content"},FS={className:"treeview-item-label"},zS={key:0,className:"treeview-item-children"};var VS={name:"f7-treeview-item",render:function(e,t){var n=Vr("f7-use-icon");return Zr(),aa("div",{ref:"elRef",class:e.classes},[(Zr(),aa(Hr(e.itemRootTag),xa({class:e.itemRootClasses},e.itemRootAttrs,{onClick:e.onClick}),{default:fn((function(){return[Sa(e.$slots,"root-start"),e.needToggle?(Zr(),aa("div",LS)):va("",!0),pa("div",BS,[Sa(e.$slots,"content-start"),e.icon?(Zr(),aa(n,{key:0,icon:e.icon},null,8,["icon"])):va("",!0),Sa(e.$slots,"media"),pa("div",FS,[Sa(e.$slots,"label-start"),ma(" "+m(e.label)+" ",1),Sa(e.$slots,"label")]),Sa(e.$slots,"content"),Sa(e.$slots,"content-end")]),Sa(e.$slots,"root"),Sa(e.$slots,"root-end")]})),_:3},16,["class","onClick"])),e.hasChildren?(Zr(),aa("div",zS,[Sa(e.$slots,"children-start"),Sa(e.$slots,"default"),Sa(e.$slots,"children")])):va("",!0)],2)},components:{f7UseIcon:Jy},props:DS({toggle:{type:Boolean,default:void 0},itemToggle:Boolean,selectable:Boolean,selected:Boolean,opened:Boolean,label:String,loadChildren:Boolean,link:{type:[Boolean,String],default:void 0}},Wb,qb,Hb,jb),emits:["click","treeview:open","treeview:close","treeview:loadchildren"],setup:function(e,t){var n=t.slots,r=t.emit,a=xt(null),s=qa((function(){return n.default||n.children||n["children-start"]})),o=qa((function(){return void 0===e.toggle?s.value:e.toggle})),i=qa((function(){return Ly(e)})),l=function(e){a.value===e&&r("treeview:open",e)},u=function(e){a.value===e&&r("treeview:close",e)},c=function(e,t){a.value===e&&r("treeview:loadchildren",e,t)};Jn((function(){a.value&&Db((function(){Eb.on("treeviewOpen",l),Eb.on("treeviewClose",u),Eb.on("treeviewLoadChildren",c)}))})),er((function(){Eb&&(Eb.off("treeviewOpen",l),Eb.off("treeviewClose",u),Eb.off("treeviewLoadChildren",c))}));var p=qa((function(){return Sb("treeview-item",{"treeview-item-opened":e.opened,"treeview-load-children":e.loadChildren},Vb(e))})),d=qa((function(){return Sb("treeview-item-root",{"treeview-item-selectable":e.selectable,"treeview-item-selected":e.selected,"treeview-item-toggle":e.itemToggle},Gb(e),Kb(e))}));return{itemRootTag:qa((function(){return e.link||""===e.link?"a":"div"})),itemRootAttrs:qa((function(){var t=e.link;return!0===e.link&&(t="#"),!1===e.link&&(t=void 0),DS({href:t},Ub(e),Xb(e))})),itemRootClasses:d,classes:p,icon:i,onClick:function(e){r("click",e)},hasChildren:s,needToggle:o,elRef:a}}};function WS(){return WS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WS.apply(this,arguments)}var HS={name:"f7-treeview",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default")],2)},props:WS({},Wb),setup:function(e){return{classes:qa((function(){return Sb("treeview",Vb(e))}))}}};function jS(){return jS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jS.apply(this,arguments)}function US(){return US=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},US.apply(this,arguments)}var GS={name:"f7-view",props:US({tab:Boolean,tabActive:Boolean,name:String,router:{type:Boolean,default:!0},linksView:[Object,String],url:String,main:{type:Boolean,default:void 0},stackPages:{type:Boolean,default:void 0},xhrCache:{type:Boolean,default:void 0},xhrCacheIgnore:Array,xhrCacheIgnoreGetParameters:{type:Boolean,default:void 0},xhrCacheDuration:Number,preloadPreviousPage:{type:Boolean,default:void 0},allowDuplicateUrls:{type:Boolean,default:void 0},reloadPages:{type:Boolean,default:void 0},reloadDetail:{type:Boolean,default:void 0},masterDetailResizable:{type:Boolean,default:void 0},masterDetailBreakpoint:Number,removeElements:{type:Boolean,default:void 0},removeElementsWithTimeout:{type:Boolean,default:void 0},removeElementsTimeout:Number,restoreScrollTopOnBack:{type:Boolean,default:void 0},loadInitialPage:{type:Boolean,default:void 0},iosSwipeBack:{type:Boolean,default:void 0},iosSwipeBackAnimateShadow:{type:Boolean,default:void 0},iosSwipeBackAnimateOpacity:{type:Boolean,default:void 0},iosSwipeBackActiveArea:Number,iosSwipeBackThreshold:Number,mdSwipeBack:{type:Boolean,default:void 0},mdSwipeBackAnimateShadow:{type:Boolean,default:void 0},mdSwipeBackAnimateOpacity:{type:Boolean,default:void 0},mdSwipeBackActiveArea:Number,mdSwipeBackThreshold:Number,auroraSwipeBack:{type:Boolean,default:void 0},auroraSwipeBackAnimateShadow:{type:Boolean,default:void 0},auroraSwipeBackAnimateOpacity:{type:Boolean,default:void 0},auroraSwipeBackActiveArea:Number,auroraSwipeBackThreshold:Number,browserHistory:{type:Boolean,default:void 0},browserHistoryRoot:String,browserHistoryAnimate:{type:Boolean,default:void 0},browserHistoryAnimateOnLoad:{type:Boolean,default:void 0},browserHistorySeparator:String,browserHistoryOnLoad:{type:Boolean,default:void 0},browserHistoryInitialMatch:{type:Boolean,default:!0},browserHistoryStoreHistory:{type:Boolean,default:void 0},animate:{type:Boolean,default:void 0},transition:String,iosDynamicNavbar:{type:Boolean,default:void 0},iosAnimateNavbarBackIcon:{type:Boolean,default:void 0},materialPageLoadDelay:Number,passRouteQueryToRequest:{type:Boolean,default:void 0},passRouteParamsToRequest:{type:Boolean,default:void 0},routes:Array,routesAdd:Array,routesBeforeEnter:[Function,Array],routesBeforeLeave:[Function,Array],init:{type:Boolean,default:!0}},Wb),emits:["view:init","view:resize","swipeback:move","swipeback:beforechange","swipeback:afterchange","swipeback:beforereset","swipeback:afterreset","tab:hide","tab:show"],setup:function(e,t){var n,r,a=t.emit,s=t.slots,o=null,i=xt(null),l=null,u=function(t){a("view:init",t),e.init||(l.instance=t,o=l.instance)},c=function(){var t=ft(e.routes||[]),n=ft(e.routesAdd||[]);return yb(US({},e,{routes:t,routesAdd:n}))};if(Eb&&!o&&e.init){var p=Nb();if(o=Eb.views.create(i.value,US({},c(),{routerId:p,init:!1,on:{init:u}})),l={routerId:p,instance:o},Mb.views.push(l),o&&o.router&&(e.url||e.main)){var d=function(e,t){var n,r,a=e.getInitialUrl().initialUrl,s=e.findMatchingRoute(a),o={};return s&&s.route&&s.route.options&&(o=s.route.options.props),!s||!s.route||!s.route.component&&!s.route.asyncComponent||!0===(r=s.route).master||"function"==typeof r.master&&r.master(e.app)||(n={component:s.route.component||s.route.asyncComponent,initialComponent:t,id:Ob(),isAsync:!!s.route.asyncComponent,props:jS({f7route:s,f7router:e},o,s.params)}),{initialPage:n,initialRoute:s}}(o.router,null);n=d.initialPage,(r=d.initialRoute)&&r.route&&r.route.masterRoute&&(n=void 0,r=void 0)}}var h=xt(n?[n]:[]),f=function(e){e.forEach((function(e){e.component=ft(e.component)})),h.value=e},m=function(e,t){a("view:resize",t)},g=function(e){a("swipeback:move",e)},v=function(e){a("swipeback:beforechange",e)},b=function(e){a("swipeback:afterchange",e)},y=function(e){a("swipeback:beforereset",e)},w=function(e){a("swipeback:afterreset",e)};Jn((function(){Db((function(){if(o)l.el=i.value,l.pages=h.value,l.setPages=function(e){f([].concat(e))},n&&n.isAsync&&!n.initialComponent?n.component().then((function(){setTimeout((function(){o.init(i.value),n&&(n.el=o.router.currentPageEl,r&&r.route&&r.route.keepAlive&&(r.route.keepAliveData={pageEl:n.el}))}),100)})):(o.init(i.value),n&&(n.el=o.router.currentPageEl,r&&r.route&&r.route.keepAlive&&(r.route.keepAliveData={pageEl:n.el})));else{var t=Nb();l={el:i.value,routerId:t,pages:h.value,instance:o,setPages:function(e){f([].concat(e))}},Mb.views.push(l),l.instance=Eb.views.create(i.value,US({routerId:t},c(),{on:{init:u}})),o=l.instance}e.init&&(o.on("resize",m),o.on("swipebackMove",g),o.on("swipebackBeforeChange",v),o.on("swipebackAfterChange",b),o.on("swipebackBeforeReset",y),o.on("swipebackAfterReset",w))}))})),er((function(){o&&(o.off("resize",m),o.off("swipebackMove",g),o.off("swipebackBeforeChange",v),o.off("swipebackAfterChange",b),o.off("swipebackBeforeReset",y),o.off("swipebackAfterReset",w),o.destroy&&o.destroy(),o=null),Mb.views.splice(Mb.views.indexOf(l),1),l=null})),Qn((function(){l&&Eb&&Tb.emit("viewRouterDidUpdate",l)})),Ry(i,a);var x=qa((function(){return Sb("view",{"view-main":e.main,"tab-active":e.tabActive,tab:e.tab},Vb(e))}));return function(){return Xa("div",{ref:i,class:x.value},[s.default&&s.default()].concat(h.value.map((function(e){return Xa(function(e){return ft(e.component)}(e),US({key:e.id},function(e){var t=e.component,n=e.props,r=[],a={};return t&&t.props&&(r=Object.keys(t.props)),r.forEach((function(e){e in n&&(a[e]=n[e])})),a}(e)))}))))}}};function qS(){return qS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qS.apply(this,arguments)}var XS={name:"f7-views",render:function(e,t){return Zr(),aa("div",{class:e.classes},[Sa(e.$slots,"default")],2)},props:qS({tabs:Boolean},Wb),setup:function(e){return{classes:qa((function(){return Sb("views",{tabs:e.tabs},Vb(e))}))}}},KS=zb;var YS=function(e){return function(e){dn=e}("data-v-18439312"),e=e(),dn=null,e},JS={class:"text-align-center"},ZS=[YS((function(){return ca("div",{class:"preloader"},null,-1)}))],QS={class:"camera"},eE={ref:"videoRef",playsinline:"",autoplay:""},tE={class:"camera"},nE={ref:"imageRef",src:"static/sign.png"},rE={class:"result"};function aE(e,t,n,r,a,s,o){try{var i=e[s](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function sE(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var s=e.apply(t,n);function o(e){aE(s,r,a,o,i,"next",e)}function i(e){aE(s,r,a,o,i,"throw",e)}o(void 0)}))}}var oE=n(757),iE=n.n(oE),lE=n(211),uE="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==uE&&uE,cE="URLSearchParams"in uE,pE="Symbol"in uE&&"iterator"in Symbol,dE="FileReader"in uE&&"Blob"in uE&&function(){try{return new Blob,!0}catch(e){return!1}}(),hE="FormData"in uE,fE="ArrayBuffer"in uE;if(fE)var mE=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],gE=ArrayBuffer.isView||function(e){return e&&mE.indexOf(Object.prototype.toString.call(e))>-1};function vE(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function bE(e){return"string"!=typeof e&&(e=String(e)),e}function yE(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return pE&&(t[Symbol.iterator]=function(){return t}),t}function wE(e){this.map={},e instanceof wE?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function xE(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function kE(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function CE(e){var t=new FileReader,n=kE(t);return t.readAsArrayBuffer(e),n}function SE(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function EE(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:dE&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:hE&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:cE&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():fE&&dE&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=SE(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):fE&&(ArrayBuffer.prototype.isPrototypeOf(e)||gE(e))?this._bodyArrayBuffer=SE(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):cE&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},dE&&(this.blob=function(){var e=xE(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=xE(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(CE)}),this.text=function(){var e,t,n,r=xE(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=kE(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},hE&&(this.formData=function(){return this.text().then(IE)}),this.json=function(){return this.text().then(JSON.parse)},this}wE.prototype.append=function(e,t){e=vE(e),t=bE(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},wE.prototype.delete=function(e){delete this.map[vE(e)]},wE.prototype.get=function(e){return e=vE(e),this.has(e)?this.map[e]:null},wE.prototype.has=function(e){return this.map.hasOwnProperty(vE(e))},wE.prototype.set=function(e,t){this.map[vE(e)]=bE(t)},wE.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},wE.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),yE(e)},wE.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),yE(e)},wE.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),yE(e)},pE&&(wE.prototype[Symbol.iterator]=wE.prototype.entries);var TE=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function $E(e,t){if(!(this instanceof $E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,a=(t=t||{}).body;if(e instanceof $E){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new wE(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,a||null==e._bodyInit||(a=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new wE(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),TE.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&a)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(a),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var s=/([?&])_=[^&]*/;if(s.test(this.url))this.url=this.url.replace(s,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function IE(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),a=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(a))}})),t}function NE(e,t){if(!(this instanceof NE))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new wE(t.headers),this.url=t.url||"",this._initBody(e)}$E.prototype.clone=function(){return new $E(this,{body:this._bodyInit})},EE.call($E.prototype),EE.call(NE.prototype),NE.prototype.clone=function(){return new NE(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new wE(this.headers),url:this.url})},NE.error=function(){var e=new NE(null,{status:0,statusText:""});return e.type="error",e};var OE=[301,302,303,307,308];NE.redirect=function(e,t){if(-1===OE.indexOf(t))throw new RangeError("Invalid status code");return new NE(null,{status:t,headers:{location:e}})};var AE=uE.DOMException;try{new AE}catch(e){AE=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},AE.prototype=Object.create(Error.prototype),AE.prototype.constructor=AE}function ME(e,t){return new Promise((function(n,r){var a=new $E(e,t);if(a.signal&&a.signal.aborted)return r(new AE("Aborted","AbortError"));var s=new XMLHttpRequest;function o(){s.abort()}s.onload=function(){var e,t,r={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new wE,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var a=n.join(":").trim();t.append(r,a)}})),t)};r.url="responseURL"in s?s.responseURL:r.headers.get("X-Request-URL");var a="response"in s?s.response:s.responseText;setTimeout((function(){n(new NE(a,r))}),0)},s.onerror=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},s.ontimeout=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},s.onabort=function(){setTimeout((function(){r(new AE("Aborted","AbortError"))}),0)},s.open(a.method,function(e){try{return""===e&&uE.location.href?uE.location.href:e}catch(t){return e}}(a.url),!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&(dE?s.responseType="blob":fE&&a.headers.get("Content-Type")&&-1!==a.headers.get("Content-Type").indexOf("application/octet-stream")&&(s.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof wE?a.headers.forEach((function(e,t){s.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){s.setRequestHeader(e,bE(t.headers[e]))})),a.signal&&(a.signal.addEventListener("abort",o),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",o)}),s.send(void 0===a._bodyInit?null:a._bodyInit)}))}ME.polyfill=!0,uE.fetch||(uE.fetch=ME,uE.Headers=wE,uE.Request=$E,uE.Response=NE);var _E=it({value:500,setValue:function(e){this.value=e},getValue:function(){return this.value}}),RE=["src"],PE=["value","selected"];var DE={setup:function(){var e=JE.global.locale;return{changeLanguage:function(t){JE.global.locale=t.target.value,e=t.target.value},selectedLang:e,langs:["ja","es","en"]}}},LE=n(744);const BE=(0,LE.Z)(DE,[["render",function(e,t,n,r,a,s){var o=Vr("f7-chip");return Zr(),aa(o,{"smart-select":"","smart-select-params":{openIn:"sheet"}},{media:fn((function(){return[ca("img",{src:e.$t("img")},null,8,RE)]})),default:fn((function(){return[Or(ca("select",{onChange:t[0]||(t[0]=function(e){return r.changeLanguage(e)}),name:"language","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.key=t})},[(Zr(!0),ra(Gr,null,Ca(r.langs,(function(t,n){return Zr(),ra("option",{key:"lang-".concat(n),value:t,selected:t===r.selectedLang},m(e.$t(t)),9,PE)})),128))],544),[[As,e.key]])]})),_:1})}]]);var FE=BE,zE=function(){var e=navigator.userAgent||navigator.vendor||window.opera;return!!/android/i.test(e)},VE={components:{chip:FE},setup:function(){var e,t,n=xt(null),r=xt(null),a=xt(!1),s=xt(!1),o=xt(""),i=xt(null),l=224,u=224,c=_E.getValue(),p=function(){return window.cordova&&(zE()||(e=navigator.userAgent||navigator.vendor||window.opera,!!/iPad|iPhone|iPod/i.test(e)));var e},d=function(n){e.predict(n).then((function(e){for(var n=0,r=0,a=0;a<t;a++)e[a].probability.toFixed(2)>n&&(n=e[a].probability.toFixed(2),r=a);s.value?o.value=e[r].className:s.value=!0}))},h=function(){o.value?i.value=JE.global.t(o.value):i.value=JE.global.t("")},f=function(){var e={canvas:{width:l,height:u},capture:{width:l,height:u},use:"file",fps:30,hasThumbnail:!1,cameraFacing:"front"};window.plugin.CanvasCamera.start(e,sE(iE().mark((function e(){return iE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),(function(e){!function(e){var t="";t=zE()?"file://"+e.output.images.fullsize.file:e.output.images.fullsize.file,window.resolveLocalFileSystemURL(t,function(){var e=sE(iE().mark((function e(t){return iE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.file((function(e){var t=new FileReader;t.onloadend=sE(iE().mark((function e(){var n;return iE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Blob([new Uint8Array(t.result)],{type:"image/png"}),r.value.src=window.URL.createObjectURL(n);case 2:case"end":return e.stop()}}),e)}))),t.readAsArrayBuffer(e)}),(function(){}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(){}))}(e)}))},m=function(){var t=sE(iE().mark((function t(){return iE().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:p()?e&&window.plugin&&window.plugin.CanvasCamera&&r?(f(),setInterval((function(){r&&r.value&&r.value.src&&(d(r.value),h())}),c)):window.plugin.CanvasCamera||alert("window.plugin.CanvasCamera was not found"):e&&n.value&&setInterval((function(){d(n.value),h()}),c);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();document.addEventListener("deviceready",(function(){m()}),!1),Jn(sE(iE().mark((function s(){var o,i,c;return iE().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return zE()&&(window.fetch=ME),i="".concat(o="static/model/","model.json"),c="".concat(o,"metadata.json"),s.next=6,lE.zD(i,c);case 6:e=s.sent,t=e.getTotalClasses(),e.getClassLabels(),d(r.value),!p()&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(h=void 0,h={audio:!1,video:{facingMode:"environment",width:{min:l,ideal:l,max:l,exact:l},height:{min:u,ideal:u,max:u,exact:u}}},navigator.mediaDevices.getUserMedia(h).then((function(e){a.value=!0,n.value.srcObject=e})).catch((function(){a.value=!0}))),m();case 12:case"end":return s.stop()}var h}),s)}))));var g=qa((function(){return(p()||a.value)&&s.value}));return{videoRef:n,imageRef:r,loaded:g,user:o,start:m,result:i,isMobile:p}}};var WE=(0,LE.Z)(VE,[["render",function(e,t,n,r,a,s){var o=Vr("f7-icon"),i=Vr("f7-link"),l=Vr("f7-nav-left"),u=Vr("chip"),c=Vr("f7-nav-right"),p=Vr("f7-navbar"),d=Vr("f7-block"),h=Vr("f-card"),f=Vr("f7-row"),g=Vr("f7-page");return Zr(),aa(g,{name:"home"},{default:fn((function(){return[pa(p,null,{default:fn((function(){return[pa(l,null,{default:fn((function(){return[pa(i,{href:"/settings",class:"link"},{default:fn((function(){return[pa(o,{f7:"gear"})]})),_:1})]})),_:1}),pa(c,null,{default:fn((function(){return[pa(u)]})),_:1})]})),_:1}),pa(d,{class:"title"},{default:fn((function(){return[ca("h1",null,m(e.$t("title")),1)]})),_:1}),Or(ca("div",JS,ZS,512),[[Rs,!r.loaded]]),Or(pa(d,null,{default:fn((function(){return[pa(f,{class:"justify-content-center text-align-center camera-container"},{default:fn((function(){return[pa(h,null,{default:fn((function(){return[Or(ca("div",QS,[ca("video",eE,null,512)],512),[[Rs,!r.isMobile()]]),Or(ca("div",tE,[ca("img",nE,null,512)],512),[[Rs,r.isMobile()]])]})),_:1})]})),_:1})]})),_:1},512),[[Rs,r.loaded]]),pa(d,{class:"result-container"},{default:fn((function(){return[ca("h3",rE,m(r.result),1)]})),_:1})]})),_:1})}],["__scopeId","data-v-18439312"]]),HE=ca("p",null,"Sorry",-1),jE=ca("p",null,"Requested content not found.",-1);var UE={};var GE=(0,LE.Z)(UE,[["render",function(e,t,n,r,a,s){var o=Vr("f7-navbar"),i=Vr("f7-block"),l=Vr("f7-page");return Zr(),aa(l,null,{default:fn((function(){return[pa(o,{title:"Not found","back-link":"Back"}),pa(i,{strong:""},{default:fn((function(){return[HE,jE]})),_:1})]})),_:1})}]]);var qE={components:{chip:FE},data:function(){return{settings:_E,changeSettings:function(e){_E.setValue(e)}}}};var XE=[{path:"/",component:WE},{path:"/settings",component:(0,LE.Z)(qE,[["render",function(e,t,n,r,a,s){var o=Vr("f7-icon"),i=Vr("f7-link"),l=Vr("f7-nav-left"),u=Vr("chip"),c=Vr("f7-nav-right"),p=Vr("f7-navbar"),d=Vr("f7-block"),h=Vr("f7-range"),f=Vr("f7-page");return Zr(),aa(f,{name:"settings"},{default:fn((function(){return[pa(p,null,{default:fn((function(){return[pa(l,null,{default:fn((function(){return[pa(i,{href:"/",class:"link"},{default:fn((function(){return[pa(o,{icon:"icon-back"})]})),_:1})]})),_:1}),pa(c,null,{default:fn((function(){return[pa(u)]})),_:1})]})),_:1}),pa(d,{class:"title"},{default:fn((function(){return[ca("h1",null,m(e.$t("settings")),1)]})),_:1}),pa(d,{strong:""},{default:fn((function(){return[pa(h,{min:250,max:750,label:!0,step:5,value:a.settings.getValue(),scale:!0,"onRange:change":a.changeSettings},null,8,["value","onRange:change"])]})),_:1}),pa(d,{class:"bottom"},{default:fn((function(){return[ca("p",null,m(e.$t("developed")),1),ca("p",null,m(e.$t("version")),1)]})),_:1})]})),_:1})}],["__scopeId","data-v-5b786443"]])},{path:"(.*)",component:GE}],KE={setup:function(){var e={name:"",theme:"auto",routes:XE,navbar:{mdCenterTitle:!0}};return Jn((function(){Db((function(){}))})),{f7params:e}}};var YE=(0,LE.Z)(KE,[["render",function(e,t,n,r,a,s){var o=Vr("f7-navbar"),i=Vr("f7-block"),u=Vr("f7-page"),c=Vr("f7-view"),p=Vr("f7-panel"),h=Vr("f7-app");return Zr(),aa(h,function(e){if(!e)return null;let{class:t,style:n}=e;return t&&!_(t)&&(e.class=d(t)),n&&(e.style=l(n)),e}(ha(r.f7params)),{default:fn((function(){return[pa(p,{right:"",reveal:"","theme-dark":""},{default:fn((function(){return[pa(c,null,{default:fn((function(){return[pa(u,null,{default:fn((function(){return[pa(o,{title:"Right Panel"}),pa(i,null,{default:fn((function(){return[ma(m(e.text),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1}),pa(c,{main:"",class:"safe-areas",url:"/"})]})),_:1},16)}]]);vb.use(KS);var JE=function(e={}){const t=__VUE_I18N_LEGACY_API__&&no(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,n=!!e.globalInjection,r=new Map,a=__VUE_I18N_LEGACY_API__&&t?Ui(e):ji(e),s=Vs(""),o={get mode(){return __VUE_I18N_LEGACY_API__&&t?"legacy":"composition"},async install(e,...r){if(__VUE_I18N_PROD_DEVTOOLS__&&(e.__VUE_I18N__=o),e.__VUE_I18N_SYMBOL__=s,e.provide(e.__VUE_I18N_SYMBOL__,o),!t&&n&&function(e,t){const n=Object.create(null);dl.forEach((e=>{const r=Object.getOwnPropertyDescriptor(t,e);if(!r)throw Oi(22);const a=wt(r.value)?{get:()=>r.value.value,set(e){r.value.value=e}}:{get:()=>r.get&&r.get()};Object.defineProperty(n,e,a)})),e.config.globalProperties.$i18n=n,hl.forEach((n=>{const r=Object.getOwnPropertyDescriptor(t,n);if(!r||!r.value)throw Oi(22);Object.defineProperty(e.config.globalProperties,`$${n}`,r)}))}(e,o.global),__VUE_I18N_FULL_INSTALL__&&function(e,t,...n){const r=oo(n[0])?n[0]:{},a=!!r.useI18nComponentName;(!no(r.globalInstall)||r.globalInstall)&&(e.component(a?"i18n":qi.name,qi),e.component(Yi.name,Yi),e.component(Zi.name,Zi)),e.directive("t",Qi(t))}(e,o,...r),__VUE_I18N_LEGACY_API__&&t&&e.mixin(function(e,t,n){return{beforeCreate(){const r=_a();if(!r)throw Oi(22);const a=this.$options;if(a.i18n){const n=a.i18n;a.__i18n&&(n.__i18n=a.__i18n),n.__root=t,this===this.$root?this.$i18n=cl(e,n):(n.__injectWithOption=!0,this.$i18n=Ui(n))}else a.__i18n?this===this.$root?this.$i18n=cl(e,a):this.$i18n=Ui({__i18n:a.__i18n,__injectWithOption:!0,__root:t}):this.$i18n=e;e.__onComponentInstanceCreated(this.$i18n),n.__setInstance(r,this.$i18n),this.$t=(...e)=>this.$i18n.t(...e),this.$rt=(...e)=>this.$i18n.rt(...e),this.$tc=(...e)=>this.$i18n.tc(...e),this.$te=(e,t)=>this.$i18n.te(e,t),this.$d=(...e)=>this.$i18n.d(...e),this.$n=(...e)=>this.$i18n.n(...e),this.$tm=e=>this.$i18n.tm(e)},mounted(){if(__VUE_I18N_PROD_DEVTOOLS__){this.$el.__VUE_I18N__=this.$i18n.__composer;const e=this.__v_emitter=io(),t=this.$i18n;t.__enableEmitter&&t.__enableEmitter(e),e.on("*",ul)}},beforeUnmount(){const e=_a();if(!e)throw Oi(22);if(__VUE_I18N_PROD_DEVTOOLS__){this.__v_emitter&&(this.__v_emitter.off("*",ul),delete this.__v_emitter);const e=this.$i18n;e.__disableEmitter&&e.__disableEmitter(),delete this.$el.__VUE_I18N__}delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,n.__deleteInstance(e),delete this.$i18n}}}(a,a.__composer,o)),__VUE_I18N_PROD_DEVTOOLS__){if(!await nl(e,o))throw Oi(21);const n=io();if(t){const e=a;e.__enableEmitter&&e.__enableEmitter(n)}else{const e=a;e[Pi]&&e[Pi](n)}n.on("*",ul)}},get global(){return a},__instances:r,__getInstance:e=>r.get(e)||null,__setInstance(e,t){r.set(e,t)},__deleteInstance(e){r.delete(e)}};return o}({locale:"ja",fallbackLocale:"ja",messages:{ja:{title:"","":"","":"","":"","":"","":"","":"",img:"static/png/ja.png",ja:"",es:"",en:"",settings:"",developed:"",version:"1.0.0"},es:{title:"Lengua de signos japonesa","":"A","":"I","":"U","":"E","":"O","":"No se detecta ningn signo.",img:"static/png/es.png",ja:"Japons",es:"Espaol",en:"Ingls",settings:"Ajusta el intervalo de prediccin de la cmara",developed:"Desarrollado por Asial Corporation",version:"Versin de la App: 1.0.0"},en:{title:"Japanese Sign Language","":"A","":"I","":"U","":"E","":"O","":"No sign detected.",img:"static/png/en.png",ja:"Japanese",es:"Spanish",en:"English",settings:"Adjust the prediction interval of the camera",developed:"Developed by Asial Corporation",version:"App Version: 1.0.0"}}}),ZE=((...e)=>{const t=Bs().createApp(...e);const{mount:n}=t;return t.mount=e=>{const r=Fs(e);if(!r)return;const a=t._component;M(a)||a.render||a.template||(a.template=r.innerHTML),r.innerHTML="";const s=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),s},t})(YE).use(JE);!function(e){e.component("f7-accordion-content",Jb),e.component("f7-accordion-item",Qb),e.component("f7-accordion-toggle",ty),e.component("f7-accordion",ry),e.component("f7-actions-button",iy),e.component("f7-actions-group",uy),e.component("f7-actions-label",py),e.component("f7-actions",fy),e.component("f7-app",by),e.component("f7-appbar",wy),e.component("f7-area-chart",Sy),e.component("f7-badge",$y),e.component("f7-block-footer",Ny),e.component("f7-block-header",Ay),e.component("f7-block-title",_y),e.component("f7-block",Dy),e.component("f7-button",tw),e.component("f7-card-content",aw),e.component("f7-card-footer",ow),e.component("f7-card-header",lw),e.component("f7-card",cw),e.component("f7-checkbox",hw),e.component("f7-chip",gw),e.component("f7-col",yw),e.component("f7-fab-backdrop",xw),e.component("f7-fab-button",Sw),e.component("f7-fab-buttons",Tw),e.component("f7-fab",Iw),e.component("f7-gauge",Ow),e.component("f7-icon",Yy),e.component("f7-input",zw),e.component("f7-link",Hw),e.component("f7-list-button",Uw),e.component("f7-list-group",qw),e.component("f7-list-index",Kw),e.component("f7-list-input",Jw),e.component("f7-list-item-cell",Qw),e.component("f7-list-item-row",tx),e.component("f7-list-item",rx),e.component("f7-list",sx),e.component("f7-login-screen-title",ix),e.component("f7-login-screen",ux),e.component("f7-menu-dropdown-item",px),e.component("f7-menu-dropdown",hx),e.component("f7-menu-item",gx),e.component("f7-menu",yx),e.component("f7-message",Nx),e.component("f7-messagebar-attachment",Ax),e.component("f7-messagebar-attachments",_x),e.component("f7-messagebar-sheet-image",Dx),e.component("f7-messagebar-sheet-item",Bx),e.component("f7-messagebar-sheet",zx),e.component("f7-messagebar",Wx),e.component("f7-messages-title",jx),e.component("f7-messages",Gx),e.component("f7-nav-left",Xx),e.component("f7-nav-right",Yx),e.component("f7-nav-title-large",Qx),e.component("f7-nav-title",nk),e.component("f7-navbar",ik),e.component("f7-page-content",hk),e.component("f7-page",mk),e.component("f7-panel",bk),e.component("f7-photo-browser",wk),e.component("f7-pie-chart",xk),e.component("f7-popover",Ek),e.component("f7-popup",$k),e.component("f7-preloader",Xy),e.component("f7-progressbar",Nk),e.component("f7-radio",Mk),e.component("f7-range",Pw),e.component("f7-routable-modals",gy),e.component("f7-row",Pk),e.component("f7-searchbar",zk),e.component("f7-segmented",Hk),e.component("f7-sheet",Uk),e.component("f7-skeleton-avatar",Kk),e.component("f7-skeleton-block",Yk),e.component("f7-skeleton-image",Jk),e.component("f7-skeleton-text",Zk),e.component("f7-stepper",nC),e.component("f7-subnavbar",oC),e.component("f7-swipeout-actions",lC),e.component("f7-swipeout-button",cC),e.component("f7-swiper-slide",$S),e.component("f7-swiper",IS),e.component("f7-tab",OS),e.component("f7-tabs",MS),e.component("f7-text-editor",Bw),e.component("f7-toggle",_w),e.component("f7-toolbar",PS),e.component("f7-treeview-item",VS),e.component("f7-treeview",HS),e.component("f7-use-icon",Jy),e.component("f7-view",GS),e.component("f7-views",XS)}(ZE),ZE.mount("#app")}()}();
//# sourceMappingURL=app.js.map